! function(e) {
    var t = {};

    function i(n) {
        if (t[n]) return t[n].exports;
        var r = t[n] = {
            i: n,
            l: !1,
            exports: {}
        };
        return e[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports
    }
    i.m = e, i.c = t, i.d = function(e, t, n) {
        i.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: n
        })
    }, i.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, i.t = function(e, t) {
        if (1 & t && (e = i(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var n = Object.create(null);
        if (i.r(n), Object.defineProperty(n, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
            for (var r in e) i.d(n, r, function(t) {
                return e[t]
            }.bind(null, r));
        return n
    }, i.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return i.d(t, "a", t), t
    }, i.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, i.p = "", i(i.s = 28)
}([, , , , , , , , , , , , function(e, t, i) {
            (function(e, n) {
                    var r;
                    







/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
 
(function() {
    var o = "Expected a function",
        s = "__lodash_placeholder__",
        a = [
            ["ary", 128],
            ["bind", 1],
            ["bindKey", 2],
            ["curry", 8],
            ["curryRight", 16],
            ["flip", 512],
            ["partial", 32],
            ["partialRight", 64],
            ["rearg", 256]
        ],
        l = "[object Arguments]",
        h = "[object Array]",
        p = "[object Boolean]",
        d = "[object Date]",
        c = "[object Error]",
        u = "[object Function]",
        g = "[object GeneratorFunction]",
        f = "[object Map]",
        m = "[object Number]",
        y = "[object Object]",
        v = "[object RegExp]",
        b = "[object Set]",
        w = "[object String]",
        C = "[object Symbol]",
        S = "[object WeakMap]",
        x = "[object ArrayBuffer]",
        k = "[object DataView]",
        T = "[object Float32Array]",
        D = "[object Float64Array]",
        E = "[object Int8Array]",
        R = "[object Int16Array]",
        P = "[object Int32Array]",
        I = "[object Uint8Array]",
        M = "[object Uint16Array]",
        L = "[object Uint32Array]",
        O = /\b__p \+= '';/g,
        A = /\b(__p \+=) '' \+/g,
        B = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
        F = /&(?:amp|lt|gt|quot|#39);/g,
        N = /[&<>"']/g,
        H = RegExp(F.source),
        V = RegExp(N.source),
        j = /<%-([\s\S]+?)%>/g,
        z = /<%([\s\S]+?)%>/g,
        q = /<%=([\s\S]+?)%>/g,
        W = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        _ = /^\w*$/,
        G = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
        U = /[\\^$.*+?()[\]{}|]/g,
        K = RegExp(U.source),
        Y = /^\s+|\s+$/g,
        X = /^\s+/,
        Q = /\s+$/,
        J = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
        Z = /\{\n\/\* \[wrapped with (.+)\] \*/,
        $ = /,? & /,
        ee = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,
        te = /\\(\\)?/g,
        ie = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
        ne = /\w*$/,
        re = /^[-+]0x[0-9a-f]+$/i,
        oe = /^0b[01]+$/i,
        se = /^\[object .+?Constructor\]$/,
        ae = /^0o[0-7]+$/i,
        le = /^(?:0|[1-9]\d*)$/,
        he = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
        pe = /($^)/,
        de = /['\n\r\u2028\u2029\\]/g,
        ce = "\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",
        ue = "\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
        ge = "[\\ud800-\\udfff]",
        fe = "[" + ue + "]",
        me = "[" + ce + "]",
        ye = "\\d+",
        ve = "[\\u2700-\\u27bf]",
        be = "[a-z\\xdf-\\xf6\\xf8-\\xff]",
        we = "[^\\ud800-\\udfff" + ue + ye + "\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",
        Ce = "\\ud83c[\\udffb-\\udfff]",
        Se = "[^\\ud800-\\udfff]",
        xe = "(?:\\ud83c[\\udde6-\\uddff]){2}",
        ke = "[\\ud800-\\udbff][\\udc00-\\udfff]",
        Te = "[A-Z\\xc0-\\xd6\\xd8-\\xde]",
        De = "(?:" + be + "|" + we + ")",
        Ee = "(?:" + Te + "|" + we + ")",
        Re = "(?:" + me + "|" + Ce + ")" + "?",
        Pe = "[\\ufe0e\\ufe0f]?" + Re + ("(?:\\u200d(?:" + [Se, xe, ke].join("|") + ")[\\ufe0e\\ufe0f]?" + Re + ")*"),
        Ie = "(?:" + [ve, xe, ke].join("|") + ")" + Pe,
        Me = "(?:" + [Se + me + "?", me, xe, ke, ge].join("|") + ")",
        Le = RegExp("['â€™]", "g"),
        Oe = RegExp(me, "g"),
        Ae = RegExp(Ce + "(?=" + Ce + ")|" + Me + Pe, "g"),
        Be = RegExp([Te + "?" + be + "+(?:['â€™](?:d|ll|m|re|s|t|ve))?(?=" + [fe, Te, "$"].join("|") + ")", Ee + "+(?:['â€™](?:D|LL|M|RE|S|T|VE))?(?=" + [fe, Te + De, "$"].join("|") + ")", Te + "?" + De + "+(?:['â€™](?:d|ll|m|re|s|t|ve))?", Te + "+(?:['â€™](?:D|LL|M|RE|S|T|VE))?", "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", ye, Ie].join("|"), "g"),
        Fe = RegExp("[\\u200d\\ud800-\\udfff" + ce + "\\ufe0e\\ufe0f]"),
        Ne = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
        He = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"],
        Ve = -1,
        je = {};
    je[T] = je[D] = je[E] = je[R] = je[P] = je[I] = je["[object Uint8ClampedArray]"] = je[M] = je[L] = !0, je[l] = je[h] = je[x] = je[p] = je[k] = je[d] = je[c] = je[u] = je[f] = je[m] = je[y] = je[v] = je[b] = je[w] = je[S] = !1;
    var ze = {};
    ze[l] = ze[h] = ze[x] = ze[k] = ze[p] = ze[d] = ze[T] = ze[D] = ze[E] = ze[R] = ze[P] = ze[f] = ze[m] = ze[y] = ze[v] = ze[b] = ze[w] = ze[C] = ze[I] = ze["[object Uint8ClampedArray]"] = ze[M] = ze[L] = !0, ze[c] = ze[u] = ze[S] = !1;
    var qe = {
            "\\": "\\",
            "'": "'",
            "\n": "n",
            "\r": "r",
            "\u2028": "u2028",
            "\u2029": "u2029"
        },
        We = parseFloat,
        _e = parseInt,
        Ge = "object" == typeof e && e && e.Object === Object && e,
        Ue = "object" == typeof self && self && self.Object === Object && self,
        Ke = Ge || Ue || Function("return this")(),
        Ye = t && !t.nodeType && t,
        Xe = Ye && "object" == typeof n && n && !n.nodeType && n,
        Qe = Xe && Xe.exports === Ye,
        Je = Qe && Ge.process,
        Ze = function() {
            try {
                var e = Xe && Xe.require && Xe.require("util").types;
                return e || Je && Je.binding && Je.binding("util")
            } catch (e) {}
        }(),
        $e = Ze && Ze.isArrayBuffer,
        et = Ze && Ze.isDate,
        tt = Ze && Ze.isMap,
        it = Ze && Ze.isRegExp,
        nt = Ze && Ze.isSet,
        rt = Ze && Ze.isTypedArray;

    function ot(e, t, i) {
        switch (i.length) {
            case 0:
                return e.call(t);
            case 1:
                return e.call(t, i[0]);
            case 2:
                return e.call(t, i[0], i[1]);
            case 3:
                return e.call(t, i[0], i[1], i[2])
        }
        return e.apply(t, i)
    }

    function st(e, t, i, n) {
        for (var r = -1, o = null == e ? 0 : e.length; ++r < o;) {
            var s = e[r];
            t(n, s, i(s), e)
        }
        return n
    }

    function at(e, t) {
        for (var i = -1, n = null == e ? 0 : e.length; ++i < n && !1 !== t(e[i], i, e););
        return e
    }

    function lt(e, t) {
        for (var i = null == e ? 0 : e.length; i-- && !1 !== t(e[i], i, e););
        return e
    }

    function ht(e, t) {
        for (var i = -1, n = null == e ? 0 : e.length; ++i < n;)
            if (!t(e[i], i, e)) return !1;
        return !0
    }

    function pt(e, t) {
        for (var i = -1, n = null == e ? 0 : e.length, r = 0, o = []; ++i < n;) {
            var s = e[i];
            t(s, i, e) && (o[r++] = s)
        }
        return o
    }

    function dt(e, t) {
        return !!(null == e ? 0 : e.length) && Ct(e, t, 0) > -1
    }

    function ct(e, t, i) {
        for (var n = -1, r = null == e ? 0 : e.length; ++n < r;)
            if (i(t, e[n])) return !0;
        return !1
    }

    function ut(e, t) {
        for (var i = -1, n = null == e ? 0 : e.length, r = Array(n); ++i < n;) r[i] = t(e[i], i, e);
        return r
    }

    function gt(e, t) {
        for (var i = -1, n = t.length, r = e.length; ++i < n;) e[r + i] = t[i];
        return e
    }

    function ft(e, t, i, n) {
        var r = -1,
            o = null == e ? 0 : e.length;
        for (n && o && (i = e[++r]); ++r < o;) i = t(i, e[r], r, e);
        return i
    }

    function mt(e, t, i, n) {
        var r = null == e ? 0 : e.length;
        for (n && r && (i = e[--r]); r--;) i = t(i, e[r], r, e);
        return i
    }

    function yt(e, t) {
        for (var i = -1, n = null == e ? 0 : e.length; ++i < n;)
            if (t(e[i], i, e)) return !0;
        return !1
    }
    var vt = Tt("length");

    function bt(e, t, i) {
        var n;
        return i(e, (function(e, i, r) {
            if (t(e, i, r)) return n = i, !1
        })), n
    }

    function wt(e, t, i, n) {
        for (var r = e.length, o = i + (n ? 1 : -1); n ? o-- : ++o < r;)
            if (t(e[o], o, e)) return o;
        return -1
    }

    function Ct(e, t, i) {
        return t == t ? function(e, t, i) {
            var n = i - 1,
                r = e.length;
            for (; ++n < r;)
                if (e[n] === t) return n;
            return -1
        }(e, t, i) : wt(e, xt, i)
    }

    function St(e, t, i, n) {
        for (var r = i - 1, o = e.length; ++r < o;)
            if (n(e[r], t)) return r;
        return -1
    }

    function xt(e) {
        return e != e
    }

    function kt(e, t) {
        var i = null == e ? 0 : e.length;
        return i ? Rt(e, t) / i : NaN
    }

    function Tt(e) {
        return function(t) {
            return null == t ? void 0 : t[e]
        }
    }

    function Dt(e) {
        return function(t) {
            return null == e ? void 0 : e[t]
        }
    }

    function Et(e, t, i, n, r) {
        return r(e, (function(e, r, o) {
            i = n ? (n = !1, e) : t(i, e, r, o)
        })), i
    }

    function Rt(e, t) {
        for (var i, n = -1, r = e.length; ++n < r;) {
            var o = t(e[n]);
            void 0 !== o && (i = void 0 === i ? o : i + o)
        }
        return i
    }

    function Pt(e, t) {
        for (var i = -1, n = Array(e); ++i < e;) n[i] = t(i);
        return n
    }

    function It(e) {
        return function(t) {
            return e(t)
        }
    }

    function Mt(e, t) {
        return ut(t, (function(t) {
            return e[t]
        }))
    }

    function Lt(e, t) {
        return e.has(t)
    }

    function Ot(e, t) {
        for (var i = -1, n = e.length; ++i < n && Ct(t, e[i], 0) > -1;);
        return i
    }

    function At(e, t) {
        for (var i = e.length; i-- && Ct(t, e[i], 0) > -1;);
        return i
    }

    function Bt(e, t) {
        for (var i = e.length, n = 0; i--;) e[i] === t && ++n;
        return n
    }
    var Ft = Dt({
            "Ã€": "A",
            "Ã": "A",
            "Ã‚": "A",
            "Ãƒ": "A",
            "Ã„": "A",
            "Ã…": "A",
            "Ã ": "a",
            "Ã¡": "a",
            "Ã¢": "a",
            "Ã£": "a",
            "Ã¤": "a",
            "Ã¥": "a",
            "Ã‡": "C",
            "Ã§": "c",
            "Ã": "D",
            "Ã°": "d",
            "Ãˆ": "E",
            "Ã‰": "E",
            "ÃŠ": "E",
            "Ã‹": "E",
            "Ã¨": "e",
            "Ã©": "e",
            "Ãª": "e",
            "Ã«": "e",
            "ÃŒ": "I",
            "Ã": "I",
            "ÃŽ": "I",
            "Ã": "I",
            "Ã¬": "i",
            "Ã­": "i",
            "Ã®": "i",
            "Ã¯": "i",
            "Ã‘": "N",
            "Ã±": "n",
            "Ã’": "O",
            "Ã“": "O",
            "Ã”": "O",
            "Ã•": "O",
            "Ã–": "O",
            "Ã˜": "O",
            "Ã²": "o",
            "Ã³": "o",
            "Ã´": "o",
            "Ãµ": "o",
            "Ã¶": "o",
            "Ã¸": "o",
            "Ã™": "U",
            "Ãš": "U",
            "Ã›": "U",
            "Ãœ": "U",
            "Ã¹": "u",
            "Ãº": "u",
            "Ã»": "u",
            "Ã¼": "u",
            "Ã": "Y",
            "Ã½": "y",
            "Ã¿": "y",
            "Ã†": "Ae",
            "Ã¦": "ae",
            "Ãž": "Th",
            "Ã¾": "th",
            "ÃŸ": "ss",
            "Ä€": "A",
            "Ä‚": "A",
            "Ä„": "A",
            "Ä": "a",
            "Äƒ": "a",
            "Ä…": "a",
            "Ä†": "C",
            "Äˆ": "C",
            "ÄŠ": "C",
            "ÄŒ": "C",
            "Ä‡": "c",
            "Ä‰": "c",
            "Ä‹": "c",
            "Ä": "c",
            "ÄŽ": "D",
            "Ä": "D",
            "Ä": "d",
            "Ä‘": "d",
            "Ä’": "E",
            "Ä”": "E",
            "Ä–": "E",
            "Ä˜": "E",
            "Äš": "E",
            "Ä“": "e",
            "Ä•": "e",
            "Ä—": "e",
            "Ä™": "e",
            "Ä›": "e",
            "Äœ": "G",
            "Äž": "G",
            "Ä ": "G",
            "Ä¢": "G",
            "Ä": "g",
            "ÄŸ": "g",
            "Ä¡": "g",
            "Ä£": "g",
            "Ä¤": "H",
            "Ä¦": "H",
            "Ä¥": "h",
            "Ä§": "h",
            "Ä¨": "I",
            "Äª": "I",
            "Ä¬": "I",
            "Ä®": "I",
            "Ä°": "I",
            "Ä©": "i",
            "Ä«": "i",
            "Ä­": "i",
            "Ä¯": "i",
            "Ä±": "i",
            "Ä´": "J",
            "Äµ": "j",
            "Ä¶": "K",
            "Ä·": "k",
            "Ä¸": "k",
            "Ä¹": "L",
            "Ä»": "L",
            "Ä½": "L",
            "Ä¿": "L",
            "Å": "L",
            "Äº": "l",
            "Ä¼": "l",
            "Ä¾": "l",
            "Å€": "l",
            "Å‚": "l",
            "Åƒ": "N",
            "Å…": "N",
            "Å‡": "N",
            "ÅŠ": "N",
            "Å„": "n",
            "Å†": "n",
            "Åˆ": "n",
            "Å‹": "n",
            "ÅŒ": "O",
            "ÅŽ": "O",
            "Å": "O",
            "Å": "o",
            "Å": "o",
            "Å‘": "o",
            "Å”": "R",
            "Å–": "R",
            "Å˜": "R",
            "Å•": "r",
            "Å—": "r",
            "Å™": "r",
            "Åš": "S",
            "Åœ": "S",
            "Åž": "S",
            "Å ": "S",
            "Å›": "s",
            "Å": "s",
            "ÅŸ": "s",
            "Å¡": "s",
            "Å¢": "T",
            "Å¤": "T",
            "Å¦": "T",
            "Å£": "t",
            "Å¥": "t",
            "Å§": "t",
            "Å¨": "U",
            "Åª": "U",
            "Å¬": "U",
            "Å®": "U",
            "Å°": "U",
            "Å²": "U",
            "Å©": "u",
            "Å«": "u",
            "Å­": "u",
            "Å¯": "u",
            "Å±": "u",
            "Å³": "u",
            "Å´": "W",
            "Åµ": "w",
            "Å¶": "Y",
            "Å·": "y",
            "Å¸": "Y",
            "Å¹": "Z",
            "Å»": "Z",
            "Å½": "Z",
            "Åº": "z",
            "Å¼": "z",
            "Å¾": "z",
            "Ä²": "IJ",
            "Ä³": "ij",
            "Å’": "Oe",
            "Å“": "oe",
            "Å‰": "'n",
            "Å¿": "s"
        }),
        Nt = Dt({
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        });

    function Ht(e) {
        return "\\" + qe[e]
    }

    function Vt(e) {
        return Fe.test(e)
    }

    function jt(e) {
        var t = -1,
            i = Array(e.size);
        return e.forEach((function(e, n) {
            i[++t] = [n, e]
        })), i
    }

    function zt(e, t) {
        return function(i) {
            return e(t(i))
        }
    }

    function qt(e, t) {
        for (var i = -1, n = e.length, r = 0, o = []; ++i < n;) {
            var a = e[i];
            a !== t && a !== s || (e[i] = s, o[r++] = i)
        }
        return o
    }

    function Wt(e) {
        var t = -1,
            i = Array(e.size);
        return e.forEach((function(e) {
            i[++t] = e
        })), i
    }

    function _t(e) {
        var t = -1,
            i = Array(e.size);
        return e.forEach((function(e) {
            i[++t] = [e, e]
        })), i
    }

    function Gt(e) {
        return Vt(e) ? function(e) {
            var t = Ae.lastIndex = 0;
            for (; Ae.test(e);) ++t;
            return t
        }(e) : vt(e)
    }

    function Ut(e) {
        return Vt(e) ? function(e) {
            return e.match(Ae) || []
        }(e) : function(e) {
            return e.split("")
        }(e)
    }
    var Kt = Dt({
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'"
    });
    var Yt = function e(t) {
        var i, n = (t = null == t ? Ke : Yt.defaults(Ke.Object(), t, Yt.pick(Ke, He))).Array,
            r = t.Date,
            ce = t.Error,
            ue = t.Function,
            ge = t.Math,
            fe = t.Object,
            me = t.RegExp,
            ye = t.String,
            ve = t.TypeError,
            be = n.prototype,
            we = ue.prototype,
            Ce = fe.prototype,
            Se = t["__core-js_shared__"],
            xe = we.toString,
            ke = Ce.hasOwnProperty,
            Te = 0,
            De = (i = /[^.]+$/.exec(Se && Se.keys && Se.keys.IE_PROTO || "")) ? "Symbol(src)_1." + i : "",
            Ee = Ce.toString,
            Re = xe.call(fe),
            Pe = Ke._,
            Ie = me("^" + xe.call(ke).replace(U, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
            Me = Qe ? t.Buffer : void 0,
            Ae = t.Symbol,
            Fe = t.Uint8Array,
            qe = Me ? Me.allocUnsafe : void 0,
            Ge = zt(fe.getPrototypeOf, fe),
            Ue = fe.create,
            Ye = Ce.propertyIsEnumerable,
            Xe = be.splice,
            Je = Ae ? Ae.isConcatSpreadable : void 0,
            Ze = Ae ? Ae.iterator : void 0,
            vt = Ae ? Ae.toStringTag : void 0,
            Dt = function() {
                try {
                    var e = $r(fe, "defineProperty");
                    return e({}, "", {}), e
                } catch (e) {}
            }(),
            Xt = t.clearTimeout !== Ke.clearTimeout && t.clearTimeout,
            Qt = r && r.now !== Ke.Date.now && r.now,
            Jt = t.setTimeout !== Ke.setTimeout && t.setTimeout,
            Zt = ge.ceil,
            $t = ge.floor,
            ei = fe.getOwnPropertySymbols,
            ti = Me ? Me.isBuffer : void 0,
            ii = t.isFinite,
            ni = be.join,
            ri = zt(fe.keys, fe),
            oi = ge.max,
            si = ge.min,
            ai = r.now,
            li = t.parseInt,
            hi = ge.random,
            pi = be.reverse,
            di = $r(t, "DataView"),
            ci = $r(t, "Map"),
            ui = $r(t, "Promise"),
            gi = $r(t, "Set"),
            fi = $r(t, "WeakMap"),
            mi = $r(fe, "create"),
            yi = fi && new fi,
            vi = {},
            bi = Eo(di),
            wi = Eo(ci),
            Ci = Eo(ui),
            Si = Eo(gi),
            xi = Eo(fi),
            ki = Ae ? Ae.prototype : void 0,
            Ti = ki ? ki.valueOf : void 0,
            Di = ki ? ki.toString : void 0;

        function Ei(e) {
            if (_s(e) && !Os(e) && !(e instanceof Mi)) {
                if (e instanceof Ii) return e;
                if (ke.call(e, "__wrapped__")) return Ro(e)
            }
            return new Ii(e)
        }
        var Ri = function() {
            function e() {}
            return function(t) {
                if (!Ws(t)) return {};
                if (Ue) return Ue(t);
                e.prototype = t;
                var i = new e;
                return e.prototype = void 0, i
            }
        }();

        function Pi() {}

        function Ii(e, t) {
            this.__wrapped__ = e, this.__actions__ = [], this.__chain__ = !!t, this.__index__ = 0, this.__values__ = void 0
        }

        function Mi(e) {
            this.__wrapped__ = e, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = 4294967295, this.__views__ = []
        }

        function Li(e) {
            var t = -1,
                i = null == e ? 0 : e.length;
            for (this.clear(); ++t < i;) {
                var n = e[t];
                this.set(n[0], n[1])
            }
        }

        function Oi(e) {
            var t = -1,
                i = null == e ? 0 : e.length;
            for (this.clear(); ++t < i;) {
                var n = e[t];
                this.set(n[0], n[1])
            }
        }

        function Ai(e) {
            var t = -1,
                i = null == e ? 0 : e.length;
            for (this.clear(); ++t < i;) {
                var n = e[t];
                this.set(n[0], n[1])
            }
        }

        function Bi(e) {
            var t = -1,
                i = null == e ? 0 : e.length;
            for (this.__data__ = new Ai; ++t < i;) this.add(e[t])
        }

        function Fi(e) {
            var t = this.__data__ = new Oi(e);
            this.size = t.size
        }

        function Ni(e, t) {
            var i = Os(e),
                n = !i && Ls(e),
                r = !i && !n && Ns(e),
                o = !i && !n && !r && Zs(e),
                s = i || n || r || o,
                a = s ? Pt(e.length, ye) : [],
                l = a.length;
            for (var h in e) !t && !ke.call(e, h) || s && ("length" == h || r && ("offset" == h || "parent" == h) || o && ("buffer" == h || "byteLength" == h || "byteOffset" == h) || so(h, l)) || a.push(h);
            return a
        }

        function Hi(e) {
            var t = e.length;
            return t ? e[Fn(0, t - 1)] : void 0
        }

        function Vi(e, t) {
            return ko(yr(e), Yi(t, 0, e.length))
        }

        function ji(e) {
            return ko(yr(e))
        }

        function zi(e, t, i) {
            (void 0 !== i && !Ps(e[t], i) || void 0 === i && !(t in e)) && Ui(e, t, i)
        }

        function qi(e, t, i) {
            var n = e[t];
            ke.call(e, t) && Ps(n, i) && (void 0 !== i || t in e) || Ui(e, t, i)
        }

        function Wi(e, t) {
            for (var i = e.length; i--;)
                if (Ps(e[i][0], t)) return i;
            return -1
        }

        function _i(e, t, i, n) {
            return $i(e, (function(e, r, o) {
                t(n, e, i(e), o)
            })), n
        }

        function Gi(e, t) {
            return e && vr(t, wa(t), e)
        }

        function Ui(e, t, i) {
            "__proto__" == t && Dt ? Dt(e, t, {
                configurable: !0,
                enumerable: !0,
                value: i,
                writable: !0
            }) : e[t] = i
        }

        function Ki(e, t) {
            for (var i = -1, r = t.length, o = n(r), s = null == e; ++i < r;) o[i] = s ? void 0 : fa(e, t[i]);
            return o
        }

        function Yi(e, t, i) {
            return e == e && (void 0 !== i && (e = e <= i ? e : i), void 0 !== t && (e = e >= t ? e : t)), e
        }

        function Xi(e, t, i, n, r, o) {
            var s, a = 1 & t,
                h = 2 & t,
                c = 4 & t;
            if (i && (s = r ? i(e, n, r, o) : i(e)), void 0 !== s) return s;
            if (!Ws(e)) return e;
            var S = Os(e);
            if (S) {
                if (s = function(e) {
                        var t = e.length,
                            i = new e.constructor(t);
                        t && "string" == typeof e[0] && ke.call(e, "index") && (i.index = e.index, i.input = e.input);
                        return i
                    }(e), !a) return yr(e, s)
            } else {
                var O = io(e),
                    A = O == u || O == g;
                if (Ns(e)) return dr(e, a);
                if (O == y || O == l || A && !r) {
                    if (s = h || A ? {} : ro(e), !a) return h ? function(e, t) {
                        return vr(e, to(e), t)
                    }(e, function(e, t) {
                        return e && vr(t, Ca(t), e)
                    }(s, e)) : function(e, t) {
                        return vr(e, eo(e), t)
                    }(e, Gi(s, e))
                } else {
                    if (!ze[O]) return r ? e : {};
                    s = function(e, t, i) {
                        var n = e.constructor;
                        switch (t) {
                            case x:
                                return cr(e);
                            case p:
                            case d:
                                return new n(+e);
                            case k:
                                return function(e, t) {
                                    var i = t ? cr(e.buffer) : e.buffer;
                                    return new e.constructor(i, e.byteOffset, e.byteLength)
                                }(e, i);
                            case T:
                            case D:
                            case E:
                            case R:
                            case P:
                            case I:
                            case "[object Uint8ClampedArray]":
                            case M:
                            case L:
                                return ur(e, i);
                            case f:
                                return new n;
                            case m:
                            case w:
                                return new n(e);
                            case v:
                                return function(e) {
                                    var t = new e.constructor(e.source, ne.exec(e));
                                    return t.lastIndex = e.lastIndex, t
                                }(e);
                            case b:
                                return new n;
                            case C:
                                return r = e, Ti ? fe(Ti.call(r)) : {}
                        }
                        var r
                    }(e, O, a)
                }
            }
            o || (o = new Fi);
            var B = o.get(e);
            if (B) return B;
            o.set(e, s), Xs(e) ? e.forEach((function(n) {
                s.add(Xi(n, t, i, n, e, o))
            })) : Gs(e) && e.forEach((function(n, r) {
                s.set(r, Xi(n, t, i, r, e, o))
            }));
            var F = S ? void 0 : (c ? h ? Ur : Gr : h ? Ca : wa)(e);
            return at(F || e, (function(n, r) {
                F && (n = e[r = n]), qi(s, r, Xi(n, t, i, r, e, o))
            })), s
        }

        function Qi(e, t, i) {
            var n = i.length;
            if (null == e) return !n;
            for (e = fe(e); n--;) {
                var r = i[n],
                    o = t[r],
                    s = e[r];
                if (void 0 === s && !(r in e) || !o(s)) return !1
            }
            return !0
        }

        function Ji(e, t, i) {
            if ("function" != typeof e) throw new ve(o);
            return wo((function() {
                e.apply(void 0, i)
            }), t)
        }

        function Zi(e, t, i, n) {
            var r = -1,
                o = dt,
                s = !0,
                a = e.length,
                l = [],
                h = t.length;
            if (!a) return l;
            i && (t = ut(t, It(i))), n ? (o = ct, s = !1) : t.length >= 200 && (o = Lt, s = !1, t = new Bi(t));
            e: for (; ++r < a;) {
                var p = e[r],
                    d = null == i ? p : i(p);
                if (p = n || 0 !== p ? p : 0, s && d == d) {
                    for (var c = h; c--;)
                        if (t[c] === d) continue e;
                    l.push(p)
                } else o(t, d, n) || l.push(p)
            }
            return l
        }
        Ei.templateSettings = {
            escape: j,
            evaluate: z,
            interpolate: q,
            variable: "",
            imports: {
                _: Ei
            }
        }, Ei.prototype = Pi.prototype, Ei.prototype.constructor = Ei, Ii.prototype = Ri(Pi.prototype), Ii.prototype.constructor = Ii, Mi.prototype = Ri(Pi.prototype), Mi.prototype.constructor = Mi, Li.prototype.clear = function() {
            this.__data__ = mi ? mi(null) : {}, this.size = 0
        }, Li.prototype.delete = function(e) {
            var t = this.has(e) && delete this.__data__[e];
            return this.size -= t ? 1 : 0, t
        }, Li.prototype.get = function(e) {
            var t = this.__data__;
            if (mi) {
                var i = t[e];
                return "__lodash_hash_undefined__" === i ? void 0 : i
            }
            return ke.call(t, e) ? t[e] : void 0
        }, Li.prototype.has = function(e) {
            var t = this.__data__;
            return mi ? void 0 !== t[e] : ke.call(t, e)
        }, Li.prototype.set = function(e, t) {
            var i = this.__data__;
            return this.size += this.has(e) ? 0 : 1, i[e] = mi && void 0 === t ? "__lodash_hash_undefined__" : t, this
        }, Oi.prototype.clear = function() {
            this.__data__ = [], this.size = 0
        }, Oi.prototype.delete = function(e) {
            var t = this.__data__,
                i = Wi(t, e);
            return !(i < 0) && (i == t.length - 1 ? t.pop() : Xe.call(t, i, 1), --this.size, !0)
        }, Oi.prototype.get = function(e) {
            var t = this.__data__,
                i = Wi(t, e);
            return i < 0 ? void 0 : t[i][1]
        }, Oi.prototype.has = function(e) {
            return Wi(this.__data__, e) > -1
        }, Oi.prototype.set = function(e, t) {
            var i = this.__data__,
                n = Wi(i, e);
            return n < 0 ? (++this.size, i.push([e, t])) : i[n][1] = t, this
        }, Ai.prototype.clear = function() {
            this.size = 0, this.__data__ = {
                hash: new Li,
                map: new(ci || Oi),
                string: new Li
            }
        }, Ai.prototype.delete = function(e) {
            var t = Jr(this, e).delete(e);
            return this.size -= t ? 1 : 0, t
        }, Ai.prototype.get = function(e) {
            return Jr(this, e).get(e)
        }, Ai.prototype.has = function(e) {
            return Jr(this, e).has(e)
        }, Ai.prototype.set = function(e, t) {
            var i = Jr(this, e),
                n = i.size;
            return i.set(e, t), this.size += i.size == n ? 0 : 1, this
        }, Bi.prototype.add = Bi.prototype.push = function(e) {
            return this.__data__.set(e, "__lodash_hash_undefined__"), this
        }, Bi.prototype.has = function(e) {
            return this.__data__.has(e)
        }, Fi.prototype.clear = function() {
            this.__data__ = new Oi, this.size = 0
        }, Fi.prototype.delete = function(e) {
            var t = this.__data__,
                i = t.delete(e);
            return this.size = t.size, i
        }, Fi.prototype.get = function(e) {
            return this.__data__.get(e)
        }, Fi.prototype.has = function(e) {
            return this.__data__.has(e)
        }, Fi.prototype.set = function(e, t) {
            var i = this.__data__;
            if (i instanceof Oi) {
                var n = i.__data__;
                if (!ci || n.length < 199) return n.push([e, t]), this.size = ++i.size, this;
                i = this.__data__ = new Ai(n)
            }
            return i.set(e, t), this.size = i.size, this
        };
        var $i = Cr(ln),
            en = Cr(hn, !0);

        function tn(e, t) {
            var i = !0;
            return $i(e, (function(e, n, r) {
                return i = !!t(e, n, r)
            })), i
        }

        function nn(e, t, i) {
            for (var n = -1, r = e.length; ++n < r;) {
                var o = e[n],
                    s = t(o);
                if (null != s && (void 0 === a ? s == s && !Js(s) : i(s, a))) var a = s,
                    l = o
            }
            return l
        }

        function rn(e, t) {
            var i = [];
            return $i(e, (function(e, n, r) {
                t(e, n, r) && i.push(e)
            })), i
        }

        function on(e, t, i, n, r) {
            var o = -1,
                s = e.length;
            for (i || (i = oo), r || (r = []); ++o < s;) {
                var a = e[o];
                t > 0 && i(a) ? t > 1 ? on(a, t - 1, i, n, r) : gt(r, a) : n || (r[r.length] = a)
            }
            return r
        }
        var sn = Sr(),
            an = Sr(!0);

        function ln(e, t) {
            return e && sn(e, t, wa)
        }

        function hn(e, t) {
            return e && an(e, t, wa)
        }

        function pn(e, t) {
            return pt(t, (function(t) {
                return js(e[t])
            }))
        }

        function dn(e, t) {
            for (var i = 0, n = (t = ar(t, e)).length; null != e && i < n;) e = e[Do(t[i++])];
            return i && i == n ? e : void 0
        }

        function cn(e, t, i) {
            var n = t(e);
            return Os(e) ? n : gt(n, i(e))
        }

        function un(e) {
            return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : vt && vt in fe(e) ? function(e) {
                var t = ke.call(e, vt),
                    i = e[vt];
                try {
                    e[vt] = void 0;
                    var n = !0
                } catch (e) {}
                var r = Ee.call(e);
                n && (t ? e[vt] = i : delete e[vt]);
                return r
            }(e) : function(e) {
                return Ee.call(e)
            }(e)
        }

        function gn(e, t) {
            return e > t
        }

        function fn(e, t) {
            return null != e && ke.call(e, t)
        }

        function mn(e, t) {
            return null != e && t in fe(e)
        }

        function yn(e, t, i) {
            for (var r = i ? ct : dt, o = e[0].length, s = e.length, a = s, l = n(s), h = 1 / 0, p = []; a--;) {
                var d = e[a];
                a && t && (d = ut(d, It(t))), h = si(d.length, h), l[a] = !i && (t || o >= 120 && d.length >= 120) ? new Bi(a && d) : void 0
            }
            d = e[0];
            var c = -1,
                u = l[0];
            e: for (; ++c < o && p.length < h;) {
                var g = d[c],
                    f = t ? t(g) : g;
                if (g = i || 0 !== g ? g : 0, !(u ? Lt(u, f) : r(p, f, i))) {
                    for (a = s; --a;) {
                        var m = l[a];
                        if (!(m ? Lt(m, f) : r(e[a], f, i))) continue e
                    }
                    u && u.push(f), p.push(g)
                }
            }
            return p
        }

        function vn(e, t, i) {
            var n = null == (e = mo(e, t = ar(t, e))) ? e : e[Do(Vo(t))];
            return null == n ? void 0 : ot(n, e, i)
        }

        function bn(e) {
            return _s(e) && un(e) == l
        }

        function wn(e, t, i, n, r) {
            return e === t || (null == e || null == t || !_s(e) && !_s(t) ? e != e && t != t : function(e, t, i, n, r, o) {
                var s = Os(e),
                    a = Os(t),
                    u = s ? h : io(e),
                    g = a ? h : io(t),
                    S = (u = u == l ? y : u) == y,
                    T = (g = g == l ? y : g) == y,
                    D = u == g;
                if (D && Ns(e)) {
                    if (!Ns(t)) return !1;
                    s = !0, S = !1
                }
                if (D && !S) return o || (o = new Fi), s || Zs(e) ? Wr(e, t, i, n, r, o) : function(e, t, i, n, r, o, s) {
                    switch (i) {
                        case k:
                            if (e.byteLength != t.byteLength || e.byteOffset != t.byteOffset) return !1;
                            e = e.buffer, t = t.buffer;
                        case x:
                            return !(e.byteLength != t.byteLength || !o(new Fe(e), new Fe(t)));
                        case p:
                        case d:
                        case m:
                            return Ps(+e, +t);
                        case c:
                            return e.name == t.name && e.message == t.message;
                        case v:
                        case w:
                            return e == t + "";
                        case f:
                            var a = jt;
                        case b:
                            var l = 1 & n;
                            if (a || (a = Wt), e.size != t.size && !l) return !1;
                            var h = s.get(e);
                            if (h) return h == t;
                            n |= 2, s.set(e, t);
                            var u = Wr(a(e), a(t), n, r, o, s);
                            return s.delete(e), u;
                        case C:
                            if (Ti) return Ti.call(e) == Ti.call(t)
                    }
                    return !1
                }(e, t, u, i, n, r, o);
                if (!(1 & i)) {
                    var E = S && ke.call(e, "__wrapped__"),
                        R = T && ke.call(t, "__wrapped__");
                    if (E || R) {
                        var P = E ? e.value() : e,
                            I = R ? t.value() : t;
                        return o || (o = new Fi), r(P, I, i, n, o)
                    }
                }
                if (!D) return !1;
                return o || (o = new Fi),
                    function(e, t, i, n, r, o) {
                        var s = 1 & i,
                            a = Gr(e),
                            l = a.length,
                            h = Gr(t).length;
                        if (l != h && !s) return !1;
                        var p = l;
                        for (; p--;) {
                            var d = a[p];
                            if (!(s ? d in t : ke.call(t, d))) return !1
                        }
                        var c = o.get(e),
                            u = o.get(t);
                        if (c && u) return c == t && u == e;
                        var g = !0;
                        o.set(e, t), o.set(t, e);
                        var f = s;
                        for (; ++p < l;) {
                            d = a[p];
                            var m = e[d],
                                y = t[d];
                            if (n) var v = s ? n(y, m, d, t, e, o) : n(m, y, d, e, t, o);
                            if (!(void 0 === v ? m === y || r(m, y, i, n, o) : v)) {
                                g = !1;
                                break
                            }
                            f || (f = "constructor" == d)
                        }
                        if (g && !f) {
                            var b = e.constructor,
                                w = t.constructor;
                            b == w || !("constructor" in e) || !("constructor" in t) || "function" == typeof b && b instanceof b && "function" == typeof w && w instanceof w || (g = !1)
                        }
                        return o.delete(e), o.delete(t), g
                    }(e, t, i, n, r, o)
            }(e, t, i, n, wn, r))
        }

        function Cn(e, t, i, n) {
            var r = i.length,
                o = r,
                s = !n;
            if (null == e) return !o;
            for (e = fe(e); r--;) {
                var a = i[r];
                if (s && a[2] ? a[1] !== e[a[0]] : !(a[0] in e)) return !1
            }
            for (; ++r < o;) {
                var l = (a = i[r])[0],
                    h = e[l],
                    p = a[1];
                if (s && a[2]) {
                    if (void 0 === h && !(l in e)) return !1
                } else {
                    var d = new Fi;
                    if (n) var c = n(h, p, l, e, t, d);
                    if (!(void 0 === c ? wn(p, h, 3, n, d) : c)) return !1
                }
            }
            return !0
        }

        function Sn(e) {
            return !(!Ws(e) || (t = e, De && De in t)) && (js(e) ? Ie : se).test(Eo(e));
            var t
        }

        function xn(e) {
            return "function" == typeof e ? e : null == e ? Ua : "object" == typeof e ? Os(e) ? Pn(e[0], e[1]) : Rn(e) : tl(e)
        }

        function kn(e) {
            if (!co(e)) return ri(e);
            var t = [];
            for (var i in fe(e)) ke.call(e, i) && "constructor" != i && t.push(i);
            return t
        }

        function Tn(e) {
            if (!Ws(e)) return function(e) {
                var t = [];
                if (null != e)
                    for (var i in fe(e)) t.push(i);
                return t
            }(e);
            var t = co(e),
                i = [];
            for (var n in e)("constructor" != n || !t && ke.call(e, n)) && i.push(n);
            return i
        }

        function Dn(e, t) {
            return e < t
        }

        function En(e, t) {
            var i = -1,
                r = Bs(e) ? n(e.length) : [];
            return $i(e, (function(e, n, o) {
                r[++i] = t(e, n, o)
            })), r
        }

        function Rn(e) {
            var t = Zr(e);
            return 1 == t.length && t[0][2] ? go(t[0][0], t[0][1]) : function(i) {
                return i === e || Cn(i, e, t)
            }
        }

        function Pn(e, t) {
            return lo(e) && uo(t) ? go(Do(e), t) : function(i) {
                var n = fa(i, e);
                return void 0 === n && n === t ? ma(i, e) : wn(t, n, 3)
            }
        }

        function In(e, t, i, n, r) {
            e !== t && sn(t, (function(o, s) {
                if (r || (r = new Fi), Ws(o)) ! function(e, t, i, n, r, o, s) {
                    var a = vo(e, i),
                        l = vo(t, i),
                        h = s.get(l);
                    if (h) return void zi(e, i, h);
                    var p = o ? o(a, l, i + "", e, t, s) : void 0,
                        d = void 0 === p;
                    if (d) {
                        var c = Os(l),
                            u = !c && Ns(l),
                            g = !c && !u && Zs(l);
                        p = l, c || u || g ? Os(a) ? p = a : Fs(a) ? p = yr(a) : u ? (d = !1, p = dr(l, !0)) : g ? (d = !1, p = ur(l, !0)) : p = [] : Ks(l) || Ls(l) ? (p = a, Ls(a) ? p = sa(a) : Ws(a) && !js(a) || (p = ro(l))) : d = !1
                    }
                    d && (s.set(l, p), r(p, l, n, o, s), s.delete(l));
                    zi(e, i, p)
                }(e, t, s, i, In, n, r);
                else {
                    var a = n ? n(vo(e, s), o, s + "", e, t, r) : void 0;
                    void 0 === a && (a = o), zi(e, s, a)
                }
            }), Ca)
        }

        function Mn(e, t) {
            var i = e.length;
            if (i) return so(t += t < 0 ? i : 0, i) ? e[t] : void 0
        }

        function Ln(e, t, i) {
            t = t.length ? ut(t, (function(e) {
                return Os(e) ? function(t) {
                    return dn(t, 1 === e.length ? e[0] : e)
                } : e
            })) : [Ua];
            var n = -1;
            return t = ut(t, It(Qr())),
                function(e, t) {
                    var i = e.length;
                    for (e.sort(t); i--;) e[i] = e[i].value;
                    return e
                }(En(e, (function(e, i, r) {
                    return {
                        criteria: ut(t, (function(t) {
                            return t(e)
                        })),
                        index: ++n,
                        value: e
                    }
                })), (function(e, t) {
                    return function(e, t, i) {
                        var n = -1,
                            r = e.criteria,
                            o = t.criteria,
                            s = r.length,
                            a = i.length;
                        for (; ++n < s;) {
                            var l = gr(r[n], o[n]);
                            if (l) {
                                if (n >= a) return l;
                                var h = i[n];
                                return l * ("desc" == h ? -1 : 1)
                            }
                        }
                        return e.index - t.index
                    }(e, t, i)
                }))
        }

        function On(e, t, i) {
            for (var n = -1, r = t.length, o = {}; ++n < r;) {
                var s = t[n],
                    a = dn(e, s);
                i(a, s) && zn(o, ar(s, e), a)
            }
            return o
        }

        function An(e, t, i, n) {
            var r = n ? St : Ct,
                o = -1,
                s = t.length,
                a = e;
            for (e === t && (t = yr(t)), i && (a = ut(e, It(i))); ++o < s;)
                for (var l = 0, h = t[o], p = i ? i(h) : h;
                    (l = r(a, p, l, n)) > -1;) a !== e && Xe.call(a, l, 1), Xe.call(e, l, 1);
            return e
        }

        function Bn(e, t) {
            for (var i = e ? t.length : 0, n = i - 1; i--;) {
                var r = t[i];
                if (i == n || r !== o) {
                    var o = r;
                    so(r) ? Xe.call(e, r, 1) : $n(e, r)
                }
            }
            return e
        }

        function Fn(e, t) {
            return e + $t(hi() * (t - e + 1))
        }

        function Nn(e, t) {
            var i = "";
            if (!e || t < 1 || t > 9007199254740991) return i;
            do {
                t % 2 && (i += e), (t = $t(t / 2)) && (e += e)
            } while (t);
            return i
        }

        function Hn(e, t) {
            return Co(fo(e, t, Ua), e + "")
        }

        function Vn(e) {
            return Hi(Pa(e))
        }

        function jn(e, t) {
            var i = Pa(e);
            return ko(i, Yi(t, 0, i.length))
        }

        function zn(e, t, i, n) {
            if (!Ws(e)) return e;
            for (var r = -1, o = (t = ar(t, e)).length, s = o - 1, a = e; null != a && ++r < o;) {
                var l = Do(t[r]),
                    h = i;
                if ("__proto__" === l || "constructor" === l || "prototype" === l) return e;
                if (r != s) {
                    var p = a[l];
                    void 0 === (h = n ? n(p, l, a) : void 0) && (h = Ws(p) ? p : so(t[r + 1]) ? [] : {})
                }
                qi(a, l, h), a = a[l]
            }
            return e
        }
        var qn = yi ? function(e, t) {
                return yi.set(e, t), e
            } : Ua,
            Wn = Dt ? function(e, t) {
                return Dt(e, "toString", {
                    configurable: !0,
                    enumerable: !1,
                    value: Wa(t),
                    writable: !0
                })
            } : Ua;

        function _n(e) {
            return ko(Pa(e))
        }

        function Gn(e, t, i) {
            var r = -1,
                o = e.length;
            t < 0 && (t = -t > o ? 0 : o + t), (i = i > o ? o : i) < 0 && (i += o), o = t > i ? 0 : i - t >>> 0, t >>>= 0;
            for (var s = n(o); ++r < o;) s[r] = e[r + t];
            return s
        }

        function Un(e, t) {
            var i;
            return $i(e, (function(e, n, r) {
                return !(i = t(e, n, r))
            })), !!i
        }

        function Kn(e, t, i) {
            var n = 0,
                r = null == e ? n : e.length;
            if ("number" == typeof t && t == t && r <= 2147483647) {
                for (; n < r;) {
                    var o = n + r >>> 1,
                        s = e[o];
                    null !== s && !Js(s) && (i ? s <= t : s < t) ? n = o + 1 : r = o
                }
                return r
            }
            return Yn(e, t, Ua, i)
        }

        function Yn(e, t, i, n) {
            var r = 0,
                o = null == e ? 0 : e.length;
            if (0 === o) return 0;
            for (var s = (t = i(t)) != t, a = null === t, l = Js(t), h = void 0 === t; r < o;) {
                var p = $t((r + o) / 2),
                    d = i(e[p]),
                    c = void 0 !== d,
                    u = null === d,
                    g = d == d,
                    f = Js(d);
                if (s) var m = n || g;
                else m = h ? g && (n || c) : a ? g && c && (n || !u) : l ? g && c && !u && (n || !f) : !u && !f && (n ? d <= t : d < t);
                m ? r = p + 1 : o = p
            }
            return si(o, 4294967294)
        }

        function Xn(e, t) {
            for (var i = -1, n = e.length, r = 0, o = []; ++i < n;) {
                var s = e[i],
                    a = t ? t(s) : s;
                if (!i || !Ps(a, l)) {
                    var l = a;
                    o[r++] = 0 === s ? 0 : s
                }
            }
            return o
        }

        function Qn(e) {
            return "number" == typeof e ? e : Js(e) ? NaN : +e
        }

        function Jn(e) {
            if ("string" == typeof e) return e;
            if (Os(e)) return ut(e, Jn) + "";
            if (Js(e)) return Di ? Di.call(e) : "";
            var t = e + "";
            return "0" == t && 1 / e == -1 / 0 ? "-0" : t
        }

        function Zn(e, t, i) {
            var n = -1,
                r = dt,
                o = e.length,
                s = !0,
                a = [],
                l = a;
            if (i) s = !1, r = ct;
            else if (o >= 200) {
                var h = t ? null : Nr(e);
                if (h) return Wt(h);
                s = !1, r = Lt, l = new Bi
            } else l = t ? [] : a;
            e: for (; ++n < o;) {
                var p = e[n],
                    d = t ? t(p) : p;
                if (p = i || 0 !== p ? p : 0, s && d == d) {
                    for (var c = l.length; c--;)
                        if (l[c] === d) continue e;
                    t && l.push(d), a.push(p)
                } else r(l, d, i) || (l !== a && l.push(d), a.push(p))
            }
            return a
        }

        function $n(e, t) {
            return null == (e = mo(e, t = ar(t, e))) || delete e[Do(Vo(t))]
        }

        function er(e, t, i, n) {
            return zn(e, t, i(dn(e, t)), n)
        }

        function tr(e, t, i, n) {
            for (var r = e.length, o = n ? r : -1;
                (n ? o-- : ++o < r) && t(e[o], o, e););
            return i ? Gn(e, n ? 0 : o, n ? o + 1 : r) : Gn(e, n ? o + 1 : 0, n ? r : o)
        }

        function ir(e, t) {
            var i = e;
            return i instanceof Mi && (i = i.value()), ft(t, (function(e, t) {
                return t.func.apply(t.thisArg, gt([e], t.args))
            }), i)
        }

        function nr(e, t, i) {
            var r = e.length;
            if (r < 2) return r ? Zn(e[0]) : [];
            for (var o = -1, s = n(r); ++o < r;)
                for (var a = e[o], l = -1; ++l < r;) l != o && (s[o] = Zi(s[o] || a, e[l], t, i));
            return Zn(on(s, 1), t, i)
        }

        function rr(e, t, i) {
            for (var n = -1, r = e.length, o = t.length, s = {}; ++n < r;) {
                var a = n < o ? t[n] : void 0;
                i(s, e[n], a)
            }
            return s
        }

        function or(e) {
            return Fs(e) ? e : []
        }

        function sr(e) {
            return "function" == typeof e ? e : Ua
        }

        function ar(e, t) {
            return Os(e) ? e : lo(e, t) ? [e] : To(aa(e))
        }
        var lr = Hn;

        function hr(e, t, i) {
            var n = e.length;
            return i = void 0 === i ? n : i, !t && i >= n ? e : Gn(e, t, i)
        }
        var pr = Xt || function(e) {
            return Ke.clearTimeout(e)
        };

        function dr(e, t) {
            if (t) return e.slice();
            var i = e.length,
                n = qe ? qe(i) : new e.constructor(i);
            return e.copy(n), n
        }

        function cr(e) {
            var t = new e.constructor(e.byteLength);
            return new Fe(t).set(new Fe(e)), t
        }

        function ur(e, t) {
            var i = t ? cr(e.buffer) : e.buffer;
            return new e.constructor(i, e.byteOffset, e.length)
        }

        function gr(e, t) {
            if (e !== t) {
                var i = void 0 !== e,
                    n = null === e,
                    r = e == e,
                    o = Js(e),
                    s = void 0 !== t,
                    a = null === t,
                    l = t == t,
                    h = Js(t);
                if (!a && !h && !o && e > t || o && s && l && !a && !h || n && s && l || !i && l || !r) return 1;
                if (!n && !o && !h && e < t || h && i && r && !n && !o || a && i && r || !s && r || !l) return -1
            }
            return 0
        }

        function fr(e, t, i, r) {
            for (var o = -1, s = e.length, a = i.length, l = -1, h = t.length, p = oi(s - a, 0), d = n(h + p), c = !r; ++l < h;) d[l] = t[l];
            for (; ++o < a;)(c || o < s) && (d[i[o]] = e[o]);
            for (; p--;) d[l++] = e[o++];
            return d
        }

        function mr(e, t, i, r) {
            for (var o = -1, s = e.length, a = -1, l = i.length, h = -1, p = t.length, d = oi(s - l, 0), c = n(d + p), u = !r; ++o < d;) c[o] = e[o];
            for (var g = o; ++h < p;) c[g + h] = t[h];
            for (; ++a < l;)(u || o < s) && (c[g + i[a]] = e[o++]);
            return c
        }

        function yr(e, t) {
            var i = -1,
                r = e.length;
            for (t || (t = n(r)); ++i < r;) t[i] = e[i];
            return t
        }

        function vr(e, t, i, n) {
            var r = !i;
            i || (i = {});
            for (var o = -1, s = t.length; ++o < s;) {
                var a = t[o],
                    l = n ? n(i[a], e[a], a, i, e) : void 0;
                void 0 === l && (l = e[a]), r ? Ui(i, a, l) : qi(i, a, l)
            }
            return i
        }

        function br(e, t) {
            return function(i, n) {
                var r = Os(i) ? st : _i,
                    o = t ? t() : {};
                return r(i, e, Qr(n, 2), o)
            }
        }

        function wr(e) {
            return Hn((function(t, i) {
                var n = -1,
                    r = i.length,
                    o = r > 1 ? i[r - 1] : void 0,
                    s = r > 2 ? i[2] : void 0;
                for (o = e.length > 3 && "function" == typeof o ? (r--, o) : void 0, s && ao(i[0], i[1], s) && (o = r < 3 ? void 0 : o, r = 1), t = fe(t); ++n < r;) {
                    var a = i[n];
                    a && e(t, a, n, o)
                }
                return t
            }))
        }

        function Cr(e, t) {
            return function(i, n) {
                if (null == i) return i;
                if (!Bs(i)) return e(i, n);
                for (var r = i.length, o = t ? r : -1, s = fe(i);
                    (t ? o-- : ++o < r) && !1 !== n(s[o], o, s););
                return i
            }
        }

        function Sr(e) {
            return function(t, i, n) {
                for (var r = -1, o = fe(t), s = n(t), a = s.length; a--;) {
                    var l = s[e ? a : ++r];
                    if (!1 === i(o[l], l, o)) break
                }
                return t
            }
        }

        function xr(e) {
            return function(t) {
                var i = Vt(t = aa(t)) ? Ut(t) : void 0,
                    n = i ? i[0] : t.charAt(0),
                    r = i ? hr(i, 1).join("") : t.slice(1);
                return n[e]() + r
            }
        }

        function kr(e) {
            return function(t) {
                return ft(ja(La(t).replace(Le, "")), e, "")
            }
        }

        function Tr(e) {
            return function() {
                var t = arguments;
                switch (t.length) {
                    case 0:
                        return new e;
                    case 1:
                        return new e(t[0]);
                    case 2:
                        return new e(t[0], t[1]);
                    case 3:
                        return new e(t[0], t[1], t[2]);
                    case 4:
                        return new e(t[0], t[1], t[2], t[3]);
                    case 5:
                        return new e(t[0], t[1], t[2], t[3], t[4]);
                    case 6:
                        return new e(t[0], t[1], t[2], t[3], t[4], t[5]);
                    case 7:
                        return new e(t[0], t[1], t[2], t[3], t[4], t[5], t[6])
                }
                var i = Ri(e.prototype),
                    n = e.apply(i, t);
                return Ws(n) ? n : i
            }
        }

        function Dr(e) {
            return function(t, i, n) {
                var r = fe(t);
                if (!Bs(t)) {
                    var o = Qr(i, 3);
                    t = wa(t), i = function(e) {
                        return o(r[e], e, r)
                    }
                }
                var s = e(t, i, n);
                return s > -1 ? r[o ? t[s] : s] : void 0
            }
        }

        function Er(e) {
            return _r((function(t) {
                var i = t.length,
                    n = i,
                    r = Ii.prototype.thru;
                for (e && t.reverse(); n--;) {
                    var s = t[n];
                    if ("function" != typeof s) throw new ve(o);
                    if (r && !a && "wrapper" == Yr(s)) var a = new Ii([], !0)
                }
                for (n = a ? n : i; ++n < i;) {
                    var l = Yr(s = t[n]),
                        h = "wrapper" == l ? Kr(s) : void 0;
                    a = h && ho(h[0]) && 424 == h[1] && !h[4].length && 1 == h[9] ? a[Yr(h[0])].apply(a, h[3]) : 1 == s.length && ho(s) ? a[l]() : a.thru(s)
                }
                return function() {
                    var e = arguments,
                        n = e[0];
                    if (a && 1 == e.length && Os(n)) return a.plant(n).value();
                    for (var r = 0, o = i ? t[r].apply(this, e) : n; ++r < i;) o = t[r].call(this, o);
                    return o
                }
            }))
        }

        function Rr(e, t, i, r, o, s, a, l, h, p) {
            var d = 128 & t,
                c = 1 & t,
                u = 2 & t,
                g = 24 & t,
                f = 512 & t,
                m = u ? void 0 : Tr(e);
            return function y() {
                for (var v = arguments.length, b = n(v), w = v; w--;) b[w] = arguments[w];
                if (g) var C = Xr(y),
                    S = Bt(b, C);
                if (r && (b = fr(b, r, o, g)), s && (b = mr(b, s, a, g)), v -= S, g && v < p) {
                    var x = qt(b, C);
                    return Br(e, t, Rr, y.placeholder, i, b, x, l, h, p - v)
                }
                var k = c ? i : this,
                    T = u ? k[e] : e;
                return v = b.length, l ? b = yo(b, l) : f && v > 1 && b.reverse(), d && h < v && (b.length = h), this && this !== Ke && this instanceof y && (T = m || Tr(T)), T.apply(k, b)
            }
        }

        function Pr(e, t) {
            return function(i, n) {
                return function(e, t, i, n) {
                    return ln(e, (function(e, r, o) {
                        t(n, i(e), r, o)
                    })), n
                }(i, e, t(n), {})
            }
        }

        function Ir(e, t) {
            return function(i, n) {
                var r;
                if (void 0 === i && void 0 === n) return t;
                if (void 0 !== i && (r = i), void 0 !== n) {
                    if (void 0 === r) return n;
                    "string" == typeof i || "string" == typeof n ? (i = Jn(i), n = Jn(n)) : (i = Qn(i), n = Qn(n)), r = e(i, n)
                }
                return r
            }
        }

        function Mr(e) {
            return _r((function(t) {
                return t = ut(t, It(Qr())), Hn((function(i) {
                    var n = this;
                    return e(t, (function(e) {
                        return ot(e, n, i)
                    }))
                }))
            }))
        }

        function Lr(e, t) {
            var i = (t = void 0 === t ? " " : Jn(t)).length;
            if (i < 2) return i ? Nn(t, e) : t;
            var n = Nn(t, Zt(e / Gt(t)));
            return Vt(t) ? hr(Ut(n), 0, e).join("") : n.slice(0, e)
        }

        function Or(e) {
            return function(t, i, r) {
                return r && "number" != typeof r && ao(t, i, r) && (i = r = void 0), t = ia(t), void 0 === i ? (i = t, t = 0) : i = ia(i),
                    function(e, t, i, r) {
                        for (var o = -1, s = oi(Zt((t - e) / (i || 1)), 0), a = n(s); s--;) a[r ? s : ++o] = e, e += i;
                        return a
                    }(t, i, r = void 0 === r ? t < i ? 1 : -1 : ia(r), e)
            }
        }

        function Ar(e) {
            return function(t, i) {
                return "string" == typeof t && "string" == typeof i || (t = oa(t), i = oa(i)), e(t, i)
            }
        }

        function Br(e, t, i, n, r, o, s, a, l, h) {
            var p = 8 & t;
            t |= p ? 32 : 64, 4 & (t &= ~(p ? 64 : 32)) || (t &= -4);
            var d = [e, t, r, p ? o : void 0, p ? s : void 0, p ? void 0 : o, p ? void 0 : s, a, l, h],
                c = i.apply(void 0, d);
            return ho(e) && bo(c, d), c.placeholder = n, So(c, e, t)
        }

        function Fr(e) {
            var t = ge[e];
            return function(e, i) {
                if (e = oa(e), (i = null == i ? 0 : si(na(i), 292)) && ii(e)) {
                    var n = (aa(e) + "e").split("e");
                    return +((n = (aa(t(n[0] + "e" + (+n[1] + i))) + "e").split("e"))[0] + "e" + (+n[1] - i))
                }
                return t(e)
            }
        }
        var Nr = gi && 1 / Wt(new gi([, -0]))[1] == 1 / 0 ? function(e) {
            return new gi(e)
        } : Ja;

        function Hr(e) {
            return function(t) {
                var i = io(t);
                return i == f ? jt(t) : i == b ? _t(t) : function(e, t) {
                    return ut(t, (function(t) {
                        return [t, e[t]]
                    }))
                }(t, e(t))
            }
        }

        function Vr(e, t, i, r, a, l, h, p) {
            var d = 2 & t;
            if (!d && "function" != typeof e) throw new ve(o);
            var c = r ? r.length : 0;
            if (c || (t &= -97, r = a = void 0), h = void 0 === h ? h : oi(na(h), 0), p = void 0 === p ? p : na(p), c -= a ? a.length : 0, 64 & t) {
                var u = r,
                    g = a;
                r = a = void 0
            }
            var f = d ? void 0 : Kr(e),
                m = [e, t, i, r, a, u, g, l, h, p];
            if (f && function(e, t) {
                    var i = e[1],
                        n = t[1],
                        r = i | n,
                        o = r < 131,
                        a = 128 == n && 8 == i || 128 == n && 256 == i && e[7].length <= t[8] || 384 == n && t[7].length <= t[8] && 8 == i;
                    if (!o && !a) return e;
                    1 & n && (e[2] = t[2], r |= 1 & i ? 0 : 4);
                    var l = t[3];
                    if (l) {
                        var h = e[3];
                        e[3] = h ? fr(h, l, t[4]) : l, e[4] = h ? qt(e[3], s) : t[4]
                    }(l = t[5]) && (h = e[5], e[5] = h ? mr(h, l, t[6]) : l, e[6] = h ? qt(e[5], s) : t[6]);
                    (l = t[7]) && (e[7] = l);
                    128 & n && (e[8] = null == e[8] ? t[8] : si(e[8], t[8]));
                    null == e[9] && (e[9] = t[9]);
                    e[0] = t[0], e[1] = r
                }(m, f), e = m[0], t = m[1], i = m[2], r = m[3], a = m[4], !(p = m[9] = void 0 === m[9] ? d ? 0 : e.length : oi(m[9] - c, 0)) && 24 & t && (t &= -25), t && 1 != t) y = 8 == t || 16 == t ? function(e, t, i) {
                var r = Tr(e);
                return function o() {
                    for (var s = arguments.length, a = n(s), l = s, h = Xr(o); l--;) a[l] = arguments[l];
                    var p = s < 3 && a[0] !== h && a[s - 1] !== h ? [] : qt(a, h);
                    if ((s -= p.length) < i) return Br(e, t, Rr, o.placeholder, void 0, a, p, void 0, void 0, i - s);
                    var d = this && this !== Ke && this instanceof o ? r : e;
                    return ot(d, this, a)
                }
            }(e, t, p) : 32 != t && 33 != t || a.length ? Rr.apply(void 0, m) : function(e, t, i, r) {
                var o = 1 & t,
                    s = Tr(e);
                return function t() {
                    for (var a = -1, l = arguments.length, h = -1, p = r.length, d = n(p + l), c = this && this !== Ke && this instanceof t ? s : e; ++h < p;) d[h] = r[h];
                    for (; l--;) d[h++] = arguments[++a];
                    return ot(c, o ? i : this, d)
                }
            }(e, t, i, r);
            else var y = function(e, t, i) {
                var n = 1 & t,
                    r = Tr(e);
                return function t() {
                    var o = this && this !== Ke && this instanceof t ? r : e;
                    return o.apply(n ? i : this, arguments)
                }
            }(e, t, i);
            return So((f ? qn : bo)(y, m), e, t)
        }

        function jr(e, t, i, n) {
            return void 0 === e || Ps(e, Ce[i]) && !ke.call(n, i) ? t : e
        }

        function zr(e, t, i, n, r, o) {
            return Ws(e) && Ws(t) && (o.set(t, e), In(e, t, void 0, zr, o), o.delete(t)), e
        }

        function qr(e) {
            return Ks(e) ? void 0 : e
        }

        function Wr(e, t, i, n, r, o) {
            var s = 1 & i,
                a = e.length,
                l = t.length;
            if (a != l && !(s && l > a)) return !1;
            var h = o.get(e),
                p = o.get(t);
            if (h && p) return h == t && p == e;
            var d = -1,
                c = !0,
                u = 2 & i ? new Bi : void 0;
            for (o.set(e, t), o.set(t, e); ++d < a;) {
                var g = e[d],
                    f = t[d];
                if (n) var m = s ? n(f, g, d, t, e, o) : n(g, f, d, e, t, o);
                if (void 0 !== m) {
                    if (m) continue;
                    c = !1;
                    break
                }
                if (u) {
                    if (!yt(t, (function(e, t) {
                            if (!Lt(u, t) && (g === e || r(g, e, i, n, o))) return u.push(t)
                        }))) {
                        c = !1;
                        break
                    }
                } else if (g !== f && !r(g, f, i, n, o)) {
                    c = !1;
                    break
                }
            }
            return o.delete(e), o.delete(t), c
        }

        function _r(e) {
            return Co(fo(e, void 0, Ao), e + "")
        }

        function Gr(e) {
            return cn(e, wa, eo)
        }

        function Ur(e) {
            return cn(e, Ca, to)
        }
        var Kr = yi ? function(e) {
            return yi.get(e)
        } : Ja;

        function Yr(e) {
            for (var t = e.name + "", i = vi[t], n = ke.call(vi, t) ? i.length : 0; n--;) {
                var r = i[n],
                    o = r.func;
                if (null == o || o == e) return r.name
            }
            return t
        }

        function Xr(e) {
            return (ke.call(Ei, "placeholder") ? Ei : e).placeholder
        }

        function Qr() {
            var e = Ei.iteratee || Ka;
            return e = e === Ka ? xn : e, arguments.length ? e(arguments[0], arguments[1]) : e
        }

        function Jr(e, t) {
            var i, n, r = e.__data__;
            return ("string" == (n = typeof(i = t)) || "number" == n || "symbol" == n || "boolean" == n ? "__proto__" !== i : null === i) ? r["string" == typeof t ? "string" : "hash"] : r.map
        }

        function Zr(e) {
            for (var t = wa(e), i = t.length; i--;) {
                var n = t[i],
                    r = e[n];
                t[i] = [n, r, uo(r)]
            }
            return t
        }

        function $r(e, t) {
            var i = function(e, t) {
                return null == e ? void 0 : e[t]
            }(e, t);
            return Sn(i) ? i : void 0
        }
        var eo = ei ? function(e) {
                return null == e ? [] : (e = fe(e), pt(ei(e), (function(t) {
                    return Ye.call(e, t)
                })))
            } : rl,
            to = ei ? function(e) {
                for (var t = []; e;) gt(t, eo(e)), e = Ge(e);
                return t
            } : rl,
            io = un;

        function no(e, t, i) {
            for (var n = -1, r = (t = ar(t, e)).length, o = !1; ++n < r;) {
                var s = Do(t[n]);
                if (!(o = null != e && i(e, s))) break;
                e = e[s]
            }
            return o || ++n != r ? o : !!(r = null == e ? 0 : e.length) && qs(r) && so(s, r) && (Os(e) || Ls(e))
        }

        function ro(e) {
            return "function" != typeof e.constructor || co(e) ? {} : Ri(Ge(e))
        }

        function oo(e) {
            return Os(e) || Ls(e) || !!(Je && e && e[Je])
        }

        function so(e, t) {
            var i = typeof e;
            return !!(t = null == t ? 9007199254740991 : t) && ("number" == i || "symbol" != i && le.test(e)) && e > -1 && e % 1 == 0 && e < t
        }

        function ao(e, t, i) {
            if (!Ws(i)) return !1;
            var n = typeof t;
            return !!("number" == n ? Bs(i) && so(t, i.length) : "string" == n && t in i) && Ps(i[t], e)
        }

        function lo(e, t) {
            if (Os(e)) return !1;
            var i = typeof e;
            return !("number" != i && "symbol" != i && "boolean" != i && null != e && !Js(e)) || (_.test(e) || !W.test(e) || null != t && e in fe(t))
        }

        function ho(e) {
            var t = Yr(e),
                i = Ei[t];
            if ("function" != typeof i || !(t in Mi.prototype)) return !1;
            if (e === i) return !0;
            var n = Kr(i);
            return !!n && e === n[0]
        }(di && io(new di(new ArrayBuffer(1))) != k || ci && io(new ci) != f || ui && "[object Promise]" != io(ui.resolve()) || gi && io(new gi) != b || fi && io(new fi) != S) && (io = function(e) {
            var t = un(e),
                i = t == y ? e.constructor : void 0,
                n = i ? Eo(i) : "";
            if (n) switch (n) {
                case bi:
                    return k;
                case wi:
                    return f;
                case Ci:
                    return "[object Promise]";
                case Si:
                    return b;
                case xi:
                    return S
            }
            return t
        });
        var po = Se ? js : ol;

        function co(e) {
            var t = e && e.constructor;
            return e === ("function" == typeof t && t.prototype || Ce)
        }

        function uo(e) {
            return e == e && !Ws(e)
        }

        function go(e, t) {
            return function(i) {
                return null != i && (i[e] === t && (void 0 !== t || e in fe(i)))
            }
        }

        function fo(e, t, i) {
            return t = oi(void 0 === t ? e.length - 1 : t, 0),
                function() {
                    for (var r = arguments, o = -1, s = oi(r.length - t, 0), a = n(s); ++o < s;) a[o] = r[t + o];
                    o = -1;
                    for (var l = n(t + 1); ++o < t;) l[o] = r[o];
                    return l[t] = i(a), ot(e, this, l)
                }
        }

        function mo(e, t) {
            return t.length < 2 ? e : dn(e, Gn(t, 0, -1))
        }

        function yo(e, t) {
            for (var i = e.length, n = si(t.length, i), r = yr(e); n--;) {
                var o = t[n];
                e[n] = so(o, i) ? r[o] : void 0
            }
            return e
        }

        function vo(e, t) {
            if (("constructor" !== t || "function" != typeof e[t]) && "__proto__" != t) return e[t]
        }
        var bo = xo(qn),
            wo = Jt || function(e, t) {
                return Ke.setTimeout(e, t)
            },
            Co = xo(Wn);

        function So(e, t, i) {
            var n = t + "";
            return Co(e, function(e, t) {
                var i = t.length;
                if (!i) return e;
                var n = i - 1;
                return t[n] = (i > 1 ? "& " : "") + t[n], t = t.join(i > 2 ? ", " : " "), e.replace(J, "{\n/* [wrapped with " + t + "] */\n")
            }(n, function(e, t) {
                return at(a, (function(i) {
                    var n = "_." + i[0];
                    t & i[1] && !dt(e, n) && e.push(n)
                })), e.sort()
            }(function(e) {
                var t = e.match(Z);
                return t ? t[1].split($) : []
            }(n), i)))
        }

        function xo(e) {
            var t = 0,
                i = 0;
            return function() {
                var n = ai(),
                    r = 16 - (n - i);
                if (i = n, r > 0) {
                    if (++t >= 800) return arguments[0]
                } else t = 0;
                return e.apply(void 0, arguments)
            }
        }

        function ko(e, t) {
            var i = -1,
                n = e.length,
                r = n - 1;
            for (t = void 0 === t ? n : t; ++i < t;) {
                var o = Fn(i, r),
                    s = e[o];
                e[o] = e[i], e[i] = s
            }
            return e.length = t, e
        }
        var To = function(e) {
            var t = xs(e, (function(e) {
                    return 500 === i.size && i.clear(), e
                })),
                i = t.cache;
            return t
        }((function(e) {
            var t = [];
            return 46 === e.charCodeAt(0) && t.push(""), e.replace(G, (function(e, i, n, r) {
                t.push(n ? r.replace(te, "$1") : i || e)
            })), t
        }));

        function Do(e) {
            if ("string" == typeof e || Js(e)) return e;
            var t = e + "";
            return "0" == t && 1 / e == -1 / 0 ? "-0" : t
        }

        function Eo(e) {
            if (null != e) {
                try {
                    return xe.call(e)
                } catch (e) {}
                try {
                    return e + ""
                } catch (e) {}
            }
            return ""
        }

        function Ro(e) {
            if (e instanceof Mi) return e.clone();
            var t = new Ii(e.__wrapped__, e.__chain__);
            return t.__actions__ = yr(e.__actions__), t.__index__ = e.__index__, t.__values__ = e.__values__, t
        }
        var Po = Hn((function(e, t) {
                return Fs(e) ? Zi(e, on(t, 1, Fs, !0)) : []
            })),
            Io = Hn((function(e, t) {
                var i = Vo(t);
                return Fs(i) && (i = void 0), Fs(e) ? Zi(e, on(t, 1, Fs, !0), Qr(i, 2)) : []
            })),
            Mo = Hn((function(e, t) {
                var i = Vo(t);
                return Fs(i) && (i = void 0), Fs(e) ? Zi(e, on(t, 1, Fs, !0), void 0, i) : []
            }));

        function Lo(e, t, i) {
            var n = null == e ? 0 : e.length;
            if (!n) return -1;
            var r = null == i ? 0 : na(i);
            return r < 0 && (r = oi(n + r, 0)), wt(e, Qr(t, 3), r)
        }

        function Oo(e, t, i) {
            var n = null == e ? 0 : e.length;
            if (!n) return -1;
            var r = n - 1;
            return void 0 !== i && (r = na(i), r = i < 0 ? oi(n + r, 0) : si(r, n - 1)), wt(e, Qr(t, 3), r, !0)
        }

        function Ao(e) {
            return (null == e ? 0 : e.length) ? on(e, 1) : []
        }

        function Bo(e) {
            return e && e.length ? e[0] : void 0
        }
        var Fo = Hn((function(e) {
                var t = ut(e, or);
                return t.length && t[0] === e[0] ? yn(t) : []
            })),
            No = Hn((function(e) {
                var t = Vo(e),
                    i = ut(e, or);
                return t === Vo(i) ? t = void 0 : i.pop(), i.length && i[0] === e[0] ? yn(i, Qr(t, 2)) : []
            })),
            Ho = Hn((function(e) {
                var t = Vo(e),
                    i = ut(e, or);
                return (t = "function" == typeof t ? t : void 0) && i.pop(), i.length && i[0] === e[0] ? yn(i, void 0, t) : []
            }));

        function Vo(e) {
            var t = null == e ? 0 : e.length;
            return t ? e[t - 1] : void 0
        }
        var jo = Hn(zo);

        function zo(e, t) {
            return e && e.length && t && t.length ? An(e, t) : e
        }
        var qo = _r((function(e, t) {
            var i = null == e ? 0 : e.length,
                n = Ki(e, t);
            return Bn(e, ut(t, (function(e) {
                return so(e, i) ? +e : e
            })).sort(gr)), n
        }));

        function Wo(e) {
            return null == e ? e : pi.call(e)
        }
        var _o = Hn((function(e) {
                return Zn(on(e, 1, Fs, !0))
            })),
            Go = Hn((function(e) {
                var t = Vo(e);
                return Fs(t) && (t = void 0), Zn(on(e, 1, Fs, !0), Qr(t, 2))
            })),
            Uo = Hn((function(e) {
                var t = Vo(e);
                return t = "function" == typeof t ? t : void 0, Zn(on(e, 1, Fs, !0), void 0, t)
            }));

        function Ko(e) {
            if (!e || !e.length) return [];
            var t = 0;
            return e = pt(e, (function(e) {
                if (Fs(e)) return t = oi(e.length, t), !0
            })), Pt(t, (function(t) {
                return ut(e, Tt(t))
            }))
        }

        function Yo(e, t) {
            if (!e || !e.length) return [];
            var i = Ko(e);
            return null == t ? i : ut(i, (function(e) {
                return ot(t, void 0, e)
            }))
        }
        var Xo = Hn((function(e, t) {
                return Fs(e) ? Zi(e, t) : []
            })),
            Qo = Hn((function(e) {
                return nr(pt(e, Fs))
            })),
            Jo = Hn((function(e) {
                var t = Vo(e);
                return Fs(t) && (t = void 0), nr(pt(e, Fs), Qr(t, 2))
            })),
            Zo = Hn((function(e) {
                var t = Vo(e);
                return t = "function" == typeof t ? t : void 0, nr(pt(e, Fs), void 0, t)
            })),
            $o = Hn(Ko);
        var es = Hn((function(e) {
            var t = e.length,
                i = t > 1 ? e[t - 1] : void 0;
            return i = "function" == typeof i ? (e.pop(), i) : void 0, Yo(e, i)
        }));

        function ts(e) {
            var t = Ei(e);
            return t.__chain__ = !0, t
        }

        function is(e, t) {
            return t(e)
        }
        var ns = _r((function(e) {
            var t = e.length,
                i = t ? e[0] : 0,
                n = this.__wrapped__,
                r = function(t) {
                    return Ki(t, e)
                };
            return !(t > 1 || this.__actions__.length) && n instanceof Mi && so(i) ? ((n = n.slice(i, +i + (t ? 1 : 0))).__actions__.push({
                func: is,
                args: [r],
                thisArg: void 0
            }), new Ii(n, this.__chain__).thru((function(e) {
                return t && !e.length && e.push(void 0), e
            }))) : this.thru(r)
        }));
        var rs = br((function(e, t, i) {
            ke.call(e, i) ? ++e[i] : Ui(e, i, 1)
        }));
        var os = Dr(Lo),
            ss = Dr(Oo);

        function as(e, t) {
            return (Os(e) ? at : $i)(e, Qr(t, 3))
        }

        function ls(e, t) {
            return (Os(e) ? lt : en)(e, Qr(t, 3))
        }
        var hs = br((function(e, t, i) {
            ke.call(e, i) ? e[i].push(t) : Ui(e, i, [t])
        }));
        var ps = Hn((function(e, t, i) {
                var r = -1,
                    o = "function" == typeof t,
                    s = Bs(e) ? n(e.length) : [];
                return $i(e, (function(e) {
                    s[++r] = o ? ot(t, e, i) : vn(e, t, i)
                })), s
            })),
            ds = br((function(e, t, i) {
                Ui(e, i, t)
            }));

        function cs(e, t) {
            return (Os(e) ? ut : En)(e, Qr(t, 3))
        }
        var us = br((function(e, t, i) {
            e[i ? 0 : 1].push(t)
        }), (function() {
            return [
                [],
                []
            ]
        }));
        var gs = Hn((function(e, t) {
                if (null == e) return [];
                var i = t.length;
                return i > 1 && ao(e, t[0], t[1]) ? t = [] : i > 2 && ao(t[0], t[1], t[2]) && (t = [t[0]]), Ln(e, on(t, 1), [])
            })),
            fs = Qt || function() {
                return Ke.Date.now()
            };

        function ms(e, t, i) {
            return t = i ? void 0 : t, Vr(e, 128, void 0, void 0, void 0, void 0, t = e && null == t ? e.length : t)
        }

        function ys(e, t) {
            var i;
            if ("function" != typeof t) throw new ve(o);
            return e = na(e),
                function() {
                    return --e > 0 && (i = t.apply(this, arguments)), e <= 1 && (t = void 0), i
                }
        }
        var vs = Hn((function(e, t, i) {
                var n = 1;
                if (i.length) {
                    var r = qt(i, Xr(vs));
                    n |= 32
                }
                return Vr(e, n, t, i, r)
            })),
            bs = Hn((function(e, t, i) {
                var n = 3;
                if (i.length) {
                    var r = qt(i, Xr(bs));
                    n |= 32
                }
                return Vr(t, n, e, i, r)
            }));

        function ws(e, t, i) {
            var n, r, s, a, l, h, p = 0,
                d = !1,
                c = !1,
                u = !0;
            if ("function" != typeof e) throw new ve(o);

            function g(t) {
                var i = n,
                    o = r;
                return n = r = void 0, p = t, a = e.apply(o, i)
            }

            function f(e) {
                return p = e, l = wo(y, t), d ? g(e) : a
            }

            function m(e) {
                var i = e - h;
                return void 0 === h || i >= t || i < 0 || c && e - p >= s
            }

            function y() {
                var e = fs();
                if (m(e)) return v(e);
                l = wo(y, function(e) {
                    var i = t - (e - h);
                    return c ? si(i, s - (e - p)) : i
                }(e))
            }

            function v(e) {
                return l = void 0, u && n ? g(e) : (n = r = void 0, a)
            }

            function b() {
                var e = fs(),
                    i = m(e);
                if (n = arguments, r = this, h = e, i) {
                    if (void 0 === l) return f(h);
                    if (c) return pr(l), l = wo(y, t), g(h)
                }
                return void 0 === l && (l = wo(y, t)), a
            }
            return t = oa(t) || 0, Ws(i) && (d = !!i.leading, s = (c = "maxWait" in i) ? oi(oa(i.maxWait) || 0, t) : s, u = "trailing" in i ? !!i.trailing : u), b.cancel = function() {
                void 0 !== l && pr(l), p = 0, n = h = r = l = void 0
            }, b.flush = function() {
                return void 0 === l ? a : v(fs())
            }, b
        }
        var Cs = Hn((function(e, t) {
                return Ji(e, 1, t)
            })),
            Ss = Hn((function(e, t, i) {
                return Ji(e, oa(t) || 0, i)
            }));

        function xs(e, t) {
            if ("function" != typeof e || null != t && "function" != typeof t) throw new ve(o);
            var i = function() {
                var n = arguments,
                    r = t ? t.apply(this, n) : n[0],
                    o = i.cache;
                if (o.has(r)) return o.get(r);
                var s = e.apply(this, n);
                return i.cache = o.set(r, s) || o, s
            };
            return i.cache = new(xs.Cache || Ai), i
        }

        function ks(e) {
            if ("function" != typeof e) throw new ve(o);
            return function() {
                var t = arguments;
                switch (t.length) {
                    case 0:
                        return !e.call(this);
                    case 1:
                        return !e.call(this, t[0]);
                    case 2:
                        return !e.call(this, t[0], t[1]);
                    case 3:
                        return !e.call(this, t[0], t[1], t[2])
                }
                return !e.apply(this, t)
            }
        }
        xs.Cache = Ai;
        var Ts = lr((function(e, t) {
                var i = (t = 1 == t.length && Os(t[0]) ? ut(t[0], It(Qr())) : ut(on(t, 1), It(Qr()))).length;
                return Hn((function(n) {
                    for (var r = -1, o = si(n.length, i); ++r < o;) n[r] = t[r].call(this, n[r]);
                    return ot(e, this, n)
                }))
            })),
            Ds = Hn((function(e, t) {
                return Vr(e, 32, void 0, t, qt(t, Xr(Ds)))
            })),
            Es = Hn((function(e, t) {
                return Vr(e, 64, void 0, t, qt(t, Xr(Es)))
            })),
            Rs = _r((function(e, t) {
                return Vr(e, 256, void 0, void 0, void 0, t)
            }));

        function Ps(e, t) {
            return e === t || e != e && t != t
        }
        var Is = Ar(gn),
            Ms = Ar((function(e, t) {
                return e >= t
            })),
            Ls = bn(function() {
                return arguments
            }()) ? bn : function(e) {
                return _s(e) && ke.call(e, "callee") && !Ye.call(e, "callee")
            },
            Os = n.isArray,
            As = $e ? It($e) : function(e) {
                return _s(e) && un(e) == x
            };

        function Bs(e) {
            return null != e && qs(e.length) && !js(e)
        }

        function Fs(e) {
            return _s(e) && Bs(e)
        }
        var Ns = ti || ol,
            Hs = et ? It(et) : function(e) {
                return _s(e) && un(e) == d
            };

        function Vs(e) {
            if (!_s(e)) return !1;
            var t = un(e);
            return t == c || "[object DOMException]" == t || "string" == typeof e.message && "string" == typeof e.name && !Ks(e)
        }

        function js(e) {
            if (!Ws(e)) return !1;
            var t = un(e);
            return t == u || t == g || "[object AsyncFunction]" == t || "[object Proxy]" == t
        }

        function zs(e) {
            return "number" == typeof e && e == na(e)
        }

        function qs(e) {
            return "number" == typeof e && e > -1 && e % 1 == 0 && e <= 9007199254740991
        }

        function Ws(e) {
            var t = typeof e;
            return null != e && ("object" == t || "function" == t)
        }

        function _s(e) {
            return null != e && "object" == typeof e
        }
        var Gs = tt ? It(tt) : function(e) {
            return _s(e) && io(e) == f
        };

        function Us(e) {
            return "number" == typeof e || _s(e) && un(e) == m
        }

        function Ks(e) {
            if (!_s(e) || un(e) != y) return !1;
            var t = Ge(e);
            if (null === t) return !0;
            var i = ke.call(t, "constructor") && t.constructor;
            return "function" == typeof i && i instanceof i && xe.call(i) == Re
        }
        var Ys = it ? It(it) : function(e) {
            return _s(e) && un(e) == v
        };
        var Xs = nt ? It(nt) : function(e) {
            return _s(e) && io(e) == b
        };

        function Qs(e) {
            return "string" == typeof e || !Os(e) && _s(e) && un(e) == w
        }

        function Js(e) {
            return "symbol" == typeof e || _s(e) && un(e) == C
        }
        var Zs = rt ? It(rt) : function(e) {
            return _s(e) && qs(e.length) && !!je[un(e)]
        };
        var $s = Ar(Dn),
            ea = Ar((function(e, t) {
                return e <= t
            }));

        function ta(e) {
            if (!e) return [];
            if (Bs(e)) return Qs(e) ? Ut(e) : yr(e);
            if (Ze && e[Ze]) return function(e) {
                for (var t, i = []; !(t = e.next()).done;) i.push(t.value);
                return i
            }(e[Ze]());
            var t = io(e);
            return (t == f ? jt : t == b ? Wt : Pa)(e)
        }

        function ia(e) {
            return e ? (e = oa(e)) === 1 / 0 || e === -1 / 0 ? 17976931348623157e292 * (e < 0 ? -1 : 1) : e == e ? e : 0 : 0 === e ? e : 0
        }

        function na(e) {
            var t = ia(e),
                i = t % 1;
            return t == t ? i ? t - i : t : 0
        }

        function ra(e) {
            return e ? Yi(na(e), 0, 4294967295) : 0
        }

        function oa(e) {
            if ("number" == typeof e) return e;
            if (Js(e)) return NaN;
            if (Ws(e)) {
                var t = "function" == typeof e.valueOf ? e.valueOf() : e;
                e = Ws(t) ? t + "" : t
            }
            if ("string" != typeof e) return 0 === e ? e : +e;
            e = e.replace(Y, "");
            var i = oe.test(e);
            return i || ae.test(e) ? _e(e.slice(2), i ? 2 : 8) : re.test(e) ? NaN : +e
        }

        function sa(e) {
            return vr(e, Ca(e))
        }

        function aa(e) {
            return null == e ? "" : Jn(e)
        }
        var la = wr((function(e, t) {
                if (co(t) || Bs(t)) vr(t, wa(t), e);
                else
                    for (var i in t) ke.call(t, i) && qi(e, i, t[i])
            })),
            ha = wr((function(e, t) {
                vr(t, Ca(t), e)
            })),
            pa = wr((function(e, t, i, n) {
                vr(t, Ca(t), e, n)
            })),
            da = wr((function(e, t, i, n) {
                vr(t, wa(t), e, n)
            })),
            ca = _r(Ki);
        var ua = Hn((function(e, t) {
                e = fe(e);
                var i = -1,
                    n = t.length,
                    r = n > 2 ? t[2] : void 0;
                for (r && ao(t[0], t[1], r) && (n = 1); ++i < n;)
                    for (var o = t[i], s = Ca(o), a = -1, l = s.length; ++a < l;) {
                        var h = s[a],
                            p = e[h];
                        (void 0 === p || Ps(p, Ce[h]) && !ke.call(e, h)) && (e[h] = o[h])
                    }
                return e
            })),
            ga = Hn((function(e) {
                return e.push(void 0, zr), ot(xa, void 0, e)
            }));

        function fa(e, t, i) {
            var n = null == e ? void 0 : dn(e, t);
            return void 0 === n ? i : n
        }

        function ma(e, t) {
            return null != e && no(e, t, mn)
        }
        var ya = Pr((function(e, t, i) {
                null != t && "function" != typeof t.toString && (t = Ee.call(t)), e[t] = i
            }), Wa(Ua)),
            va = Pr((function(e, t, i) {
                null != t && "function" != typeof t.toString && (t = Ee.call(t)), ke.call(e, t) ? e[t].push(i) : e[t] = [i]
            }), Qr),
            ba = Hn(vn);

        function wa(e) {
            return Bs(e) ? Ni(e) : kn(e)
        }

        function Ca(e) {
            return Bs(e) ? Ni(e, !0) : Tn(e)
        }
        var Sa = wr((function(e, t, i) {
                In(e, t, i)
            })),
            xa = wr((function(e, t, i, n) {
                In(e, t, i, n)
            })),
            ka = _r((function(e, t) {
                var i = {};
                if (null == e) return i;
                var n = !1;
                t = ut(t, (function(t) {
                    return t = ar(t, e), n || (n = t.length > 1), t
                })), vr(e, Ur(e), i), n && (i = Xi(i, 7, qr));
                for (var r = t.length; r--;) $n(i, t[r]);
                return i
            }));
        var Ta = _r((function(e, t) {
            return null == e ? {} : function(e, t) {
                return On(e, t, (function(t, i) {
                    return ma(e, i)
                }))
            }(e, t)
        }));

        function Da(e, t) {
            if (null == e) return {};
            var i = ut(Ur(e), (function(e) {
                return [e]
            }));
            return t = Qr(t), On(e, i, (function(e, i) {
                return t(e, i[0])
            }))
        }
        var Ea = Hr(wa),
            Ra = Hr(Ca);

        function Pa(e) {
            return null == e ? [] : Mt(e, wa(e))
        }
        var Ia = kr((function(e, t, i) {
            return t = t.toLowerCase(), e + (i ? Ma(t) : t)
        }));

        function Ma(e) {
            return Va(aa(e).toLowerCase())
        }

        function La(e) {
            return (e = aa(e)) && e.replace(he, Ft).replace(Oe, "")
        }
        var Oa = kr((function(e, t, i) {
                return e + (i ? "-" : "") + t.toLowerCase()
            })),
            Aa = kr((function(e, t, i) {
                return e + (i ? " " : "") + t.toLowerCase()
            })),
            Ba = xr("toLowerCase");
        var Fa = kr((function(e, t, i) {
            return e + (i ? "_" : "") + t.toLowerCase()
        }));
        var Na = kr((function(e, t, i) {
            return e + (i ? " " : "") + Va(t)
        }));
        var Ha = kr((function(e, t, i) {
                return e + (i ? " " : "") + t.toUpperCase()
            })),
            Va = xr("toUpperCase");

        function ja(e, t, i) {
            return e = aa(e), void 0 === (t = i ? void 0 : t) ? function(e) {
                return Ne.test(e)
            }(e) ? function(e) {
                return e.match(Be) || []
            }(e) : function(e) {
                return e.match(ee) || []
            }(e) : e.match(t) || []
        }
        var za = Hn((function(e, t) {
                try {
                    return ot(e, void 0, t)
                } catch (e) {
                    return Vs(e) ? e : new ce(e)
                }
            })),
            qa = _r((function(e, t) {
                return at(t, (function(t) {
                    t = Do(t), Ui(e, t, vs(e[t], e))
                })), e
            }));

        function Wa(e) {
            return function() {
                return e
            }
        }
        var _a = Er(),
            Ga = Er(!0);

        function Ua(e) {
            return e
        }

        function Ka(e) {
            return xn("function" == typeof e ? e : Xi(e, 1))
        }
        var Ya = Hn((function(e, t) {
                return function(i) {
                    return vn(i, e, t)
                }
            })),
            Xa = Hn((function(e, t) {
                return function(i) {
                    return vn(e, i, t)
                }
            }));

        function Qa(e, t, i) {
            var n = wa(t),
                r = pn(t, n);
            null != i || Ws(t) && (r.length || !n.length) || (i = t, t = e, e = this, r = pn(t, wa(t)));
            var o = !(Ws(i) && "chain" in i && !i.chain),
                s = js(e);
            return at(r, (function(i) {
                var n = t[i];
                e[i] = n, s && (e.prototype[i] = function() {
                    var t = this.__chain__;
                    if (o || t) {
                        var i = e(this.__wrapped__),
                            r = i.__actions__ = yr(this.__actions__);
                        return r.push({
                            func: n,
                            args: arguments,
                            thisArg: e
                        }), i.__chain__ = t, i
                    }
                    return n.apply(e, gt([this.value()], arguments))
                })
            })), e
        }

        function Ja() {}
        var Za = Mr(ut),
            $a = Mr(ht),
            el = Mr(yt);

        function tl(e) {
            return lo(e) ? Tt(Do(e)) : function(e) {
                return function(t) {
                    return dn(t, e)
                }
            }(e)
        }
        var il = Or(),
            nl = Or(!0);

        function rl() {
            return []
        }

        function ol() {
            return !1
        }
        var sl = Ir((function(e, t) {
                return e + t
            }), 0),
            al = Fr("ceil"),
            ll = Ir((function(e, t) {
                return e / t
            }), 1),
            hl = Fr("floor");
        var pl, dl = Ir((function(e, t) {
                return e * t
            }), 1),
            cl = Fr("round"),
            ul = Ir((function(e, t) {
                return e - t
            }), 0);
        return Ei.after = function(e, t) {
            if ("function" != typeof t) throw new ve(o);
            return e = na(e),
                function() {
                    if (--e < 1) return t.apply(this, arguments)
                }
        }, Ei.ary = ms, Ei.assign = la, Ei.assignIn = ha, Ei.assignInWith = pa, Ei.assignWith = da, Ei.at = ca, Ei.before = ys, Ei.bind = vs, Ei.bindAll = qa, Ei.bindKey = bs, Ei.castArray = function() {
            if (!arguments.length) return [];
            var e = arguments[0];
            return Os(e) ? e : [e]
        }, Ei.chain = ts, Ei.chunk = function(e, t, i) {
            t = (i ? ao(e, t, i) : void 0 === t) ? 1 : oi(na(t), 0);
            var r = null == e ? 0 : e.length;
            if (!r || t < 1) return [];
            for (var o = 0, s = 0, a = n(Zt(r / t)); o < r;) a[s++] = Gn(e, o, o += t);
            return a
        }, Ei.compact = function(e) {
            for (var t = -1, i = null == e ? 0 : e.length, n = 0, r = []; ++t < i;) {
                var o = e[t];
                o && (r[n++] = o)
            }
            return r
        }, Ei.concat = function() {
            var e = arguments.length;
            if (!e) return [];
            for (var t = n(e - 1), i = arguments[0], r = e; r--;) t[r - 1] = arguments[r];
            return gt(Os(i) ? yr(i) : [i], on(t, 1))
        }, Ei.cond = function(e) {
            var t = null == e ? 0 : e.length,
                i = Qr();
            return e = t ? ut(e, (function(e) {
                if ("function" != typeof e[1]) throw new ve(o);
                return [i(e[0]), e[1]]
            })) : [], Hn((function(i) {
                for (var n = -1; ++n < t;) {
                    var r = e[n];
                    if (ot(r[0], this, i)) return ot(r[1], this, i)
                }
            }))
        }, Ei.conforms = function(e) {
            return function(e) {
                var t = wa(e);
                return function(i) {
                    return Qi(i, e, t)
                }
            }(Xi(e, 1))
        }, Ei.constant = Wa, Ei.countBy = rs, Ei.create = function(e, t) {
            var i = Ri(e);
            return null == t ? i : Gi(i, t)
        }, Ei.curry = function e(t, i, n) {
            var r = Vr(t, 8, void 0, void 0, void 0, void 0, void 0, i = n ? void 0 : i);
            return r.placeholder = e.placeholder, r
        }, Ei.curryRight = function e(t, i, n) {
            var r = Vr(t, 16, void 0, void 0, void 0, void 0, void 0, i = n ? void 0 : i);
            return r.placeholder = e.placeholder, r
        }, Ei.debounce = ws, Ei.defaults = ua, Ei.defaultsDeep = ga, Ei.defer = Cs, Ei.delay = Ss, Ei.difference = Po, Ei.differenceBy = Io, Ei.differenceWith = Mo, Ei.drop = function(e, t, i) {
            var n = null == e ? 0 : e.length;
            return n ? Gn(e, (t = i || void 0 === t ? 1 : na(t)) < 0 ? 0 : t, n) : []
        }, Ei.dropRight = function(e, t, i) {
            var n = null == e ? 0 : e.length;
            return n ? Gn(e, 0, (t = n - (t = i || void 0 === t ? 1 : na(t))) < 0 ? 0 : t) : []
        }, Ei.dropRightWhile = function(e, t) {
            return e && e.length ? tr(e, Qr(t, 3), !0, !0) : []
        }, Ei.dropWhile = function(e, t) {
            return e && e.length ? tr(e, Qr(t, 3), !0) : []
        }, Ei.fill = function(e, t, i, n) {
            var r = null == e ? 0 : e.length;
            return r ? (i && "number" != typeof i && ao(e, t, i) && (i = 0, n = r), function(e, t, i, n) {
                var r = e.length;
                for ((i = na(i)) < 0 && (i = -i > r ? 0 : r + i), (n = void 0 === n || n > r ? r : na(n)) < 0 && (n += r), n = i > n ? 0 : ra(n); i < n;) e[i++] = t;
                return e
            }(e, t, i, n)) : []
        }, Ei.filter = function(e, t) {
            return (Os(e) ? pt : rn)(e, Qr(t, 3))
        }, Ei.flatMap = function(e, t) {
            return on(cs(e, t), 1)
        }, Ei.flatMapDeep = function(e, t) {
            return on(cs(e, t), 1 / 0)
        }, Ei.flatMapDepth = function(e, t, i) {
            return i = void 0 === i ? 1 : na(i), on(cs(e, t), i)
        }, Ei.flatten = Ao, Ei.flattenDeep = function(e) {
            return (null == e ? 0 : e.length) ? on(e, 1 / 0) : []
        }, Ei.flattenDepth = function(e, t) {
            return (null == e ? 0 : e.length) ? on(e, t = void 0 === t ? 1 : na(t)) : []
        }, Ei.flip = function(e) {
            return Vr(e, 512)
        }, Ei.flow = _a, Ei.flowRight = Ga, Ei.fromPairs = function(e) {
            for (var t = -1, i = null == e ? 0 : e.length, n = {}; ++t < i;) {
                var r = e[t];
                n[r[0]] = r[1]
            }
            return n
        }, Ei.functions = function(e) {
            return null == e ? [] : pn(e, wa(e))
        }, Ei.functionsIn = function(e) {
            return null == e ? [] : pn(e, Ca(e))
        }, Ei.groupBy = hs, Ei.initial = function(e) {
            return (null == e ? 0 : e.length) ? Gn(e, 0, -1) : []
        }, Ei.intersection = Fo, Ei.intersectionBy = No, Ei.intersectionWith = Ho, Ei.invert = ya, Ei.invertBy = va, Ei.invokeMap = ps, Ei.iteratee = Ka, Ei.keyBy = ds, Ei.keys = wa, Ei.keysIn = Ca, Ei.map = cs, Ei.mapKeys = function(e, t) {
            var i = {};
            return t = Qr(t, 3), ln(e, (function(e, n, r) {
                Ui(i, t(e, n, r), e)
            })), i
        }, Ei.mapValues = function(e, t) {
            var i = {};
            return t = Qr(t, 3), ln(e, (function(e, n, r) {
                Ui(i, n, t(e, n, r))
            })), i
        }, Ei.matches = function(e) {
            return Rn(Xi(e, 1))
        }, Ei.matchesProperty = function(e, t) {
            return Pn(e, Xi(t, 1))
        }, Ei.memoize = xs, Ei.merge = Sa, Ei.mergeWith = xa, Ei.method = Ya, Ei.methodOf = Xa, Ei.mixin = Qa, Ei.negate = ks, Ei.nthArg = function(e) {
            return e = na(e), Hn((function(t) {
                return Mn(t, e)
            }))
        }, Ei.omit = ka, Ei.omitBy = function(e, t) {
            return Da(e, ks(Qr(t)))
        }, Ei.once = function(e) {
            return ys(2, e)
        }, Ei.orderBy = function(e, t, i, n) {
            return null == e ? [] : (Os(t) || (t = null == t ? [] : [t]), Os(i = n ? void 0 : i) || (i = null == i ? [] : [i]), Ln(e, t, i))
        }, Ei.over = Za, Ei.overArgs = Ts, Ei.overEvery = $a, Ei.overSome = el, Ei.partial = Ds, Ei.partialRight = Es, Ei.partition = us, Ei.pick = Ta, Ei.pickBy = Da, Ei.property = tl, Ei.propertyOf = function(e) {
            return function(t) {
                return null == e ? void 0 : dn(e, t)
            }
        }, Ei.pull = jo, Ei.pullAll = zo, Ei.pullAllBy = function(e, t, i) {
            return e && e.length && t && t.length ? An(e, t, Qr(i, 2)) : e
        }, Ei.pullAllWith = function(e, t, i) {
            return e && e.length && t && t.length ? An(e, t, void 0, i) : e
        }, Ei.pullAt = qo, Ei.range = il, Ei.rangeRight = nl, Ei.rearg = Rs, Ei.reject = function(e, t) {
            return (Os(e) ? pt : rn)(e, ks(Qr(t, 3)))
        }, Ei.remove = function(e, t) {
            var i = [];
            if (!e || !e.length) return i;
            var n = -1,
                r = [],
                o = e.length;
            for (t = Qr(t, 3); ++n < o;) {
                var s = e[n];
                t(s, n, e) && (i.push(s), r.push(n))
            }
            return Bn(e, r), i
        }, Ei.rest = function(e, t) {
            if ("function" != typeof e) throw new ve(o);
            return Hn(e, t = void 0 === t ? t : na(t))
        }, Ei.reverse = Wo, Ei.sampleSize = function(e, t, i) {
            return t = (i ? ao(e, t, i) : void 0 === t) ? 1 : na(t), (Os(e) ? Vi : jn)(e, t)
        }, Ei.set = function(e, t, i) {
            return null == e ? e : zn(e, t, i)
        }, Ei.setWith = function(e, t, i, n) {
            return n = "function" == typeof n ? n : void 0, null == e ? e : zn(e, t, i, n)
        }, Ei.shuffle = function(e) {
            return (Os(e) ? ji : _n)(e)
        }, Ei.slice = function(e, t, i) {
            var n = null == e ? 0 : e.length;
            return n ? (i && "number" != typeof i && ao(e, t, i) ? (t = 0, i = n) : (t = null == t ? 0 : na(t), i = void 0 === i ? n : na(i)), Gn(e, t, i)) : []
        }, Ei.sortBy = gs, Ei.sortedUniq = function(e) {
            return e && e.length ? Xn(e) : []
        }, Ei.sortedUniqBy = function(e, t) {
            return e && e.length ? Xn(e, Qr(t, 2)) : []
        }, Ei.split = function(e, t, i) {
            return i && "number" != typeof i && ao(e, t, i) && (t = i = void 0), (i = void 0 === i ? 4294967295 : i >>> 0) ? (e = aa(e)) && ("string" == typeof t || null != t && !Ys(t)) && !(t = Jn(t)) && Vt(e) ? hr(Ut(e), 0, i) : e.split(t, i) : []
        }, Ei.spread = function(e, t) {
            if ("function" != typeof e) throw new ve(o);
            return t = null == t ? 0 : oi(na(t), 0), Hn((function(i) {
                var n = i[t],
                    r = hr(i, 0, t);
                return n && gt(r, n), ot(e, this, r)
            }))
        }, Ei.tail = function(e) {
            var t = null == e ? 0 : e.length;
            return t ? Gn(e, 1, t) : []
        }, Ei.take = function(e, t, i) {
            return e && e.length ? Gn(e, 0, (t = i || void 0 === t ? 1 : na(t)) < 0 ? 0 : t) : []
        }, Ei.takeRight = function(e, t, i) {
            var n = null == e ? 0 : e.length;
            return n ? Gn(e, (t = n - (t = i || void 0 === t ? 1 : na(t))) < 0 ? 0 : t, n) : []
        }, Ei.takeRightWhile = function(e, t) {
            return e && e.length ? tr(e, Qr(t, 3), !1, !0) : []
        }, Ei.takeWhile = function(e, t) {
            return e && e.length ? tr(e, Qr(t, 3)) : []
        }, Ei.tap = function(e, t) {
            return t(e), e
        }, Ei.throttle = function(e, t, i) {
            var n = !0,
                r = !0;
            if ("function" != typeof e) throw new ve(o);
            return Ws(i) && (n = "leading" in i ? !!i.leading : n, r = "trailing" in i ? !!i.trailing : r), ws(e, t, {
                leading: n,
                maxWait: t,
                trailing: r
            })
        }, Ei.thru = is, Ei.toArray = ta, Ei.toPairs = Ea, Ei.toPairsIn = Ra, Ei.toPath = function(e) {
            return Os(e) ? ut(e, Do) : Js(e) ? [e] : yr(To(aa(e)))
        }, Ei.toPlainObject = sa, Ei.transform = function(e, t, i) {
            var n = Os(e),
                r = n || Ns(e) || Zs(e);
            if (t = Qr(t, 4), null == i) {
                var o = e && e.constructor;
                i = r ? n ? new o : [] : Ws(e) && js(o) ? Ri(Ge(e)) : {}
            }
            return (r ? at : ln)(e, (function(e, n, r) {
                return t(i, e, n, r)
            })), i
        }, Ei.unary = function(e) {
            return ms(e, 1)
        }, Ei.union = _o, Ei.unionBy = Go, Ei.unionWith = Uo, Ei.uniq = function(e) {
            return e && e.length ? Zn(e) : []
        }, Ei.uniqBy = function(e, t) {
            return e && e.length ? Zn(e, Qr(t, 2)) : []
        }, Ei.uniqWith = function(e, t) {
            return t = "function" == typeof t ? t : void 0, e && e.length ? Zn(e, void 0, t) : []
        }, Ei.unset = function(e, t) {
            return null == e || $n(e, t)
        }, Ei.unzip = Ko, Ei.unzipWith = Yo, Ei.update = function(e, t, i) {
            return null == e ? e : er(e, t, sr(i))
        }, Ei.updateWith = function(e, t, i, n) {
            return n = "function" == typeof n ? n : void 0, null == e ? e : er(e, t, sr(i), n)
        }, Ei.values = Pa, Ei.valuesIn = function(e) {
            return null == e ? [] : Mt(e, Ca(e))
        }, Ei.without = Xo, Ei.words = ja, Ei.wrap = function(e, t) {
            return Ds(sr(t), e)
        }, Ei.xor = Qo, Ei.xorBy = Jo, Ei.xorWith = Zo, Ei.zip = $o, Ei.zipObject = function(e, t) {
            return rr(e || [], t || [], qi)
        }, Ei.zipObjectDeep = function(e, t) {
            return rr(e || [], t || [], zn)
        }, Ei.zipWith = es, Ei.entries = Ea, Ei.entriesIn = Ra, Ei.extend = ha, Ei.extendWith = pa, Qa(Ei, Ei), Ei.add = sl, Ei.attempt = za, Ei.camelCase = Ia, Ei.capitalize = Ma, Ei.ceil = al, Ei.clamp = function(e, t, i) {
            return void 0 === i && (i = t, t = void 0), void 0 !== i && (i = (i = oa(i)) == i ? i : 0), void 0 !== t && (t = (t = oa(t)) == t ? t : 0), Yi(oa(e), t, i)
        }, Ei.clone = function(e) {
            return Xi(e, 4)
        }, Ei.cloneDeep = function(e) {
            return Xi(e, 5)
        }, Ei.cloneDeepWith = function(e, t) {
            return Xi(e, 5, t = "function" == typeof t ? t : void 0)
        }, Ei.cloneWith = function(e, t) {
            return Xi(e, 4, t = "function" == typeof t ? t : void 0)
        }, Ei.conformsTo = function(e, t) {
            return null == t || Qi(e, t, wa(t))
        }, Ei.deburr = La, Ei.defaultTo = function(e, t) {
            return null == e || e != e ? t : e
        }, Ei.divide = ll, Ei.endsWith = function(e, t, i) {
            e = aa(e), t = Jn(t);
            var n = e.length,
                r = i = void 0 === i ? n : Yi(na(i), 0, n);
            return (i -= t.length) >= 0 && e.slice(i, r) == t
        }, Ei.eq = Ps, Ei.escape = function(e) {
            return (e = aa(e)) && V.test(e) ? e.replace(N, Nt) : e
        }, Ei.escapeRegExp = function(e) {
            return (e = aa(e)) && K.test(e) ? e.replace(U, "\\$&") : e
        }, Ei.every = function(e, t, i) {
            var n = Os(e) ? ht : tn;
            return i && ao(e, t, i) && (t = void 0), n(e, Qr(t, 3))
        }, Ei.find = os, Ei.findIndex = Lo, Ei.findKey = function(e, t) {
            return bt(e, Qr(t, 3), ln)
        }, Ei.findLast = ss, Ei.findLastIndex = Oo, Ei.findLastKey = function(e, t) {
            return bt(e, Qr(t, 3), hn)
        }, Ei.floor = hl, Ei.forEach = as, Ei.forEachRight = ls, Ei.forIn = function(e, t) {
            return null == e ? e : sn(e, Qr(t, 3), Ca)
        }, Ei.forInRight = function(e, t) {
            return null == e ? e : an(e, Qr(t, 3), Ca)
        }, Ei.forOwn = function(e, t) {
            return e && ln(e, Qr(t, 3))
        }, Ei.forOwnRight = function(e, t) {
            return e && hn(e, Qr(t, 3))
        }, Ei.get = fa, Ei.gt = Is, Ei.gte = Ms, Ei.has = function(e, t) {
            return null != e && no(e, t, fn)
        }, Ei.hasIn = ma, Ei.head = Bo, Ei.identity = Ua, Ei.includes = function(e, t, i, n) {
            e = Bs(e) ? e : Pa(e), i = i && !n ? na(i) : 0;
            var r = e.length;
            return i < 0 && (i = oi(r + i, 0)), Qs(e) ? i <= r && e.indexOf(t, i) > -1 : !!r && Ct(e, t, i) > -1
        }, Ei.indexOf = function(e, t, i) {
            var n = null == e ? 0 : e.length;
            if (!n) return -1;
            var r = null == i ? 0 : na(i);
            return r < 0 && (r = oi(n + r, 0)), Ct(e, t, r)
        }, Ei.inRange = function(e, t, i) {
            return t = ia(t), void 0 === i ? (i = t, t = 0) : i = ia(i),
                function(e, t, i) {
                    return e >= si(t, i) && e < oi(t, i)
                }(e = oa(e), t, i)
        }, Ei.invoke = ba, Ei.isArguments = Ls, Ei.isArray = Os, Ei.isArrayBuffer = As, Ei.isArrayLike = Bs, Ei.isArrayLikeObject = Fs, Ei.isBoolean = function(e) {
            return !0 === e || !1 === e || _s(e) && un(e) == p
        }, Ei.isBuffer = Ns, Ei.isDate = Hs, Ei.isElement = function(e) {
            return _s(e) && 1 === e.nodeType && !Ks(e)
        }, Ei.isEmpty = function(e) {
            if (null == e) return !0;
            if (Bs(e) && (Os(e) || "string" == typeof e || "function" == typeof e.splice || Ns(e) || Zs(e) || Ls(e))) return !e.length;
            var t = io(e);
            if (t == f || t == b) return !e.size;
            if (co(e)) return !kn(e).length;
            for (var i in e)
                if (ke.call(e, i)) return !1;
            return !0
        }, Ei.isEqual = function(e, t) {
            return wn(e, t)
        }, Ei.isEqualWith = function(e, t, i) {
            var n = (i = "function" == typeof i ? i : void 0) ? i(e, t) : void 0;
            return void 0 === n ? wn(e, t, void 0, i) : !!n
        }, Ei.isError = Vs, Ei.isFinite = function(e) {
            return "number" == typeof e && ii(e)
        }, Ei.isFunction = js, Ei.isInteger = zs, Ei.isLength = qs, Ei.isMap = Gs, Ei.isMatch = function(e, t) {
            return e === t || Cn(e, t, Zr(t))
        }, Ei.isMatchWith = function(e, t, i) {
            return i = "function" == typeof i ? i : void 0, Cn(e, t, Zr(t), i)
        }, Ei.isNaN = function(e) {
            return Us(e) && e != +e
        }, Ei.isNative = function(e) {
            if (po(e)) throw new ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");
            return Sn(e)
        }, Ei.isNil = function(e) {
            return null == e
        }, Ei.isNull = function(e) {
            return null === e
        }, Ei.isNumber = Us, Ei.isObject = Ws, Ei.isObjectLike = _s, Ei.isPlainObject = Ks, Ei.isRegExp = Ys, Ei.isSafeInteger = function(e) {
            return zs(e) && e >= -9007199254740991 && e <= 9007199254740991
        }, Ei.isSet = Xs, Ei.isString = Qs, Ei.isSymbol = Js, Ei.isTypedArray = Zs, Ei.isUndefined = function(e) {
            return void 0 === e
        }, Ei.isWeakMap = function(e) {
            return _s(e) && io(e) == S
        }, Ei.isWeakSet = function(e) {
            return _s(e) && "[object WeakSet]" == un(e)
        }, Ei.join = function(e, t) {
            return null == e ? "" : ni.call(e, t)
        }, Ei.kebabCase = Oa, Ei.last = Vo, Ei.lastIndexOf = function(e, t, i) {
            var n = null == e ? 0 : e.length;
            if (!n) return -1;
            var r = n;
            return void 0 !== i && (r = (r = na(i)) < 0 ? oi(n + r, 0) : si(r, n - 1)), t == t ? function(e, t, i) {
                for (var n = i + 1; n--;)
                    if (e[n] === t) return n;
                return n
            }(e, t, r) : wt(e, xt, r, !0)
        }, Ei.lowerCase = Aa, Ei.lowerFirst = Ba, Ei.lt = $s, Ei.lte = ea, Ei.max = function(e) {
            return e && e.length ? nn(e, Ua, gn) : void 0
        }, Ei.maxBy = function(e, t) {
            return e && e.length ? nn(e, Qr(t, 2), gn) : void 0
        }, Ei.mean = function(e) {
            return kt(e, Ua)
        }, Ei.meanBy = function(e, t) {
            return kt(e, Qr(t, 2))
        }, Ei.min = function(e) {
            return e && e.length ? nn(e, Ua, Dn) : void 0
        }, Ei.minBy = function(e, t) {
            return e && e.length ? nn(e, Qr(t, 2), Dn) : void 0
        }, Ei.stubArray = rl, Ei.stubFalse = ol, Ei.stubObject = function() {
            return {}
        }, Ei.stubString = function() {
            return ""
        }, Ei.stubTrue = function() {
            return !0
        }, Ei.multiply = dl, Ei.nth = function(e, t) {
            return e && e.length ? Mn(e, na(t)) : void 0
        }, Ei.noConflict = function() {
            return Ke._ === this && (Ke._ = Pe), this
        }, Ei.noop = Ja, Ei.now = fs, Ei.pad = function(e, t, i) {
            e = aa(e);
            var n = (t = na(t)) ? Gt(e) : 0;
            if (!t || n >= t) return e;
            var r = (t - n) / 2;
            return Lr($t(r), i) + e + Lr(Zt(r), i)
        }, Ei.padEnd = function(e, t, i) {
            e = aa(e);
            var n = (t = na(t)) ? Gt(e) : 0;
            return t && n < t ? e + Lr(t - n, i) : e
        }, Ei.padStart = function(e, t, i) {
            e = aa(e);
            var n = (t = na(t)) ? Gt(e) : 0;
            return t && n < t ? Lr(t - n, i) + e : e
        }, Ei.parseInt = function(e, t, i) {
            return i || null == t ? t = 0 : t && (t = +t), li(aa(e).replace(X, ""), t || 0)
        }, Ei.random = function(e, t, i) {
            if (i && "boolean" != typeof i && ao(e, t, i) && (t = i = void 0), void 0 === i && ("boolean" == typeof t ? (i = t, t = void 0) : "boolean" == typeof e && (i = e, e = void 0)), void 0 === e && void 0 === t ? (e = 0, t = 1) : (e = ia(e), void 0 === t ? (t = e, e = 0) : t = ia(t)), e > t) {
                var n = e;
                e = t, t = n
            }
            if (i || e % 1 || t % 1) {
                var r = hi();
                return si(e + r * (t - e + We("1e-" + ((r + "").length - 1))), t)
            }
            return Fn(e, t)
        }, Ei.reduce = function(e, t, i) {
            var n = Os(e) ? ft : Et,
                r = arguments.length < 3;
            return n(e, Qr(t, 4), i, r, $i)
        }, Ei.reduceRight = function(e, t, i) {
            var n = Os(e) ? mt : Et,
                r = arguments.length < 3;
            return n(e, Qr(t, 4), i, r, en)
        }, Ei.repeat = function(e, t, i) {
            return t = (i ? ao(e, t, i) : void 0 === t) ? 1 : na(t), Nn(aa(e), t)
        }, Ei.replace = function() {
            var e = arguments,
                t = aa(e[0]);
            return e.length < 3 ? t : t.replace(e[1], e[2])
        }, Ei.result = function(e, t, i) {
            var n = -1,
                r = (t = ar(t, e)).length;
            for (r || (r = 1, e = void 0); ++n < r;) {
                var o = null == e ? void 0 : e[Do(t[n])];
                void 0 === o && (n = r, o = i), e = js(o) ? o.call(e) : o
            }
            return e
        }, Ei.round = cl, Ei.runInContext = e, Ei.sample = function(e) {
            return (Os(e) ? Hi : Vn)(e)
        }, Ei.size = function(e) {
            if (null == e) return 0;
            if (Bs(e)) return Qs(e) ? Gt(e) : e.length;
            var t = io(e);
            return t == f || t == b ? e.size : kn(e).length
        }, Ei.snakeCase = Fa, Ei.some = function(e, t, i) {
            var n = Os(e) ? yt : Un;
            return i && ao(e, t, i) && (t = void 0), n(e, Qr(t, 3))
        }, Ei.sortedIndex = function(e, t) {
            return Kn(e, t)
        }, Ei.sortedIndexBy = function(e, t, i) {
            return Yn(e, t, Qr(i, 2))
        }, Ei.sortedIndexOf = function(e, t) {
            var i = null == e ? 0 : e.length;
            if (i) {
                var n = Kn(e, t);
                if (n < i && Ps(e[n], t)) return n
            }
            return -1
        }, Ei.sortedLastIndex = function(e, t) {
            return Kn(e, t, !0)
        }, Ei.sortedLastIndexBy = function(e, t, i) {
            return Yn(e, t, Qr(i, 2), !0)
        }, Ei.sortedLastIndexOf = function(e, t) {
            if (null == e ? 0 : e.length) {
                var i = Kn(e, t, !0) - 1;
                if (Ps(e[i], t)) return i
            }
            return -1
        }, Ei.startCase = Na, Ei.startsWith = function(e, t, i) {
            return e = aa(e), i = null == i ? 0 : Yi(na(i), 0, e.length), t = Jn(t), e.slice(i, i + t.length) == t
        }, Ei.subtract = ul, Ei.sum = function(e) {
            return e && e.length ? Rt(e, Ua) : 0
        }, Ei.sumBy = function(e, t) {
            return e && e.length ? Rt(e, Qr(t, 2)) : 0
        }, Ei.template = function(e, t, i) {
            var n = Ei.templateSettings;
            i && ao(e, t, i) && (t = void 0), e = aa(e), t = pa({}, t, n, jr);
            var r, o, s = pa({}, t.imports, n.imports, jr),
                a = wa(s),
                l = Mt(s, a),
                h = 0,
                p = t.interpolate || pe,
                d = "__p += '",
                c = me((t.escape || pe).source + "|" + p.source + "|" + (p === q ? ie : pe).source + "|" + (t.evaluate || pe).source + "|$", "g"),
                u = "//# sourceURL=" + (ke.call(t, "sourceURL") ? (t.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++Ve + "]") + "\n";
            e.replace(c, (function(t, i, n, s, a, l) {
                return n || (n = s), d += e.slice(h, l).replace(de, Ht), i && (r = !0, d += "' +\n__e(" + i + ") +\n'"), a && (o = !0, d += "';\n" + a + ";\n__p += '"), n && (d += "' +\n((__t = (" + n + ")) == null ? '' : __t) +\n'"), h = l + t.length, t
            })), d += "';\n";
            var g = ke.call(t, "variable") && t.variable;
            g || (d = "with (obj) {\n" + d + "\n}\n"), d = (o ? d.replace(O, "") : d).replace(A, "$1").replace(B, "$1;"), d = "function(" + (g || "obj") + ") {\n" + (g ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (r ? ", __e = _.escape" : "") + (o ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + d + "return __p\n}";
            var f = za((function() {
                return ue(a, u + "return " + d).apply(void 0, l)
            }));
            if (f.source = d, Vs(f)) throw f;
            return f
        }, Ei.times = function(e, t) {
            if ((e = na(e)) < 1 || e > 9007199254740991) return [];
            var i = 4294967295,
                n = si(e, 4294967295);
            e -= 4294967295;
            for (var r = Pt(n, t = Qr(t)); ++i < e;) t(i);
            return r
        }, Ei.toFinite = ia, Ei.toInteger = na, Ei.toLength = ra, Ei.toLower = function(e) {
            return aa(e).toLowerCase()
        }, Ei.toNumber = oa, Ei.toSafeInteger = function(e) {
            return e ? Yi(na(e), -9007199254740991, 9007199254740991) : 0 === e ? e : 0
        }, Ei.toString = aa, Ei.toUpper = function(e) {
            return aa(e).toUpperCase()
        }, Ei.trim = function(e, t, i) {
            if ((e = aa(e)) && (i || void 0 === t)) return e.replace(Y, "");
            if (!e || !(t = Jn(t))) return e;
            var n = Ut(e),
                r = Ut(t);
            return hr(n, Ot(n, r), At(n, r) + 1).join("")
        }, Ei.trimEnd = function(e, t, i) {
            if ((e = aa(e)) && (i || void 0 === t)) return e.replace(Q, "");
            if (!e || !(t = Jn(t))) return e;
            var n = Ut(e);
            return hr(n, 0, At(n, Ut(t)) + 1).join("")
        }, Ei.trimStart = function(e, t, i) {
            if ((e = aa(e)) && (i || void 0 === t)) return e.replace(X, "");
            if (!e || !(t = Jn(t))) return e;
            var n = Ut(e);
            return hr(n, Ot(n, Ut(t))).join("")
        }, Ei.truncate = function(e, t) {
            var i = 30,
                n = "...";
            if (Ws(t)) {
                var r = "separator" in t ? t.separator : r;
                i = "length" in t ? na(t.length) : i, n = "omission" in t ? Jn(t.omission) : n
            }
            var o = (e = aa(e)).length;
            if (Vt(e)) {
                var s = Ut(e);
                o = s.length
            }
            if (i >= o) return e;
            var a = i - Gt(n);
            if (a < 1) return n;
            var l = s ? hr(s, 0, a).join("") : e.slice(0, a);
            if (void 0 === r) return l + n;
            if (s && (a += l.length - a), Ys(r)) {
                if (e.slice(a).search(r)) {
                    var h, p = l;
                    for (r.global || (r = me(r.source, aa(ne.exec(r)) + "g")), r.lastIndex = 0; h = r.exec(p);) var d = h.index;
                    l = l.slice(0, void 0 === d ? a : d)
                }
            } else if (e.indexOf(Jn(r), a) != a) {
                var c = l.lastIndexOf(r);
                c > -1 && (l = l.slice(0, c))
            }
            return l + n
        }, Ei.unescape = function(e) {
            return (e = aa(e)) && H.test(e) ? e.replace(F, Kt) : e
        }, Ei.uniqueId = function(e) {
            var t = ++Te;
            return aa(e) + t
        }, Ei.upperCase = Ha, Ei.upperFirst = Va, Ei.each = as, Ei.eachRight = ls, Ei.first = Bo, Qa(Ei, (pl = {}, ln(Ei, (function(e, t) {
            ke.call(Ei.prototype, t) || (pl[t] = e)
        })), pl), {
            chain: !1
        }), Ei.VERSION = "4.17.20", at(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], (function(e) {
            Ei[e].placeholder = Ei
        })), at(["drop", "take"], (function(e, t) {
            Mi.prototype[e] = function(i) {
                i = void 0 === i ? 1 : oi(na(i), 0);
                var n = this.__filtered__ && !t ? new Mi(this) : this.clone();
                return n.__filtered__ ? n.__takeCount__ = si(i, n.__takeCount__) : n.__views__.push({
                    size: si(i, 4294967295),
                    type: e + (n.__dir__ < 0 ? "Right" : "")
                }), n
            }, Mi.prototype[e + "Right"] = function(t) {
                return this.reverse()[e](t).reverse()
            }
        })), at(["filter", "map", "takeWhile"], (function(e, t) {
            var i = t + 1,
                n = 1 == i || 3 == i;
            Mi.prototype[e] = function(e) {
                var t = this.clone();
                return t.__iteratees__.push({
                    iteratee: Qr(e, 3),
                    type: i
                }), t.__filtered__ = t.__filtered__ || n, t
            }
        })), at(["head", "last"], (function(e, t) {
            var i = "take" + (t ? "Right" : "");
            Mi.prototype[e] = function() {
                return this[i](1).value()[0]
            }
        })), at(["initial", "tail"], (function(e, t) {
            var i = "drop" + (t ? "" : "Right");
            Mi.prototype[e] = function() {
                return this.__filtered__ ? new Mi(this) : this[i](1)
            }
        })), Mi.prototype.compact = function() {
            return this.filter(Ua)
        }, Mi.prototype.find = function(e) {
            return this.filter(e).head()
        }, Mi.prototype.findLast = function(e) {
            return this.reverse().find(e)
        }, Mi.prototype.invokeMap = Hn((function(e, t) {
            return "function" == typeof e ? new Mi(this) : this.map((function(i) {
                return vn(i, e, t)
            }))
        })), Mi.prototype.reject = function(e) {
            return this.filter(ks(Qr(e)))
        }, Mi.prototype.slice = function(e, t) {
            e = na(e);
            var i = this;
            return i.__filtered__ && (e > 0 || t < 0) ? new Mi(i) : (e < 0 ? i = i.takeRight(-e) : e && (i = i.drop(e)), void 0 !== t && (i = (t = na(t)) < 0 ? i.dropRight(-t) : i.take(t - e)), i)
        }, Mi.prototype.takeRightWhile = function(e) {
            return this.reverse().takeWhile(e).reverse()
        }, Mi.prototype.toArray = function() {
            return this.take(4294967295)
        }, ln(Mi.prototype, (function(e, t) {
            var i = /^(?:filter|find|map|reject)|While$/.test(t),
                n = /^(?:head|last)$/.test(t),
                r = Ei[n ? "take" + ("last" == t ? "Right" : "") : t],
                o = n || /^find/.test(t);
            r && (Ei.prototype[t] = function() {
                var t = this.__wrapped__,
                    s = n ? [1] : arguments,
                    a = t instanceof Mi,
                    l = s[0],
                    h = a || Os(t),
                    p = function(e) {
                        var t = r.apply(Ei, gt([e], s));
                        return n && d ? t[0] : t
                    };
                h && i && "function" == typeof l && 1 != l.length && (a = h = !1);
                var d = this.__chain__,
                    c = !!this.__actions__.length,
                    u = o && !d,
                    g = a && !c;
                if (!o && h) {
                    t = g ? t : new Mi(this);
                    var f = e.apply(t, s);
                    return f.__actions__.push({
                        func: is,
                        args: [p],
                        thisArg: void 0
                    }), new Ii(f, d)
                }
                return u && g ? e.apply(this, s) : (f = this.thru(p), u ? n ? f.value()[0] : f.value() : f)
            })
        })), at(["pop", "push", "shift", "sort", "splice", "unshift"], (function(e) {
            var t = be[e],
                i = /^(?:push|sort|unshift)$/.test(e) ? "tap" : "thru",
                n = /^(?:pop|shift)$/.test(e);
            Ei.prototype[e] = function() {
                var e = arguments;
                if (n && !this.__chain__) {
                    var r = this.value();
                    return t.apply(Os(r) ? r : [], e)
                }
                return this[i]((function(i) {
                    return t.apply(Os(i) ? i : [], e)
                }))
            }
        })), ln(Mi.prototype, (function(e, t) {
            var i = Ei[t];
            if (i) {
                var n = i.name + "";
                ke.call(vi, n) || (vi[n] = []), vi[n].push({
                    name: t,
                    func: i
                })
            }
        })), vi[Rr(void 0, 2).name] = [{
            name: "wrapper",
            func: void 0
        }], Mi.prototype.clone = function() {
            var e = new Mi(this.__wrapped__);
            return e.__actions__ = yr(this.__actions__), e.__dir__ = this.__dir__, e.__filtered__ = this.__filtered__, e.__iteratees__ = yr(this.__iteratees__), e.__takeCount__ = this.__takeCount__, e.__views__ = yr(this.__views__), e
        }, Mi.prototype.reverse = function() {
            if (this.__filtered__) {
                var e = new Mi(this);
                e.__dir__ = -1, e.__filtered__ = !0
            } else(e = this.clone()).__dir__ *= -1;
            return e
        }, Mi.prototype.value = function() {
            var e = this.__wrapped__.value(),
                t = this.__dir__,
                i = Os(e),
                n = t < 0,
                r = i ? e.length : 0,
                o = function(e, t, i) {
                    var n = -1,
                        r = i.length;
                    for (; ++n < r;) {
                        var o = i[n],
                            s = o.size;
                        switch (o.type) {
                            case "drop":
                                e += s;
                                break;
                            case "dropRight":
                                t -= s;
                                break;
                            case "take":
                                t = si(t, e + s);
                                break;
                            case "takeRight":
                                e = oi(e, t - s)
                        }
                    }
                    return {
                        start: e,
                        end: t
                    }
                }(0, r, this.__views__),
                s = o.start,
                a = o.end,
                l = a - s,
                h = n ? a : s - 1,
                p = this.__iteratees__,
                d = p.length,
                c = 0,
                u = si(l, this.__takeCount__);
            if (!i || !n && r == l && u == l) return ir(e, this.__actions__);
            var g = [];
            e: for (; l-- && c < u;) {
                for (var f = -1, m = e[h += t]; ++f < d;) {
                    var y = p[f],
                        v = y.iteratee,
                        b = y.type,
                        w = v(m);
                    if (2 == b) m = w;
                    else if (!w) {
                        if (1 == b) continue e;
                        break e
                    }
                }
                g[c++] = m
            }
            return g
        }, Ei.prototype.at = ns, Ei.prototype.chain = function() {
            return ts(this)
        }, Ei.prototype.commit = function() {
            return new Ii(this.value(), this.__chain__)
        }, Ei.prototype.next = function() {
            void 0 === this.__values__ && (this.__values__ = ta(this.value()));
            var e = this.__index__ >= this.__values__.length;
            return {
                done: e,
                value: e ? void 0 : this.__values__[this.__index__++]
            }
        }, Ei.prototype.plant = function(e) {
            for (var t, i = this; i instanceof Pi;) {
                var n = Ro(i);
                n.__index__ = 0, n.__values__ = void 0, t ? r.__wrapped__ = n : t = n;
                var r = n;
                i = i.__wrapped__
            }
            return r.__wrapped__ = e, t
        }, Ei.prototype.reverse = function() {
            var e = this.__wrapped__;
            if (e instanceof Mi) {
                var t = e;
                return this.__actions__.length && (t = new Mi(this)), (t = t.reverse()).__actions__.push({
                    func: is,
                    args: [Wo],
                    thisArg: void 0
                }), new Ii(t, this.__chain__)
            }
            return this.thru(Wo)
        }, Ei.prototype.toJSON = Ei.prototype.valueOf = Ei.prototype.value = function() {
            return ir(this.__wrapped__, this.__actions__)
        }, Ei.prototype.first = Ei.prototype.head, Ze && (Ei.prototype[Ze] = function() {
            return this
        }), Ei
    }();
    Ke._ = Yt, void 0 === (r = function() {
        return Yt
    }.call(t, i, t, n)) || (n.exports = r)
}).call(this)
}).call(this, i(26), i(27)(e))
}, , , , ,
function(e, t, i) {
    "use strict";
    e.exports = function(e) {
        var t = [];
        return t.toString = function() {
            return this.map((function(t) {
                var i = function(e, t) {
                    var i = e[1] || "",
                        n = e[3];
                    if (!n) return i;
                    if (t && "function" == typeof btoa) {
                        var r = (s = n, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(s)))) + " */"),
                            o = n.sources.map((function(e) {
                                return "/*# sourceURL=" + n.sourceRoot + e + " */"
                            }));
                        return [i].concat(o).concat([r]).join("\n")
                    }
                    var s;
                    return [i].join("\n")
                }(t, e);
                return t[2] ? "@media " + t[2] + "{" + i + "}" : i
            })).join("")
        }, t.i = function(e, i) {
            "string" == typeof e && (e = [
                [null, e, ""]
            ]);
            for (var n = {}, r = 0; r < this.length; r++) {
                var o = this[r][0];
                null != o && (n[o] = !0)
            }
            for (r = 0; r < e.length; r++) {
                var s = e[r];
                null != s[0] && n[s[0]] || (i && !s[2] ? s[2] = i : i && (s[2] = "(" + s[2] + ") and (" + i + ")"), t.push(s))
            }
        }, t
    }
},
function(e, t, i) {
    var n, r, o = {},
        s = (n = function() {
            return window && document && document.all && !window.atob
        }, function() {
            return void 0 === r && (r = n.apply(this, arguments)), r
        }),
        a = function(e, t) {
            return t ? t.querySelector(e) : document.querySelector(e)
        },
        l = function(e) {
            var t = {};
            return function(e, i) {
                if ("function" == typeof e) return e();
                if (void 0 === t[e]) {
                    var n = a.call(this, e, i);
                    if (window.HTMLIFrameElement && n instanceof window.HTMLIFrameElement) try {
                        n = n.contentDocument.head
                    } catch (e) {
                        n = null
                    }
                    t[e] = n
                }
                return t[e]
            }
        }(),
        h = null,
        p = 0,
        d = [],
        c = i(23);

    function u(e, t) {
        for (var i = 0; i < e.length; i++) {
            var n = e[i],
                r = o[n.id];
            if (r) {
                r.refs++;
                for (var s = 0; s < r.parts.length; s++) r.parts[s](n.parts[s]);
                for (; s < n.parts.length; s++) r.parts.push(b(n.parts[s], t))
            } else {
                var a = [];
                for (s = 0; s < n.parts.length; s++) a.push(b(n.parts[s], t));
                o[n.id] = {
                    id: n.id,
                    refs: 1,
                    parts: a
                }
            }
        }
    }

    function g(e, t) {
        for (var i = [], n = {}, r = 0; r < e.length; r++) {
            var o = e[r],
                s = t.base ? o[0] + t.base : o[0],
                a = {
                    css: o[1],
                    media: o[2],
                    sourceMap: o[3]
                };
            n[s] ? n[s].parts.push(a) : i.push(n[s] = {
                id: s,
                parts: [a]
            })
        }
        return i
    }

    function f(e, t) {
        var i = l(e.insertInto);
        if (!i) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
        var n = d[d.length - 1];
        if ("top" === e.insertAt) n ? n.nextSibling ? i.insertBefore(t, n.nextSibling) : i.appendChild(t) : i.insertBefore(t, i.firstChild), d.push(t);
        else if ("bottom" === e.insertAt) i.appendChild(t);
        else {
            if ("object" != typeof e.insertAt || !e.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
            var r = l(e.insertAt.before, i);
            i.insertBefore(t, r)
        }
    }

    function m(e) {
        if (null === e.parentNode) return !1;
        e.parentNode.removeChild(e);
        var t = d.indexOf(e);
        t >= 0 && d.splice(t, 1)
    }

    function y(e) {
        var t = document.createElement("style");
        if (void 0 === e.attrs.type && (e.attrs.type = "text/css"), void 0 === e.attrs.nonce) {
            var n = function() {
                0;
                return i.nc
            }();
            n && (e.attrs.nonce = n)
        }
        return v(t, e.attrs), f(e, t), t
    }

    function v(e, t) {
        Object.keys(t).forEach((function(i) {
            e.setAttribute(i, t[i])
        }))
    }

    function b(e, t) {
        var i, n, r, o;
        if (t.transform && e.css) {
            if (!(o = "function" == typeof t.transform ? t.transform(e.css) : t.transform.default(e.css))) return function() {};
            e.css = o
        }
        if (t.singleton) {
            var s = p++;
            i = h || (h = y(t)), n = S.bind(null, i, s, !1), r = S.bind(null, i, s, !0)
        } else e.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (i = function(e) {
            var t = document.createElement("link");
            return void 0 === e.attrs.type && (e.attrs.type = "text/css"), e.attrs.rel = "stylesheet", v(t, e.attrs), f(e, t), t
        }(t), n = k.bind(null, i, t), r = function() {
            m(i), i.href && URL.revokeObjectURL(i.href)
        }) : (i = y(t), n = x.bind(null, i), r = function() {
            m(i)
        });
        return n(e),
            function(t) {
                if (t) {
                    if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;
                    n(e = t)
                } else r()
            }
    }
    e.exports = function(e, t) {
        if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document) throw new Error("The style-loader cannot be used in a non-browser environment");
        (t = t || {}).attrs = "object" == typeof t.attrs ? t.attrs : {}, t.singleton || "boolean" == typeof t.singleton || (t.singleton = s()), t.insertInto || (t.insertInto = "head"), t.insertAt || (t.insertAt = "bottom");
        var i = g(e, t);
        return u(i, t),
            function(e) {
                for (var n = [], r = 0; r < i.length; r++) {
                    var s = i[r];
                    (a = o[s.id]).refs--, n.push(a)
                }
                e && u(g(e, t), t);
                for (r = 0; r < n.length; r++) {
                    var a;
                    if (0 === (a = n[r]).refs) {
                        for (var l = 0; l < a.parts.length; l++) a.parts[l]();
                        delete o[a.id]
                    }
                }
            }
    };
    var w, C = (w = [], function(e, t) {
        return w[e] = t, w.filter(Boolean).join("\n")
    });

    function S(e, t, i, n) {
        var r = i ? "" : n.css;
        if (e.styleSheet) e.styleSheet.cssText = C(t, r);
        else {
            var o = document.createTextNode(r),
                s = e.childNodes;
            s[t] && e.removeChild(s[t]), s.length ? e.insertBefore(o, s[t]) : e.appendChild(o)
        }
    }

    function x(e, t) {
        var i = t.css,
            n = t.media;
        if (n && e.setAttribute("media", n), e.styleSheet) e.styleSheet.cssText = i;
        else {
            for (; e.firstChild;) e.removeChild(e.firstChild);
            e.appendChild(document.createTextNode(i))
        }
    }

    function k(e, t, i) {
        var n = i.css,
            r = i.sourceMap,
            o = void 0 === t.convertToAbsoluteUrls && r;
        (t.convertToAbsoluteUrls || o) && (n = c(n)), r && (n += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(r)))) + " */");
        var s = new Blob([n], {
                type: "text/css"
            }),
            a = e.href;
        e.href = URL.createObjectURL(s), a && URL.revokeObjectURL(a)
    }
}, , ,
function(e, t, i) {
    var n = i(22);
    "string" == typeof n && (n = [
        [e.i, n, ""]
    ]);
    var r = {
        hmr: !0,
        transform: void 0,
        insertInto: void 0
    };
    i(18)(n, r);
    n.locals && (e.exports = n.locals)
},
function(e, t, i) {
    (e.exports = i(17)(!1)).push([e.i, '.e-toolbar .e-tbar-btn .e-tbar-btn-text {\n  font-size: 12px;\n}\n\n.e-gantt .e-gantt-tree-grid-pane .e-columnheader,\n.e-gantt .e-gantt-tree-grid-pane .e-headercell {\n  font-weight: bold;\n}\n\n.e-toolbar .e-tbar-btn-text,\n.e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn-text {\n  font-weight: bold;\n}\n\n.e-toolbar .e-toolbar-items:first-child > .e-toolbar-item:last-child,\n.e-toolbar\n.e-toolbar-items:first-child\n> .e-toolbar-right\n.e-toolbar-item:last-child {\n  background-color: white;\n  height: calc(100% - 10px);\n  margin: 4px 0;\n  min-height: 0;\n  min-width: 0;\n  padding: 0 1.5px;\n}\n\n.e-headertext {\n  font-weight: bold;\n  font-size: 11px;\n}\n\n.e-gantt .e-gantt-chart .e-timeline-top-header-cell .e-header-cell-label,\n.e-gantt .e-gantt-chart .e-timeline-single-header-cell .e-header-cell-label {\n  font-weight: bold;\n  font-size: 11px;\n}\n\n.e-toolbar .e-toolbar-items {\n  background-color: #8c99c2;\n}\n\n.e-overlay {\n  opacity: 1;\n}\n\n.e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn:hover {\n  background-color: gray;\n}\n\n.e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  background-color: white;\n}\n\n.e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn:active {\n  background-color: white;\n}\n\n.e-toolbar .e-toolbar-items .e-toolbar-item.e-overlay {\n  background-color: #8c99c2;\n}\n\n.e-toolbar .e-tbar-btn:focus {\n  background: #fafafa;\n}\n\n.e-grid .e-columnmenu {\n  cursor: pointer;\n}\n\n.e-gantt .e-gantt-chart .e-connectorpoint-right,\n.e-gantt .e-gantt-chart .e-connectorpoint-left,\n.e-gantt .e-gantt-chart .e-right-connectorpoint-outer-div,\n.e-gantt .e-gantt-chart .e-left-connectorpoint-outer-div {\n  width: 10px !important;\n  height: 10px !important;\n}\n\n.e-gantt .e-gantt-chart .e-chart-row .e-chart-row-cell {\n  line-height: normal !important;\n}\n\n.e-treegrid .e-rowcell.e-treerowcell {\n  font-weight: bold;\n}\n\n.e-link::before {\n  content: "\\e290";\n}\n\n.e-toolbar-item .e-template {\n  background-color: white !important;\n}\n\n.e-gantt-tooltip {\n  background-color: white;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-parent-progressbar-inner-div {\n  background-color: gray;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-parent-taskbar-inner-div {\n  background-color: #787cdf;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-child-progressbar-inner-div {\n  background-color: #6d6fff;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-child-taskbar-inner-div {\n  background-color: #22e5ff;\n}\n\n.e-gantt-tooltip {\n  pointer-events: none;\n}\n\n.e-child-progress-resizer {\n  margin-top: 15px !important;\n}\n\n.e-gantt .e-gantt-chart .e-connectorpoint-right {\n  margin-left: 3px !important;\n}\n\n.e-left-connectorpoint-outer-div {\n  margin-top: 2px !important;\n  left: -13px !important;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-parent-taskbar-inner-div::after {\n  content: "";\n  position: absolute;\n  right: 0%;\n  top: 70%;\n  width: 0;\n  height: 0;\n  border-left: 10px solid transparent;\n  border-top: 10px solid #000000;\n  clear: both;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-parent-taskbar-inner-div::before {\n  content: "";\n  position: absolute;\n  left: 0%;\n  top: 70%;\n  width: 0;\n  height: 0;\n  border-right: 10px solid transparent;\n  border-top: 10px solid #000000;\n  clear: both;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-parent-taskbar-inner-div {\n  background-color: #000000;\n  border: 1px solid #000000;\n  border-radius: 0px;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-parent-progressbar-inner-div {\n  border-top: 2px solid #000000;\n  border-bottom: 2px solid #000000;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-parent-taskbar-inner-div {\n  height: 11px !important;\n}\n\n.e-gantt .e-gantt-chart .e-gantt-child-progressbar-inner-div {\n  border-top: 3px solid #22e5ff;\n  border-bottom: 3px solid #22e5ff;\n}', ""])
},
function(e, t) {
    e.exports = function(e) {
        var t = "undefined" != typeof window && window.location;
        if (!t) throw new Error("fixUrls requires window.location");
        if (!e || "string" != typeof e) return e;
        var i = t.protocol + "//" + t.host,
            n = i + t.pathname.replace(/\/[^\/]*$/, "/");
        return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, (function(e, t) {
            var r, o = t.trim().replace(/^"(.*)"$/, (function(e, t) {
                return t
            })).replace(/^'(.*)'$/, (function(e, t) {
                return t
            }));
            return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o) ? e : (r = 0 === o.indexOf("//") ? o : 0 === o.indexOf("/") ? i + o : n + o.replace(/^\.\//, ""), "url(" + JSON.stringify(r) + ")")
        }))
    }
},
function(e, t, i) {
    var n = i(25);
    "string" == typeof n && (n = [
        [e.i, n, ""]
    ]);
    var r = {
        hmr: !0,
        transform: void 0,
        insertInto: void 0
    };
    i(18)(n, r);
    n.locals && (e.exports = n.locals)
},
function(e, t, i) {
    (e.exports = i(17)(!1)).push([e.i, "/* No CSS */", ""])
},
function(e, t) {
    var i;
    i = function() {
        return this
    }();
    try {
        i = i || new Function("return this")()
    } catch (e) {
        "object" == typeof window && (i = window)
    }
    e.exports = i
},
function(e, t) {
    e.exports = function(e) {
        return e.webpackPolyfill || (e.deprecate = function() {}, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", {
            enumerable: !0,
            get: function() {
                return e.l
            }
        }), Object.defineProperty(e, "id", {
            enumerable: !0,
            get: function() {
                return e.i
            }
        }), e.webpackPolyfill = 1), e
    }
},
function(e, t, i) {
    "use strict";
    i.r(t);
    i(21), i(24);
    var n = "ej2_instances",
        r = 0,
        o = !1;

    function s(e, t) {
        var i = t;
        return i.unshift(void 0), new(Function.prototype.bind.apply(e, i))
    }

    function a(e, t) {
        for (var i = t, n = e.replace(/\[/g, ".").replace(/\]/g, "").split("."), r = 0; r < n.length && !f(i); r++) i = i[n[r]];
        return i
    }

    function l(e, t, i) {
        var n, r, o = e.replace(/\[/g, ".").replace(/\]/g, "").split("."),
            s = i || {},
            a = s,
            l = o.length;
        for (n = 0; n < l; n++) r = o[n], n + 1 === l ? a[r] = void 0 === t ? {} : t : g(a[r]) && (a[r] = {}), a = a[r];
        return s
    }

    function h(e, t) {
        delete e[t]
    }

    function p(e) {
        return !g(e) && e.constructor === {}.constructor
    }

    function d(e, t) {
        return e[t]
    }

    function c(e, t) {
        if (!g(t))
            for (var i = e, n = t, r = 0, o = Object.keys(t); r < o.length; r++) {
                var s = o[r];
                g(i.deepMerge) || -1 === i.deepMerge.indexOf(s) || !p(n[s]) && !Array.isArray(n[s]) ? i[s] = n[s] : u(i[s], i[s], n[s], !0)
            }
    }

    function u(e, t, i, n) {
        var r = e && "object" == typeof e ? e : {},
            o = arguments.length;
        n && (o -= 1);
        for (var s = function(e) {
                if (!a[e]) return "continue";
                var t = a[e];
                Object.keys(t).forEach((function(e) {
                    var i, o = r[e],
                        s = t[e],
                        a = Array.isArray(s) && Array.isArray(o) && s.length !== o.length,
                        l = !S() || !(o instanceof Event || a);
                    n && l && (p(s) || Array.isArray(s)) ? p(s) ? (i = o || {}, Array.isArray(i) && i.hasOwnProperty("isComplexArray") ? u(i, {}, s, n) : r[e] = u(i, {}, s, n)) : (i = S() ? o && Object.keys(s).length : o || [], r[e] = u([], i, s, n)) : r[e] = s
                }))
            }, a = arguments, l = 1; l < o; l++) s(l);
        return r
    }

    function g(e) {
        return null == e
    }

    function f(e) {
        return void 0 === e
    }

    function m(e) {
        return e + "_" + r++
    }

    function y(e, t) {
        var i;
        return function() {
            var n = this,
                r = arguments,
                o = function() {
                    return i = null, e.apply(n, r)
                };
            clearTimeout(i), i = setTimeout(o, t)
        }
    }

    function v(e, t) {
        return e === t || !(e === document || !e) && v(e.parentNode, t)
    }

    function b(e) {
        try {
            throw new Error(e)
        } catch (e) {
            throw e.message + "\n" + e.stack
        }
    }

    function w(e, t) {
        var i = document.createElement("div"),
            n = [].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),
            r = "";
        g(t) && (t = window.open("", "print", "height=452,width=1024,tabbar=no")), i.appendChild(e.cloneNode(!0));
        for (var o = 0, s = n.length; o < s; o++) r += n[o].outerHTML;
        t.document.write("<!DOCTYPE html> <html><head>" + r + "</head><body>" + i.innerHTML + "<script> (function() { window.ready = true; })(); <\/script></body></html>"), t.document.close(), t.focus();
        var a = setInterval((function() {
            t.ready && (t.print(), t.close(), clearInterval(a))
        }), 500);
        return t
    }

    function C(e) {
        var t = e + "";
        return t.match(/auto|%|px|vh|vm|vmax|vmin|em/) ? t : t + "px"
    }

    function S() {
        return o
    }

    function x(e) {
        return e instanceof Node || !S() || g(e.xPath) ? e : document.evaluate(e.xPath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue
    }

    function k(e, t) {
        var i = "string" == typeof e ? document.querySelector(e) : e;
        if (i[n])
            for (var r = 0, o = i[n]; r < o.length; r++) {
                var s = o[r];
                if (s instanceof t) return s
            }
        return null
    }
    var T, D = {
            latn: {
                _digits: "0123456789",
                _type: "numeric"
            }
        },
        E = {
            decimal: ".",
            group: ",",
            percentSign: "%",
            plusSign: "+",
            minusSign: "-",
            infinity: "âˆž",
            nan: "NaN",
            exponential: "E"
        },
        R = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
        P = function() {
            function e() {}
            return e.getMainObject = function(e, t) {
                return a(S() ? t : "main." + t, e)
            }, e.getNumberingSystem = function(e) {
                return a("supplemental.numberingSystems", e) || this.numberingSystems
            }, e.reverseObject = function(e, t) {
                for (var i = {}, n = 0, r = t || Object.keys(e); n < r.length; n++) {
                    var o = r[n];
                    i.hasOwnProperty(e[o]) || (i[e[o]] = o)
                }
                return i
            }, e.getSymbolRegex = function(e) {
                var t = e.map((function(e) {
                    return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1")
                })).join("|");
                return new RegExp(t, "g")
            }, e.getSymbolMatch = function(e) {
                for (var t = {}, i = 0, n = Object.keys(E); i < n.length; i++) {
                    var r = n[i];
                    t[e[r]] = E[r]
                }
                return t
            }, e.constructRegex = function(e) {
                for (var t = e.length, i = "", n = 0; n < t; n++) i += n !== t - 1 ? e[n] + "|" : e[n];
                return i
            }, e.convertValueParts = function(e, t, i) {
                return e.replace(t, (function(e) {
                    return i[e]
                }))
            }, e.getDefaultNumberingSystem = function(e) {
                var t = {};
                return t.obj = a("numbers", e), t.nSystem = a("defaultNumberingSystem", t.obj), t
            }, e.getCurrentNumericOptions = function(e, t, i, n) {
                var r = {},
                    o = this.getDefaultNumberingSystem(e);
                if (!f(o.nSystem) || n) {
                    var s = n ? a("obj.mapperDigits", o) : a(o.nSystem + "._digits", t);
                    f(s) || (r.numericPair = this.reverseObject(s, R), r.numberParseRegex = new RegExp(this.constructRegex(s), "g"), r.numericRegex = "[" + s[0] + "-" + s[9] + "]", i && (r.numericRegex = s[0] + "-" + s[9], r.symbolNumberSystem = a(n ? "numberSymbols" : "symbols-numberSystem-" + o.nSystem, o.obj), r.symbolMatch = this.getSymbolMatch(r.symbolNumberSystem), r.numberSystem = o.nSystem))
                }
                return r
            }, e.getNumberMapper = function(e, t, i) {
                var n = {
                        mapper: {}
                    },
                    r = this.getDefaultNumberingSystem(e);
                if (!f(r.nSystem)) {
                    n.numberSystem = r.nSystem, n.numberSymbols = a("symbols-numberSystem-" + r.nSystem, r.obj), n.timeSeparator = a("timeSeparator", n.numberSymbols);
                    var o = a(r.nSystem + "._digits", t);
                    if (!f(o))
                        for (var s = 0, l = R; s < l.length; s++) {
                            var h = l[s];
                            n.mapper[h] = o[h]
                        }
                }
                return n
            }, e.nPair = "numericPair", e.nRegex = "numericRegex", e.numberingSystems = D, e
        }(),
        I = {
            DJF: "Fdj",
            ERN: "Nfk",
            ETB: "Br",
            NAD: "$",
            ZAR: "R",
            XAF: "FCFA",
            GHS: "GHâ‚µ",
            XDR: "XDR",
            AED: "Ø¯.Ø¥.â€",
            BHD: "Ø¯.Ø¨.â€",
            DZD: "Ø¯.Ø¬.â€",
            EGP: "Ø¬.Ù….â€",
            ILS: "â‚ª",
            IQD: "Ø¯.Ø¹.â€",
            JOD: "Ø¯.Ø§.â€",
            KMF: "CF",
            KWD: "Ø¯.Ùƒ.â€",
            LBP: "Ù„.Ù„.â€",
            LYD: "Ø¯.Ù„.â€",
            MAD: "Ø¯.Ù….â€",
            MRU: "Ø£.Ù….",
            OMR: "Ø±.Ø¹.â€",
            QAR: "Ø±.Ù‚.â€",
            SAR: "Ø±.Ø³.â€",
            SDG: "Ø¬.Ø³.",
            SOS: "S",
            SSP: "Â£",
            SYP: "Ù„.Ø³.â€",
            TND: "Ø¯.Øª.â€",
            YER: "Ø±.ÙŠ.â€",
            CLP: "$",
            INR: "â‚¹",
            TZS: "TSh",
            EUR: "â‚¬",
            AZN: "â‚¼",
            RUB: "â‚½",
            BYN: "Br",
            ZMW: "K",
            BGN: "Ð»Ð².",
            NGN: "â‚¦",
            XOF: "CFA",
            BDT: "à§³",
            CNY: "Â¥",
            BAM: "ÐšÐœ",
            UGX: "USh",
            USD: "$",
            CZK: "KÄ",
            GBP: "Â£",
            DKK: "kr.",
            KES: "Ksh",
            CHF: "CHF",
            MVR: "Þƒ.",
            BTN: "Nu.",
            XCD: "EC$",
            AUD: "$",
            BBD: "$",
            BIF: "FBu",
            BMD: "$",
            BSD: "$",
            BWP: "P",
            BZD: "$",
            CAD: "$",
            NZD: "$",
            FJD: "$",
            FKP: "Â£",
            GIP: "Â£",
            GMD: "D",
            GYD: "$",
            HKD: "$",
            IDR: "Rp",
            JMD: "$",
            KYD: "$",
            LRD: "$",
            MGA: "Ar",
            MOP: "MOP$",
            MUR: "Rs",
            MWK: "MK",
            MYR: "RM",
            PGK: "K",
            PHP: "â‚±",
            PKR: "Rs",
            RWF: "RF",
            SBD: "$",
            SCR: "SR",
            SEK: "kr",
            SGD: "$",
            SHP: "Â£",
            SLL: "Le",
            ANG: "NAf.",
            SZL: "E",
            TOP: "T$",
            TTD: "$",
            VUV: "VT",
            WST: "WS$",
            ARS: "$",
            BOB: "Bs",
            BRL: "R$",
            COP: "$",
            CRC: "â‚¡",
            CUP: "$",
            DOP: "$",
            GTQ: "Q",
            HNL: "L",
            MXN: "$",
            NIO: "C$",
            PAB: "B/.",
            PEN: "S/",
            PYG: "â‚²",
            UYU: "$",
            VES: "Bs.S",
            IRR: "Ø±ÙŠØ§Ù„",
            GNF: "FG",
            CDF: "FC",
            HTG: "G",
            XPF: "FCFP",
            HRK: "kn",
            HUF: "Ft",
            AMD: "Ö",
            ISK: "kr",
            JPY: "Â¥",
            GEL: "â‚¾",
            CVE: "â€‹",
            KZT: "â‚¸",
            KHR: "áŸ›",
            KPW: "â‚©",
            KRW: "â‚©",
            KGS: "ÑÐ¾Ð¼",
            AOA: "Kz",
            LAK: "â‚­",
            MZN: "MTn",
            MKD: "Ð´ÐµÐ½",
            MNT: "â‚®",
            BND: "$",
            MMK: "K",
            NOK: "kr",
            NPR: "à¤°à¥",
            AWG: "Afl.",
            SRD: "$",
            PLN: "zÅ‚",
            AFN: "Ø‹",
            STN: "Db",
            MDL: "L",
            RON: "lei",
            UAH: "â‚´",
            LKR: "à¶»à·”.",
            ALL: "LekÃ«",
            RSD: "Ð´Ð¸Ð½.",
            TJS: "ÑÐ¼Ð½",
            THB: "à¸¿",
            TMT: "m.",
            TRY: "â‚º",
            UZS: "ÑÑžÐ¼",
            VND: "â‚«",
            TWD: "NT$"
        };
    ! function(e) {
        var t = [28607, 28636, 28665, 28695, 28724, 28754, 28783, 28813, 28843, 28872, 28901, 28931, 28960, 28990, 29019, 29049, 29078, 29108, 29137, 29167, 29196, 29226, 29255, 29285, 29315, 29345, 29375, 29404, 29434, 29463, 29492, 29522, 29551, 29580, 29610, 29640, 29669, 29699, 29729, 29759, 29788, 29818, 29847, 29876, 29906, 29935, 29964, 29994, 30023, 30053, 30082, 30112, 30141, 30171, 30200, 30230, 30259, 30289, 30318, 30348, 30378, 30408, 30437, 30467, 30496, 30526, 30555, 30585, 30614, 30644, 30673, 30703, 30732, 30762, 30791, 30821, 30850, 30880, 30909, 30939, 30968, 30998, 31027, 31057, 31086, 31116, 31145, 31175, 31204, 31234, 31263, 31293, 31322, 31352, 31381, 31411, 31441, 31471, 31500, 31530, 31559, 31589, 31618, 31648, 31676, 31706, 31736, 31766, 31795, 31825, 31854, 31884, 31913, 31943, 31972, 32002, 32031, 32061, 32090, 32120, 32150, 32180, 32209, 32239, 32268, 32298, 32327, 32357, 32386, 32416, 32445, 32475, 32504, 32534, 32563, 32593, 32622, 32652, 32681, 32711, 32740, 32770, 32799, 32829, 32858, 32888, 32917, 32947, 32976, 33006, 33035, 33065, 33094, 33124, 33153, 33183, 33213, 33243, 33272, 33302, 33331, 33361, 33390, 33420, 33450, 33479, 33509, 33539, 33568, 33598, 33627, 33657, 33686, 33716, 33745, 33775, 33804, 33834, 33863, 33893, 33922, 33952, 33981, 34011, 34040, 34069, 34099, 34128, 34158, 34187, 34217, 34247, 34277, 34306, 34336, 34365, 34395, 34424, 34454, 34483, 34512, 34542, 34571, 34601, 34631, 34660, 34690, 34719, 34749, 34778, 34808, 34837, 34867, 34896, 34926, 34955, 34985, 35015, 35044, 35074, 35103, 35133, 35162, 35192, 35222, 35251, 35280, 35310, 35340, 35370, 35399, 35429, 35458, 35488, 35517, 35547, 35576, 35605, 35635, 35665, 35694, 35723, 35753, 35782, 35811, 35841, 35871, 35901, 35930, 35960, 35989, 36019, 36048, 36078, 36107, 36136, 36166, 36195, 36225, 36254, 36284, 36314, 36343, 36373, 36403, 36433, 36462, 36492, 36521, 36551, 36580, 36610, 36639, 36669, 36698, 36728, 36757, 36786, 36816, 36845, 36875, 36904, 36934, 36963, 36993, 37022, 37052, 37081, 37111, 37141, 37170, 37200, 37229, 37259, 37288, 37318, 37347, 37377, 37406, 37436, 37465, 37495, 37524, 37554, 37584, 37613, 37643, 37672, 37701, 37731, 37760, 37790, 37819, 37849, 37878, 37908, 37938, 37967, 37997, 38027, 38056, 38085, 38115, 38144, 38174, 38203, 38233, 38262, 38292, 38322, 38351, 38381, 38410, 38440, 38469, 38499, 38528, 38558, 38587, 38617, 38646, 38676, 38705, 38735, 38764, 38794, 38823, 38853, 38882, 38912, 38941, 38971, 39001, 39030, 39059, 39089, 39118, 39148, 39178, 39208, 39237, 39267, 39297, 39326, 39355, 39385, 39414, 39444, 39473, 39503, 39532, 39562, 39592, 39621, 39650, 39680, 39709, 39739, 39768, 39798, 39827, 39857, 39886, 39916, 39946, 39975, 40005, 40035, 40064, 40094, 40123, 40153, 40182, 40212, 40241, 40271, 40300, 40330, 40359, 40389, 40418, 40448, 40477, 40507, 40536, 40566, 40595, 40625, 40655, 40685, 40714, 40744, 40773, 40803, 40832, 40862, 40892, 40921, 40951, 40980, 41009, 41039, 41068, 41098, 41127, 41157, 41186, 41216, 41245, 41275, 41304, 41334, 41364, 41393, 41422, 41452, 41481, 41511, 41540, 41570, 41599, 41629, 41658, 41688, 41718, 41748, 41777, 41807, 41836, 41865, 41894, 41924, 41953, 41983, 42012, 42042, 42072, 42102, 42131, 42161, 42190, 42220, 42249, 42279, 42308, 42337, 42367, 42397, 42426, 42456, 42485, 42515, 42545, 42574, 42604, 42633, 42662, 42692, 42721, 42751, 42780, 42810, 42839, 42869, 42899, 42929, 42958, 42988, 43017, 43046, 43076, 43105, 43135, 43164, 43194, 43223, 43253, 43283, 43312, 43342, 43371, 43401, 43430, 43460, 43489, 43519, 43548, 43578, 43607, 43637, 43666, 43696, 43726, 43755, 43785, 43814, 43844, 43873, 43903, 43932, 43962, 43991, 44021, 44050, 44080, 44109, 44139, 44169, 44198, 44228, 44258, 44287, 44317, 44346, 44375, 44405, 44434, 44464, 44493, 44523, 44553, 44582, 44612, 44641, 44671, 44700, 44730, 44759, 44788, 44818, 44847, 44877, 44906, 44936, 44966, 44996, 45025, 45055, 45084, 45114, 45143, 45172, 45202, 45231, 45261, 45290, 45320, 45350, 45380, 45409, 45439, 45468, 45498, 45527, 45556, 45586, 45615, 45644, 45674, 45704, 45733, 45763, 45793, 45823, 45852, 45882, 45911, 45940, 45970, 45999, 46028, 46058, 46088, 46117, 46147, 46177, 46206, 46236, 46265, 46295, 46324, 46354, 46383, 46413, 46442, 46472, 46501, 46531, 46560, 46590, 46620, 46649, 46679, 46708, 46738, 46767, 46797, 46826, 46856, 46885, 46915, 46944, 46974, 47003, 47033, 47063, 47092, 47122, 47151, 47181, 47210, 47240, 47269, 47298, 47328, 47357, 47387, 47417, 47446, 47476, 47506, 47535, 47565, 47594, 47624, 47653, 47682, 47712, 47741, 47771, 47800, 47830, 47860, 47890, 47919, 47949, 47978, 48008, 48037, 48066, 48096, 48125, 48155, 48184, 48214, 48244, 48273, 48303, 48333, 48362, 48392, 48421, 48450, 48480, 48509, 48538, 48568, 48598, 48627, 48657, 48687, 48717, 48746, 48776, 48805, 48834, 48864, 48893, 48922, 48952, 48982, 49011, 49041, 49071, 49100, 49130, 49160, 49189, 49218, 49248, 49277, 49306, 49336, 49365, 49395, 49425, 49455, 49484, 49514, 49543, 49573, 49602, 49632, 49661, 49690, 49720, 49749, 49779, 49809, 49838, 49868, 49898, 49927, 49957, 49986, 50016, 50045, 50075, 50104, 50133, 50163, 50192, 50222, 50252, 50281, 50311, 50340, 50370, 50400, 50429, 50459, 50488, 50518, 50547, 50576, 50606, 50635, 50665, 50694, 50724, 50754, 50784, 50813, 50843, 50872, 50902, 50931, 50960, 50990, 51019, 51049, 51078, 51108, 51138, 51167, 51197, 51227, 51256, 51286, 51315, 51345, 51374, 51403, 51433, 51462, 51492, 51522, 51552, 51582, 51611, 51641, 51670, 51699, 51729, 51758, 51787, 51816, 51846, 51876, 51906, 51936, 51965, 51995, 52025, 52054, 52083, 52113, 52142, 52171, 52200, 52230, 52260, 52290, 52319, 52349, 52379, 52408, 52438, 52467, 52497, 52526, 52555, 52585, 52614, 52644, 52673, 52703, 52733, 52762, 52792, 52822, 52851, 52881, 52910, 52939, 52969, 52998, 53028, 53057, 53087, 53116, 53146, 53176, 53205, 53235, 53264, 53294, 53324, 53353, 53383, 53412, 53441, 53471, 53500, 53530, 53559, 53589, 53619, 53648, 53678, 53708, 53737, 53767, 53796, 53825, 53855, 53884, 53913, 53943, 53973, 54003, 54032, 54062, 54092, 54121, 54151, 54180, 54209, 54239, 54268, 54297, 54327, 54357, 54387, 54416, 54446, 54476, 54505, 54535, 54564, 54593, 54623, 54652, 54681, 54711, 54741, 54770, 54800, 54830, 54859, 54889, 54919, 54948, 54977, 55007, 55036, 55066, 55095, 55125, 55154, 55184, 55213, 55243, 55273, 55302, 55332, 55361, 55391, 55420, 55450, 55479, 55508, 55538, 55567, 55597, 55627, 55657, 55686, 55716, 55745, 55775, 55804, 55834, 55863, 55892, 55922, 55951, 55981, 56011, 56040, 56070, 56100, 56129, 56159, 56188, 56218, 56247, 56276, 56306, 56335, 56365, 56394, 56424, 56454, 56483, 56513, 56543, 56572, 56601, 56631, 56660, 56690, 56719, 56749, 56778, 56808, 56837, 56867, 56897, 56926, 56956, 56985, 57015, 57044, 57074, 57103, 57133, 57162, 57192, 57221, 57251, 57280, 57310, 57340, 57369, 57399, 57429, 57458, 57487, 57517, 57546, 57576, 57605, 57634, 57664, 57694, 57723, 57753, 57783, 57813, 57842, 57871, 57901, 57930, 57959, 57989, 58018, 58048, 58077, 58107, 58137, 58167, 58196, 58226, 58255, 58285, 58314, 58343, 58373, 58402, 58432, 58461, 58491, 58521, 58551, 58580, 58610, 58639, 58669, 58698, 58727, 58757, 58786, 58816, 58845, 58875, 58905, 58934, 58964, 58994, 59023, 59053, 59082, 59111, 59141, 59170, 59200, 59229, 59259, 59288, 59318, 59348, 59377, 59407, 59436, 59466, 59495, 59525, 59554, 59584, 59613, 59643, 59672, 59702, 59731, 59761, 59791, 59820, 59850, 59879, 59909, 59939, 59968, 59997, 60027, 60056, 60086, 60115, 60145, 60174, 60204, 60234, 60264, 60293, 60323, 60352, 60381, 60411, 60440, 60469, 60499, 60528, 60558, 60588, 60618, 60648, 60677, 60707, 60736, 60765, 60795, 60824, 60853, 60883, 60912, 60942, 60972, 61002, 61031, 61061, 61090, 61120, 61149, 61179, 61208, 61237, 61267, 61296, 61326, 61356, 61385, 61415, 61445, 61474, 61504, 61533, 61563, 61592, 61621, 61651, 61680, 61710, 61739, 61769, 61799, 61828, 61858, 61888, 61917, 61947, 61976, 62006, 62035, 62064, 62094, 62123, 62153, 62182, 62212, 62242, 62271, 62301, 62331, 62360, 62390, 62419, 62448, 62478, 62507, 62537, 62566, 62596, 62625, 62655, 62685, 62715, 62744, 62774, 62803, 62832, 62862, 62891, 62921, 62950, 62980, 63009, 63039, 63069, 63099, 63128, 63157, 63187, 63216, 63246, 63275, 63305, 63334, 63363, 63393, 63423, 63453, 63482, 63512, 63541, 63571, 63600, 63630, 63659, 63689, 63718, 63747, 63777, 63807, 63836, 63866, 63895, 63925, 63955, 63984, 64014, 64043, 64073, 64102, 64131, 64161, 64190, 64220, 64249, 64279, 64309, 64339, 64368, 64398, 64427, 64457, 64486, 64515, 64545, 64574, 64603, 64633, 64663, 64692, 64722, 64752, 64782, 64811, 64841, 64870, 64899, 64929, 64958, 64987, 65017, 65047, 65076, 65106, 65136, 65166, 65195, 65225, 65254, 65283, 65313, 65342, 65371, 65401, 65431, 65460, 65490, 65520, 65549, 65579, 65608, 65638, 65667, 65697, 65726, 65755, 65785, 65815, 65844, 65874, 65903, 65933, 65963, 65992, 66022, 66051, 66081, 66110, 66140, 66169, 66199, 66228, 66258, 66287, 66317, 66346, 66376, 66405, 66435, 66465, 66494, 66524, 66553, 66583, 66612, 66641, 66671, 66700, 66730, 66760, 66789, 66819, 66849, 66878, 66908, 66937, 66967, 66996, 67025, 67055, 67084, 67114, 67143, 67173, 67203, 67233, 67262, 67292, 67321, 67351, 67380, 67409, 67439, 67468, 67497, 67527, 67557, 67587, 67617, 67646, 67676, 67705, 67735, 67764, 67793, 67823, 67852, 67882, 67911, 67941, 67971, 68e3, 68030, 68060, 68089, 68119, 68148, 68177, 68207, 68236, 68266, 68295, 68325, 68354, 68384, 68414, 68443, 68473, 68502, 68532, 68561, 68591, 68620, 68650, 68679, 68708, 68738, 68768, 68797, 68827, 68857, 68886, 68916, 68946, 68975, 69004, 69034, 69063, 69092, 69122, 69152, 69181, 69211, 69240, 69270, 69300, 69330, 69359, 69388, 69418, 69447, 69476, 69506, 69535, 69565, 69595, 69624, 69654, 69684, 69713, 69743, 69772, 69802, 69831, 69861, 69890, 69919, 69949, 69978, 70008, 70038, 70067, 70097, 70126, 70156, 70186, 70215, 70245, 70274, 70303, 70333, 70362, 70392, 70421, 70451, 70481, 70510, 70540, 70570, 70599, 70629, 70658, 70687, 70717, 70746, 70776, 70805, 70835, 70864, 70894, 70924, 70954, 70983, 71013, 71042, 71071, 71101, 71130, 71159, 71189, 71218, 71248, 71278, 71308, 71337, 71367, 71397, 71426, 71455, 71485, 71514, 71543, 71573, 71602, 71632, 71662, 71691, 71721, 71751, 71781, 71810, 71839, 71869, 71898, 71927, 71957, 71986, 72016, 72046, 72075, 72105, 72135, 72164, 72194, 72223, 72253, 72282, 72311, 72341, 72370, 72400, 72429, 72459, 72489, 72518, 72548, 72577, 72607, 72637, 72666, 72695, 72725, 72754, 72784, 72813, 72843, 72872, 72902, 72931, 72961, 72991, 73020, 73050, 73080, 73109, 73139, 73168, 73197, 73227, 73256, 73286, 73315, 73345, 73375, 73404, 73434, 73464, 73493, 73523, 73552, 73581, 73611, 73640, 73669, 73699, 73729, 73758, 73788, 73818, 73848, 73877, 73907, 73936, 73965, 73995, 74024, 74053, 74083, 74113, 74142, 74172, 74202, 74231, 74261, 74291, 74320, 74349, 74379, 74408, 74437, 74467, 74497, 74526, 74556, 74586, 74615, 74645, 74675, 74704, 74733, 74763, 74792, 74822, 74851, 74881, 74910, 74940, 74969, 74999, 75029, 75058, 75088, 75117, 75147, 75176, 75206, 75235, 75264, 75294, 75323, 75353, 75383, 75412, 75442, 75472, 75501, 75531, 75560, 75590, 75619, 75648, 75678, 75707, 75737, 75766, 75796, 75826, 75856, 75885, 75915, 75944, 75974, 76003, 76032, 76062, 76091, 76121, 76150, 76180, 76210, 76239, 76269, 76299, 76328, 76358, 76387, 76416, 76446, 76475, 76505, 76534, 76564, 76593, 76623, 76653, 76682, 76712, 76741, 76771, 76801, 76830, 76859, 76889, 76918, 76948, 76977, 77007, 77036, 77066, 77096, 77125, 77155, 77185, 77214, 77243, 77273, 77302, 77332, 77361, 77390, 77420, 77450, 77479, 77509, 77539, 77569, 77598, 77627, 77657, 77686, 77715, 77745, 77774, 77804, 77833, 77863, 77893, 77923, 77952, 77982, 78011, 78041, 78070, 78099, 78129, 78158, 78188, 78217, 78247, 78277, 78307, 78336, 78366, 78395, 78425, 78454, 78483, 78513, 78542, 78572, 78601, 78631, 78661, 78690, 78720, 78750, 78779, 78808, 78838, 78867, 78897, 78926, 78956, 78985, 79015, 79044, 79074, 79104, 79133, 79163, 79192, 79222, 79251, 79281, 79310, 79340, 79369, 79399, 79428, 79458, 79487, 79517, 79546, 79576, 79606, 79635, 79665, 79695, 79724, 79753, 79783, 79812, 79841, 79871, 79900, 79930, 79960, 79990];
        e.getHijriDate = function(e) {
            var i = e.getDate(),
                n = e.getMonth(),
                r = e.getFullYear(),
                o = n + 1,
                s = r;
            o < 3 && (s -= 1, o += 12);
            var a = Math.floor(s / 100),
                l = a - Math.floor(a / 4) - 2,
                h = Math.floor(365.25 * (s + 4716)) + Math.floor(30.6001 * (o + 1)) + i - l - 1524,
                p = h + (l = (a = Math.floor((h - 1867216.25) / 36524.25)) - Math.floor(a / 4) + 1) + 1524,
                d = Math.floor((p - 122.1) / 365.25),
                c = Math.floor(365.25 * d),
                u = Math.floor((p - c) / 30.6001);
            i = p - c - Math.floor(30.6001 * u), (n = Math.floor((p - c) / 20.6001)) > 13 && (d += 1, n -= 12), n -= 1, r = d - 4716;
            var g = h - 24e5,
                f = h - 1948084,
                m = Math.floor(f / 10631);
            f -= 10631 * m;
            var y = Math.floor((f - .1335) / (10631 / 30)),
                v = 30 * m + y;
            f -= Math.floor(y * (10631 / 30) + .1335);
            var b = Math.floor((f + 28.5001) / 29.5);
            13 === b && (b = 12);
            for (var w = f - Math.floor(29.5001 * b - 29), C = 0; C < t.length && !(t[C] > g); C++);
            var S = C + 16260,
                x = Math.floor((S - 1) / 12),
                k = x + 1,
                T = S - 12 * x,
                D = g - t[C - 1] + 1;
            return (D + "").length > 2 && (D = w, T = b, k = v), {
                year: k,
                month: T,
                date: D
            }
        }, e.toGregorian = function(e, i, n) {
            var r = n + t[12 * (e - 1) + 1 + (i - 1) - 16260 - 1] - 1 + 24e5,
                o = Math.floor(r + .5),
                s = Math.floor((o - 1867216.25) / 36524.25),
                a = (s = o + 1 + s - Math.floor(s / 4)) + 1524,
                l = Math.floor((a - 122.1) / 365.25),
                h = Math.floor(365.25 * l),
                p = Math.floor((a - h) / 30.6001),
                d = a - h - Math.floor(30.6001 * p),
                c = p - (p > 13.5 ? 13 : 1),
                u = l - (c > 2.5 ? 4716 : 4715);
            return u <= 0 && c--, new Date(u + "/" + c + "/" + d)
        }
    }(T || (T = {}));
    var M = /\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,
        L = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"],
        O = {
            m: "getMinutes",
            h: "getHours",
            H: "getHours",
            s: "getSeconds",
            d: "getDate",
            f: "getMilliseconds"
        },
        A = {
            M: "month",
            d: "day",
            E: "weekday",
            c: "weekday",
            y: "year",
            m: "minute",
            h: "hour",
            H: "hour",
            s: "second",
            L: "month",
            a: "designator",
            z: "timeZone",
            Z: "timeZone",
            G: "era",
            f: "milliseconds"
        },
        B = function() {
            function e() {}
            return e.dateFormat = function(e, t, i) {
                var n = this,
                    r = ne.getDependables(i, e, t.calendar),
                    o = a("parserObject.numbers", r),
                    s = r.dateObject,
                    l = {
                        isIslamic: ne.islamicRegex.test(t.calendar)
                    };
                S() && t.isServerRendered && (t = ne.compareBlazorDateFormats(t, e));
                var h = t.format || ne.getResultantPattern(t.skeleton, r.dateObject, t.type, !1, S() ? e : "");
                if (l.dateSeperator = S() ? a("dateSeperator", s) : ne.getDateSeparator(r.dateObject), f(h)) b("Format options or type given must be invalid");
                else {
                    h = ne.ConvertDateToWeekFormat(h), S() && (h = h.replace(/tt/, "a")), l.pattern = h, l.numMapper = S() ? u({}, o) : P.getNumberMapper(r.parserObject, P.getNumberingSystem(i));
                    for (var p = 0, d = h.match(M) || []; p < d.length; p++) {
                        var c = d[p],
                            g = c.length,
                            m = c[0];
                        "K" === m && (m = "h");
                        switch (m) {
                            case "E":
                            case "c":
                                S() ? l.weekday = a("days." + ne.monthIndex[g], s) : l.weekday = r.dateObject[ne.days]["stand-alone"][ne.monthIndex[g]];
                                break;
                            case "M":
                            case "L":
                                S() ? l.month = a("months." + ne.monthIndex[g], s) : l.month = r.dateObject[ne.month]["stand-alone"][ne.monthIndex[g]];
                                break;
                            case "a":
                                l.designator = S() ? a("dayPeriods", s) : a("dayPeriods.format.wide", s);
                                break;
                            case "G":
                                var y = g <= 3 ? "eraAbbr" : 4 === g ? "eraNames" : "eraNarrow";
                                l.era = S() ? a("eras", s) : a("eras." + y, r.dateObject);
                                break;
                            case "z":
                                l.timeZone = a("dates.timeZoneNames", r.parserObject)
                        }
                    }
                }
                return function(e) {
                    return isNaN(e.getDate()) ? null : n.intDateFormatter(e, l)
                }
            }, e.intDateFormatter = function(e, t) {
                for (var i = "", n = t.pattern.match(ne.dateParseRegex), r = this.getCurrentDateValue(e, t.isIslamic), o = 0, s = n; o < s.length; o++) {
                    var a = s[o],
                        l = a.length,
                        h = a[0];
                    "K" === h && (h = "h");
                    var p = void 0,
                        d = "",
                        c = void 0,
                        u = void 0,
                        f = "";
                    switch (h) {
                        case "M":
                        case "L":
                            p = r.month, l > 2 ? i += t.month[p] : c = !0;
                            break;
                        case "E":
                        case "c":
                            i += t.weekday[L[e.getDay()]];
                            break;
                        case "H":
                        case "h":
                        case "m":
                        case "s":
                        case "d":
                        case "f":
                            if (c = !0, "d" === h) p = r.date;
                            else if ("f" === h) {
                                c = !1, u = !0;
                                var m = (d = (d = e[O[h]]().toString()).substring(0, l)).length;
                                if (l !== m) {
                                    if (l > 3) continue;
                                    for (var y = 0; y < l - m; y++) d = "0" + d.toString()
                                }
                                f += d
                            } else p = e[O[h]]();
                            "h" === h && (p = p % 12 || 12);
                            break;
                        case "y":
                            u = !0, f += r.year, 2 === l && (f = f.substr(f.length - 2));
                            break;
                        case "a":
                            var v = e.getHours() < 12 ? "am" : "pm";
                            i += t.designator[v];
                            break;
                        case "G":
                            var b = e.getFullYear() < 0 ? 0 : 1,
                                w = t.era[b];
                            g(w) && (w = t.era[b ? 0 : 1]), i += w || "";
                            break;
                        case "'":
                            i += "''" === a ? "'" : a.replace(/\'/g, "");
                            break;
                        case "z":
                            var C = e.getTimezoneOffset(),
                                S = l < 4 ? "+H;-H" : t.timeZone.hourFormat;
                            S = S.replace(/:/g, t.numMapper.timeSeparator), 0 === C ? i += t.timeZone.gmtZeroFormat : (u = !0, f = this.getTimeZoneValue(C, S)), f = t.timeZone.gmtFormat.replace(/\{0\}/, f);
                            break;
                        case ":":
                            i += t.numMapper.numberSymbols.timeSeparator;
                            break;
                        case "/":
                            i += t.dateSeperator;
                            break;
                        case "W":
                            c = !0, p = ne.getWeekOfYear(e);
                            break;
                        default:
                            i += a
                    }
                    c && (u = !0, f = this.checkTwodigitNumber(p, l)), u && (i += P.convertValueParts(f, ne.latnParseRegex, t.numMapper.mapper))
                }
                return i
            }, e.getCurrentDateValue = function(e, t) {
                return t ? T.getHijriDate(e) : {
                    year: e.getFullYear(),
                    month: e.getMonth() + 1,
                    date: e.getDate()
                }
            }, e.checkTwodigitNumber = function(e, t) {
                var i = e + "";
                return 2 === t && 2 !== i.length ? "0" + i : i
            }, e.getTimeZoneValue = function(e, t) {
                var i = this,
                    n = t.split(";")[e > 0 ? 1 : 0],
                    r = Math.abs(e);
                return n.replace(/HH?|mm/g, (function(e) {
                    var t = e.length,
                        n = -1 !== e.indexOf("H");
                    return i.checkTwodigitNumber(Math.floor(n ? r / 60 : r % 60), t)
                }))
            }, e
        }(),
        F = {
            ms: "minimumSignificantDigits",
            ls: "maximumSignificantDigits",
            mf: "minimumFractionDigits",
            lf: "maximumFractionDigits"
        },
        N = ["infinity", "nan", "group", "decimal", "exponential"],
        H = function() {
            function e() {}
            return e.numberFormatter = function(e, t, i) {
                var n, r = this,
                    o = u({}, t),
                    s = {},
                    l = {},
                    h = ne.getDependables(i, e, "", !0),
                    p = h.numericObject;
                l.numberMapper = S() ? u({}, p) : P.getNumberMapper(h.parserObject, P.getNumberingSystem(i), !0), l.currencySymbol = S() ? a("currencySymbol", p) : ne.getCurrencySymbol(h.numericObject, o.currency || J, t.altSymbol), l.percentSymbol = S() ? a("numberSymbols.percentSign", p) : l.numberMapper.numberSymbols.percentSign, l.minusSymbol = S() ? a("numberSymbols.minusSign", p) : l.numberMapper.numberSymbols.minusSign;
                var d = l.numberMapper.numberSymbols;
                if (t.format && !ne.formatRegex.test(t.format)) s = ne.customFormat(t.format, l, h.numericObject);
                else {
                    if (u(o, ne.getProperNumericSkeleton(t.format || "N")), o.isCurrency = "currency" === o.type, o.isPercent = "percent" === o.type, S() || (n = ne.getSymbolPattern(o.type, l.numberMapper.numberSystem, h.numericObject, o.isAccount)), o.groupOne = this.checkValueRange(o.maximumSignificantDigits, o.minimumSignificantDigits, !0), this.checkValueRange(o.maximumFractionDigits, o.minimumFractionDigits, !1, !0), f(o.fractionDigits) || (o.minimumFractionDigits = o.maximumFractionDigits = o.fractionDigits), f(o.useGrouping) && (o.useGrouping = !0), o.isCurrency && !S() && (n = n.replace(/\u00A4/g, ne.defaultCurrency)), S()) s.nData = u({}, {}, a(o.type + "nData", p)), s.pData = u({}, {}, a(o.type + "pData", p)), "currency" === o.type && t.currency && ne.replaceBlazorCurrency([s.pData, s.nData], l.currencySymbol, t.currency);
                    else {
                        var c = n.split(";");
                        s.nData = ne.getFormatData(c[1] || "-" + c[0], !0, l.currencySymbol), s.pData = ne.getFormatData(c[0], !1, l.currencySymbol), o.useGrouping && (o.groupSeparator = d[N[2]], o.groupData = this.getGroupingDetails(c[0]))
                    }
                    if (f(o.minimumFractionDigits) && (o.minimumFractionDigits = s.nData.minimumFraction), f(o.maximumFractionDigits)) {
                        var g = s.nData.maximumFraction;
                        o.maximumFractionDigits = f(g) && o.isPercent ? 0 : g
                    }
                    var m = o.minimumFractionDigits,
                        y = o.maximumFractionDigits;
                    f(m) || f(y) || m > y && (o.maximumFractionDigits = m)
                }
                return u(s.nData, o), u(s.pData, o),
                    function(e) {
                        return isNaN(e) ? d[N[1]] : isFinite(e) ? r.intNumberFormatter(e, s, l) : d[N[0]]
                    }
            }, e.getGroupingDetails = function(e) {
                var t = {},
                    i = e.match(ne.negativeDataRegex);
                if (i && i[4]) {
                    var n = i[4],
                        r = n.lastIndexOf(",");
                    if (-1 !== r) {
                        var o = n.split(".")[0];
                        t.primary = o.length - r - 1;
                        var s = n.lastIndexOf(",", r - 1); - 1 !== s && (t.secondary = r - 1 - s)
                    }
                }
                return t
            }, e.checkValueRange = function(e, t, i, n) {
                var r = n ? "f" : "s",
                    o = 0,
                    s = F["l" + r],
                    a = F["m" + r];
                if (f(e) || (this.checkRange(e, s, n), o++), f(t) || (this.checkRange(t, a, n), o++), 2 === o) {
                    if (!(e < t)) return !0;
                    b(a + "specified must be less than the" + s)
                } else i && 1 === o && b("Both" + a + "and" + a + "must be present");
                return !1
            }, e.checkRange = function(e, t, i) {
                var n = i ? [0, 20] : [1, 21];
                (e < n[0] || e > n[1]) && b(t + "value must be within the range" + n[0] + "to" + n[1])
            }, e.intNumberFormatter = function(e, t, i) {
                var n;
                if (!f(t.nData.type)) {
                    e < 0 ? (e *= -1, n = t.nData) : n = 0 === e && t.zeroData || t.pData;
                    var r = "";
                    return n.isPercent && (e *= 100), n.groupOne ? r = this.processSignificantDigits(e, n.minimumSignificantDigits, n.maximumSignificantDigits) : (r = this.processFraction(e, n.minimumFractionDigits, n.maximumFractionDigits), n.minimumIntegerDigits && (r = this.processMinimumIntegers(r, n.minimumIntegerDigits))), "scientific" === n.type && (r = (r = e.toExponential(n.maximumFractionDigits)).replace("e", i.numberMapper.numberSymbols[N[4]])), r = r.replace(".", i.numberMapper.numberSymbols[N[3]]), n.useGrouping && (r = this.groupNumbers(r, n.groupData.primary, n.groupSeparator || ",", i.numberMapper.numberSymbols[N[3]] || ".", n.groupData.secondary)), r = P.convertValueParts(r, ne.latnParseRegex, i.numberMapper.mapper), "N/A" === n.nlead ? n.nlead : n.nlead + r + n.nend
                }
            }, e.processSignificantDigits = function(e, t, i) {
                var n = e + "";
                return n.length < t ? e.toPrecision(t) : +(n = e.toPrecision(i)) + ""
            }, e.groupNumbers = function(e, t, i, n, r) {
                for (var o = !g(r) && 0 !== r, s = e.split(n), a = s[0], l = a.length, h = ""; l > t;) h = a.slice(l - t, l) + (h.length ? i + h : ""), l -= t, o && (t = r, o = !1);
                return s[0] = a.slice(0, l) + (h.length ? i : "") + h, s.join(n)
            }, e.processFraction = function(e, t, i) {
                var n = (e + "").split(".")[1],
                    r = n ? n.length : 0;
                if (t && r < t) {
                    var o = "";
                    if (0 !== r) {
                        o += e;
                        for (var s = 0; s < t - r; s++) o += "0";
                        return o
                    }
                    return o = e.toFixed(t), e.toFixed(t)
                }
                return !g(i) && (r > i || 0 === i) ? e.toFixed(i) : e + ""
            }, e.processMinimumIntegers = function(e, t) {
                var i = e.split("."),
                    n = i[0],
                    r = n.length;
                if (r < t) {
                    for (var o = 0; o < t - r; o++) n = "0" + n;
                    i[0] = n
                }
                return i.join(".")
            }, e
        }(),
        V = /^[0-9]*$/,
        j = {
            minute: "setMinutes",
            hour: "setHours",
            second: "setSeconds",
            day: "setDate",
            month: "setMonth",
            milliseconds: "setMilliseconds"
        },
        z = function() {
            function e() {}
            return e.dateParser = function(e, t, i) {
                var n = this,
                    r = ne.getDependables(i, e, t.calendar),
                    o = P.getCurrentNumericOptions(r.parserObject, P.getNumberingSystem(i), !1, S()),
                    s = {};
                S() && t.isServerRendered && (t = ne.compareBlazorDateFormats(t, e));
                var l, h = t.format || ne.getResultantPattern(t.skeleton, r.dateObject, t.type, !1, S() ? e : ""),
                    p = "";
                if (f(h)) b("Format options or type given must be invalid");
                else {
                    h = ne.ConvertDateToWeekFormat(h), s = {
                        isIslamic: ne.islamicRegex.test(t.calendar),
                        pattern: h,
                        evalposition: {},
                        culture: e
                    };
                    for (var d = h.match(ne.dateParseRegex) || [], c = d.length, u = 0, m = 0, y = !1, v = o.numericRegex, w = S() ? r.parserObject.numbers : P.getNumberMapper(r.parserObject, P.getNumberingSystem(i)), C = 0; C < c; C++) {
                        var x = d[C],
                            k = x.length,
                            D = "K" === x[0] ? "h" : x[0],
                            E = void 0,
                            R = void 0,
                            I = A[D],
                            M = 2 === k ? "" : "?";
                        switch (y && (u = m, y = !1), D) {
                            case "E":
                            case "c":
                                var L = void 0;
                                L = S() ? a("days." + ne.monthIndex[k], r.dateObject) : r.dateObject[ne.days]["stand-alone"][ne.monthIndex[k]];
                                var O = P.reverseObject(L);
                                p += "(" + Object.keys(O).join("|") + ")";
                                break;
                            case "M":
                            case "L":
                            case "d":
                            case "m":
                            case "s":
                            case "h":
                            case "H":
                            case "f":
                                if (R = !0, ("M" === D || "L" === D) && k > 2) {
                                    var B = void 0;
                                    B = S() ? a("months." + ne.monthIndex[k], r.dateObject) : r.dateObject.months["stand-alone"][ne.monthIndex[k]], s[I] = P.reverseObject(B), p += "(" + Object.keys(s[I]).join("|") + ")"
                                } else if ("f" === D) {
                                    if (k > 3) continue;
                                    E = !0, p += "(" + v + v + "?" + v + "?)"
                                } else E = !0, p += "(" + v + v + M + ")";
                                "h" === D && (s.hour12 = !0);
                                break;
                            case "W":
                                p += "(" + v + (1 === k ? "?" : "") + v + ")";
                                break;
                            case "y":
                                R = E = !0, p += 2 === k ? "(" + v + v + ")" : "(" + v + "{" + k + ",})";
                                break;
                            case "a":
                                R = !0;
                                var F = S() ? a("dayPeriods", r.dateObject) : a("dayPeriods.format.wide", r.dateObject);
                                s[I] = P.reverseObject(F), p += "(" + Object.keys(s[I]).join("|") + ")";
                                break;
                            case "G":
                                R = !0;
                                var N = k <= 3 ? "eraAbbr" : 4 === k ? "eraNames" : "eraNarrow";
                                s[I] = P.reverseObject(S() ? a("eras", r.dateObject) : a("eras." + N, r.dateObject)), p += "(" + Object.keys(s[I]).join("|") + "?)";
                                break;
                            case "z":
                                R = 0 !== (new Date).getTimezoneOffset(), s[I] = a("dates.timeZoneNames", r.parserObject);
                                var H = s[I],
                                    V = (l = k < 4) ? "+H;-H" : H.hourFormat;
                                V = V.replace(/:/g, w.timeSeparator), p += "(" + this.parseTimeZoneRegx(V, H, v) + ")?", y = !0, m = l ? 6 : 12;
                                break;
                            case "'":
                                p += "(" + x.replace(/\'/g, "") + ")?";
                                break;
                            default:
                                p += "([\\D])"
                        }
                        R && (s.evalposition[I] = {
                            isNumber: E,
                            pos: C + 1 + u,
                            hourOnly: l
                        }), C !== c - 1 || g(p) || (s.parserRegex = new RegExp("^" + p + "$", "i"))
                    }
                }
                return function(e) {
                    var t = n.internalDateParse(e, s, o);
                    if (g(t) || !Object.keys(t).length) return null;
                    if (s.isIslamic) {
                        var i = {},
                            r = t.year,
                            a = t.day,
                            l = t.month,
                            h = r ? r + "" : "",
                            p = 2 === h.length;
                        r && l && a && !p || (i = T.getHijriDate(new Date)), p && (r = parseInt((i.year + "").slice(0, 2) + h, 10));
                        var d = T.toGregorian(r || i.year, l || i.month, a || i.date);
                        t.year = d.getFullYear(), t.month = d.getMonth() + 1, t.day = d.getDate()
                    }
                    return n.getDateObject(t)
                }
            }, e.getDateObject = function(e, t) {
                var i = t || new Date;
                i.setMilliseconds(0);
                var n = e.year,
                    r = e.designator,
                    o = e.timeZone;
                if (!f(n)) {
                    if ((n + "").length <= 2) n += 100 * Math.floor(i.getFullYear() / 100);
                    i.setFullYear(n)
                }
                for (var s = 0, a = ["hour", "minute", "second", "milliseconds", "month", "day"]; s < a.length; s++) {
                    var l = a[s],
                        h = e[l];
                    if (f(h) && "day" === l && i.setDate(1), !f(h))
                        if ("month" === l) {
                            if ((h -= 1) < 0 || h > 11) return new Date("invalid");
                            var p = i.getDate();
                            i.setDate(1), i[j[l]](h);
                            var d = new Date(i.getFullYear(), h + 1, 0).getDate();
                            i.setDate(p < d ? p : d)
                        } else {
                            if ("day" === l) {
                                var c = new Date(i.getFullYear(), i.getMonth() + 1, 0).getDate();
                                if (h < 1 || h > c) return null
                            }
                            i[j[l]](h)
                        }
                }
                if (!f(r)) {
                    var u = i.getHours();
                    "pm" === r ? i.setHours(u + (12 === u ? 0 : 12)) : 12 === u && i.setHours(0)
                }
                if (!f(o)) {
                    var g = o - i.getTimezoneOffset();
                    0 !== g && i.setMinutes(i.getMinutes() + g)
                }
                return i
            }, e.internalDateParse = function(e, t, i) {
                var n = e.match(t.parserRegex),
                    r = {
                        hour: 0,
                        minute: 0,
                        second: 0
                    };
                i.numericRegex;
                if (g(n)) return null;
                for (var o = 0, s = Object.keys(t.evalposition); o < s.length; o++) {
                    var a = s[o],
                        l = t.evalposition[a],
                        h = n[l.pos];
                    if (l.isNumber) r[a] = this.internalNumberParser(h, i);
                    else if ("timeZone" !== a || f(h)) h = "month" !== a || t.isIslamic || "en" !== t.culture && "en-GB" !== t.culture && "en-US" !== t.culture ? h : h[0].toUpperCase() + h.substring(1).toLowerCase(), r[a] = t[a][h];
                    else {
                        var p = l.pos,
                            d = void 0,
                            c = n[p + 1],
                            u = !f(c);
                        l.hourOnly ? d = 60 * this.getZoneValue(u, c, n[p + 4], i) : (d = 60 * this.getZoneValue(u, c, n[p + 7], i), d += this.getZoneValue(u, n[p + 4], n[p + 10], i)), g(d) || (r[a] = d)
                    }
                }
                return t.hour12 && (r.hour12 = !0), r
            }, e.internalNumberParser = function(e, t) {
                return e = P.convertValueParts(e, t.numberParseRegex, t.numericPair), V.test(e) ? +e : null
            }, e.parseTimeZoneRegx = function(e, t, i) {
                var n, r, o = t.gmtFormat,
                    s = "(" + i + ")(" + i + ")";
                return n = e.replace("+", "\\+"), r = (n = -1 !== e.indexOf("HH") ? n.replace(/HH|mm/g, "(" + s + ")") : n.replace(/H|m/g, "(" + s + "?)")).split(";").map((function(e) {
                    return o.replace("{0}", e)
                })), n = r.join("|") + "|" + t.gmtZeroFormat
            }, e.getZoneValue = function(e, t, i, n) {
                var r = e ? t : i;
                if (!r) return 0;
                var o = this.internalNumberParser(r, n);
                return e ? -o : o
            }, e
        }(),
        q = /^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,
        W = /,/g,
        _ = ["minusSign", "infinity"],
        G = function() {
            function e() {}
            return e.numberParser = function(e, t, i) {
                var n, r = this,
                    o = ne.getDependables(i, e, "", !0),
                    s = {
                        custom: !0
                    };
                ne.formatRegex.test(t.format) || !t.format ? (u(s, ne.getProperNumericSkeleton(t.format || "N")), s.custom = !1) : u(s, ne.customFormat(t.format, null, null));
                var l, h = a("numbers", o.parserObject);
                if (n = P.getCurrentNumericOptions(o.parserObject, P.getNumberingSystem(i), !0, S()), s.symbolRegex = P.getSymbolRegex(Object.keys(n.symbolMatch)), s.infinity = n.symbolNumberSystem[_[1]], S()) s.nData = u({}, {}, a(s.type + "nData", h)), s.pData = u({}, {}, a(s.type + "pData", h)), "currency" === s.type && t.currency && ne.replaceBlazorCurrency([s.pData, s.nData], a("currencySymbol", h), t.currency);
                else if (l = ne.getSymbolPattern(s.type, n.numberSystem, o.numericObject, s.isAccount)) {
                    var p = (l = l.replace(/\u00A4/g, ne.defaultCurrency)).split(";");
                    s.nData = ne.getFormatData(p[1] || "-" + p[0], !0, ""), s.pData = ne.getFormatData(p[0], !0, "")
                }
                return function(e) {
                    return r.getParsedNumber(e, s, n)
                }
            }, e.getParsedNumber = function(e, t, i) {
                var n, r, o, s, a, l;
                if (-1 !== e.indexOf(t.infinity)) return 1 / 0;
                e = P.convertValueParts(e, t.symbolRegex, i.symbolMatch), 0 === (e = P.convertValueParts(e, i.numberParseRegex, i.numericPair)).indexOf(".") && (e = "0" + e);
                var h = e.match(q);
                if (g(h)) return NaN;
                s = h[1], o = h[2];
                var p = h[5];
                return a = h[6], r = (n = t.custom ? s === t.nData.nlead && a === t.nData.nend : -1 !== s.indexOf(t.nData.nlead) && -1 !== a.indexOf(t.nData.nend)) ? t.nData.isPercent : t.pData.isPercent, o = o.replace(W, ""), p && (o += p), l = +o, ("percent" === t.type || r) && (l /= 100), (t.custom || t.fractionDigits) && (l = parseFloat(l.toFixed(t.custom ? n ? t.nData.maximumFractionDigits : t.pData.maximumFractionDigits : t.fractionDigits))), n && (l *= -1), l
            }, e
        }(),
        U = function() {
            function e(e) {
                this.ranArray = [], this.boundedEvents = {}, g(e) || (this.context = e)
            }
            return e.prototype.on = function(e, t, i, n) {
                if (!g(t)) {
                    var r = i || this.context;
                    this.notExist(e) ? this.boundedEvents[e] = [{
                        handler: t,
                        context: r
                    }] : g(n) ? this.isHandlerPresent(this.boundedEvents[e], t) || this.boundedEvents[e].push({
                        handler: t,
                        context: r
                    }) : -1 === this.ranArray.indexOf(n) && (this.ranArray.push(n), this.boundedEvents[e].push({
                        handler: t,
                        context: r,
                        id: n
                    }))
                }
            }, e.prototype.off = function(e, t, i) {
                if (!this.notExist(e)) {
                    var n = a(e, this.boundedEvents);
                    if (t) {
                        for (var r = 0; r < n.length; r++)
                            if (i) {
                                if (n[r].id === i) {
                                    n.splice(r, 1);
                                    var o = this.ranArray.indexOf(i); - 1 !== o && this.ranArray.splice(o, 1);
                                    break
                                }
                            } else if (t === n[r].handler) {
                            n.splice(r, 1);
                            break
                        }
                    } else delete this.boundedEvents[e]
                }
            }, e.prototype.notify = function(e, t, i, n) {
                if (this.notExist(e)) i && i.call(this, t);
                else {
                    t && (t.name = e);
                    var r = a(e, this.boundedEvents).slice(0);
                    if (window.Blazor) return this.blazorCallback(r, t, i, n, 0);
                    for (var o = 0, s = r; o < s.length; o++) {
                        var l = s[o];
                        l.handler.call(l.context, t)
                    }
                    i && i.call(this, t)
                }
            }, e.prototype.blazorCallback = function(e, t, i, n, r) {
                var o = this,
                    s = r === e.length - 1;
                if (r < e.length) {
                    var a = e[r],
                        l = a.handler.call(a.context, t);
                    if (l && "function" == typeof l.then) {
                        if (!i) return l;
                        l.then((function(l) {
                            if (l = "string" == typeof l && o.isJson(l) ? JSON.parse(l, o.dateReviver) : l, u(t, t, l, !0), !i || !s) return o.blazorCallback(e, t, i, n, r + 1);
                            i.call(a.context, t)
                        })).catch((function(e) {
                            n && n.call(a.context, "string" == typeof e && o.isJson(e) ? JSON.parse(e, o.dateReviver) : e)
                        }))
                    } else {
                        if (!i || !s) return this.blazorCallback(e, t, i, n, r + 1);
                        i.call(a.context, t)
                    }
                }
            }, e.prototype.dateReviver = function(e, t) {
                return S && "string" == typeof t && null !== t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/) ? new Date(t) : t
            }, e.prototype.isJson = function(e) {
                try {
                    JSON.parse(e)
                } catch (e) {
                    return !1
                }
                return !0
            }, e.prototype.destroy = function() {
                this.boundedEvents = this.context = void 0
            }, e.prototype.notExist = function(e) {
                return !1 === this.boundedEvents.hasOwnProperty(e) || this.boundedEvents[e].length <= 0
            }, e.prototype.isHandlerPresent = function(e, t) {
                for (var i = 0, n = e; i < n.length; i++) {
                    if (n[i].handler === t) return !0
                }
                return !1
            }, e
        }(),
        K = new U,
        Y = !1,
        X = {},
        Q = "en-US",
        J = "USD",
        Z = ["numericObject", "dateObject"],
        ee = function() {
            function e(e) {
                e && (this.culture = e)
            }
            return e.prototype.getDateFormat = function(e) {
                return B.dateFormat(this.getCulture(), e || {
                    type: "date",
                    skeleton: "short"
                }, X)
            }, e.prototype.getNumberFormat = function(e) {
                return e && !e.currency && (e.currency = J), S() && e && !e.format && (e.minimumFractionDigits = 0), H.numberFormatter(this.getCulture(), e || {}, X)
            }, e.prototype.getDateParser = function(e) {
                return z.dateParser(this.getCulture(), e || {
                    skeleton: "short",
                    type: "date"
                }, X)
            }, e.prototype.getNumberParser = function(e) {
                return S() && e && !e.format && (e.minimumFractionDigits = 0), G.numberParser(this.getCulture(), e || {
                    format: "N"
                }, X)
            }, e.prototype.formatNumber = function(e, t) {
                return this.getNumberFormat(t)(e)
            }, e.prototype.formatDate = function(e, t) {
                return this.getDateFormat(t)(e)
            }, e.prototype.parseDate = function(e, t) {
                return this.getDateParser(t)(e)
            }, e.prototype.parseNumber = function(e, t) {
                return this.getNumberParser(t)(e)
            }, e.prototype.getDatePattern = function(e, t) {
                return ne.getActualDateTimeFormat(this.getCulture(), e, X, t)
            }, e.prototype.getNumberPattern = function(e, t) {
                return ne.getActualNumberFormat(this.getCulture(), e, X, t)
            }, e.prototype.getFirstDayOfWeek = function() {
                return ne.getWeekData(this.getCulture(), X)
            }, e.prototype.getCulture = function() {
                return this.culture || Q
            }, e
        }();

    function te(e, t) {
        var i = ne.getDependables(X, e, "", !0)[Z[0]],
            n = ne.getDependables(X, e, "")[Z[1]],
            r = a("defaultNumberingSystem", i),
            o = S() ? a("numberSymbols", i) : a("symbols-numberSystem-" + r, i),
            s = ne.getSymbolPattern(t || "decimal", r, i, !1);
        return u(o, ne.getFormatData(s, !0, "", !0), {
            dateSeparator: ne.getDateSeparator(n)
        })
    }

    function ie(e) {
        return ne.getDependables(X, "", e, !1)[Z[1]]
    }
    var ne, re = {
        "en-US": {
            d: "M/d/y",
            D: "EEEE, MMMM d, y",
            f: "EEEE, MMMM d, y h:mm a",
            F: "EEEE, MMMM d, y h:mm:s a",
            g: "M/d/y h:mm a",
            G: "M/d/yyyy h:mm:ss tt",
            m: "MMMM d",
            M: "MMMM d",
            r: "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",
            R: "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",
            s: "yyyy'-'MM'-'dd'T'HH':'mm':'ss",
            t: "h:mm tt",
            T: "h:m:s tt",
            u: "yyyy'-'MM'-'dd HH':'mm':'ss'Z'",
            U: "dddd, MMMM d, yyyy h:mm:ss tt",
            y: "MMMM yyyy",
            Y: "MMMM yyyy"
        }
    };
    ! function(e) {
        e.negativeDataRegex = /^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/, e.customRegex = /^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/, e.latnParseRegex = /0|1|2|3|4|5|6|7|8|9/g;
        var t = /[0-9]/g;
        e.defaultCurrency = "$";
        var i = ["infinity", "nan", "group", "decimal"],
            n = /G|M|L|H|c|'| a|yy|y|EEEE|E/g,
            r = {
                G: "",
                M: "m",
                L: "m",
                H: "h",
                c: "d",
                "'": '"',
                " a": " AM/PM",
                yy: "yy",
                y: "yyyy",
                EEEE: "dddd",
                E: "ddd"
            };
        e.dateConverterMapper = /dddd|ddd/gi;
        e.islamicRegex = /^islamic/;
        var o = {
            sun: 0,
            mon: 1,
            tue: 2,
            wed: 3,
            thu: 4,
            fri: 5,
            sat: 6
        };
        e.formatRegex = /(^[ncpae]{1})([0-1]?[0-9]|20)?$/i, e.currencyFormatRegex = /(^[ca]{1})([0-1]?[0-9]|20)?$/i, e.curWithoutNumberRegex = /(c|a)$/gi;
        var s = {
            $: "isCurrency",
            "%": "isPercent",
            "-": "isNegative",
            0: "nlead",
            1: "nend"
        };

        function l(t, i, n, r, o) {
            var s, l = n || "date";
            if (o) s = c({
                skeleton: t
            }, o).format || c({
                skeleton: "d"
            }, "en-US").format;
            else {
                if (-1 !== e.basicPatterns.indexOf(t)) {
                    if (s = a(l + "Formats." + t, i), "dateTime" === l) {
                        var h = a("dateFormats." + t, i),
                            p = a("timeFormats." + t, i);
                        s = s.replace("{1}", h).replace("{0}", p)
                    }
                } else s = a("dateTimeFormats.availableFormats." + t, i);
                f(s) && "yMd" === t && (s = "M/d/y")
            }
            return s
        }

        function h(t, i, n, r) {
            var o = {},
                s = n || "gregorian";
            if (o.parserObject = P.getMainObject(t, i) || (S() ? e.blazorDefaultObject : e.defaultObject), r) o.numericObject = a("numbers", o.parserObject);
            else {
                var l = S() ? "dates" : "dates.calendars." + s;
                o.dateObject = a(l, o.parserObject)
            }
            return o
        }

        function p(e, t, i, n) {
            return a(e + "Formats-numberSystem-" + t + (n ? ".accounting" : ".standard"), i) || (n ? a(e + "Formats-numberSystem-" + t + ".standard", i) : "")
        }

        function d(t) {
            var i = t.match(e.dateConverterMapper);
            if (i && S()) {
                var n = 3 === i[0].length ? "EEE" : "EEEE";
                return t.replace(e.dateConverterMapper, n)
            }
            return t
        }

        function c(e, t) {
            var i = e.format || e.skeleton,
                n = a((t || "en-US") + "." + i, re);
            return n || (n = a("en-US." + i, re)), n && (n = d(n), e.format = n.replace(/tt/, "a")), e
        }

        function m(t) {
            var i = t.match(e.formatRegex),
                n = {},
                r = i[1].toUpperCase();
            return n.isAccount = "A" === r, n.type = e.patternMatcher[r], t.length > 1 && (n.fractionDigits = parseInt(i[2], 10)), n
        }

        function y(i, n, r, o) {
            var s = o ? {} : {
                    nlead: "",
                    nend: ""
                },
                a = i.match(e.customRegex);
            if (a) {
                o || (s.nlead = v(a[1], r), s.nend = v(a[10], r), s.groupPattern = a[4]);
                var l = a[7];
                if (l && n) {
                    var h = l.match(t);
                    g(h) ? s.minimumFraction = 0 : s.minimumFraction = h.length, s.maximumFraction = l.length - 1
                }
            }
            return s 
        }

        function v(t, i) {
            return t ? t.replace(e.defaultCurrency, i) : ""
        }

        function b(e, t, i) {
            return a("currencies." + t + (i ? "." + i : ".symbol"), e) || a("currencies." + t + ".symbol-alt-narrow", e) || "$"
        }

        function w(t, n, r) {
            var o = {
                    type: "decimal",
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                },
                s = t.match(e.customRegex);
            if (g(s) || "" === s[5] && "N/A" !== t) return o.type = void 0, o;
            o.nlead = s[1], o.nend = s[10];
            var a = s[6];
            o.useGrouping = -1 !== a.indexOf(","), a = a.replace(/,/g, "");
            var l = s[7];
            if (-1 !== a.indexOf("0") && (o.minimumIntegerDigits = a.length - a.indexOf("0")), g(l) || (o.minimumFractionDigits = l.lastIndexOf("0"), o.maximumFractionDigits = l.lastIndexOf("#"), -1 === o.minimumFractionDigits && (o.minimumFractionDigits = 0), (-1 === o.maximumFractionDigits || o.maximumFractionDigits < o.minimumFractionDigits) && (o.maximumFractionDigits = o.minimumFractionDigits)), g(n) ? u(o, C([o.nlead, o.nend], "%", "%")) : (u(o, C([o.nlead, o.nend], "$", n.currencySymbol)), o.isCurrency || u(o, C([o.nlead, o.nend], "%", n.percentSymbol))), !g(r)) {
                var h = p(o.type, n.numberMapper.numberSystem, r, !1);
                o.useGrouping && (o.groupSeparator = n.numberMapper.numberSymbols[i[2]], o.groupData = H.getGroupingDetails(h.split(";")[0])), o.nlead = o.nlead.replace(/\'/g, ""), o.nend = o.nend.replace(/\'/g, "")
            }
            return o
        }

        function C(e, t, i) {
            for (var n = {
                    nlead: e[0],
                    nend: e[1]
                }, r = 0; r < 2; r++) {
                var o = e[r],
                    a = o.indexOf(t);
                if (-1 !== a && (a < o.indexOf("'") || a > o.lastIndexOf("'"))) {
                    n[s[r]] = o.substr(0, a) + i + o.substr(a + 1), n[s[t]] = !0, n.type = n.isCurrency ? "currency" : "percent";
                    break
                }
            }
            return n
        }
        e.dateParseRegex = /([a-z])\1*|'([^']|'')+'|''|./gi, e.basicPatterns = ["short", "medium", "long", "full"], e.defaultObject = {
            dates: {
                calendars: {
                    gregorian: {
                        months: {
                            "stand-alone": {
                                abbreviated: {
                                    1: "Jan",
                                    2: "Feb",
                                    3: "Mar",
                                    4: "Apr",
                                    5: "May",
                                    6: "Jun",
                                    7: "Jul",
                                    8: "Aug",
                                    9: "Sep",
                                    10: "Oct",
                                    11: "Nov",
                                    12: "Dec"
                                },
                                narrow: {
                                    1: "J",
                                    2: "F",
                                    3: "M",
                                    4: "A",
                                    5: "M",
                                    6: "J",
                                    7: "J",
                                    8: "A",
                                    9: "S",
                                    10: "O",
                                    11: "N",
                                    12: "D"
                                },
                                wide: {
                                    1: "January",
                                    2: "February",
                                    3: "March",
                                    4: "April",
                                    5: "May",
                                    6: "June",
                                    7: "July",
                                    8: "August",
                                    9: "September",
                                    10: "October",
                                    11: "November",
                                    12: "December"
                                }
                            }
                        },
                        days: {
                            "stand-alone": {
                                abbreviated: {
                                    sun: "Sun",
                                    mon: "Mon",
                                    tue: "Tue",
                                    wed: "Wed",
                                    thu: "Thu",
                                    fri: "Fri",
                                    sat: "Sat"
                                },
                                narrow: {
                                    sun: "S",
                                    mon: "M",
                                    tue: "T",
                                    wed: "W",
                                    thu: "T",
                                    fri: "F",
                                    sat: "S"
                                },
                                short: {
                                    sun: "Su",
                                    mon: "Mo",
                                    tue: "Tu",
                                    wed: "We",
                                    thu: "Th",
                                    fri: "Fr",
                                    sat: "Sa"
                                },
                                wide: {
                                    sun: "Sunday",
                                    mon: "Monday",
                                    tue: "Tuesday",
                                    wed: "Wednesday",
                                    thu: "Thursday",
                                    fri: "Friday",
                                    sat: "Saturday"
                                }
                            }
                        },
                        dayPeriods: {
                            format: {
                                wide: {
                                    am: "AM",
                                    pm: "PM"
                                }
                            }
                        },
                        eras: {
                            eraNames: {
                                0: "Before Christ",
                                "0-alt-variant": "Before Common Era",
                                1: "Anno Domini",
                                "1-alt-variant": "Common Era"
                            },
                            eraAbbr: {
                                0: "BC",
                                "0-alt-variant": "BCE",
                                1: "AD",
                                "1-alt-variant": "CE"
                            },
                            eraNarrow: {
                                0: "B",
                                "0-alt-variant": "BCE",
                                1: "A",
                                "1-alt-variant": "CE"
                            }
                        },
                        dateFormats: {
                            full: "EEEE, MMMM d, y",
                            long: "MMMM d, y",
                            medium: "MMM d, y",
                            short: "M/d/yy"
                        },
                        timeFormats: {
                            full: "h:mm:ss a zzzz",
                            long: "h:mm:ss a z",
                            medium: "h:mm:ss a",
                            short: "h:mm a"
                        },
                        dateTimeFormats: {
                            full: "{1} 'at' {0}",
                            long: "{1} 'at' {0}",
                            medium: "{1}, {0}",
                            short: "{1}, {0}",
                            availableFormats: {
                                d: "d",
                                E: "ccc",
                                Ed: "d E",
                                Ehm: "E h:mm a",
                                EHm: "E HH:mm",
                                Ehms: "E h:mm:ss a",
                                EHms: "E HH:mm:ss",
                                Gy: "y G",
                                GyMMM: "MMM y G",
                                GyMMMd: "MMM d, y G",
                                GyMMMEd: "E, MMM d, y G",
                                h: "h a",
                                H: "HH",
                                hm: "h:mm a",
                                Hm: "HH:mm",
                                hms: "h:mm:ss a",
                                Hms: "HH:mm:ss",
                                hmsv: "h:mm:ss a v",
                                Hmsv: "HH:mm:ss v",
                                hmv: "h:mm a v",
                                Hmv: "HH:mm v",
                                M: "L",
                                Md: "M/d",
                                MEd: "E, M/d",
                                MMM: "LLL",
                                MMMd: "MMM d",
                                MMMEd: "E, MMM d",
                                MMMMd: "MMMM d",
                                ms: "mm:ss",
                                y: "y",
                                yM: "M/y",
                                yMd: "M/d/y",
                                yMEd: "E, M/d/y",
                                yMMM: "MMM y",
                                yMMMd: "MMM d, y",
                                yMMMEd: "E, MMM d, y",
                                yMMMM: "MMMM y"
                            }
                        }
                    },
                    islamic: {
                        months: {
                            "stand-alone": {
                                abbreviated: {
                                    1: "Muh.",
                                    2: "Saf.",
                                    3: "Rab. I",
                                    4: "Rab. II",
                                    5: "Jum. I",
                                    6: "Jum. II",
                                    7: "Raj.",
                                    8: "Sha.",
                                    9: "Ram.",
                                    10: "Shaw.",
                                    11: "DhuÊ»l-Q.",
                                    12: "DhuÊ»l-H."
                                },
                                narrow: {
                                    1: "1",
                                    2: "2",
                                    3: "3",
                                    4: "4",
                                    5: "5",
                                    6: "6",
                                    7: "7",
                                    8: "8",
                                    9: "9",
                                    10: "10",
                                    11: "11",
                                    12: "12"
                                },
                                wide: {
                                    1: "Muharram",
                                    2: "Safar",
                                    3: "RabiÊ» I",
                                    4: "RabiÊ» II",
                                    5: "Jumada I",
                                    6: "Jumada II",
                                    7: "Rajab",
                                    8: "ShaÊ»ban",
                                    9: "Ramadan",
                                    10: "Shawwal",
                                    11: "DhuÊ»l-QiÊ»dah",
                                    12: "DhuÊ»l-Hijjah"
                                }
                            }
                        },
                        days: {
                            "stand-alone": {
                                abbreviated: {
                                    sun: "Sun",
                                    mon: "Mon",
                                    tue: "Tue",
                                    wed: "Wed",
                                    thu: "Thu",
                                    fri: "Fri",
                                    sat: "Sat"
                                },
                                narrow: {
                                    sun: "S",
                                    mon: "M",
                                    tue: "T",
                                    wed: "W",
                                    thu: "T",
                                    fri: "F",
                                    sat: "S"
                                },
                                short: {
                                    sun: "Su",
                                    mon: "Mo",
                                    tue: "Tu",
                                    wed: "We",
                                    thu: "Th",
                                    fri: "Fr",
                                    sat: "Sa"
                                },
                                wide: {
                                    sun: "Sunday",
                                    mon: "Monday",
                                    tue: "Tuesday",
                                    wed: "Wednesday",
                                    thu: "Thursday",
                                    fri: "Friday",
                                    sat: "Saturday"
                                }
                            }
                        },
                        dayPeriods: {
                            format: {
                                wide: {
                                    am: "AM",
                                    pm: "PM"
                                }
                            }
                        },
                        eras: {
                            eraNames: {
                                0: "AH"
                            },
                            eraAbbr: {
                                0: "AH"
                            },
                            eraNarrow: {
                                0: "AH"
                            }
                        },
                        dateFormats: {
                            full: "EEEE, MMMM d, y G",
                            long: "MMMM d, y G",
                            medium: "MMM d, y G",
                            short: "M/d/y GGGGG"
                        },
                        timeFormats: {
                            full: "h:mm:ss a zzzz",
                            long: "h:mm:ss a z",
                            medium: "h:mm:ss a",
                            short: "h:mm a"
                        },
                        dateTimeFormats: {
                            full: "{1} 'at' {0}",
                            long: "{1} 'at' {0}",
                            medium: "{1}, {0}",
                            short: "{1}, {0}",
                            availableFormats: {
                                d: "d",
                                E: "ccc",
                                Ed: "d E",
                                Ehm: "E h:mm a",
                                EHm: "E HH:mm",
                                Ehms: "E h:mm:ss a",
                                EHms: "E HH:mm:ss",
                                Gy: "y G",
                                GyMMM: "MMM y G",
                                GyMMMd: "MMM d, y G",
                                GyMMMEd: "E, MMM d, y G",
                                h: "h a",
                                H: "HH",
                                hm: "h:mm a",
                                Hm: "HH:mm",
                                hms: "h:mm:ss a",
                                Hms: "HH:mm:ss",
                                M: "L",
                                Md: "M/d",
                                MEd: "E, M/d",
                                MMM: "LLL",
                                MMMd: "MMM d",
                                MMMEd: "E, MMM d",
                                MMMMd: "MMMM d",
                                ms: "mm:ss",
                                y: "y G",
                                yyyy: "y G",
                                yyyyM: "M/y GGGGG",
                                yyyyMd: "M/d/y GGGGG",
                                yyyyMEd: "E, M/d/y GGGGG",
                                yyyyMMM: "MMM y G",
                                yyyyMMMd: "MMM d, y G",
                                yyyyMMMEd: "E, MMM d, y G",
                                yyyyMMMM: "MMMM y G",
                                yyyyQQQ: "QQQ y G",
                                yyyyQQQQ: "QQQQ y G"
                            }
                        }
                    }
                },
                timeZoneNames: {
                    hourFormat: "+HH:mm;-HH:mm",
                    gmtFormat: "GMT{0}",
                    gmtZeroFormat: "GMT"
                }
            },
            numbers: {
                currencies: {
                    USD: {
                        displayName: "US Dollar",
                        symbol: "$",
                        "symbol-alt-narrow": "$"
                    },
                    EUR: {
                        displayName: "Euro",
                        symbol: "â‚¬",
                        "symbol-alt-narrow": "â‚¬"
                    },
                    GBP: {
                        displayName: "British Pound",
                        "symbol-alt-narrow": "Â£"
                    }
                },
                defaultNumberingSystem: "latn",
                minimumGroupingDigits: "1",
                "symbols-numberSystem-latn": {
                    decimal: ".",
                    group: ",",
                    list: ";",
                    percentSign: "%",
                    plusSign: "+",
                    minusSign: "-",
                    exponential: "E",
                    superscriptingExponent: "Ã—",
                    perMille: "â€°",
                    infinity: "âˆž",
                    nan: "NaN",
                    timeSeparator: ":"
                },
                "decimalFormats-numberSystem-latn": {
                    standard: "#,##0.###"
                },
                "percentFormats-numberSystem-latn": {
                    standard: "#,##0%"
                },
                "currencyFormats-numberSystem-latn": {
                    standard: "Â¤#,##0.00",
                    accounting: "Â¤#,##0.00;(Â¤#,##0.00)"
                },
                "scientificFormats-numberSystem-latn": {
                    standard: "#E0"
                }
            }
        }, e.blazorDefaultObject = {
            numbers: {
                mapper: {
                    0: "0",
                    1: "1",
                    2: "2",
                    3: "3",
                    4: "4",
                    5: "5",
                    6: "6",
                    7: "7",
                    8: "8",
                    9: "9"
                },
                mapperDigits: "0123456789",
                numberSymbols: {
                    decimal: ".",
                    group: ",",
                    plusSign: "+",
                    minusSign: "-",
                    percentSign: "%",
                    nan: "NaN",
                    timeSeparator: ":",
                    infinity: "âˆž"
                },
                timeSeparator: ":",
                currencySymbol: "$",
                currencypData: {
                    nlead: "$",
                    nend: "",
                    groupSeparator: ",",
                    groupData: {
                        primary: 3
                    },
                    maximumFraction: 2,
                    minimumFraction: 2
                },
                percentpData: {
                    nlead: "",
                    nend: "%",
                    groupSeparator: ",",
                    groupData: {
                        primary: 3
                    },
                    maximumFraction: 2,
                    minimumFraction: 2
                },
                percentnData: {
                    nlead: "-",
                    nend: "%",
                    groupSeparator: ",",
                    groupData: {
                        primary: 3
                    },
                    maximumFraction: 2,
                    minimumFraction: 2
                },
                currencynData: {
                    nlead: "($",
                    nend: ")",
                    groupSeparator: ",",
                    groupData: {
                        primary: 3
                    },
                    maximumFraction: 2,
                    minimumFraction: 2
                },
                decimalnData: {
                    nlead: "-",
                    nend: "",
                    groupData: {
                        primary: 3
                    },
                    maximumFraction: 2,
                    minimumFraction: 2
                },
                decimalpData: {
                    nlead: "",
                    nend: "",
                    groupData: {
                        primary: 3
                    },
                    maximumFraction: 2,
                    minimumFraction: 2
                }
            },
            dates: {
                dayPeriods: {
                    am: "AM",
                    pm: "PM"
                },
                dateSeperator: "/",
                days: {
                    abbreviated: {
                        sun: "Sun",
                        mon: "Mon",
                        tue: "Tue",
                        wed: "Wed",
                        thu: "Thu",
                        fri: "Fri",
                        sat: "Sat"
                    },
                    short: {
                        sun: "Su",
                        mon: "Mo",
                        tue: "Tu",
                        wed: "We",
                        thu: "Th",
                        fri: "Fr",
                        sat: "Sa"
                    },
                    wide: {
                        sun: "Sunday",
                        mon: "Monday",
                        tue: "Tuesday",
                        wed: "Wednesday",
                        thu: "Thursday",
                        fri: "Friday",
                        sat: "Saturday"
                    }
                },
                months: {
                    abbreviated: {
                        1: "Jan",
                        2: "Feb",
                        3: "Mar",
                        4: "Apr",
                        5: "May",
                        6: "Jun",
                        7: "Jul",
                        8: "Aug",
                        9: "Sep",
                        10: "Oct",
                        11: "Nov",
                        12: "Dec"
                    },
                    wide: {
                        1: "January",
                        2: "February",
                        3: "March",
                        4: "April",
                        5: "May",
                        6: "June",
                        7: "July",
                        8: "August",
                        9: "September",
                        10: "October",
                        11: "November",
                        12: "December"
                    }
                },
                eras: {
                    1: "AD"
                }
            }
        }, e.monthIndex = {
            3: "abbreviated",
            4: "wide",
            5: "narrow",
            1: "abbreviated"
        }, e.month = "months", e.days = "days", e.patternMatcher = {
            C: "currency",
            P: "percent",
            N: "decimal",
            A: "currency",
            E: "scientific"
        }, e.getResultantPattern = l, e.getDependables = h, e.getSymbolPattern = p, e.ConvertDateToWeekFormat = d, e.compareBlazorDateFormats = c, e.getProperNumericSkeleton = m, e.getFormatData = y, e.getCurrencySymbol = b, e.customFormat = function(e, t, i) {
            for (var n = {}, r = e.split(";"), o = ["pData", "nData", "zeroData"], s = 0; s < r.length; s++) n[o[s]] = w(r[s], t, i);
            return g(n.nData) && (n.nData = u({}, n.pData), n.nData.nlead = g(t) ? "-" + n.nData.nlead : t.minusSymbol + n.nData.nlead), n
        }, e.isCurrencyPercent = C, e.getDateSeparator = function(e) {
            var t = (a("dateFormats.short", e) || "").match(/[dâ€Mâ€]([^dâ€M])[dâ€Mâ€]/i);
            return t ? t[1] : "/"
        }, e.getActualDateTimeFormat = function(e, t, i, o) {
            var s = h(i, e, t.calendar);
            S() && (t = c(t, e));
            var p = t.format || l(t.skeleton, s.dateObject, t.type);
            if (o) {
                if (-1 !== (p = p.replace(n, (function(e) {
                        return r[e]
                    }))).indexOf("z")) {
                    var d = p.match(/z/g).length,
                        u = void 0,
                        g = {
                            timeZone: {}
                        };
                    g.numMapper = P.getNumberMapper(s.parserObject, P.getNumberingSystem(i)), g.timeZone = a("dates.timeZoneNames", s.parserObject);
                    var f = (new Date).getTimezoneOffset(),
                        m = d < 4 ? "+H;-H" : g.timeZone.hourFormat;
                    m = m.replace(/:/g, g.numMapper.timeSeparator), 0 === f ? u = g.timeZone.gmtZeroFormat : (u = B.getTimeZoneValue(f, m), u = g.timeZone.gmtFormat.replace(/\{0\}/, u)), p = p.replace(/[z]+/, '"' + u + '"')
                }
                p = p.replace(/ $/, "")
            }
            return p
        }, e.getActualNumberFormat = function(t, i, n, r) {
            var o, s, l = h(n, t, "", !0),
                d = {
                    custom: !0
                },
                c = l.numericObject,
                g = {},
                f = (i.format || "").match(e.currencyFormatRegex),
                v = e.formatRegex.test(i.format) ? m(i.format || "N") : {},
                w = {};
            if (f) {
                w.numberMapper = S() ? u({}, l.numericObject) : P.getNumberMapper(l.parserObject, P.getNumberingSystem(n), !0);
                var C = S() ? a("currencySymbol", l.numericObject) : b(l.numericObject, i.currency || J, i.altSymbol),
                    x = p("currency", w.numberMapper.numberSystem, l.numericObject, /a/i.test(i.format)),
                    k = (x = x.replace(/\u00A4/g, C)).split(";");
                g.hasNegativePattern = !!S() || k.length > 1, g.nData = S() ? a(v.type + "nData", c) : y(k[1] || "-" + k[0], !0, C), g.pData = S() ? a(v.type + "pData", c) : y(k[0], !1, C), f[2] || i.minimumFractionDigits || i.maximumFractionDigits || (o = y(x.split(";")[0], !0, "", !0).minimumFraction)
            }
            if (e.formatRegex.test(i.format) || !i.format) {
                if (u(d, m(i.format || "N")), d.custom = !1, s = "###0", d.fractionDigits || i.minimumFractionDigits || i.maximumFractionDigits || o) {
                    d.fractionDigits && (i.minimumFractionDigits = i.maximumFractionDigits = d.fractionDigits), s = function(e, t, i) {
                        e += ".";
                        for (var n = 0; n < t; n++) e += "0";
                        if (t < i)
                            for (var r = i - t, o = 0; o < r; o++) e += "#";
                        return e
                    }(s, o || d.fractionDigits || i.minimumFractionDigits || 0, i.maximumFractionDigits || 0)
                }
                if (i.minimumIntegerDigits && (s = function(e, t) {
                        for (var i = e.split("."), n = "", r = 0; r < t; r++) n += "0";
                        return i[1] ? n + "." + i[1] : n
                    }(s, i.minimumIntegerDigits)), i.useGrouping && (s = function(e) {
                        var t = e.split("."),
                            i = t[0],
                            n = 3 - i.length % 3;
                        e = "";
                        for (var r = (i = (n && 1 === n ? "#" : 2 === n ? "##" : "") + i).length - 1; r > 0; r -= 3) e = "," + i[r - 2] + i[r - 1] + i[r] + e;
                        return e = e.slice(1), t[1] ? e + "." + t[1] : e
                    }(s)), "currency" === d.type || d.type && S()) {
                    S() && "currency" !== d.type && (g.pData = a(d.type + "pData", c), g.nData = a(d.type + "nData", c));
                    var T = s;
                    s = g.pData.nlead + T + g.pData.nend, (g.hasNegativePattern || S()) && (s += ";" + g.nData.nlead + T + g.nData.nend)
                }
                "percent" !== d.type || S() || (s += " %")
            } else s = i.format.replace(/\'/g, '"');
            return Object.keys(w).length > 0 && (s = r ? s : function(e, t) {
                if (-1 !== e.indexOf(",")) {
                    var i = e.split(",");
                    e = i[0] + a("numberMapper.numberSymbols.group", t) + i[1].replace(".", a("numberMapper.numberSymbols.decimal", t))
                } else e = e.replace(".", a("numberMapper.numberSymbols.decimal", t));
                return e
            }(s, w)), s
        }, e.getWeekData = function(e, t) {
            var i = "sun",
                n = a("supplemental.weekData.firstDay", t),
                r = e;
            return /en-/.test(r) && (r = r.slice(3)), r = r.slice(0, 2).toUpperCase() + r.substr(2), n && (i = n[r] || "sun"), o[i]
        }, e.replaceBlazorCurrency = function(e, t, i) {
            var n = a(i || "", I);
            if (t !== n)
                for (var r = 0, o = e; r < o.length; r++) {
                    var s = o[r];
                    s.nend = s.nend.replace(t, n), s.nlead = s.nlead.replace(t, n)
                }
        }, e.getWeekOfYear = function(e) {
            var t, i = new Date(e.getFullYear(), 0, 1),
                n = i.getDay();
            n = n >= 0 ? n : n + 7;
            var r = Math.floor((e.getTime() - i.getTime() - 6e4 * (e.getTimezoneOffset() - i.getTimezoneOffset())) / 864e5) + 1;
            if (n < 4) {
                if ((t = Math.floor((r + n - 1) / 7) + 1) > 52) {
                    var o = new Date(this.getFullYear() + 1, 0, 1).getDay();
                    t = (o = o >= 0 ? o : o + 7) < 4 ? 1 : 53
                }
            } else t = Math.floor((r + n - 1) / 7);
            return t
        }
    }(ne || (ne = {}));
    var oe = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        se = function() {
            function e(e, t, i, n) {
                this.mode = !0, this.emitError = !0, this.options = {}, "string" == typeof e ? (this.url = e, this.type = t ? t.toUpperCase() : "GET", this.mode = !!g(i) || i) : "object" == typeof e && (this.options = e, c(this, this.options)), this.type = this.type ? this.type.toUpperCase() : "GET", this.contentType = void 0 !== this.contentType ? this.contentType : n
            }
            return e.prototype.send = function(e) {
                var t = this;
                this.data = g(e) ? this.data : e;
                var i = {
                    cancel: !1,
                    httpRequest: null
                };
                return new Promise((function(e, n) {
                    t.httpRequest = new XMLHttpRequest, t.httpRequest.onreadystatechange = function() {
                        t.stateChange(e, n)
                    }, g(t.onLoad) || (t.httpRequest.onload = t.onLoad), g(t.onProgress) || (t.httpRequest.onprogress = t.onProgress), g(t.onAbort) || (t.httpRequest.onabort = t.onAbort), g(t.onError) || (t.httpRequest.onerror = t.onError), g(t.onUploadProgress) || (t.httpRequest.upload.onprogress = t.onUploadProgress), t.httpRequest.open(t.type, t.url, t.mode), g(t.data) || null === t.contentType || t.httpRequest.setRequestHeader("Content-Type", t.contentType || "application/json; charset=utf-8"), t.beforeSend && (i.httpRequest = t.httpRequest, t.beforeSend(i)), i.cancel || t.httpRequest.send(g(t.data) ? null : t.data)
                }))
            }, e.prototype.successHandler = function(e) {
                return this.onSuccess && this.onSuccess(e, this), e
            }, e.prototype.failureHandler = function(e) {
                return this.onFailure && this.onFailure(this.httpRequest), e
            }, e.prototype.stateChange = function(e, t) {
                var i = this.httpRequest.responseText;
                if (this.dataType && "json" === this.dataType.toLowerCase())
                    if ("" === i) i = void 0;
                    else try {
                        i = JSON.parse(i)
                    } catch (e) {}
                4 === this.httpRequest.readyState && (this.httpRequest.status >= 200 && this.httpRequest.status <= 299 || 304 === this.httpRequest.status ? e(this.successHandler(i)) : this.emitError ? t(new Error(this.failureHandler(this.httpRequest.statusText))) : e())
            }, e.prototype.getResponseHeader = function(e) {
                var t, i;
                t = {};
                for (var n = oe.exec(this.httpRequest.getAllResponseHeaders()); n;) t[n[1].toLowerCase()] = n[2], n = oe.exec(this.httpRequest.getAllResponseHeaders());
                return g(i = t[e.toLowerCase()]) ? null : i
            }, e
        }(),
        ae = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,
        le = /msie|trident/i,
        he = /Trident\/7\./,
        pe = /(ipad|iphone|ipod touch)/i,
        de = /(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,
        ce = /android/i,
        ue = /trident|windows phone|edge/i,
        ge = /(version)[ \/]([\w.]+)/i,
        fe = {
            OPERA: /(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,
            EDGE: /(edge)(?:.*version|)[ \/]([\w.]+)/i,
            CHROME: /(chrome|crios)[ \/]([\w.]+)/i,
            PANTHOMEJS: /(phantomjs)[ \/]([\w.]+)/i,
            SAFARI: /(safari)[ \/]([\w.]+)/i,
            WEBKIT: /(webkit)[ \/]([\w.]+)/i,
            MSIE: /(msie|trident) ([\w.]+)/i,
            MOZILLA: /(mozilla)(?:.*? rv:([\w.]+)|)/i
        };
    "undefined" != typeof window && (window.browserDetails = window.browserDetails || {});
    var me = function() {
            function e() {}
            return e.extractBrowserDetail = function() {
                for (var t = {
                        culture: {}
                    }, i = [], n = 0, r = Object.keys(fe); n < r.length; n++) {
                    var o = r[n];
                    if (i = e.userAgent.match(fe[o])) {
                        if (t.name = "opr" === i[1].toLowerCase() ? "opera" : i[1].toLowerCase(), t.name = "crios" === i[1].toLowerCase() ? "chrome" : t.name, t.version = i[2], t.culture.name = t.culture.language = navigator.language, e.userAgent.match(he)) {
                            t.name = "msie";
                            break
                        }
                        var s = e.userAgent.match(ge);
                        "safari" === t.name && s && (t.version = s[2]);
                        break
                    }
                }
                return t
            }, e.getEvent = function(t) {
                var i = {
                    start: {
                        isPointer: "pointerdown",
                        isTouch: "touchstart",
                        isDevice: "mousedown"
                    },
                    move: {
                        isPointer: "pointermove",
                        isTouch: "touchmove",
                        isDevice: "mousemove"
                    },
                    end: {
                        isPointer: "pointerup",
                        isTouch: "touchend",
                        isDevice: "mouseup"
                    },
                    cancel: {
                        isPointer: "pointercancel",
                        isTouch: "touchcancel",
                        isDevice: "mouseleave"
                    }
                };
                return e.isPointer ? i[t].isPointer : e.isTouch ? i[t].isTouch + (e.isDevice ? "" : " " + i[t].isDevice) : i[t].isDevice
            }, e.getTouchStartEvent = function() {
                return e.getEvent("start")
            }, e.getTouchEndEvent = function() {
                return e.getEvent("end")
            }, e.getTouchMoveEvent = function() {
                return e.getEvent("move")
            }, e.getTouchCancelEvent = function() {
                return e.getEvent("cancel")
            }, e.getValue = function(t, i) {
                var n = window.browserDetails;
                return void 0 === n[t] ? n[t] = i.test(e.userAgent) : n[t]
            }, Object.defineProperty(e, "userAgent", {
                get: function() {
                    return e.uA
                },
                set: function(t) {
                    e.uA = t, window.browserDetails = {}
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "info", {
                get: function() {
                    return f(window.browserDetails.info) ? window.browserDetails.info = e.extractBrowserDetail() : window.browserDetails.info
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isIE", {
                get: function() {
                    return e.getValue("isIE", le)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isTouch", {
                get: function() {
                    return f(window.browserDetails.isTouch) ? window.browserDetails.isTouch = "ontouchstart" in window.navigator || window && window.navigator && window.navigator.maxTouchPoints > 0 || "ontouchstart" in window : window.browserDetails.isTouch
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isPointer", {
                get: function() {
                    return f(window.browserDetails.isPointer) ? window.browserDetails.isPointer = "pointerEnabled" in window.navigator : window.browserDetails.isPointer
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isMSPointer", {
                get: function() {
                    return f(window.browserDetails.isMSPointer) ? window.browserDetails.isMSPointer = "msPointerEnabled" in window.navigator : window.browserDetails.isMSPointer
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isDevice", {
                get: function() {
                    return e.getValue("isDevice", ae)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isIos", {
                get: function() {
                    return e.getValue("isIos", pe)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isIos7", {
                get: function() {
                    return e.getValue("isIos7", de)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isAndroid", {
                get: function() {
                    return e.getValue("isAndroid", ce)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isWebView", {
                get: function() {
                    return f(window.browserDetails.isWebView) ? (window.browserDetails.isWebView = !(f(window.cordova) && f(window.PhoneGap) && f(window.phonegap) && "object" !== window.forge), window.browserDetails.isWebView) : window.browserDetails.isWebView
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "isWindows", {
                get: function() {
                    return e.getValue("isWindows", ue)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "touchStartEvent", {
                get: function() {
                    return f(window.browserDetails.touchStartEvent) ? window.browserDetails.touchStartEvent = e.getTouchStartEvent() : window.browserDetails.touchStartEvent
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "touchMoveEvent", {
                get: function() {
                    return f(window.browserDetails.touchMoveEvent) ? window.browserDetails.touchMoveEvent = e.getTouchMoveEvent() : window.browserDetails.touchMoveEvent
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "touchEndEvent", {
                get: function() {
                    return f(window.browserDetails.touchEndEvent) ? window.browserDetails.touchEndEvent = e.getTouchEndEvent() : window.browserDetails.touchEndEvent
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e, "touchCancelEvent", {
                get: function() {
                    return f(window.browserDetails.touchCancelEvent) ? window.browserDetails.touchCancelEvent = e.getTouchCancelEvent() : window.browserDetails.touchCancelEvent
                },
                enumerable: !0,
                configurable: !0
            }), e.uA = "undefined" != typeof navigator ? navigator.userAgent : "", e
        }(),
        ye = function() {
            function e() {}
            return e.addOrGetEventData = function(e) {
                return "__eventList" in e ? e.__eventList.events : (e.__eventList = {}, e.__eventList.events = [])
            }, e.add = function(t, i, n, r, o) {
                var s, a = e.addOrGetEventData(t);
                s = o ? y(n, o) : n, r && (s = s.bind(r));
                for (var l = i.split(" "), h = 0; h < l.length; h++) a.push({
                    name: l[h],
                    listener: n,
                    debounce: s
                }), me.isIE ? t.addEventListener(l[h], s) : t.addEventListener(l[h], s, {
                    passive: !1
                });
                return s
            }, e.remove = function(t, i, n) {
                for (var r = e.addOrGetEventData(t), o = i.split(" "), s = function(e) {
                        var i, s = -1;
                        r && 0 !== r.length && r.some((function(t, r) {
                            return t.name === o[e] && t.listener === n && (s = r, i = t.debounce, !0)
                        })), -1 !== s && r.splice(s, 1), i && t.removeEventListener(o[e], i)
                    }, a = 0; a < o.length; a++) s(a)
            }, e.clearEvents = function(t) {
                var i, n;
                n = u([], n, i = e.addOrGetEventData(t));
                for (var r = 0; r < n.length; r++) t.removeEventListener(n[r].name, n[r].debounce), i.shift()
            }, e.trigger = function(t, i, n) {
                for (var r = 0, o = e.addOrGetEventData(t); r < o.length; r++) {
                    var s = o[r];
                    s.name === i && s.debounce.call(this, n)
                }
            }, e
        }(),
        ve = new RegExp("\\n|\\r|\\s\\s+", "g"),
        be = new RegExp(/'|"/g),
        we = new RegExp("if ?\\("),
        Ce = new RegExp("else if ?\\("),
        Se = new RegExp("else"),
        xe = new RegExp("for ?\\("),
        ke = new RegExp("(/if|/for)"),
        Te = new RegExp("\\((.*)\\)", ""),
        De = new RegExp("^[0-9]+$", "g"),
        Ee = new RegExp("[\\w\"'.\\s+]+", "g"),
        Re = new RegExp('"(.*?)"', "g"),
        Pe = new RegExp("[\\w\"'@#$.\\s+]+", "g"),
        Ie = new RegExp("\\${([^}]*)}", "g"),
        Me = /^\..*/gm,
        Le = /\\/gi,
        Oe = /\\\\/gi,
        Ae = new RegExp("[\\w\"'@#$.\\s+]+", "g"),
        Be = /\window\./gm;

    function Fe(e, t) {
        var i = function(e, t, i) {
            var n = 0,
                r = [],
                o = e.match(/class="([^\"]+|)\s{2}/g),
                s = "";
            o && o.forEach((function(t) {
                s = t.replace(/\s\s+/g, " "), e = e.replace(t, s)
            }));
            return e.replace(ve, "").replace(Re, "'$1'").replace(Ie, (function(e, o, s, a) {
                var l = o.match(Te);
                if (l) {
                    var h = l[1];
                    if (Ce.test(o)) o = '";} ' + o.replace(l[1], h.replace(Ee, (function(e) {
                        return Ne(e = e.trim(), !be.test(e) && -1 === r.indexOf(e), t, r)
                    }))) + '{ \n str = str + "';
                    else if (we.test(o)) o = '"; ' + o.replace(l[1], h.replace(Pe, (function(e) {
                        return je(e, t, r)
                    }))) + '{ \n str = str + "';
                    else if (xe.test(o)) {
                        var p = l[1].split(" of ");
                        o = '"; ' + o.replace(l[1], (function(e) {
                            return r.push(p[0]), r.push(p[0] + "Index"), "var i" + (n += 1) + "=0; i" + n + " < " + Ne(p[1], !0, t, r) + ".length; i" + n + "++"
                        })) + "{ \n " + p[0] + "= " + Ne(p[1], !0, t, r) + "[i" + n + "]; \n var " + p[0] + "Index=i" + n + '; \n str = str + "'
                    } else {
                        var d = o.split("("),
                            c = i && i.hasOwnProperty(d[0]) ? "this." : "global";
                        c = /\./.test(d[0]) ? "" : c;
                        var u = l[1].split(",");
                        0 === l[1].length || /data/.test(u[0]) || /window./.test(u[0]) || (l[1] = "global" === c ? t + "." + l[1] : l[1]);
                        if (Be.test(o) && /\]\./gm.test(o) || /\@|\$|\#/gm.test(o)) {
                            /\@|\$|\#|\]\./gm.test(o) && (o = '"+ ' + ("global" === c ? "" : c) + o.replace(l[1], h.replace(Ae, (function(e) {
                                return je(e, t, r)
                            }))) + '+ "')
                        } else o = '" + ' + ("global" === c ? "" : c) + o.replace(h, Ne(l[1].replace(/,( |)data.|,/gi, "," + t + ".").replace(/,( |)data.window/gi, ",window"), "global" !== c, t, r)) + '+"'
                    }
                } else Se.test(o) ? o = '"; ' + o.replace(Se, '} else { \n str = str + "') : o.match(ke) ? o = o.replace(ke, '"; \n } \n str = str + "') : /\@|\#|\$/gm.test(o) ? (o.match(Le) && (o = Ve(o)), o = '"+' + He(o, -1 === r.indexOf(o), t, r) + '"]+"') : o = o.match(Le) ? '"+' + He(o = Ve(o), -1 === r.indexOf(o), t, r) + '"]+"' : '"+' + Ne(o.replace(/\,/gi, "+" + t + "."), -1 === r.indexOf(o), t, r) + '+"';
                return o
            }))
        }(e, "data", t);
        return new Function("data", 'var str="' + i + '"; return str;').bind(t)
    }

    function Ne(e, t, i, n) {
        return t && !De.test(e) && -1 === n.indexOf(e.split(".")[0]) ? i + "." + e : e
    }

    function He(e, t, i, n) {
        return t && !De.test(e) && -1 === n.indexOf(e.split(".")[0]) ? i + '["' + e : e
    }

    function Ve(e) {
        return e = e.match(Oe) ? e : e.replace(Le, "\\\\")
    }

    function je(e, t, i) {
        e = e.trim();
        if (/\window\./gm.test(e)) return e;
        var n = /'|"/gm;
        return /\@|\$|\#/gm.test(e) && (e = He(e, -1 === i.indexOf(e), t, i) + '"]'), Me.test(e) ? function(e, t, i, n) {
            return !t || De.test(e) || -1 !== n.indexOf(e.split(".")[0]) || /^\..*/gm.test(e) ? e : i + "." + e
        }(e, !n.test(e) && -1 === i.indexOf(e), t, i) : Ne(e, !n.test(e) && -1 === i.indexOf(e), t, i)
    }
    var ze = /^[\n\r.]+\<tr|^\<tr/,
        qe = /^[\n\r.]+\<svg|^\<path|^\<g/,
        We = {};

    function _e() {
        return "-" + Math.random().toString(36).substr(2, 5)
    }

    function Ge(e, t) {
        var i = Xe.compile(e, t);
        return function(e, t, n, r, o, s, a) {
            var l = i(e, t, n, a);
            if (S() && !o) {
                var h = r + _e();
                if (We[r] || (We[r] = []), g(s)) e.BlazorTemplateId = h, We[r].push(e);
                else
                    for (var p = 0, d = Object.keys(We[r][s]); p < d.length; p++) {
                        var c = d[p];
                        "BlazorTemplateId" !== c && e[c] && (We[r][s][c] = e[c]), "BlazorTemplateId" === c && (h = We[r][s][c])
                    }
                return "rowTemplate" === n ? [ct("tr", {
                    id: h,
                    className: "e-blazor-template"
                })] : [ct("div", {
                    id: h,
                    className: "e-blazor-template"
                })]
            }
            return "string" == typeof l ? qe.test(l) ? ct("svg", {
                innerHTML: l
            }).childNodes : ct(ze.test(l) ? "table" : "div", {
                innerHTML: l
            }).childNodes : l
        }
    }

    function Ue(e, t, i, n, r) {
        if (S()) {
            window.sfBlazor.updateTemplate(t, We[e], e, i, r), !1 !== n && (We[e] = [])
        }
    }

    function Ke(e, t, i) {
        var n = document.getElementById(e);
        if (n)
            for (var r = n.getElementsByClassName("blazor-inner-template"), o = 0; o < r.length; o++) {
                var s = " ";
                s = g(i) ? r[o].getAttribute("data-templateId") : r[i].getAttribute("data-templateId");
                var a = document.getElementById(s);
                if (a)
                    for (var l = a.childNodes.length, h = 0; h < l; h++) g(i) ? r[o].appendChild(a.childNodes[0]) : (r[i].appendChild(a.childNodes[0]), o = r.length)
            }
    }
    var Ye, Xe = {
            compile: (new(function() {
                function e() {}
                return e.prototype.compile = function(e, t) {
                    return void 0 === t && (t = {}), Fe(e, t)
                }, e
            }())).compile
        },
        Qe = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
        Je = /(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,
        Ze = /^(\.|#)/,
        $e = {
            ".": "className",
            "#": "id"
        },
        et = {
            className: "attributes.className",
            id: "attributes.id",
            tagName: "tagName"
        },
        tt = ["area", "base", "basefont", "br", "col", "frame", "hr", "img", "input", "link", "meta", "param", "embed", "command", "keygen", "source", "track", "wbr"],
        it = ["a", "address", "article", "applet", "aside", "audio", "blockquote", "button", "canvas", "center", "dd", "del", "dir", "div", "dl", "dt", "fieldset", "figcaption", "figure", "footer", "form", "frameset", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hgroup", "hr", "iframe", "ins", "isindex", "li", "map", "menu", "noframes", "noscript", "object", "ol", "output", "p", "pre", "section", "script", "table", "tbody", "td", "tfoot", "th", "thead", "tr", "ul", "video"],
        nt = ["abbr", "acronym", "applet", "b", "basefont", "bdo", "big", "br", "button", "cite", "code", "del", "dfn", "em", "font", "i", "iframe", "img", "input", "ins", "kbd", "label", "map", "object", "q", "s", "samp", "script", "select", "small", "span", "strike", "strong", "sub", "sup", "textarea", "tt", "u", "var"],
        rt = ["colgroup", "dd", "dt", "li", "options", "p", "td", "tfoot", "th", "thead", "tr"],
        ot = ["checked", "compact", "declare", "defer", "disabled", "ismap", "multiple", "nohref", "noresize", "noshade", "nowrap", "readonly", "selected"],
        st = ["Script", "style"],
        at = {
            tabindex: "tabIndex"
        },
        lt = /^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,
        ht = /^<\/([-A-Za-z0-9_]+)[^>]*>/,
        pt = /([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;
    ! function(e) {
        function t(e, t) {
            t && e && e.forEach((function(e) {
                return p(e) && (e.parent && i(e), e.parent = t), e
            }))
        }

        function i(e) {
            var t = e.parent;
            if (t) {
                var i = t.children.indexOf(e); - 1 !== i && t.children.splice(i)
            }
            return t
        }

        function n(e, t) {
            var i = e.match(Ze),
                n = {};
            if (i) {
                var r = $e[i[0]];
                if ("className" === r) {
                    var o = t.filter((function(e) {
                            return e.hasOwnProperty("className")
                        }))[0],
                        s = !1;
                    o || (s = !0, o = {});
                    var a = o[r] || "";
                    o[r] = a + "(?=.*?\\b{value}\\b)".replace("{value}", e.replace(".", "")), s && t.push(o)
                } else n[r] = e.replace(i[0], ""), t.push(n)
            } else t.push({
                tagName: e
            })
        }

        function r(e, t, i, n) {
            if (e.children) {
                var o = e.children.filter((function(e) {
                    if ("string" != typeof e) {
                        for (var i = !0, n = 0, r = t; n < r.length; n++) {
                            var o = r[n],
                                s = Object.keys(o)[0],
                                l = o[s],
                                h = a(et[s], e);
                            if ("className" === s) {
                                if (!new RegExp("^" + l + ".*$").test(h)) {
                                    i = !1;
                                    break
                                }
                            } else if (h !== l) {
                                i = !1;
                                break
                            }
                        }
                        return i
                    }
                    return !1
                }));
                return n || o.length && !i || e.children.forEach((function(e) {
                    p(e) && (o = o.concat(r(e, t, i)))
                })), o
            }
            return []
        }

        function o(e) {
            for (var t, i = [], n = [], r = []; e;) {
                t = !0;
                var o = s(n);
                if (o && l(st, o)) e = e.replace(new RegExp("([\\s\\S]*?)</" + s(r) + "[^>]*>"), (function(e, t) {
                    return u(t = t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g, "$1$2")), ""
                })), c("", s(n));
                else {
                    if (0 === e.indexOf("</"))(a = e.match(ht)) && (e = e.substring(a[0].length), a[0].replace(ht, c)), t = !1;
                    else if (0 === e.indexOf("<")) {
                        var a;
                        (a = e.match(lt)) && (e = e.substring(a[0].length), a[0].replace(lt, d)), t = !1
                    }
                    if (t) {
                        var h = e.indexOf("<"),
                            p = h < 0 ? e : e.substring(0, h);
                        e = h < 0 ? "" : e.substring(h), u(p)
                    }
                }
                e
            }

            function d(e, t, o) {
                if (t = t.toLowerCase(), l(it, t))
                    for (; s(n) && l(nt, s(n));) c("", s(n));
                l(rt, t) && s(n) && c("", t);
                var a = l(tt, t);
                a || n.push(t);
                var h = {};
                o.replace(pt, (function(e, t) {
                    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                    var r = i[2] ? i[2] : i[3] ? i[3] : i[4] ? i[4] : l(ot, t) ? t : "";
                    if ("style" === t) {
                        for (var o = r.split(";"), s = {}, a = 0, p = o.length; a < p; a++) {
                            var d = o[a],
                                c = d.split(":");
                            s[c[0]] = c[1]
                        }
                        r = s
                    }
                    h[t = at[t] || t] = r
                })), h["data-id"] = _e();
                var p = {
                    tagName: t,
                    attributes: h
                };
                if (a) {
                    var d = r[0] || i;
                    void 0 === d.children && (d.children = []), p.parent = d, d.children.push(p)
                } else r.unshift(p)
            }

            function c(e, t) {
                var o;
                if (t)
                    for (o = n.length - 1; o >= 0 && n[o] !== t; o--);
                else o = 0;
                if (o >= 0) {
                    for (var s = r.length - 1; s >= o; s--) {
                        var a = r.shift();
                        if (0 === r.length) i.push(a);
                        else {
                            var l = r[0];
                            void 0 === l.children && (l.children = []), a.parent = l, l.children.push(a)
                        }
                    }
                    n.length = o
                }
            }

            function u(e) {
                if (0 === r.length) i.push(e);
                else {
                    var t = r[0];
                    void 0 === t.children && (t.children = []), t.children.push(e)
                }
            }
            return i
        }

        function s(e) {
            return e[e.length - 1]
        }

        function l(e, t) {
            return -1 !== e.indexOf(t)
        }
        e.createElement = function(e, t) {
            var i = [],
                n = u({}, {}, t, !0);
            if (!g(t) && Object.keys(t).length && (n.innerHTML && (i = o(n.innerHTML), delete n.innerHTML), n.attrs && (u(n, n.attrs), delete n.attrs), n.styles)) {
                for (var r = n.styles.split(";"), s = {}, a = 0, l = r.length; a < l; a++) {
                    var h = r[a].split(":");
                    s[h[0]] = h[1]
                }
                delete n.styles, n.style = s
            }
            return {
                tagName: e,
                attributes: n || {},
                children: i
            }
        }, e.assignParent = t, e.append = function(e, i) {
            t(e, i), i.children ? i.children = i.children.concat(e) : i.children = [].concat(e)
        }, e.prepend = function(e, i) {
            if (t(e, i), i.children && i.children.length)
                for (var n = e.length - 1; n >= 0; n--) i.children.unshift(e[n]);
            else i.children = [], i.children.concat(e)
        }, e.detach = i, e.vDomSelector = function e(t) {
            for (var i = t.ele, o = t.selector, s = t.selectAll, a = t.immediateParent, l = o.split(" "), h = i, p = 0, d = l.length; p < d; p++) {
                var c = !1,
                    u = h,
                    g = l[p],
                    f = [];
                if (Qe.test(g)) !0, n(g, f);
                else if (-1 === g.indexOf(">"))
                    for (var m = 0, y = g.match(Je); m < y.length; m++) {
                        n(y[m], f)
                    } else if (-1 !== g.indexOf(">")) {
                        c = !0;
                        for (var v = i, b = void 0, w = 0, C = 0, S = g.split(">"); C < S.length; C++) {
                            var x = S[C];
                            if (!v) break;
                            if (v.length) {
                                for (var k = [], T = 0, D = v; T < D.length; T++) {
                                    var E = D[T];
                                    k = k.concat(e({
                                        ele: E,
                                        selector: x,
                                        selectAll: s,
                                        immediateParent: !!w
                                    }))
                                }
                                b = k
                            } else b = e({
                                ele: v,
                                selector: x,
                                selectAll: s,
                                immediateParent: !!w
                            });
                            w++, v = b
                        }
                        b && (h = b)
                    } if (!c)
                    if (u.length) {
                        for (var R = [], P = 0, I = u; P < I.length; P++) {
                            var M = I[P];
                            R = R.concat(r(M, f, s, a))
                        }
                        h = R
                    } else h = r(u, f, s, a)
            }
            return s ? h : h[0] || null
        }, e.accessElement = r, e.ConvertHTMLToJSon = o, e.cloneNode = function(e, t) {
            return p(e) ? t ? u({}, {}, e, !0) : {
                tagName: e.tagName,
                attributes: e.attributes
            } : e.cloneNode(t)
        }, e.setStyleAttribute = function(e, t) {
            e.attributes.style ? e.attributes.style = u({}, t) : e.attributes.style = u(e.attributes.style, t)
        }
    }(Ye || (Ye = {}));
    var dt = /^svg|^path|^g/;

    function ct(e, t) {
        var i = dt.test(e) ? document.createElementNS("http://www.w3.org/2000/svg", e) : document.createElement(e);
        return void 0 === t || (i.innerHTML = t.innerHTML ? t.innerHTML : "", void 0 !== t.className && (i.className = t.className), void 0 !== t.id && (i.id = t.id), void 0 !== t.styles && i.setAttribute("style", t.styles), void 0 !== t.attrs && St(i, t.attrs)), i
    }

    function ut(e, t) {
        for (var i = ft(t), n = 0, r = e; n < r.length; n++)
            for (var o = r[n], s = 0, h = i; s < h.length; s++) {
                var d = h[s];
                if (p(o)) {
                    var c = a("attributes.className", o);
                    g(c) ? l("attributes.className", d, o) : new RegExp("\\b" + d + "\\b", "i").test(c) || l("attributes.className", c + " " + d, o)
                } else o.classList.contains(d) || o.classList.add(d)
            }
        return e
    }

    function gt(e, t) {
        for (var i = ft(t), n = 0, r = e; n < r.length; n++) {
            var o = r[n],
                s = p(o);
            if (s ? a("attributes.className", o) : "" !== o.className)
                for (var h = 0, d = i; h < d.length; h++) {
                    var c = d[h];
                    if (s) {
                        var u = a("attributes.className", o).split(" "),
                            g = u.indexOf(c); - 1 !== g && u.splice(g, 1), l("attributes.className", u.join(" "), o)
                    } else o.classList.remove(c)
                }
        }
        return e
    }

    function ft(e) {
        var t = [];
        return "string" == typeof e ? t.push(e) : t = e, t
    }

    function mt(e) {
        var t = e;
        return "" === t.style.visibility && t.offsetWidth > 0
    }

    function yt(e, t, i) {
        if (p(t)) Ye.prepend(e, t);
        else {
            for (var n = document.createDocumentFragment(), r = 0, o = e; r < o.length; r++) {
                var s = o[r];
                n.appendChild(s)
            }
            t.insertBefore(n, t.firstElementChild), i && bt(t)
        }
        return e
    }

    function vt(e, t, i) {
        if (p(t)) Ye.append(e, t);
        else {
            for (var n = document.createDocumentFragment(), r = 0, o = e; r < o.length; r++) {
                var s = o[r];
                n.appendChild(s)
            }
            t.appendChild(n), i && bt(t)
        }
        return e
    }

    function bt(e) {
        e.querySelectorAll("script").forEach((function(e) {
            var t = document.createElement("script");
            t.text = e.innerHTML, document.head.appendChild(t), wt(t)
        }))
    }

    function wt(e) {
        return p(e) ? Ye.detach(e) : e.parentNode.removeChild(e)
    }

    function Ct(e) {
        if (p(e)) Ye.detach(e);
        else {
            var t = e.parentNode;
            ye.clearEvents(e), t.removeChild(e)
        }
    }

    function St(e, t) {
        for (var i = e, n = 0, r = Object.keys(t); n < r.length; n++) {
            var o = r[n];
            if (p(i)) {
                var s = o;
                "tabindex" === o && (s = "tabIndex"), i.attributes[s] = t[o]
            } else i.setAttribute(o, t[o])
        }
        return i
    }

    function xt(e, t, i) {
        return void 0 === t && (t = document), p(t) && i ? Ye.vDomSelector({
            ele: t,
            selector: e,
            selectAll: !1
        }) : t.querySelector(e)
    }

    function kt(e, t, i) {
        return void 0 === t && (t = document), p(t) && !i ? Ye.vDomSelector({
            ele: t,
            selector: e,
            selectAll: !0
        }) : t.querySelectorAll(e)
    }

    function Tt(e, t) {
        var i = e;
        if ("function" == typeof i.closest) return i.closest(t);
        for (; i && 1 === i.nodeType;) {
            if (Rt(i, t)) return i;
            i = i.parentNode
        }
        return null
    }

    function Dt(e, t) {
        void 0 !== t && (p(e) ? Ye.setStyleAttribute(e, t) : Object.keys(t).forEach((function(i) {
            e.style[i] = t[i]
        })))
    }

    function Et(e, t, i) {
        ut([e], t), gt([e], i)
    }

    function Rt(e, t) {
        var i = e.matches || e.msMatchesSelector || e.webkitMatchesSelector;
        return i ? i.call(e, t) : -1 !== [].indexOf.call(document.querySelectorAll(t), e)
    }
    var Pt = new RegExp("]"),
        It = function() {
            function e(e, t) {
                this.isRendered = !1, this.isComplexArraySetter = !1, this.isServerRendered = !1, this.allowServerDataBinding = !0, this.isProtectedOnChange = !0, this.properties = {}, this.changedProperties = {}, this.oldProperties = {}, this.bulkChanges = {}, this.refreshing = !1, this.ignoreCollectionWatch = !1, this.finalUpdate = function() {}, this.childChangedProperties = {}, this.modelObserver = new U(this), f(t) || (this.element = "string" == typeof t ? document.querySelector(t) : t, g(this.element) || (this.isProtectedOnChange = !1, this.addInstance())), f(e) || this.setProperties(e, !0), this.isDestroyed = !1
            }
            return e.prototype.setProperties = function(e, t) {
                var i = this.isProtectedOnChange;
                this.isProtectedOnChange = !!t, c(this, e), !0 !== t ? (c(this.changedProperties, e), this.dataBind()) : S() && this.isRendered && this.serverDataBind(e), this.finalUpdate(), this.changedProperties = {}, this.oldProperties = {}, this.isProtectedOnChange = i
            }, e.callChildDataBind = function(e, t) {
                for (var i = 0, n = Object.keys(e); i < n.length; i++) {
                    var r = n[i];
                    if (t[r] instanceof Array)
                        for (var o = 0, s = t[r]; o < s.length; o++) {
                            var a = s[o];
                            void 0 !== a.dataBind && a.dataBind()
                        } else t[r].dataBind()
                }
            }, e.prototype.clearChanges = function() {
                this.finalUpdate(), this.changedProperties = {}, this.oldProperties = {}, this.childChangedProperties = {}
            }, e.prototype.dataBind = function() {
                if (e.callChildDataBind(this.childChangedProperties, this), Object.getOwnPropertyNames(this.changedProperties).length) {
                    var t = this.isProtectedOnChange,
                        i = this.changedProperties,
                        n = this.oldProperties;
                    this.clearChanges(), this.isProtectedOnChange = !0, this.onPropertyChanged(i, n), this.isProtectedOnChange = t
                }
            }, e.prototype.serverDataBind = function(e) {
                if (S() && (e = e || {}, u(this.bulkChanges, {}, e, !0), this.allowServerDataBinding)) {
                    window.sfBlazor.updateModel(this), this.bulkChanges = {}
                }
            }, e.prototype.saveChanges = function(e, t, i) {
                if (S()) {
                    var n = {};
                    n[e] = t, this.serverDataBind(n)
                }
                this.isProtectedOnChange || (this.oldProperties[e] = i, this.changedProperties[e] = t, this.finalUpdate(), this.finalUpdate = function(e) {
                    var t, i = new Uint16Array(5);
                    (window.msCrypto || window.crypto).getRandomValues(i);
                    var n = "ej2" + function(e) {
                            for (var t = "", i = 0; i < 5; i++) t += (i ? "," : "") + e[i];
                            return t
                        }(i),
                        r = function(i) {
                            i.source === window && "string" == typeof i.data && i.data.length <= 32 && i.data === n && (e(), t())
                        };
                    return window.addEventListener("message", r, !1), window.postMessage(n, "*"), t = function() {
                        window.removeEventListener("message", r), e = r = n = void 0
                    }
                }(this.dataBind.bind(this)))
            }, e.prototype.addEventListener = function(e, t) {
                this.modelObserver.on(e, t)
            }, e.prototype.removeEventListener = function(e, t) {
                this.modelObserver.off(e, t)
            }, e.prototype.trigger = function(e, t, i, n) {
                var r = this;
                if (!0 !== this.isDestroyed) {
                    var o = this.isProtectedOnChange;
                    this.isProtectedOnChange = !1;
                    var s = this.modelObserver.notify(e, t, i, n);
                    if (Pt.test(e)) {
                        var l = a(e, this);
                        if (l) {
                            if (window.Blazor) {
                                var h = l.call(this, t);
                                h && "function" == typeof h.then ? i ? h.then((function(e) {
                                    i && (e = "string" == typeof e && r.modelObserver.isJson(e) ? JSON.parse(e) : e, i.call(r, e))
                                })).catch((function(e) {
                                    n && (e = "string" == typeof e && r.modelObserver.isJson(e) ? JSON.parse(e) : e, n.call(r, e))
                                })) : s = h : i && i.call(this, t)
                            } else l.call(this, t), i && i.call(this, t)
                        } else i && i.call(this, t)
                    }
                    return this.isProtectedOnChange = o, s
                }
            }, e.prototype.addInstance = function() {
                var e = "e-" + this.getModuleName().toLowerCase();
                ut([this.element], ["e-lib", e]), g(this.element.ej2_instances) ? l("ej2_instances", [this], this.element) : this.element.ej2_instances.push(this)
            }, e.prototype.destroy = function() {
                var e = this;
                this.element.ej2_instances = this.element.ej2_instances.filter((function(t) {
                    return t !== e
                })), gt([this.element], ["e-" + this.getModuleName()]), 0 === this.element.ej2_instances.length && gt([this.element], ["e-lib"]), this.clearChanges(), this.modelObserver.destroy(), this.isDestroyed = !0
            }, e
        }();

    function Mt(e, t, i, n) {
        return e.properties.hasOwnProperty(t) && e.properties[t] instanceof n || (e.properties[t] = s(n, [e, t, i])), e.properties[t]
    }

    function Lt(e, t, i, n, r, o) {
        for (var a = [], l = i ? i.length : 0, h = 0; h < l; h++) {
            var p = n;
            if (o && (p = n(i[h], e)), r) {
                var d = s(p, [e, t, {}, !0]);
                d.setProperties(i[h], !0), a.push(d)
            } else a.push(s(p, [e, t, i[h], !1]))
        }
        return a
    }

    function Ot(e, t) {
        return function() {
            return this.properties.hasOwnProperty(t) || (this.properties[t] = e), this.properties[t]
        }
    }

    function At(e, t) {
        return function(i) {
            if (this.properties[t] !== i) {
                var n = this.properties.hasOwnProperty(t) ? this.properties[t] : e;
                this.saveChanges(t, i, n), this.properties[t] = i
            }
        }
    }

    function Bt(e, t, i) {
        return function() {
            return Mt(this, t, e, i)
        }
    }

    function Ft(e, t, i) {
        return function(n) {
            Mt(this, t, e, i).setProperties(n)
        }
    }

    function Nt(e, t, i) {
        return function() {
            var n = this;
            if (!this.properties.hasOwnProperty(t)) {
                var r = Lt(this, t, e, i, !1);
                this.properties[t] = r
            }
            var o = void 0 !== this.controlParent && this.controlParent.ignoreCollectionWatch || this.ignoreCollectionWatch;
            return this.properties[t].hasOwnProperty("push") || o || ["push", "pop"].forEach((function(e) {
                var r = {
                    value: Vt(e, t, i, n.properties[t]).bind(n),
                    configurable: !0
                };
                Object.defineProperty(n.properties[t], e, r)
            })), this.properties[t].hasOwnProperty("isComplexArray") || Object.defineProperty(this.properties[t], "isComplexArray", {
                value: !0
            }), this.properties[t]
        }
    }

    function Ht(e, t, i) {
        return function(n) {
            this.isComplexArraySetter = !0;
            var r = Lt(this, t, e, i, !1),
                o = Lt(this, t, n, i, !0);
            this.isComplexArraySetter = !1, this.saveChanges(t, o, r), this.properties[t] = o
        }
    }

    function Vt(e, t, i, n) {
        return function() {
            for (var i = [], r = 0; r < arguments.length; r++) i[r] = arguments[r];
            var o = this.propName ? this.getParentKey() + "." + t + "-" : t + "-";
            switch (e) {
                case "push":
                    for (var s = 0; s < i.length; s++) {
                        Array.prototype[e].apply(n, [i[s]]);
                        var a = jt(o + (n.length - 1), i[s], !this.controlParent, e);
                        this.serverDataBind(a, i[s], !1, e)
                    }
                    break;
                case "pop":
                    Array.prototype[e].apply(n);
                    var l = jt(o + n.length, null, !this.controlParent, e);
                    this.serverDataBind(l, {
                        ejsAction: "pop"
                    }, !1, e)
            }
            return n
        }
    }

    function jt(e, t, i, n) {
        var r = e;
        if (i && ((r = {})[e] = t, t && "object" == typeof t)) {
            r[e].ejsAction = n
        }
        return r
    }

    function zt(e) {
        return function(t, i) {
            var n = {
                set: At(e, i),
                get: Ot(e, i),
                enumerable: !0,
                configurable: !0
            };
            Object.defineProperty(t, i, n), Ut(t, i, "prop", e)
        }
    }

    function qt(e, t) {
        return function(i, n) {
            var r = {
                set: Ft(e, n, t),
                get: Bt(e, n, t),
                enumerable: !0,
                configurable: !0
            };
            Object.defineProperty(i, n, r), Ut(i, n, "complexProp", e, t)
        }
    }

    function Wt(e, t) {
        return function(i, n) {
            var r = {
                set: Ht(e, n, t),
                get: Nt(e, n, t),
                enumerable: !0,
                configurable: !0
            };
            Object.defineProperty(i, n, r), Ut(i, n, "colProp", e, t)
        }
    }

    function _t() {
        return function(e, t) {
            var i = {
                set: function(e) {
                    var i = this.properties[t];
                    if (i !== e) {
                        var n = function e(t, i) {
                            if (!1 === t.hasOwnProperty("parentObj")) return {
                                context: t,
                                prefix: i
                            };
                            var n = a("propName", t);
                            return n && (i = n + "-" + i), e(a("parentObj", t), i)
                        }(this, t);
                        !1 === f(i) && n.context.removeEventListener(n.prefix, i), n.context.addEventListener(n.prefix, e), this.properties[t] = e
                    }
                },
                get: Ot(void 0, t),
                enumerable: !0,
                configurable: !0
            };
            Object.defineProperty(e, t, i), Ut(e, t, "event")
        }
    }

    function Gt(e) {}

    function Ut(e, t, i, n, r) {
        f(e.propList) && (e.propList = {
            props: [],
            complexProps: [],
            colProps: [],
            events: [],
            propNames: [],
            complexPropNames: [],
            colPropNames: [],
            eventNames: []
        }), e.propList[i + "s"].push({
            propertyName: t,
            defaultValue: n,
            type: r
        }), e.propList[i + "Names"].push(t)
    }
    var Kt, Yt = (Kt = function(e, t) {
            return (Kt = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(e, t)
        }, function(e, t) {
            function i() {
                this.constructor = e
            }
            Kt(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i)
        }),
        Xt = function(e, t, i, n) {
            var r, o = arguments.length,
                s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
            else
                for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
            return o > 3 && s && Object.defineProperty(t, i, s), s
        },
        Qt = function(e) {
            function t(t) {
                var i = e.call(this, t, void 0) || this;
                return i.easing = {
                    ease: "cubic-bezier(0.250, 0.100, 0.250, 1.000)",
                    linear: "cubic-bezier(0.250, 0.250, 0.750, 0.750)",
                    easeIn: "cubic-bezier(0.420, 0.000, 1.000, 1.000)",
                    easeOut: "cubic-bezier(0.000, 0.000, 0.580, 1.000)",
                    easeInOut: "cubic-bezier(0.420, 0.000, 0.580, 1.000)",
                    elasticInOut: "cubic-bezier(0.5,-0.58,0.38,1.81)",
                    elasticIn: "cubic-bezier(0.17,0.67,0.59,1.81)",
                    elasticOut: "cubic-bezier(0.7,-0.75,0.99,1.01)"
                }, i
            }
            var i;
            return Yt(t, e), i = t, t.prototype.animate = function(e, t) {
                t = t || {};
                var n = this.getModel(t);
                if ("string" == typeof e)
                    for (var r = 0, o = Array.prototype.slice.call(kt(e, document)); r < o.length; r++) {
                        var s = o[r];
                        n.element = s, i.delayAnimation(n)
                    } else n.element = e, i.delayAnimation(n)
            }, t.stop = function(e, t) {
                e.style.animation = "", e.removeAttribute("e-animate");
                var i = e.getAttribute("e-animation-id");
                if (i) {
                    var n = parseInt(i, 10);
                    cancelAnimationFrame(n), e.removeAttribute("e-animation-id")
                }
                t && t.end && t.end.call(this, t)
            }, t.delayAnimation = function(e) {
                e.delay ? setTimeout((function() {
                    i.applyAnimation(e)
                }), e.delay) : i.applyAnimation(e)
            }, t.applyAnimation = function(e) {
                var t = this;
                e.timeStamp = 0;
                var i = 0,
                    n = 0,
                    r = 0,
                    o = e.duration;
                e.element.setAttribute("e-animate", "true");
                var s = function(a) {
                    try {
                        if (a) {
                            r = 0 === r ? a : r, e.timeStamp = a + e.timeStamp - r, r = a, !i && e.begin && e.begin.call(t, e), i += 1;
                            var l = e.timeStamp / i;
                            e.timeStamp < o && e.timeStamp + l < o && e.element.getAttribute("e-animate") ? (e.element.style.animation = e.name + " " + e.duration + "ms " + e.timingFunction, e.progress && e.progress.call(t, e), requestAnimationFrame(s)) : (cancelAnimationFrame(n), e.element.removeAttribute("e-animation-id"), e.element.removeAttribute("e-animate"), e.element.style.animation = "", e.end && e.end.call(t, e))
                        } else performance.now(), n = requestAnimationFrame(s), e.element.setAttribute("e-animation-id", n.toString())
                    } catch (i) {
                        cancelAnimationFrame(n), e.element.removeAttribute("e-animation-id"), e.fail && e.fail.call(t, i)
                    }
                };
                s()
            }, t.prototype.getModel = function(e) {
                return {
                    name: e.name || this.name,
                    delay: e.delay || this.delay,
                    duration: void 0 !== e.duration ? e.duration : this.duration,
                    begin: e.begin || this.begin,
                    end: e.end || this.end,
                    fail: e.fail || this.fail,
                    progress: e.progress || this.progress,
                    timingFunction: this.easing[e.timingFunction] ? this.easing[e.timingFunction] : e.timingFunction || this.easing[this.timingFunction]
                }
            }, t.prototype.onPropertyChanged = function(e, t) {}, t.prototype.getModuleName = function() {
                return "animation"
            }, t.prototype.destroy = function() {}, Xt([zt("FadeIn")], t.prototype, "name", void 0), Xt([zt(400)], t.prototype, "duration", void 0), Xt([zt("ease")], t.prototype, "timingFunction", void 0), Xt([zt(0)], t.prototype, "delay", void 0), Xt([_t()], t.prototype, "progress", void 0), Xt([_t()], t.prototype, "begin", void 0), Xt([_t()], t.prototype, "end", void 0), Xt([_t()], t.prototype, "fail", void 0), t = i = Xt([Gt], t)
        }(It);

    function Jt(e, t, i) {
        var n = function(e) {
            return {
                selector: e && e.selector ? e.selector : null,
                ignore: e && e.ignore ? e.ignore : null,
                rippleFlag: e && e.rippleFlag,
                isCenterRipple: e && e.isCenterRipple,
                duration: e && e.duration ? e.duration : 350
            }
        }(t);
        return !1 === n.rippleFlag || void 0 === n.rippleFlag && !ii ? Function : (e.setAttribute("data-ripple", "true"), ye.add(e, "mousedown", Zt, {
            parent: e,
            rippleOptions: n
        }), ye.add(e, "mouseup", $t, {
            parent: e,
            rippleOptions: n,
            done: i
        }), ye.add(e, "mouseleave", ei, {
            parent: e,
            rippleOptions: n
        }), me.isPointer && ye.add(e, "transitionend", ei, {
            parent: e,
            rippleOptions: n
        }), function() {
            e.removeAttribute("data-ripple"), ye.remove(e, "mousedown", Zt), ye.remove(e, "mouseup", $t), ye.remove(e, "mouseleave", ei), ye.remove(e, "transitionend", ei)
        })
    }

    function Zt(e) {
        var t = e.target,
            i = this.rippleOptions.selector,
            n = i ? Tt(t, i) : t;
        if (!(!n || this.rippleOptions && Tt(t, this.rippleOptions.ignore))) {
            var r = n.getBoundingClientRect(),
                o = e.pageX - document.body.scrollLeft,
                s = e.pageY - (!document.body.scrollTop && document.documentElement ? document.documentElement.scrollTop : document.body.scrollTop),
                a = Math.max(Math.abs(o - r.left), Math.abs(o - r.right)),
                l = Math.max(Math.abs(s - r.top), Math.abs(s - r.bottom)),
                h = Math.sqrt(a * a + l * l),
                p = 2 * h + "px",
                d = o - r.left - h,
                c = s - r.top - h;
            this.rippleOptions && this.rippleOptions.isCenterRipple && (d = 0, c = 0, p = "100%"), n.classList.add("e-ripple");
            var u = ct("div", {
                className: "e-ripple-element",
                styles: "width: " + p + ";height: " + p + ";left: " + d + "px;top: " + c + "px;transition-duration: " + this.rippleOptions.duration.toString() + "ms;"
            });
            n.appendChild(u), window.getComputedStyle(u).getPropertyValue("opacity"), u.style.transform = "scale(1)", n !== this.parent && ye.add(n, "mouseleave", ei, {
                parent: this.parent,
                rippleOptions: this.rippleOptions
            })
        }
    }

    function $t(e) {
        ti(e, this)
    }

    function ei(e) {
        ti(e, this)
    }

    function ti(e, t) {
        var i = t.rippleOptions.duration,
            n = e.target,
            r = t.rippleOptions.selector,
            o = r ? Tt(n, r) : n;
        if (o && (!o || -1 !== o.className.indexOf("e-ripple"))) {
            var s = kt(".e-ripple-element", o),
                a = s[s.length - 1];
            a && (a.style.opacity = "0.5"), t.parent !== o && ye.remove(o, "mouseleave", ei), setTimeout((function() {
                a && a.parentNode && a.parentNode.removeChild(a), o.getElementsByClassName("e-ripple-element").length || o.classList.remove("e-ripple"), t.done && t.done(e)
            }), i)
        }
    }
    var ii = !1;
    var ni, ri = function() {
            function e(e) {
                this.loadedModules = [], this.parent = e
            }
            return e.prototype.inject = function(e, t) {
                var i = e.length;
                if (0 !== i) {
                    this.loadedModules.length && this.clearUnusedModule(e);
                    for (var n = 0; n < i; n++)
                        for (var r = e[n], o = 0, a = t; o < a.length; o++) {
                            var h = a[o],
                                p = r.member;
                            if (h.prototype.getModuleName() === r.member && !this.isModuleLoaded(p)) {
                                var d = s(h, r.args),
                                    c = this.getMemberName(p);
                                r.isProperty ? l(c, h, this.parent) : l(c, d, this.parent);
                                var u = r;
                                u.member = c, this.loadedModules.push(u)
                            }
                        }
                } else this.clean()
            }, e.prototype.clean = function() {
                for (var e = 0, t = this.loadedModules; e < t.length; e++) {
                    var i = t[e];
                    i.isProperty || a(i.member, this.parent).destroy()
                }
                this.loadedModules = []
            }, e.prototype.clearUnusedModule = function(e) {
                for (var t = this, i = e.map((function(e) {
                        return t.getMemberName(e.member)
                    })), n = 0, r = this.loadedModules.filter((function(e) {
                        return -1 === i.indexOf(e.member)
                    })); n < r.length; n++) {
                    var o = r[n];
                    o.isProperty || a(o.member, this.parent).destroy(), this.loadedModules.splice(this.loadedModules.indexOf(o), 1), h(this.parent, o.member)
                }
            }, e.prototype.getMemberName = function(e) {
                return e[0].toLowerCase() + e.substring(1) + "Module"
            }, e.prototype.isModuleLoaded = function(e) {
                for (var t = 0, i = this.loadedModules; t < i.length; t++) {
                    if (i[t].member === this.getMemberName(e)) return !0
                }
                return !1
            }, e
        }(),
        oi = function() {
            function e(e, t, i, n) {
                this.isComplexArraySetter = !1, this.properties = {}, this.changedProperties = {}, this.childChangedProperties = {}, this.oldProperties = {}, this.finalUpdate = function() {}, this.callChildDataBind = a("callChildDataBind", It), this.parentObj = e, this.controlParent = this.parentObj.controlParent || this.parentObj, this.propName = t, this.isParentArray = n, this.setProperties(i, !0)
            }
            return e.prototype.updateChange = function(e, t) {
                !0 === e ? this.parentObj.childChangedProperties[t] = e : delete this.parentObj.childChangedProperties[t], this.parentObj.updateChange && this.parentObj.updateChange(e, this.parentObj.propName)
            }, e.prototype.updateTimeOut = function() {
                if (this.parentObj.updateTimeOut) this.parentObj.finalUpdate(), this.parentObj.updateTimeOut();
                else {
                    var e = setTimeout(this.parentObj.dataBind.bind(this.parentObj));
                    this.finalUpdate = function() {
                        clearTimeout(e)
                    }
                }
            }, e.prototype.clearChanges = function() {
                this.finalUpdate(), this.updateChange(!1, this.propName), this.oldProperties = {}, this.changedProperties = {}
            }, e.prototype.setProperties = function(e, t) {
                !0 === t ? (c(this, e), this.updateChange(!1, this.propName), this.clearChanges()) : c(this, e)
            }, e.prototype.dataBind = function() {
                if (this.callChildDataBind(this.childChangedProperties, this), this.isParentArray) {
                    var e = this.parentObj[this.propName].indexOf(this);
                    Object.keys(this.changedProperties).length && (l(this.propName + "." + e, this.changedProperties, this.parentObj.changedProperties), l(this.propName + "." + e, this.oldProperties, this.parentObj.oldProperties))
                } else this.parentObj.changedProperties[this.propName] = this.changedProperties, this.parentObj.oldProperties[this.propName] = this.oldProperties;
                this.clearChanges()
            }, e.prototype.saveChanges = function(e, t, i, n) {
                this.controlParent.isProtectedOnChange || (n || this.serverDataBind(e, t, !0), this.oldProperties[e] = i, this.changedProperties[e] = t, this.updateChange(!0, this.propName), this.finalUpdate(), this.updateTimeOut())
            }, e.prototype.serverDataBind = function(e, t, i, n) {
                if (S() && !this.parentObj.isComplexArraySetter) {
                    var r, o = {},
                        s = i ? this.getParentKey(!0) + "." + e : e;
                    if (-1 !== s.indexOf(".")) {
                        var a = s.split(".");
                        r = o;
                        for (var l = 0; l < a.length; l++) {
                            var h = l === a.length - 1;
                            r[a[l]] = h ? t : {}, r = h ? r : r[a[l]]
                        }
                    } else o[s] = {}, r = o[s], o[s][e] = t;
                    if (this.isParentArray) {
                        r.ejsAction = n || "none"
                    }
                    this.controlParent.serverDataBind(o)
                }
            }, e.prototype.getParentKey = function(e) {
                var t = "",
                    i = this.propName;
                if (this.isParentArray) {
                    t = this.parentObj[this.propName].indexOf(this);
                    var n = this.parentObj[this.propName].length;
                    n = e ? n : n > 0 ? n - 1 : 0, i += t = -1 !== t ? "-" + t : "-" + n
                }
                return this.controlParent !== this.parentObj && (i = this.parentObj.getParentKey() + "." + this.propName + t), i
            }, e
        }(),
        si = function() {
            var e = function(t, i) {
                return (e = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(e, t) {
                        e.__proto__ = t
                    } || function(e, t) {
                        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                    })(t, i)
            };
            return function(t, i) {
                function n() {
                    this.constructor = t
                }
                e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
            }
        }(),
        ai = function(e, t, i, n) {
            var r, o = arguments.length,
                s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
            else
                for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
            return o > 3 && s && Object.defineProperty(t, i, s), s
        },
        li = 0,
        hi = 0,
        pi = function(e) {
            function t(t, i) {
                var n = e.call(this, t, i) || this;
                return n.randomId = function() {
                    if ("undefined" != typeof window) {
                        var e = new Uint16Array(5);
                        return (window.msCrypto || window.crypto).getRandomValues(e)
                    }
                }(), n.isStringTemplate = !1, n.needsID = !1, n.isReactHybrid = !1, g(n.enableRtl) && n.setProperties({
                    enableRtl: Y
                }, !0), g(n.locale) && n.setProperties({
                    locale: Q
                }, !0), n.moduleLoader = new ri(n), n.localObserver = new U(n), K.on("notifyExternalChange", n.detectFunction, n, n.randomId), f(i) || n.appendTo(), n
            }
            return si(t, e), t.prototype.requiredModules = function() {
                return []
            }, t.prototype.destroy = function() {
                this.isDestroyed || (this.enablePersistence && this.setPersistData(), this.localObserver.destroy(), this.refreshing || (gt([this.element], ["e-control"]), this.trigger("destroyed", {
                    cancel: !1
                }), e.prototype.destroy.call(this), this.moduleLoader.clean(), K.off("notifyExternalChange", this.detectFunction, this.randomId)))
            }, t.prototype.refresh = function() {
                this.refreshing = !0, this.moduleLoader.clean(), this.destroy(), this.clearChanges(), this.localObserver = new U(this), this.preRender(), this.injectModules(), this.render(), this.refreshing = !1
            }, t.prototype.accessMount = function() {
                this.mount && !this.isReactHybrid && this.mount()
            }, t.prototype.getRootElement = function() {
                return this.isReactHybrid ? this.actualElement : this.element
            }, t.prototype.appendTo = function(t) {
                if (g(t) || "string" != typeof t ? g(t) || (this.element = t) : this.element = document.querySelector(t), !g(this.element)) {
                    var i = "e-" + this.getModuleName().toLowerCase();
                    ut([this.element], ["e-control", i]), this.isProtectedOnChange = !1, this.needsID && !this.element.id && (this.element.id = this.getUniqueID(this.getModuleName())), this.enablePersistence && (this.mergePersistData(), window.addEventListener("unload", this.setPersistData.bind(this)));
                    var n = a("ej2_instances", this.element);
                    n && -1 !== n.indexOf(this) || e.prototype.addInstance.call(this), this.preRender(), this.injectModules(), this.render(), this.mount ? this.accessMount() : this.trigger("created")
                }
            }, t.prototype.renderComplete = function(e) {
                if (S()) {
                    window.sfBlazor.renderComplete(this.element, e)
                }
                this.isRendered = !0
            }, t.prototype.dataBind = function() {
                this.injectModules(), e.prototype.dataBind.call(this)
            }, t.prototype.on = function(e, t, i) {
                if ("string" == typeof e) this.localObserver.on(e, t, i);
                else
                    for (var n = 0, r = e; n < r.length; n++) {
                        var o = r[n];
                        this.localObserver.on(o.event, o.handler, o.context)
                    }
            }, t.prototype.off = function(e, t) {
                if ("string" == typeof e) this.localObserver.off(e, t);
                else
                    for (var i = 0, n = e; i < n.length; i++) {
                        var r = n[i];
                        this.localObserver.off(r.event, r.handler)
                    }
            }, t.prototype.notify = function(e, t) {
                !0 !== this.isDestroyed && this.localObserver.notify(e, t)
            }, t.prototype.getInjectedModules = function() {
                return this.injectedModules
            }, t.Inject = function() {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                this.prototype.injectedModules || (this.prototype.injectedModules = []);
                for (var i = 0; i < e.length; i++) - 1 === this.prototype.injectedModules.indexOf(e[i]) && this.prototype.injectedModules.push(e[i])
            }, t.prototype.createElement = function(e, t, i) {
                return i && this.isReactHybrid ? (t && (t = {}), t["data-id"] = _e(), Ye.createElement(e, t)) : ct(e, t)
            }, t.prototype.triggerStateChange = function(e, t) {
                this.isReactHybrid && (this.setState(), this.currentContext = {
                    calls: e,
                    args: t
                })
            }, t.prototype.injectModules = function() {
                this.injectedModules && this.injectedModules.length && this.moduleLoader.inject(this.requiredModules(), this.injectedModules)
            }, t.prototype.detectFunction = function(e) {
                var t = Object.keys(e);
                t.length && (this[t[0]] = e[t[0]])
            }, t.prototype.mergePersistData = function() {
                var e = window.localStorage.getItem(this.getModuleName() + this.element.id);
                g(e) || "" === e || this.setProperties(JSON.parse(e), !0)
            }, t.prototype.setPersistData = function() {
                this.isDestroyed || window.localStorage.setItem(this.getModuleName() + this.element.id, this.getPersistData())
            }, t.prototype.renderReactTemplates = function() {}, t.prototype.clearTemplate = function(e, t) {}, t.prototype.getUniqueID = function(e) {
                return this.isHistoryChanged() && (li = 0), ni = this.pageID(location.href), hi = history.length, e + "_" + ni + "_" + li++
            }, t.prototype.pageID = function(e) {
                var t = 0;
                if (0 === e.length) return t;
                for (var i = 0; i < e.length; i++) {
                    t = (t << 5) - t + e.charCodeAt(i), t &= t
                }
                return Math.abs(t)
            }, t.prototype.isHistoryChanged = function() {
                return ni !== this.pageID(location.href) || hi !== history.length
            }, t.prototype.addOnPersist = function(e) {
                for (var t = this, i = {}, n = 0, r = e; n < r.length; n++) {
                    var o, s = r[n];
                    f(o = a(s, this)) || l(s, this.getActualProperties(o), i)
                }
                return JSON.stringify(i, (function(e, i) {
                    return t.getActualProperties(i)
                }))
            }, t.prototype.getActualProperties = function(e) {
                return e instanceof oi ? a("properties", e) : e
            }, t.prototype.ignoreOnPersist = function(e) {
                return JSON.stringify(this.iterateJsonProperties(this.properties, e))
            }, t.prototype.iterateJsonProperties = function(e, t) {
                for (var i = {}, n = function(n) {
                        if (-1 === t.indexOf(n)) {
                            var o = e[n];
                            if ("object" != typeof o || o instanceof Array) i[n] = o;
                            else {
                                var s = t.filter((function(e) {
                                    return new RegExp(n + ".").test(e)
                                })).map((function(e) {
                                    return e.replace(n + ".", "")
                                }));
                                i[n] = r.iterateJsonProperties(r.getActualProperties(o), s)
                            }
                        }
                    }, r = this, o = 0, s = Object.keys(e); o < s.length; o++) {
                    n(s[o])
                }
                return i
            }, ai([zt(!1)], t.prototype, "enablePersistence", void 0), ai([zt()], t.prototype, "enableRtl", void 0), ai([zt()], t.prototype, "locale", void 0), t = ai([Gt], t)
        }(It);
    "undefined" != typeof window && window.addEventListener("popstate", (function() {
        li = 0
    }));
    var di = function() {
            var e = function(t, i) {
                return (e = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(e, t) {
                        e.__proto__ = t
                    } || function(e, t) {
                        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                    })(t, i)
            };
            return function(t, i) {
                function n() {
                    this.constructor = t
                }
                e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
            }
        }(),
        ci = function(e, t, i, n) {
            var r, o = arguments.length,
                s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
            else
                for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
            return o > 3 && s && Object.defineProperty(t, i, s), s
        },
        ui = {
            left: 0,
            top: 0,
            bottom: 0,
            right: 0
        },
        gi = {
            isDragged: !1
        },
        fi = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return di(t, e), ci([zt(0)], t.prototype, "left", void 0), ci([zt(0)], t.prototype, "top", void 0), t
        }(oi),
        mi = function(e) {
            function t(t, n) {
                var r = e.call(this, n, t) || this;
                return r.dragLimit = i.getDefaultPosition(), r.borderWidth = i.getDefaultPosition(), r.padding = i.getDefaultPosition(), r.diffX = 0, r.prevLeft = 0, r.prevTop = 0, r.dragProcessStarted = !1, r.tapHoldTimer = 0, r.externalInitialize = !1, r.diffY = 0, r.parentScrollX = 0, r.parentScrollY = 0, r.droppables = {}, r.bind(), r
            }
            var i;
            return di(t, e), i = t, t.prototype.bind = function() {
                this.toggleEvents(), me.isIE && ut([this.element], "e-block-touch"), this.droppables[this.scope] = {}
            }, t.getDefaultPosition = function() {
                return u({}, ui)
            }, t.prototype.toggleEvents = function(e) {
                var t;
                f(this.handle) || (t = xt(this.handle, this.element));
                var i = this.enableTapHold && me.isDevice && me.isTouch ? this.mobileInitialize : this.initialize;
                e ? ye.remove(t || this.element, me.touchStartEvent, i) : ye.add(t || this.element, me.touchStartEvent, i, this)
            }, t.prototype.mobileInitialize = function(e) {
                var t = this,
                    i = e.currentTarget;
                this.tapHoldTimer = setTimeout((function() {
                    t.externalInitialize = !0, t.removeTapholdTimer(), t.initialize(e, i)
                }), this.tapHoldThreshold), ye.add(document, me.touchMoveEvent, this.removeTapholdTimer, this), ye.add(document, me.touchEndEvent, this.removeTapholdTimer, this)
            }, t.prototype.removeTapholdTimer = function() {
                clearTimeout(this.tapHoldTimer), ye.remove(document, me.touchMoveEvent, this.removeTapholdTimer), ye.remove(document, me.touchEndEvent, this.removeTapholdTimer)
            }, t.prototype.getScrollableParent = function(e, t) {
                return g(e) ? null : e[{
                    vertical: "scrollHeight",
                    horizontal: "scrollWidth"
                } [t]] > e[{
                    vertical: "clientHeight",
                    horizontal: "clientWidth"
                } [t]] && ("vertical" === t ? e.scrollTop > 0 : e.scrollLeft > 0) ? ("vertical" === t ? this.parentScrollY = this.parentScrollY + (0 === this.parentScrollY ? e.scrollTop : e.scrollTop - this.parentScrollY) : this.parentScrollX = this.parentScrollX + (0 === this.parentScrollX ? e.scrollLeft : e.scrollLeft - this.parentScrollX), g(e) ? e : this.getScrollableParent(e.parentNode, t)) : this.getScrollableParent(e.parentNode, t)
            }, t.prototype.getScrollableValues = function() {
                this.parentScrollX = 0, this.parentScrollY = 0;
                this.element.classList.contains("e-dialog") && this.element.classList.contains("e-dlg-modal"), this.getScrollableParent(this.element.parentNode, "vertical"), this.getScrollableParent(this.element.parentNode, "horizontal")
            }, t.prototype.initialize = function(e, t) {
                if (this.currentStateTarget = e.target, !this.isDragStarted()) {
                    if (this.isDragStarted(!0), this.externalInitialize = !1, this.target = e.currentTarget || t, this.dragProcessStarted = !1, this.abort) {
                        var i = this.abort;
                        "string" == typeof i && (i = [i]);
                        for (var n = 0; n < i.length; n++)
                            if (!g(Tt(e.target, i[n]))) return void(this.isDragStarted() && this.isDragStarted(!0))
                    }
                    this.preventDefault && !f(e.changedTouches) && "touchstart" !== e.type && e.preventDefault(), this.element.setAttribute("aria-grabbed", "true");
                    var r = this.getCoordinates(e);
                    if (this.initialPosition = {
                            x: r.pageX,
                            y: r.pageY
                        }, !this.clone) {
                        var o = this.element.getBoundingClientRect();
                        this.getScrollableValues(), e.clientX === e.pageX && (this.parentScrollX = 0), e.clientY === e.pageY && (this.parentScrollY = 0), this.relativeXPosition = r.pageX - (o.left + this.parentScrollX), this.relativeYPosition = r.pageY - (o.top + this.parentScrollY)
                    }
                    this.externalInitialize ? this.intDragStart(e) : (ye.add(document, me.touchMoveEvent, this.intDragStart, this), ye.add(document, me.touchEndEvent, this.intDestroy, this)), this.toggleEvents(!0), document.body.classList.add("e-prevent-select"), this.externalInitialize = !1, ye.trigger(document.documentElement, me.touchStartEvent, e)
                }
            }, t.prototype.intDragStart = function(e) {
                this.removeTapholdTimer();
                var t = !f(e.changedTouches);
                if (!t || 1 === e.changedTouches.length) {
                    t && e.preventDefault();
                    var i, n = this.getCoordinates(e),
                        r = getComputedStyle(this.element);
                    this.margin = {
                        left: parseInt(r.marginLeft, 10),
                        top: parseInt(r.marginTop, 10),
                        right: parseInt(r.marginRight, 10),
                        bottom: parseInt(r.marginBottom, 10)
                    };
                    var o = this.element;
                    if (this.clone && this.dragTarget) {
                        var s = Tt(e.target, this.dragTarget);
                        g(s) || (o = s)
                    }
                    this.isReplaceDragEle && (o = this.currentStateCheck(e.target, o)), this.offset = this.calculateParentPosition(o), this.position = this.getMousePosition(e, this.isDragScroll);
                    var a = this.initialPosition.x - n.pageX,
                        l = this.initialPosition.y - n.pageY;
                    if (Math.sqrt(a * a + l * l) >= this.distance || this.externalInitialize) {
                        var h = this.getHelperElement(e);
                        if (!h || g(h)) return;
                        var p = this.helperElement = h;
                        if (this.parentClientRect = this.calculateParentPosition(p.offsetParent), this.dragStart) {
                            var d = {
                                event: e,
                                element: o,
                                target: this.getProperTargetElement(e),
                                bindEvents: S() ? this.bindDragEvents.bind(this) : null,
                                dragElement: p
                            };
                            this.trigger("dragStart", d)
                        }
                        this.dragArea ? this.setDragArea() : (this.dragLimit = {
                            left: 0,
                            right: 0,
                            bottom: 0,
                            top: 0
                        }, this.borderWidth = {
                            top: 0,
                            left: 0
                        }), i = {
                            left: this.position.left - this.parentClientRect.left,
                            top: this.position.top - this.parentClientRect.top
                        }, this.clone && !this.enableTailMode && (this.diffX = this.position.left - this.offset.left, this.diffY = this.position.top - this.offset.top), this.getScrollableValues();
                        var c = this.getProcessedPositionValue({
                            top: i.top - this.diffY - (this.clone ? 0 : this.parentScrollY) + "px",
                            left: i.left - this.diffX - (this.clone ? 0 : this.parentScrollX) + "px"
                        });
                        this.dragElePosition = {
                            top: i.top,
                            left: i.left
                        }, Dt(p, this.getDragPosition({
                            position: "absolute",
                            left: c.left,
                            top: c.top
                        })), ye.remove(document, me.touchMoveEvent, this.intDragStart), ye.remove(document, me.touchEndEvent, this.intDestroy), S() || this.bindDragEvents(p)
                    }
                }
            }, t.prototype.bindDragEvents = function(e) {
                mt(e) ? (ye.add(document, me.touchMoveEvent, this.intDrag, this), ye.add(document, me.touchEndEvent, this.intDragStop, this), this.setGlobalDroppables(!1, this.element, e)) : (this.toggleEvents(), document.body.classList.remove("e-prevent-select"))
            }, t.prototype.elementInViewport = function(e) {
                for (this.top = e.offsetTop, this.left = e.offsetLeft, this.width = e.offsetWidth, this.height = e.offsetHeight; e.offsetParent;) e = e.offsetParent, this.top += e.offsetTop, this.left += e.offsetLeft;
                return this.top >= window.pageYOffset && this.left >= window.pageXOffset && this.top + this.height <= window.pageYOffset + window.innerHeight && this.left + this.width <= window.pageXOffset + window.innerWidth
            }, t.prototype.getProcessedPositionValue = function(e) {
                return this.queryPositionInfo ? this.queryPositionInfo(e) : e
            }, t.prototype.calculateParentPosition = function(e) {
                if (g(e)) return {
                    left: 0,
                    top: 0
                };
                var t = e.getBoundingClientRect(),
                    i = getComputedStyle(e);
                return {
                    left: t.left + window.pageXOffset - parseInt(i.marginLeft, 10),
                    top: t.top + window.pageYOffset - parseInt(i.marginTop, 10)
                }
            }, t.prototype.intDrag = function(e) {
                if (f(e.changedTouches) || 1 === e.changedTouches.length) {
                    var t, i;
                    this.position = this.getMousePosition(e, this.isDragScroll);
                    var n = this.getDocumentWidthHeight("Height");
                    n < this.position.top && (this.position.top = n);
                    var r = this.getDocumentWidthHeight("Width");
                    if (r < this.position.left && (this.position.left = r), this.drag) {
                        var o = this.getProperTargetElement(e);
                        this.trigger("drag", {
                            event: e,
                            element: this.element,
                            target: o
                        })
                    }
                    var s = this.checkTargetElement(e);
                    if (s.target && s.instance) {
                        var a = !0;
                        this.hoverObject && (this.hoverObject.instance !== s.instance ? this.triggerOutFunction(e, s) : a = !1), a && (s.instance.dragData[this.scope] = this.droppables[this.scope], s.instance.intOver(e, s.target), this.hoverObject = s)
                    } else this.hoverObject && this.triggerOutFunction(e, s);
                    var l = this.droppables[this.scope].helper;
                    this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent);
                    var h = this.parentClientRect.left,
                        p = this.parentClientRect.top,
                        d = this.getCoordinates(e),
                        c = d.pageX,
                        u = d.pageY,
                        m = this.position.left - this.diffX,
                        y = this.position.top - this.diffY;
                    if (this.dragArea) {
                        var v = getComputedStyle(l);
                        if (this.pageX !== c || this.skipDistanceCheck) {
                            var b = l.offsetWidth + (parseFloat(v.marginLeft) + parseFloat(v.marginRight));
                            t = this.dragLimit.left > m && m > 0 ? this.dragLimit.left : this.dragLimit.right + window.pageXOffset < m + b && m > 0 ? m - (m - this.dragLimit.right) + window.pageXOffset - b : m < 0 ? this.dragLimit.left : m
                        }
                        if (this.pageY !== u || this.skipDistanceCheck) {
                            var w = l.offsetHeight + (parseFloat(v.marginTop) + parseFloat(v.marginBottom));
                            i = this.dragLimit.top > y && y > 0 ? this.dragLimit.top : this.dragLimit.bottom + window.pageYOffset < y + w && y > 0 ? y - (y - this.dragLimit.bottom) + window.pageYOffset - w : y < 0 ? this.dragLimit.top : y
                        }
                    } else t = m, i = y;
                    var C, S, x = p + this.borderWidth.top,
                        k = h + this.borderWidth.left;
                    this.dragProcessStarted && (g(i) && (i = this.prevTop), g(t) && (t = this.prevLeft)), this.dragArea ? (C = i - x < 0 ? this.dragLimit.top : i - x, S = t - k < 0 ? this.dragElePosition.left : t - k) : (C = i - x, S = t - k), this.clone || (C -= this.parentScrollY, S -= this.parentScrollX);
                    var T = this.getProcessedPositionValue({
                        top: C + "px",
                        left: S + "px"
                    });
                    Dt(l, this.getDragPosition(T)), !this.elementInViewport(l) && this.enableAutoScroll && this.helperElement.scrollIntoView(), this.dragProcessStarted = !0, this.prevLeft = t, this.prevTop = i, this.position.left = t, this.position.top = i, this.pageX = c, this.pageY = u
                }
            }, t.prototype.triggerOutFunction = function(e, t) {
                this.hoverObject.instance.intOut(e, t.target), this.hoverObject.instance.dragData[this.scope] = null, this.hoverObject = null
            }, t.prototype.getDragPosition = function(e) {
                var t = u({}, e);
                return this.axis && ("x" === this.axis ? delete t.top : "y" === this.axis && delete t.left), t
            }, t.prototype.getDocumentWidthHeight = function(e) {
                var t = document.body,
                    i = document.documentElement;
                return Math.max(t["scroll" + e], i["scroll" + e], t["offset" + e], i["offset" + e], i["client" + e])
            }, t.prototype.intDragStop = function(e) {
                if (this.dragProcessStarted = !1, f(e.changedTouches) || 1 === e.changedTouches.length) {
                    if (-1 !== ["touchend", "pointerup", "mouseup"].indexOf(e.type)) {
                        if (this.dragStop) {
                            var t = this.getProperTargetElement(e);
                            this.trigger("dragStop", {
                                event: e,
                                element: this.element,
                                target: t,
                                helper: this.helperElement
                            })
                        }
                        this.intDestroy(e)
                    } else this.element.setAttribute("aria-grabbed", "false");
                    var i = this.checkTargetElement(e);
                    i.target && i.instance && (i.instance.dragStopCalled = !0, i.instance.dragData[this.scope] = this.droppables[this.scope], i.instance.intDrop(e, i.target)), this.setGlobalDroppables(!0), document.body.classList.remove("e-prevent-select")
                }
            }, t.prototype.intDestroy = function(e) {
                this.dragProcessStarted = !1, this.toggleEvents(), document.body.classList.remove("e-prevent-select"), this.element.setAttribute("aria-grabbed", "false"), ye.remove(document, me.touchMoveEvent, this.intDragStart), ye.remove(document, me.touchEndEvent, this.intDragStop), ye.remove(document, me.touchEndEvent, this.intDestroy), ye.remove(document, me.touchMoveEvent, this.intDrag), this.isDragStarted() && this.isDragStarted(!0)
            }, t.prototype.onPropertyChanged = function(e, t) {}, t.prototype.getModuleName = function() {
                return "draggable"
            }, t.prototype.isDragStarted = function(e) {
                return e && (gi.isDragged = !gi.isDragged), gi.isDragged
            }, t.prototype.setDragArea = function() {
                var e, t, i, n = 0,
                    r = 0;
                if (i = "string" === typeof this.dragArea ? xt(this.dragArea) : this.dragArea) {
                    var o = i.getBoundingClientRect();
                    e = i.scrollWidth ? i.scrollWidth : o.right - o.left, t = i.scrollHeight ? i.scrollHeight : o.bottom - o.top;
                    for (var s = ["Top", "Left", "Bottom", "Right"], a = getComputedStyle(i), l = 0; l < s.length; l++) {
                        var h = s[l],
                            p = a["border" + h + "Width"],
                            d = a["padding" + h],
                            c = h.toLowerCase();
                        this.borderWidth[c] = isNaN(parseFloat(p)) ? 0 : parseFloat(p), this.padding[c] = isNaN(parseFloat(d)) ? 0 : parseFloat(d)
                    }
                    n = o.top, r = o.left, this.dragLimit.left = r + this.borderWidth.left + this.padding.left, this.dragLimit.top = i.offsetTop + this.borderWidth.top + this.padding.top, this.dragLimit.right = r + e - (this.borderWidth.right + this.padding.right), this.dragLimit.bottom = n + t - (this.borderWidth.bottom + this.padding.bottom)
                }
            }, t.prototype.getProperTargetElement = function(e) {
                var t, i = this.getCoordinates(e),
                    n = this.helperElement.style.pointerEvents || "";
                return v(e.target, this.helperElement) || -1 !== e.type.indexOf("touch") ? (this.helperElement.style.pointerEvents = "none", t = document.elementFromPoint(i.clientX, i.clientY), this.helperElement.style.pointerEvents = n) : t = this.isReplaceDragEle ? this.currentStateCheck(e.target) : e.target, t
            }, t.prototype.currentStateCheck = function(e, t) {
                return g(this.currentStateTarget) || this.currentStateTarget === e ? g(t) ? e : t : this.currentStateTarget
            }, t.prototype.getMousePosition = function(e, t) {
                var i, n, r = void 0 !== e.srcElement ? e.srcElement : e.target,
                    o = this.getCoordinates(e),
                    s = g(r.offsetParent);
                return t ? (i = this.clone ? o.pageX : o.pageX + (s ? 0 : r.offsetParent.scrollLeft) - this.relativeXPosition, n = this.clone ? o.pageY : o.pageY + (s ? 0 : r.offsetParent.scrollTop) - this.relativeYPosition) : (i = this.clone ? o.pageX : o.pageX + window.pageXOffset - this.relativeXPosition, n = this.clone ? o.pageY : o.pageY + window.pageYOffset - this.relativeYPosition), {
                    left: i - (this.margin.left + this.cursorAt.left),
                    top: n - (this.margin.top + this.cursorAt.top)
                }
            }, t.prototype.getCoordinates = function(e) {
                return e.type.indexOf("touch") > -1 ? e.changedTouches[0] : e
            }, t.prototype.getHelperElement = function(e) {
                var t;
                return this.clone ? this.helper ? t = this.helper({
                    sender: e,
                    element: this.target
                }) : (t = ct("div", {
                    className: "e-drag-helper e-block-touch",
                    innerHTML: "Draggable"
                }), document.body.appendChild(t)) : t = this.element, t
            }, t.prototype.setGlobalDroppables = function(e, t, i) {
                this.droppables[this.scope] = e ? null : {
                    draggable: t,
                    helper: i,
                    draggedElement: this.element
                }
            }, t.prototype.checkTargetElement = function(e) {
                var t = this.getProperTargetElement(e),
                    i = this.getDropInstance(t);
                if (!i && t && !g(t.parentNode)) {
                    var n = Tt(t.parentNode, ".e-droppable") || t.parentElement;
                    n && (i = this.getDropInstance(n))
                }
                return {
                    target: t,
                    instance: i
                }
            }, t.prototype.getDropInstance = function(e) {
                var t, i = e && e.ej2_instances;
                if (i)
                    for (var n = 0, r = i; n < r.length; n++) {
                        var o = r[n];
                        if ("droppable" === o.getModuleName()) {
                            t = o;
                            break
                        }
                    }
                return t
            }, t.prototype.destroy = function() {
                this.toggleEvents(!0), e.prototype.destroy.call(this)
            }, ci([qt({}, fi)], t.prototype, "cursorAt", void 0), ci([zt(!0)], t.prototype, "clone", void 0), ci([zt()], t.prototype, "dragArea", void 0), ci([zt()], t.prototype, "isDragScroll", void 0), ci([zt()], t.prototype, "isReplaceDragEle", void 0), ci([_t()], t.prototype, "drag", void 0), ci([_t()], t.prototype, "dragStart", void 0), ci([_t()], t.prototype, "dragStop", void 0), ci([zt(1)], t.prototype, "distance", void 0), ci([zt()], t.prototype, "handle", void 0), ci([zt()], t.prototype, "abort", void 0), ci([zt()], t.prototype, "helper", void 0), ci([zt("default")], t.prototype, "scope", void 0), ci([zt("")], t.prototype, "dragTarget", void 0), ci([zt()], t.prototype, "axis", void 0), ci([zt()], t.prototype, "queryPositionInfo", void 0), ci([zt(!1)], t.prototype, "enableTailMode", void 0), ci([zt(!1)], t.prototype, "skipDistanceCheck", void 0), ci([zt(!0)], t.prototype, "preventDefault", void 0), ci([zt(!1)], t.prototype, "enableAutoScroll", void 0), ci([zt(!1)], t.prototype, "enableTapHold", void 0), ci([zt(750)], t.prototype, "tapHoldThreshold", void 0), t = i = ci([Gt], t)
        }(It),
        yi = function() {
            var e = function(t, i) {
                return (e = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(e, t) {
                        e.__proto__ = t
                    } || function(e, t) {
                        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                    })(t, i)
            };
            return function(t, i) {
                function n() {
                    this.constructor = t
                }
                e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
            }
        }(),
        vi = function(e, t, i, n) {
            var r, o = arguments.length,
                s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
            else
                for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
            return o > 3 && s && Object.defineProperty(t, i, s), s
        },
        bi = function(e) {
            function t(t, i) {
                var n = e.call(this, i, t) || this;
                return n.mouseOver = !1, n.dragData = {}, n.dragStopCalled = !1, n.bind(), n
            }
            return yi(t, e), t.prototype.bind = function() {
                this.wireEvents()
            }, t.prototype.wireEvents = function() {
                ye.add(this.element, me.touchEndEvent, this.intDrop, this)
            }, t.prototype.onPropertyChanged = function(e, t) {}, t.prototype.getModuleName = function() {
                return "droppable"
            }, t.prototype.intOver = function(e, t) {
                if (!this.mouseOver) {
                    var i = this.dragData[this.scope];
                    this.trigger("over", {
                        event: e,
                        target: t,
                        dragData: i
                    }), this.mouseOver = !0
                }
            }, t.prototype.intOut = function(e, t) {
                this.mouseOver && (this.trigger("out", {
                    evt: e,
                    target: t
                }), this.mouseOver = !1)
            }, t.prototype.intDrop = function(e, t) {
                if (this.dragStopCalled) {
                    this.dragStopCalled = !1;
                    var i, n = !0,
                        r = this.dragData[this.scope],
                        o = !!r && (r.helper && mt(r.helper));
                    o && (i = this.isDropArea(e, r.helper, t), this.accept && (n = Rt(r.helper, this.accept))), o && this.drop && i.canDrop && n && this.trigger("drop", {
                        event: e,
                        target: i.target,
                        droppedElement: r.helper,
                        dragData: r
                    }), this.mouseOver = !1
                }
            }, t.prototype.isDropArea = function(e, t, i) {
                var n = {
                        canDrop: !0,
                        target: i || e.target
                    },
                    r = "touchend" === e.type;
                if (r || n.target === t) {
                    t.style.display = "none";
                    var o = r ? e.changedTouches[0] : e,
                        s = document.elementFromPoint(o.clientX, o.clientY);
                    n.canDrop = !1, n.canDrop = v(s, this.element), n.canDrop && (n.target = s), t.style.display = ""
                }
                return n
            }, t.prototype.destroy = function() {
                ye.remove(this.element, me.touchEndEvent, this.intDrop), e.prototype.destroy.call(this)
            }, vi([zt()], t.prototype, "accept", void 0), vi([zt("default")], t.prototype, "scope", void 0), vi([_t()], t.prototype, "drop", void 0), vi([_t()], t.prototype, "over", void 0), vi([_t()], t.prototype, "out", void 0), t = vi([Gt], t)
        }(It),
        wi = function() {
            var e = function(t, i) {
                return (e = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(e, t) {
                        e.__proto__ = t
                    } || function(e, t) {
                        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                    })(t, i)
            };
            return function(t, i) {
                function n() {
                    this.constructor = t
                }
                e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
            }
        }(),
        Ci = function(e, t, i, n) {
            var r, o = arguments.length,
                s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
            else
                for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
            return o > 3 && s && Object.defineProperty(t, i, s), s
        },
        Si = {
            backspace: 8,
            tab: 9,
            enter: 13,
            shift: 16,
            control: 17,
            alt: 18,
            pause: 19,
            capslock: 20,
            space: 32,
            escape: 27,
            pageup: 33,
            pagedown: 34,
            end: 35,
            home: 36,
            leftarrow: 37,
            uparrow: 38,
            rightarrow: 39,
            downarrow: 40,
            insert: 45,
            delete: 46,
            f1: 112,
            f2: 113,
            f3: 114,
            f4: 115,
            f5: 116,
            f6: 117,
            f7: 118,
            f8: 119,
            f9: 120,
            f10: 121,
            f11: 122,
            f12: 123,
            semicolon: 186,
            plus: 187,
            comma: 188,
            minus: 189,
            dot: 190,
            forwardslash: 191,
            graveaccent: 192,
            openbracket: 219,
            backslash: 220,
            closebracket: 221,
            singlequote: 222
        },
        xi = function(e) {
            function t(t, n) {
                var r = e.call(this, n, t) || this;
                return r.keyPressHandler = function(e) {
                    for (var t = e.altKey, n = e.ctrlKey, o = e.shiftKey, s = e.which, a = 0, l = Object.keys(r.keyConfigs); a < l.length; a++)
                        for (var h = l[a], p = 0, d = r.keyConfigs[h].split(","); p < d.length; p++) {
                            var c = d[p],
                                u = i.getKeyConfigData(c.trim());
                            t === u.altKey && n === u.ctrlKey && o === u.shiftKey && s === u.keyCode && (e.action = h, r.keyAction && r.keyAction(e))
                        }
                }, r.bind(), r
            }
            var i;
            return wi(t, e), i = t, t.prototype.destroy = function() {
                this.unwireEvents(), e.prototype.destroy.call(this)
            }, t.prototype.onPropertyChanged = function(e, t) {}, t.prototype.bind = function() {
                this.wireEvents()
            }, t.prototype.getModuleName = function() {
                return "keyboard"
            }, t.prototype.wireEvents = function() {
                this.element.addEventListener(this.eventName, this.keyPressHandler)
            }, t.prototype.unwireEvents = function() {
                this.element.removeEventListener(this.eventName, this.keyPressHandler)
            }, t.getKeyConfigData = function(e) {
                if (e in this.configCache) return this.configCache[e];
                var t = e.toLowerCase().split("+"),
                    n = {
                        altKey: -1 !== t.indexOf("alt"),
                        ctrlKey: -1 !== t.indexOf("ctrl"),
                        shiftKey: -1 !== t.indexOf("shift"),
                        keyCode: null
                    };
                return t[t.length - 1].length > 1 && Number(t[t.length - 1]) ? n.keyCode = Number(t[t.length - 1]) : n.keyCode = i.getKeyCode(t[t.length - 1]), i.configCache[e] = n, n
            }, t.getKeyCode = function(e) {
                return Si[e] || e.toUpperCase().charCodeAt(0)
            }, t.configCache = {}, Ci([zt({})], t.prototype, "keyConfigs", void 0), Ci([zt("keyup")], t.prototype, "eventName", void 0), Ci([_t()], t.prototype, "keyAction", void 0), t = i = Ci([Gt], t)
        }(It),
        ki = function() {
            function e(e, t, i) {
                this.controlName = e, this.localeStrings = t, this.setLocale(i || Q)
            }
            return e.prototype.setLocale = function(t) {
                var i = this.intGetControlConstant(e.locale, t);
                this.currentLocale = i || this.localeStrings
            }, e.load = function(e) {
                this.locale = u(this.locale, e, {}, !0)
            }, e.prototype.getConstant = function(e) {
                return g(this.currentLocale[e]) ? this.localeStrings[e] || "" : this.currentLocale[e]
            }, e.prototype.intGetControlConstant = function(e, t) {
                return e[t] ? e[t][this.controlName] : null
            }, e.locale = {}, e
        }(),
        Ti = function() {
            var e = function(t, i) {
                return (e = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(e, t) {
                        e.__proto__ = t
                    } || function(e, t) {
                        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                    })(t, i)
            };
            return function(t, i) {
                function n() {
                    this.constructor = t
                }
                e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
            }
        }(),
        Di = function(e, t, i, n) {
            var r, o = arguments.length,
                s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
            else
                for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
            return o > 3 && s && Object.defineProperty(t, i, s), s
        },
        Ei = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return Ti(t, e), Di([zt(50)], t.prototype, "swipeThresholdDistance", void 0), t
        }(oi),
        Ri = /(Up|Down)/,
        Pi = function(e) {
            function t(t, i) {
                var n = e.call(this, i, t) || this;
                return n.touchAction = !0, n.tapCount = 0, n.startEvent = function(e) {
                    if (!0 === n.touchAction) {
                        var t = n.updateChangeTouches(e);
                        void 0 !== e.changedTouches && (n.touchAction = !1), n.isTouchMoved = !1, n.movedDirection = "", n.startPoint = n.lastMovedPoint = {
                            clientX: t.clientX,
                            clientY: t.clientY
                        }, n.startEventData = t, n.hScrollLocked = n.vScrollLocked = !1, n.tStampStart = Date.now(), n.timeOutTapHold = setTimeout((function() {
                            n.tapHoldEvent(e)
                        }), n.tapHoldThreshold), ye.add(n.element, me.touchMoveEvent, n.moveEvent, n), ye.add(n.element, me.touchEndEvent, n.endEvent, n), ye.add(n.element, me.touchCancelEvent, n.cancelEvent, n)
                    }
                }, n.moveEvent = function(e) {
                    var t = n.updateChangeTouches(e);
                    n.movedPoint = t, n.isTouchMoved = !(t.clientX === n.startPoint.clientX && t.clientY === n.startPoint.clientY);
                    var i = {};
                    n.isTouchMoved && (clearTimeout(n.timeOutTapHold), n.calcScrollPoints(e), i = u(i, {}, {
                        startEvents: n.startEventData,
                        originalEvent: e,
                        startX: n.startPoint.clientX,
                        startY: n.startPoint.clientY,
                        distanceX: n.distanceX,
                        distanceY: n.distanceY,
                        scrollDirection: n.scrollDirection,
                        velocity: n.getVelocity(t)
                    }), n.trigger("scroll", i), n.lastMovedPoint = {
                        clientX: t.clientX,
                        clientY: t.clientY
                    })
                }, n.cancelEvent = function(e) {
                    clearTimeout(n.timeOutTapHold), clearTimeout(n.timeOutTap), n.tapCount = 0, n.swipeFn(e), ye.remove(n.element, me.touchCancelEvent, n.cancelEvent)
                }, n.endEvent = function(e) {
                    n.swipeFn(e), n.isTouchMoved || "function" == typeof n.tap && (n.trigger("tap", {
                        originalEvent: e,
                        tapCount: ++n.tapCount
                    }), n.timeOutTap = setTimeout((function() {
                        n.tapCount = 0
                    }), n.tapThreshold)), n.modeclear()
                }, n.swipeFn = function(e) {
                    clearTimeout(n.timeOutTapHold), clearTimeout(n.timeOutTap);
                    var t = n.updateChangeTouches(e),
                        i = t.clientX - n.startPoint.clientX,
                        r = t.clientY - n.startPoint.clientY;
                    i = Math.floor(i < 0 ? -1 * i : i), r = Math.floor(r < 0 ? -1 * r : i), n.isTouchMoved = i > 1 || r > 1, n.endPoint = t, n.calcPoints(e);
                    var o = {
                        originalEvent: e,
                        startEvents: n.startEventData,
                        startX: n.startPoint.clientX,
                        startY: n.startPoint.clientY,
                        distanceX: n.distanceX,
                        distanceY: n.distanceY,
                        swipeDirection: n.movedDirection,
                        velocity: n.getVelocity(t)
                    };
                    if (n.isTouchMoved) {
                        var s = void 0,
                            a = n.swipeSettings.swipeThresholdDistance;
                        s = u(s, n.defaultArgs, o);
                        var l = !1,
                            h = n.element,
                            p = n.isScrollable(h),
                            d = Ri.test(n.movedDirection);
                        (a < n.distanceX && !d || a < n.distanceY && d) && (l = !p || n.checkSwipe(h, d)), l && n.trigger("swipe", s)
                    }
                    n.modeclear()
                }, n.modeclear = function() {
                    n.modeClear = setTimeout((function() {
                        n.touchAction = !0
                    }), "function" != typeof n.tap ? 0 : 20), n.lastTapTime = (new Date).getTime(), ye.remove(n.element, me.touchMoveEvent, n.moveEvent), ye.remove(n.element, me.touchEndEvent, n.endEvent), ye.remove(n.element, me.touchCancelEvent, n.cancelEvent)
                }, n.bind(), n
            }
            return Ti(t, e), t.prototype.onPropertyChanged = function(e, t) {}, t.prototype.bind = function() {
                this.wireEvents(), me.isIE && this.element.classList.add("e-block-touch")
            }, t.prototype.destroy = function() {
                this.unwireEvents(), e.prototype.destroy.call(this)
            }, t.prototype.wireEvents = function() {
                ye.add(this.element, me.touchStartEvent, this.startEvent, this)
            }, t.prototype.unwireEvents = function() {
                ye.remove(this.element, me.touchStartEvent, this.startEvent)
            }, t.prototype.getModuleName = function() {
                return "touch"
            }, t.prototype.isScrollable = function(e) {
                var t = getComputedStyle(e),
                    i = t.overflow + t.overflowX + t.overflowY;
                return !!/(auto|scroll)/.test(i)
            }, t.prototype.tapHoldEvent = function(e) {
                var t;
                this.tapCount = 0, this.touchAction = !0, ye.remove(this.element, me.touchMoveEvent, this.moveEvent), ye.remove(this.element, me.touchEndEvent, this.endEvent), t = {
                    originalEvent: e
                }, this.trigger("tapHold", t), ye.remove(this.element, me.touchCancelEvent, this.cancelEvent)
            }, t.prototype.calcPoints = function(e) {
                var t = this.updateChangeTouches(e);
                this.defaultArgs = {
                    originalEvent: e
                }, this.distanceX = Math.abs(Math.abs(t.clientX) - Math.abs(this.startPoint.clientX)), this.distanceY = Math.abs(Math.abs(t.clientY) - Math.abs(this.startPoint.clientY)), this.distanceX > this.distanceY ? this.movedDirection = t.clientX > this.startPoint.clientX ? "Right" : "Left" : this.movedDirection = t.clientY < this.startPoint.clientY ? "Up" : "Down"
            }, t.prototype.calcScrollPoints = function(e) {
                var t = this.updateChangeTouches(e);
                this.defaultArgs = {
                    originalEvent: e
                }, this.distanceX = Math.abs(Math.abs(t.clientX) - Math.abs(this.lastMovedPoint.clientX)), this.distanceY = Math.abs(Math.abs(t.clientY) - Math.abs(this.lastMovedPoint.clientY)), (this.distanceX > this.distanceY || !0 === this.hScrollLocked) && !1 === this.vScrollLocked ? (this.scrollDirection = t.clientX > this.lastMovedPoint.clientX ? "Right" : "Left", this.hScrollLocked = !0) : (this.scrollDirection = t.clientY < this.lastMovedPoint.clientY ? "Up" : "Down", this.vScrollLocked = !0)
            }, t.prototype.getVelocity = function(e) {
                var t = e.clientX,
                    i = e.clientY,
                    n = Date.now(),
                    r = t - this.startPoint.clientX,
                    o = i - this.startPoint.clientX,
                    s = n - this.tStampStart;
                return Math.sqrt(r * r + o * o) / s
            }, t.prototype.checkSwipe = function(e, t) {
                var i = ["scroll", "offset"],
                    n = t ? ["Height", "Top"] : ["Width", "Left"];
                return e[i[0] + n[0]] <= e[i[1] + n[0]] || (0 === e[i[0] + n[1]] || e[i[1] + n[0]] + e[i[0] + n[1]] >= e[i[0] + n[0]])
            }, t.prototype.updateChangeTouches = function(e) {
                return e.changedTouches && 0 !== e.changedTouches.length ? e.changedTouches[0] : e
            }, Di([_t()], t.prototype, "tap", void 0), Di([_t()], t.prototype, "tapHold", void 0), Di([_t()], t.prototype, "swipe", void 0), Di([_t()], t.prototype, "scroll", void 0), Di([zt(350)], t.prototype, "tapThreshold", void 0), Di([zt(750)], t.prototype, "tapHoldThreshold", void 0), Di([qt({}, Ei)], t.prototype, "swipeSettings", void 0), t = Di([Gt], t)
        }(It),
        Ii = ["script", "style", "iframe[src]", 'link[href*="javascript:"]', 'object[type="text/x-scriptlet"]', 'object[data^="data:text/html;base64"]', 'img[src^="data:text/html;base64"]', '[src^="javascript:"]', '[dynsrc^="javascript:"]', '[lowsrc^="javascript:"]', '[type^="application/x-shockwave-flash"]'],
        Mi = [{
            attribute: "href",
            selector: '[href*="javascript:"]'
        }, {
            attribute: "background",
            selector: '[background^="javascript:"]'
        }, {
            attribute: "style",
            selector: '[style*="javascript:"]'
        }, {
            attribute: "style",
            selector: '[style*="expression("]'
        }, {
            attribute: "href",
            selector: 'a[href^="data:text/html;base64"]'
        }],
        Li = ["onchange", "onclick", "onmouseover", "onmouseout", "onkeydown", "onload", "onerror", "onblur", "onfocus", "onbeforeload", "onbeforeunload", "onkeyup", "onsubmit", "onafterprint", "onbeforeonload", "onbeforeprint", "onblur", "oncanplay", "oncanplaythrough", "onchange", "onclick", "oncontextmenu", "ondblclick", "ondrag", "ondragend", "ondragenter", "ondragleave", "ondragover", "ondragstart", "ondrop", "ondurationchange", "onemptied", "onended", "onerror", "onerror", "onfocus", "onformchange", "onforminput", "onhaschange", "oninput", "oninvalid", "onkeydown", "onkeypress", "onkeyup", "onload", "onloadeddata", "onloadedmetadata", "onloadstart", "onmessage", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "onmousewheel", "onoffline", "onoine", "ononline", "onpagehide", "onpageshow", "onpause", "onplay", "onplaying", "onpopstate", "onprogress", "onratechange", "onreadystatechange", "onredo", "onresize", "onscroll", "onseeked", "onseeking", "onselect", "onstalled", "onstorage", "onsubmit", "onsuspend", "ontimeupdate", "onundo", "onunload", "onvolumechange", "onwaiting", "onmouseenter", "onmouseleave", "onmousewheel", "onstart", "onpropertychange"],
        Oi = function() {
            function e() {}
            return e.beforeSanitize = function() {
                return {
                    selectors: {
                        tags: Ii,
                        attributes: Mi
                    }
                }
            }, e.sanitize = function(e) {
                var t = this.beforeSanitize();
                return this.serializeValue(t, e)
            }, e.serializeValue = function(e, t) {
                this.removeAttrs = e.selectors.attributes, this.removeTags = e.selectors.tags, this.wrapElement = document.createElement("div"), this.wrapElement.innerHTML = t, this.removeXssTags(), this.removeJsEvents(), this.removeXssAttrs();
                var i = this.wrapElement.innerHTML;
                return this.removeElement(), i
            }, e.removeElement = function() {
                for (var e = this.wrapElement.children, t = 0; t < e.length; t++)
                    for (var i = e[t].attributes, n = 0; n < i.length; n++) this.wrapElement.children[t].removeAttribute(i[n].localName)
            }, e.removeXssTags = function() {
                var e = this.wrapElement.querySelectorAll(this.removeTags.join(","));
                e.length > 0 && e.forEach((function(e) {
                    wt(e)
                }))
            }, e.removeJsEvents = function() {
                var e = this.wrapElement.querySelectorAll("[" + Li.join("],[") + "]");
                e.length > 0 && e.forEach((function(e) {
                    Li.forEach((function(t) {
                        e.hasAttribute(t) && e.removeAttribute(t)
                    }))
                }))
            }, e.removeXssAttrs = function() {
                var e = this;
                this.removeAttrs.forEach((function(t, i) {
                    var n = e.wrapElement.querySelectorAll(t.selector);
                    n.length > 0 && n.forEach((function(e) {
                        e.removeAttribute(t.attribute)
                    }))
                }))
            }, e
        }(),
        Ai = {},
        Bi = null,
        Fi = null;

    function Ni(e, t) {
        if (e.target) {
            var i, n = g(t) ? ct : t,
                r = function(e, t) {
                    var i = t("div", {});
                    i.classList.add("e-spinner-pane");
                    var n = t("div", {});
                    return n.classList.add("e-spinner-inner"), e.appendChild(i), i.appendChild(n), {
                        wrap: i,
                        inner_wrap: n
                    }
                }(e.target, n);
            if (g(e.cssClass) || r.wrap.classList.add(e.cssClass), g(e.template) && g(Bi)) {
                var o = g(e.type) ? function(e) {
                    return window.getComputedStyle(e, ":after").getPropertyValue("content").replace(/['"]+/g, "")
                }(r.wrap) : e.type;
                i = function(e, t) {
                    var i;
                    switch (t) {
                        case "Material":
                        case "Fabric":
                            i = 30;
                            break;
                        case "Bootstrap4":
                            i = 36;
                            break;
                        default:
                            i = 30
                    }
                    return e = e ? parseFloat(e + "") : i, "Bootstrap" === t ? e : e / 2
                }(g(e.width) ? void 0 : e.width, o), Hi(o, r.wrap, i, n), g(e.label) || function(e, t, i) {
                    var n = i("div", {});
                    n.classList.add("e-spin-label"), n.textContent = t, e.appendChild(n)
                }(r.inner_wrap, e.label, n)
            } else {
                var s = g(e.template) ? Bi : e.template;
                r.wrap.classList.add("e-spin-template"),
                    function(e, t, i) {
                        g(i) || e.classList.add(i);
                        e.querySelector(".e-spinner-inner").innerHTML = t
                    }(r.wrap, s, Fi)
            }
            r.wrap.classList.add("e-spin-hide"), r = null
        }
    }

    function Hi(e, t, i, n) {
        var r = t.querySelector(".e-spinner-inner"),
            o = r.querySelector("svg");
        switch (g(o) || r.removeChild(o), e) {
            case "Material":
                ! function(e, t, i) {
                    var n = Vi();
                    Ai[n] = {
                        timeOut: 0,
                        type: "Material",
                        radius: t
                    }, zi(e, n, i, "e-spin-material"), Wi(t, e, "Material", "e-spin-material")
                }(r, i, n);
                break;
            case "Fabric":
                ! function(e, t, i) {
                    var n = Vi();
                    Ai[n] = {
                        timeOut: 0,
                        type: "Fabric",
                        radius: t
                    }, ji(e, n, "e-spin-fabric", i), Ki(t, e, "e-spin-fabric")
                }(r, i, n);
                break;
            case "Bootstrap":
                ! function(e, t, i) {
                    var n = Vi();
                    Ai[n] = {
                            timeOut: 0,
                            type: "Bootstrap",
                            radius: t
                        },
                        function(e, t, i) {
                            var n = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                            n.setAttribute("id", t), n.setAttribute("class", "e-spin-bootstrap"), n.setAttribute("viewBox", "0 0 64 64"), e.insertBefore(n, e.firstChild);
                            for (var r = 0; r <= 7; r++) {
                                var o = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                                o.setAttribute("class", "e-path-circle_" + r), o.setAttribute("r", "2"), o.setAttribute("transform", "translate(32,32)"), n.appendChild(o)
                            }
                        }(e, n),
                        function(e, t) {
                            var i = e.querySelector("svg.e-spin-bootstrap");
                            i.style.width = i.style.height = t + "px";
                            for (var n = 90, r = 0; r <= 7; r++) {
                                var o = Yi(0, 0, 24, n),
                                    s = i.querySelector(".e-path-circle_" + r);
                                s.setAttribute("cx", o.x + ""), s.setAttribute("cy", o.y + ""), n = n >= 360 ? 0 : n, n += 45
                            }
                        }(e, t)
                }(r, i);
                break;
            case "HighContrast":
                ! function(e, t, i) {
                    var n = Vi();
                    Ai[n] = {
                        timeOut: 0,
                        type: "HighContrast",
                        radius: t
                    }, ji(e, n, "e-spin-high-contrast", i), Ki(t, e, "e-spin-high-contrast")
                }(r, i, n);
                break;
            case "Bootstrap4":
                ! function(e, t, i) {
                    var n = Vi();
                    Ai[n] = {
                        timeOut: 0,
                        type: "Bootstrap4",
                        radius: t
                    }, zi(e, n, i, "e-spin-bootstrap4"), Wi(t, e, "Bootstrap4", "e-spin-bootstrap4")
                }(r, i, n)
        }
    }

    function Vi() {
        for (var e = "", t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", i = 0; i < 5; i++) e += t.charAt(Math.floor(Math.random() * t.length));
        return e
    }

    function ji(e, t, i, n) {
        var r = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        r.setAttribute("id", t), r.setAttribute("class", i);
        var o = document.createElementNS("http://www.w3.org/2000/svg", "path");
        o.setAttribute("class", "e-path-circle");
        var s = document.createElementNS("http://www.w3.org/2000/svg", "path");
        s.setAttribute("class", "e-path-arc"), e.insertBefore(r, e.firstChild), r.appendChild(o), r.appendChild(s)
    }

    function zi(e, t, i, n) {
        var r = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        r.setAttribute("class", n), r.setAttribute("id", t);
        var o = document.createElementNS("http://www.w3.org/2000/svg", "path");
        o.setAttribute("class", "e-path-circle"), e.insertBefore(r, e.firstChild), r.appendChild(o)
    }

    function qi(e) {
        ! function(e, t, i, n, r, o, s) {
            var a = ++s.globalInfo[s.uniqueID].previousId,
                l = (new Date).getTime(),
                h = t - e,
                p = (u = 2 * s.globalInfo[s.uniqueID].radius + "", parseFloat(u)),
                d = _i(p),
                c = -90 * (s.globalInfo[s.uniqueID].count || 0);
            var u;
            ! function t(r) {
                var s = Math.max(0, Math.min((new Date).getTime() - l, n));
                ! function(e, t) {
                    if (!g(t.querySelector("svg.e-spin-material")) && !g(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))) {
                        var i = t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");
                        i.setAttribute("stroke-dashoffset", Gi(p, d, e, o) + ""), i.setAttribute("transform", "rotate(" + c + " " + p / 2 + " " + p / 2 + ")")
                    }
                }(i(s, e, h, n), r.container), a === r.globalInfo[r.uniqueID].previousId && s < n ? Ai[r.uniqueID].timeOut = setTimeout(t.bind(null, r), 1) : qi(r)
            }(s)
        }(1, 149, Ui, 1333, e.globalInfo[e.uniqueID].count, 75, e), e.globalInfo[e.uniqueID].count = ++e.globalInfo[e.uniqueID].count % 4
    }

    function Wi(e, t, i, n) {
        var r = 2 * e,
            o = t.querySelector("svg." + n),
            s = o.querySelector("path.e-path-circle"),
            a = _i(r),
            l = r / 2 + "px";
        o.setAttribute("viewBox", "0 0 " + r + " " + r), o.style.width = o.style.height = r + "px", o.style.transformOrigin = l + " " + l + " " + l, s.setAttribute("d", function(e, t) {
            var i = e / 2,
                n = t / 2;
            return "M" + i + "," + n + "A" + (i - n) + "," + (i - n) + " 0 1 1 " + n + "," + i
        }(r, a)), "Material" === i && (s.setAttribute("stroke-width", a + ""), s.setAttribute("stroke-dasharray", (r - a) * Math.PI * .75 + ""), s.setAttribute("stroke-dashoffset", Gi(r, a, 1, 75) + ""))
    }

    function _i(e) {
        return .1 * e
    }

    function Gi(e, t, i, n) {
        return (e - t) * Math.PI * (3 * n / 100 - i / 100)
    }

    function Ui(e, t, i, n) {
        var r = (e /= n) * e,
            o = r * e;
        return t + i * (6 * o * r + -15 * r * r + 10 * o)
    }

    function Ki(e, t, i) {
        var n = e,
            r = e,
            o = 2 * e,
            s = t.querySelector("." + i),
            a = s.querySelector(".e-path-circle"),
            l = s.querySelector(".e-path-arc"),
            h = o / 2 + "px";
        a.setAttribute("d", function(e, t, i) {
            return ["M", e, t, "m", -i, 0, "a", i, i, 0, 1, 0, 2 * i, 0, "a", i, i, 0, 1, 0, 2 * -i, 0].join(" ")
        }(n, r, e)), l.setAttribute("d", function(e, t, i, n, r) {
            var o = Yi(e, t, i, r),
                s = Yi(e, t, i, n);
            return ["M", o.x, o.y, "A", i, i, 0, 0, 0, s.x, s.y].join(" ")
        }(n, r, e, 315, 45)), s.setAttribute("viewBox", "0 0 " + o + " " + o), s.style.transformOrigin = h + " " + h + " " + h, s.style.width = s.style.height = o + "px"
    }

    function Yi(e, t, i, n) {
        var r = (n - 90) * Math.PI / 180;
        return {
            x: e + i * Math.cos(r),
            y: t + i * Math.sin(r)
        }
    }

    function Xi(e) {
        Qi(e, !1), e = null
    }

    function Qi(e, t) {
        var i;
        if (e && (i = e.classList.contains("e-spinner-pane") ? e : e.querySelector(".e-spinner-pane")), e && i) {
            var n = i.querySelector(".e-spinner-inner");
            if (t ? !i.classList.contains("e-spin-template") && !i.classList.contains("e-spin-hide") : !i.classList.contains("e-spin-template") && !i.classList.contains("e-spin-show")) {
                var r = i.querySelector("svg");
                if (g(r)) return;
                var o = r.getAttribute("id");
                switch (Ai[o].isAnimate = !t, Ai[o].type) {
                    case "Material":
                        t ? clearTimeout(Ai[o].timeOut) : function(e, t, i) {
                            var n = {};
                            Ai[t].timeOut = 0, n[t] = function(e, t, i, n) {
                                return {
                                    radius: t,
                                    count: i,
                                    previousId: n
                                }
                            }(0, i, 0, 0), qi({
                                uniqueID: t,
                                container: e,
                                globalInfo: n,
                                timeOutVar: 0
                            })
                        }(n, o, Ai[o].radius);
                        break;
                    case "Bootstrap":
                        t ? clearTimeout(Ai[o].timeOut) : function(e) {
                            for (var t, i, n, r, o, s = e.querySelector("svg.e-spin-bootstrap").getAttribute("id"), a = 1; a <= 8; a++) {
                                l(e.getElementsByClassName("e-path-circle_" + (8 === a ? 0 : a))[0], a, a, (t = void 0, i = void 0, n = void 0, r = void 0, o = void 0, t = [], n = a, r = !1, o = 1, function e(s) {
                                    t.push(s), (s !== n || 1 === o) && (s <= i && s > 1 && !r ? s = parseFloat((s - .2).toFixed(2)) : 1 === s ? (s = 7, s = parseFloat((s + .2).toFixed(2)), r = !0) : s < 8 && r ? 8 === (s = parseFloat((s + .2).toFixed(2))) && (r = !1) : s <= 8 && !r && (s = parseFloat((s - .2).toFixed(2))), ++o, e(s))
                                }(i = a), t), s)
                            }

                            function l(e, t, i, n, r) {
                                var o = 0;
                                ! function t(i) {
                                    Ai[r].isAnimate && (++o, e.setAttribute("r", i + ""), o >= n.length && (o = 0), Ai[r].timeOut = setTimeout(t.bind(null, n[o]), 18))
                                }(t)
                            }
                        }(n)
                }
            }
            t ? Et(i, ["e-spin-hide"], ["e-spin-show"]) : Et(i, ["e-spin-show"], ["e-spin-hide"]), e = null
        }
    }

    function Ji(e) {
        Qi(e, !0), e = null
    }
    var Zi, $i, en, tn, nn, rn, on = function() {
            function e(e) {
                return this.subQuery = null, this.isChild = !1, this.distincts = [], this.queries = [], this.key = "", this.fKey = "", "string" == typeof e ? this.fromTable = e : e && e instanceof Array && (this.lookups = e), this.expands = [], this.sortedColumns = [], this.groupedColumns = [], this.subQuery = null, this.isChild = !1, this.params = [], this.lazyLoad = [], this
            }
            return e.prototype.setKey = function(e) {
                return this.key = e, this
            }, e.prototype.using = function(e) {
                return this.dataManager = e, this
            }, e.prototype.execute = function(e, t, i, n) {
                return (e = e || this.dataManager) ? e.executeQuery(this, t, i, n) : wn.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')
            }, e.prototype.executeLocal = function(e) {
                return (e = e || this.dataManager) ? e.executeLocal(this) : wn.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')
            }, e.prototype.clone = function() {
                var t = new e;
                return t.queries = this.queries.slice(0), t.key = this.key, t.isChild = this.isChild, t.dataManager = this.dataManager, t.fromTable = this.fromTable, t.params = this.params.slice(0), t.expands = this.expands.slice(0), t.sortedColumns = this.sortedColumns.slice(0), t.groupedColumns = this.groupedColumns.slice(0), t.subQuerySelector = this.subQuerySelector, t.subQuery = this.subQuery, t.fKey = this.fKey, t.isCountRequired = this.isCountRequired, t.distincts = this.distincts.slice(0), t.lazyLoad = this.lazyLoad.slice(0), t
            }, e.prototype.from = function(e) {
                return this.fromTable = e, this
            }, e.prototype.addParams = function(e, t) {
                return "function" == typeof t ? this.params.push({
                    key: e,
                    fn: t
                }) : this.params.push({
                    key: e,
                    value: t
                }), this
            }, e.prototype.distinct = function(e) {
                return this.distincts = "string" == typeof e ? [].slice.call([e], 0) : e.slice(0), this
            }, e.prototype.expand = function(e) {
                return this.expands = "string" == typeof e ? [].slice.call([e], 0) : e.slice(0), this
            }, e.prototype.where = function(e, t, i, n, r) {
                t = t ? t.toLowerCase() : null;
                var o = null;
                return "string" == typeof e ? o = new sn(e, t, i, n, r) : e instanceof sn && (o = e), this.queries.push({
                    fn: "onWhere",
                    e: o
                }), this
            }, e.prototype.search = function(e, t, i, n, r) {
                "string" == typeof t && (t = [t]), i && "none" !== i || (i = "contains");
                var o = wn.fnOperators[i];
                return this.queries.push({
                    fn: "onSearch",
                    e: {
                        fieldNames: t,
                        operator: i,
                        searchKey: e,
                        ignoreCase: n,
                        ignoreAccent: r,
                        comparer: o
                    }
                }), this
            }, e.prototype.sortBy = function(e, t, i) {
                return this.sortByForeignKey(e, t, i)
            }, e.prototype.sortByForeignKey = function(t, i, n, r) {
                var o, s, a = g(r) ? "ascending" : r;
                if ("string" == typeof t && wn.endsWith(t.toLowerCase(), " desc") && (t = t.replace(/ desc$/i, ""), i = "descending"), i && "string" != typeof i || (a = i ? i.toLowerCase() : "ascending", i = wn.fnSort(i)), n) {
                    o = e.filterQueries(this.queries, "onSortBy");
                    for (var l = 0; l < o.length; l++)
                        if ("string" == typeof(s = o[l].e.fieldName)) {
                            if (s === t) return this
                        } else if (s instanceof Array)
                        for (var h = 0; h < s.length; h++)
                            if (s[h] === t || t.toLowerCase() === s[h] + " desc") return this
                }
                return this.queries.push({
                    fn: "onSortBy",
                    e: {
                        fieldName: t,
                        comparer: i,
                        direction: a
                    }
                }), this
            }, e.prototype.sortByDesc = function(e) {
                return this.sortBy(e, "descending")
            }, e.prototype.group = function(e, t, i) {
                return this.sortBy(e, null, !0), this.queries.push({
                    fn: "onGroup",
                    e: {
                        fieldName: e,
                        comparer: t || null,
                        format: i || null
                    }
                }), this
            }, e.prototype.page = function(e, t) {
                return this.queries.push({
                    fn: "onPage",
                    e: {
                        pageIndex: e,
                        pageSize: t
                    }
                }), this
            }, e.prototype.range = function(e, t) {
                return this.queries.push({
                    fn: "onRange",
                    e: {
                        start: e,
                        end: t
                    }
                }), this
            }, e.prototype.take = function(e) {
                return this.queries.push({
                    fn: "onTake",
                    e: {
                        nos: e
                    }
                }), this
            }, e.prototype.skip = function(e) {
                return this.queries.push({
                    fn: "onSkip",
                    e: {
                        nos: e
                    }
                }), this
            }, e.prototype.select = function(e) {
                return "string" == typeof e && (e = [].slice.call([e], 0)), this.queries.push({
                    fn: "onSelect",
                    e: {
                        fieldNames: e
                    }
                }), this
            }, e.prototype.hierarchy = function(e, t) {
                return this.subQuerySelector = t, this.subQuery = e, this
            }, e.prototype.foreignKey = function(e) {
                return this.fKey = e, this
            }, e.prototype.requiresCount = function() {
                return this.isCountRequired = !0, this
            }, e.prototype.aggregate = function(e, t) {
                return this.queries.push({
                    fn: "onAggregates",
                    e: {
                        field: t,
                        type: e
                    }
                }), this
            }, e.filterQueries = function(e, t) {
                return e.filter((function(e) {
                    return e.fn === t
                }))
            }, e.filterQueryLists = function(e, t) {
                for (var i = e.filter((function(e) {
                        return -1 !== t.indexOf(e.fn)
                    })), n = {}, r = 0; r < i.length; r++) n[i[r].fn] || (n[i[r].fn] = i[r].e);
                return n
            }, e
        }(),
        sn = function() {
            function e(t, i, n, r, o) {
                return void 0 === r && (r = !1), this.ignoreAccent = !1, this.isComplex = !1, "string" == typeof t ? (this.field = t, this.operator = i.toLowerCase(), this.value = n, this.ignoreCase = r, this.ignoreAccent = o, this.isComplex = !1, this.comparer = wn.fnOperators.processOperator(this.operator)) : (t instanceof e && n instanceof e || n instanceof Array) && (this.isComplex = !0, this.condition = i.toLowerCase(), this.predicates = [t], n instanceof Array ? [].push.apply(this.predicates, n) : this.predicates.push(n)), this
            }
            return e.and = function() {
                for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
                return e.combinePredicates([].slice.call(t, 0), "and")
            }, e.prototype.and = function(t, i, n, r, o) {
                return e.combine(this, t, i, n, "and", r, o)
            }, e.or = function() {
                for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
                return e.combinePredicates([].slice.call(t, 0), "or")
            }, e.prototype.or = function(t, i, n, r, o) {
                return e.combine(this, t, i, n, "or", r, o)
            }, e.fromJson = function(e) {
                if (e instanceof Array) {
                    for (var t = [], i = 0, n = e.length; i < n; i++) t.push(this.fromJSONData(e[i]));
                    return t
                }
                var r = e;
                return this.fromJSONData(r)
            }, e.prototype.validate = function(e) {
                var t, i, n = this.predicates ? this.predicates : [];
                if (!this.isComplex && this.comparer) return this.comparer.call(this, wn.getObject(this.field, e), this.value, this.ignoreCase, this.ignoreAccent);
                t = "and" === this.condition;
                for (var r = 0; r < n.length; r++)
                    if (i = n[r].validate(e), t) {
                        if (!i) return !1
                    } else if (i) return !0;
                return t
            }, e.prototype.toJson = function() {
                var e, t;
                if (this.isComplex) {
                    e = [], t = this.predicates;
                    for (var i = 0; i < t.length; i++) e.push(t[i].toJson())
                }
                return {
                    isComplex: this.isComplex,
                    field: this.field,
                    operator: this.operator,
                    value: this.value,
                    ignoreCase: this.ignoreCase,
                    ignoreAccent: this.ignoreAccent,
                    condition: this.condition,
                    predicates: e
                }
            }, e.combinePredicates = function(t, i) {
                if (1 === t.length) {
                    if (!(t[0] instanceof Array)) return t[0];
                    t = t[0]
                }
                return new e(t[0], i, t.slice(1))
            }, e.combine = function(t, i, n, r, o, s, a) {
                return i instanceof e ? e[o](t, i) : "string" == typeof i ? e[o](t, new e(i, n, r, s, a)) : wn.throwError("Predicate - " + o + " : invalid arguments")
            }, e.fromJSONData = function(t) {
                for (var i = t.predicates || [], n = i.length, r = [], o = 0; o < n; o++) r.push(this.fromJSONData(i[o]));
                return t.isComplex ? new e(r[0], t.condition, r.slice(1)) : new e(t.field, t.operator, t.value, t.ignoreCase, t.ignoreAccent)
            }, e
        }(),
        an = function() {
            var e = function(t, i) {
                return (e = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(e, t) {
                        e.__proto__ = t
                    } || function(e, t) {
                        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                    })(t, i)
            };
            return function(t, i) {
                function n() {
                    this.constructor = t
                }
                e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
            }
        }(),
        ln = {
            GroupGuid: "{271bbba0-1ee7}"
        },
        hn = function() {
            function e(t) {
                this.options = {
                    from: "table",
                    requestType: "json",
                    sortBy: "sorted",
                    select: "select",
                    skip: "skip",
                    group: "group",
                    take: "take",
                    search: "search",
                    count: "requiresCounts",
                    where: "where",
                    aggregates: "aggregates",
                    expand: "expand"
                }, this.type = e, this.dataSource = t, this.pvt = {}
            }
            return e.prototype.processResponse = function(e, t, i, n) {
                return e
            }, e
        }(),
        pn = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return an(t, e), t.prototype.processQuery = function(e, t) {
                for (var i, n, r, o = e.dataSource.json.slice(0), s = o.length, a = !0, l = {}, h = 0, p = [], d = 0; d < t.lazyLoad.length; d++) h++, l[t.lazyLoad[d].key] = t.lazyLoad[d].value;
                var c = {};
                for (d = 0; d < t.queries.length; d++) "onPage" !== (n = t.queries[d]).fn && "onGroup" !== n.fn || !t.lazyLoad.length ? (i = this[n.fn].call(this, o, n.e, t), "onAggregates" === n.fn ? c[n.e.field + " - " + n.e.type] = i : o = void 0 !== i ? i : o, "onPage" !== n.fn && "onSkip" !== n.fn && "onTake" !== n.fn && "onRange" !== n.fn || (a = !1), a && (s = o.length)) : ("onGroup" === n.fn && p.push(n.e), "onPage" === n.fn && (r = n.e));
                if (h) {
                    var u = {
                            query: t,
                            lazyLoad: l,
                            result: o,
                            group: p,
                            page: r
                        },
                        g = this.lazyLoadGroup(u);
                    o = g.result, s = g.count
                }
                return t.isCountRequired && (o = {
                    result: o,
                    count: s,
                    aggregates: c
                }), o
            }, t.prototype.lazyLoadGroup = function(e) {
                var t = 0,
                    i = this.getAggregate(e.query),
                    n = e.result;
                if (g(e.lazyLoad.onDemandGroupInfo)) {
                    s = e.group[0].fieldName;
                    t = (n = wn.group(n, s, i, null, null, e.group[0].comparer, !0)).length;
                    a = n;
                    n = this.onPage(n, e.page, e.query), this.formGroupResult(n, a)
                } else {
                    for (var r = e.lazyLoad.onDemandGroupInfo, o = r.where.length - 1; o >= 0; o--) n = this.onWhere(n, r.where[o]);
                    if (e.group.length !== r.level) {
                        var s = e.group[r.level].fieldName;
                        n = wn.group(n, s, i, null, null, e.group[0].comparer, !0)
                    }
                    t = n.length;
                    var a = n;
                    n = (n = n.slice(r.skip)).slice(0, r.take), e.group.length !== r.level && this.formGroupResult(n, a)
                }
                return {
                    result: n,
                    count: t
                }
            }, t.prototype.formGroupResult = function(e, t) {
                if (e.length && t.length) {
                    e.GroupGuid = t.GroupGuid, e.childLevels = t.childLevels, e.level = t.level, e.records = t.records
                }
                return e
            }, t.prototype.getAggregate = function(e) {
                var t = on.filterQueries(e.queries, "onAggregates"),
                    i = [];
                if (t.length)
                    for (var n = void 0, r = 0; r < t.length; r++) n = t[r].e, i.push({
                        type: n.type,
                        field: wn.getValue(n.field, e)
                    });
                return i
            }, t.prototype.batchRequest = function(e, t, i) {
                var n, r = t.deletedRecords.length;
                for (n = 0; n < t.addedRecords.length; n++) this.insert(e, t.addedRecords[n]);
                for (n = 0; n < t.changedRecords.length; n++) this.update(e, i.key, t.changedRecords[n]);
                for (n = 0; n < r; n++) this.remove(e, i.key, t.deletedRecords[n]);
                return t
            }, t.prototype.onWhere = function(e, t) {
                return e && e.length ? e.filter((function(e) {
                    if (t) return t.validate(e)
                })) : e
            }, t.prototype.onAggregates = function(e, t) {
                var i = wn.aggregates[t.type];
                return e && i && 0 !== e.length ? i(e, t.field) : null
            }, t.prototype.onSearch = function(e, t) {
                return e && e.length ? (0 === t.fieldNames.length && wn.getFieldList(e[0], t.fieldNames), e.filter((function(e) {
                    for (var i = 0; i < t.fieldNames.length; i++)
                        if (t.comparer.call(e, wn.getObject(t.fieldNames[i], e), t.searchKey, t.ignoreCase, t.ignoreAccent)) return !0;
                    return !1
                }))) : e
            }, t.prototype.onSortBy = function(e, t, i) {
                if (!e || !e.length) return e;
                var n, r = wn.getValue(t.fieldName, i);
                if (!r) return e.sort(t.comparer);
                if (r instanceof Array) {
                    for (var o = (r = r.slice(0)).length - 1; o >= 0; o--) r[o] && (n = t.comparer, wn.endsWith(r[o], " desc") && (n = wn.fnSort("descending"), r[o] = r[o].replace(" desc", "")), e = wn.sort(e, r[o], n));
                    return e
                }
                return wn.sort(e, r, t.comparer)
            }, t.prototype.onGroup = function(e, t, i) {
                if (!e || !e.length) return e;
                var n = this.getAggregate(i);
                return wn.group(e, wn.getValue(t.fieldName, i), n, null, null, t.comparer)
            }, t.prototype.onPage = function(e, t, i) {
                var n = wn.getValue(t.pageSize, i),
                    r = (wn.getValue(t.pageIndex, i) - 1) * n,
                    o = r + n;
                return e && e.length ? e.slice(r, o) : e
            }, t.prototype.onRange = function(e, t) {
                return e && e.length ? e.slice(wn.getValue(t.start), wn.getValue(t.end)) : e
            }, t.prototype.onTake = function(e, t) {
                return e && e.length ? e.slice(0, wn.getValue(t.nos)) : e
            }, t.prototype.onSkip = function(e, t) {
                return e && e.length ? e.slice(wn.getValue(t.nos)) : e
            }, t.prototype.onSelect = function(e, t) {
                return e && e.length ? wn.select(e, wn.getValue(t.fieldNames)) : e
            }, t.prototype.insert = function(e, t, i, n, r) {
                return g(r) ? e.dataSource.json.push(t) : e.dataSource.json.splice(r, 0, t)
            }, t.prototype.remove = function(e, t, i, n) {
                var r, o = e.dataSource.json;
                for ("object" != typeof i || i instanceof Date || (i = wn.getObject(t, i)), r = 0; r < o.length && wn.getObject(t, o[r]) !== i; r++);
                return r !== o.length ? o.splice(r, 1) : null
            }, t.prototype.update = function(e, t, i, n) {
                var r, o, s = e.dataSource.json;
                for (g(t) || (o = a(t, i)), r = 0; r < s.length && (g(t) || a(t, s[r]) !== o); r++);
                return r < s.length ? c(s[r], i) : null
            }, t
        }(hn),
        dn = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return an(t, e), t.prototype.processQuery = function(e, t, i) {
                var n, r, o = this.getQueryRequest(t),
                    s = on.filterQueryLists(t.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]),
                    a = t.params,
                    l = e.dataSource.url,
                    h = null,
                    p = this.options,
                    d = {
                        sorts: [],
                        groups: [],
                        filters: [],
                        searches: [],
                        aggregates: []
                    };
                "onPage" in s ? (n = s.onPage, r = ((r = wn.getValue(n.pageIndex, t)) - 1) * (h = wn.getValue(n.pageSize, t))) : "onRange" in s && (r = (n = s.onRange).start, h = n.end - n.start);
                for (var c = 0; c < o.sorts.length; c++) n = wn.getValue(o.sorts[c].e.fieldName, t), d.sorts.push(wn.callAdaptorFunction(this, "onEachSort", {
                    name: n,
                    direction: o.sorts[c].e.direction
                }, t));
                i && (n = this.getFiltersFrom(i, t)) && d.filters.push(wn.callAdaptorFunction(this, "onEachWhere", n.toJson(), t));
                for (c = 0; c < o.filters.length; c++) {
                    d.filters.push(wn.callAdaptorFunction(this, "onEachWhere", o.filters[c].e.toJson(), t));
                    for (var u = 0, g = "object" == typeof d.filters[c] ? Object.keys(d.filters[c]) : []; u < g.length; u++) {
                        var f = g[u];
                        wn.isNull(d[f]) && delete d[f]
                    }
                }
                for (c = 0; c < o.searches.length; c++) n = o.searches[c].e, d.searches.push(wn.callAdaptorFunction(this, "onEachSearch", {
                    fields: n.fieldNames,
                    operator: n.operator,
                    key: n.searchKey,
                    ignoreCase: n.ignoreCase
                }, t));
                for (c = 0; c < o.groups.length; c++) d.groups.push(wn.getValue(o.groups[c].e.fieldName, t));
                for (c = 0; c < o.aggregates.length; c++) n = o.aggregates[c].e, d.aggregates.push({
                    type: n.type,
                    field: wn.getValue(n.field, t)
                });
                var m = {};
                if (this.getRequestQuery(p, t, s, d, m), wn.callAdaptorFunction(this, "addParams", {
                        dm: e,
                        query: t,
                        params: a,
                        reqParams: m
                    }), t.lazyLoad.length)
                    for (c = 0; c < t.lazyLoad.length; c++) m[t.lazyLoad[c].key] = t.lazyLoad[c].value;
                for (var y = 0, v = Object.keys(m); y < v.length; y++) {
                    f = v[y];
                    (wn.isNull(m[f]) || "" === m[f] || 0 === m[f].length) && delete m[f]
                }
                p.skip in m && p.take in m || null === h || (m[p.skip] = wn.callAdaptorFunction(this, "onSkip", r, t), m[p.take] = wn.callAdaptorFunction(this, "onTake", h, t));
                var b = this.pvt;
                return this.pvt = {}, "json" === this.options.requestType ? {
                    data: JSON.stringify(m, wn.parse.jsonDateReplacer),
                    url: l,
                    pvtData: b,
                    type: "POST",
                    contentType: "application/json; charset=utf-8"
                } : (n = this.convertToQueryString(m, t, e), {
                    type: "GET",
                    url: (n = (-1 !== e.dataSource.url.indexOf("?") ? "&" : "/") + n).length ? l.replace(/\/*$/, n) : l,
                    pvtData: b
                })
            }, t.prototype.getRequestQuery = function(e, t, i, n, r) {
                var o = r;
                o[e.from] = t.fromTable, e.apply && t.distincts.length && (o[e.apply] = "onDistinct" in this ? wn.callAdaptorFunction(this, "onDistinct", t.distincts) : ""), !t.distincts.length && e.expand && (o[e.expand] = "onExpand" in this && "onSelect" in i ? wn.callAdaptorFunction(this, "onExpand", {
                    selects: wn.getValue(i.onSelect.fieldNames, t),
                    expands: t.expands
                }, t) : t.expands), o[e.select] = "onSelect" in i && !t.distincts.length ? wn.callAdaptorFunction(this, "onSelect", wn.getValue(i.onSelect.fieldNames, t), t) : "", o[e.count] = t.isCountRequired ? wn.callAdaptorFunction(this, "onCount", t.isCountRequired, t) : "", o[e.search] = n.searches.length ? wn.callAdaptorFunction(this, "onSearch", n.searches, t) : "", o[e.skip] = "onSkip" in i ? wn.callAdaptorFunction(this, "onSkip", wn.getValue(i.onSkip.nos, t), t) : "", o[e.take] = "onTake" in i ? wn.callAdaptorFunction(this, "onTake", wn.getValue(i.onTake.nos, t), t) : "", o[e.where] = n.filters.length || n.searches.length ? wn.callAdaptorFunction(this, "onWhere", n.filters, t) : "", o[e.sortBy] = n.sorts.length ? wn.callAdaptorFunction(this, "onSortBy", n.sorts, t) : "", o[e.group] = n.groups.length ? wn.callAdaptorFunction(this, "onGroup", n.groups, t) : "", o[e.aggregates] = n.aggregates.length ? wn.callAdaptorFunction(this, "onAggregates", n.aggregates, t) : "", o.param = []
            }, t.prototype.convertToQueryString = function(e, t, i) {
                return ""
            }, t.prototype.processResponse = function(e, t, i, n, r, o) {
                if (n && n.getResponseHeader("Content-Type") && -1 !== n.getResponseHeader("Content-Type").indexOf("application/json")) {
                    var s = wn.timeZoneHandling;
                    t && !t.timeZoneHandling && (wn.timeZoneHandling = !1), e = wn.parse.parseJson(e), wn.timeZoneHandling = s
                }
                var a = r,
                    l = a.pvtData || {},
                    h = e ? e.groupDs : [];
                if (n && n.getResponseHeader("Content-Type") && -1 !== n.getResponseHeader("Content-Type").indexOf("xml")) return i.isCountRequired ? {
                    result: [],
                    count: 0
                } : [];
                var p = JSON.parse(a.data);
                if (p && "batch" === p.action && e && e.addedRecords) return o.addedRecords = e.addedRecords, o;
                e && e.d && (e = e.d);
                var d = {};
                e && "count" in e && (d.count = e.count), d.result = e && e.result ? e.result : e;
                var c = !1;
                if (Array.isArray(e.result) && e.result.length) {
                    if (g(e.result[0].key) || (d.result = this.formRemoteGroupedData(d.result, 1, l.groups.length - 1)), i && i.lazyLoad.length && l.groups.length)
                        for (var u = 0; u < i.lazyLoad.length; u++)
                            if ("onDemandGroupInfo" === i.lazyLoad[u].key) {
                                var f = i.lazyLoad[u].value.level;
                                l.groups.length === f && (c = !0)
                            }
                }
                return c || this.getAggregateResult(l, e, d, h, i), wn.isNull(d.count) ? d.result : {
                    result: d.result,
                    count: d.count,
                    aggregates: d.aggregates
                }
            }, t.prototype.formRemoteGroupedData = function(e, t, i) {
                for (var n = 0; n < e.length; n++) e[n].items.length && Object.keys(e[n].items[0]).indexOf("key") > -1 && this.formRemoteGroupedData(e[n].items, t + 1, i - 1);
                return e.GroupGuid = ln.GroupGuid, e.level = t, e.childLevels = i, e.records = e[0].items.length ? this.getGroupedRecords(e, !g(e[0].items.records)) : [], e
            }, t.prototype.getGroupedRecords = function(e, t) {
                for (var i = [], n = 0; n < e.length; n++)
                    if (t) i = i.concat(e[n].items.records);
                    else
                        for (var r = 0; r < e[n].items.length; r++) i.push(e[n].items[r]);
                return i
            }, t.prototype.onGroup = function(e) {
                return this.pvt.groups = e, e
            }, t.prototype.onAggregates = function(e) {
                this.pvt.aggregates = e
            }, t.prototype.batchRequest = function(e, t, i, n, r) {
                return {
                    type: "POST",
                    url: e.dataSource.batchUrl || e.dataSource.crudUrl || e.dataSource.removeUrl || e.dataSource.url,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    data: JSON.stringify(u({}, {
                        changed: t.changedRecords,
                        added: t.addedRecords,
                        deleted: t.deletedRecords,
                        action: "batch",
                        table: i[void 0],
                        key: i[void 0]
                    }, wn.getAddParams(this, e, n)))
                }
            }, t.prototype.beforeSend = function(e, t) {}, t.prototype.insert = function(e, t, i, n) {
                return {
                    url: e.dataSource.insertUrl || e.dataSource.crudUrl || e.dataSource.url,
                    data: JSON.stringify(u({}, {
                        value: t,
                        table: i,
                        action: "insert"
                    }, wn.getAddParams(this, e, n)))
                }
            }, t.prototype.remove = function(e, t, i, n, r) {
                return {
                    type: "POST",
                    url: e.dataSource.removeUrl || e.dataSource.crudUrl || e.dataSource.url,
                    data: JSON.stringify(u({}, {
                        key: i,
                        keyColumn: t,
                        table: n,
                        action: "remove"
                    }, wn.getAddParams(this, e, r)))
                }
            }, t.prototype.update = function(e, t, i, n, r) {
                return {
                    type: "POST",
                    url: e.dataSource.updateUrl || e.dataSource.crudUrl || e.dataSource.url,
                    data: JSON.stringify(u({}, {
                        value: i,
                        action: "update",
                        keyColumn: t,
                        key: wn.getObject(t, i),
                        table: n
                    }, wn.getAddParams(this, e, r)))
                }
            }, t.prototype.getFiltersFrom = function(e, t) {
                var i, n = t.fKey,
                    r = n,
                    o = t.key,
                    s = [];
                "object" != typeof e[0] && (r = null);
                for (var a = 0; a < e.length; a++) i = "object" == typeof e[0] ? wn.getObject(o || r, e[a]) : e[a], s.push(new sn(n, "equal", i));
                return sn.or(s)
            }, t.prototype.getAggregateResult = function(e, t, i, n, r) {
                var o = t;
                if (t && t.result && (o = t.result), e && e.aggregates && e.aggregates.length) {
                    var s = e.aggregates,
                        a = void 0,
                        l = o,
                        h = {};
                    t.aggregate && (l = t.aggregate);
                    for (var p = 0; p < s.length; p++)(a = wn.aggregates[s[p].type]) && (h[s[p].field + " - " + s[p].type] = a(l, s[p].field));
                    i.aggregates = h
                }
                var d = Array.isArray(t.result) && t.result.length && !g(t.result[0].key);
                if (e && e.groups && e.groups.length && !d) {
                    var c = e.groups;
                    for (p = 0; p < c.length; p++) {
                        g(n) || (n = wn.group(n, c[p]));
                        var u = on.filterQueries(r.queries, "onGroup")[p].e;
                        o = wn.group(o, c[p], e.aggregates, null, n, u.comparer)
                    }
                    i.result = o
                }
                return i
            }, t.prototype.getQueryRequest = function(e) {
                var t = {
                    sorts: [],
                    groups: [],
                    filters: [],
                    searches: [],
                    aggregates: []
                };
                return t.sorts = on.filterQueries(e.queries, "onSortBy"), t.groups = on.filterQueries(e.queries, "onGroup"), t.filters = on.filterQueries(e.queries, "onWhere"), t.searches = on.filterQueries(e.queries, "onSearch"), t.aggregates = on.filterQueries(e.queries, "onAggregates"), t
            }, t.prototype.addParams = function(e) {
                var t = e.reqParams;
                e.params.length && (t.params = {});
                for (var i = 0, n = e.params; i < n.length; i++) {
                    var r = n[i];
                    if (t[r.key]) throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");
                    t[r.key] = r.value, r.fn && (t[r.key] = r.fn.call(e.query, r.key, e.query, e.dm)), t.params[r.key] = t[r.key]
                }
            }, t
        }(hn),
        cn = function(e) {
            function t(t) {
                var i = e.call(this) || this;
                return i.options = u({}, i.options, {
                    requestType: "get",
                    accept: "application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",
                    multipartAccept: "multipart/mixed",
                    sortBy: "$orderby",
                    select: "$select",
                    skip: "$skip",
                    take: "$top",
                    count: "$inlinecount",
                    where: "$filter",
                    expand: "$expand",
                    batch: "$batch",
                    changeSet: "--changeset_",
                    batchPre: "batch_",
                    contentId: "Content-Id: ",
                    batchContent: "Content-Type: multipart/mixed; boundary=",
                    changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ",
                    batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ",
                    updateType: "PUT"
                }), u(i.options, t || {}), i
            }
            return an(t, e), t.prototype.getModuleName = function() {
                return "ODataAdaptor"
            }, t.prototype.onPredicate = function(e, i, n) {
                var r, o, s = "",
                    a = e.value,
                    l = typeof a,
                    h = e.field ? t.getField(e.field) : null;
                if (a instanceof Date && (a = "datetime'" + wn.parse.replacer(a) + "'"), "string" === l && (a = "'" + (a = encodeURIComponent(a)) + "'", n && (h = "cast(" + h + ", 'Edm.String')"), wn.parse.isGuid(a) && (o = "guid"), e.ignoreCase && (o || (h = "tolower(" + h + ")"), a = a.toLowerCase())), r = wn.odBiOperator[e.operator]) return s += h, s += r, o && (s += o), s + a;
                if ("substringof" === (r = g(this.getModuleName) || "ODataV4Adaptor" !== this.getModuleName() ? wn.odUniOperator[e.operator] : wn.odv4UniOperator[e.operator])) {
                    var p = a;
                    a = h, h = p
                }
                return s += r + "(", s += h + ",", o && (s += o), s += a + ")"
            }, t.prototype.addParams = function(t) {
                e.prototype.addParams.call(this, t), delete t.reqParams.params
            }, t.prototype.onComplexPredicate = function(e, t, i) {
                for (var n = [], r = 0; r < e.predicates.length; r++) n.push("(" + this.onEachWhere(e.predicates[r], t, i) + ")");
                return n.join(" " + e.condition + " ")
            }, t.prototype.onEachWhere = function(e, t, i) {
                return e.isComplex ? this.onComplexPredicate(e, t, i) : this.onPredicate(e, t, i)
            }, t.prototype.onWhere = function(e) {
                return this.pvt.search && e.push(this.onEachWhere(this.pvt.search, null, !0)), e.join(" and ")
            }, t.prototype.onEachSearch = function(e) {
                e.fields && 0 === e.fields.length && wn.throwError("Query() - Search : oData search requires list of field names to search");
                for (var t = this.pvt.search || [], i = 0; i < e.fields.length; i++) t.push(new sn(e.fields[i], e.operator, e.key, e.ignoreCase));
                this.pvt.search = t
            }, t.prototype.onSearch = function(e) {
                return this.pvt.search = sn.or(this.pvt.search), ""
            }, t.prototype.onEachSort = function(e) {
                var i = [];
                if (e.name instanceof Array)
                    for (var n = 0; n < e.name.length; n++) i.push(t.getField(e.name[n]) + ("descending" === e.direction ? " desc" : ""));
                else i.push(t.getField(e.name) + ("descending" === e.direction ? " desc" : ""));
                return i.join(",")
            }, t.prototype.onSortBy = function(e) {
                return e.reverse().join(",")
            }, t.prototype.onGroup = function(e) {
                return this.pvt.groups = e, []
            }, t.prototype.onSelect = function(e) {
                for (var i = 0; i < e.length; i++) e[i] = t.getField(e[i]);
                return e.join(",")
            }, t.prototype.onAggregates = function(e) {
                return this.pvt.aggregates = e, ""
            }, t.prototype.onCount = function(e) {
                return !0 === e ? "allpages" : ""
            }, t.prototype.beforeSend = function(e, t, i) {
                wn.endsWith(i.url, this.options.batch) && "post" === i.type.toLowerCase() ? (t.setRequestHeader("Accept", this.options.multipartAccept), t.setRequestHeader("DataServiceVersion", "2.0"), t.overrideMimeType("text/plain; charset=x-user-defined")) : t.setRequestHeader("Accept", this.options.accept), t.setRequestHeader("DataServiceVersion", "2.0"), t.setRequestHeader("MaxDataServiceVersion", "2.0")
            }, t.prototype.processResponse = function(e, t, i, n, r, o) {
                if (r && "GET" === r.type && !this.rootUrl && e["odata.metadata"]) {
                    var s = e["odata.metadata"].split("/$metadata#");
                    this.rootUrl = s[0], this.resourceTableName = s[1]
                }
                if (!g(e.d)) {
                    var a = i && i.isCountRequired ? e.d.results : e.d;
                    if (!g(a))
                        for (var l = 0; l < a.length; l++) g(a[l].__metadata) || delete a[l].__metadata
                }
                var h = r && r.pvtData,
                    p = this.processBatchResponse(e, i, n, r, o);
                if (p) return p;
                var d = n && r.getResponseHeader("DataServiceVersion"),
                    c = null,
                    u = d && parseInt(d, 10) || 2;
                if (i && i.isCountRequired) {
                    (e.__count || e["odata.count"]) && (c = e.__count || e["odata.count"]), e.d && (e = e.d), (e.__count || e["odata.count"]) && (c = e.__count || e["odata.count"])
                }
                3 === u && e.value && (e = e.value), e.d && (e = e.d), u < 3 && e.results && (e = e.results);
                var f = {};
                return f.count = c, f.result = e, this.getAggregateResult(h, e, f, null, i), wn.isNull(c) ? f.result : {
                    result: f.result,
                    count: f.count,
                    aggregates: f.aggregates
                }
            }, t.prototype.convertToQueryString = function(e, t, i) {
                var n = [],
                    r = e.table || "";
                delete e.table, i.dataSource.requiresFormat && (e.$format = "json");
                for (var o = 0, s = Object.keys(e); o < s.length; o++) {
                    var a = s[o];
                    n.push(a + "=" + e[a])
                }
                return n = n.join("&"), i.dataSource.url && -1 !== i.dataSource.url.indexOf("?") && !r ? n : n.length ? r + "?" + n : r || ""
            }, t.prototype.localTimeReplacer = function(e, t) {
                for (var i = 0, n = g(t) ? [] : Object.keys(t); i < n.length; i++) {
                    var r = n[i];
                    t[r] instanceof Date && (t[r] = wn.dateParse.toLocalTime(t[r]))
                }
                return t
            }, t.prototype.insert = function(e, t, i) {
                return {
                    url: (e.dataSource.insertUrl || e.dataSource.url).replace(/\/*$/, i ? "/" + i : ""),
                    data: JSON.stringify(t, this.options.localTime ? this.localTimeReplacer : null)
                }
            }, t.prototype.remove = function(e, t, i, n) {
                var r;
                return r = "string" != typeof i || wn.parse.isGuid(i) ? "(" + i + ")" : "('" + i + "')", {
                    type: "DELETE",
                    url: (e.dataSource.removeUrl || e.dataSource.url).replace(/\/*$/, n ? "/" + n : "") + r
                }
            }, t.prototype.update = function(e, t, i, n, r, o) {
                var s;
                return "PATCH" !== this.options.updateType || g(o) || (i = this.compareAndRemove(i, o, t)), s = "string" != typeof i[t] || wn.parse.isGuid(i[t]) ? "(" + i[t] + ")" : "('" + i[t] + "')", {
                    type: this.options.updateType,
                    url: (e.dataSource.updateUrl || e.dataSource.url).replace(/\/*$/, n ? "/" + n : "") + s,
                    data: JSON.stringify(i, this.options.localTime ? this.localTimeReplacer : null),
                    accept: this.options.accept
                }
            }, t.prototype.batchRequest = function(e, t, i, n, r) {
                var o = i.guid = wn.getGuid(this.options.batchPre),
                    s = this.rootUrl ? this.rootUrl + "/" + this.options.batch : e.dataSource.url.replace(/\/*$/, "/" + this.options.batch);
                i.url = this.resourceTableName ? this.resourceTableName : i.url;
                var a = {
                        url: i.url,
                        key: i.key,
                        cid: 1,
                        cSet: wn.getGuid(this.options.changeSet)
                    },
                    l = "--" + o + "\n";
                return l += "Content-Type: multipart/mixed; boundary=" + a.cSet.replace("--", "") + "\n", this.pvt.changeSet = 0, l += this.generateInsertRequest(t.addedRecords, a, e), l += this.generateUpdateRequest(t.changedRecords, a, e, r ? r.changedRecords : []), l += this.generateDeleteRequest(t.deletedRecords, a, e), l += a.cSet + "--\n", {
                    type: "POST",
                    url: s,
                    dataType: "json",
                    contentType: "multipart/mixed; charset=UTF-8;boundary=" + o,
                    data: l += "--" + o + "--"
                }
            }, t.prototype.generateDeleteRequest = function(e, t, i) {
                if (!e) return "";
                var n = {
                    method: "DELETE ",
                    url: function(e, t, i) {
                        var n = wn.getObject(i, e[t]);
                        return "number" == typeof n || wn.parse.isGuid(n) ? "(" + n + ")" : n instanceof Date ? "(" + e[t][i].toJSON() + ")" : "('" + n + "')"
                    },
                    data: function(e, t) {
                        return ""
                    }
                };
                return this.generateBodyContent(e, t, n, i) + "\n"
            }, t.prototype.generateInsertRequest = function(e, t, i) {
                if (!e) return "";
                var n = {
                    method: "POST ",
                    url: function(e, t, i) {
                        return ""
                    },
                    data: function(e, t) {
                        return JSON.stringify(e[t]) + "\n\n"
                    }
                };
                return this.generateBodyContent(e, t, n, i)
            }, t.prototype.generateUpdateRequest = function(e, t, i, n) {
                var r = this;
                if (!e) return "";
                e.forEach((function(e) {
                    return e = r.compareAndRemove(e, n.filter((function(i) {
                        return wn.getObject(t.key, i) === wn.getObject(t.key, e)
                    }))[0], t.key)
                }));
                var o = {
                    method: this.options.updateType + " ",
                    url: function(e, t, i) {
                        return "number" == typeof e[t][i] || wn.parse.isGuid(e[t][i]) ? "(" + e[t][i] + ")" : e[t][i] instanceof Date ? "(" + e[t][i].toJSON() + ")" : "('" + e[t][i] + "')"
                    },
                    data: function(e, t) {
                        return JSON.stringify(e[t]) + "\n\n"
                    }
                };
                return this.generateBodyContent(e, t, o, i)
            }, t.getField = function(e) {
                return e.replace(/\./g, "/")
            }, t.prototype.generateBodyContent = function(e, t, i, n) {
                for (var r = "", o = 0; o < e.length; o++) r += "\n" + t.cSet + "\n", r += this.options.changeSetContent + "\n\n", r += i.method, "POST " === i.method ? r += (n.dataSource.insertUrl || n.dataSource.crudUrl || t.url) + i.url(e, o, t.key) + " HTTP/1.1\n" : "PUT " === i.method || "PATCH " === i.method ? r += (n.dataSource.updateUrl || n.dataSource.crudUrl || t.url) + i.url(e, o, t.key) + " HTTP/1.1\n" : "DELETE " === i.method && (r += (n.dataSource.removeUrl || n.dataSource.crudUrl || t.url) + i.url(e, o, t.key) + " HTTP/1.1\n"), r += "Accept: " + this.options.accept + "\n", r += "Content-Id: " + this.pvt.changeSet++ + "\n", r += this.options.batchChangeSetContentType + "\n", g(e[o]["@odata.etag"]) ? r += "\n" : (r += "If-Match: " + e[o]["@odata.etag"] + "\n\n", delete e[o]["@odata.etag"]), r += i.data(e, o);
                return r
            }, t.prototype.processBatchResponse = function(e, t, i, n, r) {
                if (i && i.getResponseHeader("Content-Type") && -1 !== i.getResponseHeader("Content-Type").indexOf("xml")) return t.isCountRequired ? {
                    result: [],
                    count: 0
                } : [];
                if (n && this.options.batch && wn.endsWith(n.url, this.options.batch) && "post" === n.type.toLowerCase()) {
                    var o = i.getResponseHeader("Content-Type"),
                        s = void 0,
                        a = void 0,
                        l = e + "";
                    if (o = o.substring(o.indexOf("=batchresponse") + 1), (l = l.split(o)).length < 2) return {};
                    l = l[1];
                    var h = /(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);
                    h && l.replace(h[0], "");
                    for (var p = h ? h[1] : "", d = (l = l.split(p)).length; d > -1; d--) /\bContent-ID:/i.test(l[d]) && /\bHTTP.+201/.test(l[d]) && (s = parseInt(/\bContent-ID: (\d+)/i.exec(l[d])[1], 10), r.addedRecords[s] && (a = wn.parse.parseJson(/^\{.+\}/m.exec(l[d])[0]), u({}, r.addedRecords[s], this.processResponse(a))));
                    return r
                }
                return null
            }, t.prototype.compareAndRemove = function(e, t, i) {
                var n = this;
                return g(t) || Object.keys(e).forEach((function(r) {
                    r !== i && "@odata.etag" !== r && (wn.isPlainObject(e[r]) ? (n.compareAndRemove(e[r], t[r]), 0 === Object.keys(e[r]).filter((function(e) {
                        return "@odata.etag" !== e
                    })).length && delete e[r]) : (e[r] === t[r] || e[r] && t[r] && e[r].valueOf() === t[r].valueOf()) && delete e[r])
                })), e
            }, t
        }(dn),
        un = (function(e) {
            function t(t) {
                var i = e.call(this, t) || this;
                return i.options = u({}, i.options, {
                    requestType: "get",
                    accept: "application/json, text/javascript, */*; q=0.01",
                    multipartAccept: "multipart/mixed",
                    sortBy: "$orderby",
                    select: "$select",
                    skip: "$skip",
                    take: "$top",
                    count: "$count",
                    search: "$search",
                    where: "$filter",
                    expand: "$expand",
                    batch: "$batch",
                    changeSet: "--changeset_",
                    batchPre: "batch_",
                    contentId: "Content-Id: ",
                    batchContent: "Content-Type: multipart/mixed; boundary=",
                    changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ",
                    batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ",
                    updateType: "PATCH",
                    localTime: !1,
                    apply: "$apply"
                }), u(i.options, t || {}), i
            }
            an(t, e), t.prototype.getModuleName = function() {
                return "ODataV4Adaptor"
            }, t.prototype.onCount = function(e) {
                return !0 === e ? "true" : ""
            }, t.prototype.onPredicate = function(t, i, n) {
                var r = "",
                    o = t.value,
                    s = o instanceof Date;
                if (i instanceof on)
                    for (var a = this.getQueryRequest(i), l = 0; l < a.filters.length; l++) a.filters[l].e.key === t.value && (n = !0);
                return r = e.prototype.onPredicate.call(this, t, i, n), s && (r = r.replace(/datetime'(.*)'$/, "$1")), wn.parse.isGuid(o) && (r = r.replace("guid", "").replace(/'/g, "")), r
            }, t.prototype.onEachSearch = function(e) {
                var t = this.pvt.searches || [];
                t.push(e.key), this.pvt.searches = t
            }, t.prototype.onSearch = function(e) {
                return this.pvt.searches.join(" OR ")
            }, t.prototype.onExpand = function(e) {
                var t = this,
                    i = {},
                    n = {},
                    r = e.expands.slice(),
                    o = [];
                return e.selects.filter((function(e) {
                    return e.indexOf(".") > -1
                })).forEach((function(e) {
                    var t = e.split(".");
                    t[0] in i || (i[t[0]] = []), i[t[0]].push(t[1])
                })), Object.keys(i).forEach((function(e) {
                    -1 === r.indexOf(e) && r.push(e)
                })), r.forEach((function(e) {
                    n[e] = e in i ? e + "(" + t.options.select + "=" + i[e].join(",") + ")" : e
                })), Object.keys(n).forEach((function(e) {
                    return o.push(n[e])
                })), o.join(",")
            }, t.prototype.onDistinct = function(e) {
                return "groupby((" + e.map((function(e) {
                    return cn.getField(e)
                })).join(",") + "))"
            }, t.prototype.onSelect = function(t) {
                return e.prototype.onSelect.call(this, t.filter((function(e) {
                    return -1 === e.indexOf(".")
                })))
            }, t.prototype.beforeSend = function(e, t, i) {
                "POST" !== i.type && "PUT" !== i.type && "PATCH" !== i.type || t.setRequestHeader("Prefer", "return=representation"), t.setRequestHeader("Accept", this.options.accept)
            }, t.prototype.processResponse = function(t, i, n, r, o, s) {
                if (o && "GET" === o.type && !this.rootUrl && t["@odata.context"]) {
                    var a = t["@odata.context"].split("/$metadata#");
                    this.rootUrl = a[0], this.resourceTableName = a[1]
                }
                var l = o && o.pvtData,
                    h = e.prototype.processBatchResponse.call(this, t, n, r, o, s);
                if (h) return h;
                var p = null;
                n && n.isCountRequired && "@odata.count" in t && (p = t["@odata.count"]), t = g(t.value) ? t : t.value;
                var d = {};
                return d.count = p, d.result = t, this.getAggregateResult(l, t, d, null, n), wn.isNull(p) ? d.result : {
                    result: d.result,
                    count: p,
                    aggregates: d.aggregates
                }
            }
        }(cn), function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return an(t, e), t.prototype.getModuleName = function() {
                return "WebApiAdaptor"
            }, t.prototype.insert = function(e, t, i) {
                return {
                    type: "POST",
                    url: e.dataSource.url,
                    data: JSON.stringify(t)
                }
            }, t.prototype.remove = function(e, t, i, n) {
                return {
                    type: "DELETE",
                    url: e.dataSource.url + "/" + i,
                    data: JSON.stringify(i)
                }
            }, t.prototype.update = function(e, t, i, n) {
                return {
                    type: "PUT",
                    url: e.dataSource.url,
                    data: JSON.stringify(i)
                }
            }, t.prototype.batchRequest = function(e, t, i) {
                var n = this,
                    r = i.guid = wn.getGuid(this.options.batchPre),
                    o = e.dataSource.url.replace(/\/*$/, "/" + this.options.batch);
                i.url = this.resourceTableName ? this.resourceTableName : i.url;
                for (var s = [], a = function(n, o) {
                        t.addedRecords.forEach((function(o, a) {
                            var l = function(e, t, i) {
                                return ""
                            };
                            s.push("--" + r), s.push("Content-Type: application/http; msgtype=request", ""), s.push("POST /api/" + (e.dataSource.insertUrl || e.dataSource.crudUrl || i.url) + l(t.addedRecords, n, i.key) + " HTTP/1.1"), s.push("Content-Type: application/json; charset=utf-8"), s.push("Host: " + location.host), s.push("", o ? JSON.stringify(o) : "")
                        }))
                    }, l = 0, h = t.addedRecords.length; l < h; l++) a(l);
                var p = function(o, a) {
                    t.changedRecords.forEach((function(a, l) {
                        n.options.updateType;
                        var h = function(e, t, i) {
                            return ""
                        };
                        s.push("--" + r), s.push("Content-Type: application/http; msgtype=request", ""), s.push("PUT /api/" + (e.dataSource.updateUrl || e.dataSource.crudUrl || i.url) + h(t.changedRecords, o, i.key) + " HTTP/1.1"), s.push("Content-Type: application/json; charset=utf-8"), s.push("Host: " + location.host), s.push("", a ? JSON.stringify(a) : "")
                    }))
                };
                for (l = 0, h = t.changedRecords.length; l < h; l++) p(l);
                var d = function(n, o) {
                    t.deletedRecords.forEach((function(o, a) {
                        var l = function(e, t, i) {
                            var n = wn.getObject(i, e[t]);
                            return "number" == typeof n || wn.parse.isGuid(n) ? "/" + n : n instanceof Date ? "/" + e[t][i].toJSON() : "/'" + n + "'"
                        };
                        s.push("--" + r), s.push("Content-Type: application/http; msgtype=request", ""), s.push("DELETE /api/" + (e.dataSource.removeUrl || e.dataSource.crudUrl || i.url) + l(t.deletedRecords, n, i.key) + " HTTP/1.1"), s.push("Content-Type: application/json; charset=utf-8"), s.push("Host: " + location.host), s.push("", o ? JSON.stringify(o) : "")
                    }))
                };
                for (l = 0, h = t.deletedRecords.length; l < h; l++) d(l);
                return s.push("--" + r + "--", ""), {
                    type: "POST",
                    url: o,
                    contentType: "multipart/mixed; boundary=" + r,
                    data: s.join("\r\n")
                }
            }, t.prototype.beforeSend = function(e, t, i) {
                t.setRequestHeader("Accept", "application/json, text/javascript, */*; q=0.01")
            }, t.prototype.processResponse = function(e, t, i, n, r, o) {
                var s = r && r.pvtData,
                    a = null,
                    l = {};
                if (r && "post" !== r.type.toLowerCase()) {
                    var h = n && r.getResponseHeader("DataServiceVersion"),
                        p = h && parseInt(h, 10) || 2;
                    i && i.isCountRequired && (wn.isNull(e.Count) || (a = e.Count)), p < 3 && e.Items && (e = e.Items), l.count = a, l.result = e, this.getAggregateResult(s, e, l, null, i)
                }
                return l.result = l.result || e, wn.isNull(a) ? l.result : {
                    result: l.result,
                    count: l.count,
                    aggregates: l.aggregates
                }
            }, t
        }(cn)),
        gn = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return an(t, e), t.prototype.processQuery = function(e, t, i) {
                var n = (new dn).processQuery(e, t, i),
                    r = wn.parse.parseJson(n.data),
                    o = {};
                if (r.param)
                    for (var s = 0; s < r.param.length; s++) {
                        var a = r.param[s],
                            l = Object.keys(a)[0];
                        o[l] = a[l]
                    }
                o.value = r;
                return {
                    data: JSON.stringify(o),
                    url: n.url,
                    pvtData: n.pvtData,
                    type: "POST",
                    contentType: "application/json; charset=utf-8"
                }
            }, t
        }(dn),
        fn = function(e) {
            function t() {
                var t = e.call(this) || this;
                return l("beforeSend", dn.prototype.beforeSend, t), t
            }
            return an(t, e), t.prototype.insert = function(e, t, i, n, r) {
                    return this.pvt.position = r,





this.updateType = "add", {
    url: e.dataSource.insertUrl || e.dataSource.crudUrl || e.dataSource.url,
    data: JSON.stringify(u({}, {
        value: t,
        table: i,
        action: "insert"
    }, wn.getAddParams(this, e, n)))
}
}, t.prototype.remove = function(t, i, n, r, o) {
    return e.prototype.remove.call(this, t, i, n), {
        type: "POST",
        url: t.dataSource.removeUrl || t.dataSource.crudUrl || t.dataSource.url,
        data: JSON.stringify(u({}, {
            key: n,
            keyColumn: i,
            table: r,
            action: "remove"
        }, wn.getAddParams(this, t, o)))
    }
}, t.prototype.update = function(e, t, i, n, r) {
    return this.updateType = "update", this.updateKey = t, {
        type: "POST",
        url: e.dataSource.updateUrl || e.dataSource.crudUrl || e.dataSource.url,
        data: JSON.stringify(u({}, {
            value: i,
            action: "update",
            keyColumn: t,
            key: i[t],
            table: n
        }, wn.getAddParams(this, e, r)))
    }
}, t.prototype.processResponse = function(t, i, n, r, o, s, a) {
    var l;
    if ("add" === this.updateType && e.prototype.insert.call(this, i, t, null, null, this.pvt.position), "update" === this.updateType && e.prototype.update.call(this, i, this.updateKey, t), this.updateType = void 0, t.added)
        for (l = 0; l < t.added.length; l++) e.prototype.insert.call(this, i, t.added[l]);
    if (t.changed)
        for (l = 0; l < t.changed.length; l++) e.prototype.update.call(this, i, a.key, t.changed[l]);
    if (t.deleted)
        for (l = 0; l < t.deleted.length; l++) e.prototype.remove.call(this, i, a.key, t.deleted[l]);
    return t
}, t.prototype.batchRequest = function(e, t, i, n, r) {
    return {
        type: "POST",
        url: e.dataSource.batchUrl || e.dataSource.crudUrl || e.dataSource.url,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify(u({}, {
            changed: t.changedRecords,
            added: t.addedRecords,
            deleted: t.deletedRecords,
            action: "batch",
            table: i.url,
            key: i.key
        }, wn.getAddParams(this, e, n)))
    }
}, t.prototype.addParams = function(e) {
    (new dn).addParams(e)
}, t
}(pn), mn = function(e) {
    function t(t, i, n) {
        var r = e.call(this) || this;
        r.isCrudAction = !1, r.isInsertAction = !1, g(t) || (r.cacheAdaptor = t), r.pageSize = n, r.guidId = wn.getGuid("cacheAdaptor");
        window.localStorage.setItem(r.guidId, JSON.stringify({
            keys: [],
            results: []
        }));
        var o = r.guidId;
        return g(i) || setInterval((function() {
            var e;
            e = wn.parse.parseJson(window.localStorage.getItem(o));
            for (var t = [], n = 0; n < e.results.length; n++) {
                var r = +new Date,
                    s = +new Date(e.results[n].timeStamp);
                e.results[n].timeStamp = r - s, r - s > i && t.push(n)
            }
            for (n = 0; n < t.length; n++) e.results.splice(t[n], 1), e.keys.splice(t[n], 1);
            window.localStorage.removeItem(o), window.localStorage.setItem(o, JSON.stringify(e))
        }), i), r
    }
    return an(t, e), t.prototype.generateKey = function(e, t) {
        var i = this.getQueryRequest(t),
            n = on.filterQueryLists(t.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]),
            r = e;
        "onPage" in n && (r += n.onPage.pageIndex), i.sorts.forEach((function(e) {
            r += e.e.direction + e.e.fieldName
        })), i.groups.forEach((function(e) {
            r += e.e.fieldName
        })), i.searches.forEach((function(e) {
            r += e.e.searchKey
        }));
        for (var o = 0; o < i.filters.length; o++) {
            var s = i.filters[o];
            if (s.e.isComplex) {
                var a = t.clone();
                a.queries = [];
                for (var l = 0; l < s.e.predicates.length; l++) a.queries.push({
                    fn: "onWhere",
                    e: s.e.predicates[l],
                    filter: t.queries.filter
                });
                r += s.e.condition + this.generateKey(e, a)
            } else r += s.e.field + s.e.operator + s.e.value
        }
        return r
    }, t.prototype.processQuery = function(e, t, i) {
        var n, r = this.generateKey(e.dataSource.url, t),
            o = (n = wn.parse.parseJson(window.localStorage.getItem(this.guidId))) ? n.results[n.keys.indexOf(r)] : null;
        return null == o || this.isCrudAction || this.isInsertAction ? (this.isCrudAction = null, this.isInsertAction = null, this.cacheAdaptor.processQuery.apply(this.cacheAdaptor, [].slice.call(arguments, 0))) : o
    }, t.prototype.processResponse = function(e, t, i, n, r, o) {
        if (this.isInsertAction || r && this.cacheAdaptor.options.batch && wn.endsWith(r.url, this.cacheAdaptor.options.batch) && "post" === r.type.toLowerCase()) return this.cacheAdaptor.processResponse(e, t, i, n, r, o);
        e = this.cacheAdaptor.processResponse.apply(this.cacheAdaptor, [].slice.call(arguments, 0));
        var s = i ? this.generateKey(t.dataSource.url, i) : t.dataSource.url,
            a = {},
            l = (a = wn.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(s);
        for (-1 !== l && (a.results.splice(l, 1), a.keys.splice(l, 1)), a.results[a.keys.push(s) - 1] = {
                keys: s,
                result: e.result,
                timeStamp: new Date,
                count: e.count
            }; a.results.length > this.pageSize;) a.results.splice(0, 1), a.keys.splice(0, 1);
        return window.localStorage.setItem(this.guidId, JSON.stringify(a)), e
    }, t.prototype.beforeSend = function(e, t, i) {
        !g(this.cacheAdaptor.options.batch) && wn.endsWith(i.url, this.cacheAdaptor.options.batch) && "post" === i.type.toLowerCase() && t.setRequestHeader("Accept", this.cacheAdaptor.options.multipartAccept), e.dataSource.crossDomain || t.setRequestHeader("Accept", this.cacheAdaptor.options.accept)
    }, t.prototype.update = function(e, t, i, n) {
        return this.isCrudAction = !0, this.cacheAdaptor.update(e, t, i, n)
    }, t.prototype.insert = function(e, t, i) {
        return this.isInsertAction = !0, this.cacheAdaptor.insert(e, t, i)
    }, t.prototype.remove = function(e, t, i, n) {
        return this.isCrudAction = !0, this.cacheAdaptor.remove(e, t, i, n)
    }, t.prototype.batchRequest = function(e, t, i) {
        return this.cacheAdaptor.batchRequest(e, t, i)
    }, t
}(dn), yn = function() {
    function e(e, t, i) {
        var n, r = this;
        return this.dateParse = !0, this.timeZoneHandling = !0, this.requests = [], e || this.dataSource || (e = []), i = i || e.adaptor, e && !1 === e.timeZoneHandling && (this.timeZoneHandling = e.timeZoneHandling), e instanceof Array ? n = {
            json: e,
            offline: !0
        } : "object" == typeof e ? (e.json || (e.json = []), n = {
            url: e.url,
            insertUrl: e.insertUrl,
            removeUrl: e.removeUrl,
            updateUrl: e.updateUrl,
            crudUrl: e.crudUrl,
            batchUrl: e.batchUrl,
            json: e.json,
            headers: e.headers,
            accept: e.accept,
            data: e.data,
            timeTillExpiration: e.timeTillExpiration,
            cachingPageSize: e.cachingPageSize,
            enableCaching: e.enableCaching,
            requestType: e.requestType,
            key: e.key,
            crossDomain: e.crossDomain,
            jsonp: e.jsonp,
            dataType: e.dataType,
            offline: void 0 !== e.offline ? e.offline : !(e.adaptor instanceof fn) && !e.url,
            requiresFormat: e.requiresFormat
        }) : wn.throwError("DataManager: Invalid arguments"), void 0 !== n.requiresFormat || wn.isCors() || (n.requiresFormat = !!g(n.crossDomain) || n.crossDomain), void 0 === n.dataType && (n.dataType = "json"), this.dataSource = n, this.defaultQuery = t, n.url && n.offline && !n.json.length ? (this.isDataAvailable = !1, this.adaptor = i || new cn, this.dataSource.offline = !1, this.ready = this.executeQuery(t || new on), this.ready.then((function(e) {
            r.dataSource.offline = !0, r.isDataAvailable = !0, n.json = e.result, r.adaptor = new pn
        }))) : this.adaptor = n.offline ? new pn : new cn, !n.jsonp && this.adaptor instanceof cn && (n.jsonp = "callback"), this.adaptor = i || this.adaptor, n.enableCaching && (this.adaptor = new mn(this.adaptor, n.timeTillExpiration, n.cachingPageSize)), this
    }
    return e.prototype.setDefaultQuery = function(e) {
        return this.defaultQuery = e, this
    }, e.prototype.executeLocal = function(t) {
        this.defaultQuery || t instanceof on || wn.throwError("DataManager - executeLocal() : A query is required to execute"), this.dataSource.json || wn.throwError("DataManager - executeLocal() : Json data is required to execute"), t = t || this.defaultQuery;
        var i = this.adaptor.processQuery(this, t);
        if (t.subQuery) {
            var n = t.subQuery.fromTable,
                r = t.subQuery.lookups,
                o = t.isCountRequired ? i.result : i;
            r && r instanceof Array && wn.buildHierarchy(t.subQuery.fKey, n, o, r, t.subQuery.key);
            for (var s = 0; s < o.length; s++) o[s][n] instanceof Array && (o[s] = u({}, {}, o[s]), o[s][n] = this.adaptor.processResponse(t.subQuery.using(new e(o[s][n].slice(0))).executeLocal(), this, t))
        }
        return this.adaptor.processResponse(i, this, t)
    }, e.prototype.executeQuery = function(t, i, n, r) {
        var o = this;
        "function" == typeof t && (r = n, n = i, i = t, t = null), t || (t = this.defaultQuery), t instanceof on || wn.throwError("DataManager - executeQuery() : A query is required to execute");
        var s = new vn,
            a = {
                query: t
            };
        if (!this.dataSource.offline && void 0 !== this.dataSource.url && "" !== this.dataSource.url || !g(this.adaptor.makeRequest)) {
            var l = this.adaptor.processQuery(this, t);
            g(this.adaptor.makeRequest) ? g(l.url) ? (a = e.getDeferedArgs(t, l, a), s.resolve(a)) : this.makeRequest(l, s, a, t) : this.adaptor.makeRequest(l, s, a, t)
        } else e.nextTick((function() {
            var i = o.executeLocal(t);
            a = e.getDeferedArgs(t, i, a), s.resolve(a)
        }));
        return (i || n) && s.promise.then(i, n), r && s.promise.then(r, r), s.promise
    }, e.getDeferedArgs = function(e, t, i) {
        return e.isCountRequired ? (i.result = t.result, i.count = t.count, i.aggregates = t.aggregates) : i.result = t, i
    }, e.nextTick = function(e) {
        (window.setImmediate || window.setTimeout)(e, 0)
    }, e.prototype.extendRequest = function(e, t, i) {
        return u({}, {
            type: "GET",
            dataType: this.dataSource.dataType,
            crossDomain: this.dataSource.crossDomain,
            jsonp: this.dataSource.jsonp,
            cache: !0,
            processData: !1,
            onSuccess: t,
            onFailure: i
        }, e)
    }, e.prototype.makeRequest = function(e, t, i, n) {
        var r = this,
            o = !!n.subQuerySelector,
            s = function(e) {
                i.error = e, t.reject(i)
            },
            a = function(e, n, r, o, s, a, l) {
                i.xhr = r, i.count = n ? parseInt(n.toString(), 10) : 0, i.result = e, i.request = o, i.aggregates = a, i.actual = s, i.virtualSelectRecords = l, t.resolve(i)
            },
            l = function(e, t) {
                var l = new vn,
                    h = {
                        parent: i
                    };
                n.subQuery.isChild = !0;
                var p = r.adaptor.processQuery(r, n.subQuery, e ? r.adaptor.processResponse(e) : t),
                    d = r.makeRequest(p, l, h, n.subQuery);
                return o || l.then((function(t) {
                    e && (wn.buildHierarchy(n.subQuery.fKey, n.subQuery.fromTable, e, t, n.subQuery.key), a(e, t.count, t.xhr))
                }), s), d
            },
            h = this.extendRequest(e, (function(e, t) {
                -1 === t.httpRequest.getResponseHeader("Content-Type").indexOf("xml") && r.dateParse && (e = wn.parse.parseJson(e));
                var i = r.adaptor.processResponse(e, r, n, t.httpRequest, t),
                    s = 0,
                    h = null,
                    p = e.virtualSelectRecords;
                n.isCountRequired && (s = i.count, h = i.aggregates, i = i.result), n.subQuery ? o || l(i, t) : a(i, s, t.httpRequest, t.type, e, h, p)
            }), s),
            p = new se(h);
        if (p.beforeSend = function() {
                r.beforeSend(p.httpRequest, p)
            }, (h = p.send()).catch((function(e) {
                return !0
            })), this.requests.push(p), o) {
            var d = n.subQuerySelector.call(this, {
                query: n.subQuery,
                parent: n
            });
            d && d.length ? Promise.all([h, l(null, d)]).then((function() {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                var i = e[0],
                    s = r.adaptor.processResponse(i[0], r, n, r.requests[0].httpRequest, r.requests[0]),
                    l = 0;
                n.isCountRequired && (l = s.count, s = s.result);
                var h = r.adaptor.processResponse(i[1], r, n.subQuery, r.requests[1].httpRequest, r.requests[1]);
                l = 0, n.subQuery.isCountRequired && (l = h.count, h = h.result), wn.buildHierarchy(n.subQuery.fKey, n.subQuery.fromTable, s, h, n.subQuery.key), o = !1, a(s, l, r.requests[0].httpRequest)
            })) : o = !1
        }
        return h
    }, e.prototype.beforeSend = function(e, t) {
        this.adaptor.beforeSend(this, e, t);
        for (var i, n = this.dataSource.headers, r = 0; n && r < n.length; r++) {
            i = [];
            for (var o = 0, s = Object.keys(n[r]); o < s.length; o++) {
                var a = s[o];
                i.push(a), e.setRequestHeader(a, n[r][a])
            }
        }
    }, e.prototype.saveChanges = function(e, t, i, n, r) {
        var o = this;
        i instanceof on && (n = i, i = null);
        var s = {
                url: i,
                key: t || this.dataSource.key
            },
            a = this.adaptor.batchRequest(this, e, s, n || new on, r);
        if (this.dataSource.offline) return a;
        if (g(this.adaptor.doAjaxRequest)) {
            var l = new vn,
                h = new se(a);
            return h.beforeSend = function() {
                o.beforeSend(h.httpRequest, h)
            }, h.onSuccess = function(t, i) {
                l.resolve(o.adaptor.processResponse(t, o, null, i.httpRequest, i, e, s))
            }, h.onFailure = function(e) {
                l.reject([{
                    error: e
                }])
            }, h.send().catch((function(e) {
                return !0
            })), l.promise
        }
        return this.adaptor.doAjaxRequest(a)
    }, e.prototype.insert = function(e, t, i, n) {
        t instanceof on && (i = t, t = null);
        var r = this.adaptor.insert(this, e, t, i, n);
        return this.dataSource.offline ? r : g(this.adaptor.doAjaxRequest) ? this.doAjaxRequest(r) : this.adaptor.doAjaxRequest(r)
    }, e.prototype.remove = function(e, t, i, n) {
        "object" == typeof t && (t = wn.getObject(e, t)), i instanceof on && (n = i, i = null);
        var r = this.adaptor.remove(this, e, t, i, n);
        return this.dataSource.offline ? r : g(this.adaptor.doAjaxRequest) ? this.doAjaxRequest(r) : this.adaptor.doAjaxRequest(r)
    }, e.prototype.update = function(e, t, i, n, r) {
        i instanceof on && (n = i, i = null);
        var o = this.adaptor.update(this, e, t, i, n, r);
        return this.dataSource.offline ? o : g(this.adaptor.doAjaxRequest) ? this.doAjaxRequest(o) : this.adaptor.doAjaxRequest(o)
    }, e.prototype.doAjaxRequest = function(e) {
        var t = this,
            i = new vn;
        e = u({}, {
            type: "POST",
            contentType: "application/json; charset=utf-8",
            processData: !1
        }, e);
        var n = new se(e);
        return n.beforeSend = function() {
            t.beforeSend(n.httpRequest, n)
        }, n.onSuccess = function(e, n) {
            try {
                wn.parse.parseJson(e)
            } catch (t) {
                e = []
            }
            e = t.adaptor.processResponse(wn.parse.parseJson(e), t, null, n.httpRequest, n), i.resolve(e)
        }, n.onFailure = function(e) {
            i.reject([{
                error: e
            }])
        }, n.send().catch((function(e) {
            return !0
        })), i.promise
    }, e
}(), vn = function() {
    var e = this;
    this.promise = new Promise((function(t, i) {
        e.resolve = t, e.reject = i
    })), this.then = this.promise.then.bind(this.promise), this.catch = this.promise.catch.bind(this.promise)
}, bn = {
    GroupGuid: "{271bbba0-1ee7}"
}, wn = function() {
    function e() {}
    return e.getValue = function(e, t) {
        return "function" == typeof e ? e.call(t || {}) : e
    }, e.endsWith = function(e, t) {
        return e.slice && e.slice(-t.length) === t
    }, e.startsWith = function(e, t) {
        return e.slice(0, t.length) === t
    }, e.fnSort = function(t) {
        return "ascending" === (t = t ? e.toLowerCase(t) : "ascending") ? this.fnAscending : this.fnDescending
    }, e.fnAscending = function(e, t) {
        return g(e) && g(t) || null == t ? -1 : "string" == typeof e ? e.localeCompare(t) : null == e ? 1 : e - t
    }, e.fnDescending = function(e, t) {
        return g(e) && g(t) ? -1 : null == t ? 1 : "string" == typeof e ? -1 * e.localeCompare(t) : null == e ? -1 : t - e
    }, e.extractFields = function(e, t) {
        for (var i = {}, n = 0; n < t.length; n++) i = this.setValue(t[n], this.getObject(t[n], e), i);
        return i
    }, e.select = function(e, t) {
        for (var i = [], n = 0; n < e.length; n++) i.push(this.extractFields(e[n], t));
        return i
    }, e.group = function(t, i, n, r, o, s, a) {
        r = r || 1;
        var l = t;
        if (l.GroupGuid === bn.GroupGuid) {
            for (var h = function(e) {
                    if (g(o)) l[e].items = p.group(l[e].items, i, n, l.level + 1, null, s, a), l[e].count = l[e].items.length;
                    else {
                        var t, r = o.filter((function(t) {
                            return t.key === l[e].key
                        }));
                        t = o.indexOf(r[0]), l[e].items = p.group(l[e].items, i, n, l.level + 1, o[t].items, s, a), l[e].count = o[t].count
                    }
                }, p = this, d = 0; d < l.length; d++) h(d);
            return l.childLevels += 1, l
        }
        var c = {},
            u = [];
        u.GroupGuid = bn.GroupGuid, u.level = r, u.childLevels = 0, u.records = l;
        for (var f = function(e) {
                var t = m.getVal(l, e, i);
                if (g(s) || (t = s(t, i)), !c[t] && (c[t] = {
                        key: t,
                        count: 0,
                        items: [],
                        aggregates: {},
                        field: i
                    }, u.push(c[t]), !g(o))) {
                    var r = o.filter((function(e) {
                        return e.key === c[t].key
                    }));
                    c[t].count = r[0].count
                }
                c[t].count = g(o) ? c[t].count += 1 : c[t].count, (!a || a && n.length) && c[t].items.push(l[e])
            }, m = this, y = 0; y < l.length; y++) f(y);
        if (n && n.length) {
            var v = function(t) {
                for (var i = {}, r = void 0, s = n, a = 0; a < n.length; a++)
                    if (r = e.aggregates[n[a].type], g(o)) r && (i[s[a].field + " - " + s[a].type] = r(u[t].items, s[a].field));
                    else {
                        var l = o.filter((function(e) {
                            return e.key === u[t].key
                        }));
                        r && (i[s[a].field + " - " + s[a].type] = r(l[0].items, s[a].field))
                    } u[t].aggregates = i
            };
            for (y = 0; y < u.length; y++) v(y)
        }
        if (a && u.length && n.length)
            for (y = 0; y < u.length; y++) u[y].items = [];
        return l.length && u || l
    }, e.buildHierarchy = function(e, t, i, n, r) {
        var o, s = {};
        for (n.result && (n = n.result), n.GroupGuid && this.throwError("DataManager: Do not have support Grouping in hierarchy"), o = 0; o < n.length; o++) {
            (s[a = this.getObject(e, n[o])] || (s[a] = [])).push(n[o])
        }
        for (o = 0; o < i.length; o++) {
            var a = this.getObject(r || e, i[o]);
            i[o][t] = s[a]
        }
    }, e.getFieldList = function(e, t, i) {
        if (void 0 === i && (i = ""), null == t) return this.getFieldList(e, [], i);
        for (var n = e, r = 0, o = Object.keys(e); r < o.length; r++) {
            var s = o[r];
            "object" != typeof n[s] || n[s] instanceof Array ? t.push(i + s) : this.getFieldList(n[s], t, i + s + ".")
        }
        return t
    }, e.getObject = function(e, t) {
        if (!e) return t;
        if (t) {
            if (-1 === e.indexOf(".")) return t[e];
            for (var i = t, n = e.split("."), r = 0; r < n.length && null != i; r++) i = i[n[r]];
            return i
        }
    }, e.setValue = function(e, t, i) {
        var n, r, o = e.toString().split("."),
            s = i || {},
            a = s,
            l = o.length;
        for (n = 0; n < l; n++) r = o[n], n + 1 === l ? a[r] = void 0 === t ? void 0 : t : g(a[r]) && (a[r] = {}), a = a[r];
        return s
    }, e.sort = function(e, t, i) {
        if (e.length <= 1) return e;
        var n = parseInt((e.length / 2).toString(), 10),
            r = e.slice(0, n),
            o = e.slice(n);
        return r = this.sort(r, t, i), o = this.sort(o, t, i), this.merge(r, o, t, i)
    }, e.ignoreDiacritics = function(t) {
        return "string" != typeof t ? t : t.split("").map((function(t) {
            return t in e.diacritics ? e.diacritics[t] : t
        })).join("")
    }, e.merge = function(e, t, i, n) {
        for (var r, o = []; e.length > 0 || t.length > 0;) r = e.length > 0 && t.length > 0 ? n ? n(this.getVal(e, 0, i), this.getVal(t, 0, i), e[0], t[0]) <= 0 ? e : t : e[0][i] < e[0][i] ? e : t : e.length > 0 ? e : t, o.push(r.shift());
        return o
    }, e.getVal = function(e, t, i) {
        return i ? this.getObject(i, e[t]) : e[t]
    }, e.toLowerCase = function(e) {
        return e ? "string" == typeof e ? e.toLowerCase() : e.toString() : 0 === e || !1 === e ? e.toString() : ""
    }, e.callAdaptorFunction = function(e, t, i, n) {
        if (t in e) {
            var r = e[t](i, n);
            g(r) || (i = r)
        }
        return i
    }, e.getAddParams = function(t, i, n) {
        var r = {};
        return e.callAdaptorFunction(t, "addParams", {
            dm: i,
            query: n,
            params: n.params,
            reqParams: r
        }), r
    }, e.isPlainObject = function(e) {
        return !!e && e.constructor === Object
    }, e.isCors = function() {
        var e = null;
        try {
            e = new window.XMLHttpRequest
        } catch (e) {}
        return !!e && "withCredentials" in e
    }, e.getGuid = function(e) {
        var t;
        return (e || "") + "00000000-0000-4000-0000-000000000000".replace(/0/g, (function(e, i) {
            if ("crypto" in window && "getRandomValues" in crypto) {
                var n = new Uint8Array(1);
                window.crypto.getRandomValues(n), t = n[0] % 16 | 0
            } else t = 16 * Math.random() | 0;
            return "0123456789abcdef" [19 === i ? 3 & t | 8 : t]
        }))
    }, e.isNull = function(e) {
        return null == e
    }, e.getItemFromComparer = function(t, i, n) {
        var r, o, s, a = 0,
            l = "string" == typeof e.getVal(t, 0, i);
        if (t.length)
            for (; g(r) && a < t.length;) r = e.getVal(t, a, i), s = t[a++];
        for (; a < t.length; a++) g(o = e.getVal(t, a, i)) || (l && (r = +r, o = +o), n(r, o) > 0 && (r = o, s = t[a]));
        return s
    }, e.distinct = function(t, i, n) {
        n = !g(n) && n;
        var r, o = [],
            s = {};
        return t.forEach((function(a, l) {
            (r = "object" == typeof t[l] ? e.getVal(t, l, i) : t[l]) in s || (o.push(n ? t[l] : r), s[r] = 1)
        })), o
    }, e.serverTimezoneOffset = null, e.timeZoneHandling = !0, e.throwError = function(e) {
        try {
            throw new Error(e)
        } catch (e) {
            throw e.message + "\n" + e.stack
        }
    }, e.aggregates = {
        sum: function(t, i) {
            for (var n, r = 0, o = "number" != typeof e.getVal(t, 0, i), s = 0; s < t.length; s++) n = e.getVal(t, s, i), isNaN(n) || null === n || (o && (n = +n), r += n);
            return r
        },
        average: function(t, i) {
            return e.aggregates.sum(t, i) / t.length
        },
        min: function(t, i) {
            var n;
            return "function" == typeof i && (n = i, i = null), e.getObject(i, e.getItemFromComparer(t, i, n || e.fnAscending))
        },
        max: function(t, i) {
            var n;
            return "function" == typeof i && (n = i, i = null), e.getObject(i, e.getItemFromComparer(t, i, n || e.fnDescending))
        },
        truecount: function(e, t) {
            return new yn(e).executeLocal((new on).where(t, "equal", !0, !0)).length
        },
        falsecount: function(e, t) {
            return new yn(e).executeLocal((new on).where(t, "equal", !1, !0)).length
        },
        count: function(e, t) {
            return e.length
        }
    }, e.operatorSymbols = {
        "<": "lessthan",
        ">": "greaterthan",
        "<=": "lessthanorequal",
        ">=": "greaterthanorequal",
        "==": "equal",
        "!=": "notequal",
        "*=": "contains",
        "$=": "endswith",
        "^=": "startswith"
    }, e.odBiOperator = {
        "<": " lt ",
        ">": " gt ",
        "<=": " le ",
        ">=": " ge ",
        "==": " eq ",
        "!=": " ne ",
        lessthan: " lt ",
        lessthanorequal: " le ",
        greaterthan: " gt ",
        greaterthanorequal: " ge ",
        equal: " eq ",
        notequal: " ne "
    }, e.odUniOperator = {
        "$=": "endswith",
        "^=": "startswith",
        "*=": "substringof",
        endswith: "endswith",
        startswith: "startswith",
        contains: "substringof"
    }, e.odv4UniOperator = {
        "$=": "endswith",
        "^=": "startswith",
        "*=": "contains",
        endswith: "endswith",
        startswith: "startswith",
        contains: "contains"
    }, e.diacritics = {
        "â’¶": "A",
        "ï¼¡": "A",
        "Ã€": "A",
        "Ã": "A",
        "Ã‚": "A",
        "áº¦": "A",
        "áº¤": "A",
        "áºª": "A",
        "áº¨": "A",
        "Ãƒ": "A",
        "Ä€": "A",
        "Ä‚": "A",
        "áº°": "A",
        "áº®": "A",
        "áº´": "A",
        "áº²": "A",
        "È¦": "A",
        "Ç ": "A",
        "Ã„": "A",
        "Çž": "A",
        "áº¢": "A",
        "Ã…": "A",
        "Çº": "A",
        "Ç": "A",
        "È€": "A",
        "È‚": "A",
        "áº ": "A",
        "áº¬": "A",
        "áº¶": "A",
        "á¸€": "A",
        "Ä„": "A",
        "Èº": "A",
        "â±¯": "A",
        "êœ²": "AA",
        "Ã†": "AE",
        "Ç¼": "AE",
        "Ç¢": "AE",
        "êœ´": "AO",
        "êœ¶": "AU",
        "êœ¸": "AV",
        "êœº": "AV",
        "êœ¼": "AY",
        "â’·": "B",
        "ï¼¢": "B",
        "á¸‚": "B",
        "á¸„": "B",
        "á¸†": "B",
        "Éƒ": "B",
        "Æ‚": "B",
        "Æ": "B",
        "â’¸": "C",
        "ï¼£": "C",
        "Ä†": "C",
        "Äˆ": "C",
        "ÄŠ": "C",
        "ÄŒ": "C",
        "Ã‡": "C",
        "á¸ˆ": "C",
        "Æ‡": "C",
        "È»": "C",
        "êœ¾": "C",
        "â’¹": "D",
        "ï¼¤": "D",
        "á¸Š": "D",
        "ÄŽ": "D",
        "á¸Œ": "D",
        "á¸": "D",
        "á¸’": "D",
        "á¸Ž": "D",
        "Ä": "D",
        "Æ‹": "D",
        "ÆŠ": "D",
        "Æ‰": "D",
        "ê¹": "D",
        "Ç±": "DZ",
        "Ç„": "DZ",
        "Ç²": "Dz",
        "Ç…": "Dz",
        "â’º": "E",
        "ï¼¥": "E",
        "Ãˆ": "E",
        "Ã‰": "E",
        "ÃŠ": "E",
        "á»€": "E",
        "áº¾": "E",
        "á»„": "E",
        "á»‚": "E",
        "áº¼": "E",
        "Ä’": "E",
        "á¸”": "E",
        "á¸–": "E",
        "Ä”": "E",
        "Ä–": "E",
        "Ã‹": "E",
        "áºº": "E",
        "Äš": "E",
        "È„": "E",
        "È†": "E",
        "áº¸": "E",
        "á»†": "E",
        "È¨": "E",
        "á¸œ": "E",
        "Ä˜": "E",
        "á¸˜": "E",
        "á¸š": "E",
        "Æ": "E",
        "ÆŽ": "E",
        "â’»": "F",
        "ï¼¦": "F",
        "á¸ž": "F",
        "Æ‘": "F",
        "ê»": "F",
        "â’¼": "G",
        "ï¼§": "G",
        "Ç´": "G",
        "Äœ": "G",
        "á¸ ": "G",
        "Äž": "G",
        "Ä ": "G",
        "Ç¦": "G",
        "Ä¢": "G",
        "Ç¤": "G",
        "Æ“": "G",
        "êž ": "G",
        "ê½": "G",
        "ê¾": "G",
        "â’½": "H",
        "ï¼¨": "H",
        "Ä¤": "H",
        "á¸¢": "H",
        "á¸¦": "H",
        "Èž": "H",
        "á¸¤": "H",
        "á¸¨": "H",
        "á¸ª": "H",
        "Ä¦": "H",
        "â±§": "H",
        "â±µ": "H",
        "êž": "H",
        "â’¾": "I",
        "ï¼©": "I",
        "ÃŒ": "I",
        "Ã": "I",
        "ÃŽ": "I",
        "Ä¨": "I",
        "Äª": "I",
        "Ä¬": "I",
        "Ä°": "I",
        "Ã": "I",
        "á¸®": "I",
        "á»ˆ": "I",
        "Ç": "I",
        "Èˆ": "I",
        "ÈŠ": "I",
        "á»Š": "I",
        "Ä®": "I",
        "á¸¬": "I",
        "Æ—": "I",
        "â’¿": "J",
        "ï¼ª": "J",
        "Ä´": "J",
        "Éˆ": "J",
        "â“€": "K",
        "ï¼«": "K",
        "á¸°": "K",
        "Ç¨": "K",
        "á¸²": "K",
        "Ä¶": "K",
        "á¸´": "K",
        "Æ˜": "K",
        "â±©": "K",
        "ê€": "K",
        "ê‚": "K",
        "ê„": "K",
        "êž¢": "K",
        "â“": "L",
        "ï¼¬": "L",
        "Ä¿": "L",
        "Ä¹": "L",
        "Ä½": "L",
        "á¸¶": "L",
        "á¸¸": "L",
        "Ä»": "L",
        "á¸¼": "L",
        "á¸º": "L",
        "Å": "L",
        "È½": "L",
        "â±¢": "L",
        "â± ": "L",
        "êˆ": "L",
        "ê†": "L",
        "êž€": "L",
        "Ç‡": "LJ",
        "Çˆ": "Lj",
        "â“‚": "M",
        "ï¼­": "M",
        "á¸¾": "M",
        "á¹€": "M",
        "á¹‚": "M",
        "â±®": "M",
        "Æœ": "M",
        "â“ƒ": "N",
        "ï¼®": "N",
        "Ç¸": "N",
        "Åƒ": "N",
        "Ã‘": "N",
        "á¹„": "N",
        "Å‡": "N",
        "á¹†": "N",
        "Å…": "N",
        "á¹Š": "N",
        "á¹ˆ": "N",
        "È ": "N",
        "Æ": "N",
        "êž": "N",
        "êž¤": "N",
        "ÇŠ": "NJ",
        "Ç‹": "Nj",
        "â“„": "O",
        "ï¼¯": "O",
        "Ã’": "O",
        "Ã“": "O",
        "Ã”": "O",
        "á»’": "O",
        "á»": "O",
        "á»–": "O",
        "á»”": "O",
        "Ã•": "O",
        "á¹Œ": "O",
        "È¬": "O",
        "á¹Ž": "O",
        "ÅŒ": "O",
        "á¹": "O",
        "á¹’": "O",
        "ÅŽ": "O",
        "È®": "O",
        "È°": "O",
        "Ã–": "O",
        "Èª": "O",
        "á»Ž": "O",
        "Å": "O",
        "Ç‘": "O",
        "ÈŒ": "O",
        "ÈŽ": "O",
        "Æ ": "O",
        "á»œ": "O",
        "á»š": "O",
        "á» ": "O",
        "á»ž": "O",
        "á»¢": "O",
        "á»Œ": "O",
        "á»˜": "O",
        "Çª": "O",
        "Ç¬": "O",
        "Ã˜": "O",
        "Ç¾": "O",
        "Æ†": "O",
        "ÆŸ": "O",
        "êŠ": "O",
        "êŒ": "O",
        "Æ¢": "OI",
        "êŽ": "OO",
        "È¢": "OU",
        "â“…": "P",
        "ï¼°": "P",
        "á¹”": "P",
        "á¹–": "P",
        "Æ¤": "P",
        "â±£": "P",
        "ê": "P",
        "ê’": "P",
        "ê”": "P",
        "â“†": "Q",
        "ï¼±": "Q",
        "ê–": "Q",
        "ê˜": "Q",
        "ÉŠ": "Q",
        "â“‡": "R",
        "ï¼²": "R",
        "Å”": "R",
        "á¹˜": "R",
        "Å˜": "R",
        "È": "R",
        "È’": "R",
        "á¹š": "R",
        "á¹œ": "R",
        "Å–": "R",
        "á¹ž": "R",
        "ÉŒ": "R",
        "â±¤": "R",
        "êš": "R",
        "êž¦": "R",
        "êž‚": "R",
        "â“ˆ": "S",
        "ï¼³": "S",
        "áºž": "S",
        "Åš": "S",
        "á¹¤": "S",
        "Åœ": "S",
        "á¹ ": "S",
        "Å ": "S",
        "á¹¦": "S",
        "á¹¢": "S",
        "á¹¨": "S",
        "È˜": "S",
        "Åž": "S",
        "â±¾": "S",
        "êž¨": "S",
        "êž„": "S",
        "â“‰": "T",
        "ï¼´": "T",
        "á¹ª": "T",
        "Å¤": "T",
        "á¹¬": "T",
        "Èš": "T",
        "Å¢": "T",
        "á¹°": "T",
        "á¹®": "T",
        "Å¦": "T",
        "Æ¬": "T",
        "Æ®": "T",
        "È¾": "T",
        "êž†": "T",
        "êœ¨": "TZ",
        "â“Š": "U",
        "ï¼µ": "U",
        "Ã™": "U",
        "Ãš": "U",
        "Ã›": "U",
        "Å¨": "U",
        "á¹¸": "U",
        "Åª": "U",
        "á¹º": "U",
        "Å¬": "U",
        "Ãœ": "U",
        "Ç›": "U",
        "Ç—": "U",
        "Ç•": "U",
        "Ç™": "U",
        "á»¦": "U",
        "Å®": "U",
        "Å°": "U",
        "Ç“": "U",
        "È”": "U",
        "È–": "U",
        "Æ¯": "U",
        "á»ª": "U",
        "á»¨": "U",
        "á»®": "U",
        "á»¬": "U",
        "á»°": "U",
        "á»¤": "U",
        "á¹²": "U",
        "Å²": "U",
        "á¹¶": "U",
        "á¹´": "U",
        "É„": "U",
        "â“‹": "V",
        "ï¼¶": "V",
        "á¹¼": "V",
        "á¹¾": "V",
        "Æ²": "V",
        "êž": "V",
        "É…": "V",
        "ê ": "VY",
        "â“Œ": "W",
        "ï¼·": "W",
        "áº€": "W",
        "áº‚": "W",
        "Å´": "W",
        "áº†": "W",
        "áº„": "W",
        "áºˆ": "W",
        "â±²": "W",
        "â“": "X",
        "ï¼¸": "X",
        "áºŠ": "X",
        "áºŒ": "X",
        "â“Ž": "Y",
        "ï¼¹": "Y",
        "á»²": "Y",
        "Ã": "Y",
        "Å¶": "Y",
        "á»¸": "Y",
        "È²": "Y",
        "áºŽ": "Y",
        "Å¸": "Y",
        "á»¶": "Y",
        "á»´": "Y",
        "Æ³": "Y",
        "ÉŽ": "Y",
        "á»¾": "Y",
        "â“": "Z",
        "ï¼º": "Z",
        "Å¹": "Z",
        "áº": "Z",
        "Å»": "Z",
        "Å½": "Z",
        "áº’": "Z",
        "áº”": "Z",
        "Æµ": "Z",
        "È¤": "Z",
        "â±¿": "Z",
        "â±«": "Z",
        "ê¢": "Z",
        "â“": "a",
        "ï½": "a",
        "áºš": "a",
        "Ã ": "a",
        "Ã¡": "a",
        "Ã¢": "a",
        "áº§": "a",
        "áº¥": "a",
        "áº«": "a",
        "áº©": "a",
        "Ã£": "a",
        "Ä": "a",
        "Äƒ": "a",
        "áº±": "a",
        "áº¯": "a",
        "áºµ": "a",
        "áº³": "a",
        "È§": "a",
        "Ç¡": "a",
        "Ã¤": "a",
        "ÇŸ": "a",
        "áº£": "a",
        "Ã¥": "a",
        "Ç»": "a",
        "ÇŽ": "a",
        "È": "a",
        "Èƒ": "a",
        "áº¡": "a",
        "áº­": "a",
        "áº·": "a",
        "á¸": "a",
        "Ä…": "a",
        "â±¥": "a",
        "É": "a",
        "êœ³": "aa",
        "Ã¦": "ae",
        "Ç½": "ae",
        "Ç£": "ae",
        "êœµ": "ao",
        "êœ·": "au",
        "êœ¹": "av",
        "êœ»": "av",
        "êœ½": "ay",
        "â“‘": "b",
        "ï½‚": "b",
        "á¸ƒ": "b",
        "á¸…": "b",
        "á¸‡": "b",
        "Æ€": "b",
        "Æƒ": "b",
        "É“": "b",
        "â“’": "c",
        "ï½ƒ": "c",
        "Ä‡": "c",
        "Ä‰": "c",
        "Ä‹": "c",
        "Ä": "c",
        "Ã§": "c",
        "á¸‰": "c",
        "Æˆ": "c",
        "È¼": "c",
        "êœ¿": "c",
        "â†„": "c",
        "â““": "d",
        "ï½„": "d",
        "á¸‹": "d",
        "Ä": "d",
        "á¸": "d",
        "á¸‘": "d",
        "á¸“": "d",
        "á¸": "d",
        "Ä‘": "d",
        "ÆŒ": "d",
        "É–": "d",
        "É—": "d",
        "êº": "d",
        "Ç³": "dz",
        "Ç†": "dz",
        "â“”": "e",
        "ï½…": "e",
        "Ã¨": "e",
        "Ã©": "e",
        "Ãª": "e",
        "á»": "e",
        "áº¿": "e",
        "á»…": "e",
        "á»ƒ": "e",
        "áº½": "e",
        "Ä“": "e",
        "á¸•": "e",
        "á¸—": "e",
        "Ä•": "e",
        "Ä—": "e",
        "Ã«": "e",
        "áº»": "e",
        "Ä›": "e",
        "È…": "e",
        "È‡": "e",
        "áº¹": "e",
        "á»‡": "e",
        "È©": "e",
        "á¸": "e",
        "Ä™": "e",
        "á¸™": "e",
        "á¸›": "e",
        "É‡": "e",
        "É›": "e",
        "Ç": "e",
        "â“•": "f",
        "ï½†": "f",
        "á¸Ÿ": "f",
        "Æ’": "f",
        "ê¼": "f",
        "â“–": "g",
        "ï½‡": "g",
        "Çµ": "g",
        "Ä": "g",
        "á¸¡": "g",
        "ÄŸ": "g",
        "Ä¡": "g",
        "Ç§": "g",
        "Ä£": "g",
        "Ç¥": "g",
        "É ": "g",
        "êž¡": "g",
        "áµ¹": "g",
        "ê¿": "g",
        "â“—": "h",
        "ï½ˆ": "h",
        "Ä¥": "h",
        "á¸£": "h",
        "á¸§": "h",
        "ÈŸ": "h",
        "á¸¥": "h",
        "á¸©": "h",
        "á¸«": "h",
        "áº–": "h",
        "Ä§": "h",
        "â±¨": "h",
        "â±¶": "h",
        "É¥": "h",
        "Æ•": "hv",
        "â“˜": "i",
        "ï½‰": "i",
        "Ã¬": "i",
        "Ã­": "i",
        "Ã®": "i",
        "Ä©": "i",
        "Ä«": "i",
        "Ä­": "i",
        "Ã¯": "i",
        "á¸¯": "i",
        "á»‰": "i",
        "Ç": "i",
        "È‰": "i",
        "È‹": "i",
        "á»‹": "i",
        "Ä¯": "i",
        "á¸­": "i",
        "É¨": "i",
        "Ä±": "i",
        "â“™": "j",
        "ï½Š": "j",
        "Äµ": "j",
        "Ç°": "j",
        "É‰": "j",
        "â“š": "k",
        "ï½‹": "k",
        "á¸±": "k",
        "Ç©": "k",
        "á¸³": "k",
        "Ä·": "k",
        "á¸µ": "k",
        "Æ™": "k",
        "â±ª": "k",
        "ê": "k",
        "êƒ": "k",
        "ê…": "k",
        "êž£": "k",
        "â“›": "l",
        "ï½Œ": "l",
        "Å€": "l",
        "Äº": "l",
        "Ä¾": "l",
        "á¸·": "l",
        "á¸¹": "l",
        "Ä¼": "l",
        "á¸½": "l",
        "á¸»": "l",
        "Å¿": "l",
        "Å‚": "l",
        "Æš": "l",
        "É«": "l",
        "â±¡": "l",
        "ê‰": "l",
        "êž": "l",
        "ê‡": "l",
        "Ç‰": "lj",
        "â“œ": "m",
        "ï½": "m",
        "á¸¿": "m",
        "á¹": "m",
        "á¹ƒ": "m",
        "É±": "m",
        "É¯": "m",
        "â“": "n",
        "ï½Ž": "n",
        "Ç¹": "n",
        "Å„": "n",
        "Ã±": "n",
        "á¹…": "n",
        "Åˆ": "n",
        "á¹‡": "n",
        "Å†": "n",
        "á¹‹": "n",
        "á¹‰": "n",
        "Æž": "n",
        "É²": "n",
        "Å‰": "n",
        "êž‘": "n",
        "êž¥": "n",
        "ÇŒ": "nj",
        "â“ž": "o",
        "ï½": "o",
        "Ã²": "o",
        "Ã³": "o",
        "Ã´": "o",
        "á»“": "o",
        "á»‘": "o",
        "á»—": "o",
        "á»•": "o",
        "Ãµ": "o",
        "á¹": "o",
        "È­": "o",
        "á¹": "o",
        "Å": "o",
        "á¹‘": "o",
        "á¹“": "o",
        "Å": "o",
        "È¯": "o",
        "È±": "o",
        "Ã¶": "o",
        "È«": "o",
        "á»": "o",
        "Å‘": "o",
        "Ç’": "o",
        "È": "o",
        "È": "o",
        "Æ¡": "o",
        "á»": "o",
        "á»›": "o",
        "á»¡": "o",
        "á»Ÿ": "o",
        "á»£": "o",
        "á»": "o",
        "á»™": "o",
        "Ç«": "o",
        "Ç­": "o",
        "Ã¸": "o",
        "Ç¿": "o",
        "É”": "o",
        "ê‹": "o",
        "ê": "o",
        "Éµ": "o",
        "Æ£": "oi",
        "È£": "ou",
        "ê": "oo",
        "â“Ÿ": "p",
        "ï½": "p",
        "á¹•": "p",
        "á¹—": "p",
        "Æ¥": "p",
        "áµ½": "p",
        "ê‘": "p",
        "ê“": "p",
        "ê•": "p",
        "â“ ": "q",
        "ï½‘": "q",
        "É‹": "q",
        "ê—": "q",
        "ê™": "q",
        "â“¡": "r",
        "ï½’": "r",
        "Å•": "r",
        "á¹™": "r",
        "Å™": "r",
        "È‘": "r",
        "È“": "r",
        "á¹›": "r",
        "á¹": "r",
        "Å—": "r",
        "á¹Ÿ": "r",
        "É": "r",
        "É½": "r",
        "ê›": "r",
        "êž§": "r",
        "êžƒ": "r",
        "â“¢": "s",
        "ï½“": "s",
        "ÃŸ": "s",
        "Å›": "s",
        "á¹¥": "s",
        "Å": "s",
        "á¹¡": "s",
        "Å¡": "s",
        "á¹§": "s",
        "á¹£": "s",
        "á¹©": "s",
        "È™": "s",
        "ÅŸ": "s",
        "È¿": "s",
        "êž©": "s",
        "êž…": "s",
        "áº›": "s",
        "â“£": "t",
        "ï½”": "t",
        "á¹«": "t",
        "áº—": "t",
        "Å¥": "t",
        "á¹­": "t",
        "È›": "t",
        "Å£": "t",
        "á¹±": "t",
        "á¹¯": "t",
        "Å§": "t",
        "Æ­": "t",
        "Êˆ": "t",
        "â±¦": "t",
        "êž‡": "t",
        "êœ©": "tz",
        "â“¤": "u",
        "ï½•": "u",
        "Ã¹": "u",
        "Ãº": "u",
        "Ã»": "u",
        "Å©": "u",
        "á¹¹": "u",
        "Å«": "u",
        "á¹»": "u",
        "Å­": "u",
        "Ã¼": "u",
        "Çœ": "u",
        "Ç˜": "u",
        "Ç–": "u",
        "Çš": "u",
        "á»§": "u",
        "Å¯": "u",
        "Å±": "u",
        "Ç”": "u",
        "È•": "u",
        "È—": "u",
        "Æ°": "u",
        "á»«": "u",
        "á»©": "u",
        "á»¯": "u",
        "á»­": "u",
        "á»±": "u",
        "á»¥": "u",
        "á¹³": "u",
        "Å³": "u",
        "á¹·": "u",
        "á¹µ": "u",
        "Ê‰": "u",
        "â“¥": "v",
        "ï½–": "v",
        "á¹½": "v",
        "á¹¿": "v",
        "Ê‹": "v",
        "êŸ": "v",
        "ÊŒ": "v",
        "ê¡": "vy",
        "â“¦": "w",
        "ï½—": "w",
        "áº": "w",
        "áºƒ": "w",
        "Åµ": "w",
        "áº‡": "w",
        "áº…": "w",
        "áº˜": "w",
        "áº‰": "w",
        "â±³": "w",
        "â“§": "x",
        "ï½˜": "x",
        "áº‹": "x",
        "áº": "x",
        "â“¨": "y",
        "ï½™": "y",
        "á»³": "y",
        "Ã½": "y",
        "Å·": "y",
        "á»¹": "y",
        "È³": "y",
        "áº": "y",
        "Ã¿": "y",
        "á»·": "y",
        "áº™": "y",
        "á»µ": "y",
        "Æ´": "y",
        "É": "y",
        "á»¿": "y",
        "â“©": "z",
        "ï½š": "z",
        "Åº": "z",
        "áº‘": "z",
        "Å¼": "z",
        "Å¾": "z",
        "áº“": "z",
        "áº•": "z",
        "Æ¶": "z",
        "È¥": "z",
        "É€": "z",
        "â±¬": "z",
        "ê£": "z",
        "Î†": "Î‘",
        "Îˆ": "Î•",
        "Î‰": "Î—",
        "ÎŠ": "Î™",
        "Îª": "Î™",
        "ÎŒ": "ÎŸ",
        "ÎŽ": "Î¥",
        "Î«": "Î¥",
        "Î": "Î©",
        "Î¬": "Î±",
        "Î­": "Îµ",
        "Î®": "Î·",
        "Î¯": "Î¹",
        "ÏŠ": "Î¹",
        "Î": "Î¹",
        "ÏŒ": "Î¿",
        "Ï": "Ï…",
        "Ï‹": "Ï…",
        "Î°": "Ï…",
        "Ï‰": "Ï‰",
        "Ï‚": "Ïƒ"
    }, e.fnOperators = {
        equal: function(t, i, n, r) {
            return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? e.toLowerCase(t) === e.toLowerCase(i) : t === i
        },
        notequal: function(t, i, n, r) {
            return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), !e.fnOperators.equal(t, i, n)
        },
        lessthan: function(t, i, n) {
            return n ? e.toLowerCase(t) < e.toLowerCase(i) : t < i
        },
        greaterthan: function(t, i, n) {
            return n ? e.toLowerCase(t) > e.toLowerCase(i) : t > i
        },
        lessthanorequal: function(t, i, n) {
            return n ? e.toLowerCase(t) <= e.toLowerCase(i) : t <= i
        },
        greaterthanorequal: function(t, i, n) {
            return n ? e.toLowerCase(t) >= e.toLowerCase(i) : t >= i
        },
        contains: function(t, i, n, r) {
            return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? !g(t) && !g(i) && -1 !== e.toLowerCase(t).indexOf(e.toLowerCase(i)) : !g(t) && !g(i) && -1 !== t.toString().indexOf(i)
        },
        notnull: function(e) {
            return null !== e
        },
        isnull: function(e) {
            return null === e
        },
        startswith: function(t, i, n, r) {
            return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? t && i && e.startsWith(e.toLowerCase(t), e.toLowerCase(i)) : t && i && e.startsWith(t, i)
        },
        endswith: function(t, i, n, r) {
            return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? t && i && e.endsWith(e.toLowerCase(t), e.toLowerCase(i)) : t && i && e.endsWith(t, i)
        },
        processSymbols: function(t) {
            var i = e.operatorSymbols[t];
            return i ? e.fnOperators[i] : e.throwError("Query - Process Operator : Invalid operator")
        },
        processOperator: function(t) {
            var i = e.fnOperators[t];
            return i || e.fnOperators.processSymbols(t)
        }
    }, e.parse = {
        parseJson: function(t) {
            return "string" == typeof t ? t = JSON.parse(t, e.parse.jsonReviver) : t instanceof Array ? e.parse.iterateAndReviveArray(t) : "object" == typeof t && null !== t && e.parse.iterateAndReviveJson(t), t
        },
        iterateAndReviveArray: function(t) {
            for (var i = 0; i < t.length; i++) "object" == typeof t[i] && null !== t[i] ? e.parse.iterateAndReviveJson(t[i]) : "string" != typeof t[i] || /^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i]) ? t[i] = e.parse.parseJson(t[i]) : t[i] = e.parse.jsonReviver("", t[i])
        },
        iterateAndReviveJson: function(t) {
            for (var i, n = 0, r = Object.keys(t); n < r.length; n++) {
                var o = r[n];
                e.startsWith(o, "__") || ("object" == typeof(i = t[o]) ? i instanceof Array ? e.parse.iterateAndReviveArray(i) : i && e.parse.iterateAndReviveJson(i) : t[o] = e.parse.jsonReviver(t[o], i))
            }
        },
        jsonReviver: function(t, i) {
            if ("string" == typeof i) {
                var n = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),
                    r = e.timeZoneHandling ? e.serverTimezoneOffset : null;
                if (n) return e.dateParse.toTimeZone(new Date(parseInt(n[1], 10)), r, !0);
                if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)) {
                    var o = i.indexOf("Z") > -1 || i.indexOf("z") > -1,
                        s = i.split(/[^0-9.]/);
                    if (o) i = e.dateParse.toTimeZone(new Date(parseInt(s[0], 10), parseInt(s[1], 10) - 1, parseInt(s[2], 10), parseInt(s[3], 10), parseInt(s[4], 10), parseInt(s[5], 10)), e.serverTimezoneOffset, !1);
                    else {
                        var a = new Date(parseInt(s[0], 10), parseInt(s[1], 10) - 1, parseInt(s[2], 10), parseInt(s[3], 10), parseInt(s[4], 10), parseInt(s[5], 10)),
                            l = parseInt(s[6], 10),
                            h = parseInt(s[7], 10);
                        if (isNaN(l) && isNaN(h)) return a;
                        i.indexOf("+") > -1 ? a.setHours(a.getHours() - l, a.getMinutes() - h) : a.setHours(a.getHours() + l, a.getMinutes() + h), i = e.dateParse.toTimeZone(a, e.serverTimezoneOffset, !1)
                    }
                    null == e.serverTimezoneOffset && (i = e.dateParse.addSelfOffset(i))
                }
            }
            return i
        },
        isJson: function(t) {
            return "string" == typeof t[0] ? t : e.parse.parseJson(t)
        },
        isGuid: function(e) {
            return null != /[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)
        },
        replacer: function(t, i) {
            return e.isPlainObject(t) ? e.parse.jsonReplacer(t, i) : t instanceof Array ? e.parse.arrayReplacer(t) : t instanceof Date ? e.parse.jsonReplacer({
                val: t
            }, i).val : t
        },
        jsonReplacer: function(t, i) {
            for (var n, r = 0, o = Object.keys(t); r < o.length; r++) {
                var s = o[r];
                if ((n = t[s]) instanceof Date) {
                    var a = n;
                    null == e.serverTimezoneOffset ? t[s] = e.dateParse.toTimeZone(a, null).toJSON() : (a = new Date(+a + 36e5 * e.serverTimezoneOffset), t[s] = e.dateParse.toTimeZone(e.dateParse.addSelfOffset(a), null).toJSON())
                }
            }
            return t
        },
        arrayReplacer: function(t) {
            for (var i = 0; i < t.length; i++) e.isPlainObject(t[i]) ? t[i] = e.parse.jsonReplacer(t[i]) : t[i] instanceof Date && (t[i] = e.parse.jsonReplacer({
                date: t[i]
            }).date);
            return t
        },
        jsonDateReplacer: function(t, i) {
            if ("value" === t && i) {
                if ("string" == typeof i) {
                    var n = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);
                    if (n) i = e.dateParse.toTimeZone(new Date(parseInt(n[1], 10)), null, !0);
                    else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)) {
                        var r = i.split(/[^0-9]/);
                        i = e.dateParse.toTimeZone(new Date(parseInt(r[0], 10), parseInt(r[1], 10) - 1, parseInt(r[2], 10), parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10)), null, !0)
                    }
                }
                if (i instanceof Date) return i = e.dateParse.addSelfOffset(i), null === e.serverTimezoneOffset ? e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i), null).toJSON() : (i = e.dateParse.toTimeZone(i, i.getTimezoneOffset() / 60 * 2 - e.serverTimezoneOffset, !1)).toJSON()
            }
            return i
        }
    }, e.dateParse = {
        addSelfOffset: function(e) {
            return new Date(+e - 6e4 * e.getTimezoneOffset())
        },
        toUTC: function(e) {
            return new Date(+e + 6e4 * e.getTimezoneOffset())
        },
        toTimeZone: function(t, i, n) {
            if (null === i) return t;
            var r = n ? e.dateParse.toUTC(t) : t;
            return new Date(+r - 36e5 * i)
        },
        toLocalTime: function(e) {
            var t = e,
                i = -t.getTimezoneOffset(),
                n = i >= 0 ? "+" : "-",
                r = function(e) {
                    var t = Math.floor(Math.abs(e));
                    return (t < 10 ? "0" : "") + t
                };
            return t.getFullYear() + "-" + r(t.getMonth() + 1) + "-" + r(t.getDate()) + "T" + r(t.getHours()) + ":" + r(t.getMinutes()) + ":" + r(t.getSeconds()) + n + r(i / 60) + ":" + r(i % 60)
        }
    }, e
}(), Cn = function() {
    function e(e) {
        this.intl = new ee, g(e) || (this.intl.culture = e)
    }
    return e.prototype.getFormatFunction = function(e) {
        if (e.type) {
            if (S()) {
                e.isServerRendered = !0
            }
            return this.intl.getDateFormat(e)
        }
        return this.intl.getNumberFormat(e)
    }, e.prototype.getParserFunction = function(e) {
        if (e.type) {
            if (S()) {
                e.isServerRendered = !0
            }
            return this.intl.getDateParser(e)
        }
        return this.intl.getNumberParser(e)
    }, e.prototype.fromView = function(e, t, i) {
        return "date" !== i && "datetime" !== i && "number" !== i || g(t) ? e : t(e)
    }, e.prototype.toView = function(e, t) {
        var i = e;
        return g(t) || g(e) || (i = t(e)), i
    }, e.prototype.setCulture = function(e) {
        g(e) || function(e) {
            Q = e, K.notify("notifyExternalChange", {
                locale: Q
            })
        }(e)
    }, e
}(), Sn = function(e, t, i, n) {
    var r, o = arguments.length,
        s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
    else
        for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
    return o > 3 && s && Object.defineProperty(t, i, s), s
}, xn = function() {
    function e(e) {
        var t = this;
        this.disableHtmlEncode = !0, this.allowSorting = !0, this.allowResizing = !0, this.allowFiltering = !0, this.allowGrouping = !0, this.allowReordering = !0, this.showColumnMenu = !0, this.enableGroupByFormat = !1, this.allowEditing = !0, this.filter = {}, this.showInColumnChooser = !0, this.edit = {}, this.allowSearching = !0, this.autoFit = !1, this.sortDirection = "Descending", this.getEditTemplate = function() {
            return t.editTemplateFn
        }, this.getFilterTemplate = function() {
            return t.filterTemplateFn
        }, c(this, e), "none" === this.type ? this.type = S() && !g(this.template) && g(this.field) ? "none" : null : this.type && (this.type = "string" == typeof this.type ? this.type.toLowerCase() : void 0), this.editType && (this.editType = this.editType.toLowerCase()), g(this.uid) && (this.uid = Za("grid-column"));
        var i = new Cn;
        if (e.format && (e.format.skeleton || e.format.format) && (this.setFormatter(i.getFormatFunction(u({}, e.format))), this.setParser(i.getParserFunction(e.format))), this.toJSON = function() {
                for (var e = {}, i = ["filter", "dataSource", S() ? " " : "headerText", "template", "headerTemplate", "edit", "editTemplate", "filterTemplate", "commandsTemplate"], n = Object.keys(t), r = 0; r < n.length; r++)
                    if ("columns" === n[r]) {
                        e[n[r]] = [];
                        for (var o = 0; o < t[n[r]].length; o++) e[n[r]].push(t[n[r]][o].toJSON())
                    } else i.indexOf(n[r]) < 0 && (e[n[r]] = t[n[r]]);
                return e
            }, this.field || (this.allowFiltering = !1, this.allowGrouping = !1, this.allowSorting = !1, this.columns && (this.allowResizing = this.columns.some((function(e) {
                return e.allowResizing
            })))), this.commands && !this.textAlign && (this.textAlign = "Right"), (this.template || this.commandsTemplate) && (this.templateFn = ja(this.template || this.commandsTemplate)), this.headerTemplate && (this.headerTemplateFn = ja(this.headerTemplate)), !g(this.filter) && this.filter.itemTemplate && (this.fltrTemplateFn = ja(this.filter.itemTemplate)), this.editTemplate && (this.editTemplateFn = ja(this.editTemplate)), this.filterTemplate && (this.filterTemplateFn = ja(this.filterTemplate)), this.isForeignColumn() && (g(this.editType) || "dropdownedit" === this.editType || "defaultedit" === this.editType) && (this.editType = "dropdownedit", this.edit.params = u({
                dataSource: this.dataSource,
                query: new on,
                fields: {
                    value: this.foreignKeyField || this.field,
                    text: this.foreignKeyValue
                }
            }, this.edit.params)), this.sortComparer) {
            var n = this.sortComparer;
            this.sortComparer = function(e, t, i, r) {
                if ("string" == typeof n && (n = xl(n, window)), "Descending" === this.sortDirection) {
                    var o = e;
                    e = t, t = o;
                    var s = i;
                    i = r, r = s
                }
                return n(e, t, i, r)
            }
        }!this.sortComparer && this.isForeignColumn() && (this.sortComparer = function(e, i) {
            return e = xl(t.foreignKeyValue, bl(t, {}, e)[0]), i = xl(t.foreignKeyValue, bl(t, {}, i)[0]), "Descending" === t.sortDirection ? wn.fnDescending(e, i) : wn.fnAscending(e, i)
        })
    }
    return e.prototype.getSortDirection = function() {
        return this.sortDirection
    }, e.prototype.setSortDirection = function(e) {
        this.sortDirection = e
    }, e.prototype.setProperties = function(e) {
        for (var t = Object.keys(e), i = 0; i < t.length; i++) this[t[i]] = e[t[i]]
    }, e.prototype.isForeignColumn = function() {
        return !(!this.dataSource || !this.foreignKeyValue)
    }, e.prototype.getFormatter = function() {
        return this.formatFn
    }, e.prototype.setFormatter = function(e) {
        this.formatFn = e
    }, e.prototype.getParser = function() {
        return this.parserFn
    }, e.prototype.setParser = function(e) {
        this.parserFn = e
    }, e.prototype.getColumnTemplate = function() {
        return this.templateFn
    }, e.prototype.getHeaderTemplate = function() {
        return this.headerTemplateFn
    }, e.prototype.getFilterItemTemplate = function() {
        return this.fltrTemplateFn
    }, e.prototype.getDomSetter = function() {
        return this.disableHtmlEncode ? "textContent" : "innerHTML"
    }, e
}(), kn = (function() {
    function e() {}
    Sn([zt()], e.prototype, "title", void 0), Sn([zt()], e.prototype, "type", void 0), Sn([zt()], e.prototype, "buttonOption", void 0)
}(), !1);

function Tn(e, t) {
    var i = !1,
        n = {
            left: 0,
            top: 0
        },
        r = e;
    if (!e || !t) return n;
    for (g(t.offsetParent) && "fixed" === t.style.position && (i = !0);
        (t.offsetParent || i) && e && t.offsetParent !== e;) n.left += e.offsetLeft, n.top += e.offsetTop, e = e.offsetParent;
    for (e = r;
        (t.offsetParent || i) && e && t.offsetParent !== e;) n.left -= e.scrollLeft, n.top -= e.scrollTop, e = e.parentElement;
    return n
}

function Dn(e, t, i, n, r) {
    if ($i = i + t === "topright" ? void 0 : r, $i = r, kn = !!n, !e) return {
        left: 0,
        top: 0
    };
    t || (t = "left"), i || (i = "top"), tn = e.ownerDocument, en = e;
    return function(e, t, i) {
        switch (Zi = en.getBoundingClientRect(), t + e) {
            case "topcenter":
                En(Fn(), i), Rn(On(), i);
                break;
            case "topright":
                En(Bn(), i), Rn(On(), i);
                break;
            case "centercenter":
                En(Fn(), i), Rn(Ln(), i);
                break;
            case "centerright":
                En(Bn(), i), Rn(Ln(), i);
                break;
            case "centerleft":
                En(An(), i), Rn(Ln(), i);
                break;
            case "bottomcenter":
                En(Fn(), i), Rn(Mn(), i);
                break;
            case "bottomright":
                En(Bn(), i), Rn(Mn(), i);
                break;
            case "bottomleft":
                En(An(), i), Rn(Mn(), i);
                break;
            default:
            case "topleft":
                En(An(), i), Rn(On(), i)
        }
        return i
    }(t.toLowerCase(), i.toLowerCase(), {
        left: 0,
        top: 0
    })
}

function En(e, t) {
    t.left = e
}

function Rn(e, t) {
    t.top = e
}

function Pn() {
    return tn.documentElement.scrollTop || tn.body.scrollTop
}

function In() {
    return tn.documentElement.scrollLeft || tn.body.scrollLeft
}

function Mn() {
    return kn ? Zi.bottom : Zi.bottom + Pn()
}

function Ln() {
    return On() + Zi.height / 2
}

function On() {
    return kn ? Zi.top : Zi.top + Pn()
}

function An() {
    return Zi.left + In()
}

function Bn() {
    return Zi.right + In() - ($i ? $i.width : 0)
}

function Fn() {
    return An() + Zi.width / 2
}

function Nn(e, t, i, n) {
    if (void 0 === t && (t = null), void 0 === i && (i = {
            X: !1,
            Y: !1
        }), !i.Y && !i.X) return {
        left: 0,
        top: 0
    };
    var r = e.getBoundingClientRect();
    if (rn = t, nn = e.ownerDocument, n || (n = Dn(e, "left", "top")), i.X) {
        var o = rn ? Wn() : er(),
            s = Yn(),
            a = Xn(),
            l = s - n.left,
            h = n.left + r.width - a;
        r.width > o ? n.left = l > 0 && h <= 0 ? a - r.width : h > 0 && l <= 0 ? s : l > h ? a - r.width : s : l > 0 ? n.left += l : h > 0 && (n.left -= h)
    }
    if (i.Y) {
        var p = rn ? _n() : $n(),
            d = Kn(),
            c = Qn(),
            u = d - n.top,
            g = n.top + r.height - c;
        r.height > p ? n.top = u > 0 && g <= 0 ? c - r.height : g > 0 && u <= 0 ? d : u > g ? c - r.height : d : u > 0 ? n.top += u : g > 0 && (n.top -= g)
    }
    return n
}

function Hn(e, t, i, n) {
    void 0 === t && (t = null);
    var r = Dn(e, "left", "top");
    i && (r.left = i), n && (r.top = n);
    var o = [];
    rn = t, nn = e.ownerDocument;
    var s = e.getBoundingClientRect(),
        a = r.top,
        l = r.left,
        h = r.left + s.width,
        p = qn(a, r.top + s.height),
        d = zn(l, h);
    return p.topSide && o.push("top"), d.rightSide && o.push("right"), d.leftSide && o.push("left"), p.bottomSide && o.push("bottom"), o
}

function Vn(e, t, i, n, r, o, s, a, l) {
    if (void 0 === s && (s = null), void 0 === a && (a = {
            X: !0,
            Y: !0
        }), t && e && r && o && (a.X || a.Y)) {
        var h = {
                TL: null,
                TR: null,
                BL: null,
                BR: null
            },
            p = {
                TL: null,
                TR: null,
                BL: null,
                BR: null
            },
            d = e.getBoundingClientRect(),
            c = {
                posX: r,
                posY: o,
                offsetX: i,
                offsetY: n,
                position: {
                    left: 0,
                    top: 0
                }
            };
        rn = s, nn = t.ownerDocument,
            function(e, t, i, n, r) {
                i.position = Dn(e, i.posX, i.posY, n, r), t.TL = Dn(e, "left", "top", n, r), t.TR = Dn(e, "right", "top", n, r), t.BR = Dn(e, "left", "bottom", n, r), t.BL = Dn(e, "right", "bottom", n, r)
            }(t, h, c, l, d), jn(p, c, d), a.X && function e(t, i, n, r, o, s) {
                var a = zn(i.TL.left, i.TR.left);
                n.TL.left - Zn() <= Yn() && (a.leftSide = !1);
                n.TR.left >= Xn() && (a.rightSide = !1);
                (a.leftSide && !a.rightSide || !a.leftSide && a.rightSide) && ("right" === r.posX ? r.posX = "left" : r.posX = "right", r.offsetX = r.offsetX + o.width, r.offsetX = -1 * r.offsetX, r.position = Dn(t, r.posX, r.posY, !1), jn(i, r, o), s && e(t, i, n, r, o, !1))
            }(t, p, h, c, d, !0), a.Y && h.TL.top > -1 && function e(t, i, n, r, o, s) {
                var a = qn(i.TL.top, i.BL.top);
                n.TL.top - Jn() <= Kn() && (a.topSide = !1);
                n.BL.top >= Qn() && (a.bottomSide = !1);
                (a.topSide && !a.bottomSide || !a.topSide && a.bottomSide) && ("top" === r.posY ? r.posY = "bottom" : r.posY = "top", r.offsetY = r.offsetY + o.height, r.offsetY = -1 * r.offsetY, r.position = Dn(t, r.posX, r.posY, !1, o), jn(i, r, o), s && e(t, i, n, r, o, !1))
            }(t, p, h, c, d, !0),
            function(e, t, i) {
                var n = 0,
                    r = 0;
                if (null != e.offsetParent && ("absolute" === getComputedStyle(e.offsetParent).position || "relative" === getComputedStyle(e.offsetParent).position)) {
                    var o = Dn(e.offsetParent, "left", "top", !1, i);
                    n = o.left, r = o.top
                }
                e.style.top = t.position.top + t.offsetY - r + "px", e.style.left = t.position.left + t.offsetX - n + "px"
            }(e, c, d)
    }
}

function jn(e, t, i) {
    e.TL = {
        top: t.position.top + t.offsetY,
        left: t.position.left + t.offsetX
    }, e.TR = {
        top: e.TL.top,
        left: e.TL.left + i.width
    }, e.BL = {
        top: e.TL.top + i.height,
        left: e.TL.left
    }, e.BR = {
        top: e.TL.top + i.height,
        left: e.TL.left + i.width
    }
}

function zn(e, t) {
    var i = !1,
        n = !1;
    return e - Zn() < Yn() && (i = !0), t > Xn() && (n = !0), {
        leftSide: i,
        rightSide: n
    }
}

function qn(e, t) {
    var i = !1,
        n = !1;
    return e - Jn() < Kn() && (i = !0), t > Qn() && (n = !0), {
        topSide: i,
        bottomSide: n
    }
}

function Wn() {
    return rn.getBoundingClientRect().width
}

function _n() {
    return rn.getBoundingClientRect().height
}

function Gn() {
    return rn.getBoundingClientRect().left
}

function Un() {
    return rn.getBoundingClientRect().top
}

function Kn() {
    return rn ? Un() : 0
}

function Yn() {
    return rn ? Gn() : 0
}

function Xn() {
    return rn ? Zn() + Gn() + Wn() : Zn() + er()
}

function Qn() {
    return rn ? Jn() + Un() + _n() : Jn() + $n()
}

function Jn() {
    return nn.documentElement.scrollTop || nn.body.scrollTop
}

function Zn() {
    return nn.documentElement.scrollLeft || nn.body.scrollLeft
}

function $n() {
    return window.innerHeight
}

function er() {
    var e = window.innerWidth;
    return e - (e - (g(document.documentElement) ? 0 : document.documentElement.offsetWidth))
}
var tr = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    ir = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    nr = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return tr(t, e), ir([zt("left")], t.prototype, "X", void 0), ir([zt("top")], t.prototype, "Y", void 0), t
    }(oi),
    rr = "e-popup",
    or = "e-rtl",
    sr = "e-popup-open",
    ar = "e-popup-close",
    lr = function(e) {
        function t(t, i) {
            return e.call(this, i, t) || this
        }
        return tr(t, e), t.prototype.onPropertyChanged = function(e, t) {
            for (var i = 0, n = Object.keys(e); i < n.length; i++) {
                switch (n[i]) {
                    case "width":
                        Dt(this.element, {
                            width: C(e.width)
                        });
                        break;
                    case "height":
                        Dt(this.element, {
                            height: C(e.height)
                        });
                        break;
                    case "zIndex":
                        Dt(this.element, {
                            zIndex: e.zIndex
                        });
                        break;
                    case "enableRtl":
                        this.setEnableRtl();
                        break;
                    case "position":
                    case "relateTo":
                        this.refreshPosition();
                        break;
                    case "offsetX":
                        var r = e.offsetX - t.offsetX;
                        this.element.style.left = (parseInt(this.element.style.left, 10) + r).toString() + "px";
                        break;
                    case "offsetY":
                        var o = e.offsetY - t.offsetY;
                        this.element.style.top = (parseInt(this.element.style.top, 10) + o).toString() + "px";
                        break;
                    case "content":
                        this.setContent();
                        break;
                    case "actionOnScroll":
                        "none" !== e.actionOnScroll ? this.wireScrollEvents() : this.unwireScrollEvents()
                }
            }
        }, t.prototype.getModuleName = function() {
            return "popup"
        }, t.prototype.resolveCollision = function() {
            this.checkCollision()
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist([])
        }, t.prototype.destroy = function() {
            this.element.classList.remove(rr, or, sr, ar), this.unwireEvents(), e.prototype.destroy.call(this)
        }, t.prototype.render = function() {
            this.element.classList.add(rr);
            var e = {};
            1e3 !== this.zIndex && (e.zIndex = this.zIndex), "auto" !== this.width && (e.width = C(this.width)), "auto" !== this.height && (e.height = C(this.height)), Dt(this.element, e), this.fixedParent = !1, this.setEnableRtl(), this.setContent()
        }, t.prototype.wireEvents = function() {
            me.isDevice && ye.add(window, "orientationchange", this.orientationOnChange, this), "none" !== this.actionOnScroll && this.wireScrollEvents()
        }, t.prototype.wireScrollEvents = function() {
            if (this.getRelateToElement())
                for (var e = 0, t = this.getScrollableParent(this.getRelateToElement()); e < t.length; e++) {
                    var i = t[e];
                    ye.add(i, "scroll", this.scrollRefresh, this)
                }
        }, t.prototype.unwireEvents = function() {
            me.isDevice && ye.remove(window, "orientationchange", this.orientationOnChange), "none" !== this.actionOnScroll && this.unwireScrollEvents()
        }, t.prototype.unwireScrollEvents = function() {
            if (this.getRelateToElement())
                for (var e = 0, t = this.getScrollableParent(this.getRelateToElement()); e < t.length; e++) {
                    var i = t[e];
                    ye.remove(i, "scroll", this.scrollRefresh)
                }
        }, t.prototype.getRelateToElement = function() {
            var e = "" === this.relateTo || g(this.relateTo) ? document.body : this.relateTo;
            return this.setProperties({
                relateTo: e
            }, !0), "string" == typeof this.relateTo ? document.querySelector(this.relateTo) : this.relateTo
        }, t.prototype.scrollRefresh = function(e) {
            if ("reposition" === this.actionOnScroll ? this.element.offsetParent === e.target || this.element.offsetParent && "BODY" === this.element.offsetParent.tagName && null == e.target.parentElement || this.refreshPosition() : "hide" === this.actionOnScroll && this.hide(), "none" !== this.actionOnScroll && this.getRelateToElement()) {
                var t = this.isElementOnViewport(this.getRelateToElement(), e.target);
                t || this.targetInvisibleStatus ? t && (this.targetInvisibleStatus = !1) : (this.trigger("targetExitViewport"), this.targetInvisibleStatus = !0)
            }
        }, t.prototype.isElementOnViewport = function(e, t) {
            for (var i = this.getScrollableParent(e), n = 0; n < i.length; n++)
                if (!this.isElementVisible(e, i[n])) return !1;
            return !0
        }, t.prototype.isElementVisible = function(e, t) {
            var i = this.checkGetBoundingClientRect(e);
            if (!i.height || !i.width) return !1;
            if (g(this.checkGetBoundingClientRect(t))) {
                var n = window,
                    r = {
                        top: n.scrollY,
                        left: n.scrollX,
                        right: n.scrollX + n.outerWidth,
                        bottom: n.scrollY + n.outerHeight
                    },
                    o = Dn(e),
                    s = {
                        top: o.top,
                        left: o.left,
                        right: o.left + i.width,
                        bottom: o.top + i.height
                    },
                    a = {
                        top: r.bottom - s.top,
                        left: r.right - s.left,
                        bottom: s.bottom - r.top,
                        right: s.right - r.left
                    };
                return a.top > 0 && a.left > 0 && a.right > 0 && a.bottom > 0
            }
            var l = t.getBoundingClientRect();
            return !(i.bottom < l.top || i.bottom > l.bottom || i.right > l.right || i.left < l.left)
        }, t.prototype.preRender = function() {}, t.prototype.setEnableRtl = function() {
            this.reposition(), this.enableRtl ? this.element.classList.add(or) : this.element.classList.remove(or)
        }, t.prototype.setContent = function() {
            g(this.content) || (this.element.innerHTML = "", "string" == typeof this.content ? this.element.textContent = this.content : this.element.appendChild(this.content))
        }, t.prototype.orientationOnChange = function() {
            var e = this;
            setTimeout((function() {
                e.refreshPosition()
            }), 200)
        }, t.prototype.refreshPosition = function(e, t) {
            g(e) || this.checkFixedParent(e), this.reposition(), t || this.checkCollision()
        }, t.prototype.reposition = function() {
            var e, t, i = this.getRelateToElement();
            if ("number" == typeof this.position.X && "number" == typeof this.position.Y) e = {
                left: this.position.X,
                top: this.position.Y
            };
            else if ("string" == typeof this.position.X && "number" == typeof this.position.Y || "number" == typeof this.position.X && "string" == typeof this.position.Y) {
                var n = this.element.style.display,
                    r = void 0;
                this.element.style.display = "block", this.element.classList.contains("e-dlg-modal") && (r = this.element.parentElement.style.display, this.element.parentElement.style.display = "block"), t = this.getAnchorPosition(i, this.element, this.position, this.offsetX, this.offsetY), e = "string" == typeof this.position.X ? {
                    left: t.left,
                    top: this.position.Y
                } : {
                    left: this.position.X,
                    top: t.top
                }, this.element.style.display = n, this.element.classList.contains("e-dlg-modal") && (this.element.parentElement.style.display = r)
            } else if (i) {
                n = this.element.style.display;
                this.element.style.display = "block", e = this.getAnchorPosition(i, this.element, this.position, this.offsetX, this.offsetY), this.element.style.display = n
            } else e = {
                left: 0,
                top: 0
            };
            g(e) || (this.element.style.left = e.left + "px", this.element.style.top = e.top + "px")
        }, t.prototype.checkGetBoundingClientRect = function(e) {
            try {
                return e.getBoundingClientRect()
            } catch (e) {
                return null
            }
        }, t.prototype.getAnchorPosition = function(e, t, i, n, r) {
            var o = this.checkGetBoundingClientRect(t),
                s = this.checkGetBoundingClientRect(e);
            if (g(o) || g(s)) return null;
            var a = e,
                l = {
                    left: 0,
                    top: 0
                };
            switch (t.offsetParent && "BODY" === t.offsetParent.tagName && "BODY" === e.tagName ? l = Dn(e) : (t.classList.contains("e-dlg-modal") && "BODY" !== a.tagName && (t = t.parentElement), l = Tn(a, t)), i.X) {
                default:
                case "left":
                    break;
                case "center":
                    t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.left += window.innerWidth / 2 - o.width / 2 : "container" === this.targetType ? l.left += s.width / 2 - o.width / 2 : l.left += s.width / 2;
                    break;
                case "right":
                    t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.left += window.innerWidth - o.width : "container" === this.targetType ? l.left += s.width - o.width : l.left += s.width
            }
            switch (i.Y) {
                default:
                case "top":
                    break;
                case "center":
                    t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.top += window.innerHeight / 2 - o.height / 2 : "container" === this.targetType ? l.top += s.height / 2 - o.height / 2 : l.top += s.height / 2;
                    break;
                case "bottom":
                    t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.top += window.innerHeight - o.height : "container" === this.targetType ? l.top += s.height - o.height : l.top += s.height
            }
            return l.left += n, l.top += r, l
        }, t.prototype.callFlip = function(e) {
            var t = this.getRelateToElement();
            Vn(this.element, t, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, e, this.fixedParent)
        }, t.prototype.callFit = function(e) {
            if (0 !== Hn(this.element, this.viewPortElement).length)
                if (g(this.viewPortElement)) {
                    var t = Nn(this.element, this.viewPortElement, e);
                    e.X && (this.element.style.left = t.left + "px"), e.Y && (this.element.style.top = t.top + "px")
                } else {
                    var i = this.checkGetBoundingClientRect(this.element),
                        n = this.checkGetBoundingClientRect(this.viewPortElement);
                    if (g(i) || g(n)) return null;
                    e && !0 === e.Y && (n.top > i.top ? this.element.style.top = "0px" : n.bottom < i.bottom && (this.element.style.top = parseInt(this.element.style.top, 10) - (i.bottom - n.bottom) + "px")), e && !0 === e.X && (n.right < i.right ? this.element.style.left = parseInt(this.element.style.left, 10) - (i.right - n.right) + "px" : n.left > i.left && (this.element.style.left = parseInt(this.element.style.left, 10) + (n.left - i.left) + "px"))
                }
        }, t.prototype.checkCollision = function() {
            var e = this.collision.X,
                t = this.collision.Y;
            "none" === e && "none" === t || ("flip" === e && "flip" === t ? this.callFlip({
                X: !0,
                Y: !0
            }) : "fit" === e && "fit" === t ? this.callFit({
                X: !0,
                Y: !0
            }) : ("flip" === e ? this.callFlip({
                X: !0,
                Y: !1
            }) : "flip" === t && this.callFlip({
                Y: !0,
                X: !1
            }), "fit" === e ? this.callFit({
                X: !0,
                Y: !1
            }) : "fit" === t && this.callFit({
                X: !1,
                Y: !0
            })))
        }, t.prototype.show = function(e, t) {
            var i = this;
            if (this.wireEvents(), 1e3 === this.zIndex || !g(t)) {
                var n = g(t) ? this.element : t;
                this.zIndex = pr(n), Dt(this.element, {
                    zIndex: this.zIndex
                })
            }
            e = g(e) || "object" != typeof e ? this.showAnimation : e, "none" === this.collision.X && "none" === this.collision.Y || (gt([this.element], ar), ut([this.element], sr), this.checkCollision(), gt([this.element], sr), ut([this.element], ar)), g(e) ? (gt([this.element], ar), ut([this.element], sr), this.trigger("open")) : (e.begin = function() {
                i.isDestroyed || (gt([i.element], ar), ut([i.element], sr))
            }, e.end = function() {
                i.isDestroyed || i.trigger("open")
            }, new Qt(e).animate(this.element))
        }, t.prototype.hide = function(e) {
            var t = this;
            e = g(e) || "object" != typeof e ? this.hideAnimation : e, g(e) ? (gt([this.element], sr), ut([this.element], ar), this.trigger("close")) : (e.end = function() {
                t.isDestroyed || (gt([t.element], sr), ut([t.element], ar), t.trigger("close"))
            }, new Qt(e).animate(this.element)), this.unwireEvents()
        }, t.prototype.getScrollableParent = function(e) {
            return this.checkFixedParent(e), hr(e, this.fixedParent)
        }, t.prototype.checkFixedParent = function(e) {
            for (var t = e.parentElement; t && "HTML" !== t.tagName;) {
                var i = getComputedStyle(t);
                "fixed" === i.position && this.element.offsetParent && "BODY" === this.element.offsetParent.tagName && (this.element.style.position = "fixed", this.fixedParent = !0), t = t.parentElement, g(this.element.offsetParent) && "fixed" === i.position && "fixed" === this.element.style.position && (this.fixedParent = !0)
            }
        }, ir([zt("auto")], t.prototype, "height", void 0), ir([zt("auto")], t.prototype, "width", void 0), ir([zt(null)], t.prototype, "content", void 0), ir([zt("container")], t.prototype, "targetType", void 0), ir([zt(null)], t.prototype, "viewPortElement", void 0), ir([zt({
            X: "none",
            Y: "none"
        })], t.prototype, "collision", void 0), ir([zt("")], t.prototype, "relateTo", void 0), ir([qt({}, nr)], t.prototype, "position", void 0), ir([zt(0)], t.prototype, "offsetX", void 0), ir([zt(0)], t.prototype, "offsetY", void 0), ir([zt(1e3)], t.prototype, "zIndex", void 0), ir([zt(!1)], t.prototype, "enableRtl", void 0), ir([zt("reposition")], t.prototype, "actionOnScroll", void 0), ir([zt(null)], t.prototype, "showAnimation", void 0), ir([zt(null)], t.prototype, "hideAnimation", void 0), ir([_t()], t.prototype, "open", void 0), ir([_t()], t.prototype, "close", void 0), ir([_t()], t.prototype, "targetExitViewport", void 0), t = ir([Gt], t)
    }(pi);

function hr(e, t) {
    for (var i = getComputedStyle(e), n = [], r = /(auto|scroll)/, o = e.parentElement; o && "HTML" !== o.tagName;) {
        var s = getComputedStyle(o);
        "absolute" === i.position && "static" === s.position || !r.test(s.overflow + s.overflowY + s.overflowX) || n.push(o), o = o.parentElement
    }
    return t || n.push(document), n
}

function pr(e) {
    for (var t = e.parentElement, i = []; t && "BODY" !== t.tagName;) {
        var n = document.defaultView.getComputedStyle(t, null).getPropertyValue("z-index"),
            r = document.defaultView.getComputedStyle(t, null).getPropertyValue("position");
        "auto" !== n && "static" !== r && i.push(n), t = t.parentElement
    }
    for (var o = [], s = 0; s < document.body.children.length; s++)
        if (!e.isEqualNode(document.body.children[s])) {
            n = document.defaultView.getComputedStyle(document.body.children[s], null).getPropertyValue("z-index"), r = document.defaultView.getComputedStyle(document.body.children[s], null).getPropertyValue("position");
            "auto" !== n && "static" !== r && o.push(n)
        } o.push("999");
    var a = [];
    if (!g(e.parentElement) && "BODY" !== e.parentElement.tagName) {
        var l = [].slice.call(e.parentElement.children);
        for (s = 0; s < l.length; s++) {
            n = document.defaultView.getComputedStyle(l[s], null).getPropertyValue("z-index"), r = document.defaultView.getComputedStyle(l[s], null).getPropertyValue("position");
            "auto" !== n && "static" !== r && a.push(n)
        }
    }
    var h = i.concat(o, a),
        p = Math.max.apply(Math, h) + 1;
    return p > 2147483647 ? 2147483647 : p
}
var dr, cr, ur, gr, fr = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    mr = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    yr = "e-tooltip",
    vr = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fr(t, e), mr([zt({
            effect: "FadeIn",
            duration: 150,
            delay: 0
        })], t.prototype, "open", void 0), mr([zt({
            effect: "FadeOut",
            duration: 150,
            delay: 0
        })], t.prototype, "close", void 0), t
    }(oi),
    br = function(e) {
        function t(t, i) {
            var n = e.call(this, t, i) || this;
            return n.isBlazorTooltip = !1, n.contentTargetValue = null, n.contentEvent = null, n.contentAnimation = null, n
        }
        return fr(t, e), t.prototype.initialize = function() {
            this.formatPosition(), this.isServerRender() || ut([this.element], yr)
        }, t.prototype.isServerRender = function() {
            return S() && this.isServerRendered
        }, t.prototype.formatPosition = function() {
            var e, t;
            0 === this.position.indexOf("Top") || 0 === this.position.indexOf("Bottom") ? (e = this.position.split(/(?=[A-Z])/), this.tooltipPositionY = e[0], this.tooltipPositionX = e[1]) : (t = this.position.split(/(?=[A-Z])/), this.tooltipPositionX = t[0], this.tooltipPositionY = t[1])
        }, t.prototype.renderArrow = function() {
            var e;
            (this.setTipClass(this.position), this.isServerRender()) ? (ut([(e = this.tooltipEle.querySelector(".e-arrow-tip")).querySelector(".e-arrow-tip-outer")], this.tipClass), ut([e.querySelector(".e-arrow-tip-inner")], this.tipClass), this.tooltipEle.appendChild(e)) : ((e = this.createElement("div", {
                className: "e-arrow-tip " + this.tipClass
            })).appendChild(this.createElement("div", {
                className: "e-arrow-tip-outer " + this.tipClass
            })), e.appendChild(this.createElement("div", {
                className: "e-arrow-tip-inner " + this.tipClass
            })), this.tooltipEle.appendChild(e))
        }, t.prototype.setTipClass = function(e) {
            0 === e.indexOf("Right") ? this.tipClass = "e-tip-left" : 0 === e.indexOf("Bottom") ? this.tipClass = "e-tip-top" : 0 === e.indexOf("Left") ? this.tipClass = "e-tip-right" : this.tipClass = "e-tip-bottom"
        }, t.prototype.renderPopup = function(e) {
            var t = this.mouseTrail ? {
                top: 0,
                left: 0
            } : this.getTooltipPosition(e);
            this.tooltipEle.classList.remove("e-lib"), this.popupObj = new lr(this.tooltipEle, {
                height: this.height,
                width: this.width,
                position: {
                    X: t.left,
                    Y: t.top
                },
                enableRtl: this.enableRtl,
                open: this.openPopupHandler.bind(this),
                close: this.closePopupHandler.bind(this)
            })
        }, t.prototype.getTooltipPosition = function(e) {
            this.tooltipEle.style.display = "block";
            var t = Dn(e, this.tooltipPositionX, this.tooltipPositionY),
                i = this.calculateTooltipOffset(this.position),
                n = this.collisionFlipFit(e, t.left + i.left, t.top + i.top);
            return this.tooltipEle.style.display = "", n
        }, t.prototype.reposition = function(e) {
            var t = this.getTooltipPosition(e);
            this.popupObj.position = {
                X: t.left,
                Y: t.top
            }, this.popupObj.dataBind()
        }, t.prototype.openPopupHandler = function() {
            !this.mouseTrail && this.needTemplateReposition() && this.reposition(this.findTarget()), this.trigger("afterOpen", this.tooltipEventArgs)
        }, t.prototype.closePopupHandler = function() {
            Ke(this.element.id + "content"), this.clearTemplate(["content"]), this.clear(), this.trigger("afterClose", this.tooltipEventArgs)
        }, t.prototype.calculateTooltipOffset = function(e) {
            var t = {
                    top: 0,
                    left: 0
                },
                i = this.tooltipEle.offsetWidth,
                n = this.tooltipEle.offsetHeight,
                r = this.tooltipEle.querySelector(".e-arrow-tip"),
                o = r ? r.offsetWidth : 0,
                s = r ? r.offsetHeight : 0,
                a = this.showTipPointer ? 0 : 8,
                l = s / 2 + 2 + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight),
                h = o / 2 + 2 + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth);
            switch (this.mouseTrail && (a += 2), e) {
                case "RightTop":
                    t.left += o + a, t.top -= n - l;
                    break;
                case "RightCenter":
                    t.left += o + a, t.top -= n / 2;
                    break;
                case "RightBottom":
                    t.left += o + a, t.top -= l;
                    break;
                case "BottomRight":
                    t.top += s + a, t.left -= h;
                    break;
                case "BottomCenter":
                    t.top += s + a, t.left -= i / 2;
                    break;
                case "BottomLeft":
                    t.top += s + a, t.left -= i - h;
                    break;
                case "LeftBottom":
                    t.left -= o + i + a, t.top -= l;
                    break;
                case "LeftCenter":
                    t.left -= o + i + a, t.top -= n / 2;
                    break;
                case "LeftTop":
                    t.left -= o + i + a, t.top -= n - l;
                    break;
                case "TopLeft":
                    t.top -= n + s + a, t.left -= i - h;
                    break;
                case "TopRight":
                    t.top -= n + s + a, t.left -= h;
                    break;
                default:
                    t.top -= n + s + a, t.left -= i / 2
            }
            return t.left += this.offsetX, t.top += this.offsetY, t
        }, t.prototype.updateTipPosition = function(e) {
            var t = this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");
            gt(t, ["e-tip-bottom", "e-tip-top", "e-tip-left", "e-tip-right"]), this.setTipClass(e), ut(t, this.tipClass)
        }, t.prototype.adjustArrow = function(e, t, i, n) {
            if (!1 !== this.showTipPointer) {
                var r, o;
                this.updateTipPosition(t), this.tooltipEle.style.display = "block";
                var s, a = this.tooltipEle.clientWidth,
                    l = this.tooltipEle.clientHeight,
                    h = this.tooltipEle.querySelector(".e-arrow-tip"),
                    p = this.tooltipEle.querySelector(".e-arrow-tip-inner"),
                    d = h.offsetWidth,
                    c = h.offsetHeight;
                if (this.tooltipEle.style.display = "", "e-tip-bottom" === this.tipClass || "e-tip-top" === this.tipClass) {
                    if ("e-tip-bottom" === this.tipClass ? (o = "99.9%", p.style.top = "-" + (c - 2) + "px") : (o = -(c - 1) + "px", p.style.top = "-" + (c - 6) + "px"), e) r = (s = "Center" !== i || a > e.offsetWidth || this.mouseTrail) && "Left" === i || !s && "End" === this.tipPointerPosition ? a - d - 2 + "px" : s && "Right" === i || !s && "Start" === this.tipPointerPosition ? "2px" : a / 2 - d / 2 + "px"
                } else "e-tip-right" === this.tipClass ? (r = "99.9%", p.style.left = "-" + (d - 2) + "px") : (r = -(d - 1) + "px", p.style.left = d - 2 - d + "px"), o = (s = "Center" !== n || l > e.offsetHeight || this.mouseTrail) && "Top" === n || !s && "End" === this.tipPointerPosition ? l - c - 2 + "px" : s && "Bottom" === n || !s && "Start" === this.tipPointerPosition ? "2px" : l / 2 - c / 2 + "px";
                h.style.top = o, h.style.left = r
            }
        }, t.prototype.renderContent = function(e) {
            var t = this.tooltipEle.querySelector(".e-tip-content");
            if (this.cssClass && ut([this.tooltipEle], this.cssClass.split(" ")), e && !g(e.getAttribute("title")) && (e.setAttribute("data-content", e.getAttribute("title")), e.removeAttribute("title")), g(this.content)) e && !g(e.getAttribute("data-content")) && (t.innerHTML = e.getAttribute("data-content"));
            else if (this.isBlazorTooltip || !this.isServerRender())
                if (t.innerHTML = "", this.content instanceof HTMLElement) t.appendChild(this.content);
                else if ("string" == typeof this.content && this.content.indexOf("<div>Blazor") < 0) this.enableHtmlSanitizer && this.setProperties({
                content: Oi.sanitize(this.content)
            }, !0), t.innerHTML = this.content;
            else {
                var i = Ge(this.content)({}, this, "content", this.element.id + "content", void 0, void 0, t);
                i && vt(i, t), this.renderReactTemplates(), "string" == typeof this.content && this.content.indexOf("<div>Blazor") >= 0 && (this.isBlazorTemplate = !0, Ue(this.element.id + "content", "Content", this))
            }
        }, t.prototype.renderCloseIcon = function() {
            if (this.isSticky) {
                var e = this.createElement("div", {
                    className: "e-icons e-tooltip-close"
                });
                this.tooltipEle.appendChild(e), ye.add(e, me.touchStartEvent, this.onStickyClose, this)
            }
        }, t.prototype.addDescribedBy = function(e, t) {
            var i = (e.getAttribute("aria-describedby") || "").split(/\s+/);
            i.indexOf(t) < 0 && i.push(t), St(e, {
                "aria-describedby": i.join(" ").trim(),
                "data-tooltip-id": t
            })
        }, t.prototype.removeDescribedBy = function(e) {
            var t = e.getAttribute("data-tooltip-id"),
                i = (e.getAttribute("aria-describedby") || "").split(/\s+/),
                n = i.indexOf(t); - 1 !== n && i.splice(n, 1), e.removeAttribute("data-tooltip-id");
            var r = i.join(" ").trim();
            r ? e.setAttribute("aria-describedby", r) : e.removeAttribute("aria-describedby")
        }, t.prototype.tapHoldHandler = function(e) {
            clearTimeout(this.autoCloseTimer), this.targetHover(e.originalEvent)
        }, t.prototype.touchEndHandler = function(e) {
            var t = this;
            if (!this.isSticky) {
                this.autoCloseTimer = setTimeout((function() {
                    t.close()
                }), 1500)
            }
        }, t.prototype.targetClick = function(e) {
            var t;
            g(t = this.target ? Tt(e.target, this.target) : this.element) || (null === t.getAttribute("data-tooltip-id") ? this.targetHover(e) : this.isSticky || this.hideTooltip(this.animation.close, e, t))
        }, t.prototype.targetHover = function(e) {
            var t;
            if (!g(t = this.target ? Tt(e.target, this.target) : this.element) && null === t.getAttribute("data-tooltip-id")) {
                for (var i = 0, n = [].slice.call(document.querySelectorAll("[data-tooltip-id= " + this.ctrlId + "_content]")); i < n.length; i++) {
                    var r = n[i];
                    this.restoreElement(r)
                }
                this.showTooltip(t, this.animation.open, e)
            }
        }, t.prototype.showTooltip = function(e, t, i) {
            var n = this;
            clearTimeout(this.showTimer), clearTimeout(this.hideTimer), this.tooltipEventArgs = {
                type: i ? i.type : null,
                cancel: !1,
                target: e,
                event: i || null,
                element: this.tooltipEle,
                isInteracted: !g(i)
            };
            this.trigger("beforeRender", this.tooltipEventArgs, function(r) {
                n.beforeRenderCallback(r, e, i, t)
            }.bind(this))
        }, t.prototype.beforeRenderCallback = function(e, t, i, n) {
            var r = !1;
            if (e.cancel) this.isHidden = !0, this.clear();
            else if (this.isHidden = !1, g(this.tooltipEle)) {
                if (this.isServerRender()) {
                    this.contentTargetValue = t, this.contentEvent = i, this.contentAnimation = n;
                    this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall", {
                        enableTooltip: "true"
                    }), r = !0
                } else this.ctrlId = this.element.getAttribute("id") ? m(this.element.getAttribute("id")) : m("tooltip"), this.tooltipEle = this.createElement("div", {
                    className: "e-tooltip-wrap e-popup e-lib",
                    attrs: {
                        role: "tooltip",
                        "aria-hidden": "false",
                        id: this.ctrlId + "_content"
                    },
                    styles: "width:" + C(this.width) + ";height:" + C(this.height) + ";position:absolute;"
                }), this.beforeRenderBlazor(t, this);
                r || this.afterRenderBlazor(t, i, n, this)
            } else this.isServerRender() && (ut([this.tooltipEle], "e-popup-open"), document.body.appendChild(this.tooltipEle), this.renderCloseIcon(), this.renderPopup(t)), t && (this.adjustArrow(t, this.position, this.tooltipPositionX, this.tooltipPositionY), this.addDescribedBy(t, this.ctrlId + "_content"), this.renderContent(t), Qt.stop(this.tooltipEle), this.reposition(t), this.afterRenderBlazor(t, i, n, this))
        }, t.prototype.contentUpdated = function(e) {
            g(this.tooltipEle) && this.isServerRender() && (this.ctrlId = this.element.id, this.tooltipEle = document.querySelector("#" + this.ctrlId + "_content"), this.tooltipEle && (this.tooltipEle.setAttribute("style", "width:" + C(this.width) + ";height:" + C(this.height) + ";position:absolute;"), this.beforeRenderBlazor(this.contentTargetValue, this), this.afterRenderBlazor(this.contentTargetValue, this.contentEvent, this.contentAnimation, this), this.contentTargetValue = this.contentEvent = this.contentAnimation = null))
        }, t.prototype.beforeRenderBlazor = function(e, t) {
            e && (me.isDevice && ut([t.tooltipEle], "e-bigger"), "auto" !== t.width && (t.tooltipEle.style.maxWidth = C(t.width)), this.isServerRender() || t.tooltipEle.appendChild(t.createElement("div", {
                className: "e-tip-content"
            })), document.body.appendChild(t.tooltipEle), gt([t.tooltipEle], "e-hidden"), t.addDescribedBy(e, t.ctrlId + "_content"), t.renderContent(e), ut([t.tooltipEle], "e-popup-open"), t.showTipPointer && t.renderArrow(), t.renderCloseIcon(), t.renderPopup(e), t.adjustArrow(e, t.position, t.tooltipPositionX, t.tooltipPositionY), Qt.stop(t.tooltipEle), t.reposition(e))
        }, t.prototype.afterRenderBlazor = function(e, t, i, n) {
            if (e) {
                gt([n.tooltipEle], "e-popup-open"), ut([n.tooltipEle], "e-popup-close"), n.tooltipEventArgs = {
                    type: t ? t.type : null,
                    cancel: !1,
                    target: e,
                    event: t || null,
                    element: n.tooltipEle,
                    isInteracted: !g(t)
                }, n.needTemplateReposition() && !n.mouseTrail && (n.tooltipEle.style.display = "none");
                n.trigger("beforeOpen", n.tooltipEventArgs, function(r) {
                    n.beforeOpenCallback(r, e, i, t)
                }.bind(n))
            }
        }, t.prototype.beforeOpenCallback = function(e, t, i, n) {
            var r = this;
            if (e.cancel) this.isHidden = !0, this.clear(), this.restoreElement(t);
            else {
                var o = {
                    name: i.effect,
                    duration: i.duration,
                    delay: i.delay,
                    timingFunction: "easeOut"
                };
                if ("None" === i.effect && (o = void 0), this.openDelay > 0) {
                    this.showTimer = setTimeout((function() {
                        r.popupObj && r.popupObj.show(o, t)
                    }), this.openDelay)
                } else this.popupObj && this.popupObj.show(o, t)
            }
            n && this.wireMouseEvents(n, t)
        }, t.prototype.needTemplateReposition = function() {
            return !g(this.viewContainerRef) && "string" != typeof this.viewContainerRef || this.isServerRender() && this.isBlazorTemplate
        }, t.prototype.checkCollision = function(e, t, i) {
            var n = {
                    left: t,
                    top: i,
                    position: this.position,
                    horizontal: this.tooltipPositionX,
                    vertical: this.tooltipPositionY
                },
                r = Hn(this.tooltipEle, this.target ? this.element : null, t, i);
            return r.length > 0 && (n.horizontal = r.indexOf("left") >= 0 ? "Right" : r.indexOf("right") >= 0 ? "Left" : this.tooltipPositionX, n.vertical = r.indexOf("top") >= 0 ? "Bottom" : r.indexOf("bottom") >= 0 ? "Top" : this.tooltipPositionY), n
        }, t.prototype.collisionFlipFit = function(e, t, i) {
            var n = this.checkCollision(e, t, i),
                r = n.position;
            if (this.tooltipPositionY !== n.vertical && (r = 0 === this.position.indexOf("Bottom") || 0 === this.position.indexOf("Top") ? n.vertical + this.tooltipPositionX : this.tooltipPositionX + n.vertical), this.tooltipPositionX !== n.horizontal && (0 === r.indexOf("Left") && (n.vertical = "LeftTop" === r || "LeftCenter" === r ? "Top" : "Bottom", r = n.vertical + "Left"), 0 === r.indexOf("Right") && (n.vertical = "RightTop" === r || "RightCenter" === r ? "Top" : "Bottom", r = n.vertical + "Right"), n.horizontal = this.tooltipPositionX), this.tooltipEventArgs = {
                    type: null,
                    cancel: !1,
                    target: e,
                    event: null,
                    element: this.tooltipEle,
                    collidedPosition: r
                }, this.trigger("beforeCollision", this.tooltipEventArgs), n.position !== r) {
                var o = Dn(e, n.horizontal, n.vertical);
                this.adjustArrow(e, r, n.horizontal, n.vertical);
                var s = this.calculateTooltipOffset(r);
                s.top -= -1 !== "TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0]) && -1 !== "TopBottom".indexOf(r.split(/(?=[A-Z])/)[0]) ? 2 * this.offsetY : 0, s.left -= -1 !== "RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0]) && -1 !== "RightLeft".indexOf(r.split(/(?=[A-Z])/)[0]) ? 2 * this.offsetX : 0, n.position = r, n.left = o.left + s.left, n.top = o.top + s.top
            } else this.adjustArrow(e, r, n.horizontal, n.vertical);
            var a = {
                    left: n.left,
                    top: n.top
                },
                l = Nn(this.tooltipEle, this.target ? this.element : null, {
                    X: !0,
                    Y: !1
                }, a).left;
            if (this.tooltipEle.style.display = "block", this.showTipPointer && (0 === r.indexOf("Bottom") || 0 === r.indexOf("Top"))) {
                var h = this.tooltipEle.querySelector(".e-arrow-tip"),
                    p = parseInt(h.style.left, 10) - (l - n.left);
                p < 0 ? p = 0 : p + h.offsetWidth > this.tooltipEle.clientWidth && (p = this.tooltipEle.clientWidth - h.offsetWidth), h.style.left = p.toString() + "px"
            }
            return this.tooltipEle.style.display = "", a.left = l, a
        }, t.prototype.hideTooltip = function(e, t, i) {
            var n, r = this;
            n = t ? this.target ? i || t.target : this.element : document.querySelector("[data-tooltip-id= " + this.ctrlId + "_content]"), this.tooltipEventArgs = {
                type: t ? t.type : null,
                cancel: !1,
                target: n,
                event: t || null,
                element: this.tooltipEle,
                isInteracted: !g(t)
            }, this.trigger("beforeClose", this.tooltipEventArgs, (function(t) {
                t.cancel ? r.isHidden = !1 : r.isServerRender() ? r.blazorHide(e, n) : r.popupHide(e, n)
            }))
        }, t.prototype.blazorHide = function(e, t) {
            var i = this;
            this.popupObj ? this.popupHide(e, t) : setTimeout((function() {
                i.popupHide(e, t)
            }), 200)
        }, t.prototype.popupHide = function(e, t) {
            var i = this;
            t && this.restoreElement(t), this.isHidden = !0;
            var n = {
                name: e.effect,
                duration: e.duration,
                delay: e.delay,
                timingFunction: "easeIn"
            };
            if ("None" === e.effect && (n = void 0), this.closeDelay > 0) {
                this.hideTimer = setTimeout((function() {
                    i.popupObj && i.popupObj.hide(n)
                }), this.closeDelay)
            } else this.popupObj && this.popupObj.hide(n)
        }, t.prototype.restoreElement = function(e) {
            this.unwireMouseEvents(e), g(e.getAttribute("data-content")) || (e.setAttribute("title", e.getAttribute("data-content")), e.removeAttribute("data-content")), this.removeDescribedBy(e)
        }, t.prototype.clear = function() {
            if (this.tooltipEle && (gt([this.tooltipEle], "e-popup-close"), ut([this.tooltipEle], "e-popup-open")), this.isHidden) {
                if (this.popupObj && this.popupObj.destroy(), this.isServerRender() && this.tooltipEle) {
                    this.tooltipEle.style.display = "none";
                    this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall", {
                        enableTooltip: "false"
                    }), Ct(this.tooltipEle)
                } else this.tooltipEle && Ct(this.tooltipEle);
                this.tooltipEle = null, this.popupObj = null
            }
        }, t.prototype.onMouseOut = function(e) {
            var t = e.relatedTarget;
            if (t && !this.mouseTrail) {
                var i = Tt(t, ".e-tooltip-wrap.e-lib.e-popup");
                i ? (ye.add(i, "mouseleave", this.tooltipElementMouseOut, this), this.unwireMouseEvents(e.target)) : (this.hideTooltip(this.animation.close, e, this.findTarget()), 0 === this.closeDelay && this.clear())
            } else this.hideTooltip(this.animation.close, e, this.findTarget()), this.clear()
        }, t.prototype.tooltipElementMouseOut = function(e) {
            this.hideTooltip(this.animation.close, e, this.findTarget()), ye.remove(this.element, "mouseleave", this.tooltipElementMouseOut), this.clear()
        }, t.prototype.onStickyClose = function(e) {
            this.close()
        }, t.prototype.onMouseMove = function(e) {
            var t = 0,
                i = 0;
            e.type.indexOf("touch") > -1 ? (e.preventDefault(), t = e.touches[0].pageX, i = e.touches[0].pageY) : (t = e.pageX, i = e.pageY), Qt.stop(this.tooltipEle), gt([this.tooltipEle], "e-popup-close"), ut([this.tooltipEle], "e-popup-open"), this.adjustArrow(e.target, this.position, this.tooltipPositionX, this.tooltipPositionY);
            var n = this.calculateTooltipOffset(this.position),
                r = t + n.left + this.offsetX,
                o = i + n.top + this.offsetY,
                s = this.checkCollision(e.target, r, o);
            if (this.tooltipPositionX !== s.horizontal || this.tooltipPositionY !== s.vertical) {
                var a = 0 === this.position.indexOf("Bottom") || 0 === this.position.indexOf("Top") ? s.vertical + s.horizontal : s.horizontal + s.vertical;
                s.position = a, this.adjustArrow(e.target, s.position, s.horizontal, s.vertical);
                var l = this.calculateTooltipOffset(s.position);
                s.left = t + l.left - this.offsetX, s.top = i + l.top - this.offsetY
            }
            this.tooltipEle.style.left = s.left + "px", this.tooltipEle.style.top = s.top + "px"
        }, t.prototype.keyDown = function(e) {
            this.tooltipEle && 27 === e.keyCode && this.close()
        }, t.prototype.touchEnd = function(e) {
            this.tooltipEle && null === Tt(e.target, "." + yr) && this.close()
        }, t.prototype.scrollHandler = function(e) {
            this.tooltipEle && (Tt(e.target, ".e-tooltip-wrap.e-lib.e-popup") || this.close())
        }, t.prototype.render = function() {
            this.initialize(), this.wireEvents(this.opensOn), this.renderComplete()
        }, t.prototype.preRender = function() {
            this.tipClass = "e-tip-bottom", this.tooltipPositionX = "Center", this.tooltipPositionY = "Top", this.isHidden = !0
        }, t.prototype.wireEvents = function(e) {
            for (var t = 0, i = this.getTriggerList(e); t < i.length; t++) {
                var n = i[t];
                if ("Custom" === n) return;
                "Focus" === n && this.wireFocusEvents(), "Click" === n && ye.add(this.element, me.touchStartEvent, this.targetClick, this), "Hover" === n && (me.isDevice ? (this.touchModule = new Pi(this.element, {
                    tapHoldThreshold: 500,
                    tapHold: this.tapHoldHandler.bind(this)
                }), ye.add(this.element, me.touchEndEvent, this.touchEndHandler, this)) : (ye.add(this.element, "mouseover", this.targetHover, this), this.isServerRender() && !this.isSticky && ye.add(this.element, "mouseleave", this.onMouseOut, this)))
            }
            ye.add(document, "touchend", this.touchEnd, this), ye.add(document, "scroll wheel", this.scrollHandler, this), ye.add(document, "keydown", this.keyDown, this)
        }, t.prototype.getTriggerList = function(e) {
            return "Auto" === e && (e = me.isDevice ? "Hover" : "Hover Focus"), e.split(" ")
        }, t.prototype.wireFocusEvents = function() {
            if (g(this.target)) ye.add(this.element, "focus", this.targetHover, this);
            else
                for (var e = 0, t = [].slice.call(this.element.querySelectorAll(this.target)); e < t.length; e++) {
                    var i = t[e];
                    ye.add(i, "focus", this.targetHover, this)
                }
        }, t.prototype.wireMouseEvents = function(e, t) {
            this.tooltipEle && (this.isSticky || ("focus" === e.type && ye.add(t, "blur", this.onMouseOut, this), "mouseover" === e.type && (this.isServerRender() || ye.add(t, "mouseleave", this.onMouseOut, this))), this.mouseTrail && ye.add(t, "mousemove touchstart mouseenter", this.onMouseMove, this))
        }, t.prototype.unwireEvents = function(e) {
            for (var t = 0, i = this.getTriggerList(e); t < i.length; t++) {
                var n = i[t];
                if ("Custom" === n) return;
                "Focus" === n && this.unwireFocusEvents(), "Click" === n && ye.remove(this.element, me.touchStartEvent, this.targetClick), "Hover" === n && (me.isDevice ? (this.touchModule && this.touchModule.destroy(), ye.remove(this.element, me.touchEndEvent, this.touchEndHandler)) : (ye.remove(this.element, "mouseover", this.targetHover), this.isServerRender() && !this.isSticky && ye.remove(this.element, "mouseleave", this.onMouseOut)))
            }
            ye.remove(document, "touchend", this.touchEnd), ye.remove(document, "scroll wheel", this.scrollHandler), ye.remove(document, "keydown", this.keyDown)
        }, t.prototype.unwireFocusEvents = function() {
            if (g(this.target)) ye.remove(this.element, "focus", this.targetHover);
            else
                for (var e = 0, t = [].slice.call(this.element.querySelectorAll(this.target)); e < t.length; e++) {
                    var i = t[e];
                    ye.remove(i, "focus", this.targetHover)
                }
        }, t.prototype.unwireMouseEvents = function(e) {
            if (!this.isSticky)
                for (var t = 0, i = this.getTriggerList(this.opensOn); t < i.length; t++) {
                    var n = i[t];
                    "Focus" === n && ye.remove(e, "blur", this.onMouseOut), "Hover" !== n || me.isDevice || this.isServerRender() || ye.remove(e, "mouseleave", this.onMouseOut)
                }
            this.mouseTrail && ye.remove(e, "mousemove touchstart mouseenter", this.onMouseMove)
        }, t.prototype.findTarget = function() {
            return document.querySelector("[data-tooltip-id= " + this.ctrlId + "_content]")
        }, t.prototype.getModuleName = function() {
            return "tooltip"
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist([])
        }, t.prototype.onPropertyChanged = function(e, t) {
            for (var i = this.findTarget(), n = 0, r = Object.keys(e); n < r.length; n++) {
                switch (r[n]) {
                    case "width":
                        this.tooltipEle && i && (this.tooltipEle.style.width = this.tooltipEle.style.maxWidth = C(e.width), this.reposition(i));
                        break;
                    case "height":
                        this.tooltipEle && i && (this.tooltipEle.style.height = C(e.height), this.reposition(i));
                        break;
                    case "content":
                        if (this.tooltipEle) this.isServerRender() && (this.isBlazorTooltip = !0), this.renderContent();
                        else if (this.isServerRender()) {
                            var o = {
                                content: e.content
                            };
                            this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall", o)
                        }
                        break;
                    case "opensOn":
                        this.unwireEvents(t.opensOn), this.wireEvents(e.opensOn);
                        break;
                    case "position":
                        if (this.formatPosition(), this.tooltipEle && i) {
                            var s = this.tooltipEle.querySelector(".e-arrow-tip-inner");
                            s.style.top = s.style.left = null, this.reposition(i)
                        }
                        break;
                    case "tipPointerPosition":
                        this.tooltipEle && i && this.reposition(i);
                        break;
                    case "offsetX":
                        if (this.tooltipEle) {
                            var a = e.offsetX - t.offsetX;
                            this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + a).toString() + "px"
                        }
                        break;
                    case "offsetY":
                        if (this.tooltipEle) {
                            var l = e.offsetY - t.offsetY;
                            this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + l).toString() + "px"
                        }
                        break;
                    case "cssClass":
                        this.tooltipEle && (t.cssClass && gt([this.tooltipEle], t.cssClass.split(" ")), e.cssClass && ut([this.tooltipEle], e.cssClass.split(" ")));
                        break;
                    case "enableRtl":
                        this.tooltipEle && (this.enableRtl ? ut([this.tooltipEle], "e-rtl") : gt([this.tooltipEle], "e-rtl"))
                }
            }
        }, t.prototype.open = function(e, t) {
            g(t) && (t = this.animation.open), g(e) && (e = this.element), "none" !== e.style.display && this.showTooltip(e, t)
        }, t.prototype.close = function(e) {
            e || (e = this.animation.close), this.hideTooltip(e)
        }, t.prototype.refresh = function(e) {
            this.tooltipEle && this.renderContent(e), this.popupObj && e && this.reposition(e)
        }, t.prototype.destroy = function() {
            if (this.isServerRender() || (e.prototype.destroy.call(this), this.tooltipEle && Ct(this.tooltipEle)), this.isServerRender() && this.tooltipEle) {
                var t = document.querySelector("#" + this.ctrlId + "_content_placeholder");
                t && t.appendChild(this.tooltipEle)
            }
            this.popupObj && this.popupObj.destroy(), gt([this.element], yr), this.unwireEvents(this.opensOn), this.unwireMouseEvents(this.element), this.tooltipEle = null, this.popupObj = null
        }, mr([zt("auto")], t.prototype, "width", void 0), mr([zt("auto")], t.prototype, "height", void 0), mr([zt()], t.prototype, "content", void 0), mr([zt()], t.prototype, "target", void 0), mr([zt("TopCenter")], t.prototype, "position", void 0), mr([zt(0)], t.prototype, "offsetX", void 0), mr([zt(0)], t.prototype, "offsetY", void 0), mr([zt(!0)], t.prototype, "showTipPointer", void 0), mr([zt("Auto")], t.prototype, "tipPointerPosition", void 0), mr([zt("Auto")], t.prototype, "opensOn", void 0), mr([zt(!1)], t.prototype, "mouseTrail", void 0), mr([zt(!1)], t.prototype, "isSticky", void 0), mr([qt({}, vr)], t.prototype, "animation", void 0), mr([zt(0)], t.prototype, "openDelay", void 0), mr([zt(0)], t.prototype, "closeDelay", void 0), mr([zt()], t.prototype, "cssClass", void 0), mr([zt(!1)], t.prototype, "enableHtmlSanitizer", void 0), mr([_t()], t.prototype, "beforeRender", void 0), mr([_t()], t.prototype, "beforeOpen", void 0), mr([_t()], t.prototype, "afterOpen", void 0), mr([_t()], t.prototype, "beforeClose", void 0), mr([_t()], t.prototype, "afterClose", void 0), mr([_t()], t.prototype, "beforeCollision", void 0), mr([_t()], t.prototype, "created", void 0), mr([_t()], t.prototype, "destroyed", void 0), t = mr([Gt], t)
    }(pi),
    wr = "actionBegin",
    Cr = "dataBound",
    Sr = "initial-end",
    xr = "content-ready",
    kr = "ui-update",
    Tr = "on-empty",
    Dr = "inbound-model-changed",
    Er = "model-changed",
    Rr = "header-refreshed",
    Pr = "key-pressed",
    Ir = "click",
    Mr = "toolbar-refresh",
    Lr = "auto-col",
    Or = "prevent-batch";

function Ar(e, t, i, n, r, o) {
    var s = n;
    if (n.tagName === t) {
        var p = a("ej2_instances", n);
        s = e("input", {
            attrs: {
                type: i
            }
        });
        for (var d = ["change", "cssClass", "label", "labelPosition", "id"], c = 0, u = n.attributes.length; c < u; c++) - 1 === d.indexOf(n.attributes[c].nodeName) && s.setAttribute(n.attributes[c].nodeName, n.attributes[c].nodeValue);
        St(n, {
            class: r,
            role: o,
            "aria-checked": "false"
        }), n.appendChild(s), l("ej2_instances", p, s), h(n, "ej2_instances")
    }
    return s
}

function Br(e) {
    for (var t, i = e.childNodes, n = 0; n < i.length; n++)
        if (3 === (t = i[n]).nodeType) return t;
    return null
}

function Fr(e, t, i) {
    void 0 === t && (t = !1), void 0 === i && (i = {});
    var n = e("div", {
        className: "e-checkbox-wrapper e-css"
    });
    if (i.cssClass && ut([n], i.cssClass.split(" ")), i.enableRtl && n.classList.add("e-rtl"), t) {
        var r = e("span", {
            className: "e-ripple-container"
        });
        Jt(r, {
            isCenterRipple: !0,
            duration: 400
        }), n.appendChild(r)
    }
    var o = e("span", {
        className: "e-frame e-icons"
    });
    if (i.checked && o.classList.add("e-check"), n.appendChild(o), i.label) {
        var s = e("span", {
            className: "e-label",
            innerHTML: i.label
        });
        n.appendChild(s)
    }
    return n
}

function Nr(e, t) {
    if (t) {
        var i = document.createEvent("MouseEvents");
        i.initEvent(e.type, !1, !0), t.dispatchEvent(i)
    }
}! function(e) {
    e[e.Data = 0] = "Data", e[e.Header = 1] = "Header", e[e.Summary = 2] = "Summary", e[e.GroupSummary = 3] = "GroupSummary", e[e.CaptionSummary = 4] = "CaptionSummary", e[e.Filter = 5] = "Filter", e[e.Indent = 6] = "Indent", e[e.GroupCaption = 7] = "GroupCaption", e[e.GroupCaptionEmpty = 8] = "GroupCaptionEmpty", e[e.Expand = 9] = "Expand", e[e.HeaderIndent = 10] = "HeaderIndent", e[e.StackedHeader = 11] = "StackedHeader", e[e.DetailHeader = 12] = "DetailHeader", e[e.DetailExpand = 13] = "DetailExpand", e[e.CommandColumn = 14] = "CommandColumn", e[e.DetailFooterIntent = 15] = "DetailFooterIntent", e[e.RowDragIcon = 16] = "RowDragIcon", e[e.RowDragHIcon = 17] = "RowDragHIcon"
}(dr || (dr = {})),
function(e) {
    e[e.Header = 0] = "Header", e[e.Content = 1] = "Content", e[e.Summary = 2] = "Summary"
}(cr || (cr = {})),
function(e) {
    e[e.Add = 0] = "Add", e[e.Edit = 1] = "Edit", e[e.Update = 2] = "Update", e[e.Delete = 3] = "Delete", e[e.Cancel = 4] = "Cancel", e[e.Print = 5] = "Print", e[e.Search = 6] = "Search", e[e.ColumnChooser = 7] = "ColumnChooser", e[e.PdfExport = 8] = "PdfExport", e[e.ExcelExport = 9] = "ExcelExport", e[e.CsvExport = 10] = "CsvExport", e[e.WordExport = 11] = "WordExport"
}(ur || (ur = {})),
function(e) {
    e.GroupCaption = "GroupCaption", e.GroupFooter = "GroupFooter", e.Footer = "Footer"
}(gr || (gr = {}));
var Hr, Vr, jr, zr, qr, Wr, _r, Gr, Ur = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Kr = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Yr = (new U, "e-rtl"),
    Xr = "e-btn",
    Qr = "e-primary",
    Jr = "e-icon-btn",
    Zr = function(e) {
        function t(t, i) {
            return e.call(this, t, i) || this
        }
        return Ur(t, e), t.prototype.preRender = function() {}, t.prototype.render = function() {
            this.initialize(), this.removeRippleEffect = Jt(this.element, {
                selector: "." + Xr
            }), this.renderComplete()
        }, t.prototype.initialize = function() {
            if (this.cssClass && ut([this.element], this.cssClass.split(" ")), this.isPrimary && this.element.classList.add(Qr), !S() || S() && "progress-btn" !== this.getModuleName()) {
                if (this.content) {
                    var e = this.enableHtmlSanitizer ? Oi.sanitize(this.content) : this.content;
                    this.element.innerHTML = e
                }
                this.setIconCss()
            }
            this.enableRtl && this.element.classList.add(Yr), this.disabled ? this.controlStatus(this.disabled) : this.wireEvents()
        }, t.prototype.controlStatus = function(e) {
            this.element.disabled = e
        }, t.prototype.setIconCss = function() {
            if (this.iconCss) {
                var e = this.createElement("span", {
                    className: "e-btn-icon " + this.iconCss
                });
                this.element.textContent.trim() ? (e.classList.add("e-icon-" + this.iconPosition.toLowerCase()), "Top" !== this.iconPosition && "Bottom" !== this.iconPosition || this.element.classList.add("e-" + this.iconPosition.toLowerCase() + "-icon-btn")) : this.element.classList.add(Jr);
                var t = this.element.childNodes[0];
                !t || "Left" !== this.iconPosition && "Top" !== this.iconPosition ? this.element.appendChild(e) : this.element.insertBefore(e, t)
            }
        }, t.prototype.wireEvents = function() {
            this.isToggle && ye.add(this.element, "click", this.btnClickHandler, this)
        }, t.prototype.unWireEvents = function() {
            this.isToggle && ye.remove(this.element, "click", this.btnClickHandler)
        }, t.prototype.btnClickHandler = function() {
            this.element.classList.contains("e-active") ? this.element.classList.remove("e-active") : this.element.classList.add("e-active")
        }, t.prototype.destroy = function() {
            var t, i = [Qr, Yr, Jr, "e-success", "e-info", "e-danger", "e-warning", "e-flat", "e-outline", "e-small", "e-bigger", "e-active", "e-round", "e-top-icon-btn", "e-bottom-icon-btn"];
            this.cssClass && (i = i.concat(this.cssClass.split(" "))), e.prototype.destroy.call(this), gt([this.element], i), this.element.getAttribute("class") || this.element.removeAttribute("class"), this.disabled && this.element.removeAttribute("disabled"), this.content && (this.element.innerHTML = this.element.innerHTML.replace(this.content, "")), (t = this.element.querySelector("span.e-btn-icon")) && wt(t), this.unWireEvents(), ii && this.removeRippleEffect()
        }, t.prototype.getModuleName = function() {
            return "btn"
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist([])
        }, t.Inject = function() {}, t.prototype.onPropertyChanged = function(e, t) {
            for (var i = 0, n = Object.keys(e); i < n.length; i++) {
                switch (n[i]) {
                    case "isPrimary":
                        e.isPrimary ? this.element.classList.add(Qr) : this.element.classList.remove(Qr);
                        break;
                    case "disabled":
                        this.controlStatus(e.disabled);
                        break;
                    case "iconCss":
                        var r = this.element.querySelector("span.e-btn-icon");
                        r ? e.iconCss ? (r.className = "e-btn-icon " + e.iconCss, this.element.textContent.trim() && ("Left" === this.iconPosition ? r.classList.add("e-icon-left") : r.classList.add("e-icon-right"))) : wt(r) : this.setIconCss();
                        break;
                    case "iconPosition":
                        gt([this.element], ["e-top-icon-btn", "e-bottom-icon-btn"]), (r = this.element.querySelector("span.e-btn-icon")) && wt(r), this.setIconCss();
                        break;
                    case "cssClass":
                        t.cssClass && gt([this.element], t.cssClass.split(" ")), e.cssClass && ut([this.element], e.cssClass.split(" "));
                        break;
                    case "enableRtl":
                        e.enableRtl ? this.element.classList.add(Yr) : this.element.classList.remove(Yr);
                        break;
                    case "content":
                        Br(this.element) || this.element.classList.remove(Jr), (!S() || S() && !this.isServerRendered && "progress-btn" !== this.getModuleName()) && (this.enableHtmlSanitizer && (e.content = Oi.sanitize(e.content)), this.element.innerHTML = e.content, this.setIconCss());
                        break;
                    case "isToggle":
                        e.isToggle ? ye.add(this.element, "click", this.btnClickHandler, this) : (ye.remove(this.element, "click", this.btnClickHandler), gt([this.element], ["e-active"]))
                }
            }
        }, t.prototype.click = function() {
            this.element.click()
        }, t.prototype.focusIn = function() {
            this.element.focus()
        }, Kr([zt("Left")], t.prototype, "iconPosition", void 0), Kr([zt("")], t.prototype, "iconCss", void 0), Kr([zt(!1)], t.prototype, "disabled", void 0), Kr([zt(!1)], t.prototype, "isPrimary", void 0), Kr([zt("")], t.prototype, "cssClass", void 0), Kr([zt("")], t.prototype, "content", void 0), Kr([zt(!1)], t.prototype, "isToggle", void 0), Kr([zt()], t.prototype, "locale", void 0), Kr([zt(!1)], t.prototype, "enableHtmlSanitizer", void 0), Kr([_t()], t.prototype, "created", void 0), t = Kr([Gt], t)
    }(pi),
    $r = ["north-west", "north", "north-east", "west", "east", "south-west", "south", "south-east"],
    eo = 0,
    to = 0,
    io = 0,
    no = 0,
    ro = 0,
    oo = 0,
    so = ["e-restrict-left"],
    ao = null,
    lo = null,
    ho = null,
    po = !0,
    co = 0,
    uo = !0;

function go(e) {
    var t;
    return g(e) || (t = "string" == typeof e ? document.querySelector(e) : e), t
}

function fo(e) {
    g(e) && (e = this);
    for (var t = Hr.querySelectorAll(".e-resize-handle"), i = 0; i < t.length; i++) {
        Vr = t[i], ye.add(Vr, "mousedown", yo, e);
        var n = "msie" === me.info.name ? "pointerdown" : "touchstart";
        ye.add(Vr, n, wo, e)
    }
}

function mo(e) {
    return e.indexOf("mouse") > -1 ? "mouse" : "touch"
}

function yo(e) {
    if (e.preventDefault(), Hr = e.target.parentElement, bo(), ro = e.pageX, oo = e.pageY, e.target.classList.add("e-focused-handle"), g(ao) || !0 !== ao(e, this)) {
        var t = g(_r) ? document : _r;
        ye.add(t, "mousemove", Co, this), ye.add(document, "mouseup", vo, this);
        for (var i = 0; i < so.length; i++) po = !Hr.classList.contains(so[i])
    }
}

function vo(e) {
    var t = "msie" === me.info.name ? "pointermove" : "touchmove",
        i = "msie" === me.info.name ? "pointerup" : "touchend",
        n = g(_r) ? document : _r;
    ye.remove(n, "mousemove", Co), ye.remove(n, t, Co);
    var r = "msie" === me.info.name ? "pointerdown" : "touchstart";
    ye.remove(n, r, Co), g(document.body.querySelector(".e-focused-handle")) || document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"), g(ho) || ho(e, this), ye.remove(document, "mouseup", vo), ye.remove(document, i, vo)
}

function bo() {
    eo = parseFloat(getComputedStyle(Hr, null).getPropertyValue("width").replace("px", "")), to = parseFloat(getComputedStyle(Hr, null).getPropertyValue("height").replace("px", "")), io = Hr.getBoundingClientRect().left, no = Hr.getBoundingClientRect().top
}

function wo(e) {
    Hr = e.target.parentElement, bo();
    var t = e.touches ? e.changedTouches[0] : e;
    if (ro = t.pageX, oo = t.pageY, g(ao) || !0 !== ao(e, this)) {
        var i = "msie" === me.info.name ? "pointermove" : "touchmove",
            n = "msie" === me.info.name ? "pointerup" : "touchend",
            r = g(_r) ? document : _r;
        ye.add(r, i, Co, this), ye.add(document, n, vo)
    }
}

function Co(e) {
    if (e.target.classList.contains("e-resize-handle") && e.target.classList.contains("e-focused-handle") ? Vr = e.target : g(document.body.querySelector(".e-focused-handle")) || (Vr = document.body.querySelector(".e-focused-handle")), !g(Vr)) {
        for (var t = "", i = 0; i < $r.length; i++) Vr.classList.contains("e-" + $r[i]) && (t = $r[i]);
        switch (g(lo) || lo(e, this), t) {
            case "south":
                xo(e);
                break;
            case "north":
                ko(e);
                break;
            case "west":
                To(e);
                break;
            case "east":
                Do(e);
                break;
            case "south-east":
                xo(e), Do(e);
                break;
            case "south-west":
                xo(e), To(e);
                break;
            case "north-east":
                ko(e), Do(e);
                break;
            case "north-west":
                ko(e), To(e)
        }
    }
}

function So(e) {
    return e.getBoundingClientRect()
}

function xo(e) {
    var t, i = document.documentElement.clientHeight,
        n = !1,
        r = (e.touches ? e.changedTouches[0] : e).pageY,
        o = So(Hr);
    g(_r) || (t = So(_r)), g(_r) ? g(_r) && (i - r >= 0 || o.top < 0) && (n = !0) : n = !0;
    var s = to + (r - oo);
    s = s > jr ? s : jr;
    var a = 0;
    g(_r) || (a = t.top);
    var l = g(_r) ? 0 : _r.offsetHeight - _r.clientHeight,
        h = o.top - a - l / 2;
    if (h = h < 0 ? 0 : h, o.top > 0 && h + s > zr) {
        if (n = !1, Hr.classList.contains("e-resize-viewport")) return;
        Hr.style.height = zr - parseInt(h.toString(), 10) + "px"
    } else {
        var p = 0;
        if (n) {
            o.top < 0 && i + (o.height + o.top) > 0 && s + (p = o.top) <= 30 && (s = o.height - (o.height + o.top) + 30), s + o.top >= zr && (Hr.style.height = o.height + (i - (o.height + o.top)) + "px");
            var d = g(_r) ? p : h;
            s >= jr && s + d <= zr && (Hr.style.height = s + "px")
        }
    }
}

function ko(e) {
    var t, i = !1,
        n = "mouse" === mo(e.type) ? e.pageY : e.touches[0].pageY,
        r = So(Hr);
    g(_r) || (t = So(_r)), (!g(_r) && r.top - t.top > 0 || g(_r) && n > 0) && (i = !0);
    var o = to - (n - oo);
    if (So(Hr).bottom + o > zr && (i = !1, Hr.style.height = zr - So(Hr).bottom + "px"), i && o >= jr && o <= zr) {
        var s = 0;
        g(_r) || (s = t.top);
        var a = no - s + (n - oo);
        a = a > 0 ? a : 1, Hr.style.height = o + "px", Hr.style.top = a + "px"
    }
}

function To(e) {
    var t, i = document.documentElement.clientWidth,
        n = !1;
    g(_r) || (t = So(_r));
    var r = "mouse" === mo(e.type) ? e.pageX : e.touches[0].pageX,
        o = So(Hr),
        s = g(_r) ? 0 : _r.offsetWidth - _r.clientWidth,
        a = g(_r) ? 0 : t.left,
        l = g(_r) ? 0 : t.width;
    g(Gr) && (g(_r) ? Gr = i : (Gr = o.left - a - s / 2 + o.width, Gr += l - s - Gr)), (!g(_r) && o.left - t.left + o.width + (t.right - o.right) - s <= Wr || g(_r) && r >= 0) && (n = !0);
    var h = eo - (r - ro);
    if (po && (h = h > Gr ? Gr : h), n && h >= qr && h <= Wr) {
        var p = 0;
        g(_r) || (p = t.left);
        var d = io - p + (r - ro);
        d = d > 0 ? d : 1, h !== co && uo && (Hr.style.width = h + "px"), po && (Hr.style.left = d + "px", uo = 1 !== d)
    }
    co = h
}

function Do(e) {
    var t, i = document.documentElement.clientWidth,
        n = !1;
    g(_r) || (t = So(_r));
    var r = (e.touches ? e.changedTouches[0] : e).pageX,
        o = So(Hr);
    (!g(_r) && (o.left - t.left + o.width < Wr || o.right - t.left > o.width) || g(_r) && i - r > 0) && (n = !0);
    var s = eo + (r - ro),
        a = 0;
    if (g(_r) || (a = t.left), o.left - a + s > Wr) {
        if (n = !1, Hr.classList.contains("e-resize-viewport")) return;
        Hr.style.width = Wr - (o.left - a) + "px"
    }
    n && s >= qr && s <= Wr && (Hr.style.width = s + "px")
}

function Eo() {
    for (var e = Hr.querySelectorAll(".e-resize-handle"), t = 0; t < e.length; t++) wt(e[t])
}
var Ro, Po = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Io = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Mo = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Po(t, e), Io([zt()], t.prototype, "buttonModel", void 0), Io([zt("Button")], t.prototype, "type", void 0), Io([_t()], t.prototype, "click", void 0), t
    }(oi),
    Lo = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Po(t, e), Io([zt("Fade")], t.prototype, "effect", void 0), Io([zt(400)], t.prototype, "duration", void 0), Io([zt(0)], t.prototype, "delay", void 0), t
    }(oi),
    Oo = "e-dlg-target",
    Ao = "e-scroll-disabled",
    Bo = "e-dlg-fullscreen",
    Fo = function(e) {
        function t(t, i) {
            return e.call(this, t, i) || this
        }
        return Po(t, e), t.prototype.render = function() {
            this.initialize(), this.initRender(), this.wireEvents(), "100%" === this.width && (this.element.style.width = ""), "" !== this.minHeight && (this.element.style.minHeight = this.minHeight.toString()), this.enableResize && (this.setResize(), "None" === this.animationSettings.effect && this.getMinHeight()), this.renderComplete()
        }, t.prototype.preRender = function() {
            var e = this;
            this.headerContent = null, this.allowMaxHeight = !0, this.preventVisibility = !0, this.clonedEle = this.element.cloneNode(!0), this.closeIconClickEventHandler = function(t) {
                e.hide(t)
            }, this.dlgOverlayClickEventHandler = function(t) {
                e.trigger("overlayClick", t), e.focusContent()
            };
            if (this.l10n = new ki("dialog", {
                    close: "Close"
                }, this.locale), this.checkPositionData(), g(this.target)) {
                var t = this.isProtectedOnChange;
                this.isProtectedOnChange = !0, this.target = document.body, this.isProtectedOnChange = t
            }
        }, t.prototype.isNumberValue = function(e) {
            return /^[-+]?\d*\.?\d+$/.test(e)
        }, t.prototype.checkPositionData = function() {
            if (!g(this.position)) {
                if (!g(this.position.X) && "number" != typeof this.position.X)
                    if (this.isNumberValue(this.position.X)) {
                        var e = this.isProtectedOnChange;
                        this.isProtectedOnChange = !0, this.position.X = parseFloat(this.position.X), this.isProtectedOnChange = e
                    } if (!g(this.position.Y) && "number" != typeof this.position.Y)
                    if (this.isNumberValue(this.position.Y)) {
                        e = this.isProtectedOnChange;
                        this.isProtectedOnChange = !0, this.position.Y = parseFloat(this.position.Y), this.isProtectedOnChange = e
                    }
            }
        }, t.prototype.getEle = function(e, t) {
            for (var i = void 0, n = 0; n < e.length; n++)
                if (e[n].classList.contains(t)) {
                    i = e[n];
                    break
                } return i
        }, t.prototype.getMinHeight = function() {
            var e = "0px",
                t = "0px";
            g(this.element.querySelector(".e-dlg-header-content")) || (e = getComputedStyle(this.headerContent).height);
            var i = this.getEle(this.element.children, "e-footer-content");
            g(i) || (t = getComputedStyle(i).height);
            var n = parseInt(e.slice(0, e.indexOf("p")), 10),
                r = parseInt(t.slice(0, t.indexOf("p")), 10);
            return jr = n + 30 + r, n + 30 + r
        }, t.prototype.onResizeStart = function(e, t) {
            return t.trigger("resizeStart", e), e.cancel
        }, t.prototype.onResizing = function(e, t) {
            t.trigger("resizing", e)
        }, t.prototype.onResizeComplete = function(e, t) {
            t.trigger("resizeStop", e)
        }, t.prototype.setResize = function() {
            if (this.enableResize) {
                if (this.isBlazorServerRender() && !g(this.element.querySelector(".e-icons.e-resize-handle"))) return;
                this.element.classList.add("e-dlg-resizable");
                var e = getComputedStyle(this.element).minHeight,
                    t = getComputedStyle(this.element).minWidth,
                    i = this.enableRtl ? "south-west" : "south-east";
                this.isModal && this.enableRtl ? this.element.classList.add("e-restrict-left") : this.isModal && this.target === document.body && this.element.classList.add("e-resize-viewport"),
                    function(e) {
                        ao = e.resizeBegin, lo = e.resizing, ho = e.resizeComplete, Hr = go(e.element), _r = go(e.boundary);
                        for (var t = e.direction.split(" "), i = 0; i < t.length; i++) {
                            var n = ct("div", {
                                className: "e-icons e-resize-handle e-" + t[i]
                            });
                            Hr.appendChild(n)
                        }
                        jr = e.minHeight, qr = e.minWidth, Wr = e.maxWidth, zr = e.maxHeight, e.proxy && e.proxy.element && e.proxy.element.classList.contains("e-dialog") ? fo(e.proxy) : fo()
                    }({
                        element: this.element,
                        direction: i,
                        minHeight: parseInt(e.slice(0, t.indexOf("p")), 10),
                        maxHeight: this.targetEle.clientHeight,
                        minWidth: parseInt(t.slice(0, t.indexOf("p")), 10),
                        maxWidth: this.targetEle.clientWidth,
                        boundary: this.target === document.body ? null : this.targetEle,
                        resizeBegin: this.onResizeStart.bind(this),
                        resizeComplete: this.onResizeComplete.bind(this),
                        resizing: this.onResizing.bind(this),
                        proxy: this
                    })
            } else Eo(), this.isModal ? this.element.classList.remove("e-restrict-left") : this.element.classList.remove("e-resize-viewport"), this.element.classList.remove("e-dlg-resizable")
        }, t.prototype.keyDown = function(e) {
            var t = this;
            if (9 === e.keyCode && this.isModal) {
                var i = void 0;
                if (g(this.btnObj) || (i = this.btnObj[this.btnObj.length - 1]), g(this.btnObj) && !g(this.ftrTemplateContent)) {
                    var n = this.ftrTemplateContent.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');
                    i = {
                        element: n[n.length - 1]
                    }
                }
                g(i) || document.activeElement !== i.element || e.shiftKey || (e.preventDefault(), this.focusableElements(this.element).focus()), document.activeElement === this.focusableElements(this.element) && e.shiftKey && (e.preventDefault(), g(i) || i.element.focus())
            }
            var r, o = document.activeElement,
                s = ["input", "textarea"].indexOf(o.tagName.toLowerCase()) > -1,
                a = !1;
            (s || (a = o.hasAttribute("contenteditable") && "true" === o.getAttribute("contenteditable")), 27 === e.keyCode && this.closeOnEscape && this.hide(e), 13 === e.keyCode && !e.ctrlKey && "textarea" !== o.tagName.toLowerCase() && s && !g(this.primaryButtonEle) || 13 === e.keyCode && e.ctrlKey && ("textarea" === o.tagName.toLowerCase() || a) && !g(this.primaryButtonEle)) && (this.buttons.some((function(e, t) {
                r = t;
                var i = e.buttonModel;
                return !g(i) && !0 === i.isPrimary
            })) && "function" == typeof this.buttons[r].click && setTimeout((function() {
                t.buttons[r].click.call(t, e)
            })))
        }, t.prototype.initialize = function() {
            g(this.target) || (this.targetEle = "string" == typeof this.target ? document.querySelector(this.target) : this.target), this.isBlazorServerRender() || ut([this.element], "e-dialog"), me.isDevice && ut([this.element], "e-device"), this.isBlazorServerRender() || this.setCSSClass(), this.setMaxHeight()
        }, t.prototype.initRender = function() {
            var e = this;
            if (this.initialRender = !0, this.isBlazorServerRender() || St(this.element, {
                    role: "dialog"
                }), 1e3 === this.zIndex ? (this.setzIndex(this.element, !1), this.calculatezIndex = !0) : this.calculatezIndex = !1, this.isBlazorServerRender() && g(this.headerContent) && (this.headerContent = this.element.getElementsByClassName("e-dlg-header-content")[0]), this.isBlazorServerRender() && g(this.contentEle) && (this.contentEle = this.element.querySelector("#" + this.element.id + "_dialog-content")), this.isBlazorServerRender() || (this.setTargetContent(), "" === this.header || g(this.header) || this.setHeader(), this.showCloseIcon && this.renderCloseIcon(), this.setContent(), "" === this.footerTemplate || g(this.footerTemplate) ? g(this.buttons[0].buttonModel) || this.setButton() : this.setFooterTemplate()), this.isBlazorServerRender() && (g(this.buttons[0].buttonModel) || "" !== this.footerTemplate || this.setButton()), this.allowDragging && !g(this.headerContent) && this.setAllowDragging(), this.isBlazorServerRender() || (St(this.element, {
                    "aria-modal": this.isModal ? "true" : "false"
                }), this.isModal && this.setIsModal()), this.isBlazorServerRender() && g(this.dlgContainer)) {
                this.dlgContainer = this.element.parentElement;
                for (var t = 0, i = this.dlgContainer.children; t < i.length; t++) i[t].classList.contains("e-dlg-overlay") && (this.dlgOverlay = i[t])
            }
            if (!0 !== this.element.classList.contains("e-alert-dialog") && !0 !== this.element.classList.contains("e-confirm-dialog") && !g(this.element.parentElement)) {
                var n = this.isModal ? this.dlgContainer.parentElement : this.element.parentElement;
                this.refElement = this.createElement("div", {
                    className: "e-dlg-ref-element"
                }), n.insertBefore(this.refElement, this.isModal ? this.dlgContainer : this.element)
            }
            g(this.targetEle) || (this.isModal ? this.targetEle.appendChild(this.dlgContainer) : this.targetEle.appendChild(this.element)), this.popupObj = new lr(this.element, {
                height: this.height,
                width: this.width,
                zIndex: this.zIndex,
                relateTo: this.target,
                actionOnScroll: "none",
                enableRtl: this.enableRtl,
                open: function(t) {
                    var i = {
                        container: e.isModal ? e.dlgContainer : e.element,
                        element: e.element,
                        target: e.target,
                        preventFocus: !1
                    };
                    e.enableResize && e.resetResizeIcon(), e.trigger("open", i, (function(t) {
                        t.preventFocus || e.focusContent()
                    }))
                },
                close: function(t) {
                    e.isModal && ut([e.dlgOverlay], "e-fade"), e.unBindEvent(e.element), e.isModal && (e.dlgContainer.style.display = "none"), e.trigger("close", e.closeArgs);
                    var i = document.activeElement;
                    g(i) || g(i.blur) || i.blur(), g(e.storeActiveElement) || g(e.storeActiveElement.focus) || e.storeActiveElement.focus()
                }
            }), this.positionChange(), this.setEnableRTL(), this.isBlazorServerRender() || (ut([this.element], "e-popup-close"), this.isModal && this.setOverlayZindex()), this.visible ? this.show() : this.isModal && (this.dlgOverlay.style.display = "none"), this.initialRender = !1
        }, t.prototype.resetResizeIcon = function() {
            var e = this.getMinHeight();
            if (this.targetEle.offsetHeight < e) {
                var t = this.enableRtl ? "e-south-west" : "e-south-east",
                    i = this.element.querySelector("." + t);
                g(i) || (i.style.bottom = "-" + e.toString() + "px")
            }
        }, t.prototype.setOverlayZindex = function(e) {
            var t;
            t = g(e) ? parseInt(this.element.style.zIndex, 10) ? parseInt(this.element.style.zIndex, 10) : this.zIndex : e, this.dlgOverlay.style.zIndex = (t - 1).toString(), this.dlgContainer.style.zIndex = t.toString()
        }, t.prototype.positionChange = function() {
            this.isModal && (isNaN(parseFloat(this.position.X)) || isNaN(parseFloat(this.position.Y))) ? !isNaN(parseFloat(this.position.X)) && isNaN(parseFloat(this.position.Y)) || isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y)) ? this.setPopupPosition() : (this.element.style.top = "0px", this.element.style.left = "0px", this.dlgContainer.classList.add("e-dlg-" + this.position.X + "-" + this.position.Y)) : this.setPopupPosition()
        }, t.prototype.setPopupPosition = function() {
            this.popupObj.setProperties({
                position: {
                    X: this.position.X,
                    Y: this.position.Y
                }
            })
        }, t.prototype.setAllowDragging = function() {
            var e = this;
            this.dragObj = new mi(this.element, {
                clone: !1,
                abort: ".e-dlg-closeicon-btn",
                handle: ".e-dlg-header-content",
                dragStart: function(t) {
                    e.trigger("dragStart", t, (function(e) {
                        S() && e.bindEvents(t.dragElement)
                    }))
                },
                dragStop: function(t) {
                    e.isModal && (g(e.position) || e.dlgContainer.classList.remove("e-dlg-" + e.position.X + "-" + e.position.Y), e.element.style.position = "relative"), e.trigger("dragStop", t), e.element.classList.remove("e-restrict-left")
                },
                drag: function(t) {
                    e.trigger("drag", t)
                }
            }), g(this.targetEle) || (this.dragObj.dragArea = this.targetEle)
        }, t.prototype.setButton = function() {
            if (!this.isBlazorServerRender()) {
                this.buttonContent = [], this.btnObj = [];
                for (var e = 0; e < this.buttons.length; e++) {
                    var t = g(this.buttons[e].type) ? "button" : this.buttons[e].type.toLowerCase(),
                        i = this.createElement("button", {
                            attrs: {
                                type: t
                            }
                        });
                    this.buttonContent.push(i.outerHTML)
                }
                this.setFooterTemplate()
            }
            e = 0;
            for (var n, r = this.element.children; e < r.length; e++) r[e].classList.contains("e-footer-content") && (n = r[e].querySelectorAll("button"));
            for (e = 0; e < this.buttons.length; e++) this.isBlazorServerRender() || (this.btnObj[e] = new Zr(this.buttons[e].buttonModel)), this.isBlazorServerRender() && (this.ftrTemplateContent = this.element.querySelector(".e-footer-content")), !g(this.ftrTemplateContent) && "function" == typeof this.buttons[e].click && n.length > 0 && ye.add(n[e], "click", this.buttons[e].click, this), this.isBlazorServerRender() || g(this.ftrTemplateContent) || (this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]), this.btnObj[e].element.classList.add("e-flat"), this.primaryButtonEle = this.element.getElementsByClassName("e-primary")[0])
        }, t.prototype.setContent = function() {
            if (St(this.element, {
                    "aria-describedby": this.element.id + "_dialog-content"
                }), this.contentEle = this.createElement("div", {
                    className: "e-dlg-content",
                    id: this.element.id + "_dialog-content"
                }), this.innerContentElement) this.contentEle.appendChild(this.innerContentElement);
            else if (!g(this.content) && "" !== this.content || !this.initialRender) {
                Object.keys(window);
                "string" != typeof this.content || S() ? this.content instanceof HTMLElement ? this.contentEle.appendChild(this.content) : this.setTemplate(this.content, this.contentEle, "content") : this.contentEle.innerHTML = this.sanitizeHelper(this.content)
            }
            g(this.headerContent) ? this.element.insertBefore(this.contentEle, this.element.children[0]) : this.element.insertBefore(this.contentEle, this.element.children[1]), "auto" === this.height && (this.isBlazorServerRender() || !me.isIE || "" !== this.element.style.width || g(this.width) || (this.element.style.width = C(this.width)), this.setMaxHeight())
        }, t.prototype.setTemplate = function(e, t, i) {
            var n, r, o;
            Object.keys(window);
            r = t.classList.contains("e-dlg-header") ? this.element.id + "header" : t.classList.contains("e-footer-content") ? this.element.id + "footerTemplate" : this.element.id + "content", g(e.outerHTML) ? "string" != typeof e || S() && !this.isStringTemplate ? (n = Ge(e), o = e) : t.innerHTML = this.sanitizeHelper(e) : t.appendChild(e);
            var s = [];
            if (!g(n)) {
                for (var a = 0, l = n({}, this, i, r, !(S() && !this.isStringTemplate && 0 === o.indexOf("<div>Blazor")) || this.isStringTemplate); a < l.length; a++) {
                    var h = l[a];
                    s.push(h)
                }
                vt([].slice.call(s), t)
            }
        }, t.prototype.sanitizeHelper = function(e) {
            if (this.enableHtmlSanitizer) {
                var t = Oi.beforeSanitize();
                u(t, t, {
                    cancel: !1,
                    helper: null
                }), this.trigger("beforeSanitizeHtml", t), t.cancel && !g(t.helper) ? e = t.helper(e) : t.cancel || (e = Oi.serializeValue(t, e))
            }
            return e
        }, t.prototype.setMaxHeight = function() {
            if (this.allowMaxHeight) {
                var e = this.element.style.display;
                this.element.style.display = "none", this.element.style.maxHeight = !g(this.target) && this.targetEle.offsetHeight < window.innerHeight ? this.targetEle.offsetHeight - 20 + "px" : window.innerHeight - 20 + "px", this.element.style.display = e, me.isIE && "auto" === this.height && !g(this.contentEle) && this.element.offsetHeight < this.contentEle.offsetHeight && (this.element.style.height = "inherit")
            }
        }, t.prototype.setEnableRTL = function() {
            this.isBlazorServerRender() || (this.enableRtl ? ut([this.element], "e-rtl") : gt([this.element], "e-rtl")), g(this.element.querySelector(".e-resize-handle")) || (Eo(), this.setResize())
        }, t.prototype.setTargetContent = function() {
            var e = this;
            if (g(this.content) || "" === this.content) {
                var t = "" !== this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g, "");
                (this.element.children.length > 0 || t) && (this.innerContentElement = document.createDocumentFragment(), [].slice.call(this.element.childNodes).forEach((function(t) {
                    8 !== t.nodeType && e.innerContentElement.appendChild(t)
                })))
            }
        }, t.prototype.setHeader = function() {
            this.headerEle ? this.headerEle.innerHTML = "" : this.headerEle = this.createElement("div", {
                id: this.element.id + "_title",
                className: "e-dlg-header"
            }), this.createHeaderContent(), this.headerContent.appendChild(this.headerEle), this.setTemplate(this.header, this.headerEle, "header"), St(this.element, {
                "aria-labelledby": this.element.id + "_title"
            }), this.element.insertBefore(this.headerContent, this.element.children[0])
        }, t.prototype.setFooterTemplate = function() {
            this.ftrTemplateContent ? this.ftrTemplateContent.innerHTML = "" : this.ftrTemplateContent = this.createElement("div", {
                className: "e-footer-content"
            }), "" === this.footerTemplate || g(this.footerTemplate) ? this.ftrTemplateContent.innerHTML = this.buttonContent.join("") : this.setTemplate(this.footerTemplate, this.ftrTemplateContent, "footerTemplate"), this.element.appendChild(this.ftrTemplateContent)
        }, t.prototype.createHeaderContent = function() {
            g(this.headerContent) && (this.headerContent = this.createElement("div", {
                id: this.element.id + "_dialog-header",
                className: "e-dlg-header-content"
            }))
        }, t.prototype.renderCloseIcon = function() {
            this.closeIcon = this.createElement("button", {
                className: "e-dlg-closeicon-btn",
                attrs: {
                    type: "button"
                }
            }), this.closeIconBtnObj = new Zr({
                cssClass: "e-flat",
                iconCss: "e-icon-dlg-close e-icons"
            }), this.closeIconTitle(), g(this.headerContent) ? (this.createHeaderContent(), yt([this.closeIcon], this.headerContent), this.element.insertBefore(this.headerContent, this.element.children[0])) : yt([this.closeIcon], this.headerContent), this.closeIconBtnObj.appendTo(this.closeIcon)
        }, t.prototype.closeIconTitle = function() {
            this.l10n.setLocale(this.locale);
            var e = this.l10n.getConstant("close");
            this.closeIcon.setAttribute("title", e), this.closeIcon.setAttribute("aria-label", e)
        }, t.prototype.setCSSClass = function(e) {
            this.cssClass && ut([this.element], this.cssClass.split(" ")), e && gt([this.element], e.split(" "))
        }, t.prototype.setIsModal = function() {
            this.dlgContainer = this.createElement("div", {
                className: "e-dlg-container"
            }), this.element.classList.remove("e-popup-open"), this.element.parentNode.insertBefore(this.dlgContainer, this.element), this.dlgContainer.appendChild(this.element), ut([this.element], "e-dlg-modal"), this.dlgOverlay = this.createElement("div", {
                className: "e-dlg-overlay"
            }), this.dlgOverlay.style.zIndex = (this.zIndex - 1).toString(), this.dlgContainer.appendChild(this.dlgOverlay)
        }, t.prototype.getValidFocusNode = function(e) {
            for (var t, i = 0; i < e.length; i++)
                if (((t = e[i]).clientHeight > 0 || "a" === t.tagName.toLowerCase() && t.hasAttribute("href")) && t.tabIndex > -1 && !t.disabled && !this.disableElement(t, '[disabled],[aria-disabled="true"],[type="hidden"]')) return t;
            return t
        }, t.prototype.focusableElements = function(e) {
            if (!g(e)) {
                var t = e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');
                return this.getValidFocusNode(t)
            }
            return null
        }, t.prototype.getAutoFocusNode = function(e) {
            var t = e.querySelector(".e-dlg-closeicon-btn"),
                i = e.querySelectorAll("[autofocus]"),
                n = this.getValidFocusNode(i);
            if (S() && (this.primaryButtonEle = this.element.getElementsByClassName("e-primary")[0]), g(n)) {
                if (!g(n = this.focusableElements(this.contentEle))) return n;
                if (!g(this.primaryButtonEle)) return this.element.querySelector(".e-primary")
            } else t = n;
            return t
        }, t.prototype.disableElement = function(e, t) {
            var i = e ? e.matches || e.webkitMatchesSelector || e.msMatchesSelector : null;
            if (i)
                for (; e; e = e.parentNode)
                    if (e instanceof Element && i.call(e, t)) return e;
            return null
        }, t.prototype.focusContent = function() {
            var e = this.getAutoFocusNode(this.element);
            (g(e) ? this.element : e).focus(), this.bindEvent(this.element)
        }, t.prototype.bindEvent = function(e) {
            ye.add(e, "keydown", this.keyDown, this)
        }, t.prototype.unBindEvent = function(e) {
            ye.remove(e, "keydown", this.keyDown)
        }, t.prototype.updateSanitizeContent = function() {
            this.isBlazorServerRender() || (this.contentEle.innerHTML = this.sanitizeHelper(this.content))
        }, t.prototype.isBlazorServerRender = function() {
            return S() && this.isServerRendered
        }, t.prototype.getModuleName = function() {
            return "dialog"
        }, t.prototype.onPropertyChanged = function(e, t) {
            if (this.element.classList.contains("e-dialog"))
                for (var i = 0, n = Object.keys(e); i < n.length; i++) {
                    switch (n[i]) {
                        case "content":
                            g(this.content) || "" === this.content ? g(this.contentEle) || (wt(this.contentEle), this.contentEle = null) : (this.isBlazorServerRender() && (this.contentEle = this.element.querySelector(".e-dlg-content")), g(this.contentEle) || "dialog" === this.contentEle.getAttribute("role") ? this.isBlazorServerRender() && !g(this.element.querySelector(".e-dlg-content")) || this.setContent() : (this.isBlazorServerRender() || (this.contentEle.innerHTML = ""), "string" == typeof this.content ? this.isBlazorServerRender() && "" === this.contentEle.innerText ? this.contentEle.insertAdjacentHTML("beforeend", this.sanitizeHelper(this.content)) : this.updateSanitizeContent() : this.contentEle.appendChild(this.content), this.setMaxHeight()));
                            break;
                        case "header":
                            "" === this.header || g(this.header) ? this.headerEle && (wt(this.headerEle), this.headerEle = null) : this.isBlazorServerRender() && !g(this.element.querySelector(".e-dlg-header-content")) || this.setHeader();
                            break;
                        case "footerTemplate":
                            if ("" === this.footerTemplate || g(this.footerTemplate)) {
                                if (!this.ftrTemplateContent) return;
                                wt(this.ftrTemplateContent), this.ftrTemplateContent = null, this.buttons = [{}]
                            } else this.isBlazorServerRender() && !g(this.element.querySelector(".e-footer-content")) || this.setFooterTemplate(), this.buttons = [{}];
                            break;
                        case "showCloseIcon":
                            this.element.getElementsByClassName("e-icon-dlg-close").length > 0 ? this.showCloseIcon || "" !== this.header && !g(this.header) ? this.showCloseIcon ? this.isBlazorServerRender() && this.wireEvents() : wt(this.closeIcon) : (wt(this.headerContent), this.headerContent = null) : (this.isBlazorServerRender() || this.renderCloseIcon(), this.wireEvents());
                            break;
                        case "locale":
                            this.showCloseIcon && this.closeIconTitle();
                            break;
                        case "visible":
                            this.visible ? this.show() : this.hide();
                            break;
                        case "isModal":
                            this.updateIsModal();
                            break;
                        case "height":
                            Dt(this.element, {
                                height: C(e.height)
                            });
                            break;
                        case "width":
                            Dt(this.element, {
                                width: C(e.width)
                            });
                            break;
                        case "zIndex":
                            this.popupObj.zIndex = this.zIndex, this.isModal && this.setOverlayZindex(this.zIndex), this.element.style.zIndex !== this.zIndex.toString() && (this.calculatezIndex = !1);
                            break;
                        case "cssClass":
                            this.setCSSClass(t.cssClass);
                            break;
                        case "buttons":
                            var r = this.buttons.length;
                            g(this.ftrTemplateContent) || this.isBlazorServerRender() || (wt(this.ftrTemplateContent), this.ftrTemplateContent = null);
                            for (var o = 0; o < r; o++) g(this.buttons[o].buttonModel) || (this.footerTemplate = "", this.setButton());
                            break;
                        case "allowDragging":
                            this.allowDragging && !g(this.headerContent) ? this.setAllowDragging() : this.dragObj.destroy();
                            break;
                        case "target":
                            this.setTarget(e.target);
                            break;
                        case "position":
                            if (this.checkPositionData(), this.isModal) {
                                var s = g(t.position.X) ? this.position.X : t.position.X,
                                    a = g(t.position.Y) ? this.position.Y : t.position.Y;
                                this.dlgContainer.classList.contains("e-dlg-" + s + "-" + a) && this.dlgContainer.classList.remove("e-dlg-" + s + "-" + a)
                            }
                            this.positionChange();
                            break;
                        case "enableRtl":
                            this.setEnableRTL();
                            break;
                        case "enableResize":
                            this.setResize()
                    }
                }
        }, t.prototype.setTarget = function(e) {
            this.popupObj.relateTo = e, this.target = e, this.targetEle = "string" == typeof this.target ? document.querySelector(this.target) : this.target, this.dragObj && (this.dragObj.dragArea = this.targetEle), this.setMaxHeight(), this.isModal && this.updateIsModal(), this.enableResize && this.setResize()
        }, t.prototype.updateIsModal = function() {
            if (this.element.setAttribute("aria-modal", this.isModal ? "true" : "false"), this.isModal) this.setIsModal(), this.element.style.top = "0px", this.element.style.left = "0px", g(this.targetEle) || this.targetEle.appendChild(this.dlgContainer);
            else {
                for (gt([this.element], "e-dlg-modal"), gt([document.body], [Oo, Ao]), wt(this.dlgOverlay); this.dlgContainer.firstChild;) this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild, this.dlgContainer);
                this.dlgContainer.parentElement.removeChild(this.dlgContainer)
            }
            this.visible && this.show(), this.positionChange(), this.isModal && this.dlgOverlay && ye.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this)
        }, t.prototype.setzIndex = function(e, t) {
            var i = this.isProtectedOnChange;
            this.isProtectedOnChange = !0, this.zIndex = pr(e), this.isProtectedOnChange = i, t && (this.popupObj.zIndex = this.zIndex)
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist([])
        }, t.prototype.destroy = function() {
            if (!this.isDestroyed) {
                var t = ["e-rtl", "e-dlg-modal", "e-dlg-resizable", "e-restrict-left", Bo, "e-device"],
                    i = ["role", "aria-modal", "aria-labelledby", "aria-describedby", "aria-grabbed", "tabindex", "style"];
                if (gt([this.targetEle], [Oo, Ao]), this.element.classList.contains(Bo) && gt([document.body], [Oo, Ao]), this.isModal && gt([g(this.targetEle) ? document.body : this.targetEle], Ao), this.unWireEvents(), !g(this.btnObj))
                    for (var n = 0; n < this.btnObj.length; n++) this.btnObj[n].destroy();
                if (g(this.dragObj) || this.dragObj.destroy(), this.popupObj.element.classList.contains("e-popup") && this.popupObj.destroy(), gt([this.element], t), g(this.cssClass) || "" === this.cssClass || gt([this.element], this.cssClass.split(" ")), g(this.refElement) || g(this.refElement.parentElement) || (this.refElement.parentElement.insertBefore(this.isModal ? this.dlgContainer : this.element, this.refElement), wt(this.refElement), this.refElement = void 0), this.isModal && !this.isBlazorServerRender() && (wt(this.dlgOverlay), this.dlgContainer.parentNode.insertBefore(this.element, this.dlgContainer), wt(this.dlgContainer)), this.isBlazorServerRender() || (this.element.innerHTML = this.clonedEle.innerHTML), this.isBlazorServerRender() && !g(this.element.children))
                    for (n = 0; n <= this.element.children.length; n++) n -= n, wt(this.element.children[n]);
                for (n = 0; n < i.length; n++) this.element.removeAttribute(i[n]);
                this.isBlazorServerRender() ? this.isDestroyed = !0 : e.prototype.destroy.call(this), this.isReact && this.clearTemplate()
            }
        }, t.prototype.wireEvents = function() {
            this.isBlazorServerRender() && this.showCloseIcon && (this.closeIcon = this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]), this.showCloseIcon && ye.add(this.closeIcon, "click", this.closeIconClickEventHandler, this), this.isModal && this.dlgOverlay && ye.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this)
        }, t.prototype.unWireEvents = function() {
            if (this.showCloseIcon && ye.remove(this.closeIcon, "click", this.closeIconClickEventHandler), this.isModal && ye.remove(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler), this.buttons.length > 0 && !g(this.buttons[0].buttonModel) && "" === this.footerTemplate)
                for (var e = 0; e < this.buttons.length; e++) "function" == typeof this.buttons[e].click && ye.remove(this.ftrTemplateContent.children[e], "click", this.buttons[e].click)
        }, t.prototype.refreshPosition = function() {
            this.popupObj.refreshPosition()
        }, t.prototype.show = function(e) {
            var t = this;
            if (this.element.classList.contains("e-dialog")) {
                if (!this.element.classList.contains("e-popup-open") || !g(e)) {
                    g(e) || this.fullScreen(e);
                    var i = S() ? {
                        cancel: !1,
                        element: this.element,
                        container: this.isModal ? this.dlgContainer : this.element,
                        maxHeight: this.element.style.maxHeight
                    } : {
                        cancel: !1,
                        element: this.element,
                        container: this.isModal ? this.dlgContainer : this.element,
                        target: this.target,
                        maxHeight: this.element.style.maxHeight
                    };
                    this.trigger("beforeOpen", i, (function(e) {
                        if (!e.cancel) {
                            t.element.style.maxHeight !== i.maxHeight && (t.allowMaxHeight = !1, t.element.style.maxHeight = i.maxHeight), t.storeActiveElement = document.activeElement, t.element.tabIndex = -1, t.isModal && !g(t.dlgOverlay) && (t.dlgOverlay.style.display = "block", t.dlgContainer.style.display = "flex", gt([t.dlgOverlay], "e-fade"), g(t.targetEle) ? ut([document.body], [Oo, Ao]) : (t.targetEle === document.body ? t.dlgContainer.style.position = "fixed" : t.dlgContainer.style.position = "absolute", t.dlgOverlay.style.position = "absolute", t.element.style.position = "relative", ut([t.targetEle], [Oo, Ao])));
                            var n = {
                                    name: t.animationSettings.effect + "In",
                                    duration: t.animationSettings.duration,
                                    delay: t.animationSettings.delay
                                },
                                r = t.isModal ? t.element.parentElement : t.element;
                            t.calculatezIndex && (t.setzIndex(r, !0), Dt(t.element, {
                                zIndex: t.zIndex
                            }), t.isModal && t.setOverlayZindex(t.zIndex)), "None" === t.animationSettings.effect ? t.popupObj.show() : t.popupObj.show(n), t.dialogOpen = !0;
                            var o = t.isProtectedOnChange;
                            t.isProtectedOnChange = !0, t.visible = !0, t.preventVisibility = !0, t.isProtectedOnChange = o
                        }
                    }))
                }
                this.isReact && this.renderReactTemplates()
            }
        }, t.prototype.hide = function(e) {
            var t = this;
            if (this.element.classList.contains("e-dialog") && this.preventVisibility) {
                var i = S() ? {
                    cancel: !1,
                    isInteracted: !!e,
                    element: this.element,
                    container: this.isModal ? this.dlgContainer : this.element,
                    event: e
                } : {
                    cancel: !1,
                    isInteracted: !!e,
                    element: this.element,
                    target: this.target,
                    container: this.isModal ? this.dlgContainer : this.element,
                    event: e
                };
                this.closeArgs = i, this.trigger("beforeClose", i, (function(e) {
                    if (!e.cancel) {
                        t.isModal && (g(t.targetEle) ? gt([document.body], [Oo, Ao]) : gt([t.targetEle], [Oo, Ao]));
                        var i = {
                            name: t.animationSettings.effect + "Out",
                            duration: t.animationSettings.duration,
                            delay: t.animationSettings.delay
                        };
                        "None" === t.animationSettings.effect ? t.popupObj.hide() : t.popupObj.hide(i), t.dialogOpen = !1;
                        var n = t.isProtectedOnChange;
                        t.isProtectedOnChange = !0, t.visible = !1, t.preventVisibility = !1, t.isProtectedOnChange = n
                    }
                }))
            }
        }, t.prototype.fullScreen = function(e) {
            this.element.offsetTop, this.element.offsetLeft;
            if (e) {
                ut([this.element], Bo);
                var t = this.element.style.display;
                this.element.style.display = "none", this.element.style.maxHeight = g(this.target) ? window.innerHeight + "px" : this.targetEle.offsetHeight + "px", this.element.style.display = t, ut([document.body], [Oo, Ao]), this.allowDragging && !g(this.dragObj) && this.dragObj.destroy()
            } else gt([this.element], Bo), gt([document.body], [Oo, Ao]), this.allowDragging && !g(this.headerContent) && this.setAllowDragging();
            return e
        }, t.prototype.getButtons = function(e) {
            return g(e) ? this.btnObj : this.btnObj[e]
        }, Io([zt("")], t.prototype, "content", void 0), Io([zt(!0)], t.prototype, "enableHtmlSanitizer", void 0), Io([zt(!1)], t.prototype, "showCloseIcon", void 0), Io([zt(!1)], t.prototype, "isModal", void 0), Io([zt("")], t.prototype, "header", void 0), Io([zt(!0)], t.prototype, "visible", void 0), Io([zt(!1)], t.prototype, "enableResize", void 0), Io([zt("auto")], t.prototype, "height", void 0), Io([zt("")], t.prototype, "minHeight", void 0), Io([zt("100%")], t.prototype, "width", void 0), Io([zt("")], t.prototype, "cssClass", void 0), Io([zt(1e3)], t.prototype, "zIndex", void 0), Io([zt(null)], t.prototype, "target", void 0), Io([zt("")], t.prototype, "footerTemplate", void 0), Io([zt(!1)], t.prototype, "allowDragging", void 0), Io([Wt([{}], Mo)], t.prototype, "buttons", void 0), Io([zt(!0)], t.prototype, "closeOnEscape", void 0), Io([qt({}, Lo)], t.prototype, "animationSettings", void 0), Io([qt({
            X: "center",
            Y: "center"
        }, nr)], t.prototype, "position", void 0), Io([_t()], t.prototype, "created", void 0), Io([_t()], t.prototype, "open", void 0), Io([_t()], t.prototype, "beforeSanitizeHtml", void 0), Io([_t()], t.prototype, "beforeOpen", void 0), Io([_t()], t.prototype, "close", void 0), Io([_t()], t.prototype, "beforeClose", void 0), Io([_t()], t.prototype, "dragStart", void 0), Io([_t()], t.prototype, "dragStop", void 0), Io([_t()], t.prototype, "drag", void 0), Io([_t()], t.prototype, "overlayClick", void 0), Io([_t()], t.prototype, "resizeStart", void 0), Io([_t()], t.prototype, "resizing", void 0), Io([_t()], t.prototype, "resizeStop", void 0), Io([_t()], t.prototype, "destroyed", void 0), t = Io([Gt], t)
    }(pi);
! function(e) {
    function t(e, t) {
        var i = new Fo(e);
        return i.appendTo(t), i
    }

    function i(e, t) {
        return e.header = g(t.title) ? "Information" : t.title, e.content = g(t.content) ? "" : t.content, e.isModal = !!g(t.isModal) || t.isModal, e.showCloseIcon = !g(t.showCloseIcon) && t.showCloseIcon, e.allowDragging = !g(t.isDraggable) && t.isDraggable, e.closeOnEscape = !g(t.closeOnEscape) && t.closeOnEscape, e.position = g(t.position) ? {
            X: "center",
            Y: "top"
        } : t.position, e.animationSettings = g(t.animationSettings) ? {
            effect: "Fade",
            duration: 400,
            delay: 0
        } : t.animationSettings, e.cssClass = g(t.cssClass) ? "" : t.cssClass, e.zIndex = g(t.zIndex) ? 1e3 : t.zIndex, e.open = g(t.open) ? null : t.open, e
    }

    function n(e, t, i) {
        var n = i;
        return g(t.text) || (n.buttonModel.content = t.text), g(t.icon) || (n.buttonModel.iconCss = t.icon), g(t.cssClass) || (n.buttonModel.cssClass = t.cssClass), g(t.click) || (n.click = t.click), n
    }
    e.alert = function(e) {
        var r, o, s = ct("div", {
            className: "e-alert-dialog"
        });
        return document.body.appendChild(s), (r = t("string" == typeof e ? {
            content: e,
            position: {
                X: "center",
                Y: "top"
            },
            isModal: !0,
            header: "Information",
            buttons: [{
                buttonModel: {
                    isPrimary: !0,
                    content: "OK"
                },
                click: function() {
                    this.hide()
                }
            }]
        } : function(e, t) {
            var i = [{
                buttonModel: {
                    isPrimary: !0,
                    content: "OK"
                },
                click: function() {
                    this.hide()
                }
            }];
            return g(t.okButton) ? e.buttons = i : e.buttons[0] = n(e.buttons[0], t.okButton, i[0]), e
        }(i({
            buttons: []
        }, o = e), o), s)).close = function() {
            e && e.close && e.close.apply(r), r.destroy(), r.element.classList.contains("e-dlg-modal") ? (r.element.parentElement.remove(), r.target.classList.remove("e-scroll-disabled")) : r.element.remove()
        }, r
    }, e.confirm = function(e) {
        var r, o, s = ct("div", {
            className: "e-confirm-dialog"
        });
        return document.body.appendChild(s), (r = t("string" == typeof e ? {
            position: {
                X: "center",
                Y: "top"
            },
            content: e,
            isModal: !0,
            header: "Information",
            buttons: [{
                buttonModel: {
                    isPrimary: !0,
                    content: "OK"
                },
                click: function() {
                    this.hide()
                }
            }, {
                buttonModel: {
                    content: "Cancel"
                },
                click: function() {
                    this.hide()
                }
            }]
        } : function(e, t) {
            var i = {
                    buttonModel: {
                        isPrimary: !0,
                        content: "OK"
                    },
                    click: function() {
                        this.hide()
                    }
                },
                r = {
                    buttonModel: {
                        content: "Cancel"
                    },
                    click: function() {
                        this.hide()
                    }
                };
            return g(t.okButton) ? e.buttons[0] = i : e.buttons[0] = n(e.buttons[0], t.okButton, i), g(t.cancelButton) ? e.buttons[1] = r : e.buttons[1] = n(e.buttons[1], t.cancelButton, r), e
        }(i({
            buttons: []
        }, o = e), o), s)).close = function() {
            e && e.close && e.close.apply(r), r.destroy(), r.element.classList.contains("e-dlg-modal") ? (r.element.parentElement.remove(), r.target.classList.remove("e-scroll-disabled")) : r.element.remove()
        }, r
    }
}(Ro || (Ro = {}));
var No, Ho = "e-rtl",
    Vo = "e-disabled",
    jo = "e-input",
    zo = "e-multi-line-input",
    qo = "e-input-group",
    Wo = "e-float-input",
    _o = "e-float-line",
    Go = "e-float-text",
    Uo = "e-clear-icon",
    Ko = "e-clear-icon-hide",
    Yo = "e-label-top",
    Xo = "e-label-bottom",
    Qo = "e-no-float-label",
    Jo = "e-input-custom-tag",
    Zo = "e-float-custom-tag";
! function(e) {
    var t;

    function i(e) {
        n(e.floatLabelType, e.element), e.element.addEventListener("focus", (function() {
            var e = d(this);
            (e.classList.contains("e-input-group") || e.classList.contains("e-outline") || e.classList.contains("e-filled")) && e.classList.add("e-input-focus")
        })), e.element.addEventListener("blur", (function() {
            var e = d(this);
            (e.classList.contains("e-input-group") || e.classList.contains("e-outline") || e.classList.contains("e-filled")) && e.classList.remove("e-input-focus")
        })), e.element.addEventListener("input", (function() {
            n(t, e.element)
        }))
    }

    function n(e, t) {
        var i = t.value;
        "" === i || g(i) ? "Always" !== e && t.parentElement && t.parentElement.classList.remove("e-valid-input") : t.parentElement.classList.add("e-valid-input")
    }

    function r() {
        var e = d(this).getElementsByClassName("e-float-text")[0];
        g(e) || (ut([e], Yo), e.classList.contains(Xo) && gt([e], Xo))
    }

    function o() {
        var e = d(this);
        if (e.getElementsByTagName("textarea")[0] ? "" === e.getElementsByTagName("textarea")[0].value : "" === e.getElementsByTagName("input")[0].value) {
            var t = e.getElementsByClassName("e-float-text")[0];
            g(t) || (t.classList.contains(Yo) && gt([t], Yo), ut([t], Xo))
        }
    }

    function s(e) {
        e.addEventListener("focus", r), e.addEventListener("blur", o)
    }

    function a(e, t, i) {
        var n, r, o = g(i) ? ct : i;
        if ("Auto" === e.floatLabelType && s(e.element), g(t.container) ? (t.container = f(e, Wo, Zo, "div", o), e.element.parentNode.insertBefore(t.container, e.element)) : (g(e.customTag) || t.container.classList.add(Zo), t.container.classList.add(Wo)), n = o("span", {
                className: _o
            }), r = o("label", {
                className: Go
            }), g(e.element.id) || "" === e.element.id || (r.id = "label_" + e.element.id.replace(/ /g, "_"), St(e.element, {
                "aria-labelledby": r.id
            })), g(e.element.placeholder) || "" === e.element.placeholder || (r.innerText = m(e.element.placeholder), e.element.removeAttribute("placeholder")), g(e.properties) || g(e.properties.placeholder) || "" === e.properties.placeholder || (r.innerText = m(e.properties.placeholder)), r.innerText || t.container.classList.add(Qo), t.container.classList.contains("e-float-icon-left")) {
            var a = t.container.querySelector(".e-input-in-wrap");
            a.appendChild(e.element), a.appendChild(n), a.appendChild(r)
        } else t.container.appendChild(e.element), t.container.appendChild(n), t.container.appendChild(r);
        p(e.element.value, r), "Always" === e.floatLabelType && (r.classList.contains(Xo) && gt([r], Xo), ut([r], Yo)), "Auto" === e.floatLabelType && (e.element.addEventListener("input", (function(t) {
            p(e.element.value, r)
        })), e.element.addEventListener("blur", (function(t) {
            p(e.element.value, r)
        }))), g(e.element.getAttribute("id")) || r.setAttribute("for", e.element.getAttribute("id"))
    }

    function l(e, t) {
        "Always" === e && t.classList.contains("e-outline") && t.classList.add("e-valid-input")
    }

    function h(e, t) {
        e ? gt([t], Ko) : ut([t], Ko)
    }

    function p(e, t) {
        e ? (ut([t], Yo), t.classList.contains(Xo) && gt([t], Xo)) : (t.classList.contains(Yo) && gt([t], Yo), ut([t], Xo))
    }

    function d(e) {
        var t = g(e.parentNode) ? e : e.parentNode;
        return t && t.classList.contains("e-input-in-wrap") && (t = t.parentNode), t
    }

    function c(e, t, i) {
        t.addEventListener("click", (function(i) {
            e.classList.contains(Vo) || e.readOnly || (i.preventDefault(), e !== document.activeElement && e.focus(), e.value = "", ut([t], Ko))
        })), e.addEventListener("input", (function(i) {
            h(e.value, t)
        })), e.addEventListener("focus", (function(i) {
            h(e.value, t)
        })), e.addEventListener("blur", (function(e) {
            setTimeout((function() {
                ut([t], Ko)
            }), 200)
        }))
    }

    function u(e, t) {
        if (d(e).classList.contains(Wo) && "Auto" === t) {
            var i = d(e).getElementsByClassName("e-float-text")[0];
            p(e.value, i)
        }
    }

    function f(e, t, i, n, r) {
        var o, s = g(r) ? ct : r;
        return g(e.customTag) ? o = s(n, {
            className: t
        }) : (o = s(e.customTag, {
            className: t
        })).classList.add(i), o.classList.add("e-control-wrapper"), o
    }

    function m(e) {
        var t = "";
        if (!g(e) && "" !== e) {
            var i = document.createElement("span");
            i.innerHTML = '<input  placeholder="' + e + '"/>', t = i.children[0].placeholder
        }
        return t
    }

    function y(e, t, i) {
        g(i) || "" === i || gt(t, i.split(" ")), g(e) || "" === e || ut(t, e.split(" "))
    }

    function v(e, t) {
        var i;
        e = m(e), (i = d(t)).classList.contains(Wo) ? g(e) || "" === e ? (i.classList.add(Qo), i.getElementsByClassName(Go)[0].textContent = "") : (i.getElementsByClassName(Go)[0].textContent = e, i.classList.remove(Qo), t.removeAttribute("placeholder")) : g(e) || "" === e ? (t.removeAttribute("placeholder"), t.removeAttribute("aria-placeholder")) : St(t, {
            placeholder: e,
            "aria-placeholder": e
        })
    }

    function b(e, t, i) {
        e ? St(t, {
            readonly: ""
        }) : t.removeAttribute("readonly"), g(i) || u(t, i)
    }

    function w(e, t) {
        e ? ut(t, Ho) : gt(t, Ho)
    }

    function S(e, t, i, n) {
        var r = {
                disabled: "disabled",
                "aria-disabled": "true"
            },
            o = !g(n);
        e ? (t.classList.remove(Vo), k(r, t), o && gt([n], Vo)) : (t.classList.add(Vo), T(r, t), o && ut([n], Vo)), g(i) || u(t, i)
    }

    function x(e, t, i, n, r) {
        var o = g(r) ? ct : r;
        e ? i.clearButton = function(e, t, i, n) {
            var r = (g(n) ? ct : n)("span", {
                    className: Uo
                }),
                o = t.container;
            return g(i) ? (t.container.classList.contains(Wo) ? t.container.querySelector("." + Go) : e).insertAdjacentElement("afterend", r) : o.appendChild(r), !g(o) && o.classList.contains(Wo) && ut([o], qo), ut([r], Ko), c(e, r, o), r.setAttribute("aria-label", "close"), r
        }(t, i, n, o) : (i.clearButton.remove(), i.clearButton = null)
    }

    function k(e, t) {
        for (var i = 0, n = Object.keys(e); i < n.length; i++) {
            var r = n[i],
                o = void 0;
            o = d(t), "disabled" === r && t.classList.remove(Vo), "disabled" === r && o.classList.contains(qo) && o.classList.remove(Vo), "placeholder" === r && o.classList.contains(Wo) ? o.getElementsByClassName(Go)[0].textContent = "" : t.removeAttribute(r)
        }
    }

    function T(e, t) {
        for (var i = 0, n = Object.keys(e); i < n.length; i++) {
            var r = n[i],
                o = void 0;
            o = d(t), "disabled" === r && t.classList.add(Vo), "disabled" === r && o.classList.contains(qo) && o.classList.add(Vo), "placeholder" === r && o.classList.contains(Wo) ? o.getElementsByClassName(Go)[0].textContent = e[r] : t.setAttribute(r, e[r])
        }
    }

    function D(e, t, i) {
        var n = [];
        n.push(i);
        var r = g(i) ? t.querySelectorAll(".e-input-group-icon") : n;
        if (e && r.length > 0)
            for (var o = 0; o < r.length; o++) r[o].addEventListener("mousedown", E, !1), r[o].addEventListener("mouseup", R, !1);
        else if (r.length > 0)
            for (o = 0; o < r.length; o++) r[o].removeEventListener("mousedown", E, this), r[o].removeEventListener("mouseup", R, this)
    }

    function E() {
        for (var e, t, i = this.parentElement; !i.classList.contains("e-input-group");) i = i.parentElement;
        t = this, (e = i).classList.contains("e-disabled") || e.querySelector("input").readOnly || t.classList.add("e-input-btn-ripple")
    }

    function R() {
        var e = this;
        setTimeout((function() {
            e.classList.remove("e-input-btn-ripple")
        }), 500)
    }

    function P(e, t) {
        var i = t("span", {
            className: e
        });
        return i.classList.add("e-input-group-icon"), i
    }

    function I(e, t, i, n) {
        var r = g(n) ? ct : n,
            o = P(e, r);
        t.classList.add("e-float-icon-left");
        var s = t.querySelector(".e-input-in-wrap");
        if (g(s)) {
            s = r("span", {
                className: "e-input-in-wrap"
            }), i.parentNode.insertBefore(s, i);
            var a = t.querySelectorAll(i.tagName + " ~ *");
            s.appendChild(i);
            for (var l = 0; l < a.length; l++) s.appendChild(a[l])
        }
        return s.parentNode.insertBefore(o, s), t.classList.contains(qo) || t.classList.add(qo), D(!0, t, o), o
    }

    function M(e, t, i) {
        var n = P(e, g(i) ? ct : i);
        return t.classList.contains(qo) || t.classList.add(qo), (t.classList.contains("e-float-icon-left") ? t.querySelector(".e-input-in-wrap") : t).appendChild(n), D(!0, t, n), n
    }
    e.createInput = function(e, n) {
        var r = g(n) ? ct : n,
            o = {
                container: null,
                buttons: [],
                clearButton: null
            };
        if (t = e.floatLabelType, g(e.floatLabelType) || "Never" === e.floatLabelType ? (o.container = f(e, qo, Jo, "span", r), e.element.parentNode.insertBefore(o.container, e.element), ut([e.element], jo), o.container.appendChild(e.element)) : a(e, o, r), i(e), g(e.properties) || g(e.properties.showClearButton) || !e.properties.showClearButton || "TEXTAREA" === e.element.tagName || (x(e.properties.showClearButton, e.element, o, !0, r), o.clearButton.setAttribute("role", "button"), o.container.classList.contains(Wo) && ut([o.container], qo)), !g(e.buttons) && "TEXTAREA" !== e.element.tagName)
            for (var s = 0; s < e.buttons.length; s++) o.buttons.push(M(e.buttons[s], o.container, r));
        return g(e.element) || "TEXTAREA" !== e.element.tagName || ut([o.container], zo), o = function(e, t) {
            if (!g(e.properties))
                for (var i = 0, n = Object.keys(e.properties); i < n.length; i++) {
                    switch (n[i]) {
                        case "cssClass":
                            y(e.properties.cssClass, [t.container]), l(e.floatLabelType, t.container);
                            break;
                        case "enabled":
                            S(e.properties.enabled, e.element, e.floatLabelType, t.container);
                            break;
                        case "enableRtl":
                            w(e.properties.enableRtl, [t.container]);
                            break;
                        case "placeholder":
                            v(e.properties.placeholder, e.element);
                            break;
                        case "readonly":
                            b(e.properties.readonly, e.element)
                    }
                }
            return t
        }(e, o), o, o
    }, e.bindInitialEvent = i, e.wireFloatingEvents = s, e.wireClearBtnEvents = c, e.setValue = function(e, t, i, r) {
        if (t.value = e, g(i) || "Auto" !== i || u(t, i), !g(r) && r) {
            var o = d(t);
            if (!g(o)) {
                var s = o.getElementsByClassName(Uo)[0];
                t.value && o.classList.contains("e-input-focus") ? gt([s], Ko) : ut([s], Ko)
            }
        }
        n(i, t)
    }, e.setCssClass = y, e.setWidth = function(e, t) {
        "number" == typeof e ? t.style.width = C(e) : "string" == typeof e && (t.style.width = e.match(/px|%|em/) ? e : C(e))
    }, e.setPlaceholder = v, e.setReadonly = b, e.setEnableRtl = w, e.setEnabled = S, e.setClearButton = x, e.removeAttributes = k, e.addAttributes = T, e.removeFloating = function(e) {
        var t, i = e.container;
        if (!g(i) && i.classList.contains(Wo)) {
            var n = i.querySelector("textarea") ? i.querySelector("textarea") : i.querySelector("input"),
                s = i.querySelector("." + Go).textContent,
                a = null !== i.querySelector(".e-clear-icon");
            wt(i.querySelector("." + _o)), wt(i.querySelector("." + Go)), Et(i, [qo], [Wo]), (t = n).removeEventListener("focus", r), t.removeEventListener("blur", o), St(n, {
                placeholder: s
            }), n.classList.add(jo), a || "INPUT" !== n.tagName || n.removeAttribute("required")
        }
    }, e.addFloating = function(e, i, n, r) {
        var o = g(r) ? ct : r,
            s = Tt(e, "." + qo);
        if (t = i, "Never" !== i) {
            var h = s.tagName,
                p = {
                    element: e,
                    floatLabelType: i,
                    customTag: h = "DIV" !== h && "SPAN" !== h ? h : null,
                    properties: {
                        placeholder: n
                    }
                },
                d = s.querySelector(".e-clear-icon"),
                c = {
                    container: s
                };
            e.classList.remove(jo), a(p, c, o);
            var u = s.classList.contains("e-float-icon-left");
            if (g(d))
                if (u) d = s.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon");
                else d = s.querySelector(".e-input-group-icon");
            if (g(d)) u && (d = s.querySelector(".e-input-group-icon")), g(d) && s.classList.remove(qo);
            else {
                var f = s.querySelector("." + _o),
                    m = s.querySelector("." + Go),
                    y = u ? s.querySelector(".e-input-in-wrap") : s;
                y.insertBefore(e, d), y.insertBefore(f, d), y.insertBefore(m, d)
            }
        }
        l(i, e.parentElement)
    }, e.setRipple = function(e, t) {
        for (var i = 0; i < t.length; i++) D(e, t[i].container)
    }, e.addIcon = function(e, t, i, n, r) {
        var o = "string" == typeof t ? t.split(",") : t;
        if ("append" === e.toLowerCase())
            for (var s = 0, a = o; s < a.length; s++) {
                M(a[s], i, r)
            } else
                for (var l = 0, h = o; l < h.length; l++) {
                    I(h[l], i, n, r)
                }
    }, e.prependSpan = I, e.appendSpan = M
}(No || (No = {}));
var $o = function() {
        function e(e) {
            this.existingPredicate = {}, this.foreignKeyQuery = new on, this.filterState = !0, this.values = {}, this.renderEmpty = !1, this.parent = e, this.id = this.parent.element.id, this.valueFormatter = new Cn(this.parent.locale), this.cBoxTrue = Fr(this.parent.createElement, !1, {
                checked: !0,
                label: " "
            }), this.cBoxFalse = Fr(this.parent.createElement, !1, {
                checked: !1,
                label: " "
            }), this.cBoxTrue.insertBefore(this.parent.createElement("input", {
                className: "e-chk-hidden",
                attrs: {
                    type: "checkbox"
                }
            }), this.cBoxTrue.firstChild), this.cBoxFalse.insertBefore(this.parent.createElement("input", {
                className: "e-chk-hidden",
                attrs: {
                    type: "checkbox"
                }
            }), this.cBoxFalse.firstChild), this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"), this.parent.enableRtl && ut([this.cBoxTrue, this.cBoxFalse], ["e-rtl"])
        }
        return e.prototype.destroy = function() {
            this.closeDialog()
        }, e.prototype.wireEvents = function() {
            ye.add(this.dlg, "click", this.clickHandler, this), ye.add(this.dlg, "keyup", this.keyupHandler, this), this.searchHandler = y(this.searchBoxKeyUp, 200), ye.add(this.dlg.querySelector(".e-searchinput"), "keyup", this.searchHandler, this)
        }, e.prototype.unWireEvents = function() {
            ye.remove(this.dlg, "click", this.clickHandler), ye.remove(this.dlg, "keyup", this.keyupHandler);
            var e = this.dlg.querySelector(".e-searchinput");
            e && ye.remove(e, "keyup", this.searchHandler)
        }, e.prototype.foreignKeyFilter = function(e, t, i) {
            var n = this,
                r = {},
                o = [],
                s = this.foreignKeyQuery.clone();
            this.options.column.dataSource.executeQuery(s.where(i)).then((function(i) {
                n.options.column.columnData = i.result, n.parent.notify("generateQuery", {
                    predicate: r,
                    column: n.options.column
                }), e.ejpredicate = r.predicate.predicates;
                for (var s = r.predicate.predicates, a = 0; a < s.length; a++) o.push({
                    field: s[a].field,
                    predicate: "or",
                    matchCase: s[a].ignoreCase,
                    ignoreAccent: s[a].ignoreAccent,
                    operator: s[a].operator,
                    value: s[a].value,
                    type: n.options.type
                });
                e.filterCollection = o.length ? o : t.filter((function(e) {
                    return e.field = n.options.field
                })), n.options.handler(e)
            }))
        }, e.prototype.foreignFilter = function(e, t) {
            var i = this.options.isRemote ? "string" === this.options.column.type ? "contains" : "equal" : this.options.column.type ? "contains" : "equal",
                n = new sn(this.options.column.foreignKeyValue, i, t, !0, this.options.ignoreAccent);
            this.foreignKeyFilter(e, [e.filterCollection], n)
        }, e.prototype.searchBoxClick = function(e) {
            e.target.classList.contains("e-searchclear") && (this.sInput.value = "", this.refreshCheckboxes(), this.updateSearchIcon(), this.sInput.focus())
        }, e.prototype.searchBoxKeyUp = function(e) {
            this.refreshCheckboxes(), this.updateSearchIcon()
        }, e.prototype.updateSearchIcon = function() {
            this.sInput.value.length ? Et(this.sIcon, ["e-chkcancel-icon"], ["e-search-icon"]) : Et(this.sIcon, ["e-search-icon"], ["e-chkcancel-icon"])
        }, e.prototype.getLocalizedLabel = function(e) {
            return this.localeObj.getConstant(e)
        }, e.prototype.updateDataSource = function() {
            var e = this.options.dataSource;
            if (!(e instanceof yn))
                for (var t = 0; t < e.length; t++)
                    if ("object" != typeof e) {
                        var i = {};
                        i[this.options.field] = e[t], e[t] = i
                    }
        }, e.prototype.updateModel = function(e) {
            this.options = e, this.existingPredicate = e.actualPredicate || {}, this.options.dataSource = e.dataSource, this.options.dataManager = e.dataManager ? e.dataManager : e.dataSource, this.updateDataSource(), this.options.type = e.type, this.options.format = e.format || "", this.options.ignoreAccent = e.ignoreAccent || !1, this.options.filteredColumns = e.filteredColumns || this.parent.filterSettings.columns, this.options.query = e.query || new on, this.options.allowCaseSensitive = e.allowCaseSensitive || !1, this.options.uid = e.column.uid, this.values = {}, this.localeObj = e.localeObj, this.isFiltered = e.filteredColumns.length
        }, e.prototype.getAndSetChkElem = function(e) {
            if (this.dlg = this.parent.createElement("div", {
                    id: this.id + this.options.type + "_excelDlg",
                    className: "e-checkboxfilter e-filter-popup"
                }), this.sBox = this.parent.createElement("div", {
                    className: "e-searchcontainer"
                }), !e.hideSearchbox) {
                this.sInput = this.parent.createElement("input", {
                    id: this.id + "_SearchBox",
                    className: "e-searchinput"
                }), this.sIcon = this.parent.createElement("span", {
                    className: "e-searchclear e-search-icon e-icons e-input-group-icon",
                    attrs: {
                        type: "text",
                        title: this.getLocalizedLabel("Search")
                    }
                }), this.searchBox = this.parent.createElement("span", {
                    className: "e-searchbox e-fields"
                }), this.searchBox.appendChild(this.sInput), this.sBox.appendChild(this.searchBox);
                var t = {
                    element: this.sInput,
                    floatLabelType: "Never",
                    properties: {
                        placeholder: this.getLocalizedLabel("Search")
                    }
                };
                No.createInput(t, this.parent.createElement), this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)
            }
            return this.spinner = this.parent.createElement("div", {
                className: "e-spinner"
            }), this.cBox = this.parent.createElement("div", {
                id: this.id + this.options.type + "_CheckBoxList",
                className: "e-checkboxlist e-fields"
            }), this.spinner.appendChild(this.cBox), this.sBox.appendChild(this.spinner), this.sBox
        }, e.prototype.showDialog = function(e) {
            var t = {
                requestType: "filterbeforeopen",
                columnName: this.options.field,
                columnType: this.options.type,
                cancel: !1
            };
            if (!S() || this.parent.isJsComponent) {
                t.filterModel = this
            }
            if (this.parent.notify("cbox-filter-begin", t), !t.cancel) {
                this.dialogObj = new Fo({
                    visible: !1,
                    content: this.sBox,
                    close: this.closeDialog.bind(this),
                    width: !g(Ka(e.target, "e-bigger")) || this.parent.element.classList.contains("e-device") ? 260 : 255,
                    target: this.parent.element,
                    animationSettings: {
                        effect: "None"
                    },
                    buttons: [{
                        click: this.btnClick.bind(this),
                        buttonModel: {
                            content: this.getLocalizedLabel(this.isExcel ? "OKButton" : "FilterButton"),
                            cssClass: "e-primary",
                            isPrimary: !0
                        }
                    }, {
                        click: this.btnClick.bind(this),
                        buttonModel: {
                            cssClass: "e-flat",
                            content: this.getLocalizedLabel(this.isExcel ? "CancelButton" : "ClearButton")
                        }
                    }],
                    created: this.dialogCreated.bind(this),
                    open: this.dialogOpen.bind(this)
                });
                this.dialogObj.isStringTemplate = !0, this.dlg.setAttribute("aria-label", this.getLocalizedLabel("ExcelFilterDialogARIA")), this.parent.element.appendChild(this.dlg), this.dialogObj.appendTo(this.dlg), this.dialogObj.element.style.maxHeight = this.options.height + "px", this.dialogObj.show(), this.wireEvents(), Ni({
                    target: this.spinner
                }, this.parent.createElement), Xi(this.spinner), this.getAllData()
            }
        }, e.prototype.dialogCreated = function(e) {
            me.isDevice ? this.dialogObj.position = {
                X: "center",
                Y: "center"
            } : ul(this.options.target, this.dialogObj, this.parent), this.parent.notify("filterDialogCreated", e)
        }, e.prototype.openDialog = function(e) {
            this.updateModel(e), this.getAndSetChkElem(e), this.showDialog(e)
        }, e.prototype.closeDialog = function() {
            if (this.dialogObj && !this.dialogObj.isDestroyed) {
                var e = this.options.columns.filter((function(e) {
                        return e.getFilterItemTemplate()
                    })),
                    t = this.parent.registeredTemplate;
                e.length && !g(t) && t.filterItemTemplate && this.parent.destroyTemplate(["filterItemTemplate"]), this.parent.isReact && (this.parent.destroyTemplate(["filterItemTemplate"]), this.parent.renderTemplates()), this.parent.notify("filter-menu-close", {
                    field: this.options.field
                }), this.dialogObj.destroy(), this.unWireEvents(), Ct(this.dlg), this.dlg = null
            }
        }, e.prototype.clearFilter = function() {
            var e = {
                instance: this,
                handler: this.clearFilter,
                cancel: !1
            };
            this.parent.notify("filter-Prevent", e), e.cancel || this.options.handler({
                action: "clear-filter",
                field: this.options.field
            })
        }, e.prototype.btnClick = function(e) {
            if (this.filterState) {
                if ("input" === e.target.tagName.toLowerCase() && e.target.classList.contains("e-searchinput")) {
                    var t = e.target.value;
                    "boolean" === this.options.column.type && ("" !== t && -1 !== this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(t.toLowerCase()) ? t = !0 : "" !== t && -1 !== this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(t.toLowerCase()) && (t = !1));
                    var i = {
                        action: "filtering",
                        filterCollection: {
                            field: this.options.field,
                            operator: this.options.isRemote ? "string" === this.options.column.type ? "contains" : "equal" : "date" === this.options.column.type || "datetime" === this.options.column.type || "boolean" === this.options.column.type ? "equal" : "contains",
                            value: t,
                            matchCase: !1,
                            type: this.options.column.type
                        },
                        field: this.options.field
                    };
                    null != t && "" !== t ? this.isForeignColumn(this.options.column) ? this.foreignFilter(i, t) : this.options.handler(i) : this.closeDialog()
                } else if (13 === e.keyCode) this.fltrBtnHandler();
                else {
                    var n = e.target.firstChild.textContent.toLowerCase();
                    this.getLocalizedLabel(this.isExcel ? "OKButton" : "FilterButton").toLowerCase() === n ? this.fltrBtnHandler() : this.getLocalizedLabel("ClearButton").toLowerCase() === n && this.clearFilter()
                }
                this.closeDialog()
            } else "input" !== e.target.tagName.toLowerCase() && (this.clearFilter(), this.closeDialog())
        }, e.prototype.fltrBtnHandler = function() {
            var t, i, n, r = [].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),
                o = r,
                s = "equal",
                a = this.searchBox.querySelector(".e-searchinput"),
                l = this.options.allowCaseSensitive,
                h = {
                    field: this.options.field,
                    predicate: "or",
                    uid: this.options.uid,
                    operator: s,
                    type: this.options.type,
                    matchCase: l,
                    ignoreAccent: this.options.ignoreAccent
                },
                p = this.itemsCnt !== r.length && this.itemsCnt - r.length < r.length;
            p && "" === a.value && (s = "notequal", r = [].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")), h.predicate = "and", h.operator = "notequal");
            var d = [];
            if (r.length !== this.itemsCnt || a.value && "" !== a.value) {
                for (var c = 0; c < r.length; c++) {
                    n = u({}, {
                        value: t = this.values[Ka(r[c], "e-ftrchk").getAttribute("uid")]
                    }, h), t && !t.toString().length && (n.operator = p ? "notequal" : "equal"), "" === t || g(t) ? d = d.concat(e.generateNullValuePredicates(h)) : d.push(n);
                    var f = {
                        instance: this,
                        handler: this.fltrBtnHandler,
                        arg1: n.field,
                        arg2: n.predicate,
                        arg3: n.operator,
                        arg4: n.matchCase,
                        arg5: n.ignoreAccent,
                        arg6: n.value,
                        cancel: !1
                    };
                    if (this.parent.notify("filter-Prevent", f), f.cancel) return
                }
                "date" !== this.options.type && "datetime" !== this.options.type || (i = o.length - 1, g(this.values[Ka(o[i], "e-ftrchk").getAttribute("uid")]) && p && d.push({
                    field: h.field,
                    matchCase: h.matchCase,
                    operator: "equal",
                    predicate: "and",
                    value: null
                })), this.initiateFilter(d)
            } else this.clearFilter()
        }, e.generateNullValuePredicates = function(e) {
            var t = [];
            return "string" === e.type && t.push({
                field: e.field,
                ignoreAccent: e.ignoreAccent,
                matchCase: e.matchCase,
                operator: e.operator,
                predicate: e.predicate,
                value: ""
            }), t.push({
                field: e.field,
                matchCase: e.matchCase,
                operator: e.operator,
                predicate: e.predicate,
                value: null
            }), t.push({
                field: e.field,
                matchCase: e.matchCase,
                operator: e.operator,
                predicate: e.predicate,
                value: void 0
            }), t
        }, e.prototype.initiateFilter = function(e) {
            var t, i = e[0];
            if (!g(i)) {
                t = i.ejpredicate ? i.ejpredicate : new sn(i.field, i.operator, i.value, !i.matchCase, i.ignoreAccent);
                for (var n = 1; n < e.length; n++) t = void 0 !== e[n].ejpredicate ? t[e[n].predicate](e[n].ejpredicate) : t[e[n].predicate](e[n].field, e[n].operator, e[n].value, !e[n].matchCase, e[n].ignoreAccent);
                var r = {
                    action: "filtering",
                    filterCollection: e,
                    field: this.options.field,
                    ejpredicate: sn.or(t)
                };
                this.options.handler(r)
            }
        }, e.prototype.isForeignColumn = function(e) {
            return !!e.isForeignColumn && e.isForeignColumn()
        }, e.prototype.refreshCheckboxes = function() {
            var e = this,
                t = this.sInput.value,
                i = this.options.column,
                n = this.isForeignColumn(i) ? this.foreignKeyQuery.clone() : this.options.query.clone(),
                r = this.options.query.clone(),
                o = n.queries.filter((function(e) {
                    return e && "onWhere" === e.fn
                }))[0];
            n.queries = [], r.queries = [];
            var s, a = "string" !== this.options.type && parseFloat(t) ? parseFloat(t) : t,
                l = this.options.isRemote ? "string" === this.options.type ? "contains" : "equal" : this.options.type ? "contains" : "equal",
                h = this.options.ignoreAccent,
                p = this.isForeignColumn(i) ? i.foreignKeyValue : i.field;
            a = "" === a || void 0 === a ? void 0 : a;
            var d = this.options.dataManager.adaptor.getModuleName;
            "boolean" === this.options.type && (void 0 !== a && -1 !== this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase()) && d ? (d(), a = !0) : void 0 !== a && -1 !== this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase()) && d && (d(), a = !1), l = "equal"), "date" !== this.options.type && "datetime" !== this.options.type || (a = this.valueFormatter.fromView(t, this.options.parserFn, this.options.type)), this.addDistinct(n);
            var c = {
                requestType: "filtersearchbegin",
                filterModel: this,
                columnName: p,
                column: i,
                operator: l,
                matchCase: !0,
                ignoreAccent: h,
                filterChoiceCount: null,
                query: n,
                value: a
            };
            if (S() && !this.parent.isJsComponent) {
                c.filterModel = {}
            }
            this.parent.trigger(wr, c, (function(d) {
                if (d.operator = S() && "none" !== d.excelSearchOperator ? d.excelSearchOperator : d.operator, s = new sn(p, d.operator, a, d.matchCase, d.ignoreAccent), "date" === e.options.type || "datetime" === e.options.type) {
                    if (l = "equal", g(a) && t.length) return;
                    s = Cl({
                        field: p,
                        operator: l,
                        value: a,
                        matchCase: !0,
                        ignoreAccent: h
                    }, e.options.type)
                }
                t.length ? (s = g(o) ? s : s.and(o.e), n.where(s)) : g(o) || n.where(o.e), d.filterChoiceCount = g(d.filterChoiceCount) ? 1e3 : d.filterChoiceCount;
                var c = {};
                (Xi(e.spinner), e.renderEmpty = !1, e.isForeignColumn(i) && t.length) ? ("result" in i.dataSource ? new yn(i.dataSource.result) : i.dataSource).executeQuery(n).then((function(t) {
                    var n = e.options.column.columnData;
                    e.options.column.columnData = t.result, e.parent.notify("generateQuery", {
                        predicate: c,
                        column: i
                    }), c.predicate.predicates.length ? r.where(c.predicate) : e.renderEmpty = !0, e.options.column.columnData = n, r.take(d.filterChoiceCount), e.search(d, r)
                })): (n.take(d.filterChoiceCount), e.search(d, n))
            }))
        }, e.prototype.search = function(e, t) {
            this.parent.dataSource && "result" in this.parent.dataSource ? this.filterEvent(e, t) : this.processSearch(t)
        }, e.prototype.getPredicateFromCols = function(t) {
            for (var i = e.getPredicate(t), n = [], r = {}, o = void 0 !== this.parent.getForeignKeyColumns, s = o ? this.parent.getForeignKeyColumns() : [], a = 0, l = Object.keys(i); a < l.length; a++) {
                var h = l[a],
                    p = void 0;
                o && this.parent.getColumnByField(h).isForeignColumn() && (p = wl(h, s)), p ? (this.parent.notify("generateQuery", {
                    predicate: r,
                    column: p
                }), r.predicate.predicates.length && n.push(sn.or(r.predicate.predicates))) : n.push(i[h])
            }
            return n.length && sn.and(n)
        }, e.prototype.getQuery = function() {
            return this.parent.getQuery ? this.parent.getQuery().clone() : new on
        }, e.prototype.getAllData = function() {
            var e = this,
                t = this.getQuery();
            t.requiresCount(), this.addDistinct(t);
            var i = {
                requestType: "filterchoicerequest",
                query: t,
                filterChoiceCount: null
            };
            if (!S() || this.parent.isJsComponent) {
                i.filterModel = this
            }
            this.parent.trigger(wr, i, (function(i) {
                i.filterChoiceCount = g(i.filterChoiceCount) ? 1e3 : i.filterChoiceCount, t.take(i.filterChoiceCount), e.parent.dataSource && "result" in e.parent.dataSource ? e.filterEvent(i, t) : e.processDataOperation(t, !0)
            }))
        }, e.prototype.addDistinct = function(e) {
            var t = wn.distinct(this.options.filteredColumns, "field");
            return t.indexOf(this.options.column.field) <= -1 && (t = t.concat(this.options.column.field)), e.distinct(t), e
        }, e.prototype.filterEvent = function(e, t) {
            var i = this,
                n = Ll(e, t);
            this.parent.trigger("dataStateChange", n.state), n.deffered.promise.then((function(e) {
                i.dataSuccess(e)
            }))
        }, e.prototype.processDataOperation = function(e, t) {
            var i = this;
            this.options.dataSource = this.options.dataSource instanceof yn ? this.options.dataSource : new yn(this.options.dataSource);
            var n = [],
                r = [];
            if (this.isForeignColumn(this.options.column) && t) {
                var o = "result" in this.options.column.dataSource ? new yn(this.options.column.dataSource.result) : this.options.column.dataSource;
                this.foreignKeyQuery.params = e.params, n.push(o.executeQuery(this.foreignKeyQuery)), r.push((function(e) {
                    return i.foreignKeyData = e
                }))
            }
            n.push(this.options.dataSource.executeQuery(e)), r.push(this.dataSuccess.bind(this));
            var s = 0;
            Promise.all(n).then((function(e) {
                for (var t = 0; t < e.length; t++) r[s++](e[t].result)
            }))
        }, e.prototype.dataSuccess = function(t) {
            this.fullData = t;
            var i = {
                dataSource: this.fullData,
                executeQuery: !0,
                field: this.options.field
            };
            if (this.parent.notify("beforeCheckboxRenderer", i), i.executeQuery) {
                var n = new on;
                if (this.parent.searchSettings && this.parent.searchSettings.key.length) {
                    var r = this.parent.searchSettings,
                        o = r.fields.length ? r.fields : this.options.columns.map((function(e) {
                            return e.field
                        }));
                    n.search(r.key, o, r.operator, r.ignoreCase, r.ignoreAccent)
                }
                if (this.options.filteredColumns.length) {
                    for (var s = [], a = 0; a < this.options.filteredColumns.length; a++) {
                        var l = this.options.filteredColumns[a];
                        this.options.uid ? (l.uid = l.uid || this.parent.getColumnByField(l.field).uid, l.uid !== this.options.uid && s.push(this.options.filteredColumns[a])) : l.field !== this.options.field && s.push(this.options.filteredColumns[a])
                    }
                    var h = this.getPredicateFromCols(s);
                    h && n.where(h)
                }
                var p = new yn(i.dataSource).executeLocal(n),
                    d = this.options.column;
                this.filteredData = e.getDistinct(p, this.options.field, d, this.foreignKeyData).records || []
            }
            var c = i.executeQuery ? this.filteredData : i.dataSource;
            this.processDataSource(null, !0, c), this.sInput.focus();
            var u = {
                requestType: "filterafteropen",
                columnName: this.options.field,
                columnType: this.options.type
            };
            if (!S() || this.parent.isJsComponent) {
                u.filterModel = this
            }
            this.parent.notify("cbox-filter-complete", u)
        }, e.prototype.processDataSource = function(e, t, i) {
            Xi(this.spinner), this.updateResult(), this.createFilterItems(i, t)
        }, e.prototype.processSearch = function(e) {
            this.processDataOperation(e)
        }, e.prototype.updateResult = function() {
            this.result = {};
            var e = this.getPredicateFromCols(this.options.filteredColumns),
                t = new on;
            e && t.where(e);
            for (var i = 0, n = new yn(this.fullData).executeLocal(t); i < n.length; i++) {
                var r = n[i];
                this.result[xl(this.options.field, r)] = !0
            }
        }, e.prototype.clickHandler = function(e) {
            var t = e.target,
                i = Ka(t, "e-checkbox-wrapper");
            if (Ka(t, "e-searchbox") && this.searchBoxClick(e), i) {
                var n = i.querySelector(".e-selectall");
                n ? this.updateAllCBoxes(!n.classList.contains("e-check")) : function(e) {
                    var t = e.querySelector(".e-frame"),
                        i = t.previousSibling;
                    t.classList.contains("e-check") ? (i.checked = !1, Et(t, ["e-uncheck"], ["e-check"])) : (i.checked = !0, Et(t, ["e-check"], ["e-uncheck"]))
                }(i.parentElement), this.updateIndeterminatenBtn(), i.querySelector(".e-chk-hidden").focus()
            }
            this.setFocus(Ka(i, "e-ftrchk"))
        }, e.prototype.keyupHandler = function(e) {
            this.setFocus(Ka(e.target, "e-ftrchk"))
        }, e.prototype.setFocus = function(e) {
            var t = this.dlg.querySelector(".e-chkfocus");
            t && t.classList.remove("e-chkfocus"), e && e.classList.add("e-chkfocus")
        }, e.prototype.updateAllCBoxes = function(e) {
            for (var t = 0, i = [].slice.call(this.cBox.querySelectorAll(".e-frame")); t < i.length; t++) {
                var n = i[t];
                yl(n, e), fl(n.previousSibling, e)
            }
        }, e.prototype.dialogOpen = function() {
            this.parent.element.classList.contains("e-device") && (this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"), this.dialogObj.element.querySelector(".e-btn").focus())
        }, e.prototype.createCheckbox = function(e, t, i) {
            var n = t ? this.cBoxTrue.cloneNode(!0) : this.cBoxFalse.cloneNode(!0);
            fl(n.querySelector("input"), t);
            var r = n.querySelector(".e-label"),
                o = Dl({}, i, {
                    column: this.options.column,
                    parent: this.parent
                });
            (r.innerHTML = !g(e) && e.toString().length ? e : this.getLocalizedLabel("Blanks"), ut([r], ["e-checkboxfiltertext"]), this.options.template && i[this.options.column.field] !== this.getLocalizedLabel("SelectAll")) && (r.innerHTML = "", this.parent.isReact && this.options.column.filter && "string" != typeof this.options.column.filter.itemTemplate ? (this.options.template(o, this.parent, "filterItemTemplate", null, null, null, r), this.parent.renderTemplates()) : $a(r, this.options.template(o, this.parent, "filterItemTemplate")));
            return n
        }, e.prototype.updateIndeterminatenBtn = function() {
            var e = this.cBox.children.length - 1,
                t = [],
                i = this.cBox.querySelector(".e-selectall"),
                n = this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length,
                r = this.dialogObj.btnObj[0];
            r.disabled = !1;
            var o = i.previousSibling;
            fl(o, !1), o.indeterminate = !1, e === n ? (t = ["e-check"], fl(o, !0)) : n ? (t = ["e-stop"], o.indeterminate = !0) : (t = ["e-uncheck"], r.disabled = !0), this.filterState = !r.disabled, r.dataBind(), gt([i], ["e-check", "e-stop", "e-uncheck"]), ut([i], t)
        }, e.prototype.createFilterItems = function(e, t) {
            for (var i, n = this.parent.createElement("div"), r = this.dialogObj.btnObj[0], o = -1, s = 0; s < e.length; s++) {
                var l = a("ejValue", e[s]);
                ("" === l || g(l)) && (o += 1)
            }
            if (this.itemsCnt = -1 !== o ? e.length - o : e.length, e.length && !this.renderEmpty) {
                var h = this.getLocalizedLabel("SelectAll"),
                    p = this.createCheckbox(h, !1, ((i = {})[this.options.field] = h, i)),
                    d = ml(Za("cbox"), p, "e-ftrchk");
                d.querySelector(".e-frame").classList.add("e-selectall"), n.appendChild(d);
                var c = new sn("field", "equal", this.options.field);
                this.options.foreignKeyValue && (c = c.or("field", "equal", this.options.foreignKeyValue));
                var u = new yn(this.options.filteredColumns).executeLocal((new on).where(c)).length,
                    f = void 0;
                for (s = 0; s < e.length; s++) {
                    var m = Za("cbox");
                    this.values[m] = a("ejValue", e[s]);
                    var y = a(this.options.field, e[s]);
                    this.options.formatFn && (y = this.valueFormatter.toView(y, this.options.formatFn));
                    var v = {
                        value: y,
                        column: this.options.column,
                        data: e[s]
                    };
                    if (this.parent.notify("filter-cbox-value", v), "" === (y = v.value) || g(y)) {
                        if (f) continue;
                        f = !0
                    }
                    var b = this.createCheckbox(y, this.getCheckedState(u, this.values[m]), a("dataObj", e[s]));
                    n.appendChild(ml(m, b, "e-ftrchk"))
                }
                this.cBox.innerHTML = "", $a(this.cBox, [].slice.call(n.children)), this.updateIndeterminatenBtn(), r.disabled = !1
            } else n.appendChild(this.parent.createElement("span", {
                innerHTML: this.getLocalizedLabel("NoResult")
            })), this.cBox.innerHTML = "", $a(this.cBox, [].slice.call(n.children)), r.disabled = !0;
            this.filterState = !r.disabled, r.dataBind();
            var w = {
                requestType: "filterchoicerequest",
                dataSource: this.renderEmpty || S() && this.parent.isServerRendered ? [] : e
            };
            if (!S() || this.parent.isJsComponent) {
                w.filterModel = this
            }
            this.parent.notify("cbox-filter-complete", w), Ji(this.spinner)
        }, e.prototype.getCheckedState = function(e, t) {
            return !this.isFiltered || !e || this.result[t]
        }, e.getDistinct = function(e, t, i, n) {
            for (var r, o = e.length, s = [], h = {}, p = !(!i || !i.isForeignColumn) && i.isForeignColumn(); o--;)
                if (!((r = xl(t, r = e[o])) in h)) {
                    var d = {};
                    if (d.ejValue = r, h[r] = !0, p) {
                        var c = bl(i, {}, r, n)[0];
                        l("foreignKeyData", c, e[o]), r = a(i.foreignKeyValue, c)
                    }
                    l(t, g(r) ? null : r, d), l("dataObj", e[o], d), s.push(d)
                } return wn.group(wn.sort(s, t, wn.fnAscending), "ejValue")
        }, e.getPredicate = function(t) {
            for (var i = wn.distinct(t, "field", !0) || [], n = [], r = {}, o = 0; o < i.length; o++) 0 !== (n = new yn(t).executeLocal((new on).where("field", "equal", i[o].field))).length && (r[i[o].field] = e.generatePredicate(n));
            return r
        }, e.generatePredicate = function(t) {
            var i, n, r = t ? t.length : 0;
            (n = e.updateDateFilter(t[0])).ignoreAccent = !g(n.ignoreAccent) && n.ignoreAccent, i = "date" === n.type || "datetime" === n.type ? Cl(n, n.type) : n.ejpredicate ? n.ejpredicate : new sn(n.field, n.operator, n.value, !e.getCaseValue(n), n.ignoreAccent);
            for (var o = 1; o < r; o++) t[o] = e.updateDateFilter(t[o]), r > 2 && o > 1 && "or" === t[o].predicate ? "date" === t[o].type || "datetime" === t[o].type ? i.predicates.push(Cl(t[o], t[o].type)) : i.predicates.push(new sn(t[o].field, t[o].operator, t[o].value, !e.getCaseValue(t[o]), t[o].ignoreAccent)) : i = "date" === t[o].type || "datetime" === t[o].type ? "and" === t[o].predicate && "equal" === t[o].operator ? i.or(Cl(t[o], t[o].type), t[o].type, t[o].ignoreAccent) : i[t[o].predicate](Cl(t[o], t[o].type), t[o].type, t[o].ignoreAccent) : t[o].ejpredicate ? i[t[o].predicate](t[o].ejpredicate) : i[t[o].predicate](t[o].field, t[o].operator, t[o].value, !e.getCaseValue(t[o]), t[o].ignoreAccent);
            return i || null
        }, e.getCaseValue = function(e) {
            return g(e.matchCase) ? !("string" === e.type || g(e.type) && "string" == typeof e.value) : e.matchCase
        }, e.updateDateFilter = function(e) {
            return ("date" === e.type || "datetime" === e.type || e.value instanceof Date) && (e.type = e.type || "date"), e
        }, e
    }(),
    es = function() {
        function e(e, t) {
            this.dataState = {
                isPending: !1,
                resolver: null,
                group: []
            }, this.foreignKeyDataState = {
                isPending: !1,
                resolver: null
            }, this.parent = e, this.serviceLocator = t, this.initDataManager(), this.parent.isDestroyed || "foreignKey" === this.getModuleName() || (this.parent.on("rows-added", this.addRows, this), this.parent.on("row-position-changed", this.reorderRows, this), this.parent.on("rows-removed", this.removeRows, this), this.parent.on("datasource-modified", this.initDataManager, this), this.parent.on("destroy", this.destroy, this), this.parent.on("update-data", this.crudActions, this), this.parent.on("add-delete-Action", this.getData, this), this.parent.on(Lr, this.refreshFilteredCols, this), this.parent.on("columns-prepared", this.refreshFilteredCols, this))
        }
        return e.prototype.reorderRows = function(e) {
            this.dataManager.dataSource.json.splice(e.toIndex, 0, this.dataManager.dataSource.json.splice(e.fromIndex, 1)[0])
        }, e.prototype.getModuleName = function() {
            return "data"
        }, e.prototype.initDataManager = function() {
            var e = this.parent;
            this.dataManager = e.dataSource instanceof yn ? e.dataSource : g(e.dataSource) ? new yn : new yn(e.dataSource), this.isQueryInvokedFromData = !0, e.query = e.query instanceof on ? e.query : new on
        }, e.prototype.generateQuery = function(e) {
            var t = this.parent.getQuery().clone();
            if ("ExcludeHidden" === this.parent.columnQueryMode) t.select(this.parent.getColumns().filter((function(e) {
                return !(!0 !== e.isPrimaryKey && !1 === e.visible || void 0 === e.field)
            })).map((function(e) {
                return e.field
            })));
            else if ("Schema" === this.parent.columnQueryMode) {
                for (var i = [], n = this.parent.columns, r = 0; r < n.length; r++) i.push(n[r].field);
                t.select(i)
            }
            return this.filterQuery(t), this.searchQuery(t), this.aggregateQuery(t), this.sortQuery(t), Sl(this.parent) ? this.virtualGroupPageQuery(t) : this.pageQuery(t, e), this.groupQuery(t), t
        }, e.prototype.aggregateQuery = function(e, t) {
            for (var i = this.parent.aggregates, n = 0; n < i.length; n++)
                for (var r = i[n], o = 0; o < r.columns.length; o++)
                    for (var s = r.columns[o], a = s.type instanceof Array ? s.type : [s.type], l = 0; l < a.length; l++) e.aggregate(a[l].toLowerCase(), s.field);
            return e
        }, e.prototype.virtualGroupPageQuery = function(e) {
            this.parent;
            if (e.queries.length)
                for (var t = 0; t < e.queries.length; t++) "onPage" === e.queries[t].fn && e.queries.splice(t, 1);
            return e
        }, e.prototype.pageQuery = function(e, t) {
            var i = this.parent;
            if ((i.allowPaging || i.enableVirtualization || i.enableInfiniteScrolling) && !0 !== t) {
                if (i.pageSettings.currentPage = Math.max(1, i.pageSettings.currentPage), i.pageSettings.pageCount <= 0 && (i.pageSettings.pageCount = 8), i.pageSettings.pageSize <= 0 && (i.pageSettings.pageSize = 12), e.queries.length)
                    for (var n = 0; n < e.queries.length; n++) "onPage" === e.queries[n].fn && e.queries.splice(n, 1);
                !g(i.infiniteScrollModule) && i.enableInfiniteScrolling ? this.parent.notify("infinite-page-query", e) : e.page(i.pageSettings.currentPage, i.pageSettings.pageSize)
            }
            return e
        }, e.prototype.groupQuery = function(e) {
            var t = this.parent;
            if (t.allowGrouping && t.groupSettings.columns.length) {
                this.parent.groupSettings.enableLazyLoading && e.lazyLoad.push({
                    key: "isLazyLoad",
                    value: this.parent.groupSettings.enableLazyLoading
                });
                for (var i = t.groupSettings.columns, n = 0, r = i.length; n < r; n++) {
                    var o = this.getColumnByField(i[n]);
                    o || this.parent.log("initial_action", {
                        moduleName: "group",
                        columnName: i[n]
                    });
                    var s = o.enableGroupByFormat,
                        a = o.format;
                    s ? e.group(i[n], this.formatGroupColumn.bind(this), a) : e.group(i[n], null)
                }
            }
            return e
        }, e.prototype.sortQuery = function(e) {
            var t = this.parent;
            if ((t.allowSorting || t.allowGrouping) && t.sortSettings.columns.length) {
                for (var i = t.sortSettings.columns, n = [], r = i.length - 1; r > -1; r--) {
                    if (!(a = this.getColumnByField(i[r].field))) return this.parent.log("initial_action", {
                        moduleName: "sort",
                        columnName: i[r].field
                    }), e;
                    a.setSortDirection(i[r].direction);
                    var o = i[r].direction;
                    a.sortComparer && (this.parent.log("grid_sort_comparer"), o = this.isRemote() ? i[r].direction : a.sortComparer.bind(a)), -1 === t.groupSettings.columns.indexOf(i[r].field) ? a.isForeignColumn() || a.sortComparer ? e.sortByForeignKey(a.field, o, void 0, i[r].direction.toLowerCase()) : e.sortBy(a.field, o) : n.push({
                        direction: o,
                        field: a.field
                    })
                }
                r = 0;
                for (var s = n.length; r < s; r++)
                    if ("string" == typeof n[r].direction) e.sortBy(n[r].field, n[r].direction);
                    else {
                        var a = this.getColumnByField(n[r].field);
                        e.sortByForeignKey(n[r].field, n[r].direction, void 0, a.getSortDirection().toLowerCase())
                    }
            }
            return e
        }, e.prototype.searchQuery = function(e, t, i) {
            var n = this.parent.searchSettings,
                r = n.fields.length ? n.fields : this.getSearchColumnFieldNames(),
                o = [],
                s = !1;
            if (this.parent.searchSettings.key.length) {
                s = this.parent.getForeignKeyColumns().some((function(e) {
                    return r.indexOf(e.field) > -1
                }));
                var a = i ? t.dataSource.adaptor : this.dataManager.adaptor;
                if (s || a.getModuleName && "ODataV4Adaptor" === a.getModuleName()) {
                    r = i ? [t.foreignKeyValue] : r;
                    for (var l = 0; l < r.length; l++) {
                        var h = i ? t : this.getColumnByField(r[l]);
                        h.isForeignColumn() && !i ? o = this.fGeneratePredicate(h, o) : o.push(new sn(r[l], n.operator, n.key, n.ignoreCase, n.ignoreAccent))
                    }
                    var p = sn.or(o);
                    p.key = n.key, e.where(p)
                } else e.search(n.key, r, n.operator, n.ignoreCase, n.ignoreAccent)
            }
            return e
        }, e.prototype.filterQuery = function(e, t, i) {
            var n = this.parent,
                r = [],
                o = [],
                s = this.parent.getForeignKeyColumns();
            if (n.allowFiltering && n.filterSettings.columns.length) {
                for (var a = t || n.filterSettings.columns, l = {}, h = 0, p = n.getColumns(); h < p.length; h++) {
                    l[(m = p[h]).field] = m.filter.type ? m.filter.type : n.filterSettings.type
                }
                for (var d = [], c = [], u = 0, f = a; u < f.length; u++) {
                    var m = f[u],
                        y = n.getColumnByField(m.field);
                    g(m.type) && y && ("date" === y.type || "datetime" === y.type) && (m.type = n.getColumnByField(m.field).type), m.isForeignKey ? d.push(m) : c.push(m)
                }
                if (c.length) {
                    if ("FilterBar" === n.filterSettings.type || "Menu" === n.filterSettings.type)
                        for (var v = 0, b = c.length; v < b; v++) c[v].uid = c[v].uid || this.parent.grabColumnByFieldFromAllCols(c[v].field).uid;
                    for (var w = $o.getPredicate(c), C = 0, S = Object.keys(w); C < S.length; C++) {
                        var x = S[C];
                        r.push(w[x])
                    }
                }
                if (d.length)
                    for (var k = 0, T = d; k < T.length; k++) {
                        (m = T[k]).uid = m.uid || this.parent.grabColumnByFieldFromAllCols(m.field).uid;
                        var D = this.parent.grabColumnByUidFromAllCols(m.uid);
                        if (D || this.parent.log("initial_action", {
                                moduleName: "filter",
                                columnName: m.field
                            }), D.isForeignColumn() && wl(m.field, s) && !i) o.push(m), r = this.fGeneratePredicate(D, r);
                        else {
                            w = $o.getPredicate(a);
                            for (var E = 0, R = Object.keys(w); E < R.length; E++) {
                                x = R[E];
                                r.push(w[x])
                            }
                        }
                    }
                r.length ? e.where(sn.and(r)) : this.parent.notify("showEmptyGrid", {})
            }
            return e
        }, e.prototype.fGeneratePredicate = function(e, t) {
            var i = {};
            return e && (this.parent.notify("generateQuery", {
                predicate: i,
                column: e
            }), i.predicate.predicates.length && t.push(i.predicate)), t
        }, e.prototype.getData = function(e, t) {
            var i = this;
            void 0 === e && (e = {
                requestType: ""
            });
            var n = this.getKey(e.foreignKeyData && Object.keys(e.foreignKeyData).length ? e.foreignKeyData : this.parent.getPrimaryKeyFieldNames());
            if (this.parent.log("datasource_syntax_mismatch", {
                    dataState: this.parent
                }), this.parent.dataSource && "result" in this.parent.dataSource) return this.eventPromise(e, t, n).promise;
            var r = void 0;
            switch (e.requestType) {
                case "delete":
                    if (t = t || this.generateQuery(), 1 === Object.keys(e.data).length) r = this.dataManager.remove(n, e.data[0], t.fromTable, t);
                    else {
                        var o = {
                            addedRecords: [],
                            deletedRecords: [],
                            changedRecords: []
                        };
                        o.deletedRecords = e.data, r = this.dataManager.saveChanges(o, n, t.fromTable, t.requiresCount())
                    }
                    break;
                case "save":
                    S() && this.parent.isServerRendered && this.parent.notify("offset", e), t = t || this.generateQuery(), e.index = g(e.index) ? 0 : e.index, r = this.dataManager.insert(e.data, t.fromTable, t, e.index)
            }
            return e.promise = r, !r || Array.isArray(r) || r.hasOwnProperty("deletedRecords") ? this.insert(t, e) : S() ? r.then((function(n) {
                return i.insert(t, e)
            })).catch((function(e) {
                return null
            })) : r.then((function(n) {
                return i.insert(t, e)
            }))
        }, e.prototype.insert = function(e, t) {
            return "save" === t.requestType && this.parent.notify("recordAdded", t), this.executeQuery(e)
        }, e.prototype.executeQuery = function(e) {
            var t = this;
            if (this.dataManager.ready) {
                var i = new vn;
                return this.dataManager.ready.then((function(n) {
                    t.dataManager.executeQuery(e).then((function(e) {
                        i.resolve(e)
                    }))
                })).catch((function(e) {
                    i.reject(e)
                })), i.promise
            }
            return this.dataManager.executeQuery(e)
        }, e.prototype.formatGroupColumn = function(e, t) {
            this.parent;
            var i = this.serviceLocator,
                n = this.getColumnByField(t),
                r = e;
            return n.type || (n.type = r.getDay ? r.getHours() > 0 || r.getMinutes() > 0 || r.getSeconds() > 0 || r.getMilliseconds() > 0 ? "datetime" : "date" : typeof e), g(n.getFormatter()) && dl(i, n), Cn.prototype.toView(e, n.getFormatter())
        }, e.prototype.crudActions = function(e) {
            var t = this.generateQuery(),
                i = null,
                n = "promise",
                r = this.getKey(e.foreignKeyData && Object.keys(e.foreignKeyData).length ? e.foreignKeyData : this.parent.getPrimaryKeyFieldNames());
            switch (this.parent.dataSource && "result" in this.parent.dataSource && this.eventPromise(e, t, r), e.requestType) {
                case "save":
                    S() && this.parent.isServerRendered && this.parent.notify("offset", e), i = this.dataManager.update(r, e.data, t.fromTable, t, e.previousData)
            }
            e[n] = i || e[n], this.parent.notify("crud-Action", e)
        }, e.prototype.saveChanges = function(e, t, i, n) {
            if (void 0 === n && (n = this.generateQuery()), n.requiresCount(), "result" in this.parent.dataSource) {
                this.getStateEventArgument(n);
                var r = new vn,
                    o = {
                        requestType: "batchsave",
                        changes: e,
                        key: t,
                        query: n,
                        endEdit: r.resolve
                    };
                return this.setState({
                    isPending: !0,
                    resolver: r.resolve
                }), this.parent.trigger("dataSourceChanged", o), r.promise
            }
            if (S() && this.parent.isServerRendered) {
                for (var s = 0; s < e.changedRecords.length; s++) {
                    o = {
                        data: e.changedRecords[s]
                    };
                    this.parent.notify("offset", o), e.changedRecords[s] = o.data
                }
                for (s = 0; s < e.addedRecords.length; s++) {
                    o = {
                        data: e.addedRecords[s]
                    };
                    this.parent.notify("offset", o), e.addedRecords[s] = o.data
                }
            }
            return this.dataManager.saveChanges(e, t, n.fromTable, n, i)
        }, e.prototype.getKey = function(e) {
            if (e && e.length) return e[0]
        }, e.prototype.isRemote = function() {
            return !0 !== this.dataManager.dataSource.offline && void 0 !== this.dataManager.dataSource.url && "" !== this.dataManager.dataSource.url
        }, e.prototype.addRows = function(e) {
            for (var t = e.records.length; t > 0; t--) this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[t - 1])
        }, e.prototype.removeRows = function(e) {
            var t = this.dataManager.dataSource.json;
            this.dataManager.dataSource.json = t.filter((function(t, i) {
                return -1 === e.records.indexOf(t)
            }))
        }, e.prototype.getColumnByField = function(e) {
            var t;
            return this.parent.columnModel.some((function(i) {
                return t = i, i.field === e
            })) && t
        }, e.prototype.destroy = function() {
            this.parent.isDestroyed || (this.parent.off("rows-added", this.addRows), this.parent.off("rows-removed", this.removeRows), this.parent.off("datasource-modified", this.initDataManager), this.parent.off("destroy", this.destroy), this.parent.off("update-data", this.crudActions), this.parent.off("add-delete-Action", this.getData), this.parent.off(Lr, this.refreshFilteredCols), this.parent.off("columns-prepared", this.refreshFilteredCols))
        }, e.prototype.getState = function() {
            return this.dataState
        }, e.prototype.setState = function(e) {
            return this.dataState = e
        }, e.prototype.getForeignKeyDataState = function() {
            return this.foreignKeyDataState
        }, e.prototype.setForeignKeyDataState = function(e) {
            this.foreignKeyDataState = e
        }, e.prototype.getStateEventArgument = function(e) {
            var t = new dn,
                i = new yn({
                    url: "",
                    adaptor: new dn
                }),
                n = t.processQuery(i, e);
            return u(JSON.parse(n.data), n.pvtData)
        }, e.prototype.eventPromise = function(e, t, i) {
            var n, r = this,
                o = e;
            n = this.getStateEventArgument(t);
            var s = new vn,
                a = new vn;
            if (void 0 !== e.requestType && !1 !== this.dataState.isDataChanged)
                if (n.action = e, "save" === e.requestType || "delete" === e.requestType) {
                    var l = e;
                    l.key = i;
                    l.promise = a.promise, l.state = n, this.setState({
                        isPending: !0,
                        resolver: a.resolve
                    }), o.endEdit = a.resolve, o.cancelEdit = a.reject, this.parent.trigger("dataSourceChanged", l), a.promise.then((function(e) {
                        r.setState({
                            isPending: !0,
                            resolver: s.resolve,
                            group: n.group,
                            aggregates: n.aggregates
                        }), "save" === l.requestType && r.parent.notify("recordAdded", l), r.parent.trigger("dataStateChange", n)
                    })).catch((function() {}))
                } else this.setState({
                    isPending: !0,
                    resolver: s.resolve,
                    group: n.group,
                    aggregates: n.aggregates
                }), this.parent.trigger("dataStateChange", n);
            else this.setState({}), s.resolve(this.parent.dataSource);
            return s
        }, e.prototype.getSearchColumnFieldNames = function() {
            for (var e = [], t = 0, i = this.parent.getColumns(); t < i.length; t++) {
                var n = i[t];
                n.allowSearching && !g(n.field) && e.push(n.field)
            }
            return e
        }, e.prototype.refreshFilteredCols = function() {
            this.parent.allowFiltering && this.parent.filterSettings.columns.length && function(e, t) {
                for (var i = 0; i < t.length; i++) t[i].uid = t[i].isForeignKey ? wl(t[i].field, e.getForeignKeyColumns()).uid : e.getColumnByField(t[i].field).uid
            }(this.parent, this.parent.filterSettings.columns)
        }, e
    }(),
    ts = function() {
        function e(e, t) {
            c(this, e), this.parent = t
        }
        return e.prototype.clone = function() {
            var t = new e({});
            return c(t, this), t.cells = this.cells.map((function(e) {
                return e.clone()
            })), t
        }, e.prototype.setRowValue = function(e) {
            var t = this.data[this.parent.getPrimaryKeyFieldNames()[0]];
            this.parent.setRowData(t, e)
        }, e.prototype.setCellValue = function(e, t) {
            if (!(this.data[e].toString() === t.toString())) {
                var i = this.parent.getPrimaryKeyFieldNames()[0],
                    n = this.data[i];
                this.parent.setCellValue(n, e, t), this.makechanges(i, this.data)
            }
        }, e.prototype.makechanges = function(e, t) {
            this.parent.getDataModule().dataManager.update(e, t)
        }, e
    }(),
    is = function() {
        function e(e) {
            this.isSpanned = !1, this.isRowSpanned = !1, c(this, e)
        }
        return e.prototype.clone = function() {
            var t = new e({});
            return c(t, this), t
        }, e
    }(),
    ns = function() {
        function e(e, t) {
            this.serviceLocator = e, this.parent = t
        }
        return e.prototype.render = function(e, t, i, n) {
            var r, o = this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[i].cellType || dr.Data),
                s = t.cells[i].cellSpan ? t.cells[i].cellSpan : e.colSpan + i <= t.cells.length ? e.colSpan : t.cells.length - i,
                a = e.rowSpan,
                l = 0;
            if (t.index > 0) {
                var h = this.parent.groupSettings.columns.length > 0 && !this.parent.getRowsObject()[t.index - 1].isDataRow ? this.parent.getRowsObject()[t.index].cells : this.parent.getRowsObject()[t.index - 1].cells,
                    p = t.cells[i];
                r = h.filter((function(e) {
                    return e.column.uid === p.column.uid
                }))[0]
            }
            for (var d = r && r.colSpanRange > 1 && r.rowSpanRange > 1 ? r.colSpanRange : s, c = i + 1; c < i + d && c < t.cells.length; c++) !1 === t.cells[c].visible ? l++ : t.cells[c].isSpanned = !0;
            if (l > 0) {
                for (c = i + s; c < i + s + l && c < t.cells.length; c++) t.cells[c].isSpanned = !0;
                i + s + l >= t.cells.length && (s -= i + s + l - t.cells.length)
            }
            return t.cells[i].cellSpan && (t.data[e.column.field] = t.cells[i].spanText, n = o.render(t.cells[i], t.data, {
                index: g(t.index) ? "" : t.index.toString()
            })), s > 1 && St(n, {
                colSpan: s.toString(),
                "aria-colSpan": s.toString()
            }), a > 1 && (St(n, {
                rowspan: a.toString(),
                "aria-rowspan": a.toString()
            }), t.cells[i].isRowSpanned = !0, t.cells[i].rowSpanRange = Number(a), s > 1 && (t.cells[i].colSpanRange = Number(s))), t.index > 0 && r.rowSpanRange > 1 && (t.cells[i].isSpanned = !0, t.cells[i].rowSpanRange = Number(r.rowSpanRange - 1), t.cells[i].colSpanRange = r.rowSpanRange > 0 ? r.colSpanRange : 1), !this.parent.enableColumnVirtualization || t.cells[i].cellSpan || this.containsKey(e.column.field, e.data[e.column.field]) || this.backupMergeCells(e.column.field, e.data[e.column.field], e.colSpan), n
        }, e.prototype.backupMergeCells = function(e, t, i) {
            this.setMergeCells(this.generteKey(e, t), i)
        }, e.prototype.generteKey = function(e, t) {
            return e + "__" + t.toString()
        }, e.prototype.splitKey = function(e) {
            return e.split("__")
        }, e.prototype.containsKey = function(e, t) {
            return this.getMergeCells().hasOwnProperty(this.generteKey(e, t))
        }, e.prototype.getMergeCells = function() {
            return this.parent.mergeCells
        }, e.prototype.setMergeCells = function(e, t) {
            this.parent.mergeCells[e] = t
        }, e.prototype.updateVirtualCells = function(e) {
            for (var t = this.getMergeCells(), i = 0, n = Object.keys(t); i < n.length; i++) {
                var r = n[i],
                    o = t[r],
                    s = this.splitKey(r),
                    a = this.getIndexFromAllColumns(s[0]),
                    l = this.parent.getColumnIndexesInView(),
                    h = o - (l[0] - a);
                if (a < l[0] && h > 1)
                    for (var p = 0, d = e; p < d.length; p++) {
                        var c = d[p];
                        if (c.data[s[0]].toString() === s[1].toString()) {
                            c.cells[0].cellSpan = h, c.cells[0].spanText = s[1];
                            break
                        }
                    }
            }
            return e
        }, e.prototype.getIndexFromAllColumns = function(e) {
            return Ha(this.parent.getVisibleColumns(), (function(t, i) {
                if (t.field === e) return i
            }))[0]
        }, e
    }(),
    rs = function() {
        function e(e, t, i) {
            this.isSpan = !1, this.cellType = t, this.serviceLocator = e, this.parent = i, this.element = this.parent.createElement("tr", {
                attrs: {
                    role: "row"
                }
            })
        }
        return e.prototype.render = function(e, t, i, n, r) {
            return this.refreshRow(e, t, i, n, r)
        }, e.prototype.refresh = function(e, t, i, n, r) {
            i && (e.data = Dl({}, e.changes), this.refreshMergeCells(e));
            var o = this.parent.element.querySelector("[data-uid=" + e.uid + "]"),
                s = this.refreshRow(e, t, n, r, null, i),
                a = [].slice.call(s.cells);
            o.innerHTML = "";
            for (var l = 0, h = a; l < h.length; l++) {
                var p = h[l];
                o.appendChild(p)
            }
        }, e.prototype.refreshRow = function(e, t, i, n, r, o) {
            var s = g(r) ? this.element.cloneNode() : r,
                a = {
                    data: e.data
                },
                l = {
                    data: e.data
                },
                h = u({}, i, {}),
                p = this.parent.getColumns().filter((function(e) {
                    return "checkbox" === e.type && e.field
                }))[0],
                d = !1;
            p && (d = xl(p.field, a.data)), e.isDataRow && (e.isSelected = this.parent.getSelectedRowIndexes().indexOf(e.index) > -1 || d), e.isDataRow && this.parent.isCheckBoxSelection && "Check" === this.parent.checkAllRows && this.parent.enableVirtualization && (e.isSelected = !0, -1 === this.parent.getSelectedRowIndexes().indexOf(e.index) && this.parent.getSelectedRowIndexes().push(e.index)), this.buildAttributeFromRow(s, e), St(s, h), za(s, e.attributes);
            for (var c = this.serviceLocator.getService("cellRendererFactory"), f = function(t, i) {
                    var n = e.cells[t];
                    n.isSelected = e.isSelected;
                    var r = c.getCellRenderer(e.cells[t].cellType || dr.Data),
                        a = {
                            index: g(e.index) ? "" : e.index.toString()
                        };
                    e.isExpand && e.cells[t].cellType === dr.DetailExpand && (a.class = m.parent.isPrinting ? "e-detailrowcollapse" : "e-detailrowexpand");
                    var h = r.render(e.cells[t], e.data, a, e.isExpand, o);
                    if (e.cells[t].cellType !== dr.Filter) {
                        if (e.cells[t].cellType === dr.Data || e.cells[t].cellType === dr.CommandColumn) {
                            m.parent.trigger("queryCellInfo", u(l, {
                                cell: h,
                                column: n.column,
                                colSpan: 1,
                                rowSpan: 1,
                                foreignKeyData: e.cells[t].foreignKeyData,
                                requestType: m.parent.requestTypeAction
                            }));
                            var p = !1;
                            if (e.index > 0 && m.isSpan) {
                                var d = m.parent.groupSettings.columns.length > 0 && !m.parent.getRowsObject()[e.index - 1].isDataRow ? m.parent.getRowsObject()[e.index].cells : m.parent.getRowsObject()[e.index - 1].cells,
                                    f = d.filter((function(i) {
                                        return i.column.uid === e.cells[t].column.uid
                                    }))[0];
                                p = f.isRowSpanned ? f.isRowSpanned : f.rowSpanRange > 1
                            }
                            if (l.colSpan > 1 || e.cells[t].cellSpan > 1 || l.rowSpan > 1 || p) m.isSpan = !0, h = new ns(m.serviceLocator, m.parent).render(l, e, t, h)
                        }
                        e.cells[t].isSpanned || s.appendChild(h)
                    }
                }, m = this, y = 0, v = e.cells.length; y < v; y++) f(y);
            var b = {
                row: s,
                rowHeight: this.parent.rowHeight
            };
            if (e.isDataRow && (this.parent.trigger("rowDataBound", u(a, b)), this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate)) {
                var w = s.querySelectorAll(".e-rowcell:not(.e-hide)")[0];
                w && w.classList.add("e-detailrowvisible")
            }
            if (this.parent.enableVirtualization && (a.rowHeight = this.parent.rowHeight), a.rowHeight ? s.style.height = a.rowHeight + "px" : this.parent.rowHeight && (s.querySelector(".e-headercell") || s.querySelector(".e-groupcaption")) && (s.style.height = this.parent.rowHeight + "px"), e.cssClass && s.classList.add(e.cssClass), e.lazyLoadCssClass && s.classList.add(e.lazyLoadCssClass), !(this.parent.enableColumnVirtualization && 0 !== this.parent.frozenColumns) && this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length)
                for (y = 0; y < this.parent.aggregates.length; y++) {
                    if (this.parent.aggregates[y].properties.columns[0].footerTemplate) {
                        var C = s.querySelectorAll(".e-summarycell");
                        if (C.length) ut([C[C.length - 1]], ["e-lastsummarycell"])
                    }
                }
            return s
        }, e.prototype.refreshMergeCells = function(e) {
            for (var t = 0, i = e.cells; t < i.length; t++) {
                i[t].isSpanned = !1
            }
            return e
        }, e.prototype.buildAttributeFromRow = function(e, t) {
            var i = {},
                n = "aria-rowindex",
                r = "data-uid",
                o = "aria-selected",
                s = [];
            t.isDataRow && s.push("e-row"), t.isAltRow && s.push("e-altrow"), g(t.index) || (i[n] = t.index), t.rowSpan && (i.rowSpan = t.rowSpan), t.uid && (i[r] = t.uid), t.isSelected && (i[o] = !0), !1 === t.visible && s.push("e-hide"), i.class = s, za(e, i)
        }, e
    }(),
    os = function() {
        function e(e) {
            this.parent = e
        }
        return e.prototype.generateRows = function(e, t) {
            var i = [],
                n = this.parent.enableVirtualization && t ? t.startIndex : 0;
            n = this.parent.enableInfiniteScrolling ? this.getInfiniteIndex(t) : n;
            for (var r = 0, o = Object.keys(e).length; r < o; r++, n++) i[r] = this.generateRow(e[r], n);
            return i
        }, e.prototype.ensureColumns = function() {
            var e = [];
            if (this.parent.detailTemplate || this.parent.childGrid) {
                var t = {};
                this.parent.notify("detail-indentcell-info", t), e.push(this.generateCell(t, null, dr.DetailExpand))
            }
            return this.parent.isRowDragable() && e.push(this.generateCell({}, null, dr.RowDragIcon)), e
        }, e.prototype.generateRow = function(e, t, i, n, r, o, s) {
            var a = {
                foreignKeyData: {}
            };
            a.uid = S() && this.parent.isServerRendered ? this.parent.getRowUid("grid-row") : Za("grid-row"), a.data = e, a.index = t, a.indent = n, a.tIndex = o, a.isDataRow = !0, a.parentGid = r, a.parentUid = s, this.parent.isPrinting && ("All" === this.parent.hierarchyPrintMode ? a.isExpand = !0 : "Expanded" === this.parent.hierarchyPrintMode && this.parent.expandedRows && this.parent.expandedRows[t] && (a.isExpand = this.parent.expandedRows[t].isExpand)), a.cssClass = i, a.isAltRow = !!this.parent.enableAltRow && t % 2 != 0, a.isAltRow = !!this.parent.enableAltRow && t % 2 != 0, S() && this.parent.isServerRendered && this.parent.enableVirtualization && this.parent.selectionModule.checkBoxState ? (a.isSelected = this.parent.selectionModule.checkBoxState, a.isSelected && -1 === this.parent.selectionModule.selectedRowIndexes.indexOf(t) && this.parent.selectionModule.selectedRowIndexes.push(t)) : a.isSelected = this.parent.getSelectedRowIndexes().indexOf(t) > -1, this.refreshForeignKeyRow(a);
            var l = this.ensureColumns(),
                h = new ts(a, this.parent);
            return h.cells = l.concat(this.generateCells(a)), h
        }, e.prototype.refreshForeignKeyRow = function(e) {
            for (var t = this.parent.getForeignKeyColumns(), i = 0; i < t.length; i++) l(t[i].field, bl(t[i], e.data), e.foreignKeyData)
        }, e.prototype.generateCells = function(e) {
            for (var t = this.parent.getColumns(), i = [], n = 0; n < t.length; n++) i.push(this.generateCell(t[n], e.uid, g(t[n].commands) ? void 0 : dr.CommandColumn, null, n, e.foreignKeyData));
            return i
        }, e.prototype.generateCell = function(e, t, i, n, r, o) {
            var s = {
                visible: e.visible,
                isDataCell: !g(e.field || e.template),
                isTemplate: !g(e.template),
                rowID: t,
                column: e,
                cellType: g(i) ? dr.Data : i,
                colSpan: n,
                commands: e.commands,
                isForeignKey: e.isForeignColumn && e.isForeignColumn(),
                foreignKeyData: e.isForeignColumn && e.isForeignColumn() && a(e.field, o)
            };
            return (s.isDataCell || "checkbox" === s.column.type || s.commands) && (s.index = r), new is(s)
        }, e.prototype.refreshRows = function(e) {
            for (var t = 0; t < e.length; t++) this.refreshForeignKeyRow(e[t]), e[t].cells = this.generateCells(e[t]);
            return e
        }, e.prototype.getInfiniteIndex = function(e) {
            return "infiniteScroll" === e.requestType || "delete" === e.requestType || "add" === e.action ? e.startIndex : 0
        }, e
    }(),
    ss = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    as = function() {
        function e(e) {
            this.parent = e
        }
        return e.prototype.getData = function() {
            for (var e = this, t = [], i = this.parent.aggregates.slice(), n = 0; n < i.length; n++) {
                var r = i[n].columns.filter((function(t) {
                    return !(t.footerTemplate || t.groupFooterTemplate || t.groupCaptionTemplate) || e.columnSelector(t)
                }));
                r.length && t.push({
                    columns: r
                })
            }
            return t
        }, e.prototype.columnSelector = function(e) {
            return void 0 !== e.footerTemplate
        }, e.prototype.getColumns = function(e, t) {
            var i = [];
            if (this.parent.allowGrouping)
                for (var n = 0; n < this.parent.groupSettings.columns.length; n++) i.push(new xn({}));
            return (this.parent.detailTemplate || !g(this.parent.childGrid) || this.parent.isRowDragable() && !e) && i.push(new xn({})), i.push.apply(i, this.parent.getColumns()), t = t ? t + this.parent.getIndentCount() : t, g(e) ? i : i.slice(e, t)
        }, e.prototype.generateRows = function(e, t, i, n, r) {
            if (0 === e.length && (void 0 === t || !t.count)) return [];
            for (var o = this.buildSummaryData(e, t), s = [], a = this.getData(), l = 0; l < a.length; l++) s.push(this.getGeneratedRow(a[l], o[l], t ? t.level : void 0, i, n, t ? t.parentUid : void 0, r));
            return s
        }, e.prototype.getGeneratedRow = function(e, t, i, n, r, o, s) {
            var a = [],
                l = this.getIndentByLevel(i),
                h = !g(this.parent.childGrid),
                p = this.parent.getIndentCount();
            this.parent.isRowDragable() && (l = ["e-indentcelltop"]);
            for (var d = s || this.getColumns(n, r), c = 0; c < d.length; c++) a.push(this.getGeneratedCell(d[c], e, c >= p ? this.getCellType() : c < this.parent.groupSettings.columns.length ? dr.Indent : dr.DetailFooterIntent, l[c], h));
            var u = new ts({
                data: t,
                attributes: {
                    class: "e-summaryrow"
                }
            });
            return u.cells = a, S() && this.parent.isServerRendered && !g(o) ? u.uid = this.parent.getRowUid("grid-row") : u.uid = Za("grid-row"), u.parentUid = o, u.visible = a.some((function(e) {
                return e.isDataCell && e.visible
            })), u
        }, e.prototype.getGeneratedCell = function(e, t, i, n, r) {
            var o = t.columns.filter((function(t) {
                    return t.columnName === e.field
                }))[0],
                s = {
                    style: {
                        textAlign: e.textAlign
                    },
                    "e-mappinguid": e.uid,
                    index: e.index
                };
            n && (s.class = n), g(n) && r && (s.class = "e-detailindentcelltop");
            var a = {
                visible: e.visible,
                isDataCell: !g(o),
                isTemplate: o && !g(o.footerTemplate || o.groupFooterTemplate || o.groupCaptionTemplate),
                column: o || {},
                attributes: s,
                cellType: i
            };
            return a.column.headerText = e.headerText, new is(a)
        }, e.prototype.buildSummaryData = function(e, t) {
            for (var i = [], n = this.getData(), r = {}, o = 0; o < n.length; o++) {
                r = {};
                for (var s = n[o].columns, a = 0; a < s.length; a++) r = this.setTemplate(s[a], t && t.aggregates ? t : e, r);
                i.push(r)
            }
            return i
        }, e.prototype.getIndentByLevel = function(e) {
            return this.parent.groupSettings.columns.map((function() {
                return "e-indentcelltop"
            }))
        }, e.prototype.setTemplate = function(e, t, i) {
            var n = e.type,
                r = {},
                o = e.getFormatter() || function(e) {
                    return e
                },
                s = t;
            n instanceof Array || (n = [e.type]);
            for (var a = 0; a < n.length; a++) {
                var l = e.field + " - " + n[a].toLowerCase(),
                    h = e.columnName,
                    p = "Custom" !== n[a] && s.aggregates && l in s.aggregates ? s.aggregates[l] : el(n[a], s.aggregates ? s : t, e, this.parent);
                i[h] = i[h] || {}, i[h][l] = p, i[h][n[a]] = g(p) ? " " : o(p), s.field && (i[h].field = s.field, i[h].key = s.key)
            }
            return r.format = e.getFormatter(), e.setTemplate(r), i
        }, e.prototype.getCellType = function() {
            return dr.Summary
        }, e
    }(),
    ls = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return ss(t, e), t.prototype.columnSelector = function(e) {
            return void 0 !== e.groupFooterTemplate
        }, t.prototype.getIndentByLevel = function(e) {
            return void 0 === e && (e = this.parent.groupSettings.columns.length), this.parent.groupSettings.columns.map((function(t, i) {
                return i <= e - 1 ? "" : "e-indentcelltop"
            }))
        }, t.prototype.getCellType = function() {
            return dr.GroupSummary
        }, t
    }(as),
    hs = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return ss(t, e), t.prototype.columnSelector = function(e) {
            return void 0 !== e.groupCaptionTemplate
        }, t.prototype.getData = function() {
            return [e.prototype.getData.call(this).reduce((function(e, t) {
                return e.columns = e.columns.concat(t.columns), e
            }), {
                columns: []
            })]
        }, t.prototype.isEmpty = function() {
            return 0 === (this.getData()[0].columns || []).length
        }, t.prototype.getCellType = function() {
            return dr.CaptionSummary
        }, t
    }(as),
    ps = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    ds = function(e) {
        function t(t) {
            var i = e.call(this, t) || this;
            return i.rows = [], i.index = 0, i.parent = t, i.summaryModelGen = new ls(t), i.captionModelGen = new hs(t), i
        }
        return ps(t, e), t.prototype.generateRows = function(t, i) {
            if (0 === this.parent.groupSettings.columns.length) return e.prototype.generateRows.call(this, t, i);
            this.isInfiniteScroll = "infiniteScroll" === i.requestType, this.rows = [], this.index = this.parent.enableVirtualization || this.isInfiniteScroll ? i.startIndex : 0;
            for (var n = 0, r = t.length; n < r; n++) this.getGroupedRecords(0, t[n], t.level, n, void 0, this.rows.length);
            return this.index = 0, this.parent.isCollapseStateEnabled() && this.ensureRowVisibility(), this.rows
        }, t.prototype.getGroupedRecords = function(e, t, i, n, r, o, s) {
            var a, l = this.isInfiniteScroll && this.prevKey === t.key,
                h = i;
            if (g(t.items))
                if (g(t.GroupGuid)) this.rows = this.rows.concat(this.generateDataRows(t, e, n, this.rows.length, s));
                else
                    for (var p = 0, d = t.length; p < d; p++) this.getGroupedRecords(e, t[p], t.level, n, e, this.rows.length, s);
            else {
                var c = this.generateCaptionRow(t, e, n, r, o, s);
                if (l || (this.rows = this.rows.concat(c)), t.items && t.items.length && this.getGroupedRecords(e + 1, t.items, t.items.level, n, e + 1, this.rows.length, c.uid), this.parent.aggregates.length) {
                    var u = this.rows.length;
                    (a = this.rows).push.apply(a, this.summaryModelGen.generateRows(t, {
                        level: h,
                        parentUid: c.uid
                    }));
                    for (var f = u - 1; f >= 0; f--)
                        if (this.rows[f].isCaptionRow) this.rows[f].aggregatesCount = this.rows.length - u;
                        else if (!this.rows[f].isCaptionRow && !this.rows[f].isDataRow) break
                }
            }
            this.prevKey = t.key
        }, t.prototype.getCaptionRowCells = function(e, t, i) {
            var n = [],
                r = [],
                o = this.parent.getColumnByField(e),
                s = this.parent.getColumnIndexesInView();
            this.parent.enableColumnVirtualization && (o = this.parent.columns.filter((function(t) {
                return t.field === e
            }))[0]);
            var a = this.parent.groupSettings.columns.length,
                l = this.parent;
            if (!this.parent.enableColumnVirtualization || -1 !== s.indexOf(t)) {
                for (var h = 0; h < t; h++) n.push(this.generateIndentCell());
                n.push(this.generateCell({}, null, dr.Expand))
            }
            if (t = this.parent.enableColumnVirtualization ? 1 : this.parent.getVisibleColumns().length + a + (l.detailTemplate || l.childGrid ? 1 : 0) - t + (this.parent.getVisibleColumns().length ? -1 : 0), this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {
                var p = this.captionModelGen.generateRows(i)[0];
                u(i, p.data);
                var d = 0;
                p.cells.some((function(e, t) {
                    return d = t, e.visible && e.isDataCell
                })), r = p.cells.slice(d).filter((function(e) {
                    return e.visible
                })), p.visible && r[0].column.field === this.parent.getVisibleColumns()[0].field && (r = r.slice(1)), 1 === this.parent.getVisibleColumns().length && (r = []), t -= r.length
            }
            for (var c = this.parent.enableColumnVirtualization ? this.parent.getColumns() : [o], g = !0, f = 0; f < c.length; f++) {
                var m = g && -1 !== s.indexOf(t);
                m && (g = !1);
                var y = !this.parent.enableColumnVirtualization || m ? dr.GroupCaption : dr.GroupCaptionEmpty;
                t = this.parent.enableColumnVirtualization && y === dr.GroupCaption ? t + a : t, l.isRowDragable() && t++, n.push(this.generateCell(o, null, y, t))
            }
            return n.push.apply(n, r), n
        }, t.prototype.generateCaptionRow = function(e, t, i, n, r, o) {
            var s = {},
                a = this.parent.getColumnByField(e.field);
            s.data = u({}, e), a && (s.data.field = e.field), s.isDataRow = !1, s.isExpand = !this.parent.groupSettings.enableLazyLoading && !this.parent.isCollapseStateEnabled(), s.parentGid = i, s.childGid = n, s.tIndex = r, s.isCaptionRow = !0, s.parentUid = o, s.gSummary = g(e.items.records) ? e.items.length : e.items.records.length, s.uid = S() && this.parent.isServerRendered ? this.parent.getRowUid("grid-row") : Za("grid-row");
            var l = new ts(s);
            return l.indent = t, this.getForeignKeyData(l), l.cells = this.getCaptionRowCells(e.field, t, l.data), l
        }, t.prototype.getForeignKeyData = function(e) {
            var t = e.data,
                i = this.parent.getColumnByField(t.field);
            i && i.isForeignColumn && i.isForeignColumn() && l("foreignKey", g(t.key) ? "" : i.valueAccessor(i.foreignKeyValue, bl(i, {}, t.key)[0], i), e.data)
        }, t.prototype.generateDataRows = function(e, t, i, n, r) {
            for (var o = [], s = this.parent.getColumnIndexesInView(), a = 0, l = e.length; a < l; a++, n++) {
                o[a] = this.generateRow(e[a], this.index, a ? void 0 : "e-firstchildrow", t, i, n, r);
                for (var h = 0; h < t; h++) this.parent.enableColumnVirtualization && -1 === s.indexOf(t) || o[a].cells.unshift(this.generateIndentCell());
                this.index++
            }
            return o
        }, t.prototype.generateIndentCell = function() {
            return this.generateCell({}, null, dr.Indent)
        }, t.prototype.refreshRows = function(e) {
            for (var t = this.parent.getColumnIndexesInView(), i = 0; i < e.length; i++)
                if (e[i].isDataRow) {
                    e[i].cells = this.generateCells(e[i]);
                    for (var n = 0; n < e[i].indent; n++) this.parent.enableColumnVirtualization && -1 === t.indexOf(e[i].indent) || e[i].cells.unshift(this.generateIndentCell())
                } else {
                    var r = this.generateCaptionRow(e[i].data, e[i].indent);
                    e[i].cells = r.cells
                } return e
        }, t.prototype.ensureRowVisibility = function() {
            for (var e = 0; e < this.rows.length; e++) {
                var t = this.rows[e];
                if (t.isCaptionRow)
                    for (var i = e + 1; i < this.rows.length; i++) {
                        var n = this.rows[i];
                        t.uid === n.parentUid && (this.rows[i].visible = t.isExpand)
                    }
            }
        }, t
    }(os),
    cs = function() {
        function e(e, t) {
            var i = this;
            this.rows = [], this.freezeRows = [], this.movableRows = [], this.freezeRowElements = [], this.currentInfo = {}, this.prevCurrentView = [], this.isLoaded = !0, this.viewColIndexes = [], this.drop = function(e) {
                (Ka(e.target, "e-row") || Ka(e.target, "e-emptyrow")) && (i.parent.notify("columnDrop", {
                    target: e.target,
                    droppedElement: e.droppedElement
                }), Ct(e.droppedElement))
            }, this.infiniteCache = {}, this.isRemove = !1, this.visibleRows = [], this.visibleFrozenRows = [], this.isAddRows = !1, this.isInfiniteFreeze = !1, this.useGroupCache = !1, this.mutableData = !1, this.rafCallback = function(e) {
                var t = e;
                return function() {
                    if (i.parent.getFrozenColumns() && i.parent.enableVirtualization) {
                        var n = [].slice.call(i.parent.getMovableVirtualContent().querySelectorAll(".e-row")),
                            r = [].slice.call(i.parent.getFrozenVirtualContent().querySelectorAll(".e-row"));
                        if (i.isLoaded = !!n && n.length === r.length, i.parent.enableColumnVirtualization && "virtualscroll" === e.requestType && i.isLoaded) {
                            var o = [].slice.call(i.parent.getMovableVirtualHeader().querySelectorAll(".e-row")),
                                s = [].slice.call(i.parent.getFrozenVirtualHeader().querySelectorAll(".e-row"));
                            i.isLoaded = o.length === s.length
                        }
                    }
                    if (i.ariaService.setBusy(i.getPanel().querySelector(".e-content"), !1), !i.parent.isDestroyed) {
                        var a = i.rows.slice(0);
                        if (0 !== i.parent.getFrozenColumns() && (a = e.isFrozen ? i.freezeRows : i.movableRows), i.parent.notify(xr, {
                                rows: a,
                                args: t
                            }), i.isLoaded && i.parent.trigger(Cr, {}, (function() {
                                i.parent.allowTextWrap && i.parent.notify("freezerender", {
                                    case: "textwrap"
                                })
                            })), t) {
                            var l = (t.requestType || "").toLowerCase() + "-complete";
                            i.parent.notify(l, t), "batchsave" === e.requestType && (e.cancel = !1, i.parent.trigger("actionComplete", e))
                        }
                        i.isLoaded && i.parent.hideSpinner()
                    }
                }
            }, this.parent = e, this.serviceLocator = t, this.ariaService = this.serviceLocator.getService("ariaService"), this.mutableData = this.parent.getDataModule().isRemote(), this.generator = this.getModelGenerator(), this.parent.isDestroyed || (this.parent.enableColumnVirtualization || this.parent.enableVirtualization || this.parent.groupSettings.enableLazyLoading || this.parent.on("column-visible-changed", this.setVisible, this), this.parent.on("colgroup-refresh", this.colGroupRefresh, this), this.parent.on(kr, this.enableAfterRender, this), this.parent.on("refresh-infinite-mode-blocks", this.refreshContentRows, this), this.parent.on("beforecellfocused", this.beforeCellFocused, this))
        }
        return e.prototype.beforeCellFocused = function(e) {
            !e.byKey || "upArrow" !== e.keyArgs.action && "downArrow" !== e.keyArgs.action ? this.pressedKey = void 0 : this.pressedKey = e.keyArgs.action
        }, e.prototype.renderPanel = function() {
            var e = this.parent,
                t = this.parent.element.querySelector(".e-gridcontent");
            if (t) return this.ariaService.setOptions(this.parent.element.querySelector(".e-content"), {
                busy: !1
            }), void this.setPanel(t);
            t = this.parent.createElement("div", {
                className: "e-gridcontent"
            });
            var i = this.parent.createElement("div", {
                className: "e-content"
            });
            this.ariaService.setOptions(i, {
                busy: !1
            }), t.appendChild(i), this.setPanel(t), e.element.appendChild(t)
        }, e.prototype.renderTable = function() {
            var e = this.getPanel(),
                t = e.querySelector(".e-virtualtable"),
                i = e.querySelector(".e-virtualtrack");
            !this.parent.enableVirtualization || g(t) || g(i) || S() && (!S() || this.parent.isServerRendered) || (Ct(t), Ct(i)), e.appendChild(this.createContentTable("_content_table")), this.setTable(e.querySelector(".e-table")), this.ariaService.setOptions(this.getTable(), {
                multiselectable: "Multiple" === this.parent.selectionSettings.type
            }), this.initializeContentDrop(), this.parent.frozenRows && this.parent.getHeaderContent().classList.add("e-frozenhdrcont")
        }, e.prototype.createContentTable = function(e) {
            var t = this.getPanel().firstElementChild;
            S() || this.getTable() && Ct(this.getTable());
            var i = t.querySelector(".e-table") ? t.querySelector(".e-table") : this.parent.createElement("table", {
                className: "e-table",
                attrs: {
                    cellspacing: "0.25px",
                    role: "grid",
                    id: this.parent.element.id + e
                }
            });
            return this.setColGroup(this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0)), i.appendChild(this.getColGroup()), i.appendChild(this.parent.createElement("tbody")), t.appendChild(i), t
        }, e.prototype.splitRows = function(e) {
            this.parent.getFrozenColumns() && (0 === e ? (this.freezeRows = this.rows, this.freezeRowElements = this.rowElements) : this.movableRows = this.rows)
        }, e.prototype.refreshContentRows = function(e) {
            var t = this;
            void 0 === e && (e = {});
            var i = this.parent;
            if (0 !== i.currentViewData.length) {
                var n = this.currentMovableRows || i.currentViewData,
                    r = i.isReact && !g(i.rowTemplate),
                    o = r ? i.createElement("tbody") : document.createDocumentFragment();
                this.initialPageRecords || (this.initialPageRecords = u([], n));
                var s, a, l, h = r ? i.createElement("tbody") : document.createDocumentFragment(),
                    p = i.getColumns(),
                    d = i.getFrozenColumns(),
                    c = new rs(this.serviceLocator, null, this.parent),
                    m = this.parent.enableInfiniteScrolling && "infiniteScroll" === e.requestType;
                this.rowElements = [], this.rows = [];
                var y, v = this.getPanel().querySelector(".e-frozencontent"),
                    b = this.getPanel().querySelector(".e-movablecontent"),
                    w = this.getPanel().querySelector(".e-content");
                Sl(i) && ["sorting", "filtering", "searching", "grouping", "ungrouping", "reorder"].some((function(t) {
                    return e.requestType === t
                })) && (i.vcRows = [], i.vRows = []);
                if (S() && this.parent.isServerRendered) {
                    y = this.generator.generateRows(n, e), this.parent.enableVirtualization && (this.prevInfo = this.prevInfo ? this.prevInfo : e.virtualInfo, this.prevInfo = e.virtualInfo.sentinelInfo && "Y" === e.virtualInfo.sentinelInfo.axis && this.currentInfo.page && this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo), this.rows = y, this.freezeRows = y, this.rowElements = [].slice.call(this.getTable().querySelectorAll("tr.e-row[data-uid]")), d && (this.movableRows = y.map((function(e) {
                        var t = new ts(e);
                        return t.cells = e.cells.slice(d, e.cells.length), e.cells = e.cells.slice(0, d), t
                    })), this.freezeRowElements = this.rowElements), this.isLoaded = !0, this.parent.hideSpinner(), e.isFrozen = 0 !== this.parent.getFrozenColumns() && !e.isFrozen;
                    var C = u({
                        rows: this.rows
                    }, e);
                    if (this.getTable().querySelector(".e-emptyrow") && (Ct(this.getTable().querySelector(".e-emptyrow")), g(this.getTable().querySelectorAll(".e-table > tbody")[1]) || Ct(this.getTable().querySelectorAll(".e-table > tbody")[1])), this.parent.notify("contentcolgroup", {}), this.rafCallback(C)(), d && (w.style.overflowY = "hidden", v.style.height = b.offsetHeight - rl() + "px", b.style.overflowY = "auto" !== this.parent.height ? "scroll" : "auto", v.style.borderRightWidth = "1px", this.parent.notify(xr, {
                            rows: this.movableRows,
                            args: u({}, C, {
                                isFrozen: !1
                            })
                        })), !this.parent.isCheckBoxSelection && "Multiple" !== this.parent.selectionSettings.type || !this.parent.isPersistSelection && !this.parent.enableVirtualization) {
                        "Normal" !== this.parent.editSettings.mode || g(e.editRowIndex) || this.parent.selectRow(e.editRowIndex)
                    }
                    if (this.parent.enableVirtualization && !this.parent.getHeaderContent().querySelectorAll(".e-check").length) {
                        for (var x = this.parent.getRows().filter((function(e) {
                                return e.getAttribute("aria-selected")
                            })).map((function(e) {
                                return e.getAttribute("data-uid")
                            })), k = this.parent.getRows().filter((function(e) {
                                return null === e.getAttribute("aria-selected")
                            })).map((function(e) {
                                return e.getAttribute("data-uid")
                            })), T = 0; T < x.length; T++)
                            if (!g(this.parent.getRowObjectFromUID(x[T])) && !this.parent.getRowObjectFromUID(x[T]).isSelected) {
                                this.parent.getRowElementByUID(x[T]).removeAttribute("aria-selected"), g(this.parent.getRowElementByUID(x[T]).querySelector(".e-check")) || gt([this.parent.getRowElementByUID(x[T]).querySelector(".e-check")], ["e-check"]);
                                for (var D = 0; D < this.parent.getRowElementByUID(x[T]).children.length; D++) this.parent.getRowElementByUID(x[T]).children[D].classList.remove("e-selectionbackground", "e-active")
                            } for (T = 0; T < k.length; T++)
                            if (!g(this.parent.getRowObjectFromUID(k[T])) && this.parent.getRowObjectFromUID(k[T]).isSelected) {
                                this.parent.getRowElementByUID(k[T]).setAttribute("aria-selected", "true"), g(this.parent.getRowElementByUID(k[T]).querySelector(".e-frame")) || ut([this.parent.getRowElementByUID(k[T]).querySelector(".e-frame")], ["e-check"]);
                                for (D = 0; D < this.parent.getRowElementByUID(k[T]).children.length; D++) this.parent.getRowElementByUID(k[T]).children[D].classList.add("e-selectionbackground", "e-active")
                            }
                    }
                } else {
                    if (this.parent.enableVirtualization && this.parent.getFrozenColumns()) {
                        if (this.parent.enableColumnVirtualization && "virtualscroll" === e.requestType)
                            if ("X" === e.virtualInfo.sentinelInfo.axis) y = this.parent.contentModule.generateRows(n, e), e.renderMovableContent = !0;
                            else if (b.scrollLeft > 0 && !e.renderMovableContent) {
                            this.viewColIndexes = e.virtualInfo.columnIndexes;
                            var E = [];
                            for (T = 0; T < this.parent.getFrozenColumns(); T++) E.push(T);
                            this.parent.setColumnIndexesInView(E), e.virtualInfo.columnIndexes = E
                        }
                        y = this.parent.contentModule.generateRows(n, e)
                    } else y = this.checkCache(y, e), this.isAddRows || this.useGroupCache || (y = this.generator.generateRows(n, e));
                    this.setGroupCache(y, e), this.parent.notify("set-infinite-cache", {
                        isInfiniteScroll: m,
                        modelData: y,
                        args: e
                    }), g(y[0].cells[0]) && (b.querySelector("tbody").innerHTML = "");
                    var R = y[0].cells[0].index;
                    if (f(R) && this.parent.getFrozenColumns() && this.parent.isRowDragable() && (R = y[0].cells[1].index), this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && e.renderMovableContent && "virtualscroll" === e.requestType && b.scrollLeft > 0 && 0 !== e.virtualInfo.columnIndexes[0] && (R = this.parent.getFrozenColumns()), "infiniteScroll" !== e.requestType && this.parent.registeredTemplate && this.parent.registeredTemplate.template && !e.isFrozen) {
                        var P = [];
                        for (T = 0; T < this.parent.registeredTemplate.template.length; T++)
                            for (D = 0; D < this.parent.registeredTemplate.template[T].rootNodes.length; D++) g(this.parent.registeredTemplate.template[T].rootNodes[D].parentNode) && P.push(this.parent.registeredTemplate.template[T]);
                        this.parent.destroyTemplate(["template"], P)
                    }
                    if (this.parent.isReact && "infiniteScroll" !== e.requestType && !e.isFrozen && (this.parent.destroyTemplate(["columnTemplate", "rowTemplate", "detailTemplate", "captionTemplate", "commandsTemplate"]), this.parent.renderTemplates()), this.parent.enableColumnVirtualization) new ns(this.serviceLocator, this.parent).updateVirtualCells(y);
                    this.tbody = d && R >= d ? b.querySelector("tbody") : this.getTable().querySelector("tbody");
                    var I = 0,
                        M = !0;
                    if (Sl(i) && i.vcRows.length) {
                        var L = g(e.virtualInfo.offsets) ? g(e.scrollTop) ? 0 : e.scrollTop.top : e.virtualInfo.offsets.top;
                        if (0 !== L) {
                            for (var O = i.vGroupOffsets, A = i.pageSettings.pageSize / 2, B = Object.keys(O).map((function(e) {
                                    return O[e]
                                })), F = 0; F < B.length; F++)
                                if (L < B[F]) {
                                    if (g(e.virtualInfo) || "up" !== e.virtualInfo.direction) {
                                        e.virtualInfo.blockIndexes = 0 === F || 1 === F ? [1, 2] : [F, F + 1], I = 0 === F || 1 === F ? 0 : F * A;
                                        break
                                    }
                                    e.virtualInfo.blockIndexes = 0 === F || 1 === F ? [1, 2] : [F, F + 1], I = 0 === F || 1 === F ? 0 : F * A;
                                    break
                                } L + this.contentPanel.firstElementChild.offsetHeight !== this.contentPanel.firstElementChild.scrollHeight || e.rowObject || (M = !1)
                        }
                    }
                    var N = i.frozenRows && !i.getFrozenColumns() && this.parent.enableVirtualization && "reorder" === e.requestType;
                    if (i.frozenRows && "virtualscroll" === e.requestType && "X" === e.virtualInfo.sentinelInfo.axis || N) {
                        var H = e.virtualInfo.blockIndexes,
                            V = e.virtualInfo.page;
                        e.virtualInfo.blockIndexes = [1, 2], N && (e.virtualInfo.page = 1);
                        var j = N ? this.initialPageRecords : n,
                            z = this.vgenerator.generateRows(j, e);
                        z.splice(this.parent.frozenRows);
                        for (T = 0; T < this.parent.frozenRows; T++) z[T].cells.splice(0, this.parent.getFrozenColumns()), s = c.render(z[T], p), h.appendChild(s);
                        e.virtualInfo.blockIndexes = H, e.virtualInfo.page = V, N && 1 === e.virtualInfo.page && y.splice(0, this.parent.frozenRows)
                    }
                    this.virtualFrozenHdrRefresh(h, y, c, e, n, p);
                    T = I;
                    for (var q = y.length; T < q; T++)
                        if (this.rows.push(y[T]), !this.parent.groupSettings.enableLazyLoading || this.useGroupCache || !this.parent.groupSettings.columns.length || (this.setRowsInLazyGroup(y[T], T), !g(y[T].indent))) {
                            if (this.setInfiniteVisibleRows(e, y[T]), Sl(i) && this.rows.length >= i.pageSettings.pageSize && M) break;
                            if (i.rowTemplate) {
                                var W = i.element.id + "rowTemplate",
                                    _ = void 0;
                                if (i.isReact) {
                                    var G = i.frozenRows && T < i.frozenRows,
                                        U = u({
                                            index: T
                                        }, n[T]);
                                    i.getRowTemplate()(U, i, "rowTemplate", W, null, null, G ? h : o), i.renderTemplates()
                                } else _ = i.getRowTemplate()(u({
                                    index: T
                                }, n[T]), i, "rowTemplate", W);
                                if (i.isReact || "TBODY" !== _[0].tagName) i.frozenRows && T < i.frozenRows ? s = i.isReact ? h.lastElementChild : $a(h, _) : (i.isReact || (s = $a(o, _)), l = i.isReact ? o.lastElementChild : s.lastElementChild);
                                else {
                                    for (D = 0; D < _.length; D++) {
                                        var K = "tr" === _[D].nodeName.toLowerCase();
                                        (K || _[D].querySelectorAll && _[D].querySelectorAll("tr").length) && (s = K ? _[D] : _[D].querySelector("tr"))
                                    }
                                    i.frozenRows && T < i.frozenRows ? h.appendChild(s) : o.appendChild(s)
                                }
                                C = {
                                    data: y[T].data,
                                    row: l || s
                                };
                                this.parent.trigger("rowDataBound", C)
                            } else {
                                s = c.render(y[T], p);
                                var Y = this.ensureFrozenHeaderRender(e);
                                i.frozenRows && T < i.frozenRows && !m && "virtualscroll" !== e.requestType && Y ? h.appendChild(s) : o.appendChild(s), y[T].isExpand && i.notify("expandchildgrid", s.cells[i.groupSettings.columns.length])
                            }
                            y[T].isDataRow && this.rowElements.push(s), this.ariaService.setOptions(this.getTable(), {
                                colcount: i.getColumns().length.toString()
                            })
                        } if (this.splitRows(R), i.frozenRows && "virtualscroll" !== e.requestType && !m || "virtualscroll" === e.requestType && e.virtualInfo.sentinelInfo && "X" === e.virtualInfo.sentinelInfo.axis)
                        if (a = d ? i.getHeaderContent().querySelector(0 === R ? ".e-frozenheader" : ".e-movableheader").querySelector("tbody") : i.getHeaderTable().querySelector("tbody"), r) {
                            var X = a.parentElement;
                            Ct(a), X.appendChild(h)
                        } else a.innerHTML = "", a.appendChild(h);
                    !i.enableVirtualization && i.frozenRows && 0 === R && w.offsetHeight === Number(i.height) && (w.style.height = w.offsetHeight - a.offsetHeight + "px"), d && 0 === R && (this.getPanel().firstChild.style.overflowY = "hidden"), S() && !this.parent.isJsComponent || (e.rows = this.rows.slice(0)), e.isFrozen = 0 !== this.parent.getFrozenColumns() && !e.isFrozen, this.index = R, La((function() {
                        t.parent.notify("beforeFragAppend", e);
                        var n = t.parent.enableVirtualization && 0 !== t.parent.getFrozenColumns();
                        t.parent.enableVirtualization || m || (Ct(t.tbody), t.tbody = t.parent.createElement("tbody")), !d || n || t.parent.enableInfiniteScrolling ? (i.rowTemplate && Ue(i.element.id + "rowTemplate", "RowTemplate", i), n ? e.renderMovableContent ? (t.appendContent(b.querySelector("tbody"), o, e), e.virtualInfo && "right" !== e.virtualInfo.direction && "left" !== e.virtualInfo.direction && (v.style.height = b.offsetHeight - rl() + "px"), e.renderMovableContent = !1) : (t.appendContent(v.querySelector("tbody"), o, e), t.parent.enableColumnVirtualization && "virtualscroll" === e.requestType && b.scrollLeft > 0 && (t.parent.setColumnIndexesInView(t.viewColIndexes), e.virtualInfo.columnIndexes = t.viewColIndexes)) : !g(t.parent.infiniteScrollModule) && t.parent.enableInfiniteScrolling ? (t.isAddRows = !1, t.parent.notify("remove-infinite-rows", {
                            args: e
                        }), t.parent.notify("append-infinite-content", {
                            tbody: t.tbody,
                            frag: o,
                            args: e,
                            rows: t.rows,
                            rowElements: t.rowElements,
                            visibleRows: t.visibleRows
                        }), d && 0 !== R && (v.style.height = b.offsetHeight - rl() + "px", b.style.overflowY = "auto" !== t.parent.height ? "scroll" : "auto", v.style.borderRightWidth = "1px")) : (t.useGroupCache = !1, t.appendContent(t.tbody, o, e))) : (r ? t.tbody = o : t.tbody.appendChild(o), 0 === t.index ? (t.isLoaded = !1, v.querySelector("table").appendChild(t.tbody)) : (t.tbody.childElementCount < 1 && t.tbody.appendChild(t.parent.createElement("tr").appendChild(t.parent.createElement("td"))), t.isLoaded = !0, b.querySelector("table").appendChild(t.tbody), 0 === t.parent.getFrozenColumns() || t.parent.allowTextWrap || t.parent.notify("freezerender", {
                            case: "refreshHeight"
                        }), v.style.height = b.offsetHeight - rl() + "px", b.style.overflowY = "auto" !== t.parent.height ? "scroll" : "auto", v.style.borderRightWidth = "1px")), d && 0 === R && (n && (e.renderMovableContent = !0), t.refreshContentRows(u({}, e))), o = null
                    }), this.rafCallback(u({}, e)))
                }
            }
        }, e.prototype.appendContent = function(e, t, i) {
            this.parent.isReact && !g(this.parent.rowTemplate) ? this.getTable().appendChild(t) : (e.appendChild(t), this.getTable().appendChild(e))
        }, e.prototype.setRowsInLazyGroup = function(e, t) {
            this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length && this.parent.contentModule.maintainRows(e, t)
        }, e.prototype.setGroupCache = function(e, t) {
            !this.useGroupCache && this.parent.groupSettings.enableLazyLoading && this.parent.notify("group-cache", {
                args: t,
                data: e
            })
        }, e.prototype.ensureFrozenHeaderRender = function(e) {
            return !(this.parent.enableVirtualization && ("reorder" === e.requestType || "refresh" === e.requestType) || this.parent.infiniteScrollSettings.enableCache && this.parent.frozenRows && "delete" === this.parent.infiniteScrollModule.requestType && 1 !== this.parent.pageSettings.currentPage)
        }, e.prototype.checkCache = function(e, t) {
            if (this.parent.infiniteScrollSettings.enableCache && "infiniteScroll" === t.requestType) {
                var i = t.isFrozen ? 1 : 0,
                    n = this.parent.getFrozenColumns();
                if (this.isAddRows = !g(this.infiniteCache[this.parent.pageSettings.currentPage]), n && !g(this.infiniteCache[this.parent.pageSettings.currentPage]) && (this.isAddRows = 0 !== this.infiniteCache[this.parent.pageSettings.currentPage][i].length), this.isAddRows) {
                    var r = n ? this.infiniteCache[this.parent.pageSettings.currentPage][i] : this.infiniteCache[this.parent.pageSettings.currentPage];
                    e = 1 === this.parent.pageSettings.currentPage ? r.slice(this.parent.frozenRows) : r
                }
                return e
            }
            return this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length && ("paging" === t.requestType || "columnstate" === t.requestType || "reorder" === t.requestType) && this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage] ? (this.useGroupCache = !0, this.parent.contentModule.initialGroupRows("reorder" === t.requestType)) : null
        }, e.prototype.setInfiniteVisibleRows = function(e, t) {
            var i = this.parent.getFrozenColumns();
            this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && (i ? e.isFrozen ? this.visibleRows.push(t) : this.visibleFrozenRows.push(t) : this.parent.infiniteScrollSettings.enableCache || this.visibleRows.push(t))
        }, e.prototype.getCurrentBlockInfiniteRecords = function(e) {
            var t = [];
            if (this.parent.infiniteScrollSettings.enableCache) {
                if (!Object.keys(this.infiniteCache).length) return [];
                var i = this.parent.getFrozenColumns(),
                    n = this.parent.getRows(),
                    r = parseInt(n[this.parent.frozenRows].getAttribute("aria-rowindex"), 10),
                    o = Math.ceil((r + 1) / this.parent.pageSettings.pageSize);
                r = parseInt(n[n.length - 1].getAttribute("aria-rowindex"), 10);
                var s = Math.ceil(r / this.parent.pageSettings.pageSize);
                if (i) {
                    for (var a = e ? 0 : 1, l = o; l <= s; l++) t = t.length ? t.concat(this.infiniteCache[l][a]) : this.infiniteCache[l][a];
                    this.parent.frozenRows && this.parent.pageSettings.currentPage > 1 && (t = this.infiniteCache[1][a].slice(0, this.parent.frozenRows).concat(t))
                } else {
                    for (l = o; l <= s; l++) t = t.length ? t.concat(this.infiniteCache[l]) : this.infiniteCache[l];
                    this.parent.frozenRows && this.parent.pageSettings.currentPage > 1 && (t = this.infiniteCache[1].slice(0, this.parent.frozenRows).concat(t))
                }
            }
            return t
        }, e.prototype.getReorderedVFRows = function(e) {
            return this.parent.contentModule.getReorderedFrozenRows(e)
        }, e.prototype.virtualFrozenHdrRefresh = function(e, t, i, n, r, o) {
            if (this.parent.frozenRows && this.parent.getFrozenColumns() && this.parent.enableVirtualization && ("reorder" === n.requestType || "refresh" === n.requestType)) {
                var s = void 0;
                this.currentMovableRows = r;
                for (var a = this.getReorderedVFRows(n), l = 0; l < a.length; l++) s = i.render(a[l], o), e.appendChild(s);
                1 === n.virtualInfo.page && t.splice(0, this.parent.frozenRows), n.renderMovableContent && (this.parent.currentViewData = this.currentMovableRows, this.currentMovableRows = null)
            }
        }, e.prototype.getInfiniteRows = function() {
            var e = [],
                t = this.parent.getFrozenColumns();
            if (this.parent.enableInfiniteScrolling)
                if (this.parent.infiniteScrollSettings.enableCache)
                    for (var i = Object.keys(this.infiniteCache), n = 0; n < i.length; n++) e = t ? e.concat(this.infiniteCache[i[n]][0]) : e.concat(this.infiniteCache[i[n]]);
                else e = t ? this.visibleFrozenRows : this.visibleRows;
            return e
        }, e.prototype.getInfiniteMovableRows = function() {
            var e = this.getCurrentBlockInfiniteRecords();
            return this.parent.enableInfiniteScrolling ? e.length ? e : this.visibleRows : []
        }, e.prototype.getPanel = function() {
            return this.contentPanel
        }, e.prototype.setPanel = function(e) {
            this.contentPanel = e
        }, e.prototype.getTable = function() {
            return this.contentTable
        }, e.prototype.setTable = function(e) {
            this.contentTable = e
        }, e.prototype.getRows = function() {
            var e = this.getInfiniteRows();
            return e.length ? e : this.parent.getFrozenColumns() ? this.freezeRows : this.rows
        }, e.prototype.getMovableRows = function() {
            var e = this.getInfiniteMovableRows();
            return e.length ? e : this.movableRows
        }, e.prototype.getRowElements = function() {
            return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements
        }, e.prototype.getMovableRowElements = function() {
            return this.rowElements
        }, e.prototype.setRowElements = function(e) {
            this.rowElements = e
        }, e.prototype.getColGroup = function() {
            return this.colgroup
        }, e.prototype.setColGroup = function(e) {
            return g(e) || (e.id = "content-" + e.id), this.colgroup = e
        }, e.prototype.setVisible = function(e) {
            var t = this.parent;
            S() && t.isServerRendered && this.parent.notify("setvisibility", e);
            var i, n = t.getFrozenColumns(),
                r = [];
            if (n)
                for (var o = this.freezeRows, s = this.movableRows, a = o.length, l = void 0, h = 0, p = void 0; h < a; h++) {
                    l = s[h].cells.length, p = o[h].clone();
                    for (var d = 0; d < l; d++) p.cells.push(s[h].cells[d]);
                    r.push(p)
                } else r = this.getRows();
            r.some((function(e) {
                return e.isDataRow && (i = e), e.isDataRow
            }));
            var c = !0;
            !t.groupSettings.columns.length && i && (c = !1);
            for (var u = t.getDataRows(), g = this.infiniteRowVisibility(), f = g || this.rows.filter((function(e) {
                    return !e.isDetailRow
                })), m = 0, y = e.length; m < y; m++) {
                var v = e[m],
                    b = this.parent.getNormalizedColumnIndex(v.uid),
                    w = this.parent.getColumnIndexByUid(v.uid),
                    C = !0 === v.visible ? "" : "none";
                if (-1 !== b && i && b < i.cells.length)
                    if (n)
                        if (b < (this.parent.isRowDragable() ? n + 1 : n)) {
                            Dt(this.getColGroup().childNodes[b], {
                                display: C
                            });
                            var x = this.infiniteRowVisibility(!0);
                            f = x || this.freezeRows, u = t.getDataRows()
                        } else {
                            w = b -= n, Dt(t.getContent().querySelector(".e-movablecontent").querySelector("colgroup").childNodes[b], {
                                display: C
                            }), u = t.getMovableDataRows();
                            var k = this.infiniteRowVisibility();
                            f = k || this.movableRows
                        }
                else Dt(this.getColGroup().childNodes[b], {
                    display: C
                });
                c || this.setDisplayNone(u, w, C, f), !this.parent.invokedFromMedia && v.hideAtMedia && this.parent.updateMediaColumns(v), this.parent.invokedFromMedia = !1
            }
            c ? this.refreshContentRows({
                requestType: "refresh"
            }) : this.parent.getFrozenColumns() ? (this.parent.notify("partial-refresh", {
                rows: this.freezeRows,
                args: {
                    isFrozen: !0,
                    rows: this.freezeRows
                }
            }), this.parent.notify("partial-refresh", {
                rows: this.movableRows,
                args: {
                    isFrozen: !1,
                    rows: this.movableRows
                }
            })) : this.parent.notify("partial-refresh", {
                rows: f,
                args: {}
            })
        }, e.prototype.setDisplayNone = function(e, t, i, n) {
            for (var r = Object.keys(e), o = 0; o < r.length; o++) {
                var s = e[r[o]].querySelectorAll("td.e-rowcell")[t];
                if (e[r[o]].querySelectorAll("td.e-rowcell").length && s)
                    if (Dt(e[r[o]].querySelectorAll("td.e-rowcell")[t], {
                            display: i
                        }), e[r[o]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide") && gt([e[r[o]].querySelectorAll("td.e-rowcell")[t]], ["e-hide"]), this.parent.isRowDragable()) {
                        var a = this.parent.getFrozenColumns() ? t : t + 1;
                        n[r[o]].cells[a].visible = "" === i
                    } else n[r[o]].cells[t].visible = "" === i
            }
            this.parent.notify("infinite-show-hide", {
                visible: i,
                index: t,
                isFreeze: this.isInfiniteFreeze
            })
        }, e.prototype.infiniteRowVisibility = function(e) {
            var t;
            return this.parent.enableInfiniteScrolling && (this.isInfiniteFreeze = e, t = this.parent.infiniteScrollSettings.enableCache ? e ? this.getCurrentBlockInfiniteRecords(!0) : this.getCurrentBlockInfiniteRecords() : e ? this.visibleFrozenRows : this.visibleRows), t
        }, e.prototype.colGroupRefresh = function() {
            if (this.getColGroup()) {
                var e = void 0;
                e = this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && this.parent.contentModule.isXaxis() ? this.parent.getMovableVirtualHeader().querySelector("colgroup").cloneNode(!0) : S() ? this.parent.getHeaderTable().querySelector("colgroup").cloneNode(!0) : this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0), this.getTable().replaceChild(e, this.getColGroup()), this.setColGroup(e)
            }
        }, e.prototype.initializeContentDrop = function() {
            var e = this.parent;
            new bi(e.element, {
                accept: ".e-dragclone",
                drop: this.drop
            })
        }, e.prototype.canSkip = function(e, t, i) {
            return g(t) || g(e.visible) || t.cells[i].visible === e.visible
        }, e.prototype.getModelGenerator = function() {
            return this.generator = this.parent.allowGrouping ? new ds(this.parent) : new os(this.parent)
        }, e.prototype.renderEmpty = function(e) {
            S() && !this.parent.isJsComponent && this.parent.frozenRows || (this.getTable().appendChild(e), this.parent.frozenRows && (this.parent.getHeaderContent().querySelector("tbody").innerHTML = ""))
        }, e.prototype.setSelection = function(e, t, i) {
            if (this.parent.getFrozenColumns())
                for (var n = this.getMovableRows().filter((function(t) {
                        return i || e === t.uid
                    })), r = 0; r < n.length; r++) n[r].isSelected = t;
            for (var o = this.getRows().filter((function(t) {
                    return i || e === t.uid
                })), s = 0; s < o.length; s++) {
                o[s].isSelected = t;
                for (var a = o[s].cells, l = 0; l < a.length; l++) a[l].isSelected = t
            }
        }, e.prototype.getRowByIndex = function(e) {
            return e = this.getInfiniteRowIndex(e), this.parent.getDataRows()[e]
        }, e.prototype.getInfiniteRowIndex = function(e) {
            if (this.parent.infiniteScrollSettings.enableCache) {
                var t = this.parent.frozenRows,
                    i = t > e ? 0 : t,
                    n = parseInt(this.parent.getRows()[i].getAttribute("aria-rowindex"), 10);
                e = t > e ? e : e - n + t
            }
            return e
        }, e.prototype.getVirtualRowIndex = function(e) {
            return e
        }, e.prototype.getMovableRowByIndex = function(e) {
            return e = this.getInfiniteRowIndex(e), this.parent.getMovableDataRows()[e]
        }, e.prototype.enableAfterRender = function(e) {
            "group" === e.module && e.enable && (this.generator = this.getModelGenerator())
        }, e.prototype.setRowObjects = function(e) {
            this.rows = e
        }, e.prototype.immutableModeRendering = function(e) {
            var t = this;
            void 0 === e && (e = {});
            var i = this.parent;
            i.hideSpinner();
            var n = i.getPrimaryKeyFieldNames()[0],
                r = {},
                o = {},
                s = [],
                a = {},
                l = i.getRowsObject().slice(),
                h = this.getBatchEditedRecords(n, l),
                p = {},
                d = 0 !== Object.keys(h).length;
            if (i.getContent().querySelector(".e-emptyrow") || "reorder" === e.requestType || this.parent.groupSettings.columns.length) this.refreshContentRows(e);
            else {
                if (0 === i.currentViewData.length) return;
                var c = {},
                    u = i.createElement("tbody"),
                    f = i.currentViewData,
                    m = [].slice.call(this.getTable().querySelector("tbody").children);
                if (this.prevCurrentView.length) {
                    var y = this.prevCurrentView.length,
                        v = f.length;
                    if (y === v)
                        for (var b = 0; b < v; b++) o[f[b][n]] = r[this.prevCurrentView[b][n]] = b, p[b] = f[b][n], c[l[b].uid] = m[b], a[b] = this.prevCurrentView[b][n];
                    else {
                        for (b = 0; b < v; b++) o[f[b][n]] = b, p[b] = f[b][n];
                        for (b = 0; b < y; b++) c[l[b].uid] = m[b], r[this.prevCurrentView[b][n]] = b, a[b] = this.prevCurrentView[b][n]
                    }
                }
                for (b = 0; b < f.length; b++) {
                    var w = r[f[b][n]];
                    if (g(w)) {
                        var C = new rs(this.serviceLocator, null, i),
                            S = this.generator.generateRows([f[b]]);
                        s.push(S[0]);
                        k = C.render(S[0], i.getColumns());
                        u.appendChild(k), this.refreshImmutableContent(b, k, s[b])
                    } else {
                        var x = !1;
                        this.mutableData && (x = this.objectEqualityChecker(this.prevCurrentView[b], f[b]));
                        var k = c[l[w].uid];
                        if (s.push(i.getRowsObject()[w]), this.rowElements[b] && this.rowElements[b].getAttribute("data-uid") === s[b].uid && (d && g(h[p[b]]) || !d && (x || this.prevCurrentView[b] === f[b]))) {
                            w !== b && this.refreshImmutableContent(b, k, s[b]), u.appendChild(k);
                            continue
                        }(d && !g(h[p[b]]) || !this.mutableData && f[b] !== this.prevCurrentView[w] || this.mutableData && !x) && l[w].setRowValue(f[b]), u.appendChild(k), this.refreshImmutableContent(b, k, s[b])
                    }
                }
                if (this.rows = s, this.rowElements = [].slice.call(u.children), Ct(this.getTable().querySelector("tbody")), this.getTable().appendChild(u), this.parent.trigger(Cr, {}, (function() {
                        t.parent.allowTextWrap && t.parent.notify("freezerender", {
                            case: "textwrap"
                        })
                    })), e) {
                    var T = (e.requestType || "").toLowerCase() + "-complete";
                    this.parent.notify(T, e)
                }
            }
        }, e.prototype.objectEqualityChecker = function(e, t) {
            for (var i = Object.keys(e), n = !0, r = 0; r < i.length; r++)
                if (e[i[r]] !== t[i[r]]) {
                    n = !1;
                    break
                } return n
        }, e.prototype.getBatchEditedRecords = function(e, t) {
            var i = {},
                n = this.parent.getBatchChanges(),
                r = [],
                o = [];
            Object.keys(n).length && (r = n.changedRecords, o = n.addedRecords), o.length && ("Bottom" === this.parent.editSettings.newRowPosition ? t.splice(t.length - 1, o.length) : t.splice(0, o.length));
            for (var s = 0; s < r.length; s++) i[r[s][e]] = s;
            return i
        }, e.prototype.refreshImmutableContent = function(e, t, i) {
            i.isAltRow = !!this.parent.enableAltRow && e % 2 != 0, i.isAltRow ? t.classList.add("e-altrow") : t.classList.remove("e-altrow"), t.setAttribute("aria-rowindex", e.toString()), this.updateCellIndex(t, e)
        }, e.prototype.updateCellIndex = function(e, t) {
            for (var i = 0; i < e.cells.length; i++) e.cells[i].setAttribute("index", t.toString())
        }, e
    }(),
    us = function() {
        function e(e, t) {
            var i = this;
            this.frzIdx = 0, this.notfrzIdx = 0, this.isFirstCol = !1, this.helper = function(e) {
                var t = i.parent,
                    n = i.draggable.currentStateTarget,
                    r = Ka(n, "e-headercell");
                if (!t.allowReordering && !t.allowGrouping || !g(r) && r.querySelectorAll(".e-checkselectall").length > 0) return !1;
                var o = i.parent.createElement("div", {
                        className: "e-cloneproperties e-dragclone e-headerclone"
                    }),
                    s = n.classList.contains("e-headercell") ? n : r;
                if (!s || !t.allowReordering && s.classList.contains("e-stackedheadercell")) return !1;
                var a, l = s.offsetHeight,
                    h = s.querySelector(".e-headercelldiv") || s.querySelector(".e-stackedheadercelldiv");
                if (h) {
                    if (a = s.querySelector(".e-stackedheadercelldiv") ? t.getStackedHeaderColumnByHeaderText(h.innerText.trim(), t.columns) : t.getColumnByUid(h.getAttribute("e-mappinguid")), i.column = a, i.column.lockColumn) return !1;
                    o.setAttribute("e-mappinguid", i.column.uid)
                }
                if (a && !g(a.headerTemplate))
                    if (g(a.headerTemplate)) o.innerHTML = a.headerTemplate;
                    else {
                        var p = t.getColumnIndexByField(a.field);
                        $a(o, a.getHeaderTemplate()(u({
                            index: p
                        }, a), t, "headerTemplate"))
                    }
                else o.innerHTML = h ? a.headerText : s.firstElementChild.innerHTML;
                return o.style.width = s.offsetWidth + "px", o.style.height = s.offsetHeight + "px", o.style.lineHeight = (l - 6).toString() + "px", t.element.appendChild(o), o
            }, this.dragStart = function(e) {
                var t = i.parent;
                t.element.querySelector(".e-gridpopup").style.display = "none", t.notify("columnDragStart", {
                    target: i.draggable.currentStateTarget,
                    column: i.column,
                    event: e.event
                }), S() && e.bindEvents(e.dragElement)
            }, this.drag = function(e) {
                var t = i.parent,
                    n = e.target;
                if (n) {
                    var r = Tt(n, ".e-grid"),
                        o = i.parent.element.querySelector(".e-cloneproperties");
                    if (!(r && r.getAttribute("id") === t.element.getAttribute("id") || (Et(o, ["e-notallowedcur"], ["e-defaultcur"]), t.allowReordering && (t.element.querySelector(".e-reorderuparrow").style.display = "none", t.element.querySelector(".e-reorderdownarrow").style.display = "none"), t.groupSettings.allowReordering))) return;
                    t.notify("columnDrag", {
                        target: e.target,
                        column: i.column,
                        event: e.event
                    })
                }
            }, this.dragStop = function(e) {
                var t, n = i.parent;
                n.element.querySelector(".e-gridpopup").style.display = "none", (!Ka(e.target, "e-headercell") && !Ka(e.target, "e-groupdroparea") || !n.allowReordering && Ka(e.target, "e-headercell") || !e.helper.getAttribute("e-mappinguid") && Ka(e.target, "e-groupdroparea")) && (Ct(e.helper), t = !0), n.notify("column-drag-stop", {
                    target: e.target,
                    event: e.event,
                    column: i.column,
                    cancel: t
                })
            }, this.drop = function(e) {
                var t = i.parent,
                    n = e.droppedElement.getAttribute("e-mappinguid"),
                    r = Tt(e.target, ".e-grid");
                Ct(e.droppedElement), r && r.getAttribute("id") !== t.element.getAttribute("id") || !t.allowReordering && !t.allowGrouping || t.notify("header-drop", {
                    target: e.target,
                    uid: n,
                    droppedElement: e.droppedElement
                })
            }, this.parent = e, this.serviceLocator = t, this.ariaService = this.serviceLocator.getService("ariaService"), this.widthService = this.serviceLocator.getService("widthService"), this.parent.isDestroyed || (this.parent.enableColumnVirtualization || this.parent.on("column-visible-changed", this.setVisible, this), this.parent.on("column-position-changed", this.colPosRefresh, this))
        }
        return e.prototype.renderPanel = function() {
            var e = this.parent.element.querySelector(".e-gridheader"),
                t = null != e;
            e = t ? e : this.parent.createElement("div", {
                className: "e-gridheader"
            });
            var i = t ? e.querySelector(".e-headercontent") : this.parent.createElement("div", {
                className: "e-headercontent"
            });
            this.toggleStackClass(e), e.appendChild(i), this.setPanel(e), t || this.parent.element.appendChild(e)
        }, e.prototype.renderTable = function() {
            var e = this.getPanel();
            e.appendChild(this.createHeaderTable()), this.setTable(e.querySelector(".e-table")), this.parent.getFrozenColumns() || (this.initializeHeaderDrag(), this.initializeHeaderDrop()), this.parent.notify(Rr, {
                rows: this.rows,
                args: {
                    isFrozen: 0 !== this.parent.getFrozenColumns()
                }
            })
        }, e.prototype.getPanel = function() {
            return this.headerPanel
        }, e.prototype.setPanel = function(e) {
            this.headerPanel = e
        }, e.prototype.getTable = function() {
            return this.headerTable
        }, e.prototype.setTable = function(e) {
            this.headerTable = e
        }, e.prototype.getColGroup = function() {
            return this.colgroup
        }, e.prototype.setColGroup = function(e) {
            return this.colgroup = e
        }, e.prototype.getRows = function() {
            return this.getTable().tHead.rows
        }, e.prototype.createHeaderTable = function() {
            var e = S() && 0 !== this.parent.frozenRows,
                t = this.createTable(),
                i = this.getPanel().querySelector(".e-headercontent");
            return e || i.appendChild(t), i
        }, e.prototype.createTable = function(e) {
            void 0 === e && (e = null);
            var t = S() && 0 !== this.parent.frozenRows,
                i = this.parent;
            S() && !i.isJsComponent || !this.getTable() || i.getFrozenColumns() || Ct(this.getTable());
            i.getColumns();
            var n = this.getPanel().querySelector(".e-headercontent"),
                r = t ? e || n.querySelector(".e-table") : this.parent.createElement("table", {
                    className: "e-table",
                    attrs: {
                        cellspacing: "0.25px",
                        role: "grid"
                    }
                }),
                o = this.createHeaderContent(),
                s = o.thead,
                a = this.parent.createElement("tbody", {
                    className: this.parent.frozenRows ? "" : "e-hide"
                });
            this.caption = this.parent.createElement("caption", {
                innerHTML: this.parent.element.id + "_header_table",
                className: "e-hide"
            });
            for (var l, h = this.parent.createElement("colgroup"), p = this.parent.createElement("tr"), d = this.rows = o.rows, c = (new rs(this.serviceLocator, dr.Header, this.parent), 0), u = d.length; c < u; c++)
                for (var g = 0, f = d[c].cells.length; g < f; g++) {
                    d[c].cells[g];
                    l = this.parent.createElement("td"), p.appendChild(l)
                }
            return (i.allowFiltering || i.allowSorting || i.allowGrouping) && r.classList.add("e-sortfilter"), this.updateColGroup(h), t || a.appendChild(p), r.appendChild(this.setColGroup(h)), r.appendChild(s), t || r.appendChild(a), r.appendChild(this.caption), this.ariaService.setOptions(r, {
                colcount: i.getColumns().length.toString()
            }), r
        }, e.prototype.createHeaderContent = function() {
            var e = this.parent,
                t = e.getColumns(),
                i = this.parent.createElement("thead"),
                n = this.parent.createElement("tr", {
                    className: "e-columnheader"
                }),
                r = new rs(this.serviceLocator, dr.Header, e);
            r.element = n;
            var o, s = [];
            this.colDepth = Rl(e.columns);
            for (var a = 0, l = this.colDepth; a < l; a++) s[a] = this.generateRow(a), s[a].cells = [];
            s = this.ensureColumns(s), s = this.getHeaderCells(s);
            var h = this.parent.getFrozenColumns();
            this.parent.isRowDragable() && h && (s[0].cells[1].column.index === h && s[0].cells.shift());
            for (a = 0, l = this.colDepth; a < l; a++) o = r.render(s[a], t), this.parent.rowHeight && o.querySelector(".e-headercell") && (o.style.height = this.parent.rowHeight + "px"), i.appendChild(o);
            return {
                thead: i,
                rows: s
            }
        }, e.prototype.updateColGroup = function(e) {
            var t, i = this.parent.getColumns(),
                n = this.parent.getColumnIndexesInView();
            if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && this.parent.contentModule.isXaxis() && (i = u([], this.parent.getColumns())).splice(0, this.parent.getFrozenColumns()), e.id = this.parent.element.id + "colGroup", this.parent.allowGrouping)
                for (var r = 0, o = this.parent.groupSettings.columns.length; r < o; r++) this.parent.enableColumnVirtualization && -1 === n.indexOf(r) || (t = this.parent.createElement("col", {
                    className: "e-group-intent"
                }), e.appendChild(t));
            (this.parent.detailTemplate || this.parent.childGrid) && (t = this.parent.createElement("col", {
                className: "e-detail-intent"
            }), e.appendChild(t)), this.parent.isRowDragable() && (t = this.parent.createElement("col", {
                className: "e-drag-intent"
            }), e.appendChild(t));
            for (r = 0, o = i.length; r < o; r++) t = this.parent.createElement("col"), !1 === i[r].visible && Dt(t, {
                display: "none"
            }), e.appendChild(t);
            return e
        }, e.prototype.ensureColumns = function(e) {
            for (var t = this.parent, i = this.parent.getColumnIndexesInView(), n = 0, r = e.length; n < r; n++) {
                if (t.allowGrouping)
                    for (var o = 0, s = t.groupSettings.columns.length; o < s; o++) this.parent.enableColumnVirtualization && -1 === i.indexOf(o) || e[n].cells.push(this.generateCell({}, dr.HeaderIndent));
                if (t.detailTemplate || t.childGrid) {
                    var a = {};
                    this.parent.notify("detail-indentcell-info", a), e[n].cells.push(this.generateCell(a, dr.DetailHeader))
                }
                t.isRowDragable() && e[n].cells.push(this.generateCell({}, dr.RowDragHIcon))
            }
            return e
        }, e.prototype.getHeaderCells = function(e) {
            var t = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector("thead"),
                i = this.parent.enableColumnVirtualization ? this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;
            if (this.frzIdx = 0, this.notfrzIdx = 0, this.parent.lockcolPositionCount)
                for (var n = 0; n < i.length; n++) this.lockColsRendered = !1, e = this.appendCells(i[n], e, 0, 0 === n, !1, n === i.length - 1, t);
            n = 0;
            for (var r = i.length; n < r; n++) this.notfrzIdx = 0, this.lockColsRendered = !0, e = this.appendCells(i[n], e, 0, 0 === n, !1, n === r - 1, t);
            return e
        }, e.prototype.appendCells = function(e, t, i, n, r, o, s) {
            var a, l = o ? "e-lastcell" : "",
                h = this.parent.getFrozenColumns();
            if (this.parent.enableColumnVirtualization && h && (a = this.parent.getContent().querySelector(".e-movablecontent").scrollLeft), e.columns) {
                this.isFirstCol = !1;
                var p = this.getCellCnt(e, 0);
                if (p) {
                    var d = this.refreshFrozenHdr(e.columns, {
                            isPartial: !1,
                            isComp: !0,
                            cnt: 0
                        }),
                        c = this.getStackedLockColsCount(e, 0);
                    (!h && (!this.parent.lockcolPositionCount || !this.lockColsRendered && c || this.lockColsRendered && p - c) || h && (!s && this.checkFrozenStackHeader(e.columns, s) && (this.parent.frozenColumns - this.frzIdx > 0 || d.isPartial) || s && (p + this.frzIdx > this.parent.frozenColumns && !d.isComp || this.checkFrozenStackHeader(e.columns, s)))) && t[i].cells.push(new is({
                        cellType: dr.StackedHeader,
                        column: e,
                        colSpan: this.getColSpan(p, s, d.cnt, c)
                    }))
                }
                if (this.parent.lockcolPositionCount && !this.lockColsRendered)
                    for (var u = 0; u < e.columns.length; u++) t = this.appendCells(e.columns[u], t, i + 1, n, 0 === u, u === e.columns.length - 1 && o, s);
                if (this.lockColsRendered) {
                    u = 0;
                    for (var g = e.columns.length; u < g; u++) {
                        var f = this.isFirstCol = e.columns[u].visible && !this.isFirstCol && 1 !== g,
                            m = u === g - 1;
                        t = this.appendCells(e.columns[u], t, i + 1, n, f, m && o, s)
                    }
                }
            } else(a && a > 0 && this.parent.contentModule.isXaxis() && 0 !== this.parent.inViewIndexes[0] && this.frzIdx > this.parent.getFrozenColumns() || !h && (!this.parent.lockcolPositionCount || e.lockColumn && !this.lockColsRendered || !e.lockColumn && this.lockColsRendered) || h && (!s && (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns || e.isFrozen) && (!this.parent.lockcolPositionCount || e.lockColumn && !this.lockColsRendered || !e.lockColumn && this.lockColsRendered) || s && this.frzIdx + this.notfrzIdx >= this.parent.frozenColumns && !e.isFrozen && (!this.parent.lockcolPositionCount || e.lockColumn && !this.lockColsRendered || !e.lockColumn && this.lockColsRendered))) && t[i].cells.push(this.generateCell(e, dr.Header, this.colDepth - i, (n ? "" : r ? "e-firstcell" : "") + l, i, this.parent.getColumnIndexByUid(e.uid))), this.parent.lockcolPositionCount ? this.frzIdx + this.notfrzIdx < this.parent.frozenColumns && (e.lockColumn && !this.lockColsRendered || !e.lockColumn && this.lockColsRendered) ? this.frzIdx++ : this.notfrzIdx++ : this.frzIdx++;
            return t
        }, e.prototype.checkFrozenStackHeader = function(e, t) {
            for (var i = !1, n = 0; n < e.length; n++) {
                var r = e[n],
                    o = this.parent.getNormalizedColumnIndex(r.uid);
                if (!r.columns) {
                    if (t && o >= this.parent.getFrozenColumns() && r.visible) {
                        i = !0;
                        break
                    }
                    if (!t && o < this.parent.getFrozenColumns() && r.visible) {
                        i = !0;
                        break
                    }
                }
            }
            return i
        }, e.prototype.getStackedLockColsCount = function(e, t) {
            if (e.columns)
                for (var i = 0; i < e.columns.length; i++) t = this.getStackedLockColsCount(e.columns[i], t);
            else e.lockColumn && t++;
            return t
        }, e.prototype.refreshFrozenHdr = function(e, t) {
            for (var i = 0; i < e.length; i++) e[i].columns ? t = this.refreshFrozenHdr(e[i].columns, t) : (e[i].isFrozen && (t.isPartial = !0, t.cnt++), t.isComp = t.isComp && (e[i].isFrozen || this.parent.getColumnIndexByField(e[i].field) < this.parent.frozenColumns));
            return t
        }, e.prototype.getColSpan = function(e, t, i, n) {
            var r = this.parent.frozenColumns;
            return this.parent.getFrozenColumns() && this.frzIdx + e > r ? t ? e = e - (r > this.frzIdx ? r - this.frzIdx : 0) - i : e -= e - (r > this.frzIdx ? r + i - this.frzIdx : i) : this.parent.lockcolPositionCount && (e = this.lockColsRendered ? e - n : n), e
        }, e.prototype.generateRow = function(e) {
            return new ts({})
        }, e.prototype.generateCell = function(e, t, i, n, r, o) {
            var s = {
                visible: e.visible,
                isDataCell: !1,
                isTemplate: !g(e.headerTemplate),
                rowID: "",
                column: e,
                cellType: t,
                rowSpan: i,
                className: n,
                index: r,
                colIndex: o
            };
            return (!s.rowSpan || s.rowSpan < 2) && delete s.rowSpan, new is(s)
        }, e.prototype.setVisible = function(e) {
            for (var t, i, n = this.parent, r = ([].slice.call(this.getRows()), n.getFrozenColumns()), o = 0, s = e.length; o < s; o++) {
                var a = e[o];
                if (i = n.getNormalizedColumnIndex(a.uid), t = a.visible ? "" : "none", r) {
                    var l = this.parent.isRowDragable() ? r + 1 : r;
                    if (i < l) S() && n.isServerRendered ? (Dt(this.getTable().querySelector("colgroup").children[i], {
                        display: t
                    }), Dt(this.getTable().querySelectorAll("th")[i], {
                        display: t
                    })) : Dt(this.getColGroup().children[i], {
                        display: t
                    });
                    else {
                        var h = n.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup"),
                            p = n.getHeaderContent().querySelector(".e-movableheader").querySelector("table");
                        Dt(h.children[i - l], {
                            display: t
                        }), S() && n.isServerRendered && Dt(p.querySelectorAll("th")[i - r], {
                            display: t
                        })
                    }
                } else Dt(this.getColGroup().children[i], {
                    display: t
                })
            }
            this.refreshUI()
        }, e.prototype.colPosRefresh = function() {
            S() && this.parent.isServerRendered && this.parent.frozenRows && this.parent.getFrozenColumns() && (this.freezeReorder = !0), this.refreshUI()
        }, e.prototype.refreshUI = function() {
            var e = this.parent.getFrozenColumns(),
                t = this.parent.enableColumnVirtualization && 0 !== e,
                i = S() && this.parent.isServerRendered && 0 !== this.parent.frozenRows && 0 !== e,
                n = this.getPanel();
            this.toggleStackClass(n);
            var r = this.freezeReorder ? this.headerPanel.querySelector(".e-movableheader").querySelector(".e-table") : this.getTable();
            if (t && (r = this.parent.contentModule.getVirtualFreezeHeader()), i && !t && (r = this.freezeReorder ? this.headerPanel.querySelector(".e-movableheader").querySelector(".e-table") : this.headerPanel.querySelector(".e-frozenheader").querySelector(".e-table")), r) {
                S() && this.parent.isServerRendered ? (r.removeChild(r.querySelector("colgroup")), r.removeChild(r.querySelector("thead"))) : (Ct(r), r.removeChild(r.firstChild), r.removeChild(r.childNodes[0]));
                var o = this.parent.createElement("colgroup"),
                    s = this.createHeaderContent();
                this.rows = s.rows, r.insertBefore(s.thead, r.firstChild), this.updateColGroup(o), r.insertBefore(this.setColGroup(o), r.firstChild), t || i || this.setTable(r), S() && this.parent.isServerRendered || this.appendContent(r), this.parent.notify("colgroup-refresh", {}), this.widthService.setWidthToColumns(), this.parent.updateDefaultCursor(), (!e || this.parent.enableColumnVirtualization && e) && this.initializeHeaderDrag();
                for (var a = [].slice.call(n.querySelectorAll("tr.e-columnheader")), l = 0, h = a; l < h.length; l++) {
                    var p = h[l],
                        d = [].slice.call(p.querySelectorAll(".e-grouptopleftcell"));
                    d.length && d[d.length - 1].classList.add("e-lastgrouptopleftcell")
                }
                e || this.parent.notify(Rr, {
                    rows: this.rows,
                    args: {
                        isFrozen: 0 !== this.parent.getFrozenColumns()
                    }
                }), this.parent.enableColumnVirtualization && Ka(r, "e-movableheader") && this.parent.notify(Rr, {
                    rows: this.rows,
                    args: {
                        isFrozen: !1,
                        isXaxis: !0
                    }
                }), this.parent.allowTextWrap && "Header" === this.parent.textWrapSettings.wrapMode && pl(a, !0)
            }
        }, e.prototype.toggleStackClass = function(e) {
            this.parent.columns.some((function(e) {
                return !g(e.columns)
            })) ? e.classList.add("e-stackedheader") : e.classList.remove("e-stackedheader")
        }, e.prototype.appendContent = function(e) {
            this.getPanel().querySelector(".e-headercontent").appendChild(e)
        }, e.prototype.getCellCnt = function(e, t) {
            if (e.columns)
                for (var i = 0, n = e.columns.length; i < n; i++) t = this.getCellCnt(e.columns[i], t);
            else e.visible && t++;
            return t
        }, e.prototype.initializeHeaderDrag = function() {
            var e = this.parent;
            (this.parent.allowReordering || this.parent.allowGrouping && this.parent.groupSettings.showDropArea) && (this.draggable = new mi(e.getHeaderContent(), {
                dragTarget: ".e-headercell",
                distance: 5,
                helper: this.helper,
                dragStart: this.dragStart,
                drag: this.drag,
                dragStop: this.dragStop,
                abort: ".e-rhandler"
            }))
        }, e.prototype.initializeHeaderDrop = function() {
            var e = this.parent;
            new bi(e.getHeaderContent(), {
                accept: ".e-dragclone",
                drop: this.drop
            })
        }, e
    }(),
    gs = function() {
        function e(e, t) {
            this.localizer = t.getService("localization"), this.formatter = t.getService("valueFormatter"), this.parent = e, this.element = this.parent.createElement("TD", {
                className: "e-rowcell",
                attrs: {
                    role: "gridcell",
                    tabindex: "-1"
                }
            }), this.rowChkBox = this.parent.createElement("input", {
                className: "e-checkselect",
                attrs: {
                    type: "checkbox"
                }
            })
        }
        return e.prototype.getGui = function() {
            return ""
        }, e.prototype.format = function(e, t, i) {
            return g(e.format) || ("number" === e.type && isNaN(parseInt(t, 10)) && (t = null), t = this.formatter.toView(t, e.getFormatter())), g(t) ? "" : t.toString()
        }, e.prototype.evaluate = function(e, t, i, n, r, o) {
            var s, a;
            if (t.column.template) {
                var l = this.parent.isReact && "string" != typeof t.column.template,
                    h = ["index"],
                    p = Dl({}, i, ((s = {}).foreignKeyData = r, s.column = t.column, s)),
                    d = this.parent.element.id + t.column.uid,
                    c = "isStringTemplate";
                if (S() && o) {
                    var g = "Batch" !== this.parent.editSettings.mode ? parseInt(n.index, 10) : null;
                    a = t.column.getColumnTemplate()(u({
                        index: n[h[0]]
                    }, p), this.parent, "template", d, this.parent[c], g), window[d] = null, "Batch" !== this.parent.editSettings.mode && Ue(d, "Template", t.column, !1)
                } else if (l) {
                    var f = {
                        index: n[h[0]]
                    };
                    t.column.getColumnTemplate()(u(f, p), this.parent, "columnTemplate", d, this.parent[c], null, e), this.parent.renderTemplates()
                } else a = t.column.getColumnTemplate()(u({
                    index: n[h[0]]
                }, p), this.parent, "template", d, this.parent[c]);
                return l || $a(e, a), this.parent.notify("template-result", {
                    template: a
                }), a = null, e.setAttribute("aria-label", e.innerText + " is template cell column header " + t.column.headerText), !1
            }
            return !0
        }, e.prototype.invokeFormatter = function(e, t, i) {
            var n, r;
            g(e.formatter) || (n = e.formatter, r = "getValue", t = n.prototype && r in n.prototype ? (new(0, e.formatter)).getValue(e, i) : "function" == typeof e.formatter ? e.formatter(e, i) : e.formatter.getValue(e, i));
            return t
        }, e.prototype.render = function(e, t, i, n, r) {
            return this.refreshCell(e, t, i, r)
        }, e.prototype.refreshTD = function(e, t, i, n) {
            var r = "Batch" === this.parent.editSettings.mode && e.classList.contains("e-editedbatchcell");
            if (this.parent.isReact) {
                e.innerHTML = "";
                var o = e.cellIndex,
                    s = e.parentElement;
                Ct(e);
                var a = this.refreshCell(t, i, n, r);
                this.cloneAttributes(a, e), s.cells.length !== o - 1 ? s.insertBefore(a, s.cells[o]) : s.appendChild(a)
            } else {
                var l = this.refreshCell(t, i, n, r);
                e.innerHTML = "", e.setAttribute("aria-label", l.getAttribute("aria-label"));
                for (var h = 0, p = [].slice.call(l.childNodes); h < p.length; h++) {
                    var d = p[h];
                    e.appendChild(d)
                }
            }
        }, e.prototype.cloneAttributes = function(e, t) {
            for (var i, n = t.attributes, r = n.length; r--;) i = n[r], e.setAttribute(i.name, i.value)
        }, e.prototype.refreshCell = function(e, t, i, n) {
            var r, o, s = this.element.cloneNode(),
                a = e.column;
            e.isForeignKey && (o = e.foreignKeyData[0] || ((r = {})[a.foreignKeyValue] = a.format ? null : "", r));
            var l = this.getGui(),
                h = e.isForeignKey ? this.getValue(a.foreignKeyValue, o, a) : this.getValue(a.field, t, a);
            if ("date" !== a.type && "datetime" !== a.type || g(h) || (h = new Date(h)), l = (h = this.format(a, h, t)).toString(), "boolean" === a.type && !a.displayAsCheckBox) {
                var p = "true" !== h && "false" !== h ? null : "true" === h ? "True" : "False";
                l = p ? this.localizer.getConstant(p) : l
            }
            var d = this.invokeFormatter(a, h, t);
            if (l = g(a.formatter) ? l : g(d) ? "" : d.toString(), s.setAttribute("aria-label", l + " column header " + e.column.headerText), this.evaluate(s, e, t, i, o, n) && "checkbox" !== a.type) this.appendHtml(s, l, a.getDomSetter ? a.getDomSetter() : "innerHTML");
            else if ("checkbox" === a.type) {
                s.classList.add("e-gridchkbox"), s.setAttribute("aria-label", "checkbox"), h = !!this.parent.selectionSettings.persistSelection && "true" === h, (u = Fr(this.parent.createElement, !1, {
                    checked: h,
                    label: " "
                })).insertBefore(this.rowChkBox.cloneNode(), u.firstChild), s.appendChild(u)
            }
            if ("Check" === this.parent.checkAllRows && this.parent.enableVirtualization && (e.isSelected = !0), this.setAttributes(s, e, i), "boolean" === a.type && a.displayAsCheckBox) {
                var c = isNaN(parseInt(h.toString(), 10)) ? "true" === h : parseInt(h.toString(), 10) > 0,
                    u = Fr(this.parent.createElement, !1, {
                        checked: c,
                        label: " "
                    });
                s.innerHTML = "", u.classList.add("e-checkbox-disabled"), s.appendChild(u), s.setAttribute("aria-label", c + " column header " + e.column.headerText)
            }
            return s
        }, e.prototype.appendHtml = function(e, t, i) {
            return void 0 === i && (i = "innerHTML"), e[i] = t, e
        }, e.prototype.setAttributes = function(e, t, i) {
            var n = t.column;
            this.buildAttributeFromCell(e, t, "checkbox" === n.type), za(e, i), za(e, t.attributes), n.customAttributes && za(e, n.customAttributes), n.textAlign && (e.style.textAlign = n.textAlign), "Clip" === n.clipMode || !n.clipMode && "Clip" === this.parent.clipMode ? e.classList.add("e-gridclip") : ("EllipsisWithTooltip" === n.clipMode || !n.clipMode && "EllipsisWithTooltip" === this.parent.clipMode) && "checkbox" !== n.type && e.classList.add("e-ellipsistooltip")
        }, e.prototype.buildAttributeFromCell = function(e, t, i) {
            var n = {},
                r = [];
            t.colSpan && (n.colSpan = t.colSpan), t.rowSpan && (n.rowSpan = t.rowSpan), t.isTemplate && r.push("e-templatecell"), t.isSelected && (r.push.apply(r, ["e-selectionbackground", "e-active"]), i && e.querySelector(".e-frame").classList.add("e-check")), g(t.index) || (n["aria-colindex"] = t.index), t.visible || r.push("e-hide"), n.class = r, za(e, n)
        }, e.prototype.getValue = function(e, t, i) {
            return i.valueAccessor(e, t, i)
        }, e
    }(),
    fs = function() {
        function e() {}
        return e.prototype.setOptions = function(e, t) {
            for (var i = Object.keys(t), n = 0; n < i.length; n++) ms(e, ys[i[n]], t[i[n]])
        }, e.prototype.setExpand = function(e, t) {
            ms(e, ys.expand, t)
        }, e.prototype.setSort = function(e, t) {
            ms(e, ys.sort, t, "boolean" == typeof t)
        }, e.prototype.setBusy = function(e, t) {
            ms(e, ys.busy, t), ms(e, ys.invalid, null, !0)
        }, e.prototype.setGrabbed = function(e, t, i) {
            ms(e, ys.grabbed, t, i)
        }, e.prototype.setDropTarget = function(e, t) {
            ms(e, ys.dropeffect, "copy", !t)
        }, e
    }();

function ms(e, t, i, n) {
    n && e ? e.removeAttribute(t) : e && e.setAttribute(t, i)
}
var ys = {
        expand: "aria-expanded",
        role: "role",
        selected: "aria-selected",
        multiselectable: "aria-multiselectable",
        sort: "aria-sort",
        busy: "aria-busy",
        invalid: "aria-invalid",
        grabbed: "aria-grabbed",
        dropeffect: "aria-dropeffect",
        haspopup: "aria-haspopup",
        level: "aria-level",
        colcount: "aria-colcount",
        rowcount: "aria-rowcount"
    },
    vs = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    bs = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TH", {
                className: "e-headercell",
                attrs: {
                    role: "columnheader",
                    tabindex: "-1"
                }
            }), t.ariaService = new fs, t.hTxtEle = t.parent.createElement("span", {
                className: "e-headertext"
            }), t.sortEle = t.parent.createElement("div", {
                className: "e-sortfilterdiv e-icons"
            }), t.gui = t.parent.createElement("div"), t.chkAllBox = t.parent.createElement("input", {
                className: "e-checkselectall",
                attrs: {
                    type: "checkbox"
                }
            }), t
        }
        return vs(t, e), t.prototype.getGui = function() {
            return this.gui.cloneNode()
        }, t.prototype.render = function(e, t, i) {
            var n = this.element.cloneNode(),
                r = this.parent.createElement("div", {
                    className: "e-filtermenudiv e-icons e-icon-filter"
                });
            return this.prepareHeader(e, n, r)
        }, t.prototype.refresh = function(e, t) {
            this.clean(t);
            var i = this.parent.createElement("div", {
                className: "e-filtermenudiv e-icons e-icon-filter"
            });
            return this.prepareHeader(e, t, i)
        }, t.prototype.clean = function(e) {
            e.innerHTML = ""
        }, t.prototype.prepareHeader = function(e, t, i) {
            var n, r, o = e.column,
                s = {},
                a = this.getGui();
            if (St(a, {
                    "e-mappinguid": o.uid,
                    class: "e-headercelldiv"
                }), g(o.headerValueAccessor) || (n = this.getValue(o.headerText, o)), "checkbox" !== o.type) {
                var l = o.headerText;
                g(n) || (l = n);
                var h = this.hTxtEle.cloneNode();
                h[o.getDomSetter()] = l, a.appendChild(h)
            } else {
                o.editType = "booleanedit";
                var p = Fr(this.parent.createElement, !1, {
                    checked: !1,
                    label: " "
                });
                p.insertBefore(this.chkAllBox.cloneNode(), p.firstChild), a.appendChild(p), a.classList.add("e-headerchkcelldiv")
            }
            if (this.buildAttributeFromCell(t, e), this.appendHtml(t, a), t.appendChild(this.sortEle.cloneNode()), this.parent.allowFiltering && "FilterBar" !== this.parent.filterSettings.type && o.allowFiltering && !g(o.field) && (!this.parent.showColumnMenu || !o.showColumnMenu)) {
                St(i, {
                    "e-mappinguid": "e-flmenu-" + o.uid
                }), t.classList.add("e-fltr-icon");
                var d = [];
                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== d.length)
                    for (var c = 0; c < this.parent.columns.length; c++)
                        for (var f = 0; f < this.parent.filterSettings.columns.length; f++)
                            if (this.parent.filterSettings.columns[f].field === o.field) {
                                i.classList.add("e-filtered"), d.push(o.field);
                                break
                            } t.appendChild(i.cloneNode())
            }
            e.className && t.classList.add(e.className), o.customAttributes && za(t, o.customAttributes), o.allowSorting && (s.sort = "none"), o.allowGrouping && (s.grabbed = !1), t = this.extendPrepareHeader(o, t);
            var m = this.parent,
                y = m.getColumnIndexByField(o.field);
            if (!g(o.headerTemplate)) {
                var v = m.element.id + o.uid + "headerTemplate",
                    b = "isStringTemplate",
                    w = S() ? o.toJSON() : o;
                if (this.parent.isReact && "string" != typeof o.headerTemplate) {
                    var C = {
                        index: y
                    };
                    t.firstElementChild.innerHTML = "", o.getHeaderTemplate()(u(C, w), m, "headerTemplate", v, this.parent[b], null, t.firstElementChild), this.parent.renderTemplates()
                } else r = o.getHeaderTemplate()(u({
                    index: y
                }, w), m, "headerTemplate", v, this.parent[b]), t.firstElementChild.innerHTML = "", $a(t.firstElementChild, r)
            }
            if (this.ariaService.setOptions(t, s), !g(o.headerTextAlign) || !g(o.textAlign)) {
                var x = o.headerTextAlign || o.textAlign;
                a.style.textAlign = x, "Right" === x || "Left" === x ? t.classList.add("Right" === x ? "e-rightalign" : "e-leftalign") : "Center" === x && t.classList.add("e-centeralign")
            }
            return "Clip" === o.clipMode || !o.clipMode && "Clip" === this.parent.clipMode ? t.classList.add("e-gridclip") : ("EllipsisWithTooltip" === o.clipMode || !o.clipMode && "EllipsisWithTooltip" === this.parent.clipMode) && "checkbox" !== o.type && t.classList.add("e-ellipsistooltip"), t.setAttribute("aria-rowspan", (g(e.rowSpan) ? 1 : e.rowSpan).toString()), t.setAttribute("aria-colspan", "1"), this.parent.trigger("headerCellInfo", {
                cell: e,
                node: t
            }), t
        }, t.prototype.getValue = function(e, t) {
            return t.headerValueAccessor(e, t)
        }, t.prototype.extendPrepareHeader = function(e, t) {
            if (this.parent.showColumnMenu && e.showColumnMenu && !g(e.field)) {
                var i = this.parent.createElement("div", {
                        className: "e-icons e-columnmenu"
                    }),
                    n = [];
                if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== n.length)
                    for (var r = 0; r < this.parent.columns.length; r++)
                        for (var o = 0; o < this.parent.filterSettings.columns.length; o++)
                            if (this.parent.filterSettings.columns[o].field === e.field) {
                                i.classList.add("e-filtered"), n.push(e.field);
                                break
                            } t.classList.add("e-fltr-icon"), t.appendChild(i)
            }
            if (this.parent.allowResizing) {
                var s = this.parent.createElement("div");
                s.className = e.allowResizing ? "e-rhandler e-rcursor" : "e-rsuppress", t.appendChild(s)
            }
            return t
        }, t.prototype.appendHtml = function(e, t) {
            return e.appendChild(t), e
        }, t
    }(gs),
    ws = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Cs = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TH", {
                className: "e-headercell e-stackedheadercell",
                attrs: {
                    role: "columnheader",
                    tabindex: "-1"
                }
            }), t
        }
        return ws(t, e), t.prototype.render = function(e, t, i) {
            var n = this.element.cloneNode(),
                r = this.parent.createElement("div", {
                    className: "e-stackedheadercelldiv",
                    attrs: {
                        "e-mappinguid": e.column.uid
                    }
                }),
                o = e.column;
            if (n.appendChild(r), g(o.headerTemplate) ? this.appendHtml(r, o.headerText, o.getDomSetter()) : $a(r, o.getHeaderTemplate()(o, this.parent, "headerTemplate")), e.column.toolTip && n.setAttribute("title", e.column.toolTip), "Clip" === o.clipMode || !o.clipMode && "Clip" === this.parent.clipMode ? n.classList.add("e-gridclip") : ("EllipsisWithTooltip" === o.clipMode || !o.clipMode && "EllipsisWithTooltip" === this.parent.clipMode) && n.classList.add("e-ellipsistooltip"), g(e.column.textAlign) || (r.style.textAlign = e.column.textAlign), e.column.customAttributes && za(n, e.column.customAttributes), n.setAttribute("colspan", e.colSpan.toString()), n.setAttribute("aria-colspan", e.colSpan.toString()), n.setAttribute("aria-rowspan", "1"), this.parent.allowResizing) {
                var s = this.parent.createElement("div");
                s.className = e.column.allowResizing ? "e-rhandler e-rcursor" : "e-rsuppress", n.appendChild(s)
            }
            return this.parent.trigger("headerCellInfo", {
                cell: e,
                node: n
            }), n
        }, t
    }(gs),
    Ss = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    xs = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TD", {
                className: "e-indentcell"
            }), t
        }
        return Ss(t, e), t.prototype.render = function(e, t) {
            var i = this.element.cloneNode();
            return za(i, e.attributes), i
        }, t
    }(gs),
    ks = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Ts = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TD", {
                className: "e-groupcaption",
                attrs: {
                    id: t.parent.element.id + "captioncell",
                    role: "gridcell",
                    tabindex: "-1"
                }
            }), t
        }
        return ks(t, e), t.prototype.render = function(e, t) {
            var i, n, r = this.element.cloneNode(),
                o = this.parent;
            t.headerText = e.column.headerText, e.isForeignKey && (n = this.format(e.column, e.column.valueAccessor("foreignKey", t, e.column)));
            var s = e.isForeignKey ? n : e.column.enableGroupByFormat ? t.key : this.format(e.column, e.column.valueAccessor("key", t, e.column));
            if (g(o.groupSettings.captionTemplate)) o.groupSettings.enableLazyLoading ? r.innerHTML = e.column.headerText + ": " + s : r.innerHTML = e.column.headerText + ": " + s + " - " + t.count + " " + (t.count < 2 ? this.localizer.getConstant("Item") : this.localizer.getConstant("Items"));
            else {
                var a = this.parent.isReact && "string" != typeof o.groupSettings.captionTemplate;
                if (S()) {
                    var l = o.element.id + "captionTemplate";
                    i = ja(o.groupSettings.captionTemplate)(t, null, null, l)
                } else if (a) {
                    l = o.element.id + "captionTemplate";
                    ja(o.groupSettings.captionTemplate)(t, this.parent, "captionTemplate", l, null, null, r), this.parent.renderTemplates()
                } else i = ja(o.groupSettings.captionTemplate)(t);
                a || $a(r, i)
            }
            return r.setAttribute("colspan", e.colSpan.toString()), r.setAttribute("aria-label", r.innerHTML + " is groupcaption cell"), r.setAttribute("title", r.innerHTML), r
        }, t
    }(gs),
    Ds = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TD", {
                className: "e-groupcaption"
            }), t
        }
        return ks(t, e), t.prototype.render = function(e, t) {
            var i = this.element.cloneNode();
            return i.innerHTML = "&nbsp;", i.setAttribute("colspan", e.colSpan.toString()), i
        }, t
    }(gs),
    Es = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Rs = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Es(t, e), t.prototype.render = function(e, t, i, n) {
            var r = this.element.cloneNode();
            return r.className = n ? "e-recordplusexpand" : "e-recordpluscollapse", r.setAttribute("ej-mappingname", t.field), r.setAttribute("ej-mappingvalue", t.key), r.setAttribute("aria-expanded", n ? "true" : "false"), r.setAttribute("tabindex", "-1"), r.appendChild(this.parent.createElement("div", {
                className: n ? "e-icons e-gdiagonaldown e-icon-gdownarrow" : "e-icons e-gnextforward e-icon-grightarrow"
            })), r
        }, t
    }(xs),
    Ps = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Is = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TH", {
                className: "e-grouptopleftcell"
            }), t
        }
        return Ps(t, e), t.prototype.render = function(e, t) {
            var i = this.element.cloneNode();
            return i.appendChild(this.parent.createElement("div", {
                className: "e-headercelldiv e-emptycell",
                innerHTML: ""
            })), i
        }, t
    }(gs),
    Ms = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Ls = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TH", {
                className: "e-detailheadercell"
            }), t
        }
        return Ms(t, e), t.prototype.render = function(e, t) {
            var i = this.element.cloneNode();
            return i.appendChild(this.parent.createElement("div", {
                className: "e-emptycell"
            })), i
        }, t
    }(gs),
    Os = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    As = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TD", {
                className: "e-detailrowcollapse",
                attrs: {
                    "aria-expanded": "false",
                    role: "gridcell",
                    tabindex: "-1"
                }
            }), t
        }
        return Os(t, e), t.prototype.render = function(e, t, i) {
            var n = this.element.cloneNode();
            return i && !g(i.class) ? (n.className = "", n.className = i.class, n.appendChild(this.parent.createElement("div", {
                className: "e-icons e-dtdiagonaldown e-icon-gdownarrow"
            }))) : n.appendChild(this.parent.createElement("div", {
                className: "e-icons e-dtdiagonalright e-icon-grightarrow"
            })), n
        }, t
    }(gs),
    Bs = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Fs = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TD", {
                className: "e-rowdragdrop",
                attrs: {
                    role: "gridcell",
                    tabindex: "-1"
                }
            }), t
        }
        return Bs(t, e), t.prototype.render = function(e, t) {
            var i = this.element.cloneNode();
            return i.appendChild(this.parent.createElement("div", {
                className: "e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"
            })), e.isSelected && (i.classList.add("e-selectionbackground"), i.classList.add("e-active")), i
        }, t
    }(gs),
    Ns = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Hs = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.element = t.parent.createElement("TH", {
                className: "e-rowdragheader"
            }), t
        }
        return Ns(t, e), t.prototype.render = function(e, t) {
            var i = this.element.cloneNode();
            return i.appendChild(ct("div", {
                className: "e-emptycell"
            })), i
        }, t
    }(gs),
    Vs = function() {
        function e(e, t) {
            this.emptyGrid = !1, this.counter = 0, this.parent = e, this.locator = t, this.data = new es(e, t), this.l10n = t.getService("localization"), this.ariaService = this.locator.getService("ariaService"), this.renderer = this.locator.getService("rendererFactory"), this.addEventListener()
        }
        return e.prototype.render = function() {
            var e = this.parent;
            this.headerRenderer = this.renderer.getRenderer(cr.Header), this.contentRenderer = this.renderer.getRenderer(cr.Content), this.headerRenderer.renderPanel(), this.contentRenderer.renderPanel(), e.getColumns().length && (this.isLayoutRendered = !0, this.headerRenderer.renderTable(), this.contentRenderer.renderTable(), this.emptyRow(!1)), this.parent.scrollModule.setWidth(), this.parent.scrollModule.setHeight(), "auto" !== this.parent.height && this.parent.scrollModule.setPadding(), S() && this.parent.isServerRendered || this.refreshDataManager()
        }, e.prototype.refresh = function(e) {
            var t = this;
            void 0 === e && (e = {
                requestType: "refresh"
            });
            var i = this.parent;
            if (i.notify(e.requestType + "-begin", e), S() && this.resetTemplates(), S() && i.isServerRendered) {
                if (i.bulkChanges.dataSource && delete i.bulkChanges.dataSource, i.notify("blazor-action-begin", e), "filtering" === e.requestType) {
                    e.columns = null
                }
                if ("sorting" === e.requestType) {
                    e.target = null
                }
                "Batch" !== i.editSettings.mode || i.isEdit || i.notify("closebatch", {})
            }
            var n = this.parent.preventUpdate;
            i.trigger(wr, e, (function(r) {
                if (void 0 === r && (r = {
                        requestType: "refresh"
                    }), "delete" === r.requestType && S() && !i.isJsComponent) {
                    if (g(i.commandDelIndex)) r.data = i.getSelectedRecords();
                    else {
                        var o = r.data;
                        r.data = {}, r.data[0] = o
                    }
                }
                if (r.cancel) i.notify("cancel-Begin", r);
                else {
                    if (S() && "Normal" === i.editSettings.mode && i.isEdit && "infiniteScroll" !== e.requestType && i.notify("closeinline", {}), "delete" === r.requestType && i.allowPaging) {
                        var s = r.data.length,
                            a = i.pageSettings.totalRecordsCount - s;
                        i.currentViewData.length - s || !a || (i.prevPageMoving = !0, i.setProperties({
                            pageSettings: {
                                totalRecordsCount: a,
                                currentPage: Math.ceil(a / i.pageSettings.pageSize)
                            }
                        }, !0), i.pagerModule.pagerObj.totalRecordsCount = a)
                    }
                    if (S() && t.parent.isServerRendered) {
                        if (n) {
                            return void(i.bulkChanges = {})
                        }
                        "refresh" === e.requestType && t.parent.notify("updateaction", r), "virtualscroll" !== r.requestType && t.parent.showSpinner(), "delete" === r.requestType || "save" === r.requestType ? (t.parent.notify("add-delete-Action", r), t.parent.notify("add-delete-success", r)) : (t.parent.allowServerDataBinding = !0, t.parent.serverDataBind(), t.parent.allowServerDataBinding = !1)
                    } else "reorder" === r.requestType && t.parent.dataSource && "result" in t.parent.dataSource || ("paging" === r.requestType || "columnstate" === r.requestType || "reorder" === r.requestType) && t.parent.groupSettings.enableLazyLoading && t.parent.groupSettings.columns.length && t.parent.contentModule.getGroupCache()[t.parent.pageSettings.currentPage] ? t.contentRenderer.refreshContentRows(r) : t.refreshDataManager(r)
                }
            }))
        }, e.prototype.resetTemplates = function() {
            var e = this.parent,
                t = e.getColumns();
            if (e.detailTemplate) {
                var i = e.element.id + "detailTemplate";
                We[i] = [], Ke(i)
            }
            e.groupSettings.captionTemplate && Ke(e.element.id + "captionTemplate"), e.rowTemplate && Ke(e.element.id + "rowTemplate"), e.toolbarTemplate && Ke(e.element.id + "toolbarTemplate"), e.pageSettings.template && Ke(e.element.id + "_template");
            for (var n = 0; n < t.length; n++) t[n].template && (We[e.element.id + t[n].uid] = [], Ke(e.element.id + t[n].uid)), t[n].headerTemplate && Ke(e.element.id + t[n].uid + "headerTemplate"), t[n].filterTemplate && Ke(e.element.id + t[n].uid + "filterTemplate");
            for (var r = 0; r < e.aggregates.length; r++)
                for (var o = 0; o < e.aggregates[r].columns.length; o++) {
                    if (e.aggregates[r].columns[o].footerTemplate) Ke(e.element.id + e.aggregates[r].columns[o].guid + "footerTemplate");
                    if (e.aggregates[r].columns[o].groupFooterTemplate) Ke(e.element.id + e.aggregates[r].columns[o].guid + "groupFooterTemplate");
                    if (e.aggregates[r].columns[o].groupCaptionTemplate) Ke(e.element.id + e.aggregates[r].columns[o].guid + "groupCaptionTemplate")
                }
        }, e.prototype.refreshComplete = function(e) {
            S() && !this.parent.isJsComponent && (e.rows = null), this.parent.trigger("actionComplete", e)
        }, e.prototype.refreshDataManager = function(e) {
            var t, i = this;
            void 0 === e && (e = {}), "virtualscroll" !== e.requestType && this.parent.showSpinner(), this.parent.notify("reset-infinite-blocks", e), this.emptyGrid = !1;
            var n = this.isNeedForeignAction();
            if (this.ariaService.setBusy(this.parent.getContent().querySelector(".e-content"), !0), n) {
                var r = new vn;
                t = this.getFData(r, e)
            }
            if (t = t ? t.then((function(t) {
                    var n = i.data.generateQuery().requiresCount();
                    if (i.emptyGrid) {
                        var r = new vn;
                        return r.resolve({
                            result: [],
                            count: 0
                        }), r.promise
                    }
                    return i.data.getData(e, n)
                })) : this.data.getData(e, this.data.generateQuery().requiresCount()), this.parent.getForeignKeyColumns().length && (!n || this.parent.searchSettings.key.length)) {
                var o = new vn;
                t = t.then((function(n) {
                    return i.parent.notify("getForeignKeyData", {
                        dataManager: t,
                        result: n,
                        promise: o,
                        action: e
                    }), o.promise
                }))
            }
            this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length && (t = t.then((function(e) {
                return i.validateGroupRecords(e)
            }))), t.then((function(t) {
                return i.dataManagerSuccess(t, e)
            })).catch((function(t) {
                return i.dataManagerFailure(t, e)
            }))
        }, e.prototype.getFData = function(e, t) {
            return this.parent.notify("getForeignKeyData", {
                isComplex: !0,
                promise: e,
                action: t
            }), e.promise
        }, e.prototype.isNeedForeignAction = function() {
            var e = this.parent;
            return !!(e.allowFiltering && e.filterSettings.columns.length || e.searchSettings.key.length) && this.foreignKey(this.parent.getForeignKeyColumns())
        }, e.prototype.foreignKey = function(e) {
            var t = this;
            return e.some((function(e) {
                return !(!t.parent.filterSettings.columns.some((function(t) {
                    return e.uid === t.uid
                })) && !t.parent.searchSettings.key.length)
            }))
        }, e.prototype.sendBulkRequest = function(e) {
            var t = this;
            e.requestType = "batchsave";
            var i = this.data.saveChanges(e.changes, this.parent.getPrimaryKeyFieldNames()[0], e.original);
            if (S() && !this.parent.isJsComponent) i.then((function(i) {
                t.parent.notify("editsuccess", e)
            })).catch((function(e) {
                g(e.error) || g(e.error.message) || (e.error = e.error.message), t.parent.trigger("actionFailure", e)
            }));
            else {
                var n = this.data.generateQuery().requiresCount();
                if (this.data.dataManager.dataSource.offline) return void this.refreshDataManager({
                    requestType: "batchsave"
                });
                i.then((function(i) {
                    t.data.getData(e, n).then((function(i) {
                        return t.dmSuccess(i, e)
                    })).catch((function(i) {
                        return t.dmFailure(i, e)
                    }))
                })).catch((function(i) {
                    return t.dmFailure(i, e)
                }))
            }
        }, e.prototype.dmSuccess = function(e, t) {
            this.dataManagerSuccess(e, t)
        }, e.prototype.dmFailure = function(e, t) {
            this.dataManagerFailure(e, t)
        }, e.prototype.renderEmptyRow = function() {
            this.emptyRow(!0)
        }, e.prototype.emptyRow = function(e) {
            var t, i = this.parent,
                n = this.contentRenderer.getTable().querySelector("tbody");
            g(n) || Ct(n), n = this.parent.createElement("tbody");
            var r = 0;
            (i.detailTemplate || i.childGrid) && ++r, (t = this.parent.createElement("tr", {
                className: "e-emptyrow"
            })).appendChild(this.parent.createElement("td", {
                innerHTML: this.l10n.getConstant("EmptyRecord"),
                attrs: {
                    colspan: (i.getColumns().length + r).toString()
                }
            })), n.appendChild(t), this.contentRenderer.renderEmpty(n), e && (this.parent.trigger(Cr, {}), this.parent.notify(Tr, {
                rows: [new ts({
                    isDataRow: !0,
                    cells: [new is({
                        isDataCell: !0,
                        visible: !0
                    })]
                })]
            }))
        }, e.prototype.dynamicColumnChange = function() {
            this.parent.getCurrentViewRecords().length && this.updateColumnType(this.parent.getCurrentViewRecords()[0])
        }, e.prototype.updateColumnType = function(e) {
            for (var t, i = this.parent.getColumns(), n = e && e.items ? e.items[0] : e, r = this.locator.getService("valueFormatter"), o = 0, s = i.length; o < s; o++) {
                t = xl(i[o].field || "", n), g(i[o].customFormat) || (i[o].format = i[o].customFormat), g(i[o].validationRules) || g(i[o].validationRules.equalTo) || (i[o].validationRules.equalTo[0] = this.parent.element.id + i[o].validationRules.equalTo[0]), i[o].isForeignColumn() && i[o].columnData && (t = xl(i[o].foreignKeyValue || "", i[o].columnData[0])), g(t) ? i[o].type = i[o].type || (S() && this.parent.isServerRendered ? "none" : null) : (this.isColTypeDef = !0, (!i[o].type || S() && this.parent.isServerRendered && "none" === i[o].type) && (i[o].type = t.getDay ? t.getHours() > 0 || t.getMinutes() > 0 || t.getSeconds() > 0 || t.getMilliseconds() > 0 ? "datetime" : "date" : typeof t));
                var a = new Cn;
                if (i[o].format && (i[o].format.skeleton || i[o].format.format) && (i[o].setFormatter(a.getFormatFunction(u({}, i[o].format))), i[o].setParser(a.getParserFunction(i[o].format))), "string" == typeof i[o].format) {
                    var l = this.parent.isServerRendered || this.parent.printModule.isPrintGrid();
                    dl(this.locator, i[o], l)
                } else i[o].format || "number" !== i[o].type || i[o].setParser(r.getParserFunction({
                    format: "n2"
                }))
            }
        }, e.prototype.dataManagerSuccess = function(e, t) {
            var i = this,
                n = this.parent;
            this.contentRenderer = this.renderer.getRenderer(cr.Content), this.headerRenderer = this.renderer.getRenderer(cr.Header), e.actionArgs = t;
            var r = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && ("delete" === t.requestType || "save" === t.requestType && "add" === this.parent.infiniteScrollModule.requestType);
            this.parent.getDataModule().isQueryInvokedFromData = !1, n.trigger("beforeDataBound", e, (function(o) {
                if (!o.cancel) {
                    o.result = g(o.result) ? [] : o.result;
                    var s = Object.keys(o.result).length;
                    if (!i.parent.isDestroyed)
                        if (n.getColumns().length || s || n.columns.length && n.columns[0] instanceof xn)
                            if (!i.isInfiniteEnd(t) || s) {
                                if (i.parent.isEdit = !1, i.parent.notify("edit-reset", {}), i.parent.notify("tooltip-destroy", {}), i.contentRenderer.prevCurrentView = i.parent.currentViewData.slice(), n.currentViewData = o.result, S() && "FilterBar" === n.filterSettings.type && (g(n.currentViewData) || !g(n.currentViewData) && !n.currentViewData.length))
                                    for (var a = n.getColumns(), l = 0; l < a.length; l++)
                                        if (a[l].filterTemplate) {
                                            var h = n.element.id + a[l].uid + "filterTemplate";
                                            Ke(h);
                                            for (var p = a[l].field, d = n.filterSettings.columns, c = 0; c < d.length; c++) p === d[c].field && (We[h][0][p] = d[c].value);
                                            Ue(h, "FilterTemplate", a[l], !1)
                                        } if (!s && o.count && n.allowPaging && t && "delete" !== t.requestType) return !i.parent.groupSettings.enableLazyLoading || "grouping" !== t.requestType && "ungrouping" !== t.requestType || i.parent.notify("grouping-complete", t), n.prevPageMoving = !0, n.pageSettings.totalRecordsCount = o.count, "paging" !== t.requestType && (n.pageSettings.currentPage = Math.ceil(o.count / n.pageSettings.pageSize)), void n.dataBind();
                                if ((n.getColumns().length || !s) && i.isLayoutRendered || Sl(n) || i.updatesOnInitialRender(o), !i.isColTypeDef && n.getCurrentViewRecords() && (i.data.dataManager.dataSource.offline && n.dataSource.length ? i.updateColumnType(n.dataSource[0]) : i.updateColumnType(n.getCurrentViewRecords()[0])), i.parent.isInitialLoad || !i.parent.groupSettings.disablePageWiseAggregates || i.parent.groupSettings.columns.length || (o.result = i.parent.dataSource instanceof Array ? i.parent.dataSource : i.parent.currentViewData), i.parent.notify("data-ready", u({
                                        count: o.count,
                                        result: o.result,
                                        aggregates: o.aggregates
                                    }, t)), (n.groupSettings.columns.length || t && "ungrouping" === t.requestType) && t && "filtering" !== t.requestType && i.headerRenderer.refreshUI(), s) {
                                    if (Sl(n)) {
                                        t.scrollTop = {
                                            top: i.contentRenderer.content.scrollTop
                                        }
                                    }
                                    r ? i.parent.notify("infinite-edit-handler", {
                                        e: t,
                                        result: e.result,
                                        count: e.count,
                                        agg: e.aggregates
                                    }) : i.parent.enableImmutableMode ? i.contentRenderer.immutableModeRendering(t) : i.contentRenderer.refreshContentRows(t)
                                } else {
                                    if (!n.getColumns().length) return n.element.innerHTML = "", void alert(i.l10n.getConstant("EmptyDataSourceError"));
                                    if (i.contentRenderer.setRowElements([]), i.contentRenderer.setRowObjects([]), i.ariaService.setBusy(i.parent.getContent().querySelector(".e-content"), !1), i.renderEmptyRow(), t) {
                                        var f = (t.requestType || "").toLowerCase() + "-complete";
                                        i.parent.notify(f, t), "batchsave" === t.requestType && (t.cancel = !1, t.rows = [], t.isFrozen = 0 !== i.parent.getFrozenColumns() && !t.isFrozen, i.parent.trigger("actionComplete", t))
                                    }
                                    i.parent.hideSpinner()
                                }
                                i.parent.notify(Mr, {}), i.setRowCount(i.parent.getCurrentViewRecords().length)
                            } else i.parent.notify("infinite-edit-handler", {
                                e: t,
                                result: e.result,
                                count: e.count,
                                agg: e.aggregates
                            });
                    else n.hideSpinner()
                }
            }))
        }, e.prototype.dataManagerFailure = function(e, t) {
            this.ariaService.setOptions(this.parent.getContent().querySelector(".e-content"), {
                busy: !1,
                invalid: !0
            }), this.setRowCount(1), this.parent.trigger("actionFailure", {
                error: e
            }), this.parent.hideSpinner(), "save" !== t.requestType && "delete" !== t.requestType && "bulk-save" !== t.name && (this.parent.currentViewData = [], this.renderEmptyRow(), this.parent.log("actionfailure", {
                error: e
            }))
        }, e.prototype.setRowCount = function(e) {
            this.parent;
            this.ariaService.setOptions(this.parent.getHeaderTable(), {
                rowcount: e ? e.toString() : "1"
            })
        }, e.prototype.isInfiniteEnd = function(e) {
            return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && "delete" === e.requestType
        }, e.prototype.updatesOnInitialRender = function(e) {
            this.isLayoutRendered = !0, this.parent.columns.length < 1 && this.buildColumns(e.result[0]), _a(this.parent.columns), this.headerRenderer.renderTable(), this.contentRenderer.renderTable(), this.parent.isAutoGen = !0, this.parent.notify(Lr, {})
        }, e.prototype.iterateComplexColumns = function(e, t, i) {
            for (var n = Object.keys(e), r = 0; r < n.length; r++) {
                ("object" != typeof e[n[r]] || !e[n[r]] || e[n[r]] instanceof Date ? [] : Object.keys(e[n[r]])).length ? this.iterateComplexColumns(e[n[r]], t + (n[r] + "."), i) : (i[this.counter] = t + n[r], this.counter++)
            }
        }, e.prototype.buildColumns = function(e) {
            var t = [],
                i = {};
            this.iterateComplexColumns(e, "", i);
            for (var n = Object.keys(i).filter((function(e) {
                    return "BlazId" !== i[e]
                })).map((function(e) {
                    return i[e]
                })), r = 0, o = n.length; r < o; r++) t[r] = {
                field: n[r]
            }, this.parent.enableColumnVirtualization && (t[r].width = g(t[r].width) ? 200 : t[r].width);
            this.parent.setProperties({
                columns: t
            }, !0)
        }, e.prototype.instantiateRenderer = function() {
            this.renderer.addRenderer(cr.Header, new us(this.parent, this.locator)), this.renderer.addRenderer(cr.Content, new cs(this.parent, this.locator));
            var e = this.locator.getService("cellRendererFactory");
            e.addCellRenderer(dr.Header, new bs(this.parent, this.locator)), e.addCellRenderer(dr.Data, new gs(this.parent, this.locator)), e.addCellRenderer(dr.StackedHeader, new Cs(this.parent, this.locator)), e.addCellRenderer(dr.Indent, new xs(this.parent, this.locator)), e.addCellRenderer(dr.GroupCaption, new Ts(this.parent, this.locator)), e.addCellRenderer(dr.GroupCaptionEmpty, new Ds(this.parent, this.locator)), e.addCellRenderer(dr.Expand, new Rs(this.parent, this.locator)), e.addCellRenderer(dr.HeaderIndent, new Is(this.parent, this.locator)), e.addCellRenderer(dr.StackedHeader, new Cs(this.parent, this.locator)), e.addCellRenderer(dr.DetailHeader, new Ls(this.parent, this.locator)), e.addCellRenderer(dr.RowDragHIcon, new Hs(this.parent, this.locator)), e.addCellRenderer(dr.DetailExpand, new As(this.parent, this.locator)), e.addCellRenderer(dr.DetailFooterIntent, new xs(this.parent, this.locator)), e.addCellRenderer(dr.RowDragIcon, new Fs(this.parent, this.locator))
        }, e.prototype.addEventListener = function() {
            var e = this;
            this.parent.isDestroyed || (this.parent.on("initial-load", this.instantiateRenderer, this), this.parent.on("refreshdataSource", this.dataManagerSuccess, this), this.parent.on(Er, this.refresh, this), this.parent.on("refresh-complete", this.refreshComplete, this), this.parent.on("bulk-save", this.sendBulkRequest, this), this.parent.on("showEmptyGrid", (function() {
                e.emptyGrid = !0
            }), this), this.parent.on(Lr, this.dynamicColumnChange, this))
        }, e.prototype.validateGroupRecords = function(e) {
            var t = this,
                i = e.result.length - 1;
            if (i < 0) return Promise.resolve(e);
            var n = e.result[0],
                r = e.result[i],
                o = [],
                s = function(e) {
                    for (var i = [n, r], s = 0; s < i.length; s++) o.push(new sn("field", "==", i[s].field).and(t.getPredicate("key", "equal", i[s].key)));
                    e.where(sn.or(o))
                },
                a = new on;
            s(a);
            var l = new yn(e.result).executeLocal(a),
                h = this.data.generateQuery(!0),
                p = [];
            if (this.data.isRemote() || S()) {
                for (var d = [n, r], c = 0; c < d.length; c++) p.push(this.getPredicate(d[c].field, "equal", d[c].key));
                h.where(sn.or(p))
            } else s(h);
            var u = new vn;
            return this.data.getData({}, h).then((function(i) {
                t.updateGroupInfo(l, i.result), u.resolve(e)
            })).catch((function(e) {
                return u.reject(e)
            })), u.promise
        }, e.prototype.getPredicate = function(e, t, i) {
            return i instanceof Date ? Cl({
                field: e,
                operator: t,
                value: i
            }) : new sn(e, t, i)
        }, e.prototype.updateGroupInfo = function(e, t) {
            for (var i = new yn(t), n = e, r = 0; r < n.length; r++) {
                var o = i.executeLocal((new on).where(new sn("field", "==", n[r].field).and(this.getPredicate("key", "equal", n[r].key))))[0];
                n[r].count = o.count;
                var s = n[r].items,
                    a = o.items;
                s.GroupGuid && (n[r].items = this.updateGroupInfo(n[r].items, o.items));
                for (var l = this.parent.aggregates, h = 0; h < l.length; h++)
                    for (var p = l[h], d = 0; d < p.columns.length; d++)
                        for (var c = p.columns[d].type instanceof Array ? p.columns[d].type : [p.columns[d].type], u = 0; u < c.length; u++) {
                            var g = p.columns[d].field + " - " + c[u].toLowerCase(),
                                f = s.level ? a.records : o.items,
                                m = this.parent;
                            if ("Custom" === c[u]) {
                                var y = s.level ? a : o;
                                n[r].aggregates[g] = p.columns[d].customAggregate ? p.columns[d].customAggregate.call(m, y, p.columns[d]) : ""
                            } else n[r].aggregates[g] = wn.aggregates[c[u].toLowerCase()](f, p.columns[d].field)
                        }
            }
            return e
        }, e
    }(),
    js = function() {
        function e() {
            this.cellRenderMap = {}
        }
        return e.prototype.addCellRenderer = function(e, t) {
            e = "string" == typeof e ? e : d(dr, e), g(this.cellRenderMap[e]) && (this.cellRenderMap[e] = t)
        }, e.prototype.getCellRenderer = function(e) {
            if (e = "string" == typeof e ? e : d(dr, e), g(this.cellRenderMap[e])) throw "The cellRenderer " + e + " is not found";
            return this.cellRenderMap[e]
        }, e
    }(),
    zs = function() {
        function e() {
            this.services = {}
        }
        return e.prototype.register = function(e, t) {
            g(this.services[e]) && (this.services[e] = t)
        }, e.prototype.getService = function(e) {
            if (g(this.services[e])) throw "The service " + e + " is not registered";
            return this.services[e]
        }, e
    }(),
    qs = function() {
        function e() {
            this.rendererMap = {}
        }
        return e.prototype.addRenderer = function(e, t) {
            var i = d(cr, e);
            g(this.rendererMap[i]) && (this.rendererMap[i] = t)
        }, e.prototype.getRenderer = function(e) {
            var t = d(cr, e);
            if (g(this.rendererMap[t])) throw "The renderer " + t + " is not found";
            return this.rendererMap[t]
        }, e
    }(),
    Ws = function() {
        function e(e) {
            this.parent = e
        }
        return e.prototype.setWidthToColumns = function() {
            var e, t = 0,
                i = this.parent.getColumnIndexesInView(),
                n = !0;
            if (this.parent.allowGrouping)
                for (var r = this.parent.groupSettings.columns.length; t < r; t++) this.parent.enableColumnVirtualization && -1 === i.indexOf(t) ? n = !1 : this.setColumnWidth(new xn({
                    width: "30px"
                }), t);
            (this.parent.detailTemplate || this.parent.childGrid) && (this.setColumnWidth(new xn({
                width: "30px"
            }), t), t++), this.parent.isRowDragable() && (this.setColumnWidth(new xn({
                width: "30px"
            }), t), t++);
            for (var o = this.parent.getColumns(), s = 0; s < o.length; s++) this.setColumnWidth(o[s], n && this.parent.enableColumnVirtualization ? void 0 : s + t);
            e = this.getTableWidth(this.parent.getColumns()), "auto" !== this.parent.width && -1 === this.parent.width.toString().indexOf("%") && this.setMinwidthBycalculation(e)
        }, e.prototype.setMinwidthBycalculation = function(e) {
            var t = 0,
                i = this.parent.getColumns().filter((function(e) {
                    return g(e.width) || "auto" === e.width
                }));
            if (i.length) {
                t = g(this.parent.width) || "auto" === this.parent.width || "string" != typeof this.parent.width || -1 !== this.parent.width.indexOf("%") ? this.parent.element.getBoundingClientRect().width - e : ("string" == typeof this.parent.width ? parseInt(this.parent.width, 10) : this.parent.width) - e;
                for (var n = 0, r = 0, o = i; r < o.length; r++) {
                    var s = o[r];
                    n += g(s.minWidth) ? 0 : "string" == typeof s.minWidth ? parseInt(s.minWidth, 10) : s.minWidth
                }
                for (var a = 0; a < i.length; a++) 0 === e && this.parent.allowResizing && this.isWidthUndefined() && a !== i.length - 1 && this.setUndefinedColumnWidth(i), 0 !== e && t < n ? this.setWidth(i[a].minWidth, this.parent.getColumnIndexByField(i[a].field)) : 0 !== e && t > n && this.setWidth("", this.parent.getColumnIndexByField(i[a].field), !0)
            }
        }, e.prototype.setUndefinedColumnWidth = function(e) {
            for (var t = 0; t < e.length; t++) t !== e.length - 1 && (e[t].width = 200, this.setWidth(200, this.parent.getColumnIndexByField(e[t].field)))
        }, e.prototype.setColumnWidth = function(e, t, i) {
            if (!(this.parent.getColumns().length < 1)) {
                var n = g(t) ? this.parent.getNormalizedColumnIndex(e.uid) : t,
                    r = this.getWidth(e),
                    o = this.getTableWidth(this.parent.getColumns());
                null !== r && (this.setWidth(r, n), "auto" !== this.parent.width && -1 === this.parent.width.toString().indexOf("%") && this.setMinwidthBycalculation(o), (this.parent.allowResizing && "resize" === i || this.parent.getFrozenColumns() && this.parent.allowResizing) && this.setWidthToTable(), this.parent.notify("column-width-changed", {
                    index: n,
                    width: r,
                    column: e,
                    module: i
                }))
            }
        }, e.prototype.setWidth = function(e, t, i) {
            this.parent.groupSettings.columns.length > t && Ol(this.parent) && (e = (30 / this.parent.element.offsetWidth * 100).toFixed(1) + "%");
            var n, r = this.parent.getHeaderTable(),
                o = this.parent.getContentTable(),
                s = C(e),
                a = this.parent.getFrozenColumns();
            a = a && this.parent.isRowDragable() ? a + 1 : a;
            var l, h = this.parent.getHeaderContent().querySelector(".e-movableheader"),
                p = this.parent.getContent().querySelector(".e-movablecontent");
            if (a && t >= a && h && h.querySelector("colgroup")) n = h.querySelector("colgroup").children[t - a];
            else if (this.parent.enableColumnVirtualization && a && this.parent.contentModule.isXaxis() && h.scrollLeft > 0) {
                n = (d = h.querySelector("colgroup")).children[d.children.length - 1 - t]
            } else n = r.querySelector("colgroup").children[t];
            if (n && !i ? n.style.width = s : n && i && (n.style.width = ""), a && t >= a) l = this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[t - a];
            else if (this.parent.enableColumnVirtualization && a && this.parent.contentModule.isXaxis() && p.scrollLeft > 0) {
                var d;
                l = (d = this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup")).children[d.children.length - 1 - t]
            } else l = o.querySelector("colgroup").children[t];
            l && !i ? l.style.width = s : l && i && (l.style.width = "");
            for (var c = this.parent.element.querySelectorAll(".e-table.e-inline-edit"), u = [], g = 0; g < c.length; g++)
                if (Ka(c[g], "e-grid").id === this.parent.element.id)
                    for (var f = 0; f < c[g].querySelector("colgroup").children.length; f++) u.push(c[g].querySelector("colgroup").children[f]);
            c.length && u.length && (u[t].style.width = s)
        }, e.prototype.getSiblingsHeight = function(e) {
            return this.getHeightFromDirection(e, "previous") + this.getHeightFromDirection(e, "next")
        }, e.prototype.getHeightFromDirection = function(e, t) {
            for (var i = e[t + "ElementSibling"], n = 0, r = ["e-gridheader", "e-gridfooter", "e-groupdroparea", "e-gridpager", "e-toolbar"]; i;) r.some((function(e) {
                return i.classList.contains(e)
            })) && (n += i.offsetHeight), i = i[t + "ElementSibling"];
            return n
        }, e.prototype.isWidthUndefined = function() {
            var e = this.parent.getColumns().filter((function(e) {
                return g(e.width) && g(e.minWidth)
            })).length;
            return this.parent.getColumns().length === e
        }, e.prototype.getWidth = function(e) {
            if (g(e.width) && this.parent.allowResizing && g(e.minWidth) && !this.isWidthUndefined() && (e.width = 200), this.parent.frozenColumns && g(e.width) && e.index < this.parent.frozenColumns && (e.width = 200), !e.width) return null;
            var t = parseInt(e.width.toString(), 10);
            return e.minWidth && t < parseInt(e.minWidth.toString(), 10) ? e.minWidth : e.maxWidth && t > parseInt(e.maxWidth.toString(), 10) ? e.maxWidth : e.width
        }, e.prototype.getTableWidth = function(e) {
            for (var t = 0, i = 0, n = e; i < n.length; i++) {
                var r = n[i],
                    o = this.getWidth(r);
                "auto" === r.width && (o = 0), !1 !== r.visible && null !== o && (t += parseInt(o.toString(), 10))
            }
            return t
        }, e.prototype.calcMovableOrFreezeColWidth = function(e) {
            var t = this.parent.getColumns().slice();
            return "movable" === e ? t.splice(0, this.parent.getFrozenColumns()) : "freeze" === e && t.splice(this.parent.getFrozenColumns(), t.length), C(this.getTableWidth(t))
        }, e.prototype.setWidthToFrozenTable = function() {
            var e = this.calcMovableOrFreezeColWidth("freeze");
            e = this.isAutoResize() ? "100%" : e, this.parent.getHeaderTable().style.width = e, this.parent.getContentTable().style.width = e
        }, e.prototype.setWidthToMovableTable = function() {
            var e = "",
                t = this.parent.getColumns().filter((function(e) {
                    return g(e.width)
                })).length >= 1,
                i = this.parent.getColumns().filter((function(e) {
                    return "auto" === e.width
                })).length >= 1;
            "number" != typeof this.parent.width || t || i ? t || i || (e = this.calcMovableOrFreezeColWidth("movable")) : e = C(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0], 10) - 5), e = this.isAutoResize() ? "100%" : e, this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild && (this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width = e), this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width = e
        }, e.prototype.setWidthToFrozenEditTable = function() {
            var e = this.calcMovableOrFreezeColWidth("freeze");
            e = this.isAutoResize() ? "100%" : e, this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width = e
        }, e.prototype.setWidthToMovableEditTable = function() {
            var e = this.calcMovableOrFreezeColWidth("movable");
            e = this.isAutoResize() ? "100%" : e, this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width = e
        }, e.prototype.setWidthToTable = function() {
            var e = C(this.getTableWidth(this.parent.getColumns()));
            this.parent.getFrozenColumns() ? (this.setWidthToFrozenTable(), this.setWidthToMovableTable()) : ((this.parent.detailTemplate || this.parent.childGrid) && this.setColumnWidth(new xn({
                width: "30px"
            })), e = this.isAutoResize() ? "100%" : e, this.parent.getHeaderTable().style.width = e, this.parent.getContentTable().style.width = e);
            var t = this.parent.element.querySelector(".e-table.e-inline-edit");
            t && this.parent.getFrozenColumns() ? (this.setWidthToFrozenEditTable(), this.setWidthToMovableEditTable()) : t && (t.style.width = e)
        }, e.prototype.isAutoResize = function() {
            return this.parent.allowResizing && "Auto" === this.parent.resizeSettings.mode
        }, e
    }(),
    _s = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Gs = function() {
        function e(e) {
            this.currentInfo = {}, this.oneTime = !0, this.swap = {}, this.forget = !1, this.skipFocus = !0, this.focusByClick = !1, this.prevIndexes = {}, this.refMatrix = this.refreshMatrix(!0), this.actions = ["downArrow", "upArrow"], this.parent = e, this.rowModelGen = new os(this.parent), this.addEventListener()
        }
        return e.prototype.focusCheck = function(e) {
            var t = e.target;
            this.focusByClick = !0, this.skipFocus = t.classList.contains("e-grid")
        }, e.prototype.onFocus = function() {
            if (!(this.parent.isDestroyed || me.isDevice || this.parent.enableVirtualization)) {
                this.setActive(!this.parent.enableHeaderFocus && 0 === this.parent.frozenRows, 0 !== this.parent.frozenColumns);
                this.parent.enableHeaderFocus || this.parent.getCurrentViewRecords().length || "Batch" === this.parent.editSettings.mode && ("Batch" !== this.parent.editSettings.mode || this.parent.editModule.getBatchChanges().addedRecords.length) || this.getContent().matrix.generate(this.rowModelGen.generateRows({
                    rows: [new ts({
                        isDataRow: !0
                    })]
                }), this.getContent().selector, !1);
                var e = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());
                this.getContent().matrix.select(e[0], e[1]), this.skipFocus && (this.focus(), this.skipFocus = !1)
            }
        }, e.prototype.passiveFocus = function(e) {
            this.parent.isDestroyed || e.target && e.target.classList.contains("e-detailcell") && (this.currentInfo.skipAction = !1, ut([this.currentInfo.element], ["e-focused", "e-focus"]))
        }, e.prototype.onBlur = function(e) {
            this.parent.isEdit || e && (!e.relatedTarget || Tt(e.relatedTarget, ".e-grid")) || (this.removeFocus(), this.skipFocus = !1, this.currentInfo.skipAction = !1, this.getContent().getFocusInfo().elementToFocus && (this.getContent().getFocusInfo().elementToFocus.tabIndex = 0))
        }, e.prototype.onClick = function(e, t) {
            if (!Ka(e.target, "e-filterbarcell") || !e.target.classList.contains("e-input-group-icon")) {
                var i = !g(Tt(e.target, ".e-gridcontent")),
                    n = !g(Tt(e.target, ".e-gridheader"));
                i = i && n ? !i : i;
                var r = !g(Tt(e.target, ".e-frozencontent")) || !g(Tt(e.target, ".e-frozenheader"));
                if (!(!i && g(Tt(e.target, ".e-gridheader")) || e.target.classList.contains("e-content")) && g(Tt(e.target, ".e-unboundcell")))
                    if (this.setActive(i, r), i || !g(Tt(e.target, ".e-gridheader"))) {
                        var o = {
                            cancel: !1,
                            byKey: !1,
                            byClick: !g(e.target),
                            clickArgs: e
                        };
                        if (this.parent.notify("beforecellfocused", o), !o.cancel && !Tt(e.target, ".e-inline-edit") && (this.setActive(i, r), this.getContent())) {
                            if (!1 === this.getContent().onClick(e, t)) return;
                            this.focus()
                        }
                    } else this.clearOutline()
            }
        }, e.prototype.onKeyPress = function(e) {
            if (!this.skipOn(e)) {
                this.activeKey = e.action;
                var t = {
                    cancel: !1,
                    byKey: !0,
                    byClick: !1,
                    keyArgs: e
                };
                if (this.parent.notify("beforecellfocused", t), !t.cancel) {
                    var i = this.getContent().matrix.current;
                    this.currentInfo.outline = !0;
                    var n = this.getContent().jump(e.action, i);
                    this.swap = n, n.swap && (this.setActive(!n.toHeader, n.toFrozen), this.getContent().matrix.current = this.getContent().getNextCurrent(i, n, this.active, e.action), this.prevIndexes = {}), this.setActiveByKey(e.action, this.getContent()), !1 !== this.getContent().onKeyPress(e) ? (e.preventDefault(), this.focus(e)) : this.clearIndicator()
                }
            }
        }, e.prototype.skipOn = function(e) {
            var t = e.target;
            if (!t) return !1;
            if (this.currentInfo.skipAction) return this.clearIndicator(), !0;
            if (["pageUp", "pageDown", "altDownArrow"].indexOf(e.action) > -1) return this.clearIndicator(), !0;
            var i = Tt(t, "th") && !Tt(t, "th").tabIndex;
            !e.target.classList.contains("e-filterbaroperator") || 13 !== e.keyCode && 27 !== e.keyCode || Tt(e.target, ".e-filterbarcell").querySelector("input").focus();
            i && null !== Tt(document.activeElement, ".e-filterbarcell") && this.removeFocus();
            var n = null !== Tt(document.activeElement, ".e-filterbarcell");
            if (this.parent.enableHeaderFocus && n) {
                var r = this.active.matrix,
                    o = r.current;
                n = r.matrix[o[0]].lastIndexOf(1) !== o[1]
            }
            return "delete" === e.action || "Batch" !== this.parent.editSettings.mode && (this.parent.isEdit || ["insert", "f2"].indexOf(e.action) > -1) || n || null !== Tt(document.activeElement, "#" + this.parent.element.id + "_searchbar") && ["enter", "leftArrow", "rightArrow", "shiftLeft", "shiftRight", "ctrlPlusA"].indexOf(e.action) > -1 || null === Tt(t, ".e-gridcontent") && null === Tt(t, ".e-gridheader") || "space" === e.action && !t.classList.contains("e-gridchkbox") && null === Tt(t, ".e-gridchkbox") && null === Tt(t, ".e-headerchkcelldiv") || null !== Tt(t, ".e-filter-popup")
        }, e.prototype.focusVirtualElement = function(e) {
            var t = this;
            if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {
                var i = {
                    virtualData: {},
                    isAdd: !1,
                    isCancel: !1
                };
                this.parent.notify("get-virtual-data", i);
                var n = this.actions.some((function(e) {
                        return e === t.activeKey
                    })),
                    r = !!this.parent.contentModule && this.parent.contentModule.selectedRowIndex > -1;
                i.isAdd || Object.keys(i.virtualData).length || n || i.isCancel || r ? (i.isCancel = !1, this.parent.contentModule.selectedRowIndex = -1, n && (this.activeKey = this.empty, this.parent.notify("virtaul-key-handler", e)), this.currentInfo.elementToFocus.focus({
                    preventScroll: !0
                })) : this.currentInfo.elementToFocus.focus()
            }
        }, e.prototype.getFocusedElement = function() {
            return this.currentInfo.elementToFocus
        }, e.prototype.getContent = function() {
            return this.active || this.content
        }, e.prototype.setActive = function(e, t) {
            this.active = e ? t ? this.fContent : this.content : t ? this.fHeader : this.header
        }, e.prototype.setFocusedElement = function(e, t) {
            var i = this;
            this.currentInfo.elementToFocus = e, setTimeout((function() {
                g(i.currentInfo.elementToFocus) || (i.parent.enableVirtualization || i.parent.enableInfiniteScrolling ? i.focusVirtualElement(t) : i.currentInfo.elementToFocus.focus())
            }), 0)
        }, e.prototype.focus = function(e) {
            this.parent.notify("virtaul-cell-focus", e), this.removeFocus(), this.addFocus(this.getContent().getFocusInfo(), e)
        }, e.prototype.removeFocus = function(e) {
            this.currentInfo.element && (gt([this.currentInfo.element, this.currentInfo.elementToFocus], ["e-focused", "e-focus"]), this.currentInfo.element.tabIndex = -1)
        }, e.prototype.addOutline = function() {
            var e = this.getContent().getFocusInfo();
            e.element && (ut([e.element], ["e-focused"]), ut([e.elementToFocus], ["e-focus"]))
        }, e.prototype.focusHeader = function() {
            this.setActive(!1, 0 !== this.parent.frozenColumns), this.resetFocus()
        }, e.prototype.focusContent = function() {
            this.setActive(!0, 0 !== this.parent.frozenColumns), this.resetFocus()
        }, e.prototype.resetFocus = function() {
            var e = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());
            this.getContent().matrix.select(e[0], e[1]), this.focus()
        }, e.prototype.addFocus = function(e, t) {
            if (this.currentInfo = e, this.currentInfo.outline = e.outline && !g(t), e.element) {
                var i = e.elementToFocus.classList.contains("e-focus");
                if (!i) {
                    this.currentInfo.outline && ut([e.element], ["e-focused"]), ut([e.elementToFocus], ["e-focus"]), e.element.tabIndex = 0, i || this.setFocusedElement(e.elementToFocus, t), this.parent.notify("cellfocused", {
                        element: e.elementToFocus,
                        parent: e.element,
                        indexes: this.getContent().matrix.current,
                        byKey: !g(t),
                        byClick: g(t),
                        keyArgs: t,
                        isJump: this.swap.swap,
                        container: this.getContent().getInfo(t),
                        outline: !g(t),
                        swapInfo: this.swap
                    });
                    var n = this.getContent().matrix.current,
                        r = n[0],
                        o = n[1];
                    this.prevIndexes = {
                        rowIndex: r,
                        cellIndex: o
                    }, this.focusedColumnUid = this.parent.getColumnByIndex(o).uid, this.focusByClick = !1
                }
            }
        }, e.prototype.refreshMatrix = function(e) {
            var t = this;
            return function(i) {
                e && i.args && i.args.isFrozen && !t.fContent ? t.fContent = new Xs(t.parent) : e && !t.content && (t.content = new Ks(t.parent)), !e && i.args && i.args.isFrozen && !t.fHeader ? t.fHeader = new Qs(t.parent) : e || t.header || (t.header = new Ys(t.parent));
                var n = e ? i.args && i.args.isFrozen ? t.fContent : t.content : i.args && i.args.isFrozen ? t.fHeader : t.header,
                    r = e ? i.rows.slice(t.parent.frozenRows) : i.rows,
                    o = e ? i.rows.slice(0, t.parent.frozenRows) : i.rows;
                t.parent.isCollapseStateEnabled() && e && (r = r.filter((function(e) {
                    return !1 !== e.visible
                })));
                var s, a = !g(t.parent.rowTemplate),
                    l = n.matrix.generate(o, n.selector, a),
                    h = t.parent.getFrozenColumns();
                if ("batchAdd" === i.name && h) {
                    var p = t.parent.getMovableRowsObject().map((function(e) {
                            return e.clone()
                        })),
                        d = r.map((function(e) {
                            return e.clone()
                        }));
                    t.fContent.matrix.generate(d, t.fContent.selector, a), t.content.matrix.generate(p, t.content.selector, a)
                } else n.matrix.generate(r, n.selector, a);
                if (n.generateRows(o, {
                        matrix: l,
                        handlerInstance: i.args && i.args.isFrozen ? t.fHeader : t.header
                    }), !me.isDevice && i && i.args && (t.focusByClick || "paging" !== i.args.requestType || (t.skipFocus = !1, t.parent.element.focus()), "grouping" === i.args.requestType && (t.skipFocus = !0)), i && i.args && "virtualscroll" === i.args.requestType)
                    if (t.currentInfo.uid) {
                        if (i.rows.some((function(e, i) {
                                return s = i, e.uid === t.currentInfo.uid
                            })) && (t.content.matrix.current[0] = s, t.content.matrix.current[1] = t.parent.getColumnIndexByUid(t.focusedColumnUid) || 0, f = t.getContent().getFocusInfo().elementToFocus)) {
                            var c = f.getBoundingClientRect(),
                                u = t.parent.element.getBoundingClientRect();
                            c.top >= 0 && c.left >= 0 && c.right <= Math.min(u.right, window.innerWidth || document.documentElement.clientWidth) && c.bottom <= Math.min(u.bottom, window.innerHeight || document.documentElement.clientHeight) && t.focus()
                        }
                    } else if (i.args.focusElement && i.args.focusElement.classList.contains("e-filtertext")) {
                    var f;
                    (f = t.parent.element.querySelector("#" + i.args.focusElement.id)) && f.focus()
                }
            }
        }, e.prototype.addEventListener = function() {
            var e = this;
            if (!this.parent.isDestroyed) {
                ye.add(this.parent.element, "mousedown", this.focusCheck, this), ye.add(this.parent.element, "focus", this.onFocus, this), this.parent.element.addEventListener("focus", this.passiveHandler = function(t) {
                    return e.passiveFocus(t)
                }, !0), ye.add(this.parent.element, "focusout", this.onBlur, this), this.parent.on(Pr, this.onKeyPress, this), this.parent.on(Ir, this.onClick, this), this.parent.on(xr, this.refMatrix, this), this.parent.on("partial-refresh", this.refMatrix, this), this.parent.on(Rr, this.refreshMatrix(), this), this.parent.on("close-edit", this.restoreFocus, this), this.parent.on("restore-Focus", this.restoreFocus, this);
                for (var t = ["start-edit", "start-add"], i = 0; i < t.length; i++) this.parent.on(t[i], this.clearIndicator, this);
                this.parent.on("sorting-complete", this.restoreFocus, this), this.parent.on("filtering-complete", this.filterfocus, this);
                for (var n = ["grouping", "ungrouping"], r = 0; r < n.length; r++) this.parent.on(n[r] + "-complete", this.restoreFocusWithAction, this);
                this.parent.on("batchAdd", this.refMatrix, this), this.parent.on("batchCancel", this.refMatrix, this), this.parent.on("batchDelete", this.refMatrix, this), this.parent.on("detailDataBound", this.refMatrix, this), this.parent.on(Tr, this.refMatrix, this), this.parent.on("cellfocused", this.internalCellFocus, this)
            }
        }, e.prototype.filterfocus = function() {
            "FilterBar" !== this.parent.filterSettings.type && this.restoreFocus()
        }, e.prototype.removeEventListener = function() {
            if (!this.parent.isDestroyed) {
                ye.remove(this.parent.element, "mousedown", this.focusCheck), ye.remove(this.parent.element, "focus", this.onFocus), ye.remove(this.parent.element, "focusout", this.onBlur), this.parent.element.removeEventListener("focus", this.passiveHandler, !0), this.parent.off(Pr, this.onKeyPress), this.parent.off(Ir, this.onClick), this.parent.off(xr, this.refMatrix), this.parent.off("partial-refresh", this.refMatrix), this.parent.off(Rr, this.refreshMatrix()), this.parent.off("close-edit", this.restoreFocus), this.parent.off("restore-focus", this.restoreFocus);
                for (var e = ["start-edit", "start-add"], t = 0; t < e.length; t++) this.parent.off(e[t], this.clearOutline);
                this.parent.off("sorting-complete", this.restoreFocus), this.parent.off("filtering-complete", this.filterfocus);
                for (var i = ["grouping", "ungrouping"], n = 0; n < i.length; n++) this.parent.on(i[n] + "-complete", this.restoreFocusWithAction);
                this.parent.off("batchAdd", this.refMatrix), this.parent.off("batchDelete", this.refMatrix), this.parent.off("batchCancel", this.refMatrix), this.parent.off("detailDataBound", this.refMatrix), this.parent.off(Tr, this.refMatrix), this.parent.off("cellfocused", this.internalCellFocus)
            }
        }, e.prototype.destroy = function() {
            this.removeEventListener()
        }, e.prototype.restoreFocus = function() {
            this.addFocus(this.getContent().getFocusInfo())
        }, e.prototype.restoreFocusWithAction = function(e) {
            if (!this.parent.enableInfiniteScrolling) {
                var t = this.getContent().matrix,
                    i = t.current;
                switch (e.requestType) {
                    case "grouping":
                    case "ungrouping":
                        i[1] = !i.length || this.parent.groupSettings.showGroupedColumn || g(t.matrix[i[0]]) ? "grouping" === e.requestType ? i[1] + 1 : i[1] - 1 : t.matrix[i[0]].indexOf(1)
                }
                this.getContent().matrix.current = i, this.addFocus(this.getContent().getFocusInfo())
            }
        }, e.prototype.clearOutline = function() {
            this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], "downArrow", this.getContent().validator()), this.clearIndicator()
        }, e.prototype.clearIndicator = function() {
            this.currentInfo.element && this.currentInfo.elementToFocus && gt([this.currentInfo.element, this.currentInfo.elementToFocus], ["e-focus", "e-focused"])
        }, e.prototype.getPrevIndexes = function() {
            var e = this.forget;
            return this.forget = !1, e || !Object.keys(this.prevIndexes).length ? {
                rowIndex: null,
                cellIndex: null
            } : this.prevIndexes
        }, e.prototype.forgetPrevious = function() {
            this.forget = !0
        }, e.prototype.setActiveByKey = function(e, t) {
            var i = this;
            if (0 !== this.parent.frozenColumns || 0 !== this.parent.frozenRows) {
                var n, r = {
                    home: function() {
                        return {
                            toHeader: !n.isContent,
                            toFrozen: !0
                        }
                    },
                    end: function() {
                        return {
                            toHeader: !n.isContent,
                            toFrozen: !1
                        }
                    },
                    ctrlHome: function() {
                        return {
                            toHeader: !0,
                            toFrozen: 0 !== i.parent.frozenColumns
                        }
                    },
                    ctrlEnd: function() {
                        return {
                            toHeader: !1,
                            toFrozen: !1
                        }
                    }
                };
                if (e in r) {
                    n = t.getInfo();
                    var o = r[e]();
                    this.setActive(!o.toHeader, o.toFrozen), this.getContent().matrix.current = t.matrix.current
                }
            }
        }, e.prototype.internalCellFocus = function(e) {
            if (e.byKey && e.container.isContent && "enter" === e.keyArgs.action && (e.parent.classList.contains("e-detailcell") || e.parent.classList.contains("e-unboundcell") || e.parent.classList.contains("e-templatecell"))) {
                this.clearIndicator();
                var t = this.getContent().getFocusable(this.getFocusedElement());
                this.setFocusedElement(t), this.currentInfo.skipAction = !0
            }
        }, e
    }(),
    Us = function() {
        function e() {
            this.matrix = [], this.current = []
        }
        return e.prototype.set = function(e, t, i) {
            e = Math.max(0, Math.min(e, this.rows)), t = Math.max(0, Math.min(t, this.columns)), this.matrix[e] = this.matrix[e] || [], this.matrix[e][t] = i ? 1 : 0
        }, e.prototype.get = function(e, t, i, n, r) {
            var o = t;
            if (e + i[0] < 0) return [e, t];
            e = Math.max(0, Math.min(e + i[0], this.rows));
            var s = !0;
            if (g(this.matrix[e])) return null;
            if (t = Math.max(0, Math.min(t + i[1], this.matrix[e].length - 1)), o + i[1] > this.matrix[e].length - 1 && r(e, t, n)) return [e, o];
            var l = this.first(this.matrix[e], t, i, !0, n),
                h = a(e + "." + (t = null === l ? o : l), this.matrix);
            if (e !== this.rows || "downArrow" !== n && "enter" !== n || (i[0] = -1), null === l) {
                e = this.current[0];
                for (var p = 0; p < this.rows; p++)
                    if (this.matrix[p].some((function(e) {
                            return 1 === e
                        }))) {
                        s = !1;
                        break
                    } if (s) return [e, t]
            }
            return this.inValid(h) || !r(e, t, n) ? this.get(e, o, i, n, r) : [e, t]
        }, e.prototype.first = function(e, t, i, n, r) {
            return (t < 0 || t === e.length) && this.inValid(e[t]) && "upArrow" !== r && "downArrow" !== r || !e.some((function(e) {
                return 1 === e
            })) ? null : this.inValid(e[t]) ? this.first(e, -1 !== ["upArrow", "downArrow", "shiftUp", "shiftDown"].indexOf(r) ? n ? 0 : ++t : t + i[1], i, !1, r) : t
        }, e.prototype.select = function(e, t) {
            e = Math.max(0, Math.min(e, this.rows)), t = Math.max(0, Math.min(t, this.matrix[e].length - 1)), this.current = [e, t]
        }, e.prototype.generate = function(e, t, i) {
            this.rows = e.length - 1, this.matrix = [];
            for (var n = 0; n < e.length; n++) {
                var r = e[n].cells.filter((function(e) {
                    return !0 !== e.isSpanned
                }));
                this.columns = Math.max(r.length - 1, 0 | this.columns);
                for (var o = 0; o < r.length; o++) this.set(n, o, t(e[n], r[o], i))
            }
            return this.matrix
        }, e.prototype.inValid = function(e) {
            return 0 === e || void 0 === e
        }, e
    }(),
    Ks = function() {
        function e(e) {
            var t = this;
            this.matrix = new Us, this.parent = e, this.keyActions = {
                rightArrow: [0, 1],
                tab: [0, 1],
                leftArrow: [0, -1],
                shiftTab: [0, -1],
                upArrow: [-1, 0],
                downArrow: [1, 0],
                shiftUp: [-1, 0],
                shiftDown: [1, 0],
                shiftRight: [0, 1],
                shiftLeft: [0, -1],
                enter: [1, 0],
                shiftEnter: [-1, 0]
            }, this.indexesByKey = function(e) {
                return {
                    home: [t.matrix.current[0], -1, 0, 1],
                    end: [t.matrix.current[0], t.matrix.columns + 1, 0, -1],
                    ctrlHome: [0, -1, 0, 1],
                    ctrlEnd: [t.matrix.rows, t.matrix.columns + 1, 0, -1]
                } [e] || null
            }
        }
        return e.prototype.getTable = function() {
            return this.parent.getFrozenColumns() ? this.parent.getContent().querySelector(".e-movablecontent .e-table") : this.parent.getContentTable()
        }, e.prototype.onKeyPress = function(e) {
            var t = this.keyActions[e.action],
                i = this.getCurrentFromAction(e.action, t, e.action in this.keyActions, e);
            if (i) {
                if ((["tab", "shiftTab"].indexOf(e.action) > -1 && this.matrix.current || []).toString() === i.toString()) {
                    if (i.toString() === [this.matrix.rows, this.matrix.columns].toString() || i.toString() === [0, 0].toString() || this.matrix.current[0] === this.matrix.rows && this.matrix.current.toString() === i.toString()) return !1;
                    i = this.editNextRow(i[0], i[1], e.action)
                }
                this.matrix.select(i[0], i[1])
            }
        }, e.prototype.editNextRow = function(e, t, i) {
            var n = this.parent,
                r = n.editSettings.allowNextRowEdit && (n.isEdit || n.isLastCellPrimaryKey),
                o = n.getColumnIndexByField(n.getVisibleColumns()[0].field),
                s = this.getTable().rows[e].cells[t];
            "tab" === i && r && (e++, t = o + (this.getTable().rows[e].querySelectorAll(".e-indentcell").length + this.getTable().rows[e].querySelectorAll(".e-detailrowcollapse").length));
            return "shiftTab" === i && r && (e--, t = n.getColumnIndexByField(n.getVisibleColumns()[n.getVisibleColumns().length - 1].field)), s.classList.contains("e-rowcell") || s.classList.contains("e-headercell") || s.classList.contains("e-groupcaption") ? [e, t] : this.editNextRow(e, t, i)
        }, e.prototype.getCurrentFromAction = function(e, t, i, n) {
            if (void 0 === t && (t = [0, 0]), !i && !this.indexesByKey(e) || 0 === this.matrix.current.length) return null;
            if (!this.shouldFocusChange(n)) return this.matrix.current;
            var r = this.indexesByKey(e) || this.matrix.current.concat(t),
                o = r[0],
                s = r[1],
                a = r[2],
                l = r[3];
            return this.matrix.get(o, s, [a, l], e, this.validator())
        }, e.prototype.onClick = function(e, t) {
            var i = e.target;
            if (i = (i = i.classList.contains("e-rowcell") ? i : Tt(i, "td")) || (Tt(e.target, "td.e-detailrowcollapse") || Tt(e.target, "td.e-detailrowexpand")), !(i = (i = Tt(e.target, "td.e-detailcell") && g(Tt(Tt(e.target, ".e-grid"), "td.e-detailcell")) ? null : i) && Tt(i, "table").classList.contains("e-table") ? i : null)) return !1;
            var n = [i.parentElement.rowIndex, i.cellIndex],
                r = n[0],
                o = n[1],
                s = this.matrix.current,
                l = s[0],
                h = s[1],
                p = a(r + "." + o, this.matrix.matrix);
            if (this.matrix.inValid(p) || !t && l === r && h === o || !Ka(e.target, "e-rowcell") && !Ka(e.target, "e-groupcaption")) return !1;
            this.matrix.select(r, o)
        }, e.prototype.getFocusInfo = function() {
            var e = {},
                t = this.matrix.current,
                i = t[0],
                n = void 0 === i ? 0 : i,
                r = t[1],
                o = void 0 === r ? 0 : r;
            return this.matrix.current = [n, o], e.element = g(this.getTable().rows[n]) ? null : this.getTable().rows[n].cells[o], e.element ? (e.elementToFocus = e.element.classList.contains("e-unboundcell") || e.element.classList.contains("e-detailcell") ? e.element : this.getFocusable(e.element), e.outline = !0, e.uid = e.element.parentElement.getAttribute("data-uid"), e) : e
        }, e.prototype.getFocusable = function(e) {
            var t = 'button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';
            this.parent.isEdit && (t = 'input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');
            var i = [].slice.call(e.querySelectorAll(t));
            return i.length ? i[0] : e
        }, e.prototype.selector = function(e, t, i) {
            var n = [dr.Expand, dr.GroupCaption, dr.CaptionSummary, dr.GroupSummary];
            return (e.isDataRow && t.visible && (t.isDataCell || t.isTemplate) || e.isDataRow && t.cellType === dr.DetailExpand && g(t.visible) || !e.isDataRow && n.indexOf(t.cellType) > -1 || t.column && "checkbox" === t.column.type || t.cellType === dr.CommandColumn || e.isDataRow && i) && !("delete" === e.edit && e.isDirty)
        }, e.prototype.jump = function(e, t) {
            var i = this.parent.frozenColumns > 0 && ("leftArrow" === e || "shiftTab" === e) && 0 === t[1],
                n = 0 !== this.parent.frozenRows && "shiftEnter" === e;
            "tab" !== e || this.parent.isEdit || t[1] !== this.matrix.matrix[t[0]].lastIndexOf(1) || this.matrix.matrix.length - 1 === t[0] || (this.matrix.current[0] = this.matrix.current[0] + 1, this.matrix.current[1] = -1, i = this.parent.frozenColumns > 0), "shiftTab" !== e || this.parent.isEdit || 0 === t[0] || this.matrix.matrix[t[0]].indexOf(1) !== t[1] || (this.matrix.current[0] = this.matrix.current[0] - 1, this.matrix.current[1] = this.matrix.matrix[t[0]].length);
            var r = !1,
                o = document.activeElement.parentElement;
            (this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache) && o.classList.contains("e-row") && (r = parseInt(o.getAttribute("aria-rowindex"), 10) > 0);
            return {
                swap: !r && (("upArrow" === e || n) && 0 === t[0] || i),
                toHeader: ("upArrow" === e || n) && 0 === t[0],
                toFrozen: i
            }
        }, e.prototype.getNextCurrent = function(e, t, i, n) {
            void 0 === e && (e = []);
            var r = [];
            return "rightArrow" === n || "tab" === n ? (r[0] = e[0], r[1] = -1) : "downArrow" !== n && "enter" !== n || (r[0] = -1, r[1] = e[1]), r
        }, e.prototype.generateRows = function(e, t) {
            var i, n = t.matrix,
                r = t.handlerInstance,
                o = r.matrix.matrix.length,
                s = this.parent.allowFiltering && "FilterBar" === this.parent.filterSettings.type ? o + 1 : o;
            r.matrix.matrix = r.matrix.matrix.slice(0, s), r.matrix.rows = s, (i = r.matrix.matrix).push.apply(i, n), r.matrix.rows += n.length
        }, e.prototype.getInfo = function(e) {
            var t = this.getFocusInfo(),
                i = this.matrix.current,
                n = i[0],
                r = i[1],
                o = t.element.classList.contains("e-rowcell"),
                s = o || e && "enter" !== e.action && (t.element.classList.contains("e-detailrowcollapse") || t.element.classList.contains("e-detailrowexpand")),
                a = [Math.min(parseInt(t.element.parentElement.getAttribute("aria-rowindex"), 10), n), Math.min(parseInt(t.element.getAttribute("aria-colindex"), 10), r)];
            return {
                isContent: !0,
                isDataCell: o,
                indexes: [a[0], a[1]],
                isSelectable: s
            }
        }, e.prototype.validator = function() {
            var e = this.getTable();
            return function(t, i, n) {
                if (!g(e.rows[t])) {
                    var r = void 0;
                    i = e.querySelector(".e-emptyrow") ? 0 : i;
                    var o = 0 !== (r = e.rows[t].cells[0].classList.contains("e-editcell") ? e.rows[t].cells[0].querySelectorAll("td")[i] : e.rows[t].cells[i]).getBoundingClientRect().width;
                    if ("enter" === n || "shiftEnter" === n) return o && r.classList.contains("e-rowcell");
                    if (("shiftUp" === n || "shiftDown" === n) && r.classList.contains("e-rowcell")) return o;
                    if ("shiftUp" !== n && "shiftDown" !== n) return o
                }
                return !1
            }
        }, e.prototype.shouldFocusChange = function(e) {
            var t = this.matrix.current,
                i = t[0],
                n = void 0 === i ? -1 : i,
                r = t[1],
                o = void 0 === r ? -1 : r;
            if (n < 0 || o < 0) return !0;
            var s = a(n + ".cells." + o, this.getTable().rows);
            return !s || ("enter" !== e.action && "shiftEnter" !== e.action || s.classList.contains("e-rowcell") && !s.classList.contains("e-unboundcell") && (!s.classList.contains("e-templatecell") || s.classList.contains("e-editedbatchcell")) && !s.classList.contains("e-detailcell"))
        }, e
    }(),
    Ys = function(e) {
        function t(t) {
            return e.call(this, t) || this
        }
        return _s(t, e), t.prototype.getTable = function() {
            return this.parent.getFrozenColumns() ? this.parent.getHeaderContent().querySelector(".e-movableheader .e-table") : this.parent.getHeaderTable()
        }, t.prototype.onClick = function(e) {
            var t = e.target;
            if ((t = t.classList.contains("e-headercell") ? t : Tt(t, "th")) || 0 === this.parent.frozenRows || (t = e.target.classList.contains("e-rowcell") ? e.target : Tt(e.target, "td")), e.target.classList.contains("e-columnheader") || e.target.querySelector(".e-stackedheadercell")) return !1;
            if (t) {
                var i = [t.parentElement.rowIndex, t.cellIndex],
                    n = a(i[0] + "." + i[1], this.matrix.matrix);
                if (this.matrix.inValid(n)) return !1;
                this.matrix.select(t.parentElement.rowIndex, t.cellIndex)
            }
        }, t.prototype.getFocusInfo = function() {
            var e = {},
                t = this.matrix.current,
                i = t[0],
                n = void 0 === i ? 0 : i,
                r = t[1],
                o = void 0 === r ? 0 : r;
            return e.element = this.getTable().rows[n].cells[o], g(e.element) || (e.elementToFocus = this.getFocusable(e.element), e.outline = !e.element.classList.contains("e-filterbarcell")), e
        }, t.prototype.selector = function(e, t) {
            return t.visible && (void 0 !== t.column.field || t.isTemplate || !g(t.column.template)) || "checkbox" === t.column.type || t.cellType === dr.StackedHeader
        }, t.prototype.jump = function(e, t) {
            var i, n, r = this.parent.frozenColumns > 0 && ("leftArrow" === e || "shiftTab" === e) && 0 === t[1],
                o = 0 !== this.parent.frozenRows && "enter" === e,
                s = r,
                a = this.parent.focusModule.fHeader && this.parent.focusModule.fHeader.matrix.matrix,
                l = a && !g(a[t[0]]);
            return this.parent.enableHeaderFocus && "tab" === e && (n = this.matrix.matrix.length - 1 === t[0], (i = t[1] === this.matrix.matrix[t[0]].lastIndexOf(1)) && (this.matrix.current[0] = n ? 0 : this.matrix.current[0] + 1, this.matrix.current[1] = -1), this.parent.frozenColumns > 0 && n && i && (r = !0, s = !1)), {
                swap: ("downArrow" === e || o) && t[0] === this.matrix.matrix.length - 1 || l && r || "tab" === e && n && i,
                toHeader: s,
                toFrozen: r
            }
        }, t.prototype.getNextCurrent = function(e, t, i, n) {
            void 0 === e && (e = []);
            var r = [];
            return "upArrow" === n || "shiftEnter" === n ? (r[0] = this.matrix.matrix.length, r[1] = e[1]) : "rightArrow" !== n && "tab" !== n || (r[0] = e[0], r[1] = -1), r
        }, t.prototype.generateRows = function(e) {
            var t = this.matrix.matrix.length;
            if (this.parent.allowFiltering && "FilterBar" === this.parent.filterSettings.type) {
                this.matrix.rows = ++this.matrix.rows;
                for (var i = e[0].cells, n = 0; n < i.length; n++) this.matrix.set(t, n, i[n].visible && !1 !== i[n].column.allowFiltering)
            }
        }, t.prototype.getInfo = function(t) {
            return u(e.prototype.getInfo.call(this, t), {
                isContent: !1,
                isHeader: !0
            })
        }, t.prototype.validator = function() {
            return function() {
                return !0
            }
        }, t.prototype.shouldFocusChange = function(e) {
            var t = this.matrix.current,
                i = t[0],
                n = t[1];
            if (i < 0 || n < 0) return !0;
            var r = a(i + ".cells." + n, this.getTable().rows);
            return !r || ("enter" !== e.action && "altDownArrow" !== e.action || !r.classList.contains("e-headercell"))
        }, t
    }(Ks),
    Xs = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return _s(t, e), t.prototype.getTable = function() {
            return this.parent.getContent().querySelector(".e-frozencontent .e-table")
        }, t.prototype.jump = function(e, t) {
            var i = 0 !== this.parent.frozenRows && "shiftEnter" === e;
            return {
                swap: ("upArrow" === e || i) && 0 === t[0] || ("tab" === e || "rightArrow" === e) && t[1] === this.matrix.columns,
                toHeader: ("upArrow" === e || i) && 0 === t[0],
                toFrozen: ("upArrow" === e || i) && 0 === t[0]
            }
        }, t.prototype.getNextCurrent = function(e, t, i, n) {
            void 0 === e && (e = []);
            var r = [];
            return "tab" === n && this.parent.enableHeaderFocus && (r[0] = e[0], r[1] = -1), "leftArrow" === n || "shiftTab" === n ? (r[0] = e[0], r[1] = i.matrix.columns + 1) : "downArrow" !== n && "enter" !== n || (r[0] = -1, r[1] = e[1]), r
        }, t
    }(Ks),
    Qs = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return _s(t, e), t.prototype.jump = function(e, t) {
            var i = 0 !== this.parent.frozenRows && "enter" === e,
                n = this.parent.focusModule.header && this.parent.focusModule.header.matrix.matrix,
                r = n && !g(n[t[0]]);
            return {
                swap: ("downArrow" === e || i) && t[0] === this.matrix.matrix.length - 1 || ("rightArrow" === e || "tab" === e) && t[1] === this.matrix.columns && r,
                toHeader: ("rightArrow" === e || "tab" === e) && t[1] === this.matrix.columns,
                toFrozen: ("downArrow" === e || i) && t[0] === this.matrix.matrix.length - 1
            }
        }, t.prototype.getTable = function() {
            return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")
        }, t.prototype.getNextCurrent = function(e, t, i, n) {
            void 0 === e && (e = []);
            var r = [];
            return "leftArrow" === n || "shiftTab" === n ? (r[0] = e[0], r[1] = i.matrix.columns + 1) : "upArrow" !== n && "shiftEnter" !== n || (r[0] = this.matrix.matrix.length, r[1] = e[1]), r
        }, t
    }(Ys),
    Js = function() {
        function e(e) {
            this.searchBox = e
        }
        return e.prototype.searchFocus = function(e) {
            e.target.parentElement.classList.add("e-input-focus")
        }, e.prototype.searchBlur = function(e) {
            e.target.parentElement.classList.remove("e-input-focus")
        }, e.prototype.wireEvent = function() {
            this.searchBox && (ye.add(this.searchBox, "focus", this.searchFocus, this), ye.add(this.searchBox, "blur", this.searchBlur, this))
        }, e.prototype.unWireEvent = function() {
            this.searchBox && (ye.remove(this.searchBox, "focus", this.searchFocus), ye.remove(this.searchBox, "blur", this.searchBlur))
        }, e
    }(),
    Zs = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    $s = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    ea = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Zs(t, e), $s([zt(12)], t.prototype, "pageSize", void 0), $s([zt(8)], t.prototype, "pageCount", void 0), $s([zt(1)], t.prototype, "currentPage", void 0), $s([zt()], t.prototype, "totalRecordsCount", void 0), $s([zt(!1)], t.prototype, "enableQueryString", void 0), $s([zt(!1)], t.prototype, "pageSizes", void 0), $s([zt(null)], t.prototype, "template", void 0), t
    }(oi),
    ta = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    ia = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    na = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return ta(t, e), ia([zt("startsWith")], t.prototype, "operator", void 0), t
    }(oi),
    ra = function() {
        return (ra = Object.assign || function(e) {
            for (var t, i = 1, n = arguments.length; i < n; i++)
                for (var r in t = arguments[i]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
            return e
        }).apply(this, arguments)
    },
    oa = function() {
        function e(e, t, i) {
            this.selectedRowIndexes = [], this.selectedRowCellIndexes = [], this.selectedRecords = [], this.preventFocus = !1, this.checkBoxState = !1, this.isMultiShiftRequest = !1, this.isMultiCtrlRequest = !1, this.enableSelectMultiTouch = !1, this.clearRowCheck = !1, this.selectRowCheck = !1, this.selectedRowState = {}, this.totalRecordsCount = 0, this.chkAllCollec = [], this.isCheckedOnAdd = !1, this.persistSelectedData = [], this.isCancelDeSelect = !1, this.isPreventCellSelect = !1, this.disableUI = !1, this.isPersisted = !1, this.cmdKeyPressed = !1, this.cellselected = !1, this.isMultiSelection = !1, this.isAddRowsToSelection = !1, this.initialRowSelection = !1, this.autoFillRLselection = !0, this.parent = e, this.selectionSettings = t, this.factory = i.getService("rendererFactory"), this.focus = i.getService("focus"), this.addEventListener(), this.wireEvents()
        }
        return e.prototype.initializeSelection = function() {
            this.parent.log("selection_key_missing"), this.render()
        }, e.prototype.onActionBegin = function(e, t) {
            this.parent.trigger(t, this.fDataUpdate(e))
        }, e.prototype.fDataUpdate = function(e) {
            if (!(this.isMultiSelection || g(e.cellIndex) && g(e.rowIndex))) {
                var t = this.getRowObj(g(e.rowIndex) ? g(e.cellIndex) ? this.currentIndex : e.cellIndex.rowIndex : e.rowIndex);
                e.foreignKeyData = t.foreignKeyData
            }
            return e
        }, e.prototype.onActionComplete = function(e, t) {
            this.parent.trigger(t, this.fDataUpdate(e)), this.isMultiSelection = !1
        }, e.prototype.getModuleName = function() {
            return "selection"
        }, e.prototype.destroy = function() {
            var e = this.parent.element;
            e && (e.querySelector(".e-gridheader") || e.querySelector(".e-gridcontent")) && (this.hidePopUp(), this.clearSelection(), this.removeEventListener(), this.unWireEvents(), ye.remove(this.parent.getContent(), "mousedown", this.mouseDownHandler), ye.remove(this.parent.getHeaderContent(), "mousedown", this.mouseDownHandler))
        }, e.prototype.isEditing = function() {
            return ("Normal" === this.parent.editSettings.mode || "Batch" === this.parent.editSettings.mode && this.parent.editModule && this.parent.editModule.formObj && !this.parent.editModule.formObj.validate()) && this.parent.isEdit && !this.parent.isPersistSelection
        }, e.prototype.getSelectedMovableRow = function(e) {
            var t = this.parent;
            return t.getFrozenColumns() && this.parent.getContent().querySelector(".e-movablecontent") ? t.getMovableRowByIndex(e) : null
        }, e.prototype.getCurrentBatchRecordChanges = function() {
            var e = this.parent;
            if ("Batch" === e.editSettings.mode && e.editModule) {
                var t = Va(this.parent.getCurrentViewRecords());
                t = "Bottom" === e.editSettings.newRowPosition ? t.concat(this.parent.editModule.getBatchChanges().addedRecords) : this.parent.editModule.getBatchChanges().addedRecords.concat(t);
                for (var i = this.parent.editModule.getBatchChanges().deletedRecords, n = this.parent.getPrimaryKeyFieldNames()[0], r = 0; r < i.length; r++)
                    for (var o = 0; o < t.length; o++)
                        if (i[r][n] === t[o][n]) {
                            t.splice(o, 1);
                            break
                        } return t
            }
            return e.getCurrentViewRecords()
        }, e.prototype.selectRow = function(e, t) {
            if (this.selectedRowIndexes.length && this.selectionSettings.enableSimpleMultiRowSelection) this.addRowsToSelection([e]);
            else {
                var i, n = this.parent,
                    r = n.getRowByIndex(e),
                    o = this.getSelectedMovableRow(e);
                if (n.enableVirtualization && e > -1) {
                    this.parent.notify("select-virtual-Row", {
                        selectedIndex: e
                    });
                    var s = n.getFrozenColumns() ? n.contentModule.getRowObjectByIndex(e) : null;
                    if (!r || !n.getRowObjectFromUID(r.getAttribute("data-uid")) && !s) return void(this.parent.getSelectedRecords().length > 0 && this.clearRowSelection());
                    i = s || n.getRowObjectFromUID(r.getAttribute("data-uid")).data
                } else i = this.getCurrentBatchRecordChanges()[e];
                if (this.isRowType() && r && !this.isEditing()) {
                    var a, l = r.hasAttribute("aria-selected");
                    this.activeTarget();
                    if (t = t ? !!this.selectedRowIndexes.length && (1 === this.selectedRowIndexes.length && e === this.selectedRowIndexes[0]) : t) this.rowSelectingCallBack(a, t, e, i, !1, l, "cancel")(a);
                    else {
                        !S() || this.parent.isJsComponent || this.parent.isHybrid ? (a = {
                            data: i,
                            rowIndex: e,
                            isCtrlPressed: this.isMultiCtrlRequest,
                            isShiftPressed: this.isMultiShiftRequest,
                            row: r,
                            previousRow: n.getRowByIndex(this.prevRowIndex),
                            previousRowIndex: this.prevRowIndex,
                            target: this.actualTarget,
                            cancel: !1,
                            isInteracted: this.isInteracted,
                            isHeaderCheckboxClicked: this.isHeaderCheckboxClicked
                        }, a = this.addMovableArgs(a, o)) : a = {
                            data: i,
                            rowIndex: e,
                            isCtrlPressed: this.isMultiCtrlRequest,
                            isShiftPressed: this.isMultiShiftRequest,
                            previousRowIndex: this.prevRowIndex,
                            cancel: !1,
                            isInteracted: this.isInteracted,
                            isHeaderCheckboxClicked: this.isHeaderCheckboxClicked
                        }, this.parent.trigger("rowSelecting", this.fDataUpdate(a), this.rowSelectingCallBack(a, t, e, i, !1, l, "cancel"))
                    }
                }
            }
        }, e.prototype.rowSelectingCallBack = function(e, t, i, n, r, o, s) {
            var a = this;
            return function(e) {
                g(e) || !0 !== e[s] ? (a.index = i, a.toggle = t, a.data = n, a.removed = r, o && a.selectionSettings.persistSelection && "ResetOnRowClick" !== a.selectionSettings.checkboxMode ? (a.clearSelectedRow(i), r = !0, a.removed = r, a.selectRowCallBack()) : !o && a.selectionSettings.persistSelection && "ResetOnRowClick" !== a.selectionSettings.checkboxMode && a.selectRowCallBack(), "ResetOnRowClick" === a.selectionSettings.checkboxMode && a.clearSelection(), a.selectionSettings.persistSelection && "ResetOnRowClick" !== a.selectionSettings.checkboxMode || (a.selectRowCheck = !0, a.clearRow())) : a.disableInteracted()
            }
        }, e.prototype.selectRowCallBack = function() {
            var e, t = this.parent,
                i = this.index,
                n = this.toggle,
                r = this.data,
                o = this.removed,
                s = t.getRowByIndex(i),
                a = this.getSelectedMovableRow(i);
            if (n || o || (this.selectedRowIndexes.indexOf(i) <= -1 && (this.updateRowSelection(s, i), t.getFrozenColumns() && this.updateRowSelection(a, i)), this.selectRowIndex(i)), !n) {
                !S() || this.parent.isJsComponent || this.parent.isHybrid ? (e = {
                    data: r,
                    rowIndex: i,
                    row: s,
                    previousRow: t.getRowByIndex(this.prevRowIndex),
                    previousRowIndex: this.prevRowIndex,
                    target: this.actualTarget,
                    isInteracted: this.isInteracted,
                    isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked
                }, e = this.addMovableArgs(e, a)) : e = {
                    data: r,
                    rowIndex: i,
                    row: s,
                    previousRow: t.getRowByIndex(this.prevRowIndex),
                    previousRowIndex: this.prevRowIndex,
                    isInteracted: this.isInteracted,
                    isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked
                }, this.onActionComplete(e, "rowSelected")
            }
            if (S() && this.parent.isServerRendered && this.parent.enableVirtualization) {
                this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection", !0, "normal", [i])
            }
            this.isInteracted = !1, this.updateRowProps(i)
        }, e.prototype.addMovableArgs = function(e, t) {
            if (this.parent.getFrozenColumns()) {
                var i = {
                    mRow: t,
                    previousMovRow: this.parent.getMovableRows()[this.prevRowIndex]
                };
                e = ra({}, e, i)
            }
            return e
        }, e.prototype.selectRowsByRange = function(e, t) {
            this.selectRows(this.getCollectionFromIndexes(e, t)), this.selectRowIndex(t)
        }, e.prototype.selectRows = function(e) {
            var t = this,
                i = this.parent,
                n = this.isSingleSel() ? e[e.length - 1] : e[0];
            this.isMultiSelection = !0;
            var r = [],
                o = [],
                s = this.getSelectedMovableRow(n),
                a = i.getFrozenColumns(),
                l = [];
            if (this.isRowType() && !this.isEditing()) {
                for (var h = 0, p = e.length; h < p; h++) {
                    var d = this.parent.getDataRows()[e[h]],
                        c = this.getRowObj(d);
                    c && (l.push(c.data), r.push(d), o.push(c.foreignKeyData))
                }
                var u;
                this.activeTarget(), !S() || this.parent.isJsComponent || this.parent.isHybrid ? (u = {
                    cancel: !1,
                    rowIndexes: e,
                    row: r,
                    rowIndex: n,
                    target: this.actualTarget,
                    prevRow: i.getRows()[this.prevRowIndex],
                    previousRowIndex: this.prevRowIndex,
                    isInteracted: this.isInteracted,
                    isCtrlPressed: this.isMultiCtrlRequest,
                    isShiftPressed: this.isMultiShiftRequest,
                    data: l,
                    isHeaderCheckboxClicked: this.isHeaderCheckboxClicked,
                    foreignKeyData: o
                }, u = this.addMovableArgs(u, s)) : u = {
                    cancel: !1,
                    rowIndexes: e,
                    rowIndex: n,
                    previousRowIndex: this.prevRowIndex,
                    isCtrlPressed: this.isMultiCtrlRequest,
                    isShiftPressed: this.isMultiShiftRequest,
                    data: l,
                    isHeaderCheckboxClicked: this.isHeaderCheckboxClicked,
                    foreignKeyData: o
                }, this.parent.trigger("rowSelecting", this.fDataUpdate(u), (function(h) {
                    if (g(h) || !0 !== h.cancel) {
                        if (t.clearRow(), t.selectRowIndex(e.slice(-1)[0]), t.isSingleSel()) t.updateRowSelection(i.getRowByIndex(n), n), a && t.updateRowSelection(i.getMovableRowByIndex(n), n), t.updateRowProps(n);
                        else
                            for (var p = 0, d = e; p < d.length; p++) {
                                var c = d[p];
                                t.updateRowSelection(i.getRowByIndex(c), c), a && t.updateRowSelection(i.getMovableRowByIndex(c), c), t.updateRowProps(n)
                            }!S() || t.parent.isJsComponent || t.parent.isHybrid ? (h = {
                                rowIndexes: e,
                                row: r,
                                rowIndex: n,
                                target: t.actualTarget,
                                prevRow: i.getRows()[t.prevRowIndex],
                                previousRowIndex: t.prevRowIndex,
                                data: S() ? l : t.getSelectedRecords(),
                                isInteracted: t.isInteracted,
                                isHeaderCheckboxClicked: t.isHeaderCheckboxClicked,
                                foreignKeyData: o
                            }, h = t.addMovableArgs(h, s)) : h = {
                                rowIndexes: e,
                                rowIndex: n,
                                previousRowIndex: t.prevRowIndex,
                                row: r,
                                prevRow: i.getRows()[t.prevRowIndex],
                                data: S() ? l : t.getSelectedRecords(),
                                isInteracted: t.isInteracted,
                                isHeaderCheckboxClicked: t.isHeaderCheckboxClicked,
                                foreignKeyData: o
                            }, t.isRowSelected && t.onActionComplete(h, "rowSelected")
                    } else t.disableInteracted()
                }))
            }
        }, e.prototype.addRowsToSelection = function(e) {
            var t = this,
                i = this.parent,
                n = this.target;
            this.isMultiSelection = !0;
            var r = i.getSelectedRowIndexes().concat(e),
                o = this.isSingleSel() ? i.getRowByIndex(e[e.length - 1]) : i.getRowByIndex(e[0]),
                s = this.isSingleSel() ? this.getSelectedMovableRow(e[e.length - 1]) : this.getSelectedMovableRow(e[0]),
                a = i.getFrozenColumns();
            if (this.isRowType() && !this.isEditing())
                for (var l, h = this.parent.getColumns().filter((function(e) {
                        return "checkbox" === e.type
                    })), p = function(e) {
                        var p = d.getRowObj(e),
                            c = d.selectedRowIndexes.indexOf(e) > -1;
                        if (d.selectRowIndex(e), c && (h.length || d.selectionSettings.enableToggle || d.isMultiCtrlRequest)) {
                            if (d.isAddRowsToSelection = !0, d.rowDeselect("rowDeselecting", [e], [p.data], [o], [p.foreignKeyData], n), d.isCancelDeSelect) return {
                                value: void 0
                            };
                            d.selectedRowIndexes.splice(d.selectedRowIndexes.indexOf(e), 1), d.selectedRecords.splice(d.selectedRecords.indexOf(o), 1), o.removeAttribute("aria-selected"), d.addRemoveClassesForRow(o, !1, null, "e-selectionbackground", "e-active"), s && (d.selectedRecords.splice(d.selectedRecords.indexOf(s), 1), s.removeAttribute("aria-selected"), d.addRemoveClassesForRow(s, !1, null, "e-selectionbackground", "e-active")), d.rowDeselect("rowDeselected", [e], [p.data], [o], [p.foreignKeyData], n, [s]), d.isInteracted = !1, d.isMultiSelection = !1, d.isAddRowsToSelection = !1
                        } else {
                            var u = "isHybrid";
                            d.activeTarget(), !S() || d.parent.isJsComponent || d.parent[u] ? (l = {
                                cancel: !1,
                                data: p.data,
                                rowIndex: e,
                                row: o,
                                target: d.actualTarget,
                                prevRow: i.getRows()[d.prevRowIndex],
                                previousRowIndex: d.prevRowIndex,
                                isCtrlPressed: d.isMultiCtrlRequest,
                                isShiftPressed: d.isMultiShiftRequest,
                                foreignKeyData: p.foreignKeyData,
                                isInteracted: d.isInteracted,
                                isHeaderCheckboxClicked: d.isHeaderCheckboxClicked,
                                rowIndexes: r
                            }, l = d.addMovableArgs(l, s)) : l = {
                                cancel: !1,
                                data: p.data,
                                rowIndex: e,
                                previousRowIndex: d.prevRowIndex,
                                isCtrlPressed: d.isMultiCtrlRequest,
                                isShiftPressed: d.isMultiShiftRequest,
                                foreignKeyData: p.foreignKeyData,
                                isInteracted: d.isInteracted,
                                isHeaderCheckboxClicked: d.isHeaderCheckboxClicked,
                                rowIndexes: r
                            }, d.parent.trigger("rowSelecting", d.fDataUpdate(l), (function(i) {
                                g(i) || !0 !== i.cancel ? (t.isSingleSel() && t.clearRow(), t.updateRowSelection(o, e), a && t.updateRowSelection(s, e)) : t.disableInteracted()
                            }))
                        }
                        if (!c) {
                            u = "isHybrid";
                            !S() || d.parent.isJsComponent || d.parent[u] ? (l = {
                                data: p.data,
                                rowIndex: e,
                                row: o,
                                target: d.actualTarget,
                                prevRow: i.getRows()[d.prevRowIndex],
                                previousRowIndex: d.prevRowIndex,
                                foreignKeyData: p.foreignKeyData,
                                isInteracted: d.isInteracted,
                                isHeaderCheckboxClicked: d.isHeaderCheckboxClicked,
                                rowIndexes: r
                            }, l = d.addMovableArgs(l, s)) : l = {
                                data: p.data,
                                rowIndex: e,
                                previousRowIndex: d.prevRowIndex,
                                row: o,
                                prevRow: i.getRows()[d.prevRowIndex],
                                foreignKeyData: p.foreignKeyData,
                                isInteracted: d.isInteracted,
                                isHeaderCheckboxClicked: d.isHeaderCheckboxClicked,
                                rowIndexes: r
                            }, d.onActionComplete(l, "rowSelected")
                        }
                        if (d.isInteracted = !1, d.updateRowProps(e), d.isSingleSel()) return "break"
                    }, d = this, c = 0, u = e; c < u.length; c++) {
                    var f = p(u[c]);
                    if ("object" == typeof f) return f.value;
                    if ("break" === f) break
                }
        }, e.prototype.getCollectionFromIndexes = function(e, t) {
            for (var i = [], n = e <= t ? {
                    i: e,
                    max: t
                } : {
                    i: t,
                    max: e
                }, r = n.i, o = n.max; r <= o; r++) i.push(r);
            return e > t && i.reverse(), i
        }, e.prototype.clearRow = function() {
            this.clearRowCheck = !0, this.clearRowSelection()
        }, e.prototype.clearRowCallBack = function() {
            this.isCancelDeSelect && "Check" !== this.parent.checkAllRows || (this.selectedRowIndexes = [], this.selectedRecords = [], this.selectRowIndex(-1), this.isSingleSel() && this.parent.isPersistSelection && (this.selectedRowState = {}))
        }, e.prototype.clearSelectedRow = function(e) {
            if (this.target) {
                var t = this.target.parentElement;
                this.disableUI || (t.removeAttribute("aria-selected"), this.addRemoveClassesForRow(t, !1, !0, "e-selectionbackground", "e-active")), this.updatePersistCollection(t, !1), this.updateCheckBoxes(t), this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e), 1), this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)), 1)
            }
        }, e.prototype.updateRowProps = function(e) {
            this.prevRowIndex = e, this.isRowSelected = this.selectedRowIndexes.length && !0
        }, e.prototype.updatePersistCollection = function(e, t) {
            var i = this;
            if ((this.parent.isPersistSelection || this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) && !g(e)) {
                this.parent.isPersistSelection || this.ensureCheckboxFieldSelection();
                var n = this.getRowObj(e),
                    r = n.data ? n.data[this.primaryKey] : null;
                if (null === r) return;
                n.isSelected = t, t ? (this.selectedRowState[r] = t, this.persistSelectedData.some((function(e) {
                    return e[i.primaryKey] === r
                })) || this.persistSelectedData.push(n.data)) : this.updatePersistDelete(r)
            }
        }, e.prototype.updatePersistDelete = function(e) {
            var t, i = this;
            delete this.selectedRowState[e], this.persistSelectedData.some((function(n, r) {
                return t = r, n[i.primaryKey] === e
            })) && this.persistSelectedData.splice(t, 1)
        }, e.prototype.updateCheckBoxes = function(e, t, i) {
            if (!g(e)) {
                var n = e.querySelector(".e-checkselect");
                g(n) || (yl(n.nextElementSibling, t), fl(n, t), (g(this.checkedTarget) || !g(this.checkedTarget) && !this.checkedTarget.classList.contains("e-checkselectall")) && this.setCheckAllState(i))
            }
        }, e.prototype.updateRowSelection = function(e, t) {
            if (e) {
                this.selectedRowIndexes.push(t);
                var i = this.selectedRowIndexes.length;
                if (this.parent.getFrozenColumns() && i > 1 && this.selectedRowIndexes[i - 2] === this.selectedRowIndexes[i - 1] && this.selectedRowIndexes.pop(), this.selectedRecords.push(e), e.setAttribute("aria-selected", "true"), this.updatePersistCollection(e, !0), this.updateCheckBoxes(e, !0), this.addRemoveClassesForRow(e, !0, null, "e-selectionbackground", "e-active"), !this.preventFocus) {
                    var n = this.focus.getPrevIndexes().cellIndex ? e.cells[this.focus.getPrevIndexes().cellIndex] : e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");
                    if (this.parent.contextMenuModule && 2 === this.mouseButton && (n = this.parent.contextMenuModule.cell), !n) return;
                    this.focus.onClick({
                        target: n
                    }, !0)
                }
            }
        }, e.prototype.clearSelection = function() {
            if (!this.parent.isPersistSelection || this.parent.isPersistSelection && !this.parent.isEdit || !g(this.checkedTarget) && this.checkedTarget.classList.contains("e-checkselectall")) {
                var e = this.parent.element.querySelector(".e-gridpopup").querySelector("span");
                e.classList.contains("e-rowselect") && e.classList.remove("e-spanclicked"), this.parent.isPersistSelection && (this.persistSelectedData = [], this.selectedRowState = {}), this.clearRowSelection(), this.clearCellSelection(), this.prevRowIndex = void 0, this.enableSelectMultiTouch = !1, this.isInteracted = !1
            }
        }, e.prototype.clearRowSelection = function() {
            var e = this;
            if (this.isRowSelected) {
                for (var t = this.parent, i = this.parent.getDataRows(), n = [], r = [], o = [], s = [], a = t.getFrozenColumns(), l = [], h = this.target, p = (this.parent.getCurrentViewRecords(), 0), d = this.selectedRowIndexes.length; p < d; p++) {
                    var c = "Batch" === this.parent.editSettings.mode ? this.parent.getRows()[this.selectedRowIndexes[p]] : this.parent.getDataRows()[this.selectedRowIndexes[p]],
                        u = this.getRowObj(c);
                    u && (n.push(u.data), r.push(c), s.push(this.selectedRowIndexes[p]), l.push(u.foreignKeyData)), a && o.push(t.getMovableRows()[this.selectedRowIndexes[p]])
                }
                this.selectionSettings.persistSelection && "ResetOnRowClick" !== this.selectionSettings.checkboxMode && (this.isInteracted = !!this.checkSelectAllClicked), this.rowDeselect("rowDeselecting", s, n, r, l, h, o, (function() {
                    if (e.isCancelDeSelect && (e.isInteracted || e.checkSelectAllClicked)) {
                        if (e.parent.isPersistSelection)
                            if ("Intermediate" === e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall")))
                                for (var t = 0; t < e.selectedRecords.length; t++) e.updatePersistCollection(e.selectedRecords[t], !0);
                            else e.parent.checkAllRows = "Check", e.updatePersistSelectedData(!0);
                        e.clearRowCheck && (e.clearRowCallBack(), e.clearRowCheck = !1, e.selectRowCheck && (e.selectRowCallBack(), e.selectRowCheck = !1))
                    } else {
                        for (var a = [].slice.call(i.filter((function(e) {
                                return e.hasAttribute("aria-selected")
                            }))), p = 0; p < a.length; p++) e.disableUI && !S() || (a[p].removeAttribute("aria-selected"), e.addRemoveClassesForRow(a[p], !1, !0, "e-selectionbackground", "e-active")), e.updatePersistCollection(a[p], !1), e.updateCheckBoxes(a[p]);
                        S() && e.parent.isServerRendered && e.parent.enableVirtualization && e.getRenderer().setSelection(null, !1, !0);
                        t = 0;
                        for (var d = e.selectedRowIndexes.length; t < d; t++) {
                            var c = e.getSelectedMovableRow(e.selectedRowIndexes[t]);
                            c && (e.disableUI && !S() || (c.removeAttribute("aria-selected"), e.addRemoveClassesForRow(c, !1, !0, "e-selectionbackground", "e-active")), e.updatePersistCollection(c, !1))
                        }
                        e.selectedRowIndexes = [], e.selectedRecords = [], e.isRowSelected = !1, e.selectRowIndex(-1), e.rowDeselect("rowDeselected", s, n, r, l, h, o), e.clearRowCheck && (e.clearRowCallBack(), e.clearRowCheck = !1, e.selectRowCheck && (e.selectRowCallBack(), e.selectRowCheck = !1))
                    }
                }))
            } else this.clearRowCheck && (this.clearRowCallBack(), this.clearRowCheck = !1, this.selectRowCheck && (this.selectRowCallBack(), this.selectRowCheck = !1))
        }, e.prototype.rowDeselect = function(e, t, i, n, r, o, s, a) {
            var l = this;
            if (this.selectionSettings.persistSelection && this.isInteracted || !this.selectionSettings.persistSelection) {
                var h = {
                    rowIndex: t[0],
                    data: this.selectionSettings.persistSelection && "Uncheck" === this.parent.checkAllRows && "ResetOnRowClick" !== this.selectionSettings.checkboxMode ? this.persistSelectedData : i,
                    foreignKeyData: r,
                    cancel: !1,
                    isInteracted: this.isInteracted,
                    isHeaderCheckboxClicked: this.isHeaderCheckboxClicked
                };
                "rowDeselected" === e && delete h.cancel;
                if (!S() || this.parent.isJsComponent || this.parent.isHybrid) {
                    h.row = n, h.target = this.actualTarget, this.actualTarget && !g(Tt(this.actualTarget, "thead")) || t.length > 1 ? (h.rowIndex = t[0], h.rowIndexes = t) : 1 === t.length && (h.data = h.data[0], h.row = h.row[0], h.foreignKeyData = h.foreignKeyData[0], this.isAddRowsToSelection && (h.rowIndexes = t))
                } else {
                    h.rowIndex = h.rowIndex[h.rowIndex.length - 1], h.data = h.data[h.data.length - 1]
                }
                this.parent.trigger(e, S() && !this.parent.isJsComponent || 0 === this.parent.getFrozenColumns() ? h : ra({}, h, {
                    mRow: s
                }), (function(e) {
                    l.isCancelDeSelect = e.cancel, l.isCancelDeSelect && (l.isInteracted || l.checkSelectAllClicked) || (l.updatePersistCollection(n[0], !1), l.updateCheckBoxes(n[0], void 0, t[0])), void 0 !== a && a()
                }))
            } else this.selectionSettings.persistSelection && !this.isInteracted && void 0 !== a && a()
        }, e.prototype.getRowObj = function(e) {
            return void 0 === e && (e = this.currentIndex), g(e) ? {} : ("number" == typeof e && (e = this.parent.getRowByIndex(e)), e && this.parent.getRowObjectFromUID(e.getAttribute("data-uid")) || {})
        }, e.prototype.getSelectedMovableCell = function(e) {
            var t = this.parent,
                i = t.getFrozenColumns();
            return i && e.cellIndex >= i ? t.getMovableCellFromIndex(e.rowIndex, this.getColIndex(e.rowIndex, e.cellIndex)) : null
        }, e.prototype.selectCell = function(e, t) {
            if (this.isCellType()) {
                var i, n = this.parent,
                    r = this.getSelectedMovableCell(e);
                r || (r = n.getCellFromIndex(e.rowIndex, this.getColIndex(e.rowIndex, e.cellIndex))), this.currentIndex = e.rowIndex;
                var o = this.getCurrentBatchRecordChanges()[this.currentIndex];
                if (this.isCellType() && r && !this.isEditing()) {
                    var s = r.classList.contains("e-cellselectionbackground");
                    if (t = t ? !f(this.prevCIdxs) && e.rowIndex === this.prevCIdxs.rowIndex && e.cellIndex === this.prevCIdxs.cellIndex && s : t) this.successCallBack(i, t, e, r, o)(i);
                    else {
                        if (i = {
                                data: o,
                                cellIndex: e,
                                isCtrlPressed: this.isMultiCtrlRequest,
                                isShiftPressed: this.isMultiShiftRequest,
                                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0,
                                cancel: !1
                            }, !S() || this.parent.isJsComponent) {
                            i.currentCell = r;
                            i.previousRowCellIndex = this.prevECIdxs
                        }
                        this.parent.trigger("cellSelecting", this.fDataUpdate(i), this.successCallBack(i, t, e, r, o)), this.cellselected = !0
                    }
                }
            }
        }, e.prototype.successCallBack = function(e, t, i, n, r) {
            var o = this;
            return function(e) {
                if ((g(e) || !0 !== e.cancel) && (t || (e.currentCell = e.currentCell ? e.currentCell : n), o.clearCell(), t || o.updateCellSelection(n, i.rowIndex, i.cellIndex), !t)) {
                    var s = void 0;
                    if (!S() || o.parent.isJsComponent || o.parent.isHybrid) {
                        (s = {
                            data: r,
                            cellIndex: i,
                            currentCell: n,
                            selectedRowCellIndex: o.selectedRowCellIndexes,
                            previousRowCell: o.prevECIdxs ? o.getCellIndex(o.prevECIdxs.rowIndex, o.prevECIdxs.cellIndex) : void 0
                        }).previousRowCellIndex = o.prevECIdxs
                    } else s = {
                        data: r,
                        cellIndex: i,
                        selectedRowCellIndex: o.selectedRowCellIndexes
                    };
                    o.updateCellProps(i, i), o.onActionComplete(s, "cellSelected")
                }
            }
        }, e.prototype.getCellIndex = function(e, t) {
            return this.parent.getFrozenColumns() && t >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(e, t) : this.parent.getCellFromIndex(e, t)
        }, e.prototype.selectCellsByRange = function(e, t) {
            var i = this;
            if (this.isCellType()) {
                var n, r, o = this.parent,
                    s = this.getSelectedMovableCell(e),
                    a = o.getFrozenColumns();
                s || (s = o.getCellFromIndex(e.rowIndex, e.cellIndex));
                var l, h = e,
                    p = t = t || e;
                this.currentIndex = e.rowIndex;
                var d = this.getCurrentBatchRecordChanges()[this.currentIndex];
                if (!this.isSingleSel() && this.isCellType() && !this.isEditing()) {
                    var c = {
                        data: d,
                        cellIndex: e,
                        currentCell: s,
                        isCtrlPressed: this.isMultiCtrlRequest,
                        isShiftPressed: this.isMultiShiftRequest,
                        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
                    };
                    if (!S()) {
                        c.previousRowCellIndex = this.prevECIdxs
                    }
                    this.parent.trigger("cellSelecting", this.fDataUpdate(c), (function(c) {
                        if (g(c) || !0 !== c.cancel) {
                            if (i.clearCell(), e.rowIndex > t.rowIndex) {
                                var u = e;
                                e = t, t = u
                            }
                            for (var f = e.rowIndex; f <= t.rowIndex; f++) {
                                i.selectionSettings.cellSelectionMode.indexOf("Box") < 0 ? (n = f === e.rowIndex ? e.cellIndex : 0, r = f === t.rowIndex ? t.cellIndex : i.getLastColIndex(f)) : (n = e.cellIndex, r = t.cellIndex), l = [];
                                for (var m = n < r ? n : r, y = n > r ? n : r; m <= y; m++)(s = a ? m < a ? o.getCellFromIndex(f, m) : o.getMovableCellFromIndex(f, m) : o.getCellFromIndex(f, m)) && (l.push(m), i.updateCellSelection(s), i.addAttribute(s));
                                i.selectedRowCellIndexes.push({
                                    rowIndex: f,
                                    cellIndexes: l
                                })
                            }
                            var v;
                            if (!S() || i.parent.isJsComponent || i.parent.isHybrid) {
                                (v = {
                                    data: d,
                                    cellIndex: p,
                                    currentCell: o.getCellFromIndex(p.rowIndex, p.cellIndex),
                                    selectedRowCellIndex: i.selectedRowCellIndexes,
                                    previousRowCell: i.prevECIdxs ? i.getCellIndex(i.prevECIdxs.rowIndex, i.prevECIdxs.cellIndex) : void 0
                                }).previousRowCellIndex = i.prevECIdxs
                            } else v = {
                                data: d,
                                cellIndex: p,
                                selectedRowCellIndex: i.selectedRowCellIndexes
                            };
                            i.isDragged || (i.onActionComplete(v, "cellSelected"), i.cellselected = !0), i.updateCellProps(h, p)
                        }
                    }))
                }
            }
        }, e.prototype.selectCells = function(e) {
            if (this.isCellType()) {
                var t = this.parent,
                    i = this.getSelectedMovableCell(e[0]),
                    n = t.getFrozenColumns();
                i || (i = t.getCellFromIndex(e[0].rowIndex, e[0].cellIndexes[0])), this.currentIndex = e[0].rowIndex;
                var r = this.getCurrentBatchRecordChanges()[this.currentIndex];
                if (!this.isSingleSel() && this.isCellType() && !this.isEditing()) {
                    var o, s;
                    if (!S() || this.parent.isJsComponent || this.parent.isHybrid)(o = {
                        data: r,
                        cellIndex: e[0].cellIndexes[0],
                        currentCell: i,
                        isCtrlPressed: this.isMultiCtrlRequest,
                        isShiftPressed: this.isMultiShiftRequest,
                        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
                    })["previousRowCellIndex"] = this.prevECIdxs;
                    else o = {
                        data: r,
                        cellIndex: e[0].cellIndexes[0],
                        isCtrlPressed: this.isMultiCtrlRequest,
                        isShiftPressed: this.isMultiShiftRequest
                    };
                    this.onActionBegin(o, "cellSelecting");
                    for (var a = 0, l = e.length; a < l; a++)
                        for (var h = 0, p = e[a].cellIndexes.length; h < p; h++)(i = n ? e[a].cellIndexes[h] < n ? t.getCellFromIndex(e[a].rowIndex, e[a].cellIndexes[h]) : t.getMovableCellFromIndex(e[a].rowIndex, e[a].cellIndexes[h]) : t.getCellFromIndex(e[a].rowIndex, e[a].cellIndexes[h])) && (this.updateCellSelection(i), this.addAttribute(i), this.addRowCellIndex({
                            rowIndex: e[a].rowIndex,
                            cellIndex: e[a].cellIndexes[h]
                        }));
                    if (this.updateCellProps({
                            rowIndex: e[0].rowIndex,
                            cellIndex: e[0].cellIndexes[0]
                        }, {
                            rowIndex: e[0].rowIndex,
                            cellIndex: e[0].cellIndexes[0]
                        }), !S() || this.parent.isJsComponent || this.parent.isHybrid)(s = {
                        data: r,
                        cellIndex: e[0].cellIndexes[0],
                        currentCell: i,
                        selectedRowCellIndex: this.selectedRowCellIndexes,
                        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
                    })["previousRowCellIndex"] = this.prevECIdxs;
                    else s = {
                        data: r,
                        cellIndex: e[0].cellIndexes[0],
                        selectedRowCellIndex: this.selectedRowCellIndexes
                    };
                    this.onActionComplete(s, "cellSelected")
                }
            }
        }, e.prototype.addCellsToSelection = function(e) {
            if (this.isCellType()) {
                var t, i, n = this.parent,
                    r = n.getFrozenColumns();
                this.currentIndex = e[0].rowIndex;
                var o = this.getCurrentBatchRecordChanges()[this.currentIndex];
                if (!this.isSingleSel() && this.isCellType() && !this.isEditing()) {
                    var s;
                    this.hideAutoFill(), s = r && e[0].cellIndex >= r ? n.getMovableRowsObject()[e[0].rowIndex] : this.getRowObj(e[0].rowIndex);
                    for (var a = [], l = 0, h = e; l < h.length; l++) {
                        for (var p = h[l], d = 0, c = this.selectedRowCellIndexes.length; d < c; d++)
                            if (this.selectedRowCellIndexes[d].rowIndex === p.rowIndex) {
                                i = d;
                                break
                            }(t = this.getSelectedMovableCell(p)) || (t = n.getCellFromIndex(p.rowIndex, this.getColIndex(p.rowIndex, p.cellIndex))), a.push(s.cells[r && e[0].cellIndex >= r ? p.cellIndex - r : p.cellIndex].foreignKeyData);
                        var u = void 0;
                        if (!S() || this.parent.isJsComponent || this.parent.isHybrid)(u = {
                            cancel: !1,
                            data: o,
                            cellIndex: e[0],
                            isShiftPressed: this.isMultiShiftRequest,
                            currentCell: t,
                            isCtrlPressed: this.isMultiCtrlRequest,
                            previousRowCell: this.prevECIdxs ? n.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
                        })["previousRowCellIndex"] = this.prevECIdxs;
                        else u = {
                            cancel: !1,
                            data: o,
                            cellIndex: e[0],
                            isShiftPressed: this.isMultiShiftRequest,
                            isCtrlPressed: this.isMultiCtrlRequest
                        };
                        var f = i > -1;
                        if (f) {
                            var m = this.selectedRowCellIndexes[i].cellIndexes;
                            m.indexOf(p.cellIndex) > -1 ? (this.cellDeselect("cellDeselecting", [{
                                rowIndex: p.rowIndex,
                                cellIndexes: [p.cellIndex]
                            }], o, [t], a), m.splice(m.indexOf(p.cellIndex), 1), 0 === m.length && this.selectedRowCellIndexes.splice(i, 1), t.classList.remove("e-cellselectionbackground"), t.removeAttribute("aria-selected"), this.cellDeselect("cellDeselected", [{
                                rowIndex: p.rowIndex,
                                cellIndexes: [p.cellIndex]
                            }], o, [t], a)) : (f = !1, this.onActionBegin(u, "cellSelecting"), this.addRowCellIndex({
                                rowIndex: p.rowIndex,
                                cellIndex: p.cellIndex
                            }), this.updateCellSelection(t), this.addAttribute(t))
                        } else {
                            if (this.onActionBegin(u, "cellSelecting"), !g(u) && !0 === u.cancel) return;
                            this.updateCellSelection(t, p.rowIndex, p.cellIndex)
                        }
                        if (!f) {
                            var y = void 0;
                            if (!S() || this.parent.isJsComponent || this.parent.isHybrid)(y = {
                                data: o,
                                cellIndex: e[0],
                                currentCell: t,
                                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0,
                                selectedRowCellIndex: this.selectedRowCellIndexes
                            })["previousRowCellIndex"] = this.prevECIdxs;
                            else y = {
                                data: o,
                                cellIndex: e[0],
                                selectedRowCellIndex: this.selectedRowCellIndexes
                            };
                            this.onActionComplete(y, "cellSelected"), this.cellselected = !0
                        }
                        this.updateCellProps(p, p)
                    }
                }
            }
        }, e.prototype.getColIndex = function(e, t) {
            var i, n = this.parent.getFrozenColumns();
            if (n && t >= n && (i = this.parent.getMovableDataRows()[e] && this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell")), i || (i = this.parent.getDataRows()[e] && this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell")), i)
                for (var r = 0; r < i.length; r++) {
                    if (parseInt(i[r].getAttribute("aria-colindex"), 10) === t) return n && t >= n && (r += n), r
                }
            return -1
        }, e.prototype.getLastColIndex = function(e) {
            var t = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell") : this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");
            return parseInt(t[t.length - 1].getAttribute("aria-colindex"), 10)
        }, e.prototype.clearCell = function() {
            this.clearCellSelection()
        }, e.prototype.cellDeselect = function(e, t, i, n, r) {
            n[0] && n[0].classList.contains("e-gridchkbox") && this.updateCheckBoxes(Tt(n[0], "tr"));
            var o = {
                cells: n,
                data: i,
                cellIndexes: t,
                foreignKeyData: r,
                cancel: !1
            };
            this.parent.trigger(e, o), this.isPreventCellSelect = o.cancel
        }, e.prototype.updateCellSelection = function(e, t, i) {
            g(t) || this.addRowCellIndex({
                rowIndex: t,
                cellIndex: i
            }), e.classList.add("e-cellselectionbackground"), e.classList.contains("e-gridchkbox") && this.updateCheckBoxes(Tt(e, "tr"), !0), this.addAttribute(e)
        }, e.prototype.addAttribute = function(e) {
            this.target = e, g(e) || (e.setAttribute("aria-selected", "true"), this.preventFocus || this.focus.onClick({
                target: e
            }, !0))
        }, e.prototype.updateCellProps = function(e, t) {
            this.prevCIdxs = e, this.prevECIdxs = t, this.isCellSelected = this.selectedRowCellIndexes.length && !0
        }, e.prototype.addRowCellIndex = function(e) {
            for (var t, i, n = 0, r = this.selectedRowCellIndexes.length; n < r; n++)
                if (this.selectedRowCellIndexes[n].rowIndex === e.rowIndex) {
                    t = !0, i = n;
                    break
                } t ? this.selectedRowCellIndexes[i].cellIndexes.indexOf(e.cellIndex) < 0 && this.selectedRowCellIndexes[i].cellIndexes.push(e.cellIndex) : this.selectedRowCellIndexes.push({
                rowIndex: e.rowIndex,
                cellIndexes: [e.cellIndex]
            })
        }, e.prototype.clearCellSelection = function() {
            if (this.isCellSelected) {
                var e = this.parent,
                    t = this.getSelectedCellsElement(),
                    i = this.selectedRowCellIndexes,
                    n = [],
                    r = [],
                    o = [],
                    s = this.getCurrentBatchRecordChanges(),
                    a = e.getFrozenColumns();
                this.hideAutoFill();
                for (var l = 0, h = i.length; l < h; l++) {
                    n.push(s[i[l].rowIndex]);
                    for (var p = this.getRowObj(i[l].rowIndex), d = 0, c = i[l].cellIndexes.length; d < c; d++) a ? i[l].cellIndexes[d] < a ? r.push(e.getCellFromIndex(i[l].rowIndex, i[l].cellIndexes[d])) : r.push(e.getMovableCellFromIndex(i[l].rowIndex, i[l].cellIndexes[d])) : (p.cells && o.push(p.cells[i[l].cellIndexes[d]].foreignKeyData), r.push(e.getCellFromIndex(i[l].rowIndex, i[l].cellIndexes[d])))
                }
                if (this.cellDeselect("cellDeselecting", i, n, r, o), !0 === this.isPreventCellSelect) return;
                for (l = 0, h = t.length; l < h; l++) t[l].classList.remove("e-cellselectionbackground"), t[l].removeAttribute("aria-selected");
                this.bdrElement && this.showHideBorders("none"), this.selectedRowCellIndexes = [], this.isCellSelected = !1, !this.isDragged && this.cellselected && this.cellDeselect("cellDeselected", i, n, r, o)
            }
        }, e.prototype.getSelectedCellsElement = function() {
            var e, t = this.parent,
                i = t.getDataRows();
            t.getFrozenColumns() && (e = t.getMovableDataRows(), i = t.addMovableRows(i, e));
            for (var n = [], r = 0, o = i.length; r < o; r++) n = n.concat([].slice.call(i[r].querySelectorAll(".e-cellselectionbackground")));
            return n
        }, e.prototype.mouseMoveHandler = function(e) {
            e.preventDefault();
            var t, i = this.parent.element.getBoundingClientRect(),
                n = this.x,
                r = this.y,
                o = Qa(e),
                s = o.x - i.left,
                a = o.y - i.top,
                l = Tt(e.target, "tr");
            if (this.isDragged = !0, this.isCellDrag || (l || (l = Tt(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), "tr")), n > s && (t = s, s = n, n = t), r > a && (t = a, a = r, r = t), this.element.style.left = n + "px", this.element.style.top = r + "px", this.element.style.width = s - n + "px", this.element.style.height = a - r + "px"), l && !e.ctrlKey && !e.shiftKey) {
                var h = parseInt(l.getAttribute("aria-rowindex"), 10);
                if (this.isCellDrag) {
                    var p = Ka(e.target, "e-rowcell");
                    p && (this.startAFCell = this.startCell, this.endAFCell = Ka(e.target, "e-rowcell"), this.selectLikeExcel(e, h, parseInt(p.getAttribute("aria-colindex"), 10)))
                } else this.hideAutoFill(), this.selectRowsByRange(this.startDIndex, h)
            }
        }, e.prototype.selectLikeExcel = function(e, t, i) {
            this.isAutoFillSel ? (this.showAFBorders(), this.selectLikeAutoFill(e)) : (this.clearCellSelection(), this.selectCellsByRange({
                rowIndex: this.startDIndex,
                cellIndex: this.startDCellIndex
            }, {
                rowIndex: t,
                cellIndex: i
            }), this.drawBorders())
        }, e.prototype.drawBorders = function() {
            "BoxWithBorder" === this.selectionSettings.cellSelectionMode && this.selectedRowCellIndexes.length && !this.parent.isEdit ? (this.parent.element.classList.add("e-enabledboxbdr"), this.bdrElement || this.createBorders(), this.positionBorders()) : this.showHideBorders("none")
        }, e.prototype.isLastCell = function(e) {
            var t = [].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));
            return t[t.length - 1] === e
        }, e.prototype.isLastRow = function(e) {
            var t = [].slice.call(Tt(e, "tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));
            return e.parentElement === t[t.length - 1]
        }, e.prototype.isFirstRow = function(e) {
            var t = [].slice.call(Tt(e, "tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));
            return e.parentElement === t[0]
        }, e.prototype.isFirstCell = function(e) {
            return [].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0] === e
        }, e.prototype.setBorders = function(e, t, i) {
            var n = [].slice.call(e.querySelectorAll(".e-cellselectionbackground")).filter((function(e) {
                return "" === e.style.display
            }));
            if (n.length) {
                var r = n[0],
                    o = n[n.length - 1],
                    s = r.getBoundingClientRect(),
                    a = o.getBoundingClientRect(),
                    l = r.offsetParent.getBoundingClientRect(),
                    h = !this.isLastRow(o) || "1" !== i && "2" !== i ? 0 : 2,
                    p = this.parent.frozenRows && ("1" === i || "2" === i) && this.isFirstRow(r) ? 1.5 : 0,
                    d = this.parent.getFrozenColumns() && ("2" === i || "4" === i) && this.isFirstCell(r) ? 1 : 0;
                this.parent.enableRtl ? (t.style.right = l.right - s.right - d + "px", t.style.width = s.right - a.left + d + 1 + "px") : (t.style.left = s.left - l.left - d + "px", t.style.width = a.right - s.left + d + 1 + "px"), t.style.top = s.top - l.top - p + "px", t.style.height = a.top - s.top > 0 ? a.top - l.top + a.height + 1 - (s.top - l.top) - h + p + "px" : a.height + p - h + 1 + "px", this.selectDirection += i
            } else t.style.display = "none"
        }, e.prototype.positionBorders = function() {
            this.updateStartEndCells(), this.startCell && this.bdrElement && this.selectedRowCellIndexes.length && (this.selectDirection = "", this.showHideBorders(""), this.setBorders(this.parent.getContentTable(), this.bdrElement, "1"), this.parent.getFrozenColumns() && this.setBorders(this.parent.contentModule.getMovableContent(), this.mcBdrElement, "2"), this.parent.frozenRows && (this.setBorders(this.parent.getHeaderTable(), this.fhBdrElement, "3"), this.parent.getFrozenColumns() && this.setBorders(this.parent.headerModule.getMovableHeader(), this.mhBdrElement, "4")), this.applyBorders(this.selectDirection))
        }, e.prototype.applyBorders = function(e) {
            var t = this.parent.enableRtl;
            switch (e.length) {
                case 4:
                    this.bdrElement.style.borderWidth = t ? "0 2px 2px 0" : "0 0 2px 2px", this.mcBdrElement.style.borderWidth = t ? "0 0 2px 2px" : "0 2px 2px 0", this.fhBdrElement.style.borderWidth = t ? "2px 2px 0 0" : "2px 0 0 2px", this.mhBdrElement.style.borderWidth = t ? "2px 0 0 2px" : "2px 2px 0 0";
                    break;
                case 2:
                    this.bdrElement.style.borderWidth = e.includes("2") ? t ? "2px 2px 2px 0" : "2px 0 2px 2px" : "0 2px 2px 2px", this.parent.getFrozenColumns() && (this.mcBdrElement.style.borderWidth = e.includes("1") ? t ? "2px 0 2px 2px" : "2px 2px 2px 0" : "0 2px 2px 2px"), this.parent.frozenRows && (this.fhBdrElement.style.borderWidth = e.includes("1") ? "2px 2px 0 2px" : t ? "2px 2px 2px 0" : "2px 0 2px 2px", this.parent.getFrozenColumns() && (this.mhBdrElement.style.borderWidth = e.includes("2") ? "2px 2px 0 2px" : t ? "2px 0 2px 2px" : "2px 2px 2px 0"));
                    break;
                default:
                    this.bdrElement.style.borderWidth = "2px", this.parent.getFrozenColumns() && (this.mcBdrElement.style.borderWidth = "2px"), this.parent.frozenRows && (this.fhBdrElement.style.borderWidth = "2px", this.parent.getFrozenColumns() && (this.mhBdrElement.style.borderWidth = "2px"))
            }
        }, e.prototype.createBorders = function() {
            this.bdrElement || (this.bdrElement = this.parent.getContentTable().parentElement.appendChild(ct("div", {
                className: "e-xlsel",
                id: this.parent.element.id + "_bdr",
                styles: "width: 2px; border-width: 0;"
            })), this.parent.getFrozenColumns() && (this.mcBdrElement = this.parent.contentModule.getMovableContent().appendChild(ct("div", {
                className: "e-xlsel",
                id: this.parent.element.id + "_mcbdr",
                styles: "height: 2px; border-width: 0;"
            }))), this.parent.frozenRows && (this.fhBdrElement = this.parent.getHeaderTable().parentElement.appendChild(ct("div", {
                className: "e-xlsel",
                id: this.parent.element.id + "_fhbdr",
                styles: "height: 2px;"
            }))), this.parent.frozenRows && this.parent.getFrozenColumns() && (this.mhBdrElement = this.parent.headerModule.getMovableHeader().appendChild(ct("div", {
                className: "e-xlsel",
                id: this.parent.element.id + "_mhbdr",
                styles: "height: 2px;"
            }))))
        }, e.prototype.showHideBorders = function(e) {
            this.bdrElement && (this.bdrElement.style.display = e, this.parent.getFrozenColumns() && (this.mcBdrElement.style.display = e), this.parent.frozenRows && (this.fhBdrElement.style.display = e), this.parent.frozenRows && this.parent.getFrozenColumns() && (this.mhBdrElement.style.display = e))
        }, e.prototype.drawAFBorders = function() {
            this.bdrAFBottom || this.createAFBorders(), this.positionAFBorders()
        }, e.prototype.positionAFBorders = function() {
            if (this.startCell && this.bdrAFLeft) {
                var e = this.startAFCell.getBoundingClientRect(),
                    t = this.endAFCell.getBoundingClientRect(),
                    i = t.top - e.top > 0 ? 1 : 0,
                    n = t.top - e.top >= 0 && (Ka(this.startAFCell, "e-movablecontent") || Ka(this.startAFCell, "e-frozencontent")) && this.isFirstRow(this.startAFCell) ? 1.5 : 0,
                    r = (Ka(this.startAFCell, "e-movablecontent") || Ka(this.startAFCell, "e-movableheader")) && this.isFirstCell(this.startAFCell) ? 1 : 0,
                    o = this.isLastRow(this.endAFCell) && (Ka(this.endAFCell, "e-movablecontent") || Ka(this.endAFCell, "e-frozencontent")) ? 2 : 0,
                    s = this.startAFCell.offsetParent.getBoundingClientRect(),
                    a = this.parent.element.getBoundingClientRect(),
                    l = this.startAFCell.offsetParent.parentElement.scrollTop,
                    h = this.startAFCell.offsetParent.parentElement.scrollLeft,
                    p = l - this.startAFCell.offsetTop,
                    d = h - this.startAFCell.offsetLeft,
                    c = this.parent.element.clientHeight,
                    u = this.parent.element.clientWidth;
                p = p > 0 ? Math.floor(p) - 1 : 0, d = d > 0 ? d : 0;
                var g = e.left - a.left;
                if (this.parent.enableRtl) {
                    var f = Ka(this.startAFCell, "e-movablecontent") || Ka(this.startAFCell, "e-movableheader") ? e.right - this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width - a.left : 0;
                    this.bdrAFLeft.style.right = a.right - t.right - 2 + t.width + "px", this.bdrAFLeft.style.width = u <= parseInt(this.bdrAFLeft.style.right, 10) ? "0px" : "2px", this.bdrAFRight.style.right = a.right - e.right - r + f - 1 + "px", this.bdrAFTop.style.left = t.left - a.left - .5 + "px", this.bdrAFTop.style.width = parseInt(this.bdrAFLeft.style.right, 10) - parseInt(this.bdrAFRight.style.right, 10) - r + 1 + "px", parseInt(this.bdrAFTop.style.left, 10) < 0 && (this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10) + "px", this.bdrAFTop.style.left = "0px")
                } else if (this.bdrAFLeft.style.left = g - r + d - 1 + "px", this.bdrAFRight.style.left = t.left - a.left - 2 + t.width + "px", this.bdrAFRight.style.width = u <= parseInt(this.bdrAFRight.style.left, 10) ? "0px" : "2px", this.bdrAFTop.style.left = g + d - .5 + "px", this.bdrAFTop.style.width = parseInt(this.bdrAFRight.style.left, 10) - parseInt(this.bdrAFLeft.style.left, 10) - r + 1 + "px", u <= parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10)) {
                    var m = parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10) - u;
                    this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) - m + "px"
                }
                if (this.bdrAFLeft.style.top = e.top - a.top - n + p + "px", this.bdrAFLeft.style.height = t.top - e.top > 0 ? t.top - s.top + t.height + 1 - (e.top - s.top) + n - o - p + "px" : t.height + n - o - p + "px", this.bdrAFRight.style.top = this.bdrAFLeft.style.top, this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + "px", this.bdrAFTop.style.top = this.bdrAFRight.style.top, this.bdrAFBottom.style.left = this.bdrAFTop.style.left, this.bdrAFBottom.style.top = parseFloat(this.bdrAFLeft.style.top) + parseFloat(this.bdrAFLeft.style.height) - i - 1 + "px", this.bdrAFBottom.style.width = c <= parseFloat(this.bdrAFBottom.style.top) ? "0px" : this.bdrAFTop.style.width, c <= parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10)) {
                    var y = parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10) - c;
                    this.bdrAFLeft.style.height = parseInt(this.bdrAFLeft.style.height, 10) - y + "px", this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + "px"
                }
            }
        }, e.prototype.createAFBorders = function() {
            this.bdrAFLeft || (this.bdrAFLeft = this.parent.element.appendChild(ct("div", {
                className: "e-xlselaf",
                id: this.parent.element.id + "_bdrafleft",
                styles: "width: 2px;"
            })), this.bdrAFRight = this.parent.element.appendChild(ct("div", {
                className: "e-xlselaf",
                id: this.parent.element.id + "_bdrafright",
                styles: "width: 2px;"
            })), this.bdrAFBottom = this.parent.element.appendChild(ct("div", {
                className: "e-xlselaf",
                id: this.parent.element.id + "_bdrafbottom",
                styles: "height: 2px;"
            })), this.bdrAFTop = this.parent.element.appendChild(ct("div", {
                className: "e-xlselaf",
                id: this.parent.element.id + "_bdraftop",
                styles: "height: 2px;"
            })))
        }, e.prototype.showAFBorders = function() {
            this.bdrAFLeft && (this.bdrAFLeft.style.display = "", this.bdrAFRight.style.display = "", this.bdrAFBottom.style.display = "", this.bdrAFTop.style.display = "")
        }, e.prototype.hideAFBorders = function() {
            this.bdrAFLeft && (this.bdrAFLeft.style.display = "none", this.bdrAFRight.style.display = "none", this.bdrAFBottom.style.display = "none", this.bdrAFTop.style.display = "none")
        }, e.prototype.updateValue = function(e, t, i) {
            var n = this.createBeforeAutoFill(e, t, i);
            if (!n.cancel) {
                var r = this.parent.getColumnByIndex(t);
                this.parent.editModule && i && ("number" === r.type ? this.parent.editModule.updateCell(e, r.field, parseInt(n.value, 10)) : this.parent.editModule.updateCell(e, r.field, n.value))
            }
        }, e.prototype.createBeforeAutoFill = function(e, t, i) {
            var n = {
                column: this.parent.getColumnByIndex(t),
                value: i.innerText
            };
            return this.parent.trigger("beforeAutoFill", n), n
        }, e.prototype.getAutoFillCells = function(e, t) {
            var i = [].slice.call(this.parent.getDataRows()[e].querySelectorAll(".e-cellselectionbackground"));
            return this.parent.getFrozenColumns() && (i = i.concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(".e-cellselectionbackground")))), i
        }, e.prototype.selectLikeAutoFill = function(e, t) {
            var i = parseInt(Ka(this.startAFCell, "e-row").getAttribute("aria-rowindex"), 10),
                n = parseInt(this.startAFCell.getAttribute("aria-colindex"), 10),
                r = parseInt(Ka(this.endAFCell, "e-row").getAttribute("aria-rowindex"), 10),
                o = parseInt(this.endAFCell.getAttribute("aria-colindex"), 10),
                s = this.selectedRowCellIndexes.length - 1,
                a = this.selectedRowCellIndexes[0].cellIndexes.length - 1;
            switch (!0) {
                case !t && this.endAFCell.classList.contains("e-cellselectionbackground") && !!Ka(e.target, "e-rowcell"):
                    this.startAFCell = this.parent.getCellFromIndex(i, n), this.endAFCell = this.parent.getCellFromIndex(i + s, n + a), this.drawAFBorders();
                    break;
                case this.autoFillRLselection && n + a < o && o - n - a + 1 > r - i - s && o - n - a + 1 > i - r:
                    if (this.endAFCell = this.parent.getCellFromIndex(i + s, o), r = parseInt(Ka(this.endAFCell, "e-row").getAttribute("aria-rowindex"), 10), o = parseInt(this.endAFCell.getAttribute("aria-colindex"), 10), t) {
                        for (var l = parseInt(this.endCell.getAttribute("aria-colindex"), 10), h = i; h <= r; h++)
                            for (var p = this.getAutoFillCells(h, n), d = 0, c = l + 1; c <= o; c++) d > a && (d = 0), this.updateValue(h, c, p[d]), d++;
                        this.selectCellsByRange({
                            rowIndex: i,
                            cellIndex: this.startCellIndex
                        }, {
                            rowIndex: r,
                            cellIndex: o
                        })
                    } else this.drawAFBorders();
                    break;
                case this.autoFillRLselection && n > o && n - o + 1 > r - i - s && n - o + 1 > i - r:
                    if (this.startAFCell = this.parent.getCellFromIndex(i, o), this.endAFCell = this.endCell, t) {
                        for (h = i; h <= i + s; h++) {
                            (p = this.getAutoFillCells(h, n)).reverse();
                            for (d = 0, c = this.startCellIndex - 1; c >= o; c--) d > a && (d = 0), this.updateValue(h, c, p[d]), d++
                        }
                        this.selectCellsByRange({
                            rowIndex: i,
                            cellIndex: o
                        }, {
                            rowIndex: i + s,
                            cellIndex: this.startCellIndex + a
                        })
                    } else this.drawAFBorders();
                    break;
                case i > r:
                    if (this.startAFCell = this.parent.getCellFromIndex(r, n), this.endAFCell = this.endCell, t) {
                        var u = g = parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"), 10);
                        for (h = i - 1; h >= r; h--) {
                            u === this.startIndex - 1 && (u = g);
                            p = this.getAutoFillCells(u, n), d = 0;
                            u--;
                            for (c = this.startCellIndex; c <= this.startCellIndex + a; c++) this.updateValue(h, c, p[d]), d++
                        }
                        this.selectCellsByRange({
                            rowIndex: r,
                            cellIndex: n + a
                        }, {
                            rowIndex: i + s,
                            cellIndex: n
                        })
                    } else this.drawAFBorders();
                    break;
                default:
                    if (this.endAFCell = this.parent.getCellFromIndex(r, n + a), t) {
                        var g = parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"), 10);
                        for (u = this.startIndex, h = g + 1; h <= r; h++) {
                            u === g + 1 && (u = this.startIndex);
                            p = this.getAutoFillCells(u, n);
                            u++;
                            d = 0;
                            for (var f = this.startCellIndex; f <= this.startCellIndex + a; f++) this.updateValue(h, f, p[d]), d++
                        }
                        this.selectCellsByRange({
                            rowIndex: g - s,
                            cellIndex: n
                        }, {
                            rowIndex: r,
                            cellIndex: n + a
                        })
                    } else this.drawAFBorders()
            }
        }, e.prototype.mouseUpHandler = function(e) {
            if (document.body.classList.remove("e-disableuserselect"), this.element && Ct(this.element), this.isDragged && 1 === this.selectedRowCellIndexes.length && 1 === this.selectedRowCellIndexes[0].cellIndexes.length ? this.mUPTarget = Ka(e.target, "e-rowcell") : this.mUPTarget = null, this.isDragged && !this.isAutoFillSel && "Cell" === this.selectionSettings.mode) {
                var t = e.target,
                    i = parseInt(t.parentElement.getAttribute("aria-rowindex"), 10),
                    n = parseInt(t.getAttribute("aria-colindex"), 10);
                this.isDragged = !1, this.clearCellSelection(), this.selectCellsByRange({
                    rowIndex: this.startDIndex,
                    cellIndex: this.startDCellIndex
                }, {
                    rowIndex: i,
                    cellIndex: n
                })
            }
            if (this.isDragged = !1, this.updateAutoFillPosition(), this.isAutoFillSel) {
                var r = Ka(e.target, "e-rowcell");
                this.endAFCell = r || (this.endCell === this.endAFCell ? this.startAFCell : this.endAFCell), this.startAFCell = this.startCell, this.updateStartCellsIndex(), this.selectLikeAutoFill(e, !0), this.updateAutoFillPosition(), this.hideAFBorders(), this.positionBorders(), this.isAutoFillSel = !1
            }
            ye.remove(this.parent.getContent(), "mousemove", this.mouseMoveHandler), this.parent.frozenRows && ye.remove(this.parent.getHeaderContent(), "mousemove", this.mouseMoveHandler), ye.remove(document.body, "mouseup", this.mouseUpHandler)
        }, e.prototype.hideAutoFill = function() {
            this.autofill && (this.autofill.style.display = "none")
        }, e.prototype.updateAutoFillPosition = function() {
            if (this.parent.enableAutoFill && !this.parent.isEdit && this.selectionSettings.cellSelectionMode.indexOf("Box") > -1 && !this.isRowType() && !this.isSingleSel() && this.selectedRowCellIndexes.length) {
                var e = this.parent.getFrozenColumns(),
                    t = parseInt(this.target.getAttribute("aria-colindex"), 10),
                    i = parseInt(this.target.getAttribute("index"), 10),
                    n = this.selectedRowCellIndexes[this.selectedRowCellIndexes.length - 1].rowIndex,
                    r = this.getAutoFillCells(n, t).filter((function(e) {
                        return "" === e.style.display
                    })),
                    o = void 0,
                    s = void 0;
                e && t >= e && (o = !0), i < this.parent.frozenRows && (s = !0), Ka(this.target, "e-table").querySelector("#" + this.parent.element.id + "_autofill") || (this.parent.element.querySelector("#" + this.parent.element.id + "_autofill") && this.parent.element.querySelector("#" + this.parent.element.id + "_autofill").remove(), this.autofill = ct("div", {
                    className: "e-autofill",
                    id: this.parent.element.id + "_autofill"
                }), this.autofill.style.display = "none", s ? o ? this.parent.headerModule.getMovableHeader().appendChild(this.autofill) : this.parent.getHeaderTable().parentElement.appendChild(this.autofill) : o ? this.parent.contentModule.getMovableContent().appendChild(this.autofill) : this.parent.getContentTable().parentElement.appendChild(this.autofill));
                var a = r[r.length - 1];
                if (a && a.offsetParent) {
                    var l = a.getBoundingClientRect(),
                        h = a.offsetParent.getBoundingClientRect(),
                        p = this.isLastCell(a) ? 4 : 0,
                        d = this.isLastRow(a) ? 3 : 0;
                    this.parent.enableRtl ? this.autofill.style.right = h.right - l.right + l.width - 4 - p + "px" : this.autofill.style.left = l.left - h.left + l.width - 4 - p + "px", this.autofill.style.top = l.top - h.top + l.height - 5 - d + "px"
                }
                this.autofill.style.display = ""
            } else this.hideAutoFill()
        }, e.prototype.mouseDownHandler = function(e) {
            this.mouseButton = e.button;
            var t, i = e.target,
                n = this.parent,
                r = Ka(i, "e-grid");
            if (!(r && r.id !== n.element.id || Ka(i, "e-headercontent") && !this.parent.frozenRows || Ka(i, "e-editedbatchcell") || Ka(i, "e-editedrow"))) {
                if ((e.shiftKey || e.ctrlKey) && e.preventDefault(), Ka(i, "e-rowcell") && !e.shiftKey && !e.ctrlKey) {
                    if (n.selectionSettings.cellSelectionMode.indexOf("Box") > -1 && !this.isRowType() && !this.isSingleSel()) this.isCellDrag = !0, t = !0;
                    else if (n.allowRowDragAndDrop && !n.isEdit) {
                        if (!this.isRowType() || this.isSingleSel() || Tt(i, "td").classList.contains("e-selectionbackground")) return void(this.isDragged = !1);
                        t = !0, this.element = this.parent.createElement("div", {
                            className: "e-griddragarea"
                        }), n.getContent().appendChild(this.element)
                    }
                    t && this.enableDrag(e, !0)
                }
                this.updateStartEndCells(), (i.classList.contains("e-autofill") || i.classList.contains("e-xlsel")) && (this.isCellDrag = !0, this.isAutoFillSel = !0, this.enableDrag(e))
            }
        }, e.prototype.updateStartEndCells = function() {
            var e = [].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));
            this.startCell = e[0], this.endCell = e[e.length - 1], this.startCell && (this.startIndex = parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"), 10), this.startCellIndex = parseInt(Ka(this.startCell, "e-rowcell").getAttribute("aria-colindex"), 10))
        }, e.prototype.updateStartCellsIndex = function() {
            this.startCell && (this.startIndex = parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"), 10), this.startCellIndex = parseInt(Ka(this.startCell, "e-rowcell").getAttribute("aria-colindex"), 10))
        }, e.prototype.enableDrag = function(e, t) {
            var i = this.parent;
            if (t) {
                var n = Tt(e.target, "tr");
                this.startDIndex = parseInt(n.getAttribute("aria-rowindex"), 10), this.startDCellIndex = parseInt(Ka(e.target, "e-rowcell").getAttribute("aria-colindex"), 10)
            }
            document.body.classList.add("e-disableuserselect");
            var r = i.element.getBoundingClientRect(),
                o = Qa(e);
            this.x = o.x - r.left, this.y = o.y - r.top, ye.add(i.getContent(), "mousemove", this.mouseMoveHandler, this), this.parent.frozenRows && ye.add(i.getHeaderContent(), "mousemove", this.mouseMoveHandler, this), ye.add(document.body, "mouseup", this.mouseUpHandler, this)
        }, e.prototype.clearSelAfterRefresh = function(e) {
            var t = this.parent.enableInfiniteScrolling && "infiniteScroll" === e.requestType;
            "virtualscroll" === e.requestType || this.parent.isPersistSelection || t || this.clearSelection()
        }, e.prototype.addEventListener = function() {
            this.parent.isDestroyed || (this.parent.on(kr, this.enableAfterRender, this), this.parent.on(Sr, this.initializeSelection, this), this.parent.on("rowselected", this.onActionComplete, this), this.parent.on("cellselected", this.onActionComplete, this), this.parent.on(Dr, this.onPropertyChanged, this), this.parent.on("cellfocused", this.onCellFocused, this), this.parent.on("beforeFragAppend", this.clearSelAfterRefresh, this), this.parent.on("column-position-changed", this.columnPositionChanged, this), this.parent.on(xr, this.initialEnd, this), this.actionBeginFunction = this.actionBegin.bind(this), this.actionCompleteFunction = this.actionComplete.bind(this), this.parent.addEventListener(wr, this.actionBeginFunction), this.parent.addEventListener("actionComplete", this.actionCompleteFunction), this.parent.on("rows-removed", this.rowsRemoved, this), this.parent.on(Rr, this.refreshHeader, this), this.addEventListener_checkbox())
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off(kr, this.enableAfterRender), this.parent.off(Sr, this.initializeSelection), this.parent.off("rowselected", this.onActionComplete), this.parent.off("cellselected", this.onActionComplete), this.parent.off(Dr, this.onPropertyChanged), this.parent.off("cellfocused", this.onCellFocused), this.parent.off("beforeFragAppend", this.clearSelAfterRefresh), this.parent.off("column-position-changed", this.columnPositionChanged), this.parent.removeEventListener(wr, this.actionBeginFunction), this.parent.removeEventListener("actionComplete", this.actionCompleteFunction), this.parent.off("rows-removed", this.rowsRemoved), this.parent.off(Rr, this.refreshHeader), this.removeEventListener_checkbox())
        }, e.prototype.wireEvents = function() {
            this.isMacOS = -1 !== navigator.userAgent.indexOf("Mac OS"), this.isMacOS && (ye.add(this.parent.element, "keydown", this.keyDownHandler, this), ye.add(this.parent.element, "keyup", this.keyUpHandler, this))
        }, e.prototype.unWireEvents = function() {
            this.isMacOS && (ye.remove(this.parent.element, "keydown", this.keyDownHandler), ye.remove(this.parent.element, "keyup", this.keyUpHandler))
        }, e.prototype.columnPositionChanged = function() {
            this.parent.isPersistSelection || this.clearSelection()
        }, e.prototype.refreshHeader = function() {
            this.setCheckAllState()
        }, e.prototype.rowsRemoved = function(e) {
            for (var t = 0; t < e.records.length; t++) delete this.selectedRowState[e.records[t][this.primaryKey]], --this.totalRecordsCount;
            this.setCheckAllState()
        }, e.prototype.beforeFragAppend = function(e) {
            "virtualscroll" === e.requestType || this.parent.isPersistSelection || this.clearSelection()
        }, e.prototype.getCheckAllBox = function() {
            return this.parent.getHeaderContent().querySelector(".e-checkselectall")
        }, e.prototype.enableAfterRender = function(e) {
            e.module === this.getModuleName() && e.enable && (this.render(), this.initPerisistSelection())
        }, e.prototype.render = function(e) {
            ye.add(this.parent.getContent(), "mousedown", this.mouseDownHandler, this), ye.add(this.parent.getHeaderContent(), "mousedown", this.mouseDownHandler, this)
        }, e.prototype.onPropertyChanged = function(e) {
            if (e.module === this.getModuleName()) {
                var t = this.parent;
                g(e.properties.type) || "Single" !== this.selectionSettings.type || (this.selectedRowCellIndexes.length > 1 && (this.clearCellSelection(), this.prevCIdxs = void 0), this.selectedRowIndexes.length > 1 && (this.clearRowSelection(), this.prevRowIndex = void 0), this.enableSelectMultiTouch = !1, this.hidePopUp()), g(e.properties.mode) && g(e.properties.cellSelectionMode) || (this.clearSelection(), this.prevRowIndex = void 0, this.prevCIdxs = void 0), this.isPersisted = !0, this.checkBoxSelectionChanged(), this.isPersisted = !1, this.initPerisistSelection(), this.parent.getColumns().filter((function(e) {
                    return "checkbox" === e.type
                })).length && (t.isCheckBoxSelection = !("ResetOnRowClick" === this.selectionSettings.checkboxMode)), this.drawBorders()
            }
        }, e.prototype.hidePopUp = function() {
            this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-rowselect").length && (this.parent.element.querySelector(".e-gridpopup").style.display = "none")
        }, e.prototype.initialEnd = function() {
            this.parent.off(xr, this.initialEnd), this.selectRow(this.parent.selectedRowIndex)
        }, e.prototype.checkBoxSelectionChanged = function() {
            this.parent.off(xr, this.checkBoxSelectionChanged);
            var e = this.parent,
                t = e.getColumns().filter((function(e) {
                    return "checkbox" === e.type
                }));
            t.length > 0 && (e.isCheckBoxSelection = !0, this.chkField = t[0].field, this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount, g(this.totalRecordsCount) && (this.totalRecordsCount = this.getCurrentBatchRecordChanges().length), this.isSingleSel() ? (e.selectionSettings.type = "Multiple", e.dataBind()) : this.initPerisistSelection()), e.isCheckBoxSelection || this.isPersisted || (this.chkField = null, this.initPerisistSelection())
        }, e.prototype.initPerisistSelection = function() {
            var e = this.parent;
            this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0 ? (e.isPersistSelection = !0, this.ensureCheckboxFieldSelection()) : this.parent.getPrimaryKeyFieldNames().length > 0 ? (e.isPersistSelection = !1, this.ensureCheckboxFieldSelection()) : (e.isPersistSelection = !1, this.selectedRowState = {})
        }, e.prototype.ensureCheckboxFieldSelection = function() {
            var e = this.parent;
            if (this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0], !e.enableVirtualization && this.chkField && (e.isPersistSelection && 0 === Object.keys(this.selectedRowState).length || !e.isPersistSelection)) {
                var t = this.parent.getDataModule(),
                    i = (new on).where(this.chkField, "equal", !0);
                i.params || (i.params = this.parent.query.params);
                var n = t.getData({}, i),
                    r = this;
                this.parent.showSpinner(), n.then((function(e) {
                    r.dataSuccess(e.result), r.refreshPersistSelection(), r.parent.hideSpinner()
                }))
            }
        }, e.prototype.dataSuccess = function(e) {
            for (var t = 0; t < e.length; t++) g(this.selectedRowState[e[t][this.primaryKey]]) && e[t][this.chkField] && (this.selectedRowState[e[t][this.primaryKey]] = e[t][this.chkField]);
            this.persistSelectedData = e
        }, e.prototype.setRowSelection = function(e) {
            if (!this.parent.getDataModule().isRemote() && !S())
                if (e)
                    if (this.parent.groupSettings.columns.length)
                        for (var t = 0, i = this.getData().records; t < i.length; t++) {
                            var n = i[t];
                            this.selectedRowState[n[this.primaryKey]] = !0
                        } else
                            for (var r = 0, o = this.getData(); r < o.length; r++) {
                                n = o[r];
                                this.selectedRowState[n[this.primaryKey]] = !0
                            } else this.selectedRowState = {}
        }, e.prototype.getData = function() {
            return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))
        }, e.prototype.refreshPersistSelection = function() {
            var e = this.parent.getRows();
            if (null !== e && e.length > 0 && (this.parent.isPersistSelection || this.chkField)) {
                for (var t = [], i = 0; i < e.length; i++) {
                    var n = this.getRowObj(e[i]),
                        r = n && n.data ? n.data[this.primaryKey] : null;
                    if (null === r) return;
                    var o = void 0,
                        s = e[i].querySelector(".e-checkselect");
                    this.selectedRowState[r] || "Check" === this.parent.checkAllRows && this.chkAllCollec.indexOf(r) < 0 || "Uncheck" === this.parent.checkAllRows && this.chkAllCollec.indexOf(r) > 0 || "Intermediate" === this.parent.checkAllRows && !g(this.chkField) && n.data[this.chkField] ? (t.push(parseInt(e[i].getAttribute("aria-rowindex"), 10)), o = !0) : (o = !1, this.checkedTarget !== s && this.parent.isCheckBoxSelection && yl(s.nextElementSibling, o)), this.updatePersistCollection(e[i], o)
                }
                this.isSingleSel() && t.length > 0 ? this.selectRow(t[0], !0) : this.selectRows(t)
            }
            this.parent.isCheckBoxSelection && this.getCurrentBatchRecordChanges().length > 0 && this.setCheckAllState()
        }, e.prototype.actionBegin = function(e) {
            if ("save" === e.requestType && this.parent.isPersistSelection) {
                var t = this.parent.element.querySelector(".e-edit-checkselect");
                if (!g(t)) {
                    var i = Tt(t, ".e-editedrow");
                    if (i) {
                        "Dialog" === this.parent.editSettings.mode && (i = this.parent.element.querySelector(".e-dlgeditrow"));
                        var n = this.getRowObj(i);
                        if (!n) return;
                        this.selectedRowState[n.data[this.primaryKey]] = n.isSelected = t.checked
                    } else this.isCheckedOnAdd = t.checked
                }
            }
        }, e.prototype.actionComplete = function(e) {
            if ("save" === e.requestType && this.parent.isPersistSelection) {
                if ("add" === e.action && this.isCheckedOnAdd) {
                    var t = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));
                    this.selectedRowState[t.data[this.primaryKey]] = t.isSelected = this.isCheckedOnAdd
                }
                this.refreshPersistSelection()
            }
            if ("delete" === e.requestType && this.parent.isPersistSelection) {
                for (var i = (S() ? this.getSelectedRecords() : e.data).slice(), n = 0; n < i.length; n++) g(i[n][this.primaryKey]) || this.updatePersistDelete(i[n][this.primaryKey]);
                this.setCheckAllState(), this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount
            }
            "paging" === e.requestType && (this.prevRowIndex = void 0, this.prevCIdxs = void 0, this.prevECIdxs = void 0)
        }, e.prototype.onDataBound = function() {
            if (!this.parent.enableVirtualization && this.parent.isPersistSelection && this.refreshPersistSelection(), this.parent.enableVirtualization && this.setCheckAllState(), this.parent.isCheckBoxSelection && !this.initialRowSelection) {
                for (var e = this.parent.getRowsObject(), t = [], i = 0; i < e.length; i++) e[i].isSelected && t.push(i);
                t.length && this.selectRows(t), this.initialRowSelection = !0
            }
        }, e.prototype.updatePersistSelectedData = function(e) {
            if (this.parent.isPersistSelection) {
                for (var t = this.parent.getRows(), i = 0; i < t.length; i++) this.updatePersistCollection(t[i], e);
                "Uncheck" === this.parent.checkAllRows ? (this.setRowSelection(!1), this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : []) : "Check" === this.parent.checkAllRows && (this.setRowSelection(!0), this.persistSelectedData = this.parent.getDataModule().isRemote() || S() ? this.persistSelectedData : this.parent.groupSettings.columns.length ? this.getData().records.slice() : this.getData().slice())
            }
        }, e.prototype.checkSelectAllAction = function(e) {
            var t = this.getRenderer(),
                i = this.parent.element.querySelector(".e-gridform");
            if (this.checkedTarget = this.getCheckAllBox(), e && this.getCurrentBatchRecordChanges().length ? (this.parent.checkAllRows = "Check", this.updatePersistSelectedData(e), S() && this.parent.enableVirtualization && !g(this.parent.contentModule.currentInfo.endIndex) ? this.selectRowsByRange(this.parent.contentModule.currentInfo.startIndex, this.parent.contentModule.currentInfo.endIndex) : this.selectRowsByRange(t.getVirtualRowIndex(0), t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length - 1))) : (this.parent.checkAllRows = "Uncheck", this.updatePersistSelectedData(e), this.clearSelection()), this.chkAllCollec = [], !g(i)) {
                var n = i.querySelector(".e-edit-checkselect");
                g(n) || yl(n.nextElementSibling, e)
            }
        }, e.prototype.checkSelectAll = function(e) {
            var t = this,
                i = this.getCheckAllStatus(e),
                n = "Check" === i;
            if (this.isHeaderCheckboxClicked = !0, "Intermediate" === i && (n = this.getCurrentBatchRecordChanges().some((function(e) {
                    return e[t.primaryKey] in t.selectedRowState
                }))), this.parent.isPersistSelection && this.parent.allowPaging && (this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount), this.checkSelectAllAction(!n), S() && this.parent.isServerRendered && this.parent.enableVirtualization) {
                if (this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection", !n, "checkbox", null), this.checkBoxState = !n, !n) {
                    var r = this.parent.contentModule.vgenerator.rowCache;
                    Object.values(r).forEach((function(e) {
                        return e.isSelected = !0
                    }));
                    for (var o = 0; o < Object.keys(r).length; o++) - 1 === this.parent.selectionModule.selectedRowIndexes.indexOf(Number(Object.keys(r)[o])) && this.parent.selectionModule.selectedRowIndexes.push(Number(Object.keys(r)[o]))
                }
            }
            this.target = null, this.getCurrentBatchRecordChanges().length > 0 && this.setCheckAllState(), this.triggerChkChangeEvent(e, !n)
        }, e.prototype.getCheckAllStatus = function(e) {
            var t = e ? e.nextElementSibling.classList : this.getCheckAllBox().nextElementSibling.classList;
            return t.contains("e-check") ? "Check" : t.contains("e-uncheck") ? "Uncheck" : t.contains("e-stop") ? "Intermediate" : "None"
        }, e.prototype.checkSelect = function(e) {
            var t = Tt(this.checkedTarget, ".e-rowcell"),
                i = this.parent;
            this.isMultiCtrlRequest = !0;
            var n = 0;
            if (this.isHeaderCheckboxClicked = !1, Sl(i)) {
                var r = t.parentElement.getAttribute("data-uid");
                n = i.getRows().map((function(e) {
                    return e.getAttribute("data-uid")
                })).indexOf(r)
            } else n = parseInt(t.parentElement.getAttribute("aria-rowindex"), 10);
            this.parent.isPersistSelection && this.parent.element.querySelectorAll(".e-addedrow").length > 0 && "Top" === this.parent.editSettings.newRowPosition && ++n, this.rowCellSelectionHandler(n, parseInt(t.getAttribute("aria-colindex"), 10)), this.moveIntoUncheckCollection(Tt(t, ".e-row")), this.setCheckAllState(), this.isMultiCtrlRequest = !1, this.triggerChkChangeEvent(e, e.nextElementSibling.classList.contains("e-check"))
        }, e.prototype.moveIntoUncheckCollection = function(e) {
            if ("Check" === this.parent.checkAllRows || "Uncheck" === this.parent.checkAllRows) {
                var t = this.getRowObj(e),
                    i = t && t.data ? t.data[this.primaryKey] : null;
                if (!i) return;
                this.chkAllCollec.indexOf(i) < 0 ? this.chkAllCollec.push(i) : this.chkAllCollec.splice(this.chkAllCollec.indexOf(i), 1)
            }
        }, e.prototype.triggerChkChangeEvent = function(e, t) {
            this.parent.trigger("checkBoxChange", {
                checked: t,
                selectedRowIndexes: this.parent.getSelectedRowIndexes(),
                target: e
            }), this.parent.isEdit || (this.checkedTarget = null)
        }, e.prototype.updateSelectedRowIndex = function(e) {
            if (this.parent.isCheckBoxSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && !this.parent.getDataModule().isRemote() && (!S() || !this.parent.isServerRendered))
                if ("Check" === this.parent.checkAllRows) {
                    this.selectedRowIndexes = [];
                    for (var t = this.getData().length, i = 0; i < t; i++) this.selectedRowIndexes.push(i)
                } else if ("Uncheck" === this.parent.checkAllRows) this.selectedRowIndexes = [];
            else if (e && "false" === this.parent.getRowByIndex(e).getAttribute("aria-selected")) {
                var n = this.selectedRowIndexes.indexOf(e);
                this.selectedRowIndexes.splice(n, 1)
            }
        }, e.prototype.setCheckAllState = function(e, t) {
            if (this.parent.isCheckBoxSelection || "ResetOnRowClick" === this.parent.selectionSettings.checkboxMode) {
                var i = void 0,
                    n = S() && this.parent.isServerRendered && this.parent.enableVirtualization;
                if (n) {
                    i = !Object.values(this.parent.contentModule.vgenerator.rowCache).filter((function(e) {
                        return void 0 === e.isSelected || !1 === e.isSelected
                    })).length && Object.values(this.parent.contentModule.vgenerator.rowCache).filter((function(e) {
                        return e.isSelected
                    })).length === this.selectedRowIndexes.length
                }
                var r = Object.keys(this.selectedRowState).length;
                this.parent.isPersistSelection || n || (r = this.selectedRowIndexes.length, this.totalRecordsCount = this.getCurrentBatchRecordChanges().length);
                var o = this.getCheckAllBox();
                if (o) {
                    var s = o.nextElementSibling;
                    gt([s], ["e-check", "e-stop", "e-uncheck"]), fl(o, !1), o.indeterminate = !1, i || r === this.totalRecordsCount && this.totalRecordsCount || !(!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling || this.parent.allowPaging || this.parent.getDataModule().isRemote() || S() && this.parent.isServerRendered || r !== this.getData().length) ? (ut([s], ["e-check"]), fl(o, !0), t && this.getRenderer().setSelection(null, !0, !0), this.parent.checkAllRows = "Check") : n && !this.selectedRowIndexes.length || 0 === r && !n || 0 === this.getCurrentBatchRecordChanges().length ? (ut([s], ["e-uncheck"]), t && this.getRenderer().setSelection(null, !1, !0), this.parent.checkAllRows = "Uncheck", 0 === r && 0 === this.getCurrentBatchRecordChanges().length ? ut([s.parentElement], ["e-checkbox-disabled"]) : gt([s.parentElement], ["e-checkbox-disabled"])) : (ut([s], ["e-stop"]), this.parent.checkAllRows = "Intermediate", o.indeterminate = !0), !this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling || this.parent.allowPaging || this.parent.getDataModule().isRemote() || this.updateSelectedRowIndex(e)
                }
            }
        }, e.prototype.keyDownHandler = function(e) {
            (("chrome" === me.info.name || "safari" === me.info.name) && (91 === e.keyCode || 93 === e.keyCode) || "opera" === me.info.name && 17 === e.keyCode || "mozilla" === me.info.name && 224 === e.keyCode) && (this.cmdKeyPressed = !0)
        }, e.prototype.keyUpHandler = function(e) {
            (("chrome" === me.info.name || "safari" === me.info.name) && (91 === e.keyCode || 93 === e.keyCode) || "opera" === me.info.name && 17 === e.keyCode || "mozilla" === me.info.name && 224 === e.keyCode) && (this.cmdKeyPressed = !1)
        }, e.prototype.clickHandler = function(e) {
            var t = e.target;
            this.actualTarget = t, (Ka(t, "e-row") || Ka(t, "e-headerchkcelldiv")) && (this.isInteracted = !0), this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch || this.isMacOS && this.cmdKeyPressed, this.isMultiShiftRequest = e.shiftKey, this.popUpClickHandler(e);
            var i, n = !1;
            this.preventFocus = !0;
            var r = Ka(t, "e-checkbox-wrapper");
            if (this.checkSelectAllClicked = !(!r || !r.querySelectorAll(".e-checkselectall")), r && r.querySelectorAll(".e-checkselect,.e-checkselectall").length > 0 && (i = r.querySelector('input[type="checkbox"]'), n = !0), this.drawBorders(), this.updateAutoFillPosition(), (t = Ka(t, "e-rowcell")) && t.parentElement.classList.contains("e-row") && !this.parent.selectionSettings.checkboxOnly || n) {
                if (this.parent.isCheckBoxSelection && (this.isMultiCtrlRequest = !0), this.target = t, g(i)) {
                    var o = this.parent,
                        s = 0;
                    if (Sl(o)) {
                        var a = t.parentElement.getAttribute("data-uid");
                        s = o.getRows().map((function(e) {
                            return e.getAttribute("data-uid")
                        })).indexOf(a)
                    } else s = parseInt(t.parentElement.getAttribute("aria-rowindex"), 10);
                    this.parent.isPersistSelection && this.parent.element.querySelectorAll(".e-addedrow").length > 0 && ++s, this.mUPTarget && this.mUPTarget.isEqualNode(t) || this.rowCellSelectionHandler(s, parseInt(t.getAttribute("aria-colindex"), 10)), this.parent.hoverFrozenRows(e), this.parent.isCheckBoxSelection && (this.moveIntoUncheckCollection(Tt(t, ".e-row")), this.setCheckAllState())
                } else this.checkedTarget = i, i.classList.contains("e-checkselectall") ? this.checkSelectAll(i) : this.checkSelect(i);
                this.parent.isCheckBoxSelection || !me.isDevice || this.isSingleSel() || this.showPopup(e)
            }
            this.isMultiCtrlRequest = !1, this.isMultiShiftRequest = !1, g(Tt(e.target, ".e-unboundcell")) && (this.preventFocus = !1)
        }, e.prototype.popUpClickHandler = function(e) {
            var t = e.target;
            Tt(t, ".e-headercell") || e.target.classList.contains("e-rowcell") || Tt(t, ".e-gridpopup") ? t.classList.contains("e-rowselect") && (t.classList.contains("e-spanclicked") ? (t.classList.remove("e-spanclicked"), this.enableSelectMultiTouch = !1, this.parent.element.querySelector(".e-gridpopup").style.display = "none") : (t.classList.add("e-spanclicked"), this.enableSelectMultiTouch = !0)) : this.parent.element.querySelector(".e-gridpopup").style.display = "none"
        }, e.prototype.showPopup = function(e) {
            this.selectionSettings.enableSimpleMultiRowSelection || Ga(this.parent.element.querySelector(".e-gridpopup"), e, "e-rowselect e-icons e-icon-rowselect" + (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1) || this.selectedRowCellIndexes.length > 1) ? " e-spanclicked" : ""))
        }, e.prototype.rowCellSelectionHandler = function(e, t) {
            this.parent;
            if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest || this.isSingleSel()) this.isDragged || this.selectRow(e, this.selectionSettings.enableToggle), this.selectCell({
                rowIndex: e,
                cellIndex: t
            }, this.selectionSettings.enableToggle), this.selectedRowCellIndexes.length && this.updateAutoFillPosition(), this.drawBorders();
            else if (this.isMultiShiftRequest) this.parent.isCheckBoxSelection || !this.parent.isCheckBoxSelection && !Tt(this.target, ".e-rowcell").classList.contains("e-gridchkbox") ? this.selectRowsByRange(f(this.prevRowIndex) ? e : this.prevRowIndex, e) : this.addRowsToSelection([e]), this.selectCellsByRange(f(this.prevCIdxs) ? {
                rowIndex: e,
                cellIndex: t
            } : this.prevCIdxs, {
                rowIndex: e,
                cellIndex: t
            }), this.updateAutoFillPosition(), this.drawBorders();
            else {
                if (this.addRowsToSelection([e]), S() && this.parent.enableVirtualization && this.parent.isServerRendered) {
                    var i = this.parent.getSelectedRowIndexes();
                    this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection", !0, "normal", i)
                }
                this.addCellsToSelection([{
                    rowIndex: e,
                    cellIndex: t
                }]), this.showHideBorders("none")
            }
            this.isDragged = !1
        }, e.prototype.onCellFocused = function(e) {
            if (this.parent.frozenRows && e.container.isHeader && e.byKey)
                if ("upArrow" === e.keyArgs.action) this.parent.allowFiltering ? e.isJump = "INPUT" === e.element.tagName : e.isJump = "TH" === e.element.tagName;
                else if ("downArrow" === e.keyArgs.action) {
                var t = Number(e.element.parentElement.getAttribute("aria-rowindex"));
                e.isJump = 0 === t
            } else "ctrlHome" === e.keyArgs.action && (e.isJump = !0);
            var i = this.parent.getFrozenColumns() ? (e.container.isHeader && "TD" !== e.element.tagName && e.isJump || (e.container.isContent || "TD" === e.element.tagName) && !(e.container.isSelectable || "TD" === e.element.tagName)) && !(e.byKey && "space" === e.keyArgs.action) : (e.container.isHeader && e.isJump || e.container.isContent && !e.container.isSelectable) && !(e.byKey && "space" === e.keyArgs.action) && !(e.element.classList.contains("e-detailrowexpand") || e.element.classList.contains("e-detailrowcollapse")),
                n = e.container.isHeader && "TD" !== e.element.tagName && !Tt(e.element, ".e-rowcell") && !(e.byKey && "space" === e.keyArgs.action);
            if (e.byKey && !i) {
                var r = e.container.isContent ? e.container.indexes : e.indexes,
                    o = r[0],
                    s = r[1],
                    a = this.focus.getPrevIndexes();
                if (this.parent.frozenRows)
                    if (e.container.isHeader && ("TD" === e.element.tagName || Tt(e.element, ".e-rowcell"))) {
                        var l = this.parent.getHeaderTable().querySelector("thead").childElementCount;
                        o -= l, a.rowIndex = g(a.rowIndex) ? null : a.rowIndex - l
                    } else o += this.parent.frozenRows, a.rowIndex = 0 !== a.rowIndex && g(a.rowIndex) ? null : a.rowIndex + this.parent.frozenRows;
                if (this.parent.getFrozenColumns()) {
                    var h = Number(e.element.getAttribute("aria-colindex")),
                        p = this.parent.getSelectedRowCellIndexes();
                    p.length && 0 === a.cellIndex && (a.cellIndex = p[p.length - 1].cellIndexes[0]), a.cellIndex = g(a.cellIndex) ? null : a.cellIndex === s ? h : h - 1, s = h
                }
                if (!(n || -1 === ["ctrlPlusA", "escape"].indexOf(e.keyArgs.action) && "space" !== e.keyArgs.action && o === a.rowIndex && s === a.cellIndex)) {
                    switch (this.preventFocus = !0, e.keyArgs.action) {
                        case "downArrow":
                        case "upArrow":
                        case "enter":
                        case "shiftEnter":
                            this.target = e.element, this.applyDownUpKey(o, s);
                            break;
                        case "rightArrow":
                        case "leftArrow":
                            this.applyRightLeftKey(o, s);
                            break;
                        case "shiftDown":
                        case "shiftUp":
                            this.shiftDownKey(o, s);
                            break;
                        case "shiftLeft":
                        case "shiftRight":
                            this.applyShiftLeftRightKey(o, s);
                            break;
                        case "home":
                        case "end":
                            s = "end" === e.keyArgs.action ? this.getLastColIndex(o) : 0, this.applyHomeEndKey(o, s);
                            break;
                        case "ctrlHome":
                        case "ctrlEnd":
                            this.applyCtrlHomeEndKey(o, s);
                            break;
                        case "escape":
                            this.clearSelection();
                            break;
                        case "ctrlPlusA":
                            this.ctrlPlusA();
                            break;
                        case "space":
                            this.applySpaceSelection(e.element);
                            break;
                        case "tab":
                            this.parent.editSettings.allowNextRowEdit && this.selectRow(o)
                    }
                    this.preventFocus = !1, this.positionBorders(), this.updateAutoFillPosition()
                }
            } else i && !this.parent.isCheckBoxSelection && this.clearSelection()
        }, e.prototype.ctrlPlusA = function() {
            this.isRowType() && !this.isSingleSel() && this.selectRowsByRange(0, this.getCurrentBatchRecordChanges().length - 1), this.isCellType() && !this.isSingleSel() && this.selectCellsByRange({
                rowIndex: 0,
                cellIndex: 0
            }, {
                rowIndex: this.parent.getRows().length - 1,
                cellIndex: this.parent.getColumns().length - 1
            })
        }, e.prototype.applySpaceSelection = function(e) {
            e.classList.contains("e-checkselectall") ? (this.checkedTarget = e, this.checkSelectAll(this.checkedTarget)) : e.classList.contains("e-checkselect") && (this.checkedTarget = e, this.checkSelect(this.checkedTarget))
        }, e.prototype.applyDownUpKey = function(e, t) {
            var i = this.parent;
            this.parent.isCheckBoxSelection && "Check" === this.parent.checkAllRows && !this.selectionSettings.persistSelection && (this.checkSelectAllAction(!1), this.checkedTarget = null), this.isRowType() && (this.parent.frozenRows, this.selectRow(e, !0), this.applyUpDown(i.selectedRowIndex)), this.isCellType() && this.selectCell({
                rowIndex: e,
                cellIndex: t
            }, !0)
        }, e.prototype.applyUpDown = function(e) {
            if (!(e < 0)) {
                this.target || (this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0]);
                var t = parseInt(this.target.getAttribute("aria-colindex"), 10),
                    i = this.parent.getFrozenColumns();
                this.target = i && t >= i ? this.contentRenderer.getMovableRowByIndex(e).querySelectorAll(".e-rowcell")[t - i] : this.contentRenderer.getRowByIndex(e).querySelectorAll(".e-rowcell")[t], this.addAttribute(this.target)
            }
        }, e.prototype.applyRightLeftKey = function(e, t) {
            this.parent;
            this.isCellType() && (this.selectCell({
                rowIndex: e,
                cellIndex: t
            }, !0), this.addAttribute(this.target))
        }, e.prototype.applyHomeEndKey = function(e, t) {
            this.isCellType() ? this.selectCell({
                rowIndex: e,
                cellIndex: t
            }, !0) : this.addAttribute(this.parent.getCellFromIndex(e, t))
        }, e.prototype.shiftDownKey = function(e, t) {
            this.parent;
            this.isMultiShiftRequest = !0, this.isRowType() && !this.isSingleSel() && (f(this.prevRowIndex) ? this.selectRow(0, !0) : (this.selectRowsByRange(this.prevRowIndex, e), this.applyUpDown(e))), this.isCellType() && !this.isSingleSel() && this.selectCellsByRange(this.prevCIdxs || {
                rowIndex: 0,
                cellIndex: 0
            }, {
                rowIndex: e,
                cellIndex: t
            }), this.isMultiShiftRequest = !1
        }, e.prototype.applyShiftLeftRightKey = function(e, t) {
            this.parent;
            this.isMultiShiftRequest = !0, this.selectCellsByRange(this.prevCIdxs, {
                rowIndex: e,
                cellIndex: t
            }), this.isMultiShiftRequest = !1
        }, e.prototype.applyCtrlHomeEndKey = function(e, t) {
            this.isRowType() && (this.selectRow(e, !0), this.addAttribute(this.parent.getCellFromIndex(e, t))), this.isCellType() && this.selectCell({
                rowIndex: e,
                cellIndex: t
            }, !0)
        }, e.prototype.addRemoveClassesForRow = function(e, t, i) {
            for (var n = [], r = 3; r < arguments.length; r++) n[r - 3] = arguments[r];
            if (e) {
                var o = [].slice.call(e.querySelectorAll(".e-rowcell")),
                    s = e.querySelector(".e-detailrowcollapse") || e.querySelector(".e-detailrowexpand"),
                    a = e.querySelector(".e-rowdragdrop");
                s && o.push(s), a && o.push(a), cl.apply(void 0, [o, t].concat(n))
            }
            this.getRenderer().setSelection(e ? e.getAttribute("data-uid") : null, t, i)
        }, e.prototype.isRowType = function() {
            return "Row" === this.selectionSettings.mode || "Both" === this.selectionSettings.mode
        }, e.prototype.isCellType = function() {
            return "Cell" === this.selectionSettings.mode || "Both" === this.selectionSettings.mode
        }, e.prototype.isSingleSel = function() {
            return "Single" === this.selectionSettings.type
        }, e.prototype.getRenderer = function() {
            return g(this.contentRenderer) && (this.contentRenderer = this.factory.getRenderer(cr.Content)), this.contentRenderer
        }, e.prototype.getSelectedRecords = function() {
            return this.selectionSettings.persistSelection ? this.persistSelectedData : this.parent.getRowsObject().filter((function(e) {
                return e.isSelected
            })).map((function(e) {
                return e.data
            }))
        }, e.prototype.addEventListener_checkbox = function() {
            var e = this;
            this.parent.on("data-ready", this.dataReady, this), this.onDataBoundFunction = this.onDataBound.bind(this), this.parent.addEventListener(Cr, this.onDataBoundFunction), this.parent.on(xr, this.checkBoxSelectionChanged, this), this.parent.on(Tr, this.setCheckAllForEmptyGrid, this), this.actionCompleteFunc = this.actionCompleteHandler.bind(this), this.parent.addEventListener("actionComplete", this.actionCompleteFunc), this.parent.on(Ir, this.clickHandler, this), this.resizeEndFn = function() {
                e.updateAutoFillPosition(), e.drawBorders()
            }, this.resizeEndFn.bind(this), this.parent.addEventListener("resizeStop", this.resizeEndFn)
        }, e.prototype.removeEventListener_checkbox = function() {
            this.parent.off("data-ready", this.dataReady), this.parent.removeEventListener(Cr, this.onDataBoundFunction), this.parent.removeEventListener("actionComplete", this.actionCompleteFunc), this.parent.off(Tr, this.setCheckAllForEmptyGrid), this.parent.off(Ir, this.clickHandler)
        }, e.prototype.setCheckAllForEmptyGrid = function() {
            var e = this.getCheckAllBox();
            e && (this.parent.isCheckBoxSelection = !0, gt([e.nextElementSibling], ["e-check", "e-stop", "e-uncheck"]))
        }, e.prototype.dataReady = function(e) {
            this.isHeaderCheckboxClicked = !1;
            var t = this.parent.enableInfiniteScrolling && "infiniteScroll" === e.requestType;
            "virtualscroll" === e.requestType || this.parent.isPersistSelection || t || (this.disableUI = !this.parent.enableImmutableMode, this.clearSelection(), this.setCheckAllState(), this.disableUI = !1)
        }, e.prototype.actionCompleteHandler = function(e) {
            "save" === e.requestType && this.parent.isPersistSelection && this.refreshPersistSelection()
        }, e.prototype.selectRowIndex = function(e) {
            this.parent.isSelectedRowIndexUpdating = !0, this.parent.selectedRowIndex = e
        }, e.prototype.disableInteracted = function() {
            this.isInteracted = !1
        }, e.prototype.activeTarget = function() {
            this.actualTarget = this.isInteracted ? this.actualTarget : null
        }, e
    }(),
    sa = function() {
        function e(e) {
            this.parent = e, this.addEventListener()
        }
        return e.prototype.search = function(e) {
            var t = this.parent;
            e = g(e) ? "" : e, hl(t) ? t.notify(Or, {
                instance: this,
                handler: this.search,
                arg1: e
            }) : e !== t.searchSettings.key ? (t.searchSettings.key = e.toString(), t.dataBind()) : this.refreshSearch && t.refresh()
        }, e.prototype.addEventListener = function() {
            this.parent.isDestroyed || (this.parent.on(Dr, this.onPropertyChanged, this), this.parent.on("searching-complete", this.onSearchComplete, this), this.parent.on("destroy", this.destroy, this), this.actionCompleteFunc = this.onActionComplete.bind(this), this.parent.addEventListener("actionComplete", this.actionCompleteFunc), this.parent.on("cancel-Begin", this.cancelBeginEvent, this))
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off(Dr, this.onPropertyChanged), this.parent.off("searching-complete", this.onSearchComplete), this.parent.off("destroy", this.destroy), this.parent.removeEventListener("actionComplete", this.actionCompleteFunc), this.parent.off("cancel-Begin", this.cancelBeginEvent))
        }, e.prototype.destroy = function() {
            this.removeEventListener()
        }, e.prototype.onPropertyChanged = function(e) {
            e.module === this.getModuleName() && (g(e.properties.key) ? this.parent.notify(Er, {
                requestType: "searching",
                type: wr
            }) : this.parent.notify(Er, {
                requestType: "searching",
                type: wr,
                searchString: this.parent.searchSettings.key
            }))
        }, e.prototype.onSearchComplete = function(e) {
            S() && !this.parent.isJsComponent && (e.rows = null), this.parent.trigger("actionComplete", u(e, {
                searchString: this.parent.searchSettings.key,
                requestType: "searching",
                type: "actionComplete"
            }))
        }, e.prototype.onActionComplete = function(e) {
            this.refreshSearch = "searching" !== e.requestType
        }, e.prototype.cancelBeginEvent = function(e) {
            "searching" === e.requestType && this.parent.setProperties({
                searchSettings: {
                    key: ""
                }
            }, !0)
        }, e.prototype.getModuleName = function() {
            return "search"
        }, e
    }(),
    aa = function() {
        function e(e) {
            this.parent = e
        }
        return e.prototype.show = function(e, t) {
            var i = this.getToggleFields(e),
                n = this.getColumns(i, t);
            this.parent.notify("tooltip-destroy", {
                module: "edit"
            });
            for (var r = 0; r < n.length; r++) n[r].visible = !0;
            this.setVisible(n)
        }, e.prototype.hide = function(e, t) {
            var i = this.getToggleFields(e),
                n = this.getColumns(i, t);
            this.parent.notify("tooltip-destroy", {
                module: "edit"
            });
            for (var r = 0; r < n.length; r++) n[r].visible = !1;
            this.setVisible(n)
        }, e.prototype.getToggleFields = function(e) {
            return "string" == typeof e ? [e] : e
        }, e.prototype.getColumns = function(e, t) {
            var i = this;
            return Ha(e, (function(e, n) {
                return Ha(i.parent.columnModel, (function(i, n) {
                    if (i[t] === e) return i
                }))[0]
            }))
        }, e.prototype.setVisible = function(e, t) {
            var i = this;
            void 0 === t && (t = []);
            var n = {
                requestType: "columnstate",
                cancel: !1,
                columns: t = t.length > 0 ? t : S() ? JSON.parse(JSON.stringify(e)) : e
            };
            this.parent.trigger(wr, n, (function(n) {
                var r = i.parent.getColumns();
                if (e = g(e) ? r : e, n.cancel) return i.parent.notify("reset-columns", {
                    showHideArgs: n
                }), void(e.length > 0 && (e[0].visible = !0));
                (i.parent.allowSelection && i.parent.getSelectedRecords().length && i.parent.clearSelection(), i.parent.enableColumnVirtualization) ? e.filter((function(e) {
                    return r.some((function(t) {
                        return e.field === t.field
                    }))
                })).length && i.parent.notify("column-visible-changed", e): i.parent.notify("column-visible-changed", e);
                var o = {
                    requestType: "columnstate",
                    columns: t
                };
                i.parent.trigger("actionComplete", o), "All" !== i.parent.columnQueryMode && i.parent.refresh()
            }))
        }, e
    }(),
    la = function() {
        function e(e) {
            this.lastScrollTop = 0, this.previousValues = {
                top: 0,
                left: 0
            }, this.oneTimeReady = !0, this.parent = e, this.widthService = new Ws(e), this.addEventListener()
        }
        return e.prototype.getModuleName = function() {
            return "scroll"
        }, e.prototype.setWidth = function(e) {
            this.parent.element.style.width = C(this.parent.width), e && this.widthService.setWidthToColumns(), this.parent.toolbarModule && this.parent.toolbarModule.toolbar && this.parent.toolbarModule.toolbar.element && this.parent.toolbarModule.toolbar.refreshOverflow()
        }, e.prototype.setHeight = function() {
            var e = 0,
                t = this.parent.getContent().querySelector(".e-content");
            if (!this.parent.enableVirtualization && this.parent.frozenRows && "auto" !== this.parent.height) {
                var i = this.parent.getHeaderContent().querySelector("tbody");
                e = i ? i.offsetHeight : 0, t.style.height = C(this.parent.height - e)
            } else t.style.height = C(this.parent.height);
            this.ensureOverflow(t)
        }, e.prototype.setPadding = function() {
            var t = this.parent.getHeaderContent(),
                i = e.getScrollBarWidth() - this.getThreshold(),
                n = this.getCssProperties();
            t.querySelector(".e-headercontent").style[n.border] = i > 0 ? "1px" : "0px", t.style[n.padding] = i > 0 ? i + "px" : "0px"
        }, e.prototype.removePadding = function(e) {
            var t = this.getCssProperties(e),
                i = this.parent.getHeaderContent().querySelector(".e-headercontent");
            i.style[t.border] = "", i.parentElement.style[t.padding] = "";
            var n = this.parent.getFooterContent();
            n && n.classList.contains("e-footerpadding") && n.classList.remove("e-footerpadding")
        }, e.prototype.refresh = function() {
            if ("100%" === this.parent.height) {
                var e = this.parent.getContent();
                this.parent.element.style.height = "100%";
                var t = this.widthService.getSiblingsHeight(e);
                e.style.height = "calc(100% - " + t + "px)"
            }
        }, e.prototype.getThreshold = function() {
            return "mozilla" === me.info.name ? .5 : 1
        }, e.prototype.addEventListener = function() {
            this.parent.isDestroyed || (this.parent.on(Tr, this.wireEvents, this), this.parent.on(xr, this.wireEvents, this), this.parent.on(kr, this.onPropertyChanged, this), this.parent.on("textWrapRefresh", this.wireEvents, this), this.parent.on(Rr, this.setScrollLeft, this))
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off(Tr, this.wireEvents), this.parent.off(xr, this.wireEvents), this.parent.off(kr, this.onPropertyChanged), this.parent.off("textWrapRefresh", this.wireEvents), this.parent.off(Rr, this.setScrollLeft))
        }, e.prototype.setScrollLeft = function() {
            this.parent.frozenColumns ? this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left : this.parent.getHeaderContent().querySelector(".e-headercontent").scrollLeft = this.previousValues.left
        }, e.prototype.onContentScroll = function(e) {
            var t = this,
                i = e,
                n = i.classList.contains("e-headercontent");
            return function(e) {
                if (null !== t.content.querySelector("tbody") && !t.parent.isPreventScrollEvent) {
                    if (!g(t.parent.infiniteScrollModule) && t.parent.enableInfiniteScrolling && t.parent.notify("infinite-scroll-handler", e), t.parent.groupSettings.columns.length && t.parent.groupSettings.enableLazyLoading) {
                        var r = t.previousValues.top < t.parent.getContent().firstElementChild.scrollTop;
                        t.parent.notify("lazy-load-scroll-handler", {
                            scrollDown: r
                        })
                    }
                    t.parent.notify("virtual-scroll-edit", {});
                    var o = e.target,
                        s = o.scrollLeft,
                        a = (o.scrollWidth, o.classList.contains("e-summarycontent"));
                    t.previousValues.left !== s ? (t.parent.notify("close-filter-dialog", e), i.scrollLeft = s, a && (t.header.scrollLeft = s), t.previousValues.left = s, t.parent.notify("scroll", {
                        left: s
                    })) : t.previousValues.top = n ? o.scrollTop : t.previousValues.top
                }
            }
        }, e.prototype.onFreezeContentScroll = function(e) {
            var t = this,
                i = e;
            return function(e) {
                if (null !== t.content.querySelector("tbody")) {
                    var n = e.target.scrollTop;
                    t.previousValues.top !== n && (i.scrollTop = n, t.previousValues.top = n, t.parent.isDestroyed)
                }
            }
        }, e.prototype.onWheelScroll = function(e) {
            var t = this,
                i = e;
            return function(e) {
                if (null !== t.content.querySelector("tbody")) {
                    var n = i.scrollTop + (1 === e.deltaMode ? 30 * e.deltaY : e.deltaY);
                    t.previousValues.top !== n && (e.preventDefault(), t.parent.getContent().querySelector(".e-frozencontent").scrollTop = n, i.scrollTop = n, t.previousValues.top = n)
                }
            }
        }, e.prototype.onTouchScroll = function(e) {
            var t = this,
                i = e;
            return function(e) {
                if ("mouse" !== e.pointerType) {
                    var n, r, o = t.getPointXY(e),
                        s = i.scrollTop + (t.pageXY.y - o.y),
                        a = i.scrollLeft + (t.pageXY.x - o.x);
                    if (t.parent.getHeaderContent().contains(e.target)) {
                        if (r = t.parent.getFrozenColumns() ? t.parent.getHeaderContent().querySelector(".e-movableheader") : t.parent.getHeaderContent().querySelector(".e-headercontent"), t.previousValues.left === a || a < 0 || r.scrollWidth - r.clientWidth < a) return;
                        e.preventDefault(), r.scrollLeft = a, i.scrollLeft = a, t.pageXY.x = o.x, t.previousValues.left = a
                    } else {
                        if (n = t.parent.getContent().querySelector(".e-frozencontent"), t.previousValues.top === s && (s < 0 || n.scrollHeight - n.clientHeight < s) || s < 0 || n.scrollHeight - n.clientHeight < s) return;
                        e.preventDefault(), n.scrollTop = s, i.scrollTop = s, t.pageXY.y = o.y, t.previousValues.top = s
                    }
                }
            }
        }, e.prototype.setPageXY = function() {
            var e = this;
            return function(t) {
                "mouse" !== t.pointerType && (e.pageXY = e.getPointXY(t))
            }
        }, e.prototype.getPointXY = function(e) {
            var t = {
                x: 0,
                y: 0
            };
            return e.touches && e.touches.length ? (t.x = e.touches[0].pageX, t.y = e.touches[0].pageY) : (t.x = e.pageX, t.y = e.pageY), t
        }, e.prototype.wireEvents = function() {
            var e = this;
            if (this.oneTimeReady) {
                var t = this.parent.getFrozenColumns();
                this.content = this.parent.getContent().querySelector(".e-content"), this.header = this.parent.getHeaderContent().querySelector(".e-headercontent");
                var i = this.content.querySelector(".e-movablecontent"),
                    n = this.content.querySelector(".e-frozencontent"),
                    r = this.header.querySelector(".e-movableheader");
                this.parent.frozenRows && (ye.add(t ? r : this.header, "touchstart pointerdown", this.setPageXY(), this), ye.add(t ? r : this.header, "touchmove pointermove", this.onTouchScroll(t ? i : this.content), this)), t ? (ye.add(i, "scroll", this.onContentScroll(r), this), ye.add(i, "scroll", this.onFreezeContentScroll(n), this), ye.add(n, "scroll", this.onFreezeContentScroll(i), this), ye.add(r, "scroll", this.onContentScroll(i), this), ye.add(n, "wheel", this.onWheelScroll(i), this), ye.add(n, "touchstart pointerdown", this.setPageXY(), this), ye.add(n, "touchmove pointermove", this.onTouchScroll(i), this)) : (ye.add(this.content, "scroll", this.onContentScroll(this.header), this), ye.add(this.header, "scroll", this.onContentScroll(this.content), this)), this.parent.aggregates.length && ye.add(this.parent.getFooterContent().firstChild, "scroll", this.onContentScroll(this.content), this), this.refresh(), this.oneTimeReady = !1
            }
            var o, s, a, l = this.parent.getContentTable();
            La((function() {
                o = e.header.scrollLeft, s = l.scrollHeight, a = e.parent.getContent().clientHeight
            }), (function() {
                e.parent.enableVirtualization || (s < a && (ut(l.querySelectorAll("tr:last-child td"), "e-lastrowcell"), e.parent.getFrozenColumns() && ut(e.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"), "e-lastrowcell")), (e.parent.frozenRows > 0 || e.parent.frozenColumns > 0) && e.header.querySelector(".e-movableheader") ? e.header.querySelector(".e-movableheader").scrollLeft = e.previousValues.left : e.header.scrollLeft = e.previousValues.left, e.content.scrollLeft = e.previousValues.left, e.content.scrollTop = e.previousValues.top), e.parent.enableColumnVirtualization || (e.content.scrollLeft = o), e.parent.frozenColumns && e.header.querySelector(".e-movableheader") && (e.header.querySelector(".e-movableheader").scrollLeft = e.content.querySelector(".e-movablecontent").scrollLeft)
            })), this.parent.isPreventScrollEvent = !1
        }, e.prototype.getCssProperties = function(e) {
            var t = {},
                i = g(e) ? this.parent.enableRtl : e;
            return t.border = i ? "borderLeftWidth" : "borderRightWidth", t.padding = i ? "paddingLeft" : "paddingRight", t
        }, e.prototype.ensureOverflow = function(e) {
            this.parent.getFrozenColumns() ? (e.querySelector(".e-movablecontent").style.overflowY = "auto" === this.parent.height ? "auto" : "scroll", "scroll" === e.querySelector(".e-movablecontent").style.overflowY && this.setPadding()) : e.style.overflowY = "auto" === this.parent.height ? "auto" : "scroll"
        }, e.prototype.onPropertyChanged = function(e) {
            if (e.module === this.getModuleName()) {
                this.setPadding(), this.oneTimeReady = !0, "auto" === this.parent.height && this.removePadding(), this.wireEvents(), this.setHeight();
                this.setWidth(!g(e.properties.width))
            }
        }, e.prototype.destroy = function() {
            var e = this.parent.element;
            if (e && (e.querySelector(".e-gridheader") || e.querySelector(".e-gridcontent"))) {
                this.removeEventListener(), this.removePadding();
                var t = this.parent.getContent().querySelector(".e-content");
                gt([this.parent.getHeaderContent().querySelector(".e-headercontent")], "e-headercontent"), gt([t], "e-content"), t.style.height = "", this.parent.element.style.width = "", ye.remove(t, "scroll", this.onContentScroll)
            }
        }, e.getScrollBarWidth = function() {
            return rl()
        }, e
    }(),
    ha = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    pa = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    da = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.templateFn = {}, t
        }
        return ha(t, e), t.prototype.setFormatter = function(e) {
            this.formatFn = e
        }, t.prototype.getFormatter = function() {
            return this.formatFn
        }, t.prototype.setTemplate = function(e) {
            void 0 === e && (e = {}), void 0 !== this.footerTemplate && (this.templateFn[d(dr, dr.Summary)] = {
                fn: Ge(this.footerTemplate, e),
                property: "footerTemplate"
            }), void 0 !== this.groupFooterTemplate && (this.templateFn[d(dr, dr.GroupSummary)] = {
                fn: Ge(this.groupFooterTemplate, e),
                property: "groupFooterTemplate"
            }), void 0 !== this.groupCaptionTemplate && (this.templateFn[d(dr, dr.CaptionSummary)] = {
                fn: Ge(this.groupCaptionTemplate, e),
                property: "groupCaptionTemplate"
            })
        }, t.prototype.getTemplate = function(e) {
            return this.templateFn[d(dr, e)]
        }, t.prototype.setPropertiesSilent = function(e) {
            this.setProperties(e, !0)
        }, pa([zt()], t.prototype, "type", void 0), pa([zt()], t.prototype, "field", void 0), pa([zt()], t.prototype, "columnName", void 0), pa([zt()], t.prototype, "format", void 0), pa([zt()], t.prototype, "footerTemplate", void 0), pa([zt()], t.prototype, "groupFooterTemplate", void 0), pa([zt()], t.prototype, "groupCaptionTemplate", void 0), pa([zt()], t.prototype, "customAggregate", void 0), t
    }(oi),
    ca = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return ha(t, e), pa([Wt([], da)], t.prototype, "columns", void 0), t
    }(oi),
    ua = function() {
        function e(e) {
            this.copyContent = "", this.isSelect = !1, this.parent = e, this.addEventListener()
        }
        return e.prototype.addEventListener = function() {
            this.parent.isDestroyed || (this.parent.on(xr, this.initialEnd, this), this.parent.on(Pr, this.keyDownHandler, this), this.parent.on(Ir, this.clickHandler, this), ye.add(this.parent.element, "keydown", this.pasteHandler, this))
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off(Pr, this.keyDownHandler), this.parent.off(xr, this.initialEnd), this.parent.off(Ir, this.clickHandler), ye.remove(this.parent.element, "keydown", this.pasteHandler))
        }, e.prototype.clickHandler = function(e) {
            var t = e.target;
            t = Ka(t, "e-rowcell")
        }, e.prototype.pasteHandler = function(e) {
            var t = this,
                i = this.parent,
                n = /(Mac)/i.test(navigator.platform);
            if (86 === e.keyCode && (e.ctrlKey || n && e.metaKey) && !i.isEdit) {
                if (!Tt(document.activeElement, ".e-rowcell") || !i.editSettings.allowEditing || "Batch" !== i.editSettings.mode || "Cell" !== i.selectionSettings.mode || "Flow" === i.selectionSettings.cellSelectionMode) return;
                this.activeElement = document.activeElement, this.clipBoardTextArea.value = "";
                var r = window.scrollX,
                    o = window.scrollY;
                this.clipBoardTextArea.focus(), setTimeout((function() {
                    t.activeElement.focus(), window.scrollTo(r, o), t.paste(t.clipBoardTextArea.value, t.parent.getSelectedRowCellIndexes()[0].rowIndex, t.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])
                }), 10)
            }
        }, e.prototype.paste = function(e, t, i) {
            var n, r, o, s = this.parent,
                a = i,
                l = t;
            if (s.editSettings.allowEditing && "Batch" === s.editSettings.mode && "Cell" === s.selectionSettings.mode && "Flow" !== s.selectionSettings.cellSelectionMode) {
                var h, p, d = e.split("\n"),
                    c = s.getDataRows(),
                    u = this.parent.getFrozenColumns();
                u && (p = s.getMovableDataRows());
                for (var g = 0; g < d.length; g++) {
                    if (h = d[g].split("\t"), a = i, g === d.length - 1 && "" === d[g] || f(s.getRowByIndex(l))) {
                        a++;
                        break
                    }
                    for (var m = 0; m < h.length; m++) {
                        if (o = s.getCellFromIndex(l, a), u) {
                            var y = c[l],
                                v = p[l];
                            o = !!y.querySelector('[aria-colindex="' + a + '"]') || v.querySelector('[aria-colindex="' + a + '"]')
                        }
                        if (!o) {
                            a++;
                            break
                        }
                        if (r = (n = s.getColumnByIndex(a)).getParser() ? n.getParser()(h[m]) : h[m], n.allowEditing && !n.isPrimaryKey && !n.template) {
                            var b = {
                                column: n,
                                data: r,
                                rowIndex: l
                            };
                            this.parent.trigger("beforePaste", b), l = b.rowIndex, b.cancel || s.editModule && ("number" === n.type ? this.parent.editModule.updateCell(l, n.field, parseFloat(b.data)) : s.editModule.updateCell(l, n.field, b.data))
                        }
                        a++
                    }
                    l++
                }
                s.selectionModule.selectCellsByRange({
                    rowIndex: t,
                    cellIndex: i
                }, {
                    rowIndex: l - 1,
                    cellIndex: a - 1
                });
                var w = this.parent.getCellFromIndex(l - 1, a - 1);
                w && Et(w, ["e-focus", "e-focused"], [])
            }
        }, e.prototype.initialEnd = function() {
            this.parent.off(xr, this.initialEnd), this.clipBoardTextArea = this.parent.createElement("textarea", {
                className: "e-clipboard",
                styles: "opacity: 0",
                attrs: {
                    tabindex: "-1",
                    "aria-label": "clipboard"
                }
            }), this.parent.element.appendChild(this.clipBoardTextArea)
        }, e.prototype.keyDownHandler = function(e) {
            "ctrlPlusC" === e.action ? this.copy() : "ctrlShiftPlusH" === e.action && this.copy(!0)
        }, e.prototype.setCopyData = function(e) {
            if ("" === window.getSelection().toString()) {
                var t = this.parent.getFrozenColumns();
                this.clipBoardTextArea.value = this.copyContent = "";
                var i = void 0,
                    n = this.parent.getRows();
                if (t && (i = this.parent.getMovableDataRows()), "Cell" !== this.parent.selectionSettings.mode) {
                    var r = this.parent.getSelectedRowIndexes().sort((function(e, t) {
                        return e - t
                    }));
                    if (e) {
                        for (var o = [], s = 0; s < this.parent.getVisibleColumns().length; s++) o[s] = this.parent.getVisibleColumns()[s].headerText;
                        this.getCopyData(o, !1, "\t", e), this.copyContent += "\n"
                    }
                    for (s = 0; s < r.length; s++) {
                        s > 0 && (this.copyContent += "\n");
                        var a = [].slice.call(n[r[s]].querySelectorAll(".e-rowcell"));
                        t && a.push.apply(a, [].slice.call(i[r[s]].querySelectorAll(".e-rowcell"))), this.getCopyData(a, !1, "\t", e)
                    }
                } else {
                    var l = this.checkBoxSelection();
                    if (l.status) {
                        if (e) {
                            var h = [];
                            for (s = 0; s < l.colIndexes.length; s++) h.push(this.parent.getColumnHeaderByIndex(l.colIndexes[s]));
                            this.getCopyData(h, !1, "\t", e), this.copyContent += "\n"
                        }
                        for (s = 0; s < l.rowIndexes.length; s++) {
                            s > 0 && (this.copyContent += "\n");
                            a = [].slice.call(n[l.rowIndexes[s]].querySelectorAll(".e-cellselectionbackground"));
                            t && a.push.apply(a, [].slice.call(i[l.rowIndexes[s]].querySelectorAll(".e-cellselectionbackground"))), this.getCopyData(a, !1, "\t", e)
                        }
                    } else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")), !0, "\n", e)
                }
                var p = {
                    data: this.copyContent,
                    cancel: !1
                };
                if (this.parent.trigger("beforeCopy", p), p.cancel) return;
                this.clipBoardTextArea.value = this.copyContent = p.data, me.userAgent.match(/ipad|ipod|iphone/i) ? this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length) : this.clipBoardTextArea.select(), this.isSelect = !0
            }
        }, e.prototype.getCopyData = function(e, t, i, n) {
            for (var r = "string" != typeof e[0], o = 0; o < e.length; o++) n && t && (this.copyContent += this.parent.getColumns()[parseInt(e[o].getAttribute("aria-colindex"), 10)].headerText + "\n"), r ? e[o].classList.contains("e-hide") || (S() ? !e[o].classList.contains("e-gridchkbox") && Object.keys(e[o].querySelectorAll(".e-check")).length ? this.copyContent += !0 : !e[o].classList.contains("e-gridchkbox") && Object.keys(e[o].querySelectorAll(".e-uncheck")).length ? this.copyContent += !1 : this.copyContent += e[o].innerText : this.copyContent += e[o].innerText) : this.copyContent += e[o], o < e.length - 1 && (this.copyContent += i)
        }, e.prototype.copy = function(e) {
            document.queryCommandSupported("copy") && (this.setCopyData(e), document.execCommand("copy"), this.clipBoardTextArea.blur()), this.isSelect && (window.getSelection().removeAllRanges(), this.isSelect = !1)
        }, e.prototype.getModuleName = function() {
            return "clipboard"
        }, e.prototype.destroy = function() {
            this.removeEventListener(), this.clipBoardTextArea && Ct(this.clipBoardTextArea)
        }, e.prototype.checkBoxSelection = function() {
            var e = this.parent,
                t = {
                    status: !1
                };
            if ("Cell" === e.selectionSettings.mode) {
                var i = e.getSelectedRowCellIndexes(),
                    n = void 0,
                    r = [],
                    o = void 0;
                for (o = 0; o < i.length && (i[o].cellIndexes.length && r.push(i[o].rowIndex), !i[o].cellIndexes.length || (n || (n = JSON.stringify(i[o].cellIndexes.sort())), n === JSON.stringify(i[o].cellIndexes.sort()))); o++);
                r.sort((function(e, t) {
                    return e - t
                })), o === i.length && r[r.length - 1] - r[0] == r.length - 1 && (t = {
                    status: !0,
                    rowIndexes: r,
                    colIndexes: i[0].cellIndexes
                })
            }
            return t
        }, e
    }(),
    ga = new U,
    fa = (function() {
        function e(e) {
            this.aria = new fs, this.actionArgs = {}, this.virtualHeight = 0, this.parent = e, this.addEventListener()
        }
        e.prototype.addEventListener = function() {
            this.parent.isDestroyed || (this.parent.on("detailclick", this.onDetailRowClick, this), this.parent.on("add-delete-success", this.addDeleteSuccess, this), this.parent.on("editsuccess", this.editSuccess, this), this.parent.on("setvisibility", this.setColumnVisibility, this), this.parent.on("offset", this.setServerOffSet, this), this.parent.on("updateaction", this.modelChanged, this), this.parent.on(Er, this.modelChanged, this), this.parent.on("group-expand-collapse", this.onGroupClick, this), this.parent.on("setcolumnstyles", this.setColVTableWidthAndTranslate, this), this.parent.on("refresh-virtual-indices", this.invokeServerDataBind, this), this.parent.on("contentcolgroup", this.contentColGroup, this), this.parent.on("datasource-modified", this.dataSourceModified, this))
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off("detailclick", this.onDetailRowClick), this.parent.off("add-delete-success", this.addDeleteSuccess), this.parent.off("editsuccess", this.editSuccess), this.parent.off("setvisibility", this.setColumnVisibility), this.parent.off("offset", this.setServerOffSet), this.parent.off("updateaction", this.modelChanged), this.parent.off(Er, this.modelChanged), this.parent.off("group-expand-collapse", this.onGroupClick), this.parent.off("setcolumnstyles", this.setColVTableWidthAndTranslate), this.parent.off("refresh-virtual-indices", this.invokeServerDataBind), this.parent.off("contentcolgroup", this.contentColGroup), this.parent.off("datasource-modified", this.dataSourceModified))
        }, e.prototype.getModuleName = function() {
            return "blazor"
        }, e.prototype.modelChanged = function(e) {
            this.actionArgs = e, this.parent.currentAction = e
        }, e.prototype.addDeleteSuccess = function(e) {
            var t, i = this;
            t = {
                requestType: e.requestType,
                data: e.data,
                action: e.action
            }, g(e.index) || (t.index = e.index), e.promise.then((function(e) {
                return i.editSuccess(t)
            })).catch((function(e) {
                if (S() && i.parent.isServerRendered) {
                    g(e.error) || g(e.error.message) || (e.error = e.error.message)
                }
                i.parent.trigger("actionFailure", S() && e instanceof Array ? e[0] : e), i.parent.hideSpinner(), i.parent.log("actionfailure", {
                    error: e
                })
            }))
        }, e.prototype.editSuccess = function(e) {
            this.parent.renderModule.resetTemplates(), this.invokeServerDataBind(e)
        }, e.prototype.invokeServerDataBind = function(e) {
            this.actionArgs = e, this.parent.currentAction = e, this.parent.allowServerDataBinding = !0, this.parent.serverDataBind(), this.parent.allowServerDataBinding = !1
        }, e.prototype.onDetailRowClick = function(e) {
            var t = this.parent,
                i = e.parentElement,
                n = i.getAttribute("data-uid"),
                r = t.getRowObjectFromUID(n),
                o = {
                    uid: n,
                    classList: e.classList[0],
                    index: i.getAttribute("aria-rowindex"),
                    rowIndex: t.getRowsObject().indexOf(r),
                    colSpan: this.parent.getVisibleColumns().length
                };
            if (t.interopAdaptor.invokeMethodAsync("OnDetailClick", o), e.classList.contains("e-detailrowcollapse")) {
                for (var s = t.getRowsObject(), a = r.data, l = this.parent.getRowUid("grid-row"), h = t.groupSettings.columns.length, p = new ts({
                        isDataRow: !0,
                        isExpand: !0,
                        uid: l,
                        isDetailRow: !0,
                        cells: [new is({
                            cellType: dr.Indent
                        }), new is({
                            isDataCell: !0,
                            visible: !0
                        })]
                    }), d = 0; d < h; d++) p.cells.unshift(new is({
                    cellType: dr.Indent
                }));
                s.splice(o.rowIndex + 1, 0, p), t.trigger("detailDataBound", {
                    data: a
                }), t.notify("detailDataBound", {
                    rows: t.getRowsObject()
                }), r.isExpand = !0, this.aria.setExpand(e, !0)
            } else t.getRowsObject().splice(o.rowIndex + 1, 1), t.notify("detailDataBound", {
                rows: t.getRowsObject()
            }), r.isExpand = !1, this.aria.setExpand(e, !1)
        }, e.prototype.setColumnVisibility = function(e) {
            for (var t = {}, i = 0; i < e.length; i++) t[e[i].uid] = e[i].visible;
            this.parent.interopAdaptor.invokeMethodAsync("setColumnVisibility", {
                visible: t
            })
        }, e.prototype.dataSuccess = function(e) {
            this.parent.enableVirtualization && 0 === Object.keys(this.actionArgs).length && (this.actionArgs.requestType = "virtualscroll");
            if (this.actionArgs.startIndex = e.startIndex, this.actionArgs.endIndex = e.endIndex, this.parent.enableVirtualization) {
                if (this.virtualContentModule = this.parent.contentModule, "downArrow" === this.virtualContentModule.activeKey || "upArrow" === this.virtualContentModule.activeKey) {
                    var t = this.parent.getRowByIndex(this.virtualContentModule.blzRowIndex);
                    t && (this.parent.selectRow(parseInt(t.getAttribute("aria-rowindex"), 10)), t.cells[0].focus({
                        preventScroll: !0
                    }))
                }
                this.virtualContentModule.blazorDataLoad = !1
            }
            if (e.foreignColumnsData)
                for (var i = this.parent.getColumns(), n = 0; n < i.length; n++) e.foreignColumnsData[i[n].field] && (i[n].columnData = e.foreignColumnsData[i[n].field]);
            if (this.parent.allowGrouping && this.parent.groupSettings.columns) {
                var r = [],
                    o = this.parent.aggregates;
                for (n = 0; n < o.length; n++)
                    for (var s = o[n], a = 0; a < s.columns.length; a++) {
                        var l;
                        l = {
                            type: s.columns[a].type.toString().toLowerCase(),
                            field: s.columns[a].field
                        }, r.push(l)
                    }
                for (var h = void 0, p = void 0, d = this.parent.groupSettings.columns, c = 0; c < d.length; c++) p = h || e.result, h = wn.group(p, d[c], r, null, null);
                e.result = h || e.result
            }
            var u = "offset";
            if (this.parent.rowUid = e.rowUid, e[u] = 1 === Math.sign(e[u]) ? -Math.abs(e[u]) : Math.abs(e[u]), this.parent.offsetTime = e[u], this.parent.offsetTime !== (new Date).getTimezoneOffset() / 60)
                if ("Batch" !== this.parent.editSettings.mode) {
                    "edit" === this.actionArgs.action ? this.setClientOffSet(e, this.actionArgs.rowIndex) : "add" === this.actionArgs.action && this.setClientOffSet(e, this.actionArgs.index)
                } else if ("Batch" === this.parent.editSettings.mode) {
                var g = this.parent.getPrimaryKeyFieldNames()[0],
                    f = this.actionArgs.changes || {
                        changedRecords: [],
                        addedRecords: []
                    };
                for (n = 0; n < f.changedRecords.length; n++)
                    for (a = 0; a < e.result.length; a++) f.changedRecords[n][g] === e.result[a][g] && this.setClientOffSet(e, a);
                for (n = 0; n < f.addedRecords.length; n++)
                    for (a = 0; a < e.result.length; a++) f.addedRecords[n][g] === e.result[a][g] && this.setClientOffSet(e, a)
            }
            this.parent.renderModule.dataManagerSuccess(e, this.actionArgs), this.parent.getMediaColumns(), this.parent.enableVirtualization && (this.virtualContentModule = this.parent.contentModule, this.setColVTableWidthAndTranslate(), this.parent.groupSettings.columns.length && this.virtualContentModule.setVirtualHeight(this.virtualHeight)), this.actionArgs = this.parent.currentAction = {}
        }, e.prototype.removeDisplayNone = function() {
            for (var e = this.parent.getContentTable().querySelectorAll("tr"), t = 0; t < e.length; t++)
                for (var i = e[t].querySelectorAll("td"), n = 0; n < i.length; n++) i[n].style.display = ""
        }, e.prototype.setVirtualTrackHeight = function(e) {
            this.virtualHeight = e.VisibleGroupedRowsCount * this.parent.getRowHeight(), this.virtualContentModule.setVirtualHeight(this.virtualHeight)
        }, e.prototype.setColVTableWidthAndTranslate = function(e) {
            if (this.parent.enableColumnVirtualization && this.virtualContentModule.prevInfo && JSON.stringify(this.virtualContentModule.currentInfo.columnIndexes) !== JSON.stringify(this.virtualContentModule.prevInfo.columnIndexes) || e && e.refresh) {
                var t = this.virtualContentModule.getColumnOffset(this.virtualContentModule.startColIndex - 1),
                    i = this.virtualContentModule.getColumnOffset(this.virtualContentModule.endColIndex - 1) - t + "";
                this.virtualContentModule.header.virtualEle.setWrapperWidth(i), this.virtualContentModule.virtualEle.setWrapperWidth(i), this.virtualContentModule.header.virtualEle.adjustTable(t, 0), this.parent.getContentTable().parentElement.style.width = i + "px"
            }
            this.dataSourceChanged && (this.virtualContentModule.getPanel().firstElementChild.scrollTop = 0, this.virtualContentModule.getPanel().firstElementChild.scrollLeft = 0, this.virtualContentModule.header.virtualEle && this.virtualContentModule.header.virtualEle.adjustTable(0, 0), this.parent.getContentTable().parentElement.style.transform = "translate(0px,0px)", this.virtualContentModule.refreshOffsets(), this.virtualContentModule.refreshVirtualElement(), this.dataSourceChanged = !1)
        }, e.prototype.dataSourceModified = function() {
            this.dataSourceChanged = !0
        }, e.prototype.setClientOffSet = function(e, t) {
            var i = wn.serverTimezoneOffset;
            wn.serverTimezoneOffset = 0, e.result[t] = wn.parse.parseJson(JSON.stringify(e.result[t])), wn.serverTimezoneOffset = i
        }, e.prototype.setServerOffSet = function(e) {
            var t = wn.serverTimezoneOffset,
                i = (new Date).getTimezoneOffset() / 60 * 2 + this.parent.offsetTime;
            wn.serverTimezoneOffset = i, e.data = wn.parse.parseJson(JSON.stringify(e.data)), wn.serverTimezoneOffset = t
        }, e.prototype.onGroupClick = function(e) {
            var t = this;
            e.exactTopIndex = Math.round(this.parent.element.querySelector(".e-content").scrollTop / this.parent.getRowHeight());
            e.rowHeight = this.parent.getRowHeight(), this.parent.interopAdaptor.invokeMethodAsync("OnGroupExpandClick", e).then((function() {
                t.parent.contentModule.rowElements = [].slice.call(t.parent.getContentTable().querySelectorAll("tr.e-row[data-uid]"))
            }))
        }, e.prototype.setPersistData = function(e) {
            var t = this.parent;
            t.mergePersistGridData(e);
            t.bulkChanges.columns && delete t.bulkChanges.columns, t.headerModule.refreshUI(), t.notify("persist-data-changed", {}), t.notify("column-visible-changed", t.getColumns())
        }, e.prototype.resetPersistData = function(e) {
            var t = this.parent,
                i = JSON.parse(e),
                n = {
                    filterSettings: i.filterSettings,
                    groupSettings: i.groupSettings,
                    pageSettings: i.pageSettings,
                    sortSettings: i.sortSettings,
                    searchSettings: i.searchSettings,
                    columns: i.columns
                };
            n.sortSettings.columns || (n.sortSettings.columns = []), n.groupSettings.columns || (n.groupSettings.columns = []), n.pageSettings.currentPage || (t.pageSettings.currentPage = 1);
            for (var r = 0; r < t.columns.length; r++) t.groupSettings.columns.indexOf(t.columns[r].field) > -1 && (t.columns[r].visible = !0);
            t.mergePersistGridData(n), t.notify("persist-data-changed", {}), t.bulkChanges.columns && delete t.bulkChanges.columns, t.headerModule.refreshUI();
            for (r = 0; r < t.columns.length; r++) t.columns[r].editType = t.columns[r].editType.toLowerCase();
            t.setProperties({
                filterSettings: {
                    columns: []
                }
            }, !0)
        }, e.prototype.contentColGroup = function() {
            var e = this.parent,
                t = e.getContent().querySelector(".e-table");
            if (t.insertBefore(t.querySelector("#content-" + e.element.id + "colGroup"), t.querySelector("tbody")), e.frozenRows) {
                var i = e.getHeaderContent().querySelector(".e-table");
                i.insertBefore(i.querySelector("#" + e.element.id + "colGroup"), i.querySelector("tbody"))
            }
            if (0 !== e.getFrozenColumns()) {
                var n = e.getContent().querySelector(".e-movablecontent").querySelector(".e-table");
                if (n.insertBefore(n.querySelector("#" + e.element.id + "colGroup"), n.querySelector("tbody")), e.frozenRows) {
                    var r = e.getHeaderContent().querySelector(".e-movableheader").querySelector(".e-table");
                    r.insertBefore(r.querySelector("#" + e.element.id + "colGroup"), r.querySelector("tbody"))
                }
            }
        }, e.prototype.dataFailure = function(e) {
            this.parent.renderModule.dataManagerFailure(e, this.actionArgs), this.actionArgs = this.parent.currentAction = {}
        }, e.prototype.destroy = function() {
            this.removeEventListener()
        }
    }(), function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }()),
    ma = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    ya = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt()], t.prototype, "field", void 0), ma([zt()], t.prototype, "direction", void 0), ma([zt(!1)], t.prototype, "isFromGroup", void 0), t
    }(oi),
    va = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([Wt([], ya)], t.prototype, "columns", void 0), ma([zt(!0)], t.prototype, "allowUnsort", void 0), t
    }(oi),
    ba = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt()], t.prototype, "field", void 0), ma([zt()], t.prototype, "operator", void 0), ma([zt()], t.prototype, "value", void 0), ma([zt()], t.prototype, "matchCase", void 0), ma([zt()], t.prototype, "ignoreAccent", void 0), ma([zt()], t.prototype, "predicate", void 0), ma([zt({})], t.prototype, "actualFilterValue", void 0), ma([zt({})], t.prototype, "actualOperator", void 0), ma([zt()], t.prototype, "type", void 0), ma([zt()], t.prototype, "ejpredicate", void 0), ma([zt()], t.prototype, "uid", void 0), ma([zt()], t.prototype, "isForeignKey", void 0), t
    }(oi),
    wa = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt(!1)], t.prototype, "enableCache", void 0), ma([zt(3)], t.prototype, "maxBlocks", void 0), ma([zt(3)], t.prototype, "initialBlocks", void 0), t
    }(oi),
    Ca = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([Wt([], ba)], t.prototype, "columns", void 0), ma([zt("FilterBar")], t.prototype, "type", void 0), ma([zt()], t.prototype, "mode", void 0), ma([zt(!0)], t.prototype, "showFilterBarStatus", void 0), ma([zt(1500)], t.prototype, "immediateModeDelay", void 0), ma([zt()], t.prototype, "operators", void 0), ma([zt(!1)], t.prototype, "ignoreAccent", void 0), ma([zt(!1)], t.prototype, "enableCaseSensitivity", void 0), ma([zt(!1)], t.prototype, "showFilterBarOperator", void 0), t
    }(oi),
    Sa = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt("Row")], t.prototype, "mode", void 0), ma([zt("Flow")], t.prototype, "cellSelectionMode", void 0), ma([zt("Single")], t.prototype, "type", void 0), ma([zt(!1)], t.prototype, "checkboxOnly", void 0), ma([zt(!1)], t.prototype, "persistSelection", void 0), ma([zt("Default")], t.prototype, "checkboxMode", void 0), ma([zt(!1)], t.prototype, "enableSimpleMultiRowSelection", void 0), ma([zt(!0)], t.prototype, "enableToggle", void 0), t
    }(oi),
    xa = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt([])], t.prototype, "fields", void 0), ma([zt("")], t.prototype, "key", void 0), ma([zt("contains")], t.prototype, "operator", void 0), ma([zt(!0)], t.prototype, "ignoreCase", void 0), ma([zt(!1)], t.prototype, "ignoreAccent", void 0), t
    }(oi),
    ka = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt()], t.prototype, "targetID", void 0), t
    }(oi),
    Ta = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt("Both")], t.prototype, "wrapMode", void 0), t
    }(oi),
    Da = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt("Normal")], t.prototype, "mode", void 0), t
    }(oi),
    Ea = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt(!0)], t.prototype, "showDropArea", void 0), ma([zt(!1)], t.prototype, "allowReordering", void 0), ma([zt(!1)], t.prototype, "showToggleButton", void 0), ma([zt(!1)], t.prototype, "showGroupedColumn", void 0), ma([zt(!0)], t.prototype, "showUngroupButton", void 0), ma([zt(!1)], t.prototype, "disablePageWiseAggregates", void 0), ma([zt([])], t.prototype, "columns", void 0), ma([zt()], t.prototype, "captionTemplate", void 0), ma([zt(!1)], t.prototype, "enableLazyLoading", void 0), t
    }(oi),
    Ra = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return fa(t, e), ma([zt(!1)], t.prototype, "allowAdding", void 0), ma([zt(!1)], t.prototype, "allowEditing", void 0), ma([zt(!1)], t.prototype, "allowDeleting", void 0), ma([zt("Normal")], t.prototype, "mode", void 0), ma([zt(!0)], t.prototype, "allowEditOnDblClick", void 0), ma([zt(!0)], t.prototype, "showConfirmDialog", void 0), ma([zt(!1)], t.prototype, "showDeleteConfirmDialog", void 0), ma([zt("")], t.prototype, "template", void 0), ma([zt("")], t.prototype, "headerTemplate", void 0), ma([zt("")], t.prototype, "footerTemplate", void 0), ma([zt("Top")], t.prototype, "newRowPosition", void 0), ma([zt({})], t.prototype, "dialog", void 0), ma([zt(!1)], t.prototype, "allowNextRowEdit", void 0), t
    }(oi),
    Pa = function(e) {
        function t(t, n) {
            var r = e.call(this, t, n) || this;
            return r.isPreventScrollEvent = !1, r.inViewIndexes = [], r.keyA = !1, r.media = {}, r.componentRefresh = pi.prototype.refresh, r.isVirtualAdaptive = !1, r.vRows = [], r.vcRows = [], r.vGroupOffsets = {}, r.rowUid = 0, r.currentViewData = [], r.lockcolPositionCount = 0, r.prevPageMoving = !1, r.pageTemplateChange = !1, r.isAutoGen = !1, r.mediaBindInstance = {}, r.commandDelIndex = void 0, r.asyncTimeOut = 50, r.enableLogger = !0, r.needsID = !0, i.Inject(oa), l("mergePersistData", r.mergePersistGridData, r), r
        }
        var i;
        return fa(t, e), i = t, t.prototype.getPersistData = function() {
            for (var e = ["pageSettings", "sortSettings", "filterSettings", "groupSettings", "columns", "searchSettings", "selectedRowIndex", "scrollPosition"], t = {
                    pageSettings: ["template", "pageSizes", "enableQueryString", "totalRecordsCount", "pageCount"],
                    filterSettings: ["type", "mode", "showFilterBarStatus", "immediateModeDelay", "ignoreAccent"],
                    groupSettings: ["showDropArea", "showToggleButton", "showGroupedColumn", "showUngroupButton", "disablePageWiseAggregates", "hideCaptionCount"],
                    searchSettings: ["fields", "operator", "ignoreCase"],
                    sortSettings: [],
                    columns: [],
                    selectedRowIndex: [],
                    scrollPosition: []
                }, i = 0; i < e.length; i++)
                for (var n = this[e[i]], r = 0, o = t[e[i]]; r < o.length; r++) {
                    delete n[o[r]]
                }
            return this.pageSettings.template = void 0, this.isAngular && delete this.groupSettings.properties.captionTemplate, this.pageTemplateChange = !g(this.pagerTemplate), this.addOnPersist(e)
        }, t.prototype.requiredModules = function() {
            var e = [];
            return this.isDestroyed || (this.allowFiltering && e.push({
                member: "filter",
                args: [this, this.filterSettings, this.serviceLocator]
            }), this.allowExcelExport && e.push({
                member: "ExcelExport",
                args: [this, this.serviceLocator]
            }), this.allowPdfExport && e.push({
                member: "PdfExport",
                args: [this]
            }), this.allowSorting && e.push({
                member: "sort",
                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]
            }), this.allowPaging && e.push({
                member: "pager",
                args: [this, this.pageSettings]
            }), this.allowSelection && e.push({
                member: "selection",
                args: [this, this.selectionSettings, this.serviceLocator]
            }), e.push({
                member: "resize",
                args: [this]
            }), this.allowReordering && e.push({
                member: "reorder",
                args: [this]
            }), this.allowRowDragAndDrop && e.push({
                member: "rowDragAndDrop",
                args: [this]
            }), this.allowGrouping && e.push({
                member: "group",
                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]
            }), this.aggregates.length && e.push({
                member: "aggregate",
                args: [this, this.serviceLocator]
            }), this.isDetail() && e.push({
                member: "detailRow",
                args: [this, this.serviceLocator]
            }), (this.toolbar || this.toolbarTemplate) && e.push({
                member: "toolbar",
                args: [this, this.serviceLocator]
            }), (this.enableVirtualization || this.enableColumnVirtualization) && e.push({
                member: "virtualscroll",
                args: [this, this.serviceLocator]
            }), (this.getFrozenColumns() || this.frozenRows) && e.push({
                member: "freeze",
                args: [this, this.serviceLocator]
            }), this.isCommandColumn(this.columns) && e.push({
                member: "commandColumn",
                args: [this, this.serviceLocator]
            }), (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) && e.push({
                member: "edit",
                args: [this, this.serviceLocator]
            }), this.extendRequiredModules(e)), e
        }, t.prototype.extendRequiredModules = function(e) {
            this.enableInfiniteScrolling && e.push({
                member: "infiniteScroll",
                args: [this, this.serviceLocator]
            }), this.groupSettings.enableLazyLoading && e.push({
                member: "lazyLoadGroup",
                args: [this, this.serviceLocator]
            }), this.contextMenuItems && e.push({
                member: "contextMenu",
                args: [this, this.serviceLocator]
            }), this.showColumnMenu && e.push({
                member: "columnMenu",
                args: [this, this.serviceLocator]
            }), this.showColumnChooser && e.push({
                member: "columnChooser",
                args: [this, this.serviceLocator]
            }), this.isForeignKeyEnabled(this.columns) && e.push({
                member: "foreignKey",
                args: [this, this.serviceLocator]
            }), this.enableLogger && e.push({
                member: "logger",
                args: [this]
            }), S() && e.push({
                member: "blazor",
                args: [this]
            })
        }, t.prototype.preRender = function() {
            this.serviceLocator = new zs, this.initProperties(), this.initializeServices()
        }, t.prototype.initProperties = function() {
            if (this.isInitial = !0, this.sortedColumns = [], this.inViewIndexes = [], this.mediaCol = [], this.isInitialLoad = !1, this.allowServerDataBinding = !1, this.ignoreCollectionWatch = !0, S() && this.enableVirtualization && this.allowGrouping) {
                this.isExpanded = !1
            }
            this.mergeCells = {}, this.isEdit = !1, this.checkAllRows = "None", this.isCheckBoxSelection = !1, this.isPersistSelection = !1, this.componentRefresh = pi.prototype.refresh, this.filterOperators = {
                contains: "contains",
                endsWith: "endswith",
                equal: "equal",
                greaterThan: "greaterthan",
                greaterThanOrEqual: "greaterthanorequal",
                lessThan: "lessthan",
                lessThanOrEqual: "lessthanorequal",
                notEqual: "notequal",
                startsWith: "startswith"
            }, this.defaultLocale = {
                EmptyRecord: "No records to display",
                True: "true",
                False: "false",
                InvalidFilterMessage: "Invalid Filter Data",
                GroupDropArea: "Drag a column header here to group its column",
                UnGroup: "Click here to ungroup",
                UnGroupButton: "Click here to ungroup",
                GroupDisable: "Grouping is disabled for this column",
                FilterbarTitle: "'s filter bar cell",
                EmptyDataSourceError: "DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",
                Add: "Add",
                Edit: "Edit",
                Cancel: "Cancel",
                Update: "Update",
                Delete: "Delete",
                Print: "Print",
                Pdfexport: "PDF Export",
                Excelexport: "Excel Export",
                Wordexport: "Word Export",
                Csvexport: "CSV Export",
                Search: "Search",
                Columnchooser: "Columns",
                Save: "Save",
                Item: "item",
                Items: "items",
                EditOperationAlert: "No records selected for edit operation",
                DeleteOperationAlert: "No records selected for delete operation",
                SaveButton: "Save",
                OKButton: "OK",
                CancelButton: "Cancel",
                EditFormTitle: "Details of ",
                AddFormTitle: "Add New Record",
                BatchSaveConfirm: "Are you sure you want to save changes?",
                BatchSaveLostChanges: "Unsaved changes will be lost. Are you sure you want to continue?",
                ConfirmDelete: "Are you sure you want to Delete Record and child records?",
                CancelEdit: "Are you sure you want to Cancel the changes?",
                ChooseColumns: "Choose Column",
                SearchColumns: "search columns",
                Matchs: "No Matches Found",
                FilterButton: "Filter",
                ClearButton: "Clear",
                StartsWith: "Starts With",
                EndsWith: "Ends With",
                Contains: "Contains",
                Equal: "Equal",
                NotEqual: "Not Equal",
                LessThan: "Less Than",
                LessThanOrEqual: "Less Than Or Equal",
                GreaterThan: "Greater Than",
                GreaterThanOrEqual: "Greater Than Or Equal",
                ChooseDate: "Choose a Date",
                EnterValue: "Enter the value",
                Copy: "Copy",
                Group: "Group by this column",
                Ungroup: "Ungroup by this column",
                autoFitAll: "Autofit all columns",
                autoFit: "Autofit this column",
                AutoFitAll: "Autofit all columns",
                AutoFit: "Autofit this column",
                Export: "Export",
                FirstPage: "First Page",
                LastPage: "Last Page",
                PreviousPage: "Previous Page",
                NextPage: "Next Page",
                SortAscending: "Sort Ascending",
                SortDescending: "Sort Descending",
                EditRecord: "Edit Record",
                DeleteRecord: "Delete Record",
                FilterMenu: "Filter",
                SelectAll: "Select All",
                Blanks: "Blanks",
                FilterTrue: "True",
                FilterFalse: "False",
                NoResult: "No Matches Found",
                ClearFilter: "Clear Filter",
                NumberFilter: "Number Filters",
                TextFilter: "Text Filters",
                DateFilter: "Date Filters",
                DateTimeFilter: "DateTime Filters",
                MatchCase: "Match Case",
                Between: "Between",
                CustomFilter: "Custom Filter",
                CustomFilterPlaceHolder: "Enter the value",
                CustomFilterDatePlaceHolder: "Choose a date",
                AND: "AND",
                OR: "OR",
                ShowRowsWhere: "Show rows where:",
                FilterMenuDialogARIA: "Filter menu dialog",
                ExcelFilterDialogARIA: "Excel filter dialog",
                DialogEditARIA: "Edit dialog",
                ColumnChooserDialogARIA: "Column chooser dialog",
                ColumnMenuDialogARIA: "Column menu dialog",
                CustomFilterDialogARIA: "Customer filter dialog"
            }, this.keyConfigs = {
                downArrow: "downarrow",
                upArrow: "uparrow",
                rightArrow: "rightarrow",
                leftArrow: "leftarrow",
                shiftDown: "shift+downarrow",
                shiftUp: "shift+uparrow",
                shiftRight: "shift+rightarrow",
                shiftLeft: "shift+leftarrow",
                home: "home",
                end: "end",
                escape: "escape",
                ctrlHome: "ctrl+home",
                ctrlEnd: "ctrl+end",
                pageUp: "pageup",
                pageDown: "pagedown",
                ctrlAltPageUp: "ctrl+alt+pageup",
                ctrlAltPageDown: "ctrl+alt+pagedown",
                altPageUp: "alt+pageup",
                altPageDown: "alt+pagedown",
                altDownArrow: "alt+downarrow",
                altUpArrow: "alt+uparrow",
                ctrlDownArrow: "ctrl+downarrow",
                ctrlUpArrow: "ctrl+uparrow",
                ctrlPlusA: "ctrl+A",
                ctrlPlusP: "ctrl+P",
                insert: "insert",
                delete: "delete",
                f2: "f2",
                enter: "enter",
                ctrlEnter: "ctrl+enter",
                shiftEnter: "shift+enter",
                tab: "tab",
                shiftTab: "shift+tab",
                space: "space",
                ctrlPlusC: "ctrl+C",
                ctrlShiftPlusH: "ctrl+shift+H",
                ctrlSpace: "ctrl+space",
                ctrlLeftArrow: "ctrl+leftarrow",
                ctrlRightArrow: "ctrl+rightarrow"
            }
        }, t.prototype.render = function() {
            this.log(["module_missing", "promise_enabled", "locale_missing", "check_datasource_columns"]), this.ariaService.setOptions(this.element, {
                role: "grid"
            }), S() && this.renderComplete(), Ni({
                target: this.element
            }, this.createElement), this.renderModule = new Vs(this, this.serviceLocator), this.searchModule = new sa(this), this.scrollModule = new la(this), this.notify("initial-load", {}), !0 !== this.getDataModule().dataManager.dataSource.offline && void 0 !== this.getDataModule().dataManager.dataSource.url || (this.isVirtualAdaptive = !0), this.trigger("load"), _a(this.columns, this.enableColumnVirtualization), this.enablePersistence && this.notify("columns-prepared", {}), S() && this.isServerRendered || (this.getMediaColumns(), Wa(this.columns)), this.checkLockColumns(this.columns), this.getColumns(), this.processModel(), this.gridRender(), this.wireEvents(), this.addListener(), this.updateDefaultCursor(), this.updateStackedFilter(), this.showSpinner(), this.notify(Sr, {}), S() && this.isServerRendered && ga.notify("component-rendered", {
                id: this.element.id,
                grid: this
            })
        }, t.prototype.showSpinner = function() {
            Xi(this.element)
        }, t.prototype.hideSpinner = function() {
            Ji(this.element)
        }, t.prototype.updateStackedFilter = function() {
            this.allowFiltering && "FilterBar" === this.filterSettings.type && this.getHeaderContent().querySelectorAll(".e-stackedheadercell").length ? this.getHeaderContent().classList.add("e-stackedfilter") : this.getHeaderContent().classList.remove("e-stackedfilter")
        }, t.prototype.getMediaColumns = function() {
            if (!this.enableColumnVirtualization) {
                var e = this.getColumns();
                if (this.getShowHideService = this.serviceLocator.getService("showHideService"), !g(e))
                    for (var t = 0; t < e.length; t++) g(e[t].hideAtMedia) || !g(e[t].visible) && !e[t].visible || this.pushMediaColumn(e[t], t)
            }
        }, t.prototype.pushMediaColumn = function(e, t) {
            this.mediaCol.push(e), this.media[e.uid] = window.matchMedia(e.hideAtMedia), this.mediaQueryUpdate(t, this.media[e.uid]), this.mediaBindInstance[t] = this.mediaQueryUpdate.bind(this, t), this.media[e.uid].addListener(this.mediaBindInstance[t])
        }, t.prototype.updateMediaColumns = function(e) {
            if (!this.enableColumnVirtualization) {
                for (var t = this.getColumnIndexByUid(e.uid), i = 0; i < this.mediaCol.length; i++)
                    if (e.uid === this.mediaCol[i].uid) return void this.mediaCol.splice(i, 1);
                this.pushMediaColumn(e, t)
            }
        }, t.prototype.mediaQueryUpdate = function(e, t) {
            var i = this.getColumns()[e];
            this.mediaCol.some((function(e) {
                return e.uid === i.uid
            })) && (i.visible = t.matches, this.isInitialLoad && (this.invokedFromMedia = !0, i.visible ? this.showHider.show(i.headerText, "headerText") : this.showHider.hide(i.headerText, "headerText")))
        }, t.prototype.refreshMediaCol = function() {
            this.isInitialLoad = !0;
            var e = this.element.querySelector(".e-gridfooter");
            this.aggregates.length && this.element.scrollHeight > this.height && e && ut([e], ["e-footerpadding"]), this.getColumns().filter((function(e) {
                return "checkbox" === e.type
            })).length && "ResetOnRowClick" === this.selectionSettings.checkboxMode && (this.isCheckBoxSelection = !1)
        }, t.prototype.removeMediaListener = function() {
            for (var e = 0; e < this.mediaCol.length; e++) this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])
        }, t.prototype.eventInitializer = function() {}, t.prototype.destroy = function() {
            var t = this.element;
            if (t) {
                var i = !(!t.querySelector(".e-gridheader") || !t.querySelector(".e-gridcontent"));
                i && this.unwireEvents(), this.removeListener(), this.removeMediaListener(), this.notify("destroy", {}), this.destroyDependentModules(), i && e.prototype.destroy.call(this), this.toolTipObj.destroy();
                for (var n = ["renderModule", "headerModule", "contentModule", "valueFormatterService", "serviceLocator", "ariaService", "keyboardModule", "widthService", "searchModule", "showHider", "scrollModule", "printModule", "clipboardModule", "focusModule"], r = 0; r < n.length; r++) this[n[r]] && (this[n[r]] = null);
                S() && this.isServerRendered ? this.element.style.display = "none" : this.element.innerHTML = "", Et(this.element, [], ["e-rtl", "e-gridhover", "e-responsive", "e-default", "e-device", "e-grid-min-height"])
            }
        }, t.prototype.destroyDependentModules = function() {
            var e = this.element;
            e && (e.querySelector(".e-gridheader") || e.querySelector(".e-gridcontent")) && (this.scrollModule.destroy(), this.keyboardModule.destroy(), this.focusModule.destroy())
        }, t.prototype.getModuleName = function() {
            return "grid"
        }, t.prototype.enableBoxSelection = function() {
            this.enableAutoFill ? (this.selectionSettings.cellSelectionMode = "BoxWithBorder", this.element.classList.add("e-afenabled")) : this.element.classList.remove("e-afenabled")
        }, t.prototype.onPropertyChanged = function(e, t) {
            var i, n = !1,
                r = !1,
                o = !1;
            if (!this.isDestroyed) {
                this.log("module_missing");
                var s = Object.keys(e);
                s.indexOf("columns") > -1 && (this.updateColumnObject(), r = !0);
                for (var a = 0, l = s; a < l.length; a++) {
                    var h = l[a];
                    switch (h) {
                        case "allowPaging":
                            this.notify(kr, {
                                module: "pager",
                                enable: this.allowPaging
                            }), n = !0;
                            break;
                        case "pageSettings":
                            if (this.pageTemplateChange) {
                                this.pageTemplateChange = !1, this.notify(Dr, {
                                    module: "pager",
                                    properties: e.pageSettings
                                });
                                break
                            }
                            this.notify(Dr, {
                                module: "pager",
                                properties: e.pageSettings
                            }), (g(e.pageSettings.currentPage) && g(e.pageSettings.pageSize) && g(e.pageSettings.totalRecordsCount) || !g(t.pageSettings) && e.pageSettings.currentPage !== t.pageSettings.currentPage && !this.enableColumnVirtualization && !this.enableVirtualization && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize) && (n = !0);
                            break;
                        case "allowSorting":
                            this.notify(kr, {
                                module: "sort",
                                enable: this.allowSorting
                            }), n = !0, i = !0;
                            break;
                        case "allowFiltering":
                            this.updateStackedFilter(), this.notify(kr, {
                                module: "filter",
                                enable: this.allowFiltering
                            }), n = !0, "FilterBar" !== this.filterSettings.type && this.refreshHeader();
                            break;
                        case "height":
                        case "width":
                            this.notify(kr, {
                                module: "scroll",
                                properties: {
                                    width: e.width,
                                    height: e.height
                                }
                            });
                            break;
                        case "allowReordering":
                            this.headerModule.refreshUI(), i = !0;
                            break;
                        case "allowRowDragAndDrop":
                            this.notify(kr, {
                                module: "rowDragAndDrop",
                                enable: this.allowRowDragAndDrop
                            }), this.renderModule.refresh(), this.headerModule.refreshUI();
                            break;
                        case "allowSelection":
                            this.notify(kr, {
                                module: "selection",
                                enable: this.allowSelection
                            });
                            break;
                        case "enableAutoFill":
                            this.selectionModule && (this.enableBoxSelection(), this.selectionModule.updateAutoFillPosition());
                            break;
                        case "rowTemplate":
                            this.rowTemplateFn = ja(this.rowTemplate), n = !0;
                            break;
                        case "detailTemplate":
                            this.detailTemplateFn = ja(this.detailTemplate), n = !0;
                            break;
                        case "allowGrouping":
                            this.notify(kr, {
                                module: "group",
                                enable: this.allowGrouping
                            }), this.headerModule.refreshUI(), n = !0, i = !0;
                            break;
                        case "enableInfiniteScrolling":
                        case "childGrid":
                            n = !0;
                            break;
                        case "toolbar":
                            this.notify(kr, {
                                module: "toolbar"
                            });
                            break;
                        case "groupSettings":
                            this.notify(Dr, {
                                module: "group",
                                properties: e.groupSettings,
                                oldProperties: t.groupSettings
                            });
                            break;
                        case "aggregates":
                            !this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length && (n = !0), this.notify(kr, {
                                module: "aggregate",
                                properties: e
                            });
                            break;
                        case "frozenColumns":
                        case "frozenRows":
                        case "enableVirtualization":
                        case "currencyCode":
                        case "locale":
                            this.log("frozen_rows_columns"), o = !0, r = !0;
                            break;
                        case "query":
                            this.getDataModule().isQueryInvokedFromData || (n = !0), this.getDataModule().isQueryInvokedFromData = !1;
                            break;
                        default:
                            this.extendedPropertyChange(h, e, r)
                    }
                }
                i && this.updateDefaultCursor(), r ? o || this.frozenColumns || this.frozenRows ? S() && this.isServerRendered || this.freezeRefresh() : this.refresh() : n && (this.notify(Er, {
                    requestType: "refresh"
                }), n = !1, this.maintainSelection(e.selectedRowIndex))
            }
        }, t.prototype.extendedPropertyChange = function(e, t, i) {
            switch (e) {
                case "enableRtl":
                    this.updateRTL(), this.allowPaging && (this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl = t.enableRtl, this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()), "auto" !== this.height && (this.scrollModule.removePadding(!t.enableRtl), this.scrollModule.setPadding()), this.toolbar && this.toolbarModule && (this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = t.enableRtl, this.toolbarModule.getToolbar().ej2_instances[0].dataBind()), this.contextMenuItems && this.contextMenuModule && (this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = t.enableRtl, this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()), this.showColumnMenu && this.columnMenuModule && (this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = t.enableRtl, this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()), "FilterBar" === this.filterSettings.type && this.filterSettings.showFilterBarOperator && this.refreshHeader(), this.notify("rtl-updated", {});
                    break;
                case "enableAltRow":
                    this.renderModule.refresh();
                    break;
                case "allowResizing":
                    this.headerModule.refreshUI(), this.updateResizeLines();
                    break;
                case "rowHeight":
                    this.rowHeight ? ut([this.element], "e-grid-min-height") : gt([this.element], "e-grid-min-height"), this.renderModule.refresh(), this.headerModule.refreshUI();
                    break;
                case "gridLines":
                    this.updateGridLines();
                    break;
                case "showColumnMenu":
                    this.headerModule.refreshUI(), this.notify(kr, {
                        module: "columnMenu",
                        enable: !0
                    });
                    break;
                case "columnMenuItems":
                    this.notify(kr, {
                        module: "columnMenu",
                        enable: this.columnMenuItems
                    });
                    break;
                case "contextMenuItems":
                    this.notify(kr, {
                        module: "contextMenu",
                        enable: this.contextMenuItems
                    });
                    break;
                case "showColumnChooser":
                    this.notify(kr, {
                        module: "columnChooser",
                        enable: this.showColumnChooser
                    });
                    break;
                case "filterSettings":
                    this.updateStackedFilter(), this.notify(Dr, {
                        module: "filter",
                        properties: t.filterSettings
                    });
                    break;
                case "searchSettings":
                    this.notify(Dr, {
                        module: "search",
                        properties: t.searchSettings
                    });
                    break;
                case "sortSettings":
                    this.notify(Dr, {
                        module: "sort"
                    });
                    break;
                case "selectionSettings":
                    this.notify(Dr, {
                        module: "selection",
                        properties: t.selectionSettings
                    });
                    break;
                case "editSettings":
                    this.notify(Dr, {
                        module: "edit",
                        properties: t.editSettings
                    });
                    break;
                case "allowTextWrap":
                case "textWrapSettings":
                    this.allowTextWrap ? this.applyTextWrap() : this.removeTextWrap(), this.notify("freezerender", {
                        case: "textwrap",
                        isModeChg: "textWrapSettings" === e
                    });
                    break;
                case "dataSource":
                    var n = this.getDataModule().getState();
                    if (Object.getPrototypeOf(t).deepWatch)
                        for (var r = this.getPrimaryKeyFieldNames()[0], o = 0, s = Object.keys(t.dataSource); o < s.length; o++) this.setRowData(a(r, this.dataSource[s[o]]), this.dataSource[s[o]]);
                    else if (n.isPending) {
                        var l = g(this.dataSource) ? [] : this.dataSource.result,
                            h = n.group || [];
                        for (o = 0; o < h.length; o++) l = wn.group(l, h[o], n.aggregates || []);
                        this.dataSource = {
                            result: l,
                            count: this.dataSource.count,
                            aggregates: this.dataSource.aggregates
                        }, this.getDataModule().setState({}), n.resolver(this.dataSource)
                    } else this.getDataModule().setState({
                        isDataChanged: !1
                    }), this.notify("datasource-modified", {}), i || this.renderModule.refresh();
                    this.scrollRefresh();
                    break;
                case "enableHover":
                    (t.enableHover ? ut : gt)([this.element], "e-gridhover");
                    break;
                case "selectedRowIndex":
                    this.isSelectedRowIndexUpdating || this.selectRow(t.selectedRowIndex), this.isSelectedRowIndexUpdating = !1;
                    break;
                case "resizeSettings":
                    this.widthService.setWidthToTable()
            }
        }, t.prototype.maintainSelection = function(e) {
            var t = this;
            if (-1 !== e) {
                var i = function() {
                    t.selectRow(e), t.off(xr, i)
                };
                this.on(xr, i, this)
            }
        }, t.prototype.setProperties = function(t, i) {
            e.prototype.setProperties.call(this, t, i);
            t.filterSettings && this.filterModule && i && this.filterModule.refreshFilter()
        }, t.prototype.updateDefaultCursor = function() {
            var e = [].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),
                t = [].slice.call(this.getHeaderContent().querySelectorAll(".e-stackedheadercell")),
                i = this.getColumns();
            if (this.enableColumnVirtualization && this.getFrozenColumns()) {
                var n = this.contentModule.getHeaderCells();
                e = n.length ? n : e
            }
            for (var r = 0; r < e.length; r++) {
                var o = e[r];
                (this.allowGrouping || this.allowReordering || this.allowSorting) && (i[r].allowReordering && i[r].allowSorting && i[r].allowGrouping ? o.classList.add("e-mousepointer") : o.classList.add("e-defaultcursor"))
            }
            for (var s = 0; s < t.length; s++) this.allowReordering && t[s].classList.add("e-mousepointer")
        }, t.prototype.updateColumnModel = function(e) {
            for (var t = 0, i = e.length; t < i; t++) e[t].columns ? this.updateColumnModel(e[t].columns) : this.columnModel.push(e[t]);
            this.updateFrozenColumns(), this.updateLockableColumns()
        }, t.prototype.updateFrozenColumns = function() {
            for (var e = this.columnModel, t = 0, i = 0, n = e.length; i < n; i++) e[i].isFrozen && (e.splice(this.frozenColumns + t, 0, e.splice(i, 1)[0]), t++)
        }, t.prototype.updateLockableColumns = function() {
            for (var e = this.columnModel, t = 0, i = 0, n = this.getFrozenColumns(), r = 0; r < e.length; r++) e[r].lockColumn && (r < n ? (e.splice(t, 0, e.splice(r, 1)[0]), t++) : (e.splice(n + i, 0, e.splice(r, 1)[0]), i++))
        }, t.prototype.checkLockColumns = function(e) {
            for (var t = 0; t < e.length; t++) e[t].columns ? this.checkLockColumns(e[t].columns) : e[t].lockColumn && this.lockcolPositionCount++
        }, t.prototype.getColumns = function(e) {
            var t = this,
                i = this.inViewIndexes.map((function(e) {
                    return e - t.groupSettings.columns.length
                })).filter((function(e) {
                    return e > -1
                })),
                n = i.length;
            (!this.enableColumnVirtualization || g(this.columnModel) || 0 === this.columnModel.length || e) && (this.columnModel = [], this.updateColumnModel(this.columns));
            var r = 0 === n ? this.columnModel : this.columnModel.slice(i[0], i[n - 1] + 1);
            this.contentModule && this.enableColumnVirtualization && this.getFrozenColumns() && i.length && i[0] > 0 && (r = this.contentModule.ensureFrozenCols(r));
            return r
        }, t.prototype.getStackedHeaderColumnByHeaderText = function(e, t) {
            for (var i = 0; i < t.length; i++) {
                var n = t[i];
                if (n.field === e || n.headerText === e) {
                    this.stackedColumn = n;
                    break
                }
                n.columns && this.getStackedHeaderColumnByHeaderText(e, n.columns)
            }
            return this.stackedColumn
        }, t.prototype.getColumnIndexesInView = function() {
            return this.inViewIndexes
        }, t.prototype.getQuery = function() {
            return this.query
        }, t.prototype.getLocaleConstants = function() {
            return this.defaultLocale
        }, t.prototype.setColumnIndexesInView = function(e) {
            this.inViewIndexes = e
        }, t.prototype.getVisibleColumns = function() {
            for (var e = [], t = 0, i = this.columnModel; t < i.length; t++) {
                var n = i[t];
                n.visible && e.push(n)
            }
            return e
        }, t.prototype.getHeaderContent = function() {
            return this.headerModule.getPanel()
        }, t.prototype.setGridHeaderContent = function(e) {
            this.headerModule.setPanel(e)
        }, t.prototype.getContentTable = function() {
            return this.contentModule.getTable()
        }, t.prototype.setGridContentTable = function(e) {
            this.contentModule.setTable(e)
        }, t.prototype.getContent = function() {
            return this.contentModule.getPanel()
        }, t.prototype.setGridContent = function(e) {
            this.contentModule.setPanel(e)
        }, t.prototype.getHeaderTable = function() {
            return this.headerModule.getTable()
        }, t.prototype.setGridHeaderTable = function(e) {
            this.headerModule.setTable(e)
        }, t.prototype.getFooterContent = function() {
            return this.footerElement = this.element.getElementsByClassName("e-gridfooter")[0], this.footerElement
        }, t.prototype.getFooterContentTable = function() {
            return this.footerElement = this.element.getElementsByClassName("e-gridfooter")[0], this.footerElement.firstChild.firstChild
        }, t.prototype.getPager = function() {
            return this.gridPager
        }, t.prototype.setGridPager = function(e) {
            this.gridPager = e
        }, t.prototype.getRowByIndex = function(e) {
            return this.contentModule.getRowByIndex(e)
        }, t.prototype.getMovableRowByIndex = function(e) {
            return this.contentModule.getMovableRowByIndex(e)
        }, t.prototype.getFrozenRowByIndex = function(e) {
            return this.getFrozenDataRows()[e]
        }, t.prototype.getRows = function() {
            return this.contentModule.getRowElements()
        }, t.prototype.getRowInfo = function(e) {
            var t = e,
                i = {
                    target: e
                };
            if (!g(e) && g(Ka(t, "e-detailrowcollapse") && g(Ka(t, "e-recordplusexpand")))) {
                var n = Tt(t, ".e-rowcell");
                if (!n) {
                    var r = Tt(t, ".e-row");
                    if (!g(r)) {
                        var o = this.getRowObjectFromUID(r.getAttribute("data-uid")),
                            s = parseInt(r.getAttribute("aria-rowindex"), 10);
                        i = {
                            row: r,
                            rowData: o.data,
                            rowIndex: s
                        }
                    }
                    return i
                }
                var a = parseInt(n.getAttribute("aria-colindex"), 10);
                if (!g(n) && !isNaN(a)) {
                    var l = Tt(n, ".e-row"),
                        h = (s = parseInt(l.getAttribute("aria-rowindex"), 10), this.getFrozenColumns()),
                        p = !!h && a >= h,
                        d = (p ? this.contentModule.getMovableRows() : this.contentModule.getRows()).filter((function(e) {
                            return e.uid === l.getAttribute("data-uid")
                        })),
                        c = {},
                        u = void 0;
                    Object.keys(d).length && (c = d[0].data, u = d[0].cells[p ? a - h : a + this.getIndentCount()].column), i = {
                        cell: n,
                        cellIndex: a,
                        row: l,
                        rowIndex: s,
                        rowData: c,
                        column: u,
                        target: e
                    }
                }
            }
            return i
        }, t.prototype.getMovableRows = function() {
            return this.contentModule.getMovableRowElements()
        }, t.prototype.getDataRows = function() {
            if (g(this.getContentTable().querySelector("tbody"))) return [];
            var e = [].slice.call(this.getContentTable().querySelector("tbody").children);
            if (this.frozenRows) {
                var t = [].slice.call(this.getHeaderTable().querySelector("tbody").children);
                e = this.addMovableRows(t, e)
            }
            return this.generateDataRows(e)
        }, t.prototype.addMovableRows = function(e, t) {
            for (var i = 0, n = t.length; i < n; i++) e.push(t[i]);
            return e
        }, t.prototype.generateDataRows = function(e) {
            for (var t = [], i = 0, n = e.length; i < n; i++) e[i].classList.contains("e-row") && !e[i].classList.contains("e-hiddenrow") && (this.isCollapseStateEnabled() ? t[parseInt(e[i].getAttribute("aria-rowindex"))] = e[i] : t.push(e[i]));
            return t
        }, t.prototype.getMovableDataRows = function() {
            var e = [].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);
            if (this.frozenRows) {
                var t = [].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);
                e = this.addMovableRows(t, e)
            }
            return this.generateDataRows(e)
        }, t.prototype.getFrozenDataRows = function() {
            var e = [].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children);
            if (this.frozenRows) {
                var t = [].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);
                e = this.addMovableRows(t, e)
            }
            return this.generateDataRows(e)
        }, t.prototype.setCellValue = function(e, t, i) {
            var n, r, o, s, h, p = this.getPrimaryKeyFieldNames()[0],
                d = new gs(this, this.serviceLocator),
                c = {},
                u = this.contentModule.getRows(),
                f = this.contentModule.getMovableRows();
            if (n = this.getColumnIndexByField(t), this.groupSettings.columns.length && (n += this.groupSettings.columns.length), (this.childGrid || this.detailTemplate) && n++, this.isRowDragable() && n++, r = this.getColumnByField(t), h = u.filter((function(t) {
                    return a(p, t.data) === e
                }))[0], c = f.filter((function(t) {
                    return a(p, t.data) === e
                }))[0], o = g(h) ? null : this.element.querySelector("[data-uid=" + h.uid + "]"), s = g(c) ? null : this.element.querySelector("[data-uid=" + c.uid + "]"), !g(o)) {
                l(t, i, h.data);
                var m = g(o.cells[n]) ? s.cells[n - this.frozenColumns] : o.cells[n];
                if (!g(m)) {
                    var y = h.cells[n],
                        v = void 0;
                    this.frozenColumns && (v = c.cells[n - this.frozenColumns]), d.refreshTD(m, g(y) ? v : y, h.data, {
                        index: h.index
                    }), this.aggregates.length > 0 && (this.notify("refresh-footer-rendered", {}), this.groupSettings.columns.length > 0 && this.notify("group-aggregates", {})), g(c) || g(c.changes) || (c.changes[t] = i), this.trigger("queryCellInfo", {
                        cell: m,
                        column: r,
                        data: h.data
                    })
                }
            }
        }, t.prototype.setRowData = function(e, t) {
            var i, n = this.contentModule.getRows(),
                r = this.getPrimaryKeyFieldNames()[0],
                o = new rs(this.serviceLocator, null, this);
            this.groupSettings.columns.length > 0 && this.aggregates.length > 0 && (n = n.filter((function(e) {
                return e.isDataRow
            }))), !g(i = n.filter((function(t) {
                return a(r, t.data) === e
            }))[0]) && this.element.querySelectorAll("[data-uid=" + i.uid + "]").length && (i.changes = t, vl(i, this.getForeignKeyColumns(), i.changes), o.refresh(i, this.getColumns(), !0), this.aggregates.length > 0 && (this.notify("refresh-footer-rendered", {}), this.groupSettings.columns.length > 0 && this.notify("group-aggregates", {})))
        }, t.prototype.getCellFromIndex = function(e, t) {
            var i = this.getFrozenColumns();
            return i && t >= i ? this.getMovableDataRows()[e] && this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t - i] : this.getDataRows()[e] && this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]
        }, t.prototype.getMovableCellFromIndex = function(e, t) {
            return this.getMovableDataRows()[e] && this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t - this.getFrozenColumns()]
        }, t.prototype.getColumnHeaderByIndex = function(e) {
            return this.getHeaderTable().querySelectorAll(".e-headercell")[e]
        }, t.prototype.getRowObjectFromUID = function(e) {
            var t = this.contentModule.getRows(),
                i = this.rowObject(t, e);
            return this.getFrozenColumns() && !i ? i = this.rowObject(this.contentModule.getMovableRows(), e) : g(i) && this.enableVirtualization && this.groupSettings.columns.length > 0 ? i = this.rowObject(this.vRows, e) : i
        }, t.prototype.rowObject = function(e, t) {
            for (var i = 0, n = e; i < n.length; i++) {
                var r = n[i];
                if (r.uid === t) return r
            }
            return null
        }, t.prototype.getRowsObject = function() {
            return this.contentModule.getRows()
        }, t.prototype.getMovableRowsObject = function() {
            return this.contentModule.getMovableRows()
        }, t.prototype.getColumnHeaderByField = function(e) {
            var t = this.getColumnByField(e);
            return t ? this.getColumnHeaderByUid(t.uid) : void 0
        }, t.prototype.getColumnHeaderByUid = function(e) {
            var t = this.getHeaderContent().querySelector("[e-mappinguid=" + e + "]");
            return t ? t.parentElement : void 0
        }, t.prototype.getColumnByIndex = function(e) {
            var t;
            return this.getColumns().some((function(i, n) {
                return t = i, n === e
            })), t
        }, t.prototype.getColumnByField = function(e) {
            return Ha(this.getColumns(), (function(t, i) {
                if (t.field === e) return t
            }))[0]
        }, t.prototype.getColumnIndexByField = function(e) {
            for (var t = this.getColumns(), i = 0; i < t.length; i++)
                if (t[i].field === e) return i;
            return -1
        }, t.prototype.getColumnByUid = function(e) {
            return Ha(this.getColumns().concat(this.getStackedColumns(this.columns)), (function(t, i) {
                if (t.uid === e) return t
            }))[0]
        }, t.prototype.getStackedColumns = function(e, t) {
            void 0 === t && (t = []);
            for (var i = 0, n = e; i < n.length; i++) {
                var r = n[i];
                r.columns && (t.push(r), this.getStackedColumns(r.columns, t))
            }
            return t
        }, t.prototype.getColumnIndexByUid = function(e) {
            var t = Ha(this.getColumns(), (function(t, i) {
                if (t.uid === e) return i
            }))[0];
            return g(t) ? -1 : t
        }, t.prototype.getUidByColumnField = function(e) {
            return Ha(this.getColumns(), (function(t, i) {
                if (t.field === e) return t.uid
            }))[0]
        }, t.prototype.getNormalizedColumnIndex = function(e) {
            return this.getColumnIndexByUid(e) + this.getIndentCount()
        }, t.prototype.getIndentCount = function() {
            var e = 0;
            return this.allowGrouping && (e += this.groupSettings.columns.length), this.isDetail() && e++, this.isRowDragable() && g(this.rowDropSettings.targetID) && e++, e
        }, t.prototype.getColumnFieldNames = function() {
            for (var e, t = [], i = 0, n = this.getColumns().length; i < n; i++)(e = this.getColumns()[i]).visible && t.push(e.field);
            return t
        }, t.prototype.getRowTemplate = function() {
            return this.rowTemplateFn
        }, t.prototype.getDetailTemplate = function() {
            return this.detailTemplateFn
        }, t.prototype.getEditTemplate = function() {
            return this.editTemplateFn
        }, t.prototype.getEditHeaderTemplate = function() {
            return this.editHeaderTemplateFn
        }, t.prototype.getEditFooterTemplate = function() {
            return this.editFooterTemplateFn
        }, t.prototype.getPrimaryKeyFieldNames = function() {
            for (var e = [], t = 0; t < this.columnModel.length; t++) this.columnModel[t].isPrimaryKey && e.push(this.columnModel[t].field);
            return e
        }, t.prototype.refresh = function() {
            this.headerModule.refreshUI(), this.updateStackedFilter(), this.renderModule.refresh()
        }, t.prototype.refreshHeader = function() {
            this.headerModule.refreshUI()
        }, t.prototype.getSelectedRows = function() {
            return this.selectionModule ? this.selectionModule.selectedRecords : []
        }, t.prototype.getSelectedRowIndexes = function() {
            return this.selectionModule ? this.selectionModule.selectedRowIndexes : []
        }, t.prototype.getSelectedRowCellIndexes = function() {
            return this.selectionModule ? this.selectionModule.selectedRowCellIndexes : []
        }, t.prototype.getSelectedRecords = function() {
            return this.selectionModule ? this.selectionModule.getSelectedRecords() : []
        }, t.prototype.getDataModule = function() {
            return this.renderModule.data
        }, t.prototype.showColumns = function(e, t) {
            t = t || "headerText", this.showHider.show(e, t)
        }, t.prototype.hideColumns = function(e, t) {
            t = t || "headerText", this.showHider.hide(e, t)
        }, t.prototype.getFrozenColumns = function() {
            return this.frozenColumns + this.getFrozenCount(this.columns, 0)
        }, t.prototype.getVisibleFrozenColumns = function() {
            return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0)
        }, t.prototype.getFilterUIInfo = function() {
            return this.filterModule ? this.filterModule.getFilterUIInfo() : {}
        }, t.prototype.getVisibleFrozenColumnsCount = function() {
            for (var e = 0, t = this.columnModel, i = 0; i < this.frozenColumns; i++) t[i].visible && e++;
            return e
        }, t.prototype.getVisibleFrozenCount = function(e, t) {
            for (var i = 0, n = e.length; i < n; i++) e[i].columns ? t = this.getVisibleFrozenCount(e[i].columns, t) : e[i].isFrozen && e[i].visible && t++;
            return t
        }, t.prototype.getFrozenCount = function(e, t) {
            for (var i = 0, n = e.length; i < n; i++) e[i].columns ? t = this.getFrozenCount(e[i].columns, t) : e[i].isFrozen && t++;
            return t
        }, t.prototype.goToPage = function(e) {
            this.pagerModule && this.pagerModule.goToPage(e)
        }, t.prototype.updateExternalMessage = function(e) {
            this.pagerModule && this.pagerModule.updateExternalMessage(e)
        }, t.prototype.sortColumn = function(e, t, i) {
            this.sortModule && this.sortModule.sortColumn(e, t, i)
        }, t.prototype.clearSorting = function() {
            this.sortModule && this.sortModule.clearSorting()
        }, t.prototype.removeSortColumn = function(e) {
            this.sortModule && this.sortModule.removeSortColumn(e)
        }, t.prototype.filterByColumn = function(e, t, i, n, r, o, s, a) {
            this.filterModule && this.filterModule.filterByColumn(e, t, i, n, r, o, s, a)
        }, t.prototype.clearFiltering = function(e) {
            this.filterModule && this.filterModule.clearFiltering(e)
        }, t.prototype.removeFilteredColsByField = function(e, t) {
            this.filterModule && this.filterModule.removeFilteredColsByField(e, t)
        }, t.prototype.selectRow = function(e, t) {
            this.selectionModule && this.selectionModule.selectRow(e, t)
        }, t.prototype.selectRows = function(e) {
            this.selectionModule && this.selectionModule.selectRows(e)
        }, t.prototype.clearSelection = function() {
            this.selectionModule && this.selectionModule.clearSelection()
        }, t.prototype.selectCell = function(e, t) {
            this.selectionModule && this.selectionModule.selectCell(e, t)
        }, t.prototype.selectCellsByRange = function(e, t) {
            this.selectionModule.selectCellsByRange(e, t)
        }, t.prototype.search = function(e) {
            this.searchModule && this.searchModule.search(e)
        }, t.prototype.print = function() {
            this.printModule && this.printModule.print()
        }, t.prototype.deleteRecord = function(e, t) {
            this.editModule && this.editModule.deleteRecord(e, t)
        }, t.prototype.startEdit = function() {
            this.editModule && this.editModule.startEdit()
        }, t.prototype.endEdit = function() {
            this.editModule && this.editModule.endEdit()
        }, t.prototype.closeEdit = function() {
            this.editModule && this.editModule.closeEdit()
        }, t.prototype.addRecord = function(e, t) {
            this.editModule && this.editModule.addRecord(e, t)
        }, t.prototype.deleteRow = function(e) {
            this.editModule && this.editModule.deleteRow(e)
        }, t.prototype.editCell = function(e, t) {
            this.editModule && this.editModule.editCell(e, t)
        }, t.prototype.saveCell = function() {
            this.editModule && this.editModule.saveCell()
        }, t.prototype.updateCell = function(e, t, i) {
            this.editModule && this.editModule.updateCell(e, t, i)
        }, t.prototype.updateRow = function(e, t) {
            this.editModule && this.editModule.updateRow(e, t)
        }, t.prototype.getBatchChanges = function() {
            return this.editModule ? this.editModule.getBatchChanges() : {}
        }, t.prototype.enableToolbarItems = function(e, t) {
            this.toolbarModule && this.toolbarModule.enableItems(e, t)
        }, t.prototype.copy = function(e) {
            this.clipboardModule && this.clipboardModule.copy(e)
        }, t.prototype.recalcIndentWidth = function() {
            var e = this;
            if (this.getHeaderTable().querySelector(".e-emptycell") && (this.groupSettings.columns.length || this.isDetail() || this.isRowDragable()) && !this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed") && this.getContentTable()) {
                var t = this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,
                    i = [].slice.call(this.getHeaderTable().querySelector("colgroup").childNodes),
                    n = [].slice.call(this.getContentTable().querySelector("colgroup").childNodes),
                    r = t / 30,
                    o = 0,
                    s = this.element.offsetWidth,
                    a = function(t, r) {
                        if (Ol(e)) {
                            var o = (r / s * 100).toFixed(1) + "%";
                            i[t].style.width = o, n[t].style.width = o
                        } else i[t].style.width = r + "px", n[t].style.width = r + "px";
                        e.notify("column-width-changed", {
                            index: t,
                            width: r
                        })
                    };
                for (r >= 1 && (t = 30 / r), (this.enableColumnVirtualization || this.isAutoGen) && (t = 30); o < this.groupSettings.columns.length;) a(o, t), o++;
                this.isDetail() && (a(o, t), o++), this.isRowDragable() && a(o, t), this.isAutoGen = !1, this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed", "true")
            }
        }, t.prototype.resetIndentWidth = function() {
            if (Ol(this) && (this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"), this.widthService.setWidthToColumns(), this.recalcIndentWidth()), ("auto" === this.width || "string" == typeof this.width && -1 !== this.width.indexOf("%")) && this.getColumns().filter((function(e) {
                    return (!e.width || "auto" === e.width) && e.minWidth
                })).length > 0) {
                var e = this.widthService.getTableWidth(this.getColumns());
                this.widthService.setMinwidthBycalculation(e)
            }
        }, t.prototype.isRowDragable = function() {
            return this.allowRowDragAndDrop && !this.rowDropSettings.targetID && !this.enableVirtualization
        }, t.prototype.reorderColumns = function(e, t) {
            this.reorderModule && this.reorderModule.reorderColumns(e, t)
        }, t.prototype.reorderColumnByIndex = function(e, t) {
            this.reorderModule && this.reorderModule.reorderColumnByIndex(e, t)
        }, t.prototype.reorderColumnByTargetIndex = function(e, t) {
            this.reorderModule && this.reorderModule.reorderColumnByTargetIndex(e, t)
        }, t.prototype.reorderRows = function(e, t) {
            this.rowDragAndDropModule && this.rowDragAndDropModule.reorderRows(e, t)
        }, t.prototype.refreshDataSource = function(e, t) {
            this.notify("refreshdataSource", e)
        }, t.prototype.disableRowDD = function(e) {
            var t = this.getHeaderTable(),
                i = this.getContentTable(),
                n = t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),
                r = this.getRows(),
                o = e ? "none" : "";
            Dt(t.querySelector("colgroup").childNodes[0], {
                display: o
            }), Dt(i.querySelector("colgroup").childNodes[0], {
                display: o
            });
            for (var s = 0; s < this.getRows().length; s++) {
                var a = r[s].firstElementChild;
                e ? ut([a], "e-hide") : gt([a], ["e-hide"])
            }
            for (var l = 0; l < t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length; l++) {
                a = n[l];
                e ? ut([a], "e-hide") : gt([a], ["e-hide"])
            }
        }, t.prototype.autoFitColumns = function(e) {
            this.resizeModule && this.resizeModule.autoFitColumns(e)
        }, t.prototype.createColumnchooser = function(e, t, i) {
            this.columnChooserModule && this.columnChooserModule.renderColumnChooser(e, t, i)
        }, t.prototype.initializeServices = function() {
            this.serviceLocator.register("widthService", this.widthService = new Ws(this)), this.serviceLocator.register("cellRendererFactory", new js), this.serviceLocator.register("rendererFactory", new qs), this.serviceLocator.register("localization", this.localeObj = new ki(this.getModuleName(), this.defaultLocale, this.locale)), this.serviceLocator.register("valueFormatter", this.valueFormatterService = new Cn(this.locale)), this.serviceLocator.register("showHideService", this.showHider = new aa(this)), this.serviceLocator.register("ariaService", this.ariaService = new fs), this.serviceLocator.register("focus", this.focusModule = new Gs(this))
        }, t.prototype.processModel = function() {
            var e, t, i = this.groupSettings.columns,
                n = this.sortSettings.columns;
            if (this.allowGrouping)
                for (var r = function(r, s) {
                        t = 0;
                        for (var a = n.length; t < a; t++)
                            if (n[t].field === i[r]) {
                                e = !0;
                                break
                            } if (e ? o.allowSorting ? o.sortedColumns.push(n[t].field) : n[t].direction = "Ascending" : n.push({
                                field: i[r],
                                direction: "Ascending",
                                isFromGroup: !0
                            }), !o.groupSettings.showGroupedColumn) {
                            var l = o.enableColumnVirtualization ? o.columns.filter((function(e) {
                                return e.field === i[r]
                            }))[0] : o.getColumnByField(i[r]);
                            l ? l.visible = !1 : o.log("initial_action", {
                                moduleName: "group",
                                columnName: i[r]
                            })
                        }
                    }, o = this, s = 0, a = i.length; s < a; s++) r(s);
            if (!i.length)
                for (s = 0; s < n.length; s++) this.sortedColumns.push(n[s].field);
            if (this.rowTemplateFn = ja(this.rowTemplate), this.detailTemplateFn = ja(this.detailTemplate), this.editTemplateFn = ja(this.editSettings.template), this.editHeaderTemplateFn = ja(this.editSettings.headerTemplate), this.editFooterTemplateFn = ja(this.editSettings.footerTemplate), !g(this.parentDetails)) {
                var l = g(this.parentDetails.parentKeyFieldValue) ? "undefined" : this.parentDetails.parentKeyFieldValue;
                this.query.where(this.queryString, "equal", l, !0)
            }
            this.initForeignColumn()
        }, t.prototype.initForeignColumn = function() {
            this.isForeignKeyEnabled(this.getColumns()) && this.notify("initForeignKeyColumn", this.getForeignKeyColumns())
        }, t.prototype.gridRender = function() {
            this.updateRTL(), this.enableHover && this.element.classList.add("e-gridhover"), me.isDevice && this.element.classList.add("e-device"), this.rowHeight && this.element.classList.add("e-grid-min-height"), Et(this.element, ["e-responsive", "e-default"], []);
            var e = this.serviceLocator.getService("rendererFactory");
            this.headerModule = e.getRenderer(cr.Header), this.contentModule = e.getRenderer(cr.Content), this.printModule = new Ia(this, this.scrollModule), this.clipboardModule = new ua(this), this.renderModule.render(), this.eventInitializer(), this.createGridPopUpElement(), this.widthService.setWidthToColumns(), this.updateGridLines(), this.applyTextWrap(), this.createTooltip(), this.enableBoxSelection()
        }, t.prototype.dataReady = function() {
            this.scrollModule.setWidth(), this.scrollModule.setHeight(), "auto" !== this.height && this.scrollModule.setPadding()
        }, t.prototype.updateRTL = function() {
            this.enableRtl ? this.element.classList.add("e-rtl") : this.element.classList.remove("e-rtl")
        }, t.prototype.createGridPopUpElement = function() {
            var e = this.createElement("div", {
                    className: "e-gridpopup",
                    styles: "display:none;"
                }),
                t = this.createElement("div", {
                    className: "e-content",
                    attrs: {
                        tabIndex: "-1"
                    }
                });
            vt([t, this.createElement("div", {
                className: "e-uptail e-tail"
            })], e), t.appendChild(this.createElement("span")), vt([t, this.createElement("div", {
                className: "e-downtail e-tail"
            })], e), this.element.appendChild(e)
        }, t.prototype.updateGridLines = function() {
            switch (Et(this.element, [], ["e-verticallines", "e-horizontallines", "e-hidelines", "e-bothlines"]), this.gridLines) {
                case "Horizontal":
                    this.element.classList.add("e-horizontallines");
                    break;
                case "Vertical":
                    this.element.classList.add("e-verticallines");
                    break;
                case "None":
                    this.element.classList.add("e-hidelines");
                    break;
                case "Both":
                    this.element.classList.add("e-bothlines")
            }
            this.updateResizeLines()
        }, t.prototype.updateResizeLines = function() {
            this.allowResizing && "Vertical" !== this.gridLines && "Both" !== this.gridLines ? this.element.classList.add("e-resize-lines") : this.element.classList.remove("e-resize-lines")
        }, t.prototype.applyTextWrap = function() {
            if (this.allowTextWrap) {
                var e = [].slice.call(this.element.querySelectorAll(".e-columnheader"));
                switch (this.textWrapSettings.wrapMode) {
                    case "Header":
                        pl(this.element, !1), pl(this.getContent(), !1), pl(e, !0);
                        break;
                    case "Content":
                        pl(this.getContent(), !0), pl(this.element, !1), pl(e, !1);
                        break;
                    default:
                        pl(this.element, !0), pl(this.getContent(), !1), pl(e, !1)
                }
                "Content" !== this.textWrapSettings.wrapMode && this.notify("refreshResizeHandlers", {})
            }
        }, t.prototype.removeTextWrap = function() {
            pl(this.element, !1), pl([].slice.call(this.element.querySelectorAll(".e-columnheader")), !1), pl(this.getContent(), !1), "Content" !== this.textWrapSettings.wrapMode && this.notify("refreshResizeHandlers", {})
        }, t.prototype.createTooltip = function() {
            this.toolTipObj = new br({
                opensOn: "custom",
                content: ""
            }, this.element)
        }, t.prototype.freezeRefresh = function() {
            this.enableVirtualization && (this.pageSettings.currentPage = 1), this.componentRefresh()
        }, t.prototype.getTooltipStatus = function(e) {
            var t, i = this.getHeaderTable(),
                n = (this.getContentTable(), this.createTable(i, "e-gridheader", "header")),
                r = this.createTable(i, "e-gridheader", "content"),
                o = e.classList.contains("e-headercell") ? n : r,
                s = e.classList.contains("e-headercell") ? "th" : "tr";
            return o.querySelector(s).className = e.className, o.querySelector(s).innerHTML = e.innerHTML, t = o.querySelector(s).getBoundingClientRect().width, document.body.removeChild(n), document.body.removeChild(r), t > e.getBoundingClientRect().width
        }, t.prototype.mouseMoveHandler = function(e) {
            if (this.isEllipsisTooltip()) {
                var t = Ka(e.target, "e-ellipsistooltip");
                this.prevElement === t && "mouseout" !== e.type || this.toolTipObj.close();
                var i = e.target.tagName;
                if (t && "mouseout" !== e.type && (!me.isDevice || -1 === ["A", "BUTTON", "INPUT"].indexOf(i))) {
                    if (t.getAttribute("aria-describedby")) return;
                    this.getTooltipStatus(t) && (t.getElementsByClassName("e-headertext").length ? this.toolTipObj.content = t.getElementsByClassName("e-headertext")[0].innerText : this.toolTipObj.content = t.innerText, this.prevElement = t, this.toolTipObj.open(t))
                }
            }
            this.hoverFrozenRows(e)
        }, t.prototype.hoverFrozenRows = function(e) {
            if (this.getFrozenColumns()) {
                var t = Ka(e.target, "e-row");
                if ([].slice.call(this.element.querySelectorAll(".e-frozenhover")).length && "mouseout" === e.type)
                    for (var i = [].slice.call(this.element.querySelectorAll(".e-frozenhover")), n = 0; n < i.length; n++) i[n].classList.remove("e-frozenhover");
                else if (t) {
                    (i = [].slice.call(this.element.querySelectorAll('tr[aria-rowindex="' + t.getAttribute("aria-rowindex") + '"]'))).splice(i.indexOf(t), 1), "true" != t.getAttribute("aria-selected") && i[0] ? i[0].classList.add("e-frozenhover") : i[0] && i[0].classList.remove("e-frozenhover")
                }
            }
        }, t.prototype.isEllipsisTooltip = function() {
            var e = this.getColumns();
            if ("EllipsisWithTooltip" === this.clipMode) return !0;
            for (var t = 0; t < e.length; t++)
                if ("EllipsisWithTooltip" === e[t].clipMode) return !0;
            return !1
        }, t.prototype.scrollHandler = function() {
            this.isEllipsisTooltip() && this.toolTipObj.close()
        }, t.prototype.createTable = function(e, t, i) {
            var n = this.createElement("div");
            n.className = this.element.className, n.style.cssText = "display: inline-block;visibility:hidden;position:absolute";
            var r = this.createElement("div");
            r.className = t;
            var o = this.createElement("table");
            o.className = e.className, o.style.cssText = "table-layout: auto;width: auto";
            var s = "header" === i ? "th" : "td",
                a = this.createElement("tr"),
                l = this.createElement(s);
            return a.appendChild(l), o.appendChild(a), r.appendChild(o), n.appendChild(r), document.body.appendChild(n), n
        }, t.prototype.onKeyPressed = function(e) {
            "tab" !== e.action && "shiftTab" !== e.action || this.toolTipObj.close()
        }, t.prototype.wireEvents = function() {
            ye.add(this.element, "click", this.mouseClickHandler, this), ye.add(this.element, "touchend", this.mouseClickHandler, this), ye.add(this.element, "focusout", this.focusOutHandler, this), ye.add(this.element, "dblclick", this.dblClickHandler, this), ye.add(this.element, "keydown", this.keyPressHandler, this), ye.add(window, "resize", this.resetIndentWidth, this), this.allowKeyboard && (this.element.tabIndex = -1 === this.element.tabIndex ? 0 : this.element.tabIndex), this.keyboardModule = new xi(this.element, {
                keyAction: this.keyActionHandler.bind(this),
                keyConfigs: this.keyConfigs,
                eventName: "keydown"
            }), ye.add(this.getContent().firstElementChild, "scroll", this.scrollHandler, this), ye.add(this.element, "mousemove", this.mouseMoveHandler, this), ye.add(this.element, "mouseout", this.mouseMoveHandler, this), ye.add(this.getContent(), "touchstart", this.tapEvent, this), ye.add(document.body, "keydown", this.keyDownHandler, this)
        }, t.prototype.unwireEvents = function() {
            ye.remove(this.element, "click", this.mouseClickHandler), ye.remove(this.element, "touchend", this.mouseClickHandler), ye.remove(this.element, "focusout", this.focusOutHandler), ye.remove(this.element, "dblclick", this.dblClickHandler), ye.remove(this.getContent().firstElementChild, "scroll", this.scrollHandler), ye.remove(this.element, "mousemove", this.mouseMoveHandler), ye.remove(this.element, "mouseout", this.mouseMoveHandler), ye.remove(this.element, "keydown", this.keyPressHandler), ye.remove(this.getContent(), "touchstart", this.tapEvent), ye.remove(document.body, "keydown", this.keyDownHandler), ye.remove(window, "resize", this.resetIndentWidth)
        }, t.prototype.addListener = function() {
            this.isDestroyed || (this.on("data-ready", this.dataReady, this), this.on(xr, this.recalcIndentWidth, this), this.on(Rr, this.recalcIndentWidth, this), this.dataBoundFunction = this.refreshMediaCol.bind(this), this.addEventListener(Cr, this.dataBoundFunction), this.on(Pr, this.onKeyPressed, this), this.on(xr, this.blazorTemplate, this))
        }, t.prototype.removeListener = function() {
            this.isDestroyed || (this.off("data-ready", this.dataReady), this.off(xr, this.recalcIndentWidth), this.off(Rr, this.recalcIndentWidth), this.removeEventListener(Cr, this.dataBoundFunction), this.off(Pr, this.onKeyPressed))
        }, t.prototype.blazorTemplate = function() {
            if (S()) {
                this.pageSettings.template && Ue(this.element.id + "_template", "Template", this.pageSettings);
                for (var e = 0; e < this.columnModel.length; e++) {
                    if (this.columnModel[e].template && Ue(this.element.id + this.columnModel[e].uid, "Template", this.columnModel[e], !1), this.columnModel[e].headerTemplate && Ue(this.element.id + this.columnModel[e].uid + "headerTemplate", "HeaderTemplate", this.columnModel[e], !1), "FilterBar" == this.filterSettings.type && this.columnModel[e].filterTemplate) {
                        for (var t = this.columnModel[e].field, i = this.element.id + this.columnModel[e].uid + "filterTemplate", n = this.filterSettings.columns, r = 0; r < n.length; r++) t == n[r].field && (We[i][0][t] = n[r].value);
                        Ue(this.element.id + this.columnModel[e].uid + "filterTemplate", "FilterTemplate", this.columnModel[e], !1)
                    }
                    "FilterBar" != this.filterSettings.type && this.columnModel[e].filterTemplate && Ue(this.element.id + this.columnModel[e].uid + "filterTemplate", "FilterTemplate", this.columnModel[e])
                }
                this.groupSettings.captionTemplate && Ue(this.element.id + "captionTemplate", "CaptionTemplate", this.groupSettings);
                for (r = 0; r < this.aggregates.length; r++)
                    for (var o = 0; o < this.aggregates[r].columns.length; o++) this.aggregates[r].columns[o].footerTemplate && Ue(this.element.id + this.aggregates[r].columns[o].guid + "footerTemplate", "FooterTemplate", this.aggregates[r].columns[o]), this.aggregates[r].columns[o].groupFooterTemplate && Ue(this.element.id + this.aggregates[r].columns[o].guid + "groupFooterTemplate", "GroupFooterTemplate", this.aggregates[r].columns[o]), this.aggregates[r].columns[o].groupCaptionTemplate && Ue(this.element.id + this.aggregates[r].columns[o].guid + "groupCaptionTemplate", "GroupCaptionTemplate", this.aggregates[r].columns[o])
            }
        }, t.prototype.getCurrentViewRecords = function() {
            return Sl(this) ? g(this.currentViewData.records) ? this.currentViewData : this.currentViewData.records : this.groupSettings.enableLazyLoading ? this.currentViewData : this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length && this.currentViewData.records ? this.currentViewData.records : this.currentViewData
        }, t.prototype.mouseClickHandler = function(e) {
            if (!(this.isChildGrid(e) || Ka(e.target, "e-gridpopup") && e.touches || this.element.querySelectorAll(".e-cloneproperties").length || this.checkEdit(e)) && ((this.allowRowDragAndDrop || !Ka(e.target, "e-gridcontent") && "TD" !== e.target.tagName) && (this.allowGrouping || this.allowReordering || !Ka(e.target, "e-gridheader")) || !e.touches)) {
                Ka(e.target, "e-gridheader") && this.allowRowDragAndDrop && e.preventDefault();
                var t = this.getRowInfo(e.target);
                t.cancel = !1;
                var i = !1,
                    n = Tt(e.target, "tr");
                if (n && n.getAttribute("data-uid")) {
                    var r = this.getRowObjectFromUID(n.getAttribute("data-uid"));
                    i = !!r && r.isDataRow
                }
                if (S()) {
                    var o = u({}, t.column);
                    t = {
                        rowData: t.rowData,
                        rowIndex: t.rowIndex,
                        cellIndex: t.cellIndex,
                        column: o
                    }
                }
                i && this.trigger("recordClick", t), this.notify(Ir, e)
            }
        }, t.prototype.checkEdit = function(e) {
            var t = Ka(e.target, "e-row"),
                i = "Batch" !== this.editSettings.mode && this.isEdit && t && (t.classList.contains("e-editedrow") || t.classList.contains("e-addedrow"));
            return !Ka(e.target, "e-unboundcelldiv") && (i || Ka(e.target, "e-rowcell") && Ka(e.target, "e-rowcell").classList.contains("e-editedbatchcell"))
        }, t.prototype.dblClickHandler = function(e) {
            var t = Ka(e.target, "e-grid");
            if (!g(t) && t.id === this.element.id && !Tt(e.target, ".e-unboundcelldiv")) {
                var i = !1,
                    n = Tt(e.target, "tr");
                if (n && n.getAttribute("data-uid")) {
                    var r = this.getRowObjectFromUID(n.getAttribute("data-uid"));
                    i = !!r && r.isDataRow
                }
                var o = this.getRowInfo(e.target);
                o.target = e.target, i && this.trigger("recordDoubleClick", o), this.notify("dblclick", e)
            }
        }, t.prototype.focusOutHandler = function(e) {
            if (!this.isChildGrid(e)) {
                Ka(e.target, "e-grid") || (this.element.querySelector(".e-gridpopup").style.display = "None");
                var t = this.element.querySelector(".e-cancel:not(.e-hide)");
                t && t.classList.add("e-hide");
                var i = e.relatedTarget,
                    n = i ? i.getAttribute("aria-owns") : null;
                i && (Ka(i, "e-grid") || (!g(n) && n) === e.target.getAttribute("aria-owns")) || this.keyPress || !this.isEdit || me.isDevice || ("Batch" === this.editSettings.mode && (this.editModule.saveCell(), this.notify("editNextValCell", {})), "Normal" === this.editSettings.mode && this.editModule.editFormValidate()), this.keyPress = !1
            }
        }, t.prototype.isChildGrid = function(e) {
            var t = Ka(e.target, "e-grid");
            return !(!t || t.id === this.element.id)
        }, t.prototype.mergePersistGridData = function(e) {
            var t = window.localStorage.getItem(this.getModuleName() + this.element.id);
            if (!g(t) && "" !== t || !g(e)) {
                var i = g(e) ? JSON.parse(t) : e;
                this.enableVirtualization && (i.pageSettings.currentPage = 1);
                var n = Object.keys(i);
                this.isProtectedOnChange = !0;
                for (var r = 0, o = n; r < o.length; r++) {
                    var s = o[r];
                    "object" != typeof this[s] || g(this[s]) ? this[s] = i[s] : Array.isArray(this[s]) && "columns" === s ? (S() && this.isServerRendered || Wa(this[s]), this.mergeColumns(i[s], this[s]), this[s] = i[s]) : u(this[s], i[s])
                }
                this.isProtectedOnChange = !1
            }
        }, t.prototype.mergeColumns = function(e, t) {
            for (var i = e, n = function(e) {
                    var n = t.filter((function(t) {
                        return t.index === i[e].index
                    }))[0];
                    if (!g(n))
                        if (n.columns && n.columns.length) r.mergeColumns(i[e].columns, n.columns), i[e] = u(n, i[e], {}, !0);
                        else {
                            if (S()) {
                                i[e].guid = n.guid, i[e].uid = n.uid
                            }
                            i[e] = u(n, i[e], {}, !0)
                        }
                }, r = this, o = 0; o < i.length; o++) n(o)
        }, t.prototype.isDetail = function() {
            return !g(this.detailTemplate) || !g(this.childGrid)
        }, t.prototype.isCommandColumn = function(e) {
            var t = this;
            return e.some((function(e) {
                return e.columns ? t.isCommandColumn(e.columns) : !(!e.commands && !e.commandsTemplate)
            }))
        }, t.prototype.isForeignKeyEnabled = function(e) {
            var t = this;
            return e.some((function(e) {
                return e.columns ? t.isForeignKeyEnabled(e.columns) : !(!e.dataSource || !e.foreignKeyValue)
            }))
        }, t.prototype.keyPressHandler = function(e) {
            var t = u(e, {
                cancel: !1
            });
            this.trigger("keyPressed", t), !0 === t.cancel && e.stopImmediatePropagation()
        }, t.prototype.keyDownHandler = function(e) {
            e.altKey && (74 === e.keyCode && (this.keyA ? (this.notify("group-collapse", {
                target: e.target,
                collapse: !1
            }), this.keyA = !1) : (this.focusModule.focusHeader(), this.focusModule.addOutline())), 87 === e.keyCode && (this.focusModule.focusContent(), this.focusModule.addOutline()), 65 === e.keyCode && (this.keyA = !0), 72 === e.keyCode && this.keyA && (this.notify("group-collapse", {
                target: e.target,
                collapse: !0
            }), this.keyA = !1))
        }, t.prototype.keyActionHandler = function(e) {
            this.keyPress = "space" !== e.action, this.isChildGrid(e) || this.isEdit && "escape" !== e.action && "enter" !== e.action && "shiftEnter" !== e.action && "tab" !== e.action && "shiftTab" !== e.action || this.allowKeyboard && ("ctrlPlusP" === e.action && (e.preventDefault(), this.print()), this.notify(Pr, e))
        }, t.prototype.setInjectedModules = function(e) {
            this.injectedModules = e
        }, t.prototype.updateColumnObject = function() {
            _a(this.columns, this.enableColumnVirtualization), S() && this.isServerRendered || Wa(this.columns), this.initForeignColumn(), this.notify(Lr, {})
        }, t.prototype.getForeignKeyColumns = function() {
            return this.getColumns().filter((function(e) {
                return e.isForeignColumn()
            }))
        }, t.prototype.getRowHeight = function() {
            return this.rowHeight ? this.rowHeight : function(e) {
                if (void 0 !== tl) return tl;
                var t = ct("table", {
                    className: "e-table",
                    styles: "visibility: hidden"
                });
                t.innerHTML = '<tr><td class="e-rowcell">A<td></tr>', e.appendChild(t);
                var i = t.querySelector("td").getBoundingClientRect();
                return e.removeChild(t), tl = Math.ceil(i.height)
            }(this.element)
        }, t.prototype.refreshColumns = function() {
            var e = this.getContent().querySelector(".e-frozencontent");
            if (1 === this.getFrozenColumns() && !e || 0 === this.getFrozenColumns() && e) this.enableColumnVirtualization && (this.columnModel = [], this.updateColumnModel(this.columns)), this.freezeRefresh();
            else if (this.isPreventScrollEvent = !0, this.updateColumnObject(), this.checkLockColumns(this.getColumns()), this.refresh(), this.getFrozenColumns()) {
                var t = this.contentModule.getMovableContent().querySelector(".e-table");
                Ct(t.querySelector("colgroup"));
                var i = this.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").cloneNode(!0);
                t.insertBefore(i, t.querySelector("tbody"))
            }
            this.getFrozenColumns() && (this.headerModule.getMovableHeader().scrollLeft = this.contentModule.getMovableContent().scrollLeft)
        }, t.prototype.excelExport = function(e, t, i, n) {
            return S() ? (this.excelExportModule.Map(this, e, t, i, !1, n), null) : this.excelExportModule ? this.excelExportModule.Map(this, e, t, i, !1, n) : null
        }, t.prototype.csvExport = function(e, t, i, n) {
            return S() ? (this.excelExportModule.Map(this, e, t, i, !0, n), null) : this.excelExportModule ? this.excelExportModule.Map(this, e, t, i, !0, n) : null
        }, t.prototype.pdfExport = function(e, t, i, n) {
            return S() ? (this.pdfExportModule.Map(this, e, t, i, n), null) : this.pdfExportModule ? this.pdfExportModule.Map(this, e, t, i, n) : null
        }, t.prototype.groupColumn = function(e) {
            this.groupModule && this.groupModule.groupColumn(e)
        }, t.prototype.groupExpandAll = function() {
            this.groupModule && this.groupModule.expandAll()
        }, t.prototype.groupCollapseAll = function() {
            this.groupModule && this.groupModule.collapseAll()
        }, t.prototype.clearGrouping = function() {
            this.groupModule && this.groupModule.clearGrouping()
        }, t.prototype.ungroupColumn = function(e) {
            this.groupModule && this.groupModule.ungroupColumn(e)
        }, t.prototype.openColumnChooser = function(e, t) {
            this.columnChooserModule && this.columnChooserModule.openColumnChooser(e, t)
        }, t.prototype.scrollRefresh = function() {
            var e = this,
                t = function() {
                    e.scrollModule.refresh(), e.off(xr, t)
                };
            this.on(xr, t, this)
        }, t.prototype.detailCollapseAll = function() {
            this.detailRowModule && this.detailRowModule.collapseAll()
        }, t.prototype.detailExpandAll = function() {
            this.detailRowModule && this.detailRowModule.expandAll()
        }, t.prototype.clearCellSelection = function() {
            this.selectionModule && this.selectionModule.clearCellSelection()
        }, t.prototype.clearRowSelection = function() {
            this.selectionModule && this.selectionModule.clearRowSelection()
        }, t.prototype.selectCells = function(e) {
            this.selectionModule && this.selectionModule.selectCells(e)
        }, t.prototype.selectRowsByRange = function(e, t) {
            this.selectionModule && this.selectionModule.selectRowsByRange(e, t)
        }, t.prototype.isContextMenuOpen = function() {
            return this.contextMenuModule && this.contextMenuModule.isOpen
        }, t.prototype.ensureModuleInjected = function(e) {
            return this.getInjectedModules().indexOf(e) >= 0
        }, t.prototype.destroyTemplate = function(e, t) {
            this.clearTemplate(e, t)
        }, t.prototype.log = function(e, t) {
            this.loggerModule && this.loggerModule.log(e, t)
        }, t.prototype.applyBiggerTheme = function(e) {
            this.element.classList.contains("e-bigger") && e.classList.add("e-bigger")
        }, t.prototype.getPreviousRowData = function() {
            return this.getRowsObject()[this.getRows().length - 1].data
        }, t.prototype.hideScroll = function() {
            var e = this.getContent().querySelector(".e-content"),
                t = e.querySelector(".e-movablecontent") ? e.querySelector(".e-movablecontent") : e,
                i = e.querySelector(".e-frozencontent") ? e.querySelector(".e-frozencontent") : e;
            t.scrollHeight <= t.clientHeight && i.scrollHeight <= i.clientHeight && (this.scrollModule.removePadding(), t.style.overflowY = "auto"), this.frozenColumns && t.scrollWidth <= t.clientWidth && (t.style.overflowX = "auto", t.style.overflowY = "auto", this.notify("frozenHeight", 0))
        }, t.prototype.getRowIndexByPrimaryKey = function(e) {
            var t = this.getPrimaryKeyFieldNames()[0];
            e = "object" == typeof e ? e[t] : e;
            for (var i = 0; i < this.getRowsObject().length; i++)
                if (this.getRowsObject()[i].data[t] === e) return this.getRowsObject()[i].index;
            return -1
        }, t.prototype.grabColumnByFieldFromAllCols = function(e) {
            var t;
            this.columnModel = [], this.updateColumnModel(this.columns);
            for (var i = this.columnModel, n = 0; n < i.length; n++) e === i[n].field && (t = i[n]);
            return t
        }, t.prototype.grabColumnByUidFromAllCols = function(e) {
            var t;
            this.columnModel = [], this.updateColumnModel(this.columns);
            for (var i = this.columnModel, n = 0; n < i.length; n++) e === i[n].uid && (t = i[n]);
            return t
        }, t.prototype.getFilteredRecords = function() {
            if (this.allowFiltering && this.filterSettings.columns.length) {
                var e = this.renderModule.data.generateQuery(!0);
                return this.dataSource && this.renderModule.data.isRemote() && this.dataSource instanceof yn ? this.renderModule.data.getData(this.dataSource, e) : this.dataSource instanceof yn ? this.dataSource.executeLocal(e) : new yn(this.dataSource, e).executeLocal(e)
            }
            return []
        }, t.prototype.getUserAgent = function() {
            var e = me.userAgent.toLowerCase();
            return /iphone|ipod|ipad/.test(e)
        }, t.prototype.tapEvent = function(e) {
            this.getUserAgent() && (il.timer ? (clearTimeout(il.timer), il.timer = null, this.dblClickHandler(e), this.notify("double-tap", e)) : il.timer = setTimeout((function() {
                il.timer = null
            }), 300))
        }, t.prototype.getRowUid = function(e) {
            return "" + e + this.rowUid++
        }, t.prototype.getMovableVirtualContent = function() {
            return this.getContent().querySelector(".e-movablecontent")
        }, t.prototype.getFrozenVirtualContent = function() {
            return this.getContent().querySelector(".e-frozencontent")
        }, t.prototype.getMovableVirtualHeader = function() {
            return this.getHeaderContent().querySelector(".e-movableheader")
        }, t.prototype.getFrozenVirtualHeader = function() {
            return this.getHeaderContent().querySelector(".e-frozenheader")
        }, t.prototype.getRowElementByUID = function(e) {
            var t, i = [];
            if (this.getFrozenColumns()) {
                var n = [].slice.call(this.getFrozenVirtualContent().querySelector("tbody").children),
                    r = [].slice.call(this.getMovableVirtualContent().querySelector("tbody").children);
                i = this.frozenRows ? (i = (i = [].slice.call(this.getFrozenVirtualHeader().querySelector("tbody").children)).concat([].slice.call(this.getMovableVirtualHeader().querySelector("tbody").children))).concat(n).concat(r) : n.concat(r)
            } else {
                var o = [].slice.call(this.getContent().querySelector("tbody").children);
                i = this.frozenRows ? (i = [].slice.call(this.getHeaderContent().querySelector("tbody").children)).concat(o) : o
            }
            for (var s = 0, a = i; s < a.length; s++) {
                var l = a[s];
                if (l.getAttribute("data-uid") === e) {
                    t = l;
                    break
                }
            }
            return t
        }, t.prototype.getHiddenColumns = function() {
            for (var e = [], t = 0, i = this.columnModel; t < i.length; t++) {
                var n = i[t];
                !1 === n.visible && e.push(n)
            }
            return e
        }, t.prototype.calculatePageSizeByParentHeight = function(e) {
            if (this.allowPaging && (this.allowTextWrap && "Header" == this.textWrapSettings.wrapMode || !this.allowTextWrap)) {
                var t = 0;
                if (-1 != e.indexOf("%") && (e = parseInt(e) / 100 * this.element.clientHeight), e > this.getNoncontentHeight() + this.getRowHeight()) {
                    t = (e - this.getNoncontentHeight()) / this.getRowHeight()
                }
                if (t > 0) return Math.floor(t)
            }
            return 0
        }, t.prototype.getNoncontentHeight = function() {
            var e = 0;
            if (g(this.getHeaderContent().clientHeight) || (e += this.getHeaderContent().clientHeight), this.toolbar && !g(this.element.querySelector(".e-toolbar").clientHeight) && (e += this.element.querySelector(".e-toolbar").clientHeight), this.allowPaging && !g(this.element.querySelector(".e-gridpager").clientHeight) && (e += this.element.querySelector(".e-gridpager").clientHeight), this.showColumnChooser && !g(this.element.querySelector(".e-columnheader").clientHeight) && (e += this.element.querySelector(".e-columnheader").clientHeight), this.allowGrouping && this.groupSettings.showDropArea && !g(this.element.querySelector(".e-groupdroparea").clientHeight) && (e += this.element.querySelector(".e-groupdroparea").clientHeight), this.aggregates.length > 0 && !g(this.element.querySelector(".e-summaryrow").clientHeight))
                for (var t = 0; t < this.element.querySelectorAll(".e-summaryrow").length; t++) e += this.element.querySelectorAll(".e-summaryrow")[t].clientHeight;
            return e
        }, t.prototype.getSummaryValues = function(e, t) {
            return wn.aggregates[e.type.toLowerCase()](t, e.field)
        }, t.prototype.isCollapseStateEnabled = function() {
            return !1 === this.isExpanded
        }, t.prototype.updateRowValue = function(e, t) {
            var i = {
                requestType: "save",
                data: t
            };
            this.showSpinner(), this.notify("update-data", i), this.refresh()
        }, t.prototype.setForeignKeyData = function() {
            this.dataBind();
            var e = this.getDataModule().getForeignKeyDataState();
            e.isPending ? (this.getDataModule().setForeignKeyDataState({}), e.resolver()) : (this.getDataModule().setForeignKeyDataState({
                isDataChanged: !1
            }), (this.contentModule || this.headerModule) && this.renderModule.render())
        }, t.prototype.resetFilterDlgPosition = function(e) {
            var t = this.getColumnHeaderByField(e);
            if (t) {
                var i = t.querySelector(".e-filtermenudiv"),
                    n = this.element.querySelector(".e-filter-popup");
                if (i && n) {
                    var r = this.element.getBoundingClientRect(),
                        o = i.getBoundingClientRect();
                    n && (n.style.left = (o.right - r.left).toString() + "px")
                }
            }
        }, t.prototype.renderTemplates = function() {
            this.notify("reactTemplateRender", this.portals), this.renderReactTemplates()
        }, t.prototype.batchUpdate = function(e) {
            this.processRowChanges(e)
        }, t.prototype.batchAsyncUpdate = function(e) {
            this.processBulkRowChanges(e)
        }, t.prototype.processBulkRowChanges = function(e) {
            var t = this;
            if (this.dataToBeUpdated)
                for (var i = ["addedRecords", "changedRecords", "deletedRecords"], n = this.getPrimaryKeyFieldNames()[0], r = 0; r < i.length; r++) e[i[r]] && Al(this, e, i[r], n);
            else this.dataToBeUpdated = Object.assign({
                addedRecords: [],
                changedRecords: [],
                deletedRecords: []
            }, e), setTimeout((function() {
                t.processRowChanges(t.dataToBeUpdated), t.dataToBeUpdated = null
            }), this.asyncTimeOut)
        }, t.prototype.processRowChanges = function(e) {
            var t = this,
                i = this.getPrimaryKeyFieldNames()[0];
            e = Object.assign({
                addedRecords: [],
                changedRecords: [],
                deletedRecords: []
            }, e);
            var n = this.getDataModule().saveChanges(e, i, {}, this.getDataModule().generateQuery().requiresCount());
            this.getDataModule().isRemote() ? n.then((function(e) {
                t.setNewData()
            })) : this.setNewData()
        }, t.prototype.setNewData = function() {
            var e = this,
                t = JSON.parse(JSON.stringify(this.getCurrentViewRecords()));
            this.getDataModule().getData({}, this.getDataModule().generateQuery().requiresCount()).then((function(i) {
                e.bulkRefresh(i.result, t, i.count)
            }))
        }, t.prototype.deleteRowElement = function(e) {
            var t = this.getRowElementByUID(e.uid),
                i = parseInt(t.getAttribute("aria-rowindex"), 10);
            (Ct(t), this.getFrozenColumns()) && Ct(this.getMovableRows()[i])
        }, t.prototype.bulkRefresh = function(e, t, i) {
            for (var n, r = this, o = this.getRowsObject(), s = this.getPrimaryKeyFieldNames()[0], a = function(t) {
                    e.filter((function(e) {
                        return e[s] === o[t].data[s]
                    })).length || (l.deleteRowElement(o[t]), o.splice(t, 1), t--), n = t
                }, l = this, h = 0; h < o.length; h++) a(h), h = n;
            var p = function(i) {
                    var n;
                    t.filter((function(t) {
                        t[s] === e[i][s] && (t !== e[i] && r.setRowData(e[i][s], e[i]), n = !0)
                    })), n || d.renderRowElement(e[i], i)
                },
                d = this;
            for (h = 0; h < e.length; h++) p(h);
            this.currentViewData = e;
            var c, u = [].slice.call(this.getContentTable().querySelectorAll(".e-row"));
            ! function(e, t, i, n) {
                for (var r = n || 0, o = 0; o < t.length; o++)
                    if (t[o].isDataRow) {
                        t[o].index = r, t[o].isAltRow = !!e.enableAltRow && r % 2 != 0, i[o].setAttribute("aria-rowindex", r.toString()), t[o].isAltRow ? i[o].classList.add("e-altrow") : i[o].classList.remove("e-altrow");
                        for (var s = 0; s < i[o].cells.length; s++) i[o].cells[s].setAttribute("index", r.toString());
                        r++
                    } t.length || e.renderModule.emptyRow(!0)
            }(this, this.getRowsObject(), u), (c = this).getFrozenColumns() ? (c.contentModule.rowElements = [].slice.call(c.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row")), c.contentModule.freezeRowElements = [].slice.call(c.element.querySelectorAll(".e-frozenheader .e-row, .e-frozencontent .e-row"))) : c.contentModule.rowElements = [].slice.call(c.element.querySelectorAll(".e-row:not(.e-addedrow)")), this.allowPaging && this.notify(Dr, {
                module: "pager",
                properties: {
                    totalRecordsCount: i
                }
            })
        }, t.prototype.renderRowElement = function(e, t) {
            var i, n = new rs(this.serviceLocator, null, this),
                r = new os(this).generateRows([e]),
                o = n.render(r[0], this.getColumns());
            this.addRowObject(r[0], t);
            var s = this.getContentTable().querySelector("tbody");
            if (s.querySelector(".e-emptyrow")) {
                var a = s.querySelector(".e-emptyrow");
                if (a.parentNode.removeChild(a), this.getFrozenColumns()) {
                    var l = this.getContent().querySelector(".e-movablecontent").querySelector("tbody");
                    l.firstElementChild.parentNode.removeChild(l.firstElementChild)
                }
            }
            this.getFrozenColumns() && (i = function(e, t, i) {
                t = t && i && i.isRowDragable() ? t + 1 : t;
                for (var n = e.cloneNode(!0), r = 0; r < t; r++) n.removeChild(n.children[0]);
                r = t;
                for (var o = e.childElementCount; r < o; r++) e.removeChild(e.children[e.childElementCount - 1]);
                return n
            }(o, this.getFrozenColumns(), this), (this.frozenRows && t < this.frozenRows ? this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody") : this.getContent().querySelector(".e-movablecontent").querySelector("tbody")).appendChild(i), "auto" === this.height && this.notify("frozenHeight", {})), s = this.frozenRows && t < this.frozenRows ? this.getHeaderContent().querySelector("tbody") : this.getContent().querySelector("tbody"), (s = this.getContent().querySelector("tbody")).appendChild(o)
        }, t.prototype.addRowObject = function(e, t) {
            var i = this.getFrozenColumns();
            if (i) {
                var n = this.getMovableRowsObject(),
                    r = e.clone();
                r.cells = r.cells.slice(i), e.cells = e.cells.slice(0, i), n.splice(t, 1, r)
            }
            this.getRowsObject().splice(t, 1, e)
        }, t.prototype.getHeight = function(e) {
            return e = Number.isInteger(e) || -1 == e.indexOf("%") ? Number.isInteger(e) || "auto" === this.height ? this.height : parseInt(e) : parseInt(e) / 100 * this.element.clientHeight
        }, ma([zt()], t.prototype, "parentDetails", void 0), ma([zt([])], t.prototype, "columns", void 0), ma([zt(!0)], t.prototype, "enableAltRow", void 0), ma([zt(!0)], t.prototype, "enableHover", void 0), ma([zt(!1)], t.prototype, "enableAutoFill", void 0), ma([zt(!0)], t.prototype, "allowKeyboard", void 0), ma([zt(!1)], t.prototype, "allowTextWrap", void 0), ma([qt({}, Ta)], t.prototype, "textWrapSettings", void 0), ma([qt({}, Da)], t.prototype, "resizeSettings", void 0), ma([zt(!1)], t.prototype, "allowPaging", void 0), ma([qt({}, ea)], t.prototype, "pageSettings", void 0), ma([zt(!1)], t.prototype, "enableVirtualization", void 0), ma([zt(!1)], t.prototype, "enableColumnVirtualization", void 0), ma([zt(!1)], t.prototype, "enableInfiniteScrolling", void 0), ma([qt({}, xa)], t.prototype, "searchSettings", void 0), ma([zt(!1)], t.prototype, "allowSorting", void 0), ma([zt("Ellipsis")], t.prototype, "clipMode", void 0), ma([zt(!0)], t.prototype, "allowMultiSorting", void 0), ma([zt(!1)], t.prototype, "allowExcelExport", void 0), ma([zt(!1)], t.prototype, "allowPdfExport", void 0), ma([qt({}, va)], t.prototype, "sortSettings", void 0), ma([qt({}, wa)], t.prototype, "infiniteScrollSettings", void 0), ma([zt(!0)], t.prototype, "allowSelection", void 0), ma([zt(-1)], t.prototype, "selectedRowIndex", void 0), ma([qt({}, Sa)], t.prototype, "selectionSettings", void 0), ma([zt(!1)], t.prototype, "allowFiltering", void 0), ma([zt(!1)], t.prototype, "allowReordering", void 0), ma([zt(!1)], t.prototype, "allowResizing", void 0), ma([zt(!1)], t.prototype, "allowRowDragAndDrop", void 0), ma([qt({}, ka)], t.prototype, "rowDropSettings", void 0), ma([qt({}, Ca)], t.prototype, "filterSettings", void 0), ma([zt(!1)], t.prototype, "allowGrouping", void 0), ma([zt(!1)], t.prototype, "enableImmutableMode", void 0), ma([zt(!1)], t.prototype, "showColumnMenu", void 0), ma([qt({}, Ea)], t.prototype, "groupSettings", void 0), ma([qt({}, Ra)], t.prototype, "editSettings", void 0), ma([Wt([], ca)], t.prototype, "aggregates", void 0), ma([zt(!1)], t.prototype, "showColumnChooser", void 0), ma([qt({}, na)], t.prototype, "columnChooserSettings", void 0), ma([zt(!1)], t.prototype, "enableHeaderFocus", void 0), ma([zt("auto")], t.prototype, "height", void 0), ma([zt("auto")], t.prototype, "width", void 0), ma([zt("Default")], t.prototype, "gridLines", void 0), ma([zt()], t.prototype, "rowTemplate", void 0), ma([zt()], t.prototype, "detailTemplate", void 0), ma([zt()], t.prototype, "childGrid", void 0), ma([zt()], t.prototype, "queryString", void 0), ma([zt("AllPages")], t.prototype, "printMode", void 0), ma([zt("Expanded")], t.prototype, "hierarchyPrintMode", void 0), ma([zt([])], t.prototype, "dataSource", void 0), ma([zt(null)], t.prototype, "rowHeight", void 0), ma([zt()], t.prototype, "query", void 0), ma([zt("USD")], t.prototype, "currencyCode", void 0), ma([zt()], t.prototype, "toolbar", void 0), ma([zt()], t.prototype, "contextMenuItems", void 0), ma([zt()], t.prototype, "columnMenuItems", void 0), ma([zt()], t.prototype, "toolbarTemplate", void 0), ma([zt()], t.prototype, "pagerTemplate", void 0), ma([zt(0)], t.prototype, "frozenRows", void 0), ma([zt(0)], t.prototype, "frozenColumns", void 0), ma([zt("All")], t.prototype, "columnQueryMode", void 0), ma([zt({})], t.prototype, "currentAction", void 0), ma([_t()], t.prototype, "created", void 0), ma([_t()], t.prototype, "destroyed", void 0), ma([_t()], t.prototype, "load", void 0), ma([_t()], t.prototype, "rowDataBound", void 0), ma([_t()], t.prototype, "queryCellInfo", void 0), ma([_t()], t.prototype, "headerCellInfo", void 0), ma([_t()], t.prototype, "actionBegin", void 0), ma([_t()], t.prototype, "actionComplete", void 0), ma([_t()], t.prototype, "actionFailure", void 0), ma([_t()], t.prototype, "dataBound", void 0), ma([_t()], t.prototype, "recordDoubleClick", void 0), ma([_t()], t.prototype, "recordClick", void 0), ma([_t()], t.prototype, "rowSelecting", void 0), ma([_t()], t.prototype, "rowSelected", void 0), ma([_t()], t.prototype, "rowDeselecting", void 0), ma([_t()], t.prototype, "rowDeselected", void 0), ma([_t()], t.prototype, "cellSelecting", void 0), ma([_t()], t.prototype, "cellSelected", void 0), ma([_t()], t.prototype, "cellDeselecting", void 0), ma([_t()], t.prototype, "cellDeselected", void 0), ma([_t()], t.prototype, "columnDragStart", void 0), ma([_t()], t.prototype, "columnDrag", void 0), ma([_t()], t.prototype, "columnDrop", void 0), ma([_t()], t.prototype, "printComplete", void 0), ma([_t()], t.prototype, "beforePrint", void 0), ma([_t()], t.prototype, "pdfQueryCellInfo", void 0), ma([_t()], t.prototype, "pdfHeaderQueryCellInfo", void 0), ma([_t()], t.prototype, "pdfAggregateQueryCellInfo", void 0), ma([_t()], t.prototype, "excelAggregateQueryCellInfo", void 0), ma([_t()], t.prototype, "exportDetailDataBound", void 0), ma([_t()], t.prototype, "excelQueryCellInfo", void 0), ma([_t()], t.prototype, "excelHeaderQueryCellInfo", void 0), ma([_t()], t.prototype, "beforeExcelExport", void 0), ma([_t()], t.prototype, "excelExportComplete", void 0), ma([_t()], t.prototype, "beforePdfExport", void 0), ma([_t()], t.prototype, "pdfExportComplete", void 0), ma([_t()], t.prototype, "rowDragStartHelper", void 0), ma([_t()], t.prototype, "detailDataBound", void 0), ma([_t()], t.prototype, "rowDragStart", void 0), ma([_t()], t.prototype, "rowDrag", void 0), ma([_t()], t.prototype, "rowDrop", void 0), ma([_t()], t.prototype, "toolbarClick", void 0), ma([_t()], t.prototype, "beforeOpenColumnChooser", void 0), ma([_t()], t.prototype, "batchAdd", void 0), ma([_t()], t.prototype, "batchDelete", void 0), ma([_t()], t.prototype, "batchCancel", void 0), ma([_t()], t.prototype, "beforeBatchAdd", void 0), ma([_t()], t.prototype, "beforeBatchDelete", void 0), ma([_t()], t.prototype, "beforeBatchSave", void 0), ma([_t()], t.prototype, "beginEdit", void 0), ma([_t()], t.prototype, "commandClick", void 0), ma([_t()], t.prototype, "cellEdit", void 0), ma([_t()], t.prototype, "cellSave", void 0), ma([_t()], t.prototype, "cellSaved", void 0), ma([_t()], t.prototype, "resizeStart", void 0), ma([_t()], t.prototype, "resizing", void 0), ma([_t()], t.prototype, "resizeStop", void 0), ma([_t()], t.prototype, "keyPressed", void 0), ma([_t()], t.prototype, "beforeDataBound", void 0), ma([_t()], t.prototype, "contextMenuOpen", void 0), ma([_t()], t.prototype, "contextMenuClick", void 0), ma([_t()], t.prototype, "columnMenuOpen", void 0), ma([_t()], t.prototype, "columnMenuClick", void 0), ma([_t()], t.prototype, "checkBoxChange", void 0), ma([_t()], t.prototype, "beforeCopy", void 0), ma([_t()], t.prototype, "beforePaste", void 0), ma([_t()], t.prototype, "beforeAutoFill", void 0), ma([_t()], t.prototype, "columnDataStateChange", void 0), ma([_t()], t.prototype, "dataStateChange", void 0), ma([_t()], t.prototype, "dataSourceChanged", void 0), ma([_t()], t.prototype, "exportGroupCaption", void 0), ma([_t()], t.prototype, "lazyLoadGroupExpand", void 0), ma([_t()], t.prototype, "lazyLoadGroupCollapse", void 0), t = i = ma([Gt], t)
    }(pi);
var Ia = function() {
    function e(e, t) {
        this.isAsyncPrint = !1, this.defered = new vn, this.parent = e, this.parent.isDestroyed || (this.parent.on(xr, this.isContentReady(), this), this.parent.addEventListener(wr, this.actionBegin.bind(this)), this.parent.on(Tr, this.onEmpty.bind(this)), this.parent.on("hierarchyprint", this.hierarchyPrint, this), this.scrollModule = t)
    }
    return e.prototype.isContentReady = function() {
        var e = this;
        return !this.isPrintGrid() || "None" !== this.parent.hierarchyPrintMode && this.parent.childGrid ? function() {
            e.defered.promise.then((function() {
                e.contentReady()
            })), e.isPrintGrid() && e.hierarchyPrint()
        } : this.contentReady
    }, e.prototype.hierarchyPrint = function() {
        this.removeColGroup(this.parent);
        var e = window.printGridObj;
        e && !e.element.querySelector("[aria-busy=true") && e.printModule.defered.resolve()
    }, e.prototype.print = function() {
        this.renderPrintGrid(), this.printWind = window.open("", "print", "height=" + window.outerHeight + ",width=" + window.outerWidth + ",tabbar=no"), this.printWind.moveTo(0, 0), this.printWind.resizeTo(screen.availWidth, screen.availHeight)
    }, e.prototype.onEmpty = function() {
        this.isPrintGrid() && this.contentReady()
    }, e.prototype.actionBegin = function() {
        this.isPrintGrid() && (this.isAsyncPrint = !0)
    }, e.prototype.renderPrintGrid = function() {
        var e = this.parent,
            t = ct("div", {
                id: this.parent.element.id + "_print",
                className: e.element.className + " e-print-grid"
            });
        document.body.appendChild(t);
        var i = new Pa(Tl(e, e.hierarchyPrintMode));
        this.parent.isAngular && (i.viewContainerRef = this.parent.viewContainerRef), i.load = function() {}, i.query = e.getQuery().clone(), window.printGridObj = i, i.isPrinting = !0;
        var n = i.getInjectedModules(),
            r = e.getInjectedModules();
        n && n.length === r.length || i.setInjectedModules(r), e.notify("printGrid-Init", {
            element: t,
            printgrid: i
        }), this.parent.log("exporting_begin", this.getModuleName()), i.registeredTemplate = this.parent.registeredTemplate, i.appendTo(t), i.trigger = e.trigger
    }, e.prototype.contentReady = function() {
        if (this.isPrintGrid()) {
            var e = this.parent;
            if (this.isAsyncPrint) return void this.printGrid();
            var t = {
                requestType: "print",
                element: e.element,
                selectedRows: e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),
                cancel: !1,
                hierarchyPrintMode: e.hierarchyPrintMode
            };
            if (this.isAsyncPrint || e.trigger("beforePrint", t), t.cancel) return void wt(e.element);
            this.isAsyncPrint || this.printGrid()
        }
    }, e.prototype.printGrid = function() {
        var e = this.parent;
        if ("auto" !== e.height) {
            var t = this.scrollModule.getCssProperties(),
                i = e.element.querySelector(".e-content"),
                n = e.element.querySelector(".e-gridheader");
            i.style.height = "auto", i.style.overflowY = "auto", n.style[t.padding] = "", n.firstElementChild.style[t.border] = ""
        }
        e.allowGrouping && (e.groupSettings.columns.length ? this.removeColGroup(e) : e.element.querySelector(".e-groupdroparea").style.display = "none");
        for (var r = 0, o = [].slice.call(e.element.querySelectorAll(".e-content")); r < o.length; r++) {
            o[r].style.overflowX = "hidden"
        }
        for (var s = e.element.querySelectorAll(".e-spin-show"), a = 0, l = [].slice.call(s); a < l.length; a++) {
            Et(l[a], ["e-spin-hide"], ["e-spin-show"])
        }
        this.printGridElement(e), e.isPrinting = !1, delete window.printGridObj;
        var h = {
            element: e.element
        };
        e.trigger("printComplete", h), this.parent.log("exporting_complete", this.getModuleName())
    }, e.prototype.printGridElement = function(e) {
        Et(e.element, ["e-print-grid-layout"], ["e-print-grid"]), e.isPrinting && wt(e.element), this.printWind = w(e.element, this.printWind)
    }, e.prototype.removeColGroup = function(e) {
        var t = e.groupSettings.columns.length,
            i = e.element,
            n = "#" + e.element.id;
        if (t) {
            for (var r = i.querySelectorAll(n + "captioncell.e-groupcaption"), o = r[t - 1].getAttribute("colspan"), s = 0; s < r.length; s++) r[s].setAttribute("colspan", o);
            var a = i.querySelectorAll("colgroup" + n + "colGroup"),
                l = i.querySelector(".e-content").querySelectorAll("colgroup");
            this.hideColGroup(a, t), this.hideColGroup(l, t)
        }
    }, e.prototype.hideColGroup = function(e, t) {
        for (var i = 0; i < e.length; i++)
            for (var n = 0; n < t; n++) e[i].children[n].style.display = "none"
    }, e.prototype.isPrintGrid = function() {
        return this.parent.element.id.indexOf("_print") > 0 && this.parent.isPrinting
    }, e.prototype.destroy = function() {
        this.parent.isDestroyed || (this.parent.off(xr, this.contentReady.bind(this)), this.parent.removeEventListener(wr, this.actionBegin.bind(this)), this.parent.off(Tr, this.onEmpty.bind(this)), this.parent.off("hierarchyprint", this.hierarchyPrint))
    }, e.prototype.getModuleName = function() {
        return "print"
    }, e.printGridProp = ["aggregates", "allowGrouping", "allowFiltering", "allowMultiSorting", "allowReordering", "allowSorting", "allowTextWrap", "childGrid", "columns", "currentViewData", "dataSource", "detailTemplate", "enableAltRow", "enableColumnVirtualization", "filterSettings", "gridLines", "groupSettings", "height", "locale", "pageSettings", "printMode", "query", "queryString", "enableRtl", "rowHeight", "rowTemplate", "sortSettings", "textWrapSettings", "allowPaging", "hierarchyPrintMode", "searchSettings", "queryCellInfo", "beforeDataBound"].concat(["beforePrint", "printComplete", "load"]), e
}();

function Ma(e, t, i) {
    return g(e) || "" === e ? "" : wn.getObject(e, t)
}

function La(e, t) {
    requestAnimationFrame((function() {
        try {
            t(null, e())
        } catch (e) {
            t(e)
        }
    }))
}

function Oa(e) {
    return !g(e) && !g(e.columns) && e.columns.length > 0
}

function Aa(e, t) {
    for (var i = e.columns, n = t.columns, r = 0; r < i.length; r++)
        if (n.length - 1 >= r)
            if (n[r].columns)
                for (var o = 0; o < n[r].columns.length; o++) i[r].columns[o].type = n[r].columns[o].type;
            else i[r].type = n[r].type
}
var Ba = 0;

function Fa(e, t) {
    Ba = 0;
    var i = t.groupSettings.columns.length,
        n = "items",
        r = e.gSummary,
        o = 0,
        s = "aggregatesCount";
    if (r === e.data.count) return t.groupSettings.columns.length && !g(e[s]) && e[s] ? 1 !== t.groupSettings.columns.length ? Ba += 0 !== e.indent && r < 2 ? e.gSummary * (i - e.indent + (i - e.indent) * e[s]) : e.gSummary * (i - e.indent + (i - e.indent - 1) * e[s]) + e[s] : 1 === t.groupSettings.columns.length && (Ba += e.gSummary * (i - e.indent) + e[s]) : t.groupSettings.columns.length && (1 !== t.groupSettings.columns.length ? Ba += e.gSummary * (t.groupSettings.columns.length - e.indent) : Ba += e.gSummary), Ba;
    for (var a = 0, l = e.data[n].length; a < l; a++) {
        var h = e.data[n][a];
        Ba += h[n].length + (i === t.columns.length || g(h[n].records) ? 0 : h[n].records.length), o += g(h[n].records) || g(e[s]) ? h[n].length : h[n].records.length, h[n].GroupGuid && 0 !== h[n].childLevels && Na(h)
    }
    return Ba += e.data[n].length, g(e[s]) || e[s] && Ba && 0 !== o && (Ba += (Ba - o) * e[s] + e[s]), Ba
}

function Na(e) {
    for (var t = 0, i = e.items.length; t < i; t++) {
        var n = e.items[t];
        Ba += n.count, 0 !== n.items.childLevels && Na(n)
    }
}

function Ha(e, t) {
    for (var i = [], n = 0, r = e.length; n < r; n++) {
        var o = t(e[n], n);
        g(o) || i.push(o)
    }
    return i
}

function Va(e) {
    for (var t = [], i = 0; i < e.length; i++) t.push(u({}, Ua(e[i]), {}, !0));
    return t
}

function ja(e) {
    if (e) {
        try {
            if (document.querySelectorAll(e).length) return Ge(document.querySelector(e).innerHTML.trim())
        } catch (t) {
            return Ge(e)
        }
    }
}

function za(e, t) {
    var i = {},
        n = ["style", "class"];
    u(i, t, {}), "style" in i && (Dt(e, i[n[0]]), delete i[n[0]]), "class" in i && (ut([e], i[n[1]]), delete i[n[1]]), St(e, i)
}

function qa(e, t, i, n) {
    for (var r = u(e, t, i), o = Object.keys(r), s = 0; s < o.length; s++) n && -1 !== n.indexOf(o[s]) && delete r[o[s]];
    return r
}

function Wa(e, t) {
    void 0 === t && (t = 0);
    for (var i = 0, n = e.length; i < n; i++) e[i].columns ? (e[i].index = g(e[i].index) ? t : e[i].index, t++, t = Wa(e[i].columns, t)) : (e[i].index = g(e[i].index) ? t : e[i].index, t++);
    return t
}

function _a(e, t) {
    for (var i = 0, n = e.length; i < n; i++) {
        var r = void 0;
        "string" == typeof e[i] ? r = new xn({
            field: e[i]
        }) : e[i] instanceof xn ? r = e[i] : e[i].columns ? (e[i].columns = _a(e[i].columns), r = new xn(e[i])) : r = new xn(e[i]), r.type && "checkbox" === r.type.toLowerCase() && (r.allowReordering = !1), r.headerText = g(r.headerText) ? r.foreignKeyValue || r.field || "" : r.headerText, r.foreignKeyField = r.foreignKeyField || r.field, r.valueAccessor = ("string" == typeof r.valueAccessor ? a(r.valueAccessor, window) : r.valueAccessor) || Ma, r.width = t && g(r.width) ? 200 : r.width, g(r.visible) && (r.visible = !0), e[i] = r
    }
    return e
}

function Ga(e, t, i) {
    var n, r = e.querySelector("span"),
        o = e.parentElement.getBoundingClientRect(),
        s = t.target.getBoundingClientRect();
    r.className = i, e.style.display = "", n = (g(t.clientY) ? t.changedTouches[0].clientY : t.clientY) > e.offsetHeight + 10, e.style.top = s.top - o.top + (n ? -(e.offsetHeight + 10) : e.offsetHeight + 10) + "px", e.style.left = function(e, t, i, n) {
        var r = e.offsetWidth / 2,
            o = Qa(t).x;
        return o - i.left < r ? i.left - n : i.right - o < r ? i.right - n - 2 * r : o - n - r
    }(e, t, s, o.left) + "px", n ? (e.querySelector(".e-downtail").style.display = "", e.querySelector(".e-uptail").style.display = "none") : (e.querySelector(".e-downtail").style.display = "none", e.querySelector(".e-uptail").style.display = "")
}

function Ua(e) {
    return e instanceof oi ? a("properties", e) : e
}

function Ka(e, t, i) {
    for (var n = e; n && !(i ? n.id === t : n.classList.contains(t));) n = n.parentElement;
    return n
}

function Ya(e) {
    for (var t = [], i = 0, n = e.length; i < n; i++) e[i].hasOwnProperty("properties") ? t.push(e[i].properties) : t.push(e[i]);
    return t
}

function Xa(e, t) {
    for (var i = [].slice.call(e.querySelectorAll(t)), n = 0; n < i.length; n++) Ct(i[n])
}

function Qa(e) {
    var t = {};
    return t.x = g(e.clientX) ? e.changedTouches[0].clientX : e.clientX, t.y = g(e.clientY) ? e.changedTouches[0].clientY : e.clientY, t
}
var Ja = 0;

function Za(e) {
    return e + Ja++
}

function $a(e, t) {
    for (var i = 0, n = t.length; i < n; i++) n === t.length ? e.appendChild(t[i]) : e.appendChild(t[0]);
    return e
}

function el(e, t, i, n) {
    if ("Custom" === e) {
        var r = i.customAggregate;
        return "string" == typeof r && (r = a(r, window)), r ? r.call(n, t, i) : ""
    }
    return i.field in t || t instanceof Array ? wn.aggregates[e.toLowerCase()](t, i.field) : null
}
var tl, il, nl = null;

function rl() {
    if (null !== nl) return nl;
    var e, t = document.createElement("div");
    return t.style.cssText = "width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;", document.body.appendChild(t), e = t.offsetWidth - t.clientWidth | 0, document.body.removeChild(t), nl = e
}

function ol(e) {
    return e.split(".").length > 1
}

function sl(e) {
    return void 0 === e && (e = ""), e.replace(/\./g, "___")
}

function al(e) {
    return void 0 === e && (e = ""), e.replace(/___/g, ".")
}

function ll(e, t, i) {
    var n = Ka(i, "e-row"),
        r = !n || n && !n.classList.contains("e-insertedrow");
    return "beginEdit" === t && r ? !(e.isIdentity || e.isPrimaryKey || !e.allowEditing) : ("add" !== t || !e.isIdentity) && !(r && !e.allowEditing && !e.isIdentity && !e.isPrimaryKey)
}

function hl(e) {
    var t = e.element.querySelector("#" + e.element.id + "EditConfirm");
    return "Batch" === e.editSettings.mode && e.element.querySelectorAll(".e-updatedtd").length && e.editSettings.showConfirmDialog && (!t || t.classList.contains("e-popup-close"))
}

function pl(e, t) {
    e = e instanceof Array ? e : [e];
    for (var i = 0; i < e.length; i++) t ? e[i].classList.add("e-wrap") : e[i].classList.remove("e-wrap")
}

function dl(e, t, i) {
    var n, r = e.getService("valueFormatter");
    if ("date" === t.type || "datetime" === t.type) {
        if (n = {
                type: t.type,
                skeleton: t.format
            }, S() && i) {
            n.isServerRendered = i
        }
        "string" == typeof t.format && "yMd" !== t.format && (n.format = t.format)
    }
    switch (t.type) {
        case "date":
        case "datetime":
            t.setFormatter(r.getFormatFunction(n)), t.setParser(r.getParserFunction(n));
            break;
        case "number":
            t.setFormatter(r.getFormatFunction({
                format: t.format
            })), t.setParser(r.getParserFunction({
                format: t.format
            }))
    }
}

function cl(e, t) {
    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
    for (var r = 0, o = e.length; r < o; r++) t ? (Et(e[r], i.slice(), []), e[r].setAttribute("aria-selected", "true")) : (Et(e[r], [], i.slice()), e[r].removeAttribute("aria-selected"))
}

function ul(e, t, i) {
    var n = t.element.style.display;
    t.element.style.display = "block";
    var r, o = t.width;
    if (i.enableRtl) {
        r = Dn(e, "left", "bottom"), t.element.style.top = r.top + e.getBoundingClientRect().height - 35 + "px", t.element.style.display = n;
        s = r.left - o + e.clientWidth;
        t.element.style.left = s < 1 ? o + s + -16 + "px" : s - 16 + "px"
    } else {
        r = Tn(e, t.element), t.element.style.display = n, t.element.style.top = r.top + e.getBoundingClientRect().height - 5 + "px";
        var s = r.left - o + e.clientWidth;
        t.element.style.left = s < 1 ? o + s - 16 + "px" : s + -4 + "px"
    }
}

function gl(e, t) {
    e.popup.element.style.zIndex = (t.zIndex + 1).toString()
}

function fl(e, t) {
    e.checked = t
}

function ml(e, t, i) {
    var n = ct("div", {
        className: i
    });
    return n.appendChild(t), n.setAttribute("uid", e), n
}

function yl(e, t) {
    gt([e], ["e-check", "e-stop", "e-uncheck"]), t ? e.classList.add("e-check") : e.classList.add("e-uncheck")
}

function vl(e, t, i) {
    for (var n = 0; n < t.length; n++) l(t[n].field, bl(t[n], i), e.foreignKeyData);
    var r = e.cells;
    for (n = 0; n < r.length; n++) r[n].isForeignKey && l("foreignKeyData", a(r[n].column.field, e.foreignKeyData), r[n])
}

function bl(e, t, i, n) {
    var r = e.foreignKeyField,
        o = g(i) ? Ma(e.field, t) : i;
    o = g(o) ? "" : o;
    var s = new on,
        a = n || (e.dataSource instanceof yn && e.dataSource.dataSource.json.length ? e.dataSource.dataSource.json : e.columnData);
    return o.getDay ? s.where(Cl({
        field: r,
        operator: "equal",
        value: o,
        matchCase: !1
    })) : s.where(r, "==", o, !1), new yn(a).executeLocal(s)
}

function wl(e, t) {
    var i;
    return t.some((function(t) {
        return i = t, t.foreignKeyValue === e
    })) && i
}

function Cl(e, t) {
    var i, n, r, o = u({}, Ua(e)),
        s = u({}, Ua(e));
    if (g(e.value)) return i = new sn(o.field, o.operator, o.value, !1);
    var a = new Date(e.value);
    if ("equal" === e.operator || "notequal" === e.operator) {
        "datetime" === t ? (n = new Date(a.setSeconds(a.getSeconds() - 1)), r = new Date(a.setSeconds(a.getSeconds() + 2)), e.value = new Date(a.setSeconds(r.getSeconds() - 1))) : (n = new Date(a.setHours(0) - 1), r = new Date(a.setHours(24))), o.value = n, s.value = r, "equal" === e.operator ? (o.operator = "greaterthan", s.operator = "lessthan") : "notequal" === e.operator && (o.operator = "lessthanorequal", s.operator = "greaterthanorequal");
        var l = new sn(o.field, o.operator, o.value, !1),
            h = new sn(s.field, s.operator, s.value, !1);
        i = "equal" === e.operator ? l.and(h) : l.or(h)
    } else {
        "string" == typeof o.value && (o.value = new Date(o.value)), i = new sn(o.field, o.operator, o.value, !1)
    }
    return e.setProperties ? e.setProperties({
        ejpredicate: i
    }, !0) : e.ejpredicate = i, i
}

function Sl(e) {
    return e.enableVirtualization && e.groupSettings.columns.length > 0 && e.isVirtualAdaptive
}

function xl(e, t) {
    if (void 0 === e && (e = ""), e) {
        for (var i = t, n = e.split("."), r = 0; r < n.length && !g(i); r++) i = i[n[r]];
        return i
    }
}

function kl(e, t) {
    var i = new ee;
    return "date" === t ? "object" == typeof e ? i.getDatePattern({
        type: e.type ? e.type : "date",
        format: e.format
    }, !1) : S() ? i.getDatePattern({
        type: "dateTime",
        format: e
    }, !1) : i.getDatePattern({
        type: "dateTime",
        skeleton: e
    }, !1) : "object" == typeof e ? i.getDatePattern({
        type: e.type ? e.type : "dateTime",
        format: e.format
    }, !1) : S() ? i.getDatePattern({
        type: "dateTime",
        format: e
    }, !1) : i.getDatePattern({
        type: "dateTime",
        skeleton: e
    }, !1)
}

function Tl(e, t) {
    void 0 === t && (t = "Expanded");
    var i = {};
    if (!e) return i;
    for (var n = 0, r = Ia.printGridProp; n < r.length; n++) {
        var o = r[n];
        i[o] = "columns" === o ? Ya(e[o]) : "allowPaging" === o ? "CurrentPage" === e.printMode : Ua(e[o])
    }
    return e.childGrid && "None" !== t && (i.expandedRows = function(e, t) {
        for (var i = {}, n = 0, r = e.getRowsObject(); n < r.length; n++) {
            var o = r[n];
            if (o.isExpand && !o.isDetailRow) {
                var s = e.allowPaging && "AllPages" === e.printMode ? o.index + e.pageSettings.currentPage * e.pageSettings.pageSize - e.pageSettings.pageSize : o.index;
                i[s] = {}, i[s].isExpand = !0, i[s].gridModel = Tl(o.childGrid, t), i[s].gridModel.query = e.childGrid.query
            }
        }
        return i
    }(e, t)), i
}

function Dl(e, t, i, n) {
    var r = e || {},
        o = arguments.length;
    n && (o -= 1);
    for (var s = 1; s < o; s++)
        if (arguments[s])
            for (var a = arguments[s], l = Object.keys(Object.getPrototypeOf(a)).length ? Object.keys(a).concat(El(a)) : Object.keys(a), h = 0; h < l.length; h++) {
                var d = r[l[h]],
                    c = a[l[h]],
                    g = void 0;
                n && (p(c) || Array.isArray(c)) ? p(c) ? (g = d || {}, r[l[h]] = u({}, g, c, n)) : (g = d || [], r[l[h]] = u([], g, c, n)) : r[l[h]] = c
            }
    return r
}

function El(e) {
    for (var t = []; Object.getPrototypeOf(e) && Object.keys(Object.getPrototypeOf(e)).length;) t = t.concat(Object.keys(Object.getPrototypeOf(e))), e = Object.getPrototypeOf(e);
    return t
}

function Rl(e) {
    for (var t = 0, i = 0; i < e.length; i++) {
        var n = Pl(e[i], 0);
        t < n && (t = n)
    }
    return t + 1
}

function Pl(e, t) {
    var i = t,
        n = [];
    if (e.columns) {
        t++;
        for (var r = 0; r < e.columns.length; r++) n[r] = Pl(e.columns[r], t);
        for (var o = 0; o < n.length; o++) i < n[o] && (i = n[o]);
        t = i
    }
    return t
}

function Il(e, t) {
    e.classList.contains("e-bigger") && t.classList.add("e-bigger")
}

function Ml(e, t) {
    if (e && t) {
        var i = Tt(e, ".e-row").getBoundingClientRect().height,
            n = Tt(t, ".e-row").getBoundingClientRect().height;
        i > n ? t.style.height = i + "px" : e.style.height = n + "px"
    }
}

function Ll(e, t) {
    var i;
    i = function(e) {
        var t = new dn,
            i = new yn({
                url: "",
                adaptor: new dn
            }),
            n = t.processQuery(i, e);
        return JSON.parse(n.data)
    }(t);
    var n = new vn;
    return i.dataSource = n.resolve, i.action = e, {
        state: i,
        deffered: n
    }
}

function Ol(e) {
    for (var t = e.getVisibleColumns(), i = 0, n = 0, r = 0; r < t.length; r++) f(t[r].width) ? n++ : -1 !== t[r].width.toString().indexOf("%") && i++;
    return ("auto" === e.width || "string" == typeof e.width && -1 !== e.width.indexOf("%")) && "chrome" !== me.info.name && !e.groupSettings.showGroupedColumn && e.groupSettings.columns.length && i && !n
}

function Al(e, t, i, n) {
    var r = e.dataToBeUpdated[i].concat(t[i]).reduce((function(e, t) {
        return e[t[n]] = void 0 === e[t[n]] ? t : Object.assign(e[t[n]], t), e
    }), {});
    e.dataToBeUpdated[i] = Object.keys(r).map((function(e) {
        return r[e]
    }))
}

function Bl(e, t, i) {
    for (var n = e; n && !(i ? n.id === t : n.classList.contains(t));) n = n.parentElement;
    return n
}

function Fl(e) {
    return g(e.startDate) && g(e.endDate) && g(e.duration) ? null : !(g(e.startDate) || g(e.endDate) || g(e.duration))
}

function Nl(e) {
    if (e instanceof yn) {
        var t = e.adaptor;
        return t instanceof cn || t instanceof un || t instanceof gn || t instanceof mn || t instanceof dn
    }
    return !1
}

function Hl(e, t) {
    for (var i = [], n = 0; n < e.length; n++) {
        var r = void 0;
        r = r = t ? e[n].taskData : u({}, e[n].taskData, {}, !0), i.push(r)
    }
    return i
}

function Vl(e, t, i, n) {
    for (var r = -1, o = 0; o < i.length; o++)
        if (a(t, i[o]) === a(t, e) && g(n) || !g(n) && a(t, i[o]) === a(t, e) && a(n, i[o]) === a(n, e)) {
            r = o;
            break
        } return r
}

function jl(e) {
    return 76 * e / 92
}

function zl(e) {
    return 92 * e / 76
}! function(e) {
    e.timer = null
}(il || (il = {}));
var ql = 0;

function Wl() {
    return ql++
}
var _l = function() {
        function e(e) {
            this.parent = e
        }
        return e.prototype.isValidateNonWorkDays = function(e) {
            return !g(e) && e.isAutoSchedule && (!this.parent.includeWeekend || this.parent.totalHolidayDates.length > 0) || g(e) && (!this.parent.includeWeekend || this.parent.totalHolidayDates.length > 0)
        }, e.prototype.checkStartDate = function(e, t, i) {
            if (g(e)) return null;
            var n, r = new Date(e.getTime()),
                o = this.getSecondsInDecimal(r);
            if (i = g(i) ? !g(t) && t.isMilestone : i, o < this.parent.defaultStartTime) this.setTime(this.parent.defaultStartTime, r);
            else if (o !== this.parent.defaultEndTime || t && i) {
                if (o > this.parent.defaultEndTime) r.setDate(r.getDate() + 1), this.setTime(this.parent.defaultStartTime, r);
                else if (o > this.parent.defaultStartTime && o < this.parent.defaultEndTime)
                    for (var s = 0; s < this.parent.workingTimeRanges.length; s++) {
                        var a = this.parent.workingTimeRanges[s];
                        if (o >= a.to && this.parent.workingTimeRanges[s + 1] && o < this.parent.workingTimeRanges[s + 1].from) {
                            o !== a.to || t && i ? o !== a.to && this.setTime(this.parent.workingTimeRanges[s + 1].from, r) : this.setTime(this.parent.workingTimeRanges[s + 1].from, r);
                            break
                        }
                    }
            } else r.setDate(r.getDate() + 1), this.setTime(this.parent.defaultStartTime, r);
            do {
                n = new Date(r.getTime());
                var l = this.parent.totalHolidayDates.length;
                if (this.isValidateNonWorkDays(t)) {
                    if (!this.parent.includeWeekend) {
                        var h = new Date(r.getTime());
                        r = this.getNextWorkingDay(r), h.getTime() !== r.getTime() && this.setTime(this.parent.defaultStartTime, r)
                    }
                    for (var p = 0; p < l; p++) {
                        var d = this.getDateFromFormat(new Date(this.parent.totalHolidayDates[p])),
                            c = new Date(d.getTime());
                        d.setHours(0, 0, 0, 0), c.setHours(23, 59, 59, 59), r.getTime() >= d.getTime() && r.getTime() < c.getTime() && (r.setDate(r.getDate() + 1), this.setTime(this.parent.defaultStartTime, r))
                    }
                }
            } while (n.getTime() !== r.getTime());
            return new Date(r.getTime())
        }, e.prototype.checkEndDate = function(e, t, i) {
            if (g(e)) return null;
            var n, r = new Date(e.getTime()),
                o = this.getSecondsInDecimal(r);
            if (o > this.parent.defaultEndTime) this.setTime(this.parent.defaultEndTime, r);
            else if (o <= this.parent.defaultStartTime && !i) r.setDate(r.getDate() - 1), this.setTime(this.parent.defaultEndTime, r);
            else if (o > this.parent.defaultStartTime && o < this.parent.defaultEndTime)
                for (var s = 0; s < this.parent.workingTimeRanges.length; s++) {
                    if (o > this.parent.workingTimeRanges[s].to && this.parent.workingTimeRanges[s + 1] && o <= this.parent.workingTimeRanges[s + 1].from) {
                        this.setTime(this.parent.workingTimeRanges[s].to, r);
                        break
                    }
                }
            do {
                n = new Date(r.getTime());
                var a = this.parent.totalHolidayDates.length;
                if (this.isValidateNonWorkDays(t)) {
                    if (!this.parent.includeWeekend) {
                        var l = new Date(r.getTime());
                        r = this.getPreviousWorkingDay(r), l.getTime() !== r.getTime() && this.setTime(this.parent.defaultEndTime, r)
                    }
                    for (var h = 0; h < a; h++) {
                        var p = this.getDateFromFormat(new Date(this.parent.totalHolidayDates[h])),
                            d = new Date(p.getTime()),
                            c = new Date(r.getTime());
                        c.setMinutes(r.getMilliseconds() - 2), p.setHours(0, 0, 0, 0), d.setHours(23, 59, 59, 59), (r.getTime() >= p.getTime() && r.getTime() < d.getTime() || c.getTime() >= p.getTime() && c.getTime() < d.getTime()) && (r.setDate(r.getDate() - 1), r.getTime() === p.getTime() && 86400 === this.parent.defaultEndTime && 0 === this.getSecondsInDecimal(r) || this.setTime(this.parent.defaultEndTime, r))
                    }
                }
            } while (n.getTime() !== r.getTime());
            return new Date(r.getTime())
        }, e.prototype.checkBaselineStartDate = function(e) {
            if (g(e)) return null;
            var t = new Date(e.getTime()),
                i = this.getSecondsInDecimal(t);
            if (i < this.parent.defaultStartTime) this.setTime(this.parent.defaultStartTime, t);
            else if (i >= this.parent.defaultEndTime) t.setDate(t.getDate() + 1), this.setTime(this.parent.defaultStartTime, t);
            else if (i > this.parent.defaultStartTime && i < this.parent.defaultEndTime)
                for (var n = 0; n < this.parent.workingTimeRanges.length; n++) {
                    if (i >= this.parent.workingTimeRanges[n].to && this.parent.workingTimeRanges[n + 1] && i < this.parent.workingTimeRanges[n + 1].from) {
                        this.setTime(this.parent.workingTimeRanges[n + 1].from, t);
                        break
                    }
                }
            return t
        }, e.prototype.checkBaselineEndDate = function(e) {
            if (g(e)) return null;
            var t = new Date(e.getTime()),
                i = this.getSecondsInDecimal(t);
            if (i > this.parent.defaultEndTime) this.setTime(this.parent.defaultEndTime, t);
            else if (i <= this.parent.defaultStartTime) t.setDate(t.getDate() - 1), this.setTime(this.parent.defaultEndTime, t);
            else if (i > this.parent.defaultStartTime && i < this.parent.defaultEndTime)
                for (var n = 0; n < this.parent.workingTimeRanges.length; n++) {
                    if (i > this.parent.workingTimeRanges[n].to && this.parent.workingTimeRanges[n + 1] && i <= this.parent.workingTimeRanges[n + 1].from) {
                        this.setTime(this.parent.workingTimeRanges[n].to, t);
                        break
                    }
                }
            return t
        }, e.prototype.calculateStartDate = function(e) {
            var t = e.ganttProperties,
                i = null;
            g(t.endDate) || g(t.duration) || (i = this.getStartDate(t.endDate, t.duration, t.durationUnit, t)), this.parent.setRecordValue("startDate", i, t, !0), this.parent.taskFields.startDate && this.parent.dataOperation.updateMappingData(e, "startDate")
        }, e.prototype.calculateEndDate = function(e) {
            var t = e.ganttProperties,
                i = null;
            g(t.startDate) || (!g(t.endDate) && g(t.duration) && (1 === this.compareDates(t.startDate, t.endDate) && (this.parent.setRecordValue("startDate", new Date(t.endDate.getTime()), t, !0), this.setTime(this.parent.defaultStartTime, t.startDate)), this.calculateDuration(e)), g(t.duration) || (i = this.getEndDate(t.startDate, t.duration, t.durationUnit, t, !1)), this.parent.setRecordValue("endDate", i, t, !0)), this.parent.taskFields.endDate && this.parent.dataOperation.updateMappingData(e, "endDate")
        }, e.prototype.calculateDuration = function(e) {
            var t = e.ganttProperties,
                i = this.getDuration(t.startDate, t.endDate, t.durationUnit, t.isAutoSchedule, t.isMilestone);
            this.parent.setRecordValue("duration", i, t, !0);
            var n = this.parent.columnByField[this.parent.columnMapping.duration];
            if (!(g(this.parent.editModule) || g(this.parent.editModule.cellEditModule) || this.parent.editModule.cellEditModule.isCellEdit || g(n))) {
                if (!g(n.edit) && !g(n.edit.read)) {
                    var r = this.parent.editModule.dialogModule.dialog;
                    if (!g(r)) {
                        var o = r.querySelector("#" + this.parent.element.id + "Duration").ej2_instances[0];
                        g(o) || o.value === i.toString() || (o.value = i.toString(), o.dataBind())
                    }
                }
                this.parent.taskFields.duration && (this.parent.dataOperation.updateMappingData(e, "duration"), this.parent.taskFields.durationUnit && this.parent.dataOperation.updateMappingData(e, "durationUnit"))
            }
        }, e.prototype.getNonworkingTime = function(e, t, i, n) {
            n = !!g(n) || n;
            this.getTimeDifference(e, t, n);
            var r = !this.parent.includeWeekend && i ? this.getWeekendCount(e, t) : 0,
                o = this.getNumberOfSeconds(e, t, n),
                s = i ? this.getHolidaysCount(e, t) : 0,
                a = (o - 86400 * r - 86400 * s) / 86400,
                l = this.getNonWorkingSecondsOnDate(e, t, i);
            return a * (86400 - this.parent.secondsPerDay) + 86400 * r + 86400 * s + l
        }, e.prototype.getDuration = function(e, t, i, n, r, o) {
            if (g(e) || g(t)) return null;
            o = !!g(o) || o;
            var s = 0,
                a = this.getTimeDifference(e, t, o) / 1e3 - this.getNonworkingTime(e, t, n, o);
            return s = r && this.parent.getFormatedDate(e) === this.parent.getFormatedDate(t) ? 0 : i && "day" !== i ? "minute" === i ? a / 60 : a / 3600 : a / this.parent.secondsPerDay, parseFloat(s.toString())
        }, e.prototype.getDurationAsSeconds = function(e, t) {
            return t && "day" !== t ? "hour" === t ? 3600 * e : 60 * e : this.parent.secondsPerDay * e
        }, e.prototype.getEndDate = function(e, t, i, n, r) {
            for (var o = new Date(e.getTime()), s = new Date(e.getTime()), a = this.getDurationAsSeconds(t, i); a > 0;) s.setSeconds(s.getSeconds() + a), (a -= a - this.getNonworkingTime(o, s, n.isAutoSchedule, !0)) > 0 && (s = this.checkStartDate(s, n, r)), o = new Date(s.getTime());
            return s
        }, e.prototype.getStartDate = function(e, t, i, n) {
            for (var r = new Date(e.getTime()), o = new Date(e.getTime()), s = this.getDurationAsSeconds(t, i); s > 0;) o.setSeconds(o.getSeconds() - s), (s -= s - this.getNonworkingTime(o, r, n.isAutoSchedule, !0)) > 0 && (r = this.checkEndDate(o, n)), r = new Date(o.getTime());
            return o
        }, e.prototype.getProjectStartDate = function(e, t) {
            if (!g(this.parent.cloneProjectStartDate)) {
                var i = this.checkStartDate(this.parent.cloneProjectStartDate);
                return this.parent.cloneProjectStartDate = i, new Date(i.getTime())
            }
            if (g(this.parent.projectStartDate)) {
                if (g(t)) return null;
                var n = this.parent.flatData,
                    r = void 0;
                n.length > 0 ? r = n[0].ganttProperties.startDate : (r = new Date).setHours(0, 0, 0, 0);
                for (var o = 1; o < n.length; o++) {
                    var s = n[o].ganttProperties.startDate;
                    g(s) || -1 !== this.compareDates(s, r) || (r = s)
                }
                this.parent.cloneProjectStartDate = this.checkStartDate(r, e)
            } else {
                i = this.getDateFromFormat(this.parent.projectStartDate);
                this.parent.cloneProjectStartDate = this.checkStartDate(i)
            }
            return new Date(this.parent.cloneProjectStartDate.getTime())
        }, e.prototype.getValidStartDate = function(e, t) {
            var i = null,
                n = t ? e.autoStartDate : e.startDate,
                r = t ? e.autoEndDate : e.endDate,
                o = !e.isAutoSchedule && e.autoDuration ? e.autoDuration : e.duration;
            return g(n) ? g(r) ? g(o) || (i = this.getProjectStartDate(e)) : (i = new Date(r.getTime()), this.setTime(this.parent.defaultStartTime, i)) : i = new Date(n.getTime()), i
        }, e.prototype.getValidEndDate = function(e, t) {
            var i = null,
                n = t ? e.autoStartDate : e.startDate,
                r = t ? e.autoEndDate : e.endDate,
                o = t ? e.autoDuration : e.duration;
            if (g(r))
                if (g(n)) {
                    if (!g(o)) {
                        var s = this.getValidStartDate(e);
                        s && (i = this.getEndDate(s, o, e.durationUnit, e, !1))
                    }
                } else e.isMilestone ? i = this.checkStartDate(n) : (i = new Date(n.getTime()), this.setTime(this.parent.defaultEndTime, i));
            else i = new Date(r.getTime());
            return i
        }, e.prototype.getSecondsPerDay = function() {
            var e = this.parent.dayWorkingTime,
                t = e.length,
                i = 0,
                n = new Date("10/11/2018");
            new Date("10/12/2018");
            this.parent.nonWorkingHours = [];
            var r = this.parent.nonWorkingHours;
            this.parent.workingTimeRanges = [];
            var o = this.parent.workingTimeRanges;
            this.parent.nonWorkingTimeRanges = [];
            for (var s = this.parent.nonWorkingTimeRanges, a = 0; a < t; a++) {
                var l = e[a];
                if (!g(l.from) && !g(l.to)) {
                    n.setHours(0, 0, 0, 0);
                    var h = new Date(n.getTime());
                    n.setTime(n.getTime() + 36e5 * l.from);
                    var p = new Date(n.getTime());
                    h.setTime(h.getTime() + 36e5 * l.to);
                    var d = new Date(h.getTime()),
                        c = d.getTime() - p.getTime(),
                        u = this.getSecondsInDecimal(p),
                        f = this.getSecondsInDecimal(d);
                    0 === f && (f = 86400), i += c / 1e3, 0 === a && (this.parent.defaultStartTime = u), a === t - 1 && (this.parent.defaultEndTime = f), a > 0 ? (r.push(r[r.length - 1] + u - o[a - 1].to), o[a - 1].to < u && s.push({
                        from: o[a - 1].to,
                        to: u,
                        isWorking: !1,
                        interval: u - o[a - 1].to
                    })) : (r.push(0), s.push({
                        from: 0,
                        to: u,
                        isWorking: !1,
                        interval: u
                    })), o.push({
                        from: u,
                        to: f
                    }), s.push({
                        from: u,
                        to: f,
                        isWorking: !0,
                        interval: f - u
                    })
                }
            }
            return this.parent.defaultEndTime / 3600 != 24 && s.push({
                from: this.parent.defaultEndTime,
                to: 86400,
                isWorking: !1,
                interval: 86400 - this.parent.defaultEndTime
            }), i
        }, e.prototype.getDurationValue = function(e, t) {
            var i = null,
                n = null;
            if ("string" == typeof e) {
                var r = e.match(/(\d*\.*\d+|.+$)/g);
                if (r && r.length <= 2) {
                    n = parseFloat(r[0].toString().trim());
                    var o = r[1] ? r[1].toString().trim().toLowerCase() : null; - 1 !== a("minute", this.parent.durationUnitEditText).indexOf(o) ? i = "minute" : -1 !== a("hour", this.parent.durationUnitEditText).indexOf(o) ? i = "hour" : -1 !== a("day", this.parent.durationUnitEditText).indexOf(o) && (i = "day")
                }
            } else n = e, i = null;
            return {
                duration: n,
                durationUnit: i
            }
        }, e.prototype.getNextWorkingDay = function(e) {
            var t = e.getDay();
            return -1 !== this.parent.nonWorkingDayIndex.indexOf(t) ? (e.setDate(e.getDate() + 1), e = this.getNextWorkingDay(e)) : e
        }, e.prototype.getWeekendCount = function(e, t) {
            var i = 0,
                n = new Date(e.getTime()),
                r = new Date(t.getTime());
            for (n.setHours(0, 0, 0, 0), n.setDate(n.getDate() + 1), r.setHours(0, 0, 0, 0); n.getTime() < r.getTime();) - 1 !== this.parent.nonWorkingDayIndex.indexOf(n.getDay()) && (i += 1), n.setDate(n.getDate() + 1);
            return i
        }, e.prototype.getNumberOfSeconds = function(e, t, i) {
            var n = new Date(e.getTime()),
                r = new Date(t.getTime()),
                o = 0;
            return n.setDate(n.getDate() + 1), n.setHours(0, 0, 0, 0), r.setHours(0, 0, 0, 0), n.getTime() < r.getTime() && (o = this.getTimeDifference(n, r, i) / 1e3), o % 86400 != 0 && (o = o - o % 86400 + 86400), o
        }, e.prototype.getHolidaysCount = function(e, t) {
            var i = 0,
                n = this.parent.totalHolidayDates,
                r = new Date(e.getTime()),
                o = new Date(t.getTime());
            if (r.setDate(r.getDate() + 1), r.setHours(0, 0, 0, 0), o.setHours(0, 0, 0, 0), r.getTime() < o.getTime())
                for (var s = 0; s < n.length; s++) {
                    var a = this.getDateFromFormat(new Date(n[s]));
                    r.getTime() <= a.getTime() && o.getTime() > a.getTime() && (this.parent.includeWeekend || -1 !== this.parent.nonWorkingDayIndex.indexOf(a.getDay()) ? this.parent.includeWeekend && (i += 1) : i += 1)
                }
            return i
        }, e.prototype.getHolidayDates = function() {
            for (var e = this.parent.holidays, t = [], i = 0; i < e.length; i++) {
                var n = this.getDateFromFormat(e[i].from),
                    r = this.getDateFromFormat(e[i].to);
                if (!g(n) || !g(r))
                    if (g(n) || g(r)) {
                        var o = n || r;
                        o.setHours(0, 0, 0, 0), -1 === t.indexOf(o.getTime()) && t.push(o.getTime())
                    } else
                        for (; n <= r;) n.setHours(0, 0, 0, 0), -1 === t.indexOf(n.getTime()) && t.push(n.getTime()), n.setDate(n.getDate() + 1)
            }
            return t
        }, e.prototype.isOnHolidayOrWeekEnd = function(e, t) {
            if (!(t = g(t) ? this.parent.includeWeekend : t) && -1 !== this.parent.nonWorkingDayIndex.indexOf(e.getDay())) return !0;
            for (var i = this.parent.totalHolidayDates, n = 0; n < i.length; n++) {
                var r = this.getDateFromFormat(new Date(i[n])),
                    o = new Date(r.getTime());
                if (r.setHours(0, 0, 0, 0), o.setHours(23, 59, 59, 59), e.getTime() >= r.getTime() && e.getTime() < o.getTime()) return !0
            }
            return !1
        }, e.prototype.getNonWorkingSecondsOnDate = function(e, t, i) {
            for (var n = this.getSecondsInDecimal(e), r = this.getSecondsInDecimal(t), o = -1, s = -1, a = 0, l = !!i && this.isOnHolidayOrWeekEnd(e, null), h = !!i && this.isOnHolidayOrWeekEnd(t, null), p = 0; p < this.parent.nonWorkingTimeRanges.length; p++) {
                var d = this.parent.nonWorkingTimeRanges[p];
                n >= d.from && n <= d.to && (o = p), r >= d.from && r <= d.to && (s = p)
            }
            if (e.getDate() !== t.getDate() || e.getMonth() !== t.getMonth() || e.getFullYear() !== t.getFullYear()) {
                if (l) a += 86400 - n;
                else
                    for (p = o; p < this.parent.nonWorkingTimeRanges.length; p++) this.parent.nonWorkingTimeRanges[p].isWorking || (a += p === o ? this.parent.nonWorkingTimeRanges[p].to - n : this.parent.nonWorkingTimeRanges[p].interval);
                if (h) a += r;
                else
                    for (p = 0; p <= s; p++) this.parent.nonWorkingTimeRanges[p].isWorking || (a += p === s ? r - this.parent.nonWorkingTimeRanges[p].from : this.parent.nonWorkingTimeRanges[p].interval)
            } else {
                if (o !== s)
                    if (h) a += r - n;
                    else
                        for (p = o; p <= s; p++) this.parent.nonWorkingTimeRanges[p].isWorking || (a += p === o ? this.parent.nonWorkingTimeRanges[p].to - n : p === s ? r - this.parent.nonWorkingTimeRanges[p].from : this.parent.nonWorkingTimeRanges[p].interval);
                else if (h) a += r - n;
                else this.parent.nonWorkingTimeRanges[o].isWorking || (a = r - n)
            }
            return a
        }, e.prototype.getPreviousWorkingDay = function(e) {
            var t = e.getDay(),
                i = 0 === t ? 6 : t - 1;
            return -1 !== this.parent.nonWorkingDayIndex.indexOf(t) || -1 !== this.parent.nonWorkingDayIndex.indexOf(i) && 86400 === this.parent.defaultEndTime && 0 === this.getSecondsInDecimal(e) ? (e.setDate(e.getDate() - 1), -1 !== this.parent.nonWorkingDayIndex.indexOf(e.getDay()) && (e = this.getPreviousWorkingDay(e)), e) : e
        }, e.prototype.getNonWorkingDayIndex = function() {
            var e = ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"],
                t = e.length;
            0 === this.parent.workWeek.length && (this.parent.workWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]);
            for (var i = this.parent.workWeek.slice(), n = i.length, r = 0; r < n; r++) i[r] = i[r].toLowerCase();
            this.parent.nonWorkingDayIndex = [];
            for (r = 0; r < t; r++) - 1 === i.indexOf(e[r]) && this.parent.nonWorkingDayIndex.push(r)
        }, e.prototype.setTime = function(e, t) {
            var i = e / 3600,
                n = (e - 3600 * (i = parseInt(i, 10))) / 60,
                r = e - 3600 * i - 60 * (n = parseInt(n, 10));
            t.setHours(i, n, r)
        }, e.prototype.getTimeDifference = function(e, t, i) {
            var n = new Date(e.getTime()),
                r = new Date(t.getTime());
            return i && this.updateDateWithTimeZone(n, r), r.getTime() - n.getTime()
        }, e.prototype.updateDateWithTimeZone = function(e, t) {
            var i, n, r = e.getTimezoneOffset(),
                o = t.getTimezoneOffset();
            if (r !== o) {
                var s = new Date((new Date).getFullYear(), 0, 1).getTimezoneOffset();
                if (s !== r ? (n = e, i = r) : s !== o && (n = t, i = o), s < 0) {
                    var a = s - i;
                    n.setTime(n.getTime() + 60 * a * 1e3)
                } else if (s > 0) {
                    a = i - s;
                    n.setTime(n.getTime() - 60 * a * 1e3)
                }
            }
        }, e.prototype.getSecondsInDecimal = function(e) {
            return 60 * e.getHours() * 60 + 60 * e.getMinutes() + e.getSeconds() + e.getMilliseconds() / 1e3
        }, e.prototype.offset = function(e, t, i) {
            var n = new Date(e.toLocaleString("en-US", {
                timeZone: i
            }));
            return isNaN(n.getTime()) ? 0 : (e.getTime() - n.getTime()) / 6e4 + t
        }, e.prototype.convert = function(e, t) {
            var i = e.getTimezoneOffset(),
                n = this.offset(e, i, t),
                r = (e = new Date(e.getTime() + 6e4 * (i - n))).getTimezoneOffset();
            return new Date(e.getTime() + 6e4 * (r - i))
        }, e.prototype.getDateFromFormat = function(e, t) {
            var i;
            if (g(e)) return null;
            if (e instanceof Date) i = new Date(e.getTime());
            else {
                var n = this.parent.globalize.parseDate(e, {
                    format: this.parent.getDateFormat(),
                    type: "dateTime"
                });
                i = g(n) && !isNaN(new Date(e).getTime()) ? new Date(e) : n
            }
            return !g(this.parent.timezone) && t ? this.convert(i, this.parent.timezone) : i
        }, e.prototype.compareDates = function(e, t) {
            return g(e) || g(t) ? !g(e) && g(t) ? 1 : g(e) && !g(t) ? -1 : null : e.getTime() > t.getTime() ? 1 : e.getTime() < t.getTime() ? -1 : 0
        }, e.prototype.getDurationString = function(e, t) {
            var i = "";
            if (!g(e) && (i += parseFloat(e.toFixed(2)) + " ", !g(t))) {
                var n = 1 !== e;
                "day" === t ? i += n ? this.parent.localeObj.getConstant("days") : this.parent.localeObj.getConstant("day") : "hour" === t ? i += n ? this.parent.localeObj.getConstant("hours") : this.parent.localeObj.getConstant("hour") : "minute" === t && (i += n ? this.parent.localeObj.getConstant("minutes") : this.parent.localeObj.getConstant("minute"))
            }
            return i
        }, e.prototype.getWorkString = function(e, t) {
            var i = "";
            if (!g(e) && (i += parseFloat(e).toFixed(2) + " ", !g(t))) {
                var n = 1 !== e;
                "day" === t ? i += n ? this.parent.localeObj.getConstant("days") : this.parent.localeObj.getConstant("day") : "hour" === t ? i += n ? this.parent.localeObj.getConstant("hours") : this.parent.localeObj.getConstant("hour") : "minute" === t && (i += n ? this.parent.localeObj.getConstant("minutes") : this.parent.localeObj.getConstant("minute"))
            }
            return i
        }, e.prototype.calculateProjectDates = function(e) {
            var t = this,
                i = "string" == typeof this.parent.projectStartDate ? new Date(this.parent.projectStartDate) : this.parent.projectStartDate,
                n = "string" == typeof this.parent.projectEndDate ? new Date(this.parent.projectEndDate) : this.parent.projectEndDate,
                r = this.parent.timelineModule.isZooming && this.parent.cloneProjectStartDate ? this.getDateFromFormat(this.parent.cloneProjectStartDate) : this.getDateFromFormat(i),
                o = this.parent.timelineModule.isZooming && this.parent.cloneProjectEndDate ? this.getDateFromFormat(this.parent.cloneProjectEndDate) : this.getDateFromFormat(n),
                s = null,
                a = null,
                h = this.parent.flatData,
                p = this.parent.currentViewData,
                d = [],
                c = function(e) {
                    g(e) || d.push(e)
                },
                u = function(e) {
                    e.length > 0 && (e.sort((function(e, t) {
                        return e.getTime() - t.getTime()
                    })), s = new Date(e[0].getTime()), a = e.length > 1 ? new Date(e[e.length - 1].getTime()) : null)
                };
            if ((!r || !o) && h.length > 0 || e || this.parent.timelineModule.isZoomToFit) {
                if ((p.length > 0 && this.parent.timelineModule.isZoomToFit && this.parent.treeGrid.filterModule && this.parent.treeGrid.filterModule.filteredResult.length > 0 ? p : h).forEach((function(e, i) {
                        d = [];
                        var n = e.ganttProperties,
                            r = t.getValidStartDate(n),
                            o = t.getValidEndDate(n);
                        c(s), c(a), c(r), c(o), t.parent.renderBaseline && !t.parent.timelineModule.isZoomToFit && (c(n.baselineStartDate), c(n.baselineEndDate)), n.indicators && n.indicators.length > 0 && !t.parent.timelineModule.isZoomToFit && n.indicators.forEach((function(e, i) {
                            c(t.getDateFromFormat(e.date))
                        })), u(d)
                    })), d = [], c(s), c(a), this.parent.eventMarkers.length > 0 && !this.parent.timelineModule.isZoomToFit) this.parent.eventMarkers.forEach((function(e, i) {
                    c(t.getDateFromFormat(e.day))
                }));
                if (this.parent.totalHolidayDates.length > 0 && !this.parent.timelineModule.isZoomToFit) this.parent.totalHolidayDates.forEach((function(e, t) {
                    c(new Date(e))
                }));
                u(d), s && a || (s = g(s) ? this.getDateFromFormat(new Date) : s, (a = this.getDateFromFormat(new Date(s.getTime()))).setDate(a.getDate() + 20))
            } else r && o || 0 !== h.length || (s = this.getDateFromFormat(new Date), a = this.getDateFromFormat(new Date(s.getTime())));
            e ? (l("minStartDate", s, e), l("maxEndDate", a, e)) : (this.parent.cloneProjectStartDate = s || new Date(r.getTime()), this.parent.cloneProjectEndDate = a || new Date(o.getTime()))
        }, e
    }(),
    Gl = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Ul = function(e) {
        function t(t) {
            var i = e.call(this, t) || this;
            return i.recordIndex = 0, i.taskIds = [], i.hierarchyData = [], i.addEventListener(), i
        }
        return Gl(t, e), t.prototype.addEventListener = function() {
            this.parent.on("beforeDataManipulate", this.checkDataBinding.bind(this))
        }, t.prototype.checkDataBinding = function(e) {
            e && (this.parent.flatData = [], this.parent.currentViewData = [], this.dataArray = [], this.taskIds = [], this.parent.ids = [], this.recordIndex = 0, this.hierarchyData = [], this.parent.predecessorsCollection = [], this.parent.treeGrid.parentData = []), g(this.parent.dataSource) ? (this.parent.dataSource = [], this.parent.renderGantt(e)) : this.parent.dataSource instanceof yn ? this.initDataSource(e) : this.parent.dataSource.length > 0 ? (this.dataArray = this.parent.dataSource, this.cloneDataSource(), this.parent.renderGantt(e)) : this.parent.renderGantt(e)
        }, t.prototype.initDataSource = function(e) {
            var t = this,
                i = this.parent.query instanceof on ? this.parent.query : new on;
            i.requiresCount(), this.parent.dataSource.executeQuery(i).then((function(i) {
                t.dataArray = i.result, t.cloneDataSource(), t.parent.renderGantt(e)
            })).catch((function(i) {
                t.parent.renderGantt(e), t.parent.trigger("actionFailure", {
                    error: i
                })
            }))
        }, t.prototype.constructDataSource = function(e) {
            for (var t = new yn(e).executeLocal((new on).group(this.parent.taskFields.parentID)), i = [], n = 0; n < t.length; n++) {
                var r = t[n];
                if (!g(r.key)) {
                    var o = this.taskIds.indexOf(r.key.toString());
                    if (o > -1 && !g(r.key)) {
                        e[o][this.parent.taskFields.child] = r.items;
                        continue
                    }
                }
                i.push.apply(i, r.items)
            }
            this.hierarchyData = this.dataReorder(e, i)
        }, t.prototype.cloneDataSource = function() {
            var e = this.parent.taskFields.id,
                t = this.parent.taskFields.parentID,
                i = [];
            if (g(e) || g(t)) i = this.dataArray;
            else {
                for (var n = [], r = 0; r < this.dataArray.length; r++) {
                    var o = this.dataArray[r];
                    n.push(u({}, {}, o, !0)), g(o[e]) || this.taskIds.push(o[e].toString())
                }
                this.parent.taskFields.child || (this.parent.taskFields.child = "Children"), this.constructDataSource(n), i = this.hierarchyData
            }
            if ("ProjectView" !== this.parent.viewType) {
                var s = u([], [], this.parent.resources, !0),
                    a = [];
                if (this.constructResourceViewDataSource(s, i, a), a.length > 0) {
                    var l = {};
                    l[this.parent.resourceFields.id] = 0, l[this.parent.resourceFields.name] = this.parent.localeObj.getConstant("unassignedTask"), l[this.parent.taskFields.child] = a, s.push(l)
                }
                i = s
            }
            this.prepareDataSource(i)
        }, t.prototype.constructResourceViewDataSource = function(e, t, i) {
            for (var n = function(n) {
                    var o = t[n],
                        s = r.parent.taskFields.child,
                        a = o && o[r.parent.taskFields.resourceInfo],
                        l = r.parent.resourceFields.id;
                    !o[s] && a && a.length ? a.forEach((function(t) {
                        for (var i = "object" == typeof t ? t[l] : t, n = 0; n < e.length; n++)
                            if (e[n][l].toString() === i.toString()) {
                                e[n][s] ? e[n][s].push(o) : e[n][s] = [o];
                                break
                            }
                    })) : o[s] || i.push(o), o[r.parent.taskFields.child] && o[r.parent.taskFields.child].length && r.constructResourceViewDataSource(e, o[r.parent.taskFields.child], i)
                }, r = this, o = 0; o < t.length; o++) n(o)
        }, t.prototype.prepareDataSource = function(e) {
            this.prepareRecordCollection(e, 0), "ResourceView" === this.parent.viewType && this.calculateSharedTaskUniqueIds(), this.parent.taskFields.dependency && this.parent.predecessorModule && this.parent.predecessorModule.ensurePredecessorCollection()
        }, t.prototype.calculateSharedTaskUniqueIds = function() {
            for (var e = function(e) {
                    var i = t.parent.getTaskIds()[e].match(/(\d+|[A-z]+)/g);
                    if ("R" !== i[0]) {
                        var n = [],
                            r = [];
                        t.parent.flatData.filter((function(e) {
                            e.ganttProperties.taskId.toString() === i[1] && 0 !== e.level && (r.push(e.ganttProperties.rowUniqueID), n.push(e))
                        }));
                        for (var o = 0; o < n.length; o++) n[o].ganttProperties.sharedTaskUniqueIds = r
                    }
                }, t = this, i = 0; i < this.parent.getTaskIds().length; i++) e(i)
        }, t.prototype.prepareRecordCollection = function(e, t, i) {
            for (var n = e.length, r = 0; r < n; r++) {
                var o = e[r],
                    s = this.createRecord(o, t, i, !0);
                s.index = this.recordIndex++, this.parent.ids[s.index] = s.ganttProperties.rowUniqueID, this.parent.flatData.push(s), this.parent.setTaskIds(s);
                var a = o[this.parent.taskFields.child];
                if ("ResourceView" === this.parent.viewType && g(a) && g(s.parentItem) && 0 === s.level) {
                    var l = s.ganttProperties,
                        h = s;
                    this.parent.setRecordValue(l.isAutoSchedule ? "startDate" : "autoStartDate", null, h.ganttProperties, !0), this.parent.setRecordValue(l.isAutoSchedule ? "endDate" : "autoEndDate", null, h.ganttProperties, !0);
                    var p = h.ganttProperties;
                    this.parent.setRecordValue("isMilestone", !1, p, !0), p.isAutoSchedule && this.calculateDuration(h), this.updateWorkWithDuration(h);
                    var d = p.work;
                    this.parent.setRecordValue("work", d, p, !0), this.parent.setRecordValue("taskType", "FixedDuration", p, !0), g(this.parent.taskFields.type) || this.updateMappingData(h, "type"), this.parent.setRecordValue("progress", Math.floor(0), p, !0), this.parent.setRecordValue("totalProgress", 0, p, !0), this.parent.setRecordValue("totalDuration", 0, p, !0), p.isAutoSchedule || (this.parent.setRecordValue("autoDuration", this.calculateAutoDuration(p), p, !0), this.updateAutoWidthLeft(h)), this.resetDependency(h), this.updateWidthLeft(h), this.updateTaskData(h)
                }!g(a) && a.length > 0 && this.prepareRecordCollection(a, s.level + 1, s)
            }
        }, t.prototype.addCustomFieldValue = function(e, t) {
            var i = this.parent.ganttColumns,
                n = i.length;
            if (n)
                for (var r = 0; r < n; r++) void 0 === t[i[r].field] && this.parent.setRecordValue(i[r].field, e[i[r].field], t)
        }, t.prototype.createRecord = function(e, t, i, n) {
            var r = this.parent.taskFields,
                o = this.parent.resourceFields,
                s = (e[r.child], e[r.progress]),
                a = null,
                l = null;
            s = s && parseFloat(s.toString()) ? parseFloat(s.toString()) : 0;
            var h = e[r.dependency],
                p = this.getDateFromFormat(e[r.baselineStartDate], !0),
                d = this.getDateFromFormat(e[r.baselineEndDate], !0),
                c = {},
                u = {},
                f = "Auto" === this.parent.taskMode || "Manual" !== this.parent.taskMode && !0 !== e[r.manual];
            this.parent.setRecordValue("ganttProperties", u, c), g(e[r.id]) ? g(e[o.id]) || (a = e[o.id], l = e[o.name], this.addTaskData(c, e, !1)) : (a = e[r.id], l = e[r.name], this.addTaskData(c, e, n)), this.parent.setRecordValue("taskId", a, u, !0), this.parent.setRecordValue("taskName", l, u, !0), r.parentID && this.parent.setRecordValue("parentId", e[r.parentID], u, !0), this.addCustomFieldValue(e, c), this.parent.setRecordValue("isAutoSchedule", f, u, !0), this.parent.setRecordValue("resourceInfo", this.setResourceInfo(e), u, !0), this.parent.setRecordValue("isMilestone", !1, u, !0), this.updateResourceName(c), this.calculateScheduledValues(c, e, n), this.parent.setRecordValue("baselineStartDate", this.checkBaselineStartDate(p), u, !0), d && 0 === d.getHours() && 86400 !== this.parent.defaultEndTime && this.setTime(this.parent.defaultEndTime, d), this.parent.setRecordValue("baselineEndDate", this.checkBaselineEndDate(d), u, !0), this.parent.setRecordValue("progress", s, u, !0), this.parent.setRecordValue("totalProgress", s, u, !0), this.parent.setRecordValue("predecessorsName", h, u, !0), this.parent.setRecordValue("indicators", e[r.indicators], u, !0), this.parent.setRecordValue("notes", e[r.notes], u, !0), this.parent.setRecordValue("cssClass", e[r.cssClass], u, !0), this.parent.setRecordValue("parentItem", this.getCloneParent(i), c);
            var m = c.parentItem ? c.parentItem.uniqueID : null;
            if (this.parent.setRecordValue("parentUniqueID", m, c), "ResourceView" !== this.parent.viewType || g(r.parentID) || g(c.parentItem) || this.parent.setRecordValue("parentId", c.parentItem.taskId, u, !0), this.parent.setRecordValue("level", t, c), this.parent.setRecordValue("uniqueID", Za(this.parent.element.id + "_data_"), c), this.parent.setRecordValue("uniqueID", c.uniqueID, u, !0), this.parent.setRecordValue("childRecords", [], c), this.parent.setRecordValue("baselineEndDate", this.checkBaselineEndDate(d), u, !0), !g(e[r.child]) && e[r.child].length > 0 ? (this.parent.setRecordValue("hasChildRecords", !0, c), this.parent.setRecordValue("isMilestone", !1, u, !0), this.resetDependency(c)) : this.parent.setRecordValue("hasChildRecords", !1, c), c.hasChildRecords && (this.parent.setRecordValue("autoStartDate", c.ganttProperties.startDate, u), this.parent.setRecordValue("autoEndDate", c.ganttProperties.endDate, u), this.parent.setRecordValue("autoDuration", c.ganttProperties.duration, u)), this.parent.setRecordValue("expanded", !c.hasChildRecords || !this.parent.collapseAllParentTasks, c), this.updateExpandStateMappingValue(c, e), n || (this.parent.setRecordValue("width", this.calculateWidth(c), u, !0), this.parent.setRecordValue("left", this.calculateLeft(u), u, !0), this.parent.setRecordValue("progressWidth", this.getProgressWidth(u.width, s), u, !0), u.baselineEndDate && u.baselineStartDate && (this.parent.setRecordValue("baselineLeft", this.calculateBaselineLeft(u), u, !0), this.parent.setRecordValue("baselineWidth", this.calculateBaselineWidth(u), u, !0))), g(r.work) && this.updateWorkWithDuration(c), g(r.manual) || this.parent.dataOperation.updateMappingData(c, "manual"), this.updateTaskData(c), h && this.parent.predecessorsCollection.push(c), g(i) || i.childRecords.push(c), "ProjectView" === this.parent.viewType) this.parent.setRecordValue("rowUniqueID", u.taskId.toString(), u, !0);
            else {
                var y = c.uniqueID.replace(this.parent.element.id + "_data_", "");
                this.parent.setRecordValue("rowUniqueID", y, c), this.parent.setRecordValue("rowUniqueID", y, u, !0), this.parent.setRecordValue("sharedTaskUniqueIds", [], u, !0)
            }
            return c
        }, t.prototype.updateWorkWithDuration = function(e) {
            var t = e.ganttProperties.resourceInfo,
                i = 0;
            if (!g(t)) {
                var n = t.length,
                    r = void 0,
                    o = void 0,
                    s = this.parent.secondsPerDay / 3600,
                    a = this.getDurationInDay(e.ganttProperties.duration, e.ganttProperties.durationUnit);
                for (r = 0; r < n; r++) i += ((o = t[r][this.parent.resourceFields.unit]) > 0 ? s * o / 100 : s) * a;
                "minute" === e.ganttProperties.workUnit && (i *= 60), "day" === e.ganttProperties.workUnit && (i /= s), i % 1 != 0 && (i = parseFloat(i.toFixed(2)))
            }
            this.parent.setRecordValue("work", i, e.ganttProperties, !0), g(this.parent.taskFields.work) || this.parent.dataOperation.updateMappingData(e, "work")
        }, t.prototype.getCloneParent = function(e) {
            if (g(e)) return null;
            var t = {};
            return t.uniqueID = e.uniqueID, t.expanded = e.expanded, t.level = e.level, t.index = e.index, t.taskId = e.ganttProperties.rowUniqueID, t
        }, t.prototype.reUpdateResources = function() {
            if (this.parent.flatData.length > 0)
                for (var e = void 0, t = void 0, i = void 0, n = 0; n < this.parent.flatData.length; n++) e = this.parent.flatData[n].taskData, t = this.parent.flatData[n].ganttProperties, i = this.parent.flatData[n], this.parent.setRecordValue("resourceInfo", this.setResourceInfo(e), t, !0), this.updateResourceName(i)
        }, t.prototype.addTaskData = function(e, t, i) {
            var n = this.parent.taskFields,
                r = this.parent.dataSource;
            if (i)
                if (n.parentID || r instanceof yn && r.dataSource.json && r.dataSource.offline)
                    if (n.parentID) {
                        var o = t[n.id],
                            s = this.taskIds.indexOf(o.toString()),
                            a = s > -1 ? this.dataArray[s] : {};
                        this.parent.setRecordValue("taskData", a, e)
                    } else this.parent.setRecordValue("taskData", t, e);
            else this.parent.setRecordValue("taskData", t, e);
            else this.parent.setRecordValue("taskData", t, e)
        }, t.prototype.updateExpandStateMappingValue = function(e, t) {
            var i, n = this.parent.taskFields.expandState,
                r = t[n];
            n && e.hasChildRecords && (g(r) ? g(r) && !this.parent.collapseAllParentTasks ? i = !0 : g(r) && this.parent.collapseAllParentTasks && (i = !1) : i = "true" === r.toString(), this.parent.setRecordValue("taskData." + n, i, e), this.parent.setRecordValue(n, i, e), this.parent.setRecordValue("expanded", i, e))
        }, t.prototype.calculateScheduledValues = function(e, t, i) {
            var n = this.parent.taskFields,
                r = e.ganttProperties,
                o = t[n.duration];
            o = g(o) || "" === o ? null : o;
            var s = this.getDateFromFormat(t[n.startDate], !0),
                a = this.getDateFromFormat(t[n.endDate], !0),
                l = !!n.milestone && !!t[n.milestone],
                h = t[n.durationUnit] ? t[n.durationUnit] : "";
            this.parent.setRecordValue("durationUnit", this.validateDurationUnitMapping(h), r, !0);
            var p = g(t[n.work]) ? 0 : parseFloat(t[n.work]);
            this.parent.setRecordValue("workUnit", this.validateWorkUnitMapping(this.parent.workUnit), r, !0);
            var d = t[n.type] ? t[n.type] : "",
                c = this.validateTaskTypeMapping(d);
            if (this.parent.setRecordValue("taskType", c, r, !0), a || s || !g(o) && "" !== o) s ? this.calculateDateFromStartDate(s, a, o, e) : a ? this.calculateDateFromEndDate(a, o, e) : g(o) || "" === o || (this.updateDurationValue(o, r), this.parent.allowUnscheduledTasks ? (this.parent.setRecordValue("startDate", null, r, !0), this.parent.setRecordValue("endDate", null, r, !0)) : (this.parent.setRecordValue("startDate", this.getProjectStartDate(r, i), r, !0), this.calculateEndDate(e)));
            else {
                if (this.parent.allowUnscheduledTasks) return;
                this.parent.setRecordValue("duration", 1, r, !0), this.parent.setRecordValue("startDate", this.getProjectStartDate(r, i), r, !0), this.calculateEndDate(e)
            }
            if (0 === r.duration && (this.parent.setRecordValue("isMilestone", !0, r, !0), this.parent.setRecordValue("endDate", r.startDate, r, !0)), !g(l) && l && (this.parent.setRecordValue("duration", 0, r, !0), this.parent.setRecordValue("isMilestone", !0, r, !0), this.parent.setRecordValue("endDate", r.startDate, r, !0)), g(n.work)) n.type && r.taskType && this.parent.dataOperation.updateMappingData(e, "type");
            else {
                if (this.parent.setRecordValue("durationUnit", this.parent.durationUnit, r, !0), isNaN(p) || g(p)) this.parent.setRecordValue("work", 0, r, !0), this.parent.setRecordValue("duration", 0, r, !0), this.parent.setRecordValue("isMilestone", !0, r, !0), this.parent.setRecordValue("endDate", r.startDate, r, !0);
                else {
                    switch (this.parent.setRecordValue("work", p, r, !0), c) {
                        case "FixedDuration":
                        case "FixedWork":
                            this.updateUnitWithWork(e);
                            break;
                        case "FixedUnit":
                            this.updateDurationWithWork(e)
                    }
                    g(n.type) || this.parent.dataOperation.updateMappingData(e, "type"), 0 === r.duration ? (this.parent.setRecordValue("isMilestone", !0, r, !0), this.parent.setRecordValue("endDate", r.startDate, r, !0)) : g(r.startDate) || g(r.duration) || (this.parent.setRecordValue("isMilestone", !1, r, !0), this.calculateEndDate(e))
                }
                this.parent.dataOperation.updateMappingData(e, "work")
            }
        }, t.prototype.updateDurationWithWork = function(e) {
            var t = e.ganttProperties,
                i = t.resourceInfo;
            if (!g(i)) {
                var n, r = g(i) ? 0 : i.length,
                    o = 0,
                    s = this.parent.secondsPerDay / 3600,
                    a = 0,
                    l = void 0,
                    h = void 0;
                for (h = 0; h < r; h++) o += (l = i[h][this.parent.resourceFields.unit]) > 0 ? s * l / 100 : s;
                n = this.getWorkInHour(t.work, t.workUnit), r > 0 && (a += n / o), "minute" === t.durationUnit && (a = a * s * 60), "hour" === t.durationUnit && (a *= s), a % 1 != 0 && (a = parseFloat(a.toFixed(2))), g(t.duration) || this.parent.setRecordValue("duration", a, t, !0)
            }
        }, t.prototype.updateUnitWithWork = function(e) {
            var t = e.ganttProperties,
                i = t.resourceInfo,
                n = g(i) ? 0 : i.length,
                r = this.parent.secondsPerDay / 3600;
            if (0 !== n) {
                var o = this.getDurationInDay(e.ganttProperties.duration, e.ganttProperties.durationUnit),
                    s = this.getWorkInHour(t.work, t.workUnit),
                    a = o > 0 ? s / (o * r) * 100 : 0,
                    l = a > 0 ? a / n : 100;
                l % 1 != 0 && (l = parseFloat(l.toFixed(2)));
                for (var h = 0; h < n; h++) i[h][this.parent.resourceFields.unit] = l;
                this.updateResourceName(e)
            }
        }, t.prototype.calculateDateFromEndDate = function(e, t, i) {
            var n = i.ganttProperties;
            0 === e.getHours() && 86400 !== this.parent.defaultEndTime && this.setTime(this.parent.defaultEndTime, e);
            var r = 0 === parseInt(t, 10) || null;
            this.parent.setRecordValue("endDate", this.checkEndDate(e, i.ganttProperties, r), n, !0), g(t) || "" === t ? this.parent.allowUnscheduledTasks ? (this.parent.setRecordValue("startDate", null, n, !0), this.parent.setRecordValue("duration", null, n, !0)) : (this.parent.setRecordValue("duration", 1, n, !0), this.parent.setRecordValue("startDate", this.getStartDate(n.endDate, n.duration, n.durationUnit, n), n, !0)) : g(t) || "" === t || (this.updateDurationValue(t, n), this.parent.setRecordValue("startDate", this.getStartDate(n.endDate, n.duration, n.durationUnit, n), n, !0))
        }, t.prototype.calculateDateFromStartDate = function(e, t, i, n) {
            var r = n.ganttProperties,
                o = !!(0 === parseInt(i, 10) || e && t && new Date(e.getTime()) === new Date(t.getTime())) || null;
            this.parent.setRecordValue("startDate", this.checkStartDate(e, r, o), r, !0), t || !g(i) && "" !== i ? (g(i) || t) && t && (g(i) || "" === i) ? (0 === t.getHours() && 86400 !== this.parent.defaultEndTime && this.setTime(this.parent.defaultEndTime, t), this.parent.setRecordValue("endDate", this.checkEndDate(t, n.ganttProperties), r, !0), 1 === this.compareDates(r.startDate, r.endDate) ? (this.parent.setRecordValue("endDate", r.startDate, r, !0), this.parent.setRecordValue("isMilestone", !0, r, !0), this.parent.setRecordValue("duration", 0, r, !0)) : this.calculateDuration(n)) : (this.updateDurationValue(i, r), this.calculateEndDate(n)) : this.parent.allowUnscheduledTasks ? (this.parent.setRecordValue("endDate", null, r, !0), this.parent.setRecordValue("duration", null, r, !0)) : (this.parent.setRecordValue("duration", 1, r, !0), this.calculateEndDate(n))
        }, t.prototype.getProgressWidth = function(e, t) {
            return e * t / 100
        }, t.prototype.calculateWidth = function(e, t) {
            var i = e.ganttProperties,
                n = t ? i.autoStartDate : i.startDate,
                r = t ? i.autoEndDate : i.endDate;
            return g(n) && g(r) && (n = this.getValidStartDate(i, t), r = this.getValidEndDate(i, t)), g(n) || g(r) ? 3 : !i.isMilestone || e.hasChildRecords && !i.isAutoSchedule ? this.getTaskWidth(n, r) : 0
        }, t.prototype.getTaskbarHeight = function() {
            var e = this.parent.rowHeight,
                t = this.parent.taskbarHeight;
            return t < e ? t : e
        }, t.prototype.calculateLeft = function(e, t) {
            var i = null,
                n = -300,
                r = t ? e.autoStartDate : e.startDate,
                o = t ? e.autoEndDate : e.endDate,
                s = (t ? e.autoDuration : e.duration, e.isMilestone);
            return r ? i = new Date(r.getTime()) : o ? (i = new Date(o.getTime()), s = !0) : i = this.getValidStartDate(e), g(i) || (n = this.getTaskLeft(i, s)), n
        }, t.prototype.calculateAutoLeft = function(e) {
            return this.getTaskLeft(e.autoStartDate, e.isMilestone)
        }, t.prototype.calculateAutoDuration = function(e) {
            return this.getDuration(e.autoStartDate, e.autoEndDate, e.durationUnit, !1, e.isMilestone)
        }, t.prototype.calculateAutoWidth = function(e) {
            return this.getTaskWidth(e.autoStartDate, e.autoEndDate)
        }, t.prototype.calculateBaselineLeft = function(e) {
            var t = this.getDateFromFormat(e.baselineStartDate),
                i = this.getDateFromFormat(e.baselineEndDate);
            return t && i ? this.getTaskLeft(t, e.isMilestone) : 0
        }, t.prototype.calculateBaselineWidth = function(e) {
            var t = this.getDateFromFormat(e.baselineStartDate),
                i = this.getDateFromFormat(e.baselineEndDate);
            return t && i ? this.getTaskWidth(t, i) : 0
        }, t.prototype.getTaskWidth = function(e, t) {
            var i = new Date(e.getTime()),
                n = new Date(t.getTime());
            return "Day" === ("None" !== this.parent.timelineModule.bottomTier ? this.parent.timelineModule.bottomTier : this.parent.timelineModule.topTier) && (this.getSecondsInDecimal(i) === this.parent.defaultStartTime && i.setHours(0, 0, 0, 0), this.getSecondsInDecimal(n) === this.parent.defaultEndTime && n.setHours(24), this.getSecondsInDecimal(n) === this.parent.defaultStartTime && n.setHours(0, 0, 0, 0)), this.getTimeDifference(i, n) / 864e5 * this.parent.perDayWidth
        }, t.prototype.getTaskLeft = function(e, t) {
            var i = new Date(e.getTime());
            "Day" === ("None" !== this.parent.timelineModule.bottomTier ? this.parent.timelineModule.bottomTier : this.parent.timelineModule.topTier) && (this.getSecondsInDecimal(i) === this.parent.defaultStartTime ? i.setHours(0, 0, 0, 0) : t && this.getSecondsInDecimal(i) === this.parent.defaultEndTime && i.setHours(24));
            var n = this.parent.timelineModule.timelineStartDate;
            return n ? (i.getTime() - n.getTime()) / 864e5 * this.parent.perDayWidth : 0
        }, t.prototype.updateMappingData = function(e, t) {
            var i = this.parent.columnMapping,
                n = e.ganttProperties;
            if (!g(i[t]) || "taskType" === t)
                if ("predecessorName" === t);
                else if ("resourceInfo" === t) {
                for (var r = n.resourceInfo, o = this.parent.resourceFields, s = [], a = [], l = 0; l < r.length; l++) {
                    s.push(r[l][o.id]);
                    var h = r[l][o.name],
                        p = r[l][o.unit];
                    100 !== p && (h += "[" + p + "%]"), a.push(h)
                }
                this.parent.setRecordValue("resourceNames", a.join(","), n, !0), this.updateTaskDataResource(e), this.parent.setRecordValue(i[t], a.join(","), e)
            } else "startDate" === t || "endDate" === t ? this.setRecordDate(e, n[t], i[t]) : "duration" === t ? this.setRecordDuration(e, i[t]) : "work" === t ? (this.parent.setRecordValue("taskData." + i[t], this.getWorkString(n.work, n.workUnit), e), this.parent.setRecordValue(i[t], n[t], e)) : "type" === t ? (this.parent.setRecordValue("taskData." + i[t], n[t], e), this.parent.setRecordValue(i[t], n[t], e)) : "manual" === t ? (this.parent.setRecordValue("taskData." + i[t], !n.isAutoSchedule, e), this.parent.setRecordValue(i[t], !n.isAutoSchedule, e)) : (this.parent.setRecordValue("taskData." + i[t], n[t], e), this.parent.setRecordValue(i[t], n[t], e))
        }, t.prototype.updateTaskDataResource = function(e) {
            var t = e.ganttProperties.resourceInfo,
                i = e.taskData[this.parent.taskFields.resourceInfo],
                n = this.parent.resourceFields;
            if (g(i)) e.taskData[this.parent.taskFields.resourceInfo] = t;
            else if (t.length) {
                for (var r = 0; r < t.length; r++) {
                    for (var o = !1, s = 0; s < i.length; s++)
                        if ("number" == typeof i[s] || "string" == typeof i[s]) {
                            if (parseInt(i[s], 10) === parseInt(t[r][n.id], 10)) {
                                i[s] = t[r], o = !0;
                                break
                            }
                        } else if (i[s][n.id] === t[r][n.id] && "number" != typeof i[s]) {
                        i[s] = u({}, i[s], t[r], !0), o = !0;
                        break
                    }
                    o || i.push(t[r])
                }
                for (var a = [], l = function(e) {
                        t.filter((function(t) {
                            t[n.id] === i[e][n.id] && a.push(i[e])
                        }))
                    }, h = 0; h < i.length; h++) l(h);
                this.parent.setRecordValue("taskData." + this.parent.taskFields.resourceInfo, a, e)
            } else this.parent.setRecordValue("taskData." + this.parent.taskFields.resourceInfo, [], e)
        }, t.prototype.setRecordDate = function(e, t, i) {
            var n = "string" == typeof t ? new Date(t) : t;
            g(t) || (t = new Date(n.getTime())), this.parent.setRecordValue(i, t, e), g(t) || (t = new Date(n.getTime())), this.parent.setRecordValue("taskData." + i, t, e)
        }, t.prototype.getDurationInDay = function(e, t) {
            return "day" === t ? e : "hour" === t ? e / (this.parent.secondsPerDay / 3600) : e / (this.parent.secondsPerDay / 60)
        }, t.prototype.setRecordDuration = function(e, t) {
            var i = e.ganttProperties.duration,
                n = e.ganttProperties.durationUnit;
            if (g(i)) this.parent.setRecordValue(t, i, e), this.parent.setRecordValue("taskData." + t, i, e);
            else {
                this.parent.setRecordValue(t, e.ganttProperties.duration, e);
                var r = a(t, e.taskData);
                isNaN(r) && g(this.parent.taskFields.durationUnit) && !g(r) ? this.parent.setRecordValue("taskData." + t, this.getDurationString(i, n), e) : "string" == typeof r ? this.parent.setRecordValue("taskData." + t, i.toString(), e) : this.parent.setRecordValue("taskData." + t, i, e)
            }
            this.parent.taskFields.durationUnit && (e.taskData[this.parent.taskFields.durationUnit] = e.ganttProperties.durationUnit)
        }, t.prototype.getWorkInHour = function(e, t) {
            return "day" === t ? e * (this.parent.secondsPerDay / 3600) : "minute" === t ? e / 60 : e
        }, t.prototype.updateTaskData = function(e) {
            var t = this.parent.taskFields,
                i = e.ganttProperties;
            if (!g(e.taskData)) {
                var n = e.taskData;
                t.id && (this.parent.setRecordValue("taskData." + t.id, i.taskId, e), this.parent.setRecordValue(t.id, i.taskId, e)), t.name && (this.parent.setRecordValue("taskData." + t.name, i.taskName, e), this.parent.setRecordValue(t.name, i.taskName, e)), t.startDate && this.setRecordDate(e, i.startDate, t.startDate), t.endDate && this.setRecordDate(e, i.endDate, t.endDate), t.duration && this.setRecordDuration(e, t.duration), t.durationUnit && (n[t.durationUnit] = i.durationUnit), t.progress && (this.parent.setRecordValue("taskData." + t.progress, i.progress, e), this.parent.setRecordValue(t.progress, i.progress, e)), t.baselineStartDate && this.setRecordDate(e, i.baselineStartDate, t.baselineStartDate), t.baselineEndDate && this.setRecordDate(e, i.baselineEndDate, t.baselineEndDate), t.notes && (this.parent.setRecordValue("taskData." + t.notes, i.notes, e), this.parent.setRecordValue(t.notes, i.notes, e)), t.cssClass && (this.parent.setRecordValue("taskData." + t.cssClass, i.cssClass, e), this.parent.setRecordValue(t.cssClass, i.cssClass, e)), t.indicators && (this.parent.setRecordValue("taskData." + t.indicators, i.indicators, e), this.parent.setRecordValue(t.indicators, i.indicators, e)), t.parentID && (this.parent.setRecordValue("taskData." + t.parentID, i.parentId, e), this.parent.setRecordValue(t.parentID, i.parentId, e)), t.work && (this.parent.setRecordValue("taskData." + t.work, this.getWorkString(i.work, i.workUnit), e), this.parent.setRecordValue(t.work, i.work, e)), t.type && (this.parent.setRecordValue("taskData." + t.type, i.taskType, e), this.parent.setRecordValue(t.type, i.taskType, e))
            }
        }, t.prototype.setResourceInfo = function(e) {
            var t, i;
            if (g(e[this.parent.taskFields.resourceInfo])) return t;
            t = e[this.parent.taskFields.resourceInfo], i = g(this.parent.editModule) || g(this.parent.editModule.dialogModule) || !this.parent.editModule.dialogModule.isAddNewResource ? this.parent.resources : this.parent.editModule.dialogModule.ganttResources;
            for (var n = this.parent.resourceFields.id, r = this.parent.resourceFields.unit, o = this.parent.resourceFields.group, s = [], a = function(e) {
                    var a = u({}, i.filter((function(i) {
                        return "object" == typeof t[e] && t[e][n] === i[n] || t[e] === i[n]
                    }))[0]);
                    s.push(a), g(r) || g(t[e][r]) || (a[r] = t[e][r]), g(o) || g(t[e][o]) || (a[o] = t[e][o])
                }, l = 0; l < t.length; l++) a(l);
            return this.updateResourceUnit(s), s
        }, t.prototype.updateResourceUnit = function(e) {
            var t = this.parent.resourceFields.unit;
            if (!g(t)) {
                var i = e.length,
                    n = void 0;
                for (n = 0; n < i; n++) g(e[n][t]) && (e[n][t] = 100)
            }
        }, t.prototype.updateResourceName = function(e) {
            var t = e.ganttProperties.resourceInfo,
                i = [];
            if (t) {
                var n = u([], [], e.taskData[this.parent.taskFields.resourceInfo], !0);
                this.parent.setRecordValue("taskData." + this.parent.taskFields.resourceInfo, [], e);
                for (var r = 0; r < t.length; r++) {
                    var o = t[r],
                        s = o[this.parent.resourceFields.name],
                        a = o[this.parent.resourceFields.unit];
                    if (100 !== a && (s += "[" + a + "%]"), i.push(s), e.taskData) {
                        var l = this.parent.taskFields.resourceInfo;
                        n[r], e.taskData[l].push(n[r])
                    }
                }
                this.parent.setRecordValue("resourceNames", i.join(","), e.ganttProperties, !0), this.parent.setRecordValue(this.parent.taskFields.resourceInfo, i.join(","), e, !0), this.updateTaskDataResource(e)
            }
        }, t.prototype.dataReorder = function(e, t) {
            for (var i = []; e.length > 0 && t.length > 0;) {
                var n = t.indexOf(e[0]); - 1 === n ? e.shift() : (i.push(e.shift()), t.splice(n, 1))
            }
            return i
        }, t.prototype.validateDurationUnitMapping = function(e) {
            var t = e;
            return t = "minute" === t || "minutes" === t || "m" === t || "min" === t ? "minute" : "hour" === t || "hours" === t || "h" === t || "hr" === t ? "hour" : "day" === t || "days" === t || "d" === t ? "day" : this.parent.durationUnit.toLocaleLowerCase()
        }, t.prototype.validateTaskTypeMapping = function(e) {
            var t = e;
            return t = "FixedDuration" === t ? "FixedDuration" : "FixedUnit" === t ? "FixedUnit" : "FixedWork" === t ? "FixedWork" : this.parent.taskType
        }, t.prototype.validateWorkUnitMapping = function(e) {
            var t = e;
            return t = "minute" === t ? "minute" : "hour" === t ? "hour" : "day" === t ? "day" : this.parent.workUnit.toLocaleLowerCase()
        }, t.prototype.updateDurationValue = function(e, t) {
            var i = this.getDurationValue(e);
            isNaN(a("duration", i)) || this.parent.setRecordValue("duration", a("duration", i), t, !0), g(a("durationUnit", i)) || this.parent.setRecordValue("durationUnit", a("durationUnit", i), t, !0)
        }, t.prototype.reUpdateGanttData = function() {
            if (this.parent.flatData.length > 0) {
                var e = void 0,
                    t = void 0;
                this.parent.secondsPerDay = this.getSecondsPerDay();
                for (var i = 0; i < this.parent.flatData.length; i++) e = this.parent.flatData[i].taskData, t = this.parent.flatData[i], g(this.parent.taskFields.duration) || this.setRecordDuration(t, this.parent.taskFields.duration), this.calculateScheduledValues(t, e, !1);
                this.updateGanttData()
            }
        }, t.prototype._isInStartDateRange = function(e, t, i) {
            var n = !1;
            return e.getTime() >= t.getTime() && e.getTime() < i.getTime() && (n = !0), n
        }, t.prototype._isInEndDateRange = function(e, t, i) {
            var n = !1;
            return e.getTime() > t.getTime() && e.getTime() <= i.getTime() && (n = !0), n
        }, t.prototype.updateOverlappingValues = function(e) {
            var t, i = e.childRecords,
                n = [];
            if (i.length <= 1) e.ganttProperties.workTimelineRanges = [];
            else {
                i = this.setSortedChildTasks(e), this.updateOverlappingIndex(i);
                for (var r = 1; r < i.length; r++) {
                    t = i[r];
                    for (var o = new Date(t.ganttProperties.startDate.getTime()), s = new Date(t.ganttProperties.endDate.getTime()), a = [], l = 0; l < r; l++) {
                        var h = i[l].ganttProperties.startDate,
                            p = i[l].ganttProperties.endDate,
                            d = {};
                        (this._isInStartDateRange(o, h, p) || this._isInEndDateRange(s, h, p)) && (h.getTime() > o.getTime() && h.getTime() < s.getTime() && p.getTime() > o.getTime() && p.getTime() > s.getTime() || o.getTime() === h.getTime() && s.getTime() <= p.getTime() ? (d.from = h, d.to = s) : o.getTime() === h.getTime() && s.getTime() > p.getTime() ? (d.from = h, d.to = p) : o.getTime() > h.getTime() && s.getTime() >= p.getTime() ? (d.from = o, d.to = p) : o.getTime() > h.getTime() && s.getTime() < p.getTime() && (d.from = o, d.to = s), a.push(d))
                    }
                    n.push.apply(n, this.mergeRangeCollections(a))
                }
                this.parent.setRecordValue("workTimelineRanges", this.mergeRangeCollections(n, !0), e.ganttProperties, !0), this.calculateRangeLeftWidth(e.ganttProperties.workTimelineRanges)
            }
        }, t.prototype.updateOverlappingIndex = function(e) {
            for (var t = 0; t < e.length; t++) e[t].ganttProperties.eOverlapIndex = t
        }, t.prototype.calculateRangeLeftWidth = function(e) {
            for (var t = 0; t < e.length; t++) e[t].left = this.getTaskLeft(e[t].from, !1), e[t].width = this.getTaskWidth(e[t].from, e[t].to)
        }, t.prototype.mergeRangeCollections = function(e, t) {
            var i, n, r, o, s, a = [],
                l = {},
                h = {};
            i = new yn(e).executeLocal((new on).sortBy(this.parent.taskFields.startDate, "Ascending"));
            for (var p = 0; p < i.length; p++) 0 !== a.length || 0 !== p ? (n = (l = a[a.length - 1]).from, r = l.to, o = (h = i[p]).from, s = h.to, n.getTime() === o.getTime() && r.getTime() >= s.getTime() || n.getTime() < o.getTime() && r.getTime() >= s.getTime() || (n.getTime() <= o.getTime() && r.getTime() >= o.getTime() && r.getTime() < s.getTime() || r.getTime() < o.getTime() && this.checkStartDate(r).getTime() === o.getTime() ? l.to = s : r.getTime() < o.getTime() && this.checkStartDate(r).getTime() !== o.getTime() && a.push(i[p]))) : a.push(i[p]);
            return t && (a = this.splitRangeCollection(a)), a
        }, t.prototype.setSortedChildTasks = function(e) {
            return new yn(e.childRecords).executeLocal((new on).sortBy(this.parent.taskFields.startDate, "Ascending"))
        }, t.prototype.splitRangeCollection = function(e, t, i) {
            var n;
            return "Week" === (n = this.parent.timelineModule.isSingleTier ? "None" !== this.parent.timelineModule.bottomTier ? this.parent.timelineModule.bottomTier : this.parent.timelineModule.topTier : this.parent.timelineModule.bottomTier) || "Month" === n || "Year" === n ? e : "Day" === n || 0 === this.parent.workingTimeRanges[0].from && 86400 === this.parent.workingTimeRanges[0].to ? this.getRangeWithWeek(e, t, i) : this.getRangeWithDay(e, t, i)
        }, t.prototype.getRangeWithDay = function(e, t, i) {
            for (var n = [], r = 0; r < e.length; r++) n.push.apply(n, this.splitRangeForDayMode(e[r], t, i));
            return n
        }, t.prototype.splitRangeForDayMode = function(e, t, i) {
            var n = t || "from",
                r = i || "to",
                o = (new Date(e[n]), new Date(e[n])),
                s = new Date(e[r]),
                a = [],
                l = {};
            if (o.getTime() < s.getTime())
                do {
                    for (var h = new Date(o.getTime()), p = new Date(o.getTime()), d = 0, c = this.parent.dataOperation.getSecondsInDecimal(o), g = -1, f = 0; f < this.parent.workingTimeRanges.length; f++) {
                        var m = this.parent.workingTimeRanges[f];
                        if (c >= m.from && c <= m.to) {
                            g = f;
                            break
                        }
                    } - 1 !== g && (d = Math.round(this.parent.workingTimeRanges[g].to - c), p.setSeconds(p.getSeconds() + d));
                    p.getTime() < s.getTime() ? (l = {}, e.task && (l.task = u([], e.task)), l[n] = h, l[r] = p, l.isSplit = !0, a.push(l)) : (l = {}, e.task && (l.task = u([], e.task)), l[n] = h, l[r] = s, l.isSplit = !0, a.push(l)), o = this.checkStartDate(p)
                } while (o.getTime() < s.getTime());
            else a.push(e);
            return a
        }, t.prototype.getRangeWithWeek = function(e, t, i) {
            for (var n = [], r = 0; r < e.length; r++) n.push.apply(n, this.splitRangeForWeekMode(e[r], t, i));
            return n
        }, t.prototype.splitRangeForWeekMode = function(e, t, i) {
            var n = t || "from",
                r = i || "to",
                o = new Date(e[n]),
                s = new Date(e[n]),
                a = new Date(e[r]),
                l = !1,
                h = [],
                p = {};
            if (s.setDate(s.getDate() + 1), s.getTime() < a.getTime()) {
                do {
                    if (this.parent.dataOperation.isOnHolidayOrWeekEnd(s, null)) {
                        var d = new Date(s.getTime());
                        d.setDate(s.getDate() - 1), this.setTime(this.parent.defaultEndTime, d), (p = {})[n] = o, p.isSplit = !0, p[r] = d, e.task && (p.task = u([], e.task, !0)), o.getTime() !== d.getTime() && h.push(p), o = this.checkStartDate(d), s = new Date(o.getTime()), l = !0
                    } else s.setDate(s.getDate() + 1)
                } while (s.getTime() < a.getTime());
                l ? o.getTime() !== a.getTime() && (p = {}, e.task && (p.task = u([], e.task, !0)), p[n] = o, p[r] = a, p.isSplit = !0, h.push(p)) : h.push(e)
            } else h.push(e);
            return h
        }, t.prototype.updateGanttData = function() {
            for (var e = this.parent.flatData, t = e.length, i = 0; i < t; i++) {
                var n = e[i],
                    r = n.ganttProperties;
                n.hasChildRecords || this.updateWidthLeft(n), this.parent.setRecordValue("baselineLeft", this.calculateBaselineLeft(r), r, !0), this.parent.setRecordValue("baselineWidth", this.calculateBaselineWidth(r), r, !0);
                var o = [],
                    s = void 0;
                n.parentItem && (o = (s = this.parent.getParentTask(n.parentItem)).childRecords), s && o.indexOf(n) === o.length - 1 && !n.hasChildRecords && this.updateParentItems(s)
            }
        }, t.prototype.reUpdateGanttDataPosition = function() {
            for (var e = this.parent.flatData, t = e.length, i = 0; i < t; i++) {
                var n = e[i],
                    r = n.ganttProperties;
                this.updateWidthLeft(n), "Auto" !== this.parent.taskMode && n.hasChildRecords && this.updateAutoWidthLeft(n), this.parent.setRecordValue("baselineLeft", this.calculateBaselineLeft(r), r, !0), this.parent.setRecordValue("baselineWidth", this.calculateBaselineWidth(r), r, !0), this.parent.dataOperation.updateTaskData(n)
            }
        }, t.prototype.updateWidthLeft = function(e) {
            var t = e.ganttProperties;
            this.parent.setRecordValue("width", this.parent.dataOperation.calculateWidth(e), t, !0), this.parent.setRecordValue("left", this.parent.dataOperation.calculateLeft(t), t, !0), this.parent.setRecordValue("progressWidth", this.parent.dataOperation.getProgressWidth(t.isAutoSchedule || !e.hasChildRecords ? t.width : t.autoWidth, t.progress), t, !0)
        }, t.prototype.updateAutoWidthLeft = function(e) {
            var t = e.ganttProperties;
            this.parent.setRecordValue("autoWidth", this.calculateWidth(e, !0), t, !0), this.parent.setRecordValue("autoLeft", this.calculateLeft(t, !0), t, !0)
        }, t.prototype.getParentProgress = function(e) {
            var t = 0,
                i = {};
            switch (e.ganttProperties.durationUnit) {
                case "hour":
                    t = e.ganttProperties.duration / (this.parent.secondsPerDay / 3600);
                    break;
                case "minute":
                    t = e.ganttProperties.duration / (this.parent.secondsPerDay / 60);
                    break;
                default:
                    t = e.ganttProperties.duration
            }
            return e.hasChildRecords ? (l("totalProgress", e.ganttProperties.totalProgress, i), l("totalDuration", e.ganttProperties.totalDuration, i)) : (l("totalProgress", e.ganttProperties.progress * t, i), l("totalDuration", t, i)), i
        }, t.prototype.resetDependency = function(e) {
            var t = this.parent.taskFields.dependency;
            if (!g(t)) {
                var i = e.ganttProperties;
                this.parent.setRecordValue("predecessor", [], i, !0), this.parent.setRecordValue("predecessorsName", null, i, !0), this.parent.setRecordValue("taskData." + t, null, e), this.parent.setRecordValue(t, null, e)
            }
        }, t.prototype.updateParentItems = function(e, t) {
            var i = t ? e : this.parent.getParentTask(e),
                n = !1,
                r = i.ganttProperties;
            if (i.childRecords.length > 0) {
                for (var o = r.isAutoSchedule ? r.startDate : r.autoStartDate, s = r.isAutoSchedule ? r.endDate : r.autoEndDate, l = i.childRecords, h = l.length, p = 0, d = {}, c = null, u = null, f = 0, m = 0, y = 0, v = void 0, b = 0; b < h; b++)
                    if (v = l[b], this.parent.isOnDelete && v.isDelete) {
                        if (1 === h && "ProjectView" === this.parent.viewType) {
                            if (S()) {
                                var w = i.ganttProperties.rowUniqueID,
                                    C = this.parent.getRecordByID(w);
                                C && -1 === this.parent.editedRecords.indexOf(C) && this.parent.editedRecords.push(C)
                            }
                            n = !0
                        }
                    } else {
                        var x = this.getValidStartDate(v.ganttProperties),
                            k = this.getValidEndDate(v.ganttProperties);
                        g(c) && (c = this.getDateFromFormat(x)), g(u) && (u = this.getDateFromFormat(k)), g(k) || 1 !== this.compareDates(k, u) || (u = this.getDateFromFormat(k)), g(x) || -1 !== this.compareDates(x, c) || (c = this.getDateFromFormat(x)), !v.ganttProperties.isMilestone && Fl(v.ganttProperties) ? (m += a("totalProgress", d = this.getParentProgress(v)), p += a("totalDuration", d)) : f++, y += v.ganttProperties.work
                    } if (!n) {
                    0 !== this.compareDates(o, c) && this.parent.setRecordValue(r.isAutoSchedule ? "startDate" : "autoStartDate", c, i.ganttProperties, !0), 0 !== this.compareDates(s, u) && this.parent.setRecordValue(r.isAutoSchedule ? "endDate" : "autoEndDate", u, i.ganttProperties, !0);
                    var T = void 0,
                        D = (T = this.parent.isOnDelete && v.isDelete ? h - f - 1 : h - f) > 0 && p > 0 ? m / p : 0,
                        E = i.ganttProperties,
                        R = !(0 !== T || !c || !u || c.getTime() !== u.getTime());
                    this.parent.setRecordValue("isMilestone", R, E, !0), E.isAutoSchedule && this.calculateDuration(i), this.updateWorkWithDuration(i);
                    var P = E.work;
                    P += y, this.parent.setRecordValue("work", P, E, !0), this.parent.setRecordValue("taskType", "FixedDuration", E, !0), g(this.parent.taskFields.type) || this.updateMappingData(i, "type"), this.parent.setRecordValue("progress", Math.floor(D), E, !0), this.parent.setRecordValue("totalProgress", m, E, !0), this.parent.setRecordValue("totalDuration", p, E, !0), E.isAutoSchedule || (this.parent.setRecordValue("autoDuration", this.calculateAutoDuration(E), E, !0), this.updateAutoWidthLeft(i)), this.resetDependency(i), this.updateWidthLeft(i), this.updateTaskData(i)
                }
            }
            n && 1 === i.childRecords.length && 0 === i.ganttProperties.duration && (this.parent.setRecordValue("isMilestone", !0, i.ganttProperties, !0), this.updateWidthLeft(i), this.updateTaskData(i));
            var I = this.parent.getParentTask(i.parentItem);
            I && this.updateParentItems(I), n = !1
        }, t
    }(_l),
    Kl = "e-timeline-single-header-outer-div",
    Yl = "e-task-label",
    Xl = "e-baseline-bar",
    Ql = "e-gantt-manualparenttaskbar",
    Jl = "e-connectorpoint-left",
    Zl = function() {
        function e(e) {
            this.previousScroll = {
                top: 0,
                left: 0
            }, this.parent = e, this.element = this.parent.ganttChartModule.scrollElement, this.addEventListeners()
        }
        return e.prototype.addEventListeners = function() {
            this.parent.on("grid-scroll", this.gridScrollHandler, this), ye.add(this.element, "scroll", this.onScroll, this)
        }, e.prototype.removeEventListeners = function() {
            ye.remove(this.element, "scroll", this.onScroll), this.parent.off("grid-scroll", this.gridScrollHandler)
        }, e.prototype.gridScrollHandler = function(e) {
            this.element.scrollTop = a("top", e), this.isFromTreeGrid = !0
        }, e.prototype.onScroll = function() {
            var e = {};
            this.element.scrollTop !== this.previousScroll.top && (this.isFromTreeGrid ? this.isFromTreeGrid = !1 : this.parent.notify("chartScroll", {
                top: this.element.scrollTop
            }), e.previousScrollTop = this.previousScroll.top, this.previousScroll.top = this.element.scrollTop, e.scrollTop = this.element.scrollTop, e.scrollDirection = "Vertical", e.action = "VerticalScroll"), this.element.scrollLeft !== this.previousScroll.left && (this.parent.ganttChartModule.chartTimelineContainer.scrollLeft = this.element.scrollLeft, e.previousScrollLeft = this.previousScroll.left, this.previousScroll.left = this.element.scrollLeft, e.scrollLeft = this.element.scrollLeft, e.scrollDirection = "Horizontal", e.action = "HorizontalScroll"), e.requestType = "scroll", this.parent.trigger("actionComplete", e)
        }, e.prototype.setHeight = function(e) {
            this.element.style.height = C(e)
        }, e.prototype.setWidth = function(e) {
            this.element.style.width = C(e)
        }, e.prototype.setScrollTop = function(e) {
            this.element.scrollTop = e
        }, e.prototype.setScrollLeft = function(e) {
            this.element.scrollLeft = e, this.parent.ganttChartModule.chartTimelineContainer.scrollLeft = this.element.scrollLeft, this.previousScroll.left = this.element.scrollLeft
        }, e.prototype.destroy = function() {
            this.removeEventListeners()
        }, e
    }(),
    $l = function() {
        function e(e) {
            this.isExpandCollapseFromChart = !1, this.isExpandAll = !1, this.isGanttElement = !1, this.parent = e, this.chartTimelineContainer = null, this.rangeViewContainer = ct("div", {
                className: "e-rangecontainer"
            }), this.addEventListener()
        }
        return e.prototype.addEventListener = function() {
                this.parent.on("renderPanels", this.renderChartContainer, this), this.parent.on("recordsUpdated", this.renderChartElements, this), this.parent.on("dataReady", this.renderInitialContents, this), this.parent.on("tree-grid-created", this.renderChartContents, this), this.parent.on("destroy", this.destroy, this)
            }, e.prototype.renderChartContents = function() {
                this.parent.notify("refreshDayMarkers", {}), this.wireEvents()
            }, e.prototype.renderChartContainer = function() {
                this.chartElement = ct("div", {
                    id: this.parent.element.id + "GanttChart",
                    className: "e-gantt-chart"
                }), this.parent.chartPane.appendChild(this.chartElement), this.renderTimelineContainer(), this.renderBodyContainers()
            }, e.prototype.renderInitialContents = function() {
                this.parent.timelineModule.createTimelineSeries()
            }, e.prototype.renderOverAllocationContainer = function() {
                for (var e = 0; e < this.parent.flatData.length; e++) {
                    var t = this.parent.flatData[e];
                    t.childRecords.length > 0 && this.parent.dataOperation.updateOverlappingValues(t)
                }
                var i = this.parent.element.querySelector(".e-rangecontainer");
                i && (i.innerHTML = ""), 0 === this.parent.treeGrid.grid.filterSettings.columns.length && this.renderRangeContainer(this.parent.flatData)
            }, e.prototype.renderChartElements = function() {
                this.parent.chartRowsModule.renderChartRows(), this.parent.connectorLineModule.renderConnectorLines(this.parent.updatedConnectorLineCollection), "ResourceView" === this.parent.viewType && this.parent.showOverAllocation && this.renderOverAllocationContainer(), this.updateWidthAndHeight(), this.parent.notify("selectRowByIndex", {})
            }, e.prototype.renderRangeContainer = function(e) {
                var t, i, n, r = e.length;
                if (0 === this.parent.treeGrid.grid.filterSettings.columns.length)
                    for (t = 0; t < r; t++)(n = (i = e[t]).ganttProperties.workTimelineRanges) && this.renderRange(n, i)
            }, e.prototype.getTopValue = function(e) {
                var t = this.parent.getExpandedRecords(this.parent.currentViewData).indexOf(e);
                return e.expanded ? (t + 1) * this.parent.rowHeight : t * this.parent.rowHeight
            }, e.prototype.getRangeHeight = function(e) {
                return !e.expanded && e.hasChildRecords ? this.parent.rowHeight - Math.floor(this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight) : e.childRecords.length * this.parent.rowHeight - Math.floor(this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight)
            }, e.prototype.renderRange = function(e, t) {
                var i = this.getTopValue(t),
                    n = this.rangeViewContainer.querySelector(".rangeContainer" + t.ganttProperties.rowUniqueID);
                n && n.remove();
                var r = ct("div", {
                    className: "rangeContainer" + t.ganttProperties.rowUniqueID,
                    styles: "top:" + i + "px; position: absolute;"
                });
                if (0 !== t.level || t.expanded || !g(t.parentItem) || this.parent.enableMultiTaskbar) {
                    for (var o = 0; o < e.length; o++) {
                        var s = this.getRangeHeight(t),
                            a = ct("div", {
                                className: "e-rg-rangdiv e-leftarc",
                                styles: "left:" + e[o].left + "px;\n                top: " + Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight) / 2) + "px;\n                height: " + (s + 1) + "px; border-right: 0px"
                            }),
                            l = ct("div", {
                                className: "e-rg-rangdiv e-rightarc",
                                styles: "left:" + (e[o].left + e[o].width - 5) + "px;\n                top: " + Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight) / 2) + "px; height: " + (s + 1) + "px;\n                border-left: 0px"
                            });
                        r.appendChild(a), r.appendChild(l), this.rangeViewContainer.appendChild(r)
                    }
                    this.parent.ganttChartModule.chartBodyContent.appendChild(this.rangeViewContainer)
                }
            }, e.prototype.renderTimelineContainer = function() {
                this.chartTimelineContainer = ct("div", {
                    className: "e-timeline-header-container"
                }), this.chartElement.appendChild(this.chartTimelineContainer)
            }, e.prototype.renderBodyContainers = function() {
                this.chartBodyContainer = ct("div", {
                    className: "e-chart-root-container"
                }), this.chartElement.appendChild(this.chartBodyContainer), this.scrollElement = ct("div", {
                    className: "e-chart-scroll-container e-content",
                    styles: "position:relative;"
                }), this.chartBodyContainer.appendChild(this.scrollElement), this.chartBodyContent = ct("div", {
                    className: "e-chart-rows-container",
                    styles: "position:relative; overflow: hidden;"
                }), this.scrollElement.appendChild(this.chartBodyContent), this.scrollObject = new Zl(this.parent);
                var e = 0;
                g(this.parent.toolbarModule) || g(this.parent.toolbarModule.element) || (e = this.parent.toolbarModule.element.offsetHeight),




this.scrollObject.setHeight(this.parent.ganttHeight - this.chartTimelineContainer.offsetHeight - e)
}, e.prototype.updateWidthAndHeight = function() {
    var e = S() ? 39 : 36,
        t = 0 === this.parent.contentHeight ? e : this.parent.contentHeight;
    this.chartBodyContent.style.height = C(t), this.chartBodyContent.style.width = C(this.parent.timelineModule.totalTimelineWidth), this.parent.notify("updateHeight", {}), this.parent.updateGridLineContainerHeight(), this.updateLastRowBottomWidth()
}, e.prototype.updateLastRowBottomWidth = function() {
    if (this.parent.currentViewData.length > 0 && "auto" !== this.parent.height) {
        var e = this.parent.getExpandedRecords(this.parent.currentViewData),
            t = e[e.length - 1],
            i = this.parent.currentViewData.indexOf(t),
            n = this.parent.getRowByIndex(i),
            r = this.parent.chartRowsModule.ganttChartTableBody;
        r.querySelectorAll(".e-chart-row-cell.e-chart-row-border.e-lastrow") && gt(r.querySelectorAll(".e-chart-row-cell.e-chart-row-border.e-lastrow"), "e-lastrow"), this.chartBodyContent.clientHeight < this.chartBodyContainer.clientHeight && n && (ut(n.querySelectorAll("td"), "e-lastrow"), this.chartBodyContent.style.height = C(this.parent.contentHeight + 1))
    }
}, e.prototype.removeEventListener = function() {
    this.parent.isDestroyed || (this.parent.off("renderPanels", this.renderChartContainer), this.parent.off("recordsUpdated", this.renderChartElements), this.parent.off("dataReady", this.renderInitialContents), this.parent.off("tree-grid-created", this.renderChartContents), this.parent.off("destroy", this.destroy))
}, e.prototype.ganttChartMouseDown = function(e) {
    3 !== e.which && (this.parent.notify("chartMouseDown", e), this.parent.element.tabIndex = 0)
}, e.prototype.ganttChartMouseClick = function(e) {
    this.parent.autoFocusTasks && this.scrollToTarget(e), this.parent.notify("chartMouseClick", e)
}, e.prototype.ganttChartMouseUp = function(e) {
    this.parent.notify("chartMouseUp", e)
}, e.prototype.scrollToTarget = function(e) {
    var t = Tt(e.target, "tr");
    if (t && this.parent.element.contains(t) && (this.parent.element.querySelectorAll(".e-chart-rows-container")[0].contains(e.target) || this.parent.element.querySelectorAll(".e-gridcontent")[0].contains(e.target)) && this.parent.currentViewData.length > 0) {
        var i = a("rowIndex", Tt(e.target, "tr")),
            n = this.parent.currentViewData[i].ganttProperties.startDate;
        if (!g(n)) {
            var r = this.parent.dataOperation.getTaskLeft(n, !1);
            this.parent.autoFocusTasks && this.updateScrollLeft(r)
        }
    }
}, e.prototype.updateScrollLeft = function(e) {
    e = e - 50 > 0 ? e - 50 : 0, e = this.scrollElement.scrollWidth <= e ? this.scrollElement.scrollWidth : e, (this.scrollElement.offsetWidth + this.parent.ganttChartModule.scrollElement.scrollLeft < e || this.scrollElement.scrollLeft > e) && this.scrollObject.setScrollLeft(e)
}, e.prototype.mouseUp = function(e) {
    this.isGanttElement || this.parent.notify("chartMouseUp", e), this.isGanttElement = !1
}, e.prototype.documentMouseUp = function(e) {
    if (this.isGanttElement = !0, this.parent.allowRowDragAndDrop) {
        var t = this.parent.element.querySelector(".e-ganttdrag");
        t && t.remove()
    }
    if (!this.parent.isDestroyed && 3 !== e.which) {
        var i = !1;
        if (this.parent.editSettings.allowTaskbarEditing && a("editModule.taskbarEditModule.isMouseDragged", this.parent) && a("editModule.taskbarEditModule.taskBarEditAction", this.parent) && (i = !0), this.parent.notify("chartMouseUp", e), this.parent.showActiveElement && this.focusedElement && !e.target.classList.contains("e-split-bar") && (this.focusedElement.tabIndex = 0 === this.focusedElement.tabIndex ? -1 : this.focusedElement.tabIndex, gt([this.focusedElement], "e-active-container")), !i) {
            var n = e.target,
                r = e.target.classList.contains("e-taskbar-main-container") || Tt(e.target, ".e-taskbar-main-container");
            Tt(n, ".e-gantt-parent-taskbar") ? this.chartExpandCollapseRequest(e) : !r && this.parent.autoFocusTasks && this.scrollToTarget(e)
        }
        if (this.parent.editModule && this.parent.editModule.taskbarEditModule && this.parent.editModule.taskbarEditModule.removeFalseLine(!0), !g(this.parent.onTaskbarClick) && !i) {
            var o = Tt(n = e.target, ".e-gantt-parent-taskbar,.e-gantt-child-taskbar,.e-gantt-milestone");
            o && this.onTaskbarClick(e, n, o)
        }
    }
}, e.prototype.onTaskbarClick = function(e, t, i) {
    var n = a("rowIndex", Tt(t, "tr")),
        r = {
            data: this.getRecordByTarget(e),
            taskbarElement: i,
            rowIndex: n,
            target: t
        };
    this.parent.trigger("onTaskbarClick", r)
}, e.prototype.ganttChartLeave = function(e) {
    this.parent.notify("chartMouseLeave", e)
}, e.prototype.ganttChartMove = function(e) {
    this.parent.notify("chartMouseMove", e), !g(this.parent.taskFields.dependency) && this.parent.connectorLineEditModule && this.parent.connectorLineEditModule.updateConnectorLineEditElement(e)
}, e.prototype.contextClick = function(e) {
    this.parent.allowFiltering && this.parent.filterModule && this.parent.filterModule.closeFilterOnContextClick(e.srcElement)
}, e.prototype.mouseMoveHandler = function(e) {
    if (!g(this.parent.onMouseMove) && (this.parent.flatData.length || e.target.classList.contains("e-header-cell-label") || e.target.classList.contains("e-headercell"))) {
        var t = e.target,
            i = {
                originalEvent: e
            },
            n = Tt(t, ".e-chart-row-cell,.e-connector-line-container,.e-event-markers,.e-header-cell-label,.e-rowcell,.e-headercell,.e-indicator-span");
        if (n) {
            var r, o = void 0,
                s = Tt(t, ".e-rowcell,.e-chart-row-cell"),
                l = Tt(t, ".e-rowcell,.e-headercell");
            if (s && (o = this.parent.ganttChartModule.getRecordByTarget(e), i.data = o), l) {
                var h = a("cellIndex", l);
                i.column = this.parent.treeGrid.columns[h]
            }
            if (Tt(t, ".e-indicator-span")) {
                var p = 0,
                    d = o.ganttProperties.indicators;
                if (d.length > 1)
                    for (p = 0; p < d.length && d[p].name !== n.innerText.trim(); p++);
                i.indicator = d[p]
            }
            if (Tt(t, ".e-connector-line-container"))(r = {}).target = n, i.predecessor = this.parent.tooltipModule.getPredecessorTooltipData(r);
            if (Tt(t, ".e-event-markers"))(r = {}).target = n, i.eventMarkers = this.parent.tooltipModule.getMarkerTooltipData(r);
            t.classList.contains("e-header-cell-label") && (i.date = new Date(t.dataset.content))
        }
        this.parent.trigger("onMouseMove", i)
    }
}, e.prototype.doubleClickHandler = function(e) {
    this.parent.notify("chartDblClick", e);
    var t = e.target,
        i = Tt(t, "tr"),
        n = a("rowIndex", i),
        r = {
            row: i,
            rowData: this.parent.ganttChartModule.getRecordByTarget(e),
            rowIndex: n,
            target: t
        };
    this.recordDoubleClick(r)
}, e.prototype.recordDoubleClick = function(e) {
    this.parent.trigger("recordDoubleClick", e)
}, e.prototype.getRecordByTarget = function(e) {
    var t, i = Tt(e.target, "div.e-taskbar-main-container");
    if (g(i)) {
        if (i = Tt(e.target, "tr")) {
            var n = a("rowIndex", Tt(e.target, "tr"));
            t = this.parent.currentViewData[n]
        }
    } else {
        var r = i.getAttribute("rowUniqueId");
        t = this.parent.getRecordByID(r)
    }
    return t
}, e.prototype.getChartRows = function() {
    return document.getElementById(this.parent.element.id + "GanttTaskTableBody").querySelectorAll(".e-chart-row")
}, e.prototype.chartExpandCollapseRequest = function(e) {
    if (!this.parent.enableMultiTaskbar) {
        var t = e.target,
            i = Tt(t, ".e-gantt-parent-taskbar"),
            n = this.getRecordByTarget(e),
            r = Tt(t, "tr"),
            o = a("rowIndex", r),
            s = {
                data: n,
                gridRow: this.parent.treeGrid.getRows()[o],
                chartRow: r,
                cancel: !1
            };
        this.isExpandCollapseFromChart = !0, i.classList.contains("e-row-expand") ? this.collapseGanttRow(s) : i.classList.contains("e-row-collapse") && this.expandGanttRow(s)
    }
}, e.prototype.reRenderConnectorLines = function() {
    this.parent.connectorLineModule.dependencyViewContainer.innerHTML = "", this.parent.connectorLineIds = [], this.parent.updatedConnectorLineCollection = [], this.parent.predecessorModule.createConnectorLinesCollection(), this.parent.connectorLineModule.renderConnectorLines(this.parent.updatedConnectorLineCollection)
}, e.prototype.collapseGanttRow = function(e, t) {
    var i = this;
    t ? this.collapsedGanttRow(e) : this.parent.trigger("collapsing", e, (function(e) {
        i.isExpandCollapseFromChart && !a("cancel", e) && (S() && (l("chartRow", x(a("chartRow", e)), e), l("gridRow", x(a("gridRow", e)), e)), i.collapsedGanttRow(e)), i.isExpandCollapseFromChart = !1
    }))
}, e.prototype.collapsedGanttRow = function(e) {
    var t = a("data", e);
    this.isExpandCollapseFromChart ? (this.expandCollapseChartRows("collapse", a("chartRow", e), t, null), this.parent.treeGrid.collapseRow(a("gridRow", e), t), this.isExpandCollapseFromChart = !1) : this.expandCollapseChartRows("collapse", a("chartRow", e), t, null), "ResourceView" === this.parent.viewType && this.renderMultiTaskbar(t), this.parent.updateContentHeight(), this.updateWidthAndHeight(), this.reRenderConnectorLines(), a("chartRow", e).setAttribute("aria-expanded", "false"), this.parent.trigger("collapsed", e)
}, e.prototype.expandGanttRow = function(e, t) {
    var i = this;
    t ? this.expandedGanttRow(e) : this.parent.trigger("expanding", e, (function(e) {
        S() && (l("chartRow", x(a("chartRow", e)), e), l("gridRow", x(a("gridRow", e)), e)), i.isExpandCollapseFromChart && !a("cancel", e) && i.expandedGanttRow(e), i.isExpandCollapseFromChart = !1
    }))
}, e.prototype.expandedGanttRow = function(e) {
    var t = a("data", e);
    this.isExpandCollapseFromChart ? (this.expandCollapseChartRows("expand", a("chartRow", e), t, null), this.parent.treeGrid.expandRow(a("gridRow", e), t), this.isExpandCollapseFromChart = !1) : this.expandCollapseChartRows("expand", a("chartRow", e), t, null), "ResourceView" === this.parent.viewType && this.renderMultiTaskbar(t), this.parent.updateContentHeight(), this.updateWidthAndHeight(), this.reRenderConnectorLines(), a("chartRow", e).setAttribute("aria-expanded", "true"), this.parent.trigger("expanded", e)
}, e.prototype.renderMultiTaskbar = function(e) {
    this.parent.enableMultiTaskbar ? this.parent.chartRowsModule.refreshRecords([e], !0) : this.parent.showOverAllocation && this.parent.ganttChartModule.renderRangeContainer(this.parent.currentViewData)
}, e.prototype.expandCollapseChartRows = function(e, t, i, n) {
    var r;
    if ("expand" === e) {
        r = "table-row", n || (i.expanded = !0);
        for (var o = t.querySelectorAll(".e-row-collapse"), s = 0; s < o.length; s++) ut([o[s]], "e-row-expand"), gt([o[s]], "e-row-collapse")
    } else if ("collapse" === e) {
        r = "none", n || (i.expanded = !1);
        for (o = t.querySelectorAll(".e-row-expand"), s = 0; s < o.length; s++) ut([o[s]], "e-row-collapse"), gt([o[s]], "e-row-expand")
    }
    for (var a = i.childRecords, l = this.getChartRows(), h = [], p = 0; p < l.length; p++) l[p].classList.contains("gridrowtaskId" + i.ganttProperties.rowUniqueID + "level" + (i.level + 1)) && h.push(l[p]);
    for (p = 0; p < h.length; p++) h[p].style.display = r, a[p].childRecords && a[p].childRecords.length && ("collapse" === e || a[p].expanded || this.isExpandAll) && this.expandCollapseChartRows(e, h[p], a[p], !0)
}, e.prototype.expandCollapseAll = function(e) {
    "expand" === e ? (this.isExpandAll = !0, this.parent.treeGrid.expandAll()) : this.parent.treeGrid.collapseAll(), this.isExpandAll = !1, this.parent.element.querySelector(".e-treegrid").focus()
}, e.prototype.expandAtLevel = function(e) {
    this.parent.treeGrid.expandAtLevel(e)
}, e.prototype.collapseAtLevel = function(e) {
    this.parent.treeGrid.collapseAtLevel(e)
}, e.prototype.wireEvents = function() {
    var e = me.isPointer,
        t = me.touchStartEvent,
        i = me.touchEndEvent,
        n = me.touchMoveEvent,
        r = e ? "pointerleave" : "mouseleave";
    this.parent.editSettings.allowTaskbarEditing && (ye.add(this.parent.chartPane, t, this.ganttChartMouseDown, this), ye.add(this.parent.chartPane, r, this.ganttChartLeave, this), ye.add(this.parent.chartPane, n, this.ganttChartMove, this), this.parent.isAdaptive && (ye.add(this.parent.chartPane, Ir, this.ganttChartMouseClick, this), ye.add(this.parent.chartPane, i, this.ganttChartMouseUp, this))), this.parent.isAdaptive || (ye.add(this.parent.element, i, this.documentMouseUp, this), ye.add(document, i, this.mouseUp, this)), ye.add(this.parent.element, "mousemove", this.mouseMoveHandler, this), ye.add(document.body, "contextmenu", this.contextClick, this), ye.add(this.parent.chartRowsModule.ganttChartTableBody, "dblclick", this.doubleClickHandler, this)
}, e.prototype.unWireEvents = function() {
    var e = me.isPointer,
        t = me.touchStartEvent,
        i = me.touchEndEvent,
        n = me.touchMoveEvent,
        r = e ? "pointerleave" : "mouseleave";
    this.parent.editSettings.allowTaskbarEditing && (ye.remove(this.parent.chartRowsModule.ganttChartTableBody, t, this.ganttChartMouseDown), ye.remove(this.parent.chartPane, r, this.ganttChartLeave), ye.remove(this.parent.chartPane, n, this.ganttChartMove), this.parent.isAdaptive && (ye.remove(this.parent.chartPane, Ir, this.ganttChartMouseClick), ye.remove(this.parent.chartPane, i, this.ganttChartMouseUp))), this.parent.isAdaptive || (ye.remove(this.parent.element, i, this.documentMouseUp), ye.remove(document, i, this.mouseUp)), ye.remove(this.parent.element, "mousemove", this.mouseMoveHandler), ye.remove(document.body, "contextmenu", this.contextClick), ye.remove(this.parent.chartRowsModule.ganttChartTableBody, "dblclick", this.doubleClickHandler)
}, e.prototype.getRecordByTaskBar = function(e) {
    return this.parent.currentViewData[this.getIndexByTaskBar(e)]
}, e.prototype.onTabAction = function(e) {
    this.parent.treeGrid.grid.enableHeaderFocus = this.parent.enableHeaderFocus;
    var t = this.parent.editModule && this.parent.editModule.cellEditModule && this.parent.editModule.cellEditModule.isCellEdit;
    if (this.parent.showActiveElement || t) {
        var i = t ? e.target.closest(".e-rowcell") : e.target;
        (i.closest(".e-rowcell") || i.closest(".e-chart-row")) && this.parent.focusModule.setActiveElement(i), this.focusedRowIndex = i.closest(".e-rowcell") ? i.parentElement.rowIndex : i.closest(".e-chart-row") ? i.closest(".e-chart-row").rowIndex : -1;
        var n = "tab" === e.action,
            r = this.getNextElement(i, n);
        if ("noNextRow" !== r) {
            if ("string" != typeof r && ((i.classList.contains("e-rowcell") || i.closest(".e-chart-row-cell") || i.classList.contains("e-headercell")) && e.preventDefault(), (i.classList.contains("e-rowcell") && r && r.classList.contains("e-rowcell") || i.classList.contains("e-headercell")) && this.parent.treeGrid.grid.notify("key-pressed", e), !t && r)) {
                if (i.classList.contains("e-rowcell") ? this.manageFocus(i, "remove", !1) : this.manageFocus(i, "remove", !0), r.classList.contains("e-rowcell")) {
                    if (!i.classList.contains("e-rowcell")) {
                        this.parent.treeGrid.grid.notify("key-pressed", e);
                        var o = a("focusModule", this.parent.treeGrid.grid);
                        o.currentInfo.element = r, o.currentInfo.elementToFocus = r, o.content.matrix.current = [r.parentElement.rowIndex, r.cellIndex]
                    }
                    this.manageFocus(r, "add", !1)
                } else this.manageFocus(r, "add", !0);
                this.parent.focusModule.setActiveElement(r)
            }
        } else this.manageFocus(i, "remove", !0)
    }
}, e.prototype.getNextElement = function(e, t) {
    for (var i = t ? e.nextElementSibling : e.previousElementSibling; i && i.parentElement.classList.contains("e-row");) {
        if (!i.matches(".e-hide") && !i.matches(".e-rowdragdrop")) return i;
        i = t ? i.nextElementSibling : i.previousElementSibling
    }
    if (this.validateNextElement(i)) return i;
    var n = -1,
        r = null;
    if (e.classList.contains("e-rowcell"))
        if (n = e.parentElement.rowIndex, t) {
            if (r = this.parent.getRowByIndex(n), this.validateNextElement(r, "e-left-label-container")) return r.getElementsByClassName("e-left-label-container")[0];
            if (this.validateNextElement(r, "e-taskbar-main-container")) return r.getElementsByClassName("e-taskbar-main-container")[0];
            if (this.validateNextElement(r, "e-right-label-container")) return r.getElementsByClassName("e-right-label-container")[0]
        } else {
            if (r = this.getNextRowElement(n, t, !1), this.validateNextElement(r, "e-right-label-container")) return r.getElementsByClassName("e-right-label-container")[0];
            if (this.validateNextElement(r, "e-taskbar-main-container")) return r.getElementsByClassName("e-taskbar-main-container")[0];
            if (this.validateNextElement(r, "e-left-label-container")) return r.getElementsByClassName("e-left-label-container")[0]
        }
    else if (e.parentElement.classList.contains("e-chart-row-cell")) {
        var o = void 0;
        if (n = Tt(e, ".e-chart-row").rowIndex, !(r = t ? this.getNextRowElement(n, t, !0) : this.parent.treeGrid.grid.getRowByIndex(n))) return "noNextRow";
        for (o = t ? r.children[0] : r.children[r.children.length - 1]; o;) {
            if (!o.matches(".e-hide") && !o.matches(".e-rowdragdrop")) return o;
            o = t ? o.nextElementSibling : o.previousElementSibling
        }
    }
    return null
}, e.prototype.getNextRowElement = function(e, t, i) {
    var n = this.parent.getExpandedRecords(this.parent.currentViewData),
        r = this.parent.currentViewData[e],
        o = n.indexOf(r),
        s = t ? n[o + 1] : n[o - 1],
        a = this.parent.currentViewData.indexOf(s);
    return s ? i ? this.parent.treeGrid.grid.getRowByIndex(a) : this.parent.getRowByIndex(a) : null
}, e.prototype.validateNextElement = function(e, t) {
    if (e && e.classList.contains("e-rowcell")) return !0;
    if (e && t) {
        var i = e.getElementsByClassName(t)[0];
        return !(!i || !i.hasChildNodes())
    }
    return !!e && !(g(e) || !e.hasChildNodes())
}, e.prototype.manageFocus = function(e, t, i) {
    if (i) {
        var n = null;
        if (e.classList.contains("e-left-label-container") || e.classList.contains("e-right-label-container")) n = e.getElementsByTagName("span")[0];
        else if (e.classList.contains("e-taskbar-main-container")) {
            var r = Tt(e, ".e-chart-row").rowIndex,
                o = this.parent.currentViewData[r],
                s = o.hasChildRecords ? o.ganttProperties.isAutoSchedule ? "e-gantt-parent-taskbar" : "e-manualparent-main-container" : o.ganttProperties.isMilestone ? "e-gantt-milestone" : "e-gantt-child-taskbar";
            n = e.getElementsByClassName(s)[0]
        }
        "add" !== t || g(n) ? g(n) || (gt([n], "e-active-container"), e.setAttribute("tabIndex", "-1"), e.blur()) : (e.setAttribute("tabIndex", "0"), ut([n], "e-active-container"), e.focus(), this.focusedElement = n)
    } else "add" === t ? (e.setAttribute("tabIndex", "0"), ut([e], ["e-focused", "e-focus"]), e.focus()) : (e.setAttribute("tabIndex", "-1"), gt([e], ["e-focused", "e-focus"]), e.blur())
}, e.prototype.getIndexByTaskBar = function(e) {
    var t, i;
    if (g(t = e.classList.contains("e-taskbar-main-container") ? e : Tt(e, "div.e-taskbar-main-container"))) t = Tt(e, "tr.e-chart-row"), i = [].slice.call(this.parent.chartRowsModule.ganttChartTableBody.childNodes).indexOf(t);
    else {
        var n = t.getAttribute("rowUniqueId"),
            r = this.parent.getRecordByID(n);
        i = this.parent.currentViewData.indexOf(r)
    }
    return i
}, e.prototype.destroy = function() {
    this.removeEventListener(), this.unWireEvents(), this.scrollObject.destroy(), this.scrollObject = null
}, e
}(), eh = function() {
    return (eh = Object.assign || function(e) {
        for (var t, i = 1, n = arguments.length; i < n; i++)
            for (var r in t = arguments[i]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
        return e
    }).apply(this, arguments)
}, th = function() {
    function e(e) {
        this.isZoomIn = !1, this.isZooming = !1, this.isZoomToFit = !1, this.topTierCollection = [], this.bottomTierCollection = [], this.parent = e, this.initProperties()
    }
    return e.prototype.initProperties = function() {
        this.timelineStartDate = null, this.timelineEndDate = null, this.totalTimelineWidth = 0, this.customTimelineSettings = null, this.parent.isTimelineRoundOff = !this.isZoomToFit && !!g(this.parent.projectStartDate)
    }, e.prototype.validateTimelineProp = function() {
        this.roundOffDays(), this.processTimelineProperty(), this.timelineWidthCalculation()
    }, e.prototype.refreshTimeline = function() {
        this.initProperties(), this.processTimelineUnit(), this.parent.dataOperation.calculateProjectDates(), this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff)
    }, e.prototype.refreshTimelineByTimeSpan = function() {
        this.validateTimelineProp(), this.parent.ganttChartModule.chartTimelineContainer.innerHTML = "", this.createTimelineSeries()
    }, e.prototype.updateChartByNewTimeline = function() {
        this.parent.chartRowsModule.refreshChartByTimeline(), this.parent.notify("refreshDayMarkers", {})
    }, e.prototype.processZooming = function(e) {
        var t;
        this.isZoomToFit = !1, g(this.parent.zoomingProjectStartDate) || (this.parent.cloneProjectStartDate = this.parent.cloneProjectStartDate.getTime() < this.parent.zoomingProjectStartDate.getTime() ? this.parent.cloneProjectStartDate : this.parent.zoomingProjectStartDate, this.parent.cloneProjectEndDate = this.parent.cloneProjectEndDate.getTime() > this.parent.zoomingProjectEndDate.getTime() ? this.parent.cloneProjectEndDate : this.parent.zoomingProjectEndDate), this.parent.zoomingProjectStartDate = null, this.parent.zoomingProjectEndDate = null;
        var i = this.checkCurrentZoomingLevel();
        this.isZoomIn = e, this.isZooming = !0, t = e ? i + 1 : i - 1, this.parent.toolbarModule && (e ? t === this.parent.zoomingLevels[this.parent.zoomingLevels.length - 1].level ? this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomin"], !1) : this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomout"], !0) : t === this.parent.zoomingLevels[0].level ? this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomout"], !1) : this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomin"], !0));
        var n = this.parent.zoomingLevels[t],
            r = {
                requestType: e ? "beforeZoomIn" : "beforeZoomOut",
                timeline: n,
                cancel: !1
            };
        this.parent.trigger("actionBegin", r), r.cancel || (n = r.timeline, this.changeTimelineSettings(n))
    }, e.prototype.changeTimelineSettings = function(e) {
        var t = this,
            i = this.isSingleTier ? "None" === this.customTimelineSettings.topTier.unit ? "topTier" : "bottomTier" : null;
        if (Object.keys(this.customTimelineSettings).forEach((function(n) {
                if (n !== i) t.customTimelineSettings[n] = "object" != typeof e[n] || g(e[n]) ? e[n] : eh({}, e[n]);
                else {
                    var r = "topTier" === n ? "bottomTier" : "topTier";
                    t.customTimelineSettings[r] = eh({}, e.bottomTier)
                }
            })), this.parent.isTimelineRoundOff = !this.isZoomToFit && !!g(this.parent.projectStartDate), this.processTimelineUnit(), this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff), this.isZooming || this.isZoomToFit) {
            var n = {
                requestType: this.isZoomIn ? "AfterZoomIn" : this.isZoomToFit ? "AfterZoomToProject" : "AfterZoomOut"
            };
            this.parent.trigger("actionComplete", n)
        }
    }, e.prototype.processZoomToFit = function() {
        this.isZoomToFit = !0, this.isZooming = !1, this.parent.zoomingProjectStartDate || (this.parent.zoomingProjectStartDate = this.parent.cloneProjectStartDate, this.parent.zoomingProjectEndDate = this.parent.cloneProjectEndDate), this.parent.dataOperation.calculateProjectDates();
        var e, t, i, n = (this.parent.cloneProjectEndDate.getTime() - this.parent.cloneProjectStartDate.getTime()) / 864e5,
            r = this.parent.ganttChartModule.chartElement.offsetWidth,
            o = r / n,
            s = this.parent.zoomingLevels.slice().sort((function(e, t) {
                return e.perDayWidth < t.perDayWidth ? 1 : -1
            }));
        if (0 !== o) {
            for (var a = 0; a < s.length; a++) {
                if (t = s[a], a === s.length - 1) {
                    e = s[a];
                    break
                }
                if (i = s[a + 1], o >= t.perDayWidth) {
                    e = s[a];
                    break
                }
                if (o < t.perDayWidth && o > i.perDayWidth) {
                    e = s[a + 1];
                    break
                }
            }
            var l = u({}, {}, e, !0);
            this.roundOffDateToZoom(this.parent.cloneProjectStartDate, !0, o, l.bottomTier.unit), this.roundOffDateToZoom(this.parent.cloneProjectEndDate, !1, o, l.bottomTier.unit);
            var h = this.calculateNumberOfTimelineCells(l);
            l.timelineUnitSize = Math.abs(r - 25) / h;
            var p = {
                requestType: "beforeZoomToProject",
                timeline: l
            };
            this.parent.toolbarModule && this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomin", this.parent.controlId + "_zoomout"], !0), this.parent.trigger("actionBegin", p), this.changeTimelineSettings(l)
        }
    }, e.prototype.roundOffDateToZoom = function(e, t, i, n) {
        var r = ("Month" === n || "Year" === n ? 60 : 20) / i * 864e5;
        t ? e.setTime(e.getTime() - r) : e.setTime(e.getTime() + r), "Hour" === n ? e.setMinutes(t ? -120 : 120) : "Minutes" === n ? e.setSeconds(t ? -120 : 120) : e.setHours(t ? -48 : 48, 0, 0, 0)
    }, e.prototype.calculateNumberOfTimelineCells = function(e) {
        var t = Math.abs((this.parent.cloneProjectEndDate.getTime() - this.parent.cloneProjectStartDate.getTime()) / 864e5),
            i = e.bottomTier.count,
            n = e.bottomTier.unit;
        return "Day" === n ? t / i : "Week" === n ? t / i / 7 : "Month" === n ? t / i / 28 : "Year" === n ? t / i / 336 : "Hour" === n ? t * (24 / i) : t * (1440 / i)
    }, e.prototype.processTimelineUnit = function() {
        var e = ["Year", "Month", "Week", "Day", "Hour", "Minutes"];
        this.customTimelineSettings = this.customTimelineSettings ? this.customTimelineSettings : this.extendFunction(this.parent.timelineSettings, ["timelineViewMode", "timelineUnitSize", "weekStartDay", "weekendBackground"], {
            topTier: ["unit", "format", "count", "formatter"],
            bottomTier: ["unit", "format", "count", "formatter"]
        }), -1 === e.indexOf(this.customTimelineSettings.topTier.unit) && -1 === e.indexOf(this.customTimelineSettings.bottomTier.unit) ? (this.customTimelineSettings.topTier.unit = -1 !== e.indexOf(this.customTimelineSettings.timelineViewMode) ? this.customTimelineSettings.timelineViewMode : "Week", this.customTimelineSettings.bottomTier.unit = 5 !== e.indexOf(this.customTimelineSettings.topTier.unit) ? e[e.indexOf(this.customTimelineSettings.topTier.unit) + 1] : "None") : -1 !== e.indexOf(this.customTimelineSettings.topTier.unit) && -1 !== e.indexOf(this.customTimelineSettings.bottomTier.unit) && e.indexOf(this.customTimelineSettings.topTier.unit) > e.indexOf(this.customTimelineSettings.bottomTier.unit) ? this.customTimelineSettings.bottomTier.unit = this.customTimelineSettings.topTier.unit : (this.customTimelineSettings.topTier.unit = -1 === e.indexOf(this.customTimelineSettings.topTier.unit) ? "None" : this.customTimelineSettings.topTier.unit, this.customTimelineSettings.bottomTier.unit = -1 === e.indexOf(this.customTimelineSettings.bottomTier.unit) ? "None" : this.customTimelineSettings.bottomTier.unit), this.topTier = this.customTimelineSettings.topTier.unit, this.bottomTier = this.customTimelineSettings.bottomTier.unit, this.previousIsSingleTier = this.isSingleTier, this.isSingleTier = "None" === this.topTier || "None" === this.bottomTier
    }, e.prototype.processTimelineProperty = function() {
        this.customTimelineSettings.topTier.count = "None" === this.topTier ? 1 : this.validateCount(this.customTimelineSettings.topTier.unit, this.customTimelineSettings.topTier.count, "topTier"), this.customTimelineSettings.bottomTier.count = "None" === this.customTimelineSettings.bottomTier.unit ? 1 : this.validateCount(this.customTimelineSettings.bottomTier.unit, this.customTimelineSettings.bottomTier.count, "bottomTier"), this.customTimelineSettings.bottomTier.format = this.validateFormat(this.customTimelineSettings.bottomTier.unit, this.customTimelineSettings.bottomTier.format), this.customTimelineSettings.topTier.format = this.validateFormat(this.topTier, this.customTimelineSettings.topTier.format), this.customTimelineSettings.weekStartDay = this.customTimelineSettings.weekStartDay >= 0 && this.customTimelineSettings.weekStartDay <= 6 ? this.customTimelineSettings.weekStartDay : 0, this.checkCurrentZoomingLevel()
    }, e.prototype.calculateZoomingLevelsPerDayWidth = function() {
        for (var e = this.parent.zoomingLevels, t = 0; t < e.length; t++) {
            var i = this.getPerDayWidth(e[t].timelineUnitSize, e[t].bottomTier.count, e[t].bottomTier.unit);
            e[t].perDayWidth = i
        }
    }, e.prototype.checkCurrentZoomingLevel = function() {
        var e = "None" !== this.customTimelineSettings.bottomTier.unit ? this.customTimelineSettings.bottomTier.count : this.customTimelineSettings.topTier.count,
            t = "None" !== this.customTimelineSettings.bottomTier.unit ? this.customTimelineSettings.bottomTier.unit : this.customTimelineSettings.topTier.unit,
            i = this.getCurrentZoomingLevel(t, e);
        return this.parent.toolbarModule && (i === this.parent.zoomingLevels[this.parent.zoomingLevels.length - 1].level ? this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomin"], !1) : i === this.parent.zoomingLevels[0].level && this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomout"], !1)), this.parent.currentZoomingLevel = this.parent.zoomingLevels[i], i
    }, e.prototype.getCurrentZoomingLevel = function(e, t) {
        var i, n, r, o, s;
        this.parent.zoomingLevels.length || (this.parent.zoomingLevels = this.parent.getZoomingLevels());
        var a = this.parent.zoomingLevels.filter((function(t) {
            return t.bottomTier.unit === e
        }));
        if (0 === a.length) {
            var l = this.getClosestUnit(e, "", !1);
            a = this.parent.zoomingLevels.filter((function(e) {
                return e.bottomTier.unit === l
            }))
        }
        for (var h = a.sort((function(e, t) {
                return e.bottomTier.count < t.bottomTier.count ? 1 : -1
            })), p = 0; p < h.length; p++) {
            if (s = h[p], p === h.length - 1) {
                i = h[p].level;
                break
            }
            if (o = h[p + 1], t >= s.bottomTier.count) {
                n = h[p], i = (r = h.filter((function(e) {
                    return e.bottomTier.count === n.bottomTier.count
                }))).length > 1 ? this.checkCollectionsWidth(r) : r[0].level;
                break
            }
            if (t < s.bottomTier.count && t > o.bottomTier.count) {
                n = h[p + 1], i = (r = h.filter((function(e) {
                    return e.bottomTier.count === n.bottomTier.count
                }))).length > 1 ? this.checkCollectionsWidth(r) : r[0].level;
                break
            }
        }
        return i
    }, e.prototype.getClosestUnit = function(e, t, i) {
        var n = ["Year", "Month", "Week", "Day", "Hour", "Minutes"],
            r = n.indexOf(e);
        return 0 === r && (i = !0), e = this.isZoomIn || i ? n[r + 1] : n[r - 1], 0 === this.parent.zoomingLevels.filter((function(t) {
            return t.bottomTier.unit === e
        })).length ? ("Year" === e && (i = !0), t = e, this.getClosestUnit(e, t, i)) : e
    }, e.prototype.checkCollectionsWidth = function(e) {
        for (var t, i, n, r = e, o = this.customTimelineSettings.timelineUnitSize, s = r.sort((function(e, t) {
                return e.timelineUnitSize < t.timelineUnitSize ? 1 : -1
            })), a = 0; a < s.length; a++) {
            if (n = s[a], a === s.length - 1) {
                t = s[a].level;
                break
            }
            if (i = s[a + 1], o >= n.timelineUnitSize) {
                t = s[a].level;
                break
            }
            if (o < n.timelineUnitSize && o > i.timelineUnitSize) {
                t = s[a + 1].level;
                break
            }
        }
        return t
    }, e.prototype.updateTimelineHeaderHeight = function() {
        if (this.parent.timelineModule.isSingleTier ? (ut([this.parent.ganttChartModule.chartTimelineContainer], Kl), this.parent.treeGrid.element && (ut(this.parent.treeGrid.element.querySelectorAll(".e-headercell"), Kl), ut(this.parent.treeGrid.element.querySelectorAll(".e-columnheader"), Kl))) : (gt([this.parent.ganttChartModule.chartTimelineContainer], Kl), this.parent.treeGrid.element && (gt(this.parent.treeGrid.element.querySelectorAll(".e-headercell"), Kl), gt(this.parent.treeGrid.element.querySelectorAll(".e-columnheader"), Kl))), this.previousIsSingleTier !== this.isSingleTier) {
            var e = 0;
            g(this.parent.toolbarModule) || g(this.parent.toolbarModule.element) || (e = this.parent.toolbarModule.element.offsetHeight), this.parent.ganttChartModule.scrollObject.setHeight(this.parent.ganttHeight - this.parent.ganttChartModule.chartTimelineContainer.offsetHeight - e), this.parent.treeGrid.height = this.parent.ganttHeight - e - this.parent.ganttChartModule.chartTimelineContainer.offsetHeight
        }
    }, e.prototype.createTimelineSeries = function() {
        var e, t, i, n, r, o = this.isSingleTier ? 1 : 2,
            s = "None" === this.topTier ? "bottomTier" : "topTier";
        this.updateTimelineHeaderHeight(), this.topTierCollection = [], this.bottomTierCollection = [];
        for (var a = 0; a < o; a++) {
            n = ct("table", {
                className: "e-timeline-header-table-container",
                styles: "display: block;"
            }), r = ct("thead", {
                className: "e-timeline-header-table-body",
                styles: "display:block; border-collapse:collapse"
            }), e = ct("tr", {
                innerHTML: this.createTimelineTemplate(s)
            }), t = ct("th"), i = ct("div", {
                styles: "width: 20px"
            }), t.appendChild(i), e.appendChild(t), r.appendChild(e), n.appendChild(r), this.parent.ganttChartModule.chartTimelineContainer.appendChild(n), s = "bottomTier", e = null
        }
    }, e.prototype.validateCount = function(e, t, i) {
        var n, r = !g(t) && parseInt(t.toString(), 10) > 0 ? parseInt(t.toString(), 10) : 1,
            o = Math.abs(this.timelineRoundOffEndDate.getTime() - this.timelineStartDate.getTime());
        switch (e) {
            case "Year":
                r = r <= (n = Math.round(o / 864e5 / 336)) ? r : n > 0 ? n : 1, "None" !== this.topTier && "bottomTier" === i && (r = this.validateBottomTierCount(e, r));
                break;
            case "Month":
                r = r <= (n = Math.round(o / 864e5 / 28)) ? r : n > 0 ? n : 1, "None" !== this.topTier && "bottomTier" === i && (r = this.validateBottomTierCount(e, r));
                break;
            case "Week":
                r = r <= (n = Math.round(o / 864e5 / 7)) ? r : n > 0 ? n : 1, "None" !== this.topTier && "bottomTier" === i && (r = this.validateBottomTierCount(e, r));
                break;
            case "Day":
                r = r <= (n = Math.round(o / 864e5)) ? r : n > 0 ? n : 1, "None" !== this.topTier && "bottomTier" === i && (r = this.validateBottomTierCount(e, r));
                break;
            case "Hour":
                r = r <= (n = Math.round(o / 36e5)) ? r : n > 0 ? n : 1, "None" !== this.topTier && "bottomTier" === i && (r = this.validateBottomTierCount(e, r));
                break;
            case "Minutes":
                r = r <= (n = Math.round(o / 6e4)) ? r : n > 0 ? n : 1, "None" !== this.topTier && "bottomTier" === i && (r = this.validateBottomTierCount(e, r))
        }
        return t !== r && this.isZooming && this.parent.toolbarModule && ("bottomTier" === i || this.isSingleTier) && (this.isZoomIn ? this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomin"], !1) : this.parent.toolbarModule.enableItems([this.parent.controlId + "_zoomout"], !1)), r
    }, e.prototype.validateBottomTierCount = function(e, t) {
        var i;
        switch (e) {
            case "Year":
                i = t <= this.customTimelineSettings.topTier.count ? t : this.customTimelineSettings.topTier.count;
                break;
            case "Month":
                i = "Year" === this.topTier ? t <= 12 * this.customTimelineSettings.topTier.count ? t : 12 * this.customTimelineSettings.topTier.count : t <= this.customTimelineSettings.topTier.count ? t : this.customTimelineSettings.topTier.count;
                break;
            case "Week":
                i = "Year" === this.topTier ? t <= 48 * this.customTimelineSettings.topTier.count ? t : 48 * this.customTimelineSettings.topTier.count : "Month" === this.topTier ? t <= 4 * this.customTimelineSettings.topTier.count ? t : 4 * this.customTimelineSettings.topTier.count : t <= this.customTimelineSettings.topTier.count ? t : this.customTimelineSettings.topTier.count;
                break;
            case "Day":
                i = "Year" === this.topTier ? t <= 336 * this.customTimelineSettings.topTier.count ? t : 336 * this.customTimelineSettings.topTier.count : "Month" === this.topTier ? t <= 28 * this.customTimelineSettings.topTier.count ? t : 28 * this.customTimelineSettings.topTier.count : "Week" === this.topTier ? t <= 7 * this.customTimelineSettings.topTier.count ? t : 7 * this.customTimelineSettings.topTier.count : t <= this.customTimelineSettings.topTier.count ? t : this.customTimelineSettings.topTier.count;
                break;
            case "Hour":
                i = "Year" === this.topTier ? t <= 8064 * this.customTimelineSettings.topTier.count ? t : 8064 * this.customTimelineSettings.topTier.count : "Month" === this.topTier ? t <= 672 * this.customTimelineSettings.topTier.count ? t : 672 * this.customTimelineSettings.topTier.count : "Week" === this.topTier ? t <= 7 * this.customTimelineSettings.topTier.count * 24 ? t : 7 * this.customTimelineSettings.topTier.count * 24 : "Day" === this.topTier ? t <= 24 * this.customTimelineSettings.topTier.count ? t : 24 * this.customTimelineSettings.topTier.count : t <= this.customTimelineSettings.topTier.count ? t : this.customTimelineSettings.topTier.count;
                break;
            case "Minutes":
                i = "Year" === this.topTier ? t <= 483840 * this.customTimelineSettings.topTier.count ? t : 483840 * this.customTimelineSettings.topTier.count : "Month" === this.topTier ? t <= 40320 * this.customTimelineSettings.topTier.count ? t : 40320 * this.customTimelineSettings.topTier.count : "Week" === this.topTier ? t <= 7 * this.customTimelineSettings.topTier.count * 24 * 60 ? t : 7 * this.customTimelineSettings.topTier.count * 24 * 60 : "Day" === this.topTier ? t <= 24 * this.customTimelineSettings.topTier.count * 60 ? t : 24 * this.customTimelineSettings.topTier.count * 60 : "Hour" === this.topTier ? t <= 60 * this.customTimelineSettings.topTier.count ? t : 60 * this.customTimelineSettings.topTier.count : t <= this.customTimelineSettings.topTier.count ? t : this.customTimelineSettings.topTier.count
        }
        return i
    }, e.prototype.validateFormat = function(e, t) {
        var i;
        switch (e) {
            case "Week":
                i = t || "MMM dd, yyyy";
                break;
            case "Day":
            case "None":
                i = t || "";
                break;
            case "Hour":
                i = t || "H";
                break;
            case "Month":
                i = t || "MMM yyyy";
                break;
            case "Year":
                i = t || "yyyy";
                break;
            case "Minutes":
                i = t || "m"
        }
        return i
    }, e.prototype.extendFunction = function(e, t, i) {
        for (var n = this, r = {}, o = 0; o < t.length; o++) r[t[o]] = e[t[o]];
        return i && Object.keys(i).forEach((function(t) {
            r[t] = n.extendFunction(e[t], i[t], null)
        })), r
    }, e.prototype.formatDateHeader = function(e, t) {
        var i, n = new Date(t.getTime());
        switch (e) {
            case "":
                i = this.parent.globalize.formatDate(n, {
                    format: "E"
                }), i = "zh" === this.parent.locale ? i.slice(1) : i.slice(0, 1);
                break;
            default:
                i = this.parent.globalize.formatDate(n, {
                    format: e
                })
        }
        return i
    }, e.prototype.customFormat = function(e, t, i, n, r) {
        return (r = "string" == typeof r ? a(r, window) : r)(e, t, i, n)
    }, e.prototype.createTimelineTemplate = function(e) {
        var t, i, n = this.parent,
            r = "",
            o = "",
            s = "topTier" === e ? n.timelineModule.customTimelineSettings.topTier.unit : n.timelineModule.customTimelineSettings.bottomTier.unit,
            a = "topTier" === e ? n.timelineModule.customTimelineSettings.topTier.count : n.timelineModule.customTimelineSettings.bottomTier.count,
            l = new Date(this.parent.timelineModule.timelineStartDate.toString()),
            h = new Date(this.timelineRoundOffEndDate.toString()),
            p = [];
        do {
            var d = {};
            d.startDate = new Date(l.getTime()), o = this.getHeaterTemplateString(new Date(l.toString()), s, e, !1, a, d), p.push(new Date(l.toString())), t = this.getIncrement(l, a, s), i = l.getTime() + t, l.setTime(i), l >= h && (o = this.getHeaterTemplateString(p[p.length - 1], s, e, !0, a, d)), r += o, o = "";
            var c = "topTier" === e ? this.topTierCollection : this.bottomTierCollection;
            d.endDate = new Date(l.getTime()), c.push(d)
        } while (!(l >= h));
        return r
    }, e.prototype.getTimelineRoundOffEndDate = function(e) {
        var t = "None" === this.topTier ? this.bottomTier : this.topTier,
            i = new Date(e.toString());
        return this.parent.isTimelineRoundOff && ("Hour" === t ? i.setMinutes(60) : "Minutes" === t ? i.setSeconds(60) : i.setHours(24, 0, 0, 0)), i
    }, e.prototype.getIncrement = function(e, t, i) {
        var n, r = new Date(e.getTime()),
            o = new Date(e.getTime());
        switch (i) {
            case "Year":
                r = e, n = (o = new Date(e.getFullYear() + (t - 1), 11, 31)).getTime() - r.getTime() + 864e5;
                break;
            case "Month":
                r = e, n = (o = new Date(e.getFullYear(), e.getMonth() + t, 1)).getTime() - r.getTime();
                break;
            case "Week":
                var s = this.parent.timelineModule.customTimelineSettings.weekStartDay,
                    a = e.getDay() < s ? s - e.getDay() : 6 - e.getDay() + s;
                t = a > 0 ? t - 1 : 0, o.setHours(24, 0, 0, 0), a = e.getDay() < s && a > 0 ? a - 1 : a, o.setDate(o.getDate() + (a + 7 * t)), n = o.getTime() - r.getTime();
                break;
            case "Day":
                o.setHours(24, 0, 0, 0), n = o.getTime() - r.getTime() + 864e5 * (t - 1);
                break;
            case "Hour":
                o.setMinutes(60), o.setSeconds(0), n = o.getTime() - r.getTime() + 36e5 * (t - 1);
                break;
            case "Minutes":
                o.setSeconds(60), n = o.getTime() - r.getTime() + 6e4 * (t - 1)
        }
        return n
    }, e.prototype.isWeekendHeaderCell = function(e, t, i) {
        return "Day" === e && 1 === this.customTimelineSettings[t].count && -1 !== this.parent.nonWorkingDayIndex.indexOf(i.getDay())
    }, e.prototype.getHeaterTemplateString = function(e, t, i, n, r, o) {
        var s, a, l, h = "",
            p = "",
            d = "topTier" === i ? this.parent.timelineModule.customTimelineSettings.topTier.format : this.parent.timelineModule.customTimelineSettings.bottomTier.format,
            c = "topTier" === i ? this.parent.timelineModule.customTimelineSettings.topTier.formatter : this.parent.timelineModule.customTimelineSettings.bottomTier.formatter,
            u = g(c) ? this.parent.globalize.formatDate(e, {
                format: this.parent.getDateFormat()
            }) : this.customFormat(e, d, i, t, c);
        a = s = this.getIncrement(e, r, t) / 864e5 * this.parent.perDayWidth, s = n ? this.calculateWidthBetweenTwoDate(t, e, this.timelineRoundOffEndDate) : s, l = this.isWeekendHeaderCell(t, i, e);
        var f = "topTier" === i ? " e-gantt-top-cell-text" : "",
            m = g(c) ? this.formatDateHeader(d, e) : this.customFormat(e, d, i, t, c);
        return p += this.parent.timelineModule.isSingleTier ? '<th class="e-timeline-single-header-cell ' : '<th class="e-timeline-top-header-cell', p += l ? " e-weekend-header-cell" : "", p += '" tabindex="-1" aria-label= "' + this.parent.localeObj.getConstant("timelineCell") + " " + u, p += '" style="width:' + s + "px;", p += l && this.customTimelineSettings.weekendBackground ? "background-color:" + this.customTimelineSettings.weekendBackground + ";" : "", p += '"><div class="e-header-cell-label' + f + '" style="width:' + (s - 1) + "px;" + (this.parent.timelineSettings.showTooltip ? '"title="' + u : ""), h += p += '">' + m + "</div>", h += "</th>", p = "", !this.isSingleTier && "topTier" !== i || n ? (this.isSingleTier || "topTier" === i) && n && (this.totalTimelineWidth = this.totalTimelineWidth - a + s) : this.totalTimelineWidth = this.totalTimelineWidth + s, o.value = m, o.isWeekend = l, o.width = a, h
    }, e.prototype.calculateWidthBetweenTwoDate = function(e, t, i) {
        return (i.getTime() - t.getTime()) / 864e5 * this.parent.perDayWidth
    }, e.prototype.timelineWidthCalculation = function() {
        var e = this.customTimelineSettings.timelineUnitSize,
            t = this.customTimelineSettings.bottomTier.count,
            i = this.customTimelineSettings.topTier.count;
        switch (this.bottomTierCellWidth = e, this.bottomTier) {
            case "None":
                this.parent.perDayWidth = this.getPerDayWidth(e, i, this.topTier);
                break;
            default:
                this.parent.perDayWidth = this.getPerDayWidth(e, t, this.bottomTier)
        }
        this.topTierCellWidth = "None" !== this.bottomTier ? "Week" === this.topTier ? 7 * this.parent.perDayWidth : "Hour" === this.topTier ? this.parent.perDayWidth / 24 : "Minutes" === this.topTier ? this.parent.perDayWidth / 1440 : this.parent.perDayWidth : e, this.topTierCellWidth = this.isSingleTier ? this.topTierCellWidth : this.topTierCellWidth * i
    }, e.prototype.getPerDayWidth = function(e, t, i) {
        var n;
        switch (i) {
            case "Year":
                n = e / t / 336;
                break;
            case "Month":
                n = e / t / 28;
                break;
            case "Week":
                n = e / t / 7;
                break;
            case "Day":
                n = e / t;
                break;
            case "Hour":
                n = 24 / t * e;
                break;
            case "Minutes":
                n = 1440 / t * e
        }
        return n
    }, e.prototype.roundOffDays = function() {
        var e = this.parent.cloneProjectStartDate,
            t = this.parent.cloneProjectEndDate,
            i = "None" === this.topTier ? this.bottomTier : this.topTier;
        if (this.parent.isTimelineRoundOff) {
            if ("Year" === i) e = new Date(e.getFullYear(), 0, 1), t = new Date(t.getFullYear(), 11, 31);
            else if ("Month" === i) e = new Date(e.getFullYear(), e.getMonth(), 1), t = new Date(t.getFullYear(), t.getMonth() + 1, 0);
            else if ("Week" === i) {
                var n = this.parent.timelineModule.customTimelineSettings.weekStartDay,
                    r = e.getDay() < n ? e.getDate() - (7 - n + e.getDay()) : e.getDate() - e.getDay() + n;
                e.setDate(r);
                var o = t.getDate() - t.getDay() + 6 + n;
                t.setDate(o)
            }
            "Hour" === i ? e.setMinutes(0) : "Minutes" === i ? e.setSeconds(0) : e.setHours(0, 0, 0, 0)
        }
        this.timelineStartDate = e, this.timelineEndDate = t, this.timelineRoundOffEndDate = this.getTimelineRoundOffEndDate(this.timelineEndDate)
    }, e.prototype.updateScheduleDatesByToolBar = function(e, t, i, n) {
        if ("Year" === e && ("prevTimeSpan" === t ? i = 0 === i.getMonth() ? new Date(i.getFullYear() - 1, 0, 1) : new Date(i.getFullYear(), 0, 1) : n = 11 === n.getMonth() ? new Date(n.getFullYear() + 1, 0, 1) : new Date(n.getFullYear(), 12, 1)), "Month" === e && ("prevTimeSpan" === t ? i = 1 === i.getDate() ? new Date(i.getFullYear(), i.getMonth() - 1, 1) : new Date(i.getFullYear(), i.getMonth(), 1) : n = new Date(n.getFullYear(), n.getMonth() + 1, 1)), "Week" === e) {
            var r = this.parent.timelineModule.customTimelineSettings.weekStartDay,
                o = void 0;
            "prevTimeSpan" === t ? (o = i.getDay() < r ? 7 - (r - i.getDay()) : i.getDay() - r, i.setHours(0, 0, 0, 0), 0 === o ? i.setDate(i.getDate() - 7) : i.setDate(i.getDate() - o)) : (o = n.getDay() < r ? r - n.getDay() : 7 - n.getDay() + r, n.setHours(0, 0, 0, 0), 0 === o ? n.setDate(n.getDate() + 6) : n.setDate(n.getDate() + o))
        }
        "Day" === e && ("prevTimeSpan" === t ? 0 === i.getHours() ? i.setTime(i.getTime() - 864e5) : i.setHours(0) : 0 === n.getHours() ? n.setTime(n.getTime() + 864e5) : n.setHours(24)), "Hour" === e && ("prevTimeSpan" === t ? 0 === i.getMinutes() ? i.setTime(i.getTime() - 36e5) : i.setMinutes(0) : 0 === n.getMinutes() ? n.setTime(n.getTime() + 36e5) : n.setMinutes(60)), "Minutes" === e && ("prevTimeSpan" === t ? 0 === i.getSeconds() ? i.setTime(i.getTime() - 6e4) : i.setSeconds(0) : 0 === n.getSeconds() ? n.setTime(n.getTime() + 6e4) : n.setSeconds(60)), this.parent.cloneProjectStartDate = i, this.parent.cloneProjectEndDate = n
    }, e.prototype.updateTimeLineOnEditing = function(e, t) {
        var i, n = e.filter((function(e) {
                return !g(e.ganttProperties.startDate)
            })),
            r = e.filter((function(e) {
                return !g(e.ganttProperties.endDate)
            })),
            o = n.length > 0 ? new Date(wn.aggregates.min(n, "ganttProperties.startDate")) : null,
            s = r.length > 0 ? new Date(wn.aggregates.max(r, "ganttProperties.endDate")) : null,
            a = new Date(this.parent.dataOperation.checkStartDate(this.timelineStartDate).getTime()),
            l = new Date(this.parent.dataOperation.checkEndDate(this.timelineEndDate).getTime()),
            h = g(o) ? null : this.parent.dataOperation.getTaskLeft(o, !1),
            p = g(s) ? null : this.parent.dataOperation.getTaskLeft(s, !1),
            d = this.parent.dataOperation.getTaskLeft(a, !1),
            c = this.parent.dataOperation.getTaskLeft(l, !1);
        !g(h) && (h <= this.bottomTierCellWidth || h <= d) ? (i = "prevTimeSpan", o = o > this.timelineStartDate ? this.timelineStartDate : o) : o = this.timelineStartDate, !g(p) && (p >= this.totalTimelineWidth - this.bottomTierCellWidth || p >= c) ? (i = "prevTimeSpan" === i ? "both" : "nextTimeSpan", s = s < this.timelineEndDate ? this.timelineEndDate : s) : s = this.timelineEndDate, i && this.performTimeSpanAction(i, t, o, s)
    }, e.prototype.performTimeSpanAction = function(e, t, i, n, r) {
        r = g(r) ? "None" === this.parent.timelineModule.topTier ? this.parent.timelineModule.bottomTier : this.parent.timelineModule.topTier : r;
        var o = new Date(this.parent.cloneProjectStartDate.getTime()),
            s = new Date(this.parent.cloneProjectEndDate.getTime());
        "publicMethod" !== t && "both" === e ? (this.updateScheduleDatesByToolBar(r, "prevTimeSpan", i, n), this.updateScheduleDatesByToolBar(r, "nextTimeSpan", new Date(this.parent.cloneProjectStartDate.getTime()), n)) : this.updateScheduleDatesByToolBar(r, e, i, n);
        var a = this.timeSpanActionEvent("actionBegin", e, t);
        a.cancel ? (this.parent.cloneProjectStartDate = o, this.parent.cloneProjectEndDate = s) : (this.parent.updateProjectDates(a.projectStartDate, a.ProjectEndDate, a.isTimelineRoundOff, t), "prevTimeSpan" === e && "publicMethod" === t ? this.parent.ganttChartModule.updateScrollLeft(0) : "nextTimeSpan" === e && "publicMethod" === t && this.parent.ganttChartModule.updateScrollLeft(this.parent.timelineModule.totalTimelineWidth), this.parent.timelineModule.timeSpanActionEvent("actionComplete", e, t))
    }, e.prototype.timeSpanActionEvent = function(e, t, i) {
        var n = {};
        return n.projectStartDate = new Date(this.parent.cloneProjectStartDate.getTime()), n.ProjectEndDate = new Date(this.parent.cloneProjectEndDate.getTime()), n.requestType = "publicMethod" === i ? t : "beforeAdd" === i ? "TimelineRefreshOnAdd" : "TaskbarEditing" === i ? "TimelineRefreshOnEdit" : t, "actionBegin" === e && (n.isTimelineRoundOff = this.parent.isTimelineRoundOff, n.cancel = !1), n.action = "TimescaleUpdate", this.parent.trigger(e, n), n
    }, e
}(), ih = function(e) {
    this.allowEditing = !0, this.edit = {}, this.disableHtmlEncode = !0, this.allowReordering = !0, this.showColumnMenu = !0, this.allowFiltering = !0, this.allowSorting = !0, this.allowResizing = !0, this.filter = {}, c(this, e)
}, nh = function() {
    var e = function(t, i) {
        return (e = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(e, t) {
                e.__proto__ = t
            } || function(e, t) {
                for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
            })(t, i)
    };
    return function(t, i) {
        function n() {
            this.constructor = t
        }
        e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
    }
}(), rh = function(e, t, i, n) {
    var r, o = arguments.length,
        s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
    else
        for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
    return o > 3 && s && Object.defineProperty(t, i, s), s
}, oh = function(e) {
    function t() {
        return null !== e && e.apply(this, arguments) || this
    }
    return nh(t, e), rh([zt()], t.prototype, "field", void 0), rh([zt()], t.prototype, "operator", void 0), rh([zt()], t.prototype, "value", void 0), rh([zt()], t.prototype, "matchCase", void 0), rh([zt()], t.prototype, "ignoreAccent", void 0), rh([zt()], t.prototype, "predicate", void 0), rh([zt({})], t.prototype, "actualFilterValue", void 0), rh([zt({})], t.prototype, "actualOperator", void 0), rh([zt()], t.prototype, "type", void 0), rh([zt()], t.prototype, "ejpredicate", void 0), rh([zt()], t.prototype, "uid", void 0), rh([zt()], t.prototype, "isForeignKey", void 0), t
}(oi), sh = function(e) {
    function t() {
        return null !== e && e.apply(this, arguments) || this
    }
    return nh(t, e), rh([Wt([], oh)], t.prototype, "columns", void 0), rh([zt("FilterBar")], t.prototype, "type", void 0), rh([zt()], t.prototype, "mode", void 0), rh([zt(!0)], t.prototype, "showFilterBarStatus", void 0), rh([zt(1500)], t.prototype, "immediateModeDelay", void 0), rh([zt()], t.prototype, "operators", void 0), rh([zt(!1)], t.prototype, "ignoreAccent", void 0), rh([zt("Parent")], t.prototype, "hierarchyMode", void 0), t
}(oi), ah = function() {
    var e = function(t, i) {
        return (e = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(e, t) {
                e.__proto__ = t
            } || function(e, t) {
                for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
            })(t, i)
    };
    return function(t, i) {
        function n() {
            this.constructor = t
        }
        e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
    }
}(), lh = function(e, t, i, n) {
    var r, o = arguments.length,
        s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
    else
        for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
    return o > 3 && s && Object.defineProperty(t, i, s), s
}, hh = function(e) {
    function t() {
        return null !== e && e.apply(this, arguments) || this
    }
    return ah(t, e), lh([zt("Both")], t.prototype, "wrapMode", void 0), t
}(oi), ph = "https://ej2.syncfusion.com/documentation/grid", dh = "https://ej2.syncfusion.com/documentation/", ch = "[EJ2Grid.Warning]", uh = "[EJ2Grid.Error]", gh = "[EJ2Grid.Info]", fh = function() {
    function e(e) {
        this.parent = e, this.parent.on("initial-end", this.patchadaptor, this)
    }
    return e.prototype.getModuleName = function() {
        return "logger"
    }, e.prototype.log = function(e, t) {
        e instanceof Array || (e = [e]);
        for (var i = e, n = 0; n < i.length; n++) {
            var r = mh[i[n]],
                o = r.check(t, this.parent);
            o.success && console[r.logType](r.generateMessage(t, this.parent, o.options))
        }
    }, e.prototype.patchadaptor = function() {
        var e = this.parent.getDataModule().dataManager.adaptor,
            t = e.beforeSend;
        t && (e.beforeSend = function(i, n, r) {
            t.call(e, i, n, r)
        })
    }, e.prototype.destroy = function() {
        this.parent.isDestroyed || this.parent.off("initial-end", this.patchadaptor)
    }, e
}(), mh = {
    module_missing: {
        type: "module_missing",
        logType: "warn",
        check: function(e, t) {
            var i = t.getInjectedModules().map((function(e) {
                    return e.prototype.getModuleName()
                })),
                n = t.requiredModules().map((function(e) {
                    return e.member
                })).filter((function(e) {
                    return -1 === i.indexOf(e)
                }));
            return {
                success: n.filter((function(e) {
                    return "resize" !== e
                })).length > 0,
                options: n
            }
        },
        generateMessage: function(e, t, i) {
            return i = i.filter((function(e) {
                return "resize" !== e
            })).reduce((function(e, t) {
                return e + "* " + t + "\n"
            }), ""), ch + ": MODULES MISSING\nThe following modules are not injected:.\n" + i + "Refer to " + ph + "/module.html for documentation on importing feature modules."
        }
    },
    promise_enabled: {
        type: "promise_enabled",
        logType: "error",
        check: function(e, t) {
            return {
                success: "undefined" == typeof Promise
            }
        },
        generateMessage: function(e, t) {
            return uh + ": PROMISE UNDEFINED\nPromise object is not present in the global environment,please use polyfil to support Promise object in your environment.\nRefer to " + dh + "/base/browser.html?#required-polyfills for more information."
        }
    },
    primary_column_missing: {
        type: "primary_column_missing",
        logType: "warn",
        check: function(e, t) {
            return {
                success: 0 === t.getColumns().filter((function(e) {
                    return e.isPrimaryKey
                })).length
            }
        },
        generateMessage: function(e, t) {
            return ch + ": PRIMARY KEY MISSING\nEditing is enabled but primary key column is not specified.\nRefer to " + ph + "/api-column.html?#isprimarykey for documentation on providing primary key columns."
        }
    },
    selection_key_missing: {
        type: "selection_key_missing",
        logType: "warn",
        check: function(e, t) {
            return {
                success: t.selectionSettings.persistSelection && 0 === t.getColumns().filter((function(e) {
                    return e.isPrimaryKey
                })).length
            }
        },
        generateMessage: function(e, t) {
            return ch + ": PRIMARY KEY MISSING\nselectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\nRefer to " + ph + "/api-column.html?#isprimarykey for documentation on providing primary key columns."
        }
    },
    actionfailure: {
        type: "actionfailure",
        logType: "error",
        check: function(e, t) {
            return {
                success: !0
            }
        },
        generateMessage: function(e, t) {
            var i = "",
                n = yh(e, t),
                r = vh(e, t);
            return i = "" !== r ? r : "" !== n ? n : e.error, ch + ": " + i
        }
    },
    locale_missing: {
        type: "locale_missing",
        logType: "warn",
        check: function(e, t) {
            var i = wn.getObject("locale." + t.locale + ".grid", ki);
            return {
                success: "en-US" !== t.locale && g(i)
            }
        },
        generateMessage: function(e, t) {
            return ch + ": LOCALE CONFIG MISSING\nLocale configuration for '" + t.locale + "' is not provided.\nRefer to " + ph + "/globalization-and-localization.html?#localization \n             for documentation on setting locale configuration."
        }
    },
    limitation: {
        type: "limitation",
        logType: "warn",
        check: function(e, t) {
            var i;
            switch (e) {
                case "freeze":
                    i = {
                        success: t.allowGrouping || !f(t.detailTemplate) || !f(t.childGrid) || !f(t.rowTemplate) || t.enableVirtualization,
                        options: {
                            name: "freeze"
                        }
                    };
                    break;
                case "virtualization":
                    i = {
                        success: !f(t.detailTemplate) || !f(t.childGrid) || 0 !== t.frozenRows || 0 !== t.frozenColumns,
                        options: {
                            name: "virtualization"
                        }
                    };
                    break;
                default:
                    i = {
                        success: !1
                    }
            }
            return i
        },
        generateMessage: function(e, t, i) {
            var n, r = i.name;
            switch (r) {
                case "freeze":
                    n = "Frozen rows and columns do not support the following features:\n* Virtualization\n* Row Template\n* Details Template\n* Hierarchy Grid\n* Grouping";
                    break;
                case "virtualization":
                    n = "Virtualization does not support the following features.\n* Freeze rows and columns.\n* Details Template.\n* Hierarchy Grid.\n";
                    break;
                default:
                    n = ""
            }
            return ch + ": " + r.toUpperCase() + " LIMITATIONS\n" + n
        }
    },
    check_datasource_columns: {
        type: "check_datasource_columns",
        logType: "warn",
        check: function(e, t) {
            return {
                success: !(t.columns.length || t.dataSource instanceof yn || t.dataSource.length)
            }
        },
        generateMessage: function(e, t) {
            return ch + ": GRID CONFIG MISSING\ndataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.\nRefer to " + ph + "/columns.html for documentation on configuring the grid data and columns."
        }
    },
    virtual_height: {
        type: "virtual_height",
        logType: "error",
        check: function(e, t) {
            return {
                success: g(t.height) || "auto" === t.height
            }
        },
        generateMessage: function(e, t) {
            return uh + ": GRID HEIGHT MISSING \nheight property is required to use virtualization.\nRefer to " + ph + "/virtual.html for documentation on configuring the virtual grid."
        }
    },
    grid_remote_edit: {
        type: "grid_remote_edit",
        logType: "error",
        check: function(e, t) {
            return {
                success: Array.isArray(e) || Array.isArray(e.result)
            }
        },
        generateMessage: function(e, t) {
            return uh + ": RETRUN VALUE MISSING  \nRemote service returns invalid data. \nRefer to " + ph + "/edit.html for documentation on configuring editing with remote data."
        }
    },
    grid_sort_comparer: {
        type: "grid_sort_comparer",
        logType: "warn",
        check: function(e, t) {
            return {
                success: t.getDataModule().isRemote()
            }
        },
        generateMessage: function(e, t) {
            return ch + ": SORT COMPARER NOT WORKING  \nSort comparer will not work with remote data.Refer to " + ph + "/sorting/#custom-sort-comparer for documentation on using the sort comparer."
        }
    },
    resize_min_max: {
        type: "resize_min_max",
        logType: "info",
        check: function(e, t) {
            return {
                success: e.column.minWidth && e.column.minWidth >= e.width || e.column.maxWidth && e.column.maxWidth <= e.width
            }
        },
        generateMessage: function(e, t) {
            return gh + ": RESIZING COLUMN REACHED MIN OR MAX  \nThe column resizing width is at its min or max."
        }
    },
    action_disabled_column: {
        type: "action_disabled_column",
        logType: "info",
        check: function(e, t) {
            var i;
            switch (e.moduleName) {
                case "reorder":
                    i = g(e.destColumn) ? "reordering action is disabled for the " + e.column.headerText + " column" : "reordering action is disabled for the " + (e.column.allowReordering ? e.destColumn.headerText : e.column.headerText) + " column";
                    break;
                case "group":
                    i = "grouping action is disabled for the " + e.columnName + " column.";
                    break;
                case "filter":
                    i = "filtering action is disabled for the " + e.columnName + " column.";
                    break;
                case "sort":
                    i = "sorting action is disabled for the " + e.columnName + " column."
            }
            return {
                success: !0,
                options: {
                    fn: i
                }
            }
        },
        generateMessage: function(e, t, i) {
            return gh + ": ACTION DISABLED \n " + i.fn
        }
    },
    exporting_begin: {
        type: "exporting_begin",
        logType: "info",
        check: function(e, t) {
            return {
                success: !0,
                options: {
                    args: e
                }
            }
        },
        generateMessage: function(e, t, i) {
            return gh + ": EXPORTNIG INPROGRESS \n Grid " + i.args + "ing is in progress"
        }
    },
    exporting_complete: {
        type: "exporting_complete",
        logType: "info",
        check: function(e, t) {
            return {
                success: !0,
                options: {
                    args: e
                }
            }
        },
        generateMessage: function(e, t, i) {
            return gh + ": EXPORTNIG COMPLETED \n Grid " + i.args + "ing is complete"
        }
    },
    foreign_key_failure: {
        type: "foreign_key_failure",
        logType: "error",
        check: function(e, t) {
            return {
                success: !0
            }
        },
        generateMessage: function(e, t) {
            return uh + ": FOREIGNKEY CONFIG \n  Grid foreign key column needs a valid data source/service.Refer to " + ph + "/columns/#foreign-key-column for documentation on configuring foreign key columns."
        }
    },
    initial_action: {
        type: "initial_action",
        logType: "error",
        check: function(e, t) {
            var i;
            switch (e.moduleName) {
                case "group":
                    i = "The " + e.columnName + " column is not available in the grid's column model.Please provide a valid field name to group the column";
                    break;
                case "filter":
                    i = "The " + e.columnName + " column is not available in the grid's column model.Please provide a valid field name to filter the column.";
                    break;
                case "sort":
                    i = "The " + e.columnName + " column is not available in the grid's column model.Please provide a valid field name to sort the column."
            }
            return {
                success: !0,
                options: {
                    fn: i
                }
            }
        },
        generateMessage: function(e, t, i) {
            return uh + ": INITIAL ACTION FAILURE \n " + i.fn
        }
    },
    frozen_rows_columns: {
        type: "frozen_rows_columns",
        logType: "error",
        check: function(e, t) {
            return {
                success: t.getColumns().length <= t.frozenColumns || t.frozenRows >= t.currentViewData.length
            }
        },
        generateMessage: function(e, t, i) {
            return uh + ": OUT OF RANGE ERROR-\n " + (t.getColumns().length <= t.frozenColumns ? "FROZEN COLUMNS," : "") + (t.frozenRows >= t.currentViewData.length ? "FROZEN ROWS" : "") + " invalid"
        }
    },
    column_type_missing: {
        type: "column_type_missing",
        logType: "error",
        check: function(e, t) {
            return {
                success: g(e.column.type),
                options: e.column.headerText
            }
        },
        generateMessage: function(e, t, i) {
            return uh + ": COLUMN TYPE MISSING-\n  " + i + " column type was invalid or not defined.Please go through below help link: " + dh + "/grid/columns/#column-type"
        }
    },
    datasource_syntax_mismatch: {
        type: "datasource_syntax_mismatch",
        logType: "warn",
        check: function(e, t) {
            return {
                success: (e.dataState.dataSource instanceof yn || e.dataState.dataSource instanceof Array) && !g(e.dataState.dataStateChange)
            }
        },
        generateMessage: function(e, t, i) {
            return ch + ": DATASOURCE SYNTAX WARNING\nDataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used"
        }
    }
}, yh = function(e, t) {
    var i = e.error;
    return i.indexOf && 0 !== i.indexOf("Format options") ? "" : "INVALID FORMAT\nFor more information, refer to the following documentation links:\nNumber format: " + dh + "/base/intl.html?#supported-format-string.\nDate format: " + dh + "/base/intl.html?#manipulating-datetime.\nMessage: " + i
}, vh = function(e, t) {
    var i = wn.getObject("error.error", e);
    if (g(i)) return "";
    var n = "";
    try {
        n = JSON.parse(i.responseText)
    } catch (e) {
        n = ""
    }
    return "XMLHTTPREQUEST FAILED\nUrl: " + i.responseURL + "\nStatus: " + i.status + " - " + i.statusText + "\n" + ("" !== n ? "Message: " + n : "")
}, bh = function() {
    var e = function(t, i) {
        return (e = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(e, t) {
                e.__proto__ = t
            } || function(e, t) {
                for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
            })(t, i)
    };
    return function(t, i) {
        function n() {
            this.constructor = t
        }
        e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
    }
}(), wh = "https://ej2.syncfusion.com/documentation/treegrid", Ch = "https://ej2.syncfusion.com/documentation", Sh = function(e) {
    function t(t) {
        return Pa.Inject(fh), e.call(this, t) || this
    }
    return bh(t, e), t.prototype.getModuleName = function() {
        return "logger"
    }, t.prototype.log = function(e, t) {
        e instanceof Array || (e = [e]);
        for (var i = e, n = 0; n < i.length; n++) {
            var r = mh[i[n]],
                o = r.check(t, this.parent);
            if (o.success) {
                var s = r.generateMessage(t, this.parent, o.options),
                    a = (s = s.replace("EJ2Grid", "EJ2TreeGrid")).indexOf("https"),
                    l = s.substring(a);
                "module_missing" === i[n] ? s = s.replace(l, wh + "/modules") : "primary_column_missing" === i[n] || "selection_key_missing" === i[n] ? s = s.replace(l, Ch + "/api/treegrid/column/#isprimarykey") : "grid_remote_edit" === i[n] ? s = s.replace(l, wh + "/edit") : "virtual_height" === i[n] ? s = s.replace(l, wh + "/virtual") : "check_datasource_columns" === i[n] ? s = s.replace(l, wh + "/columns") : "locale_missing" === i[n] && (s = s.replace(l, wh + "/global-local/#localization")), console[r.logType](s)
            }
        }
    }, t.prototype.treeLog = function(e, t, i) {
        e instanceof Array || (e = [e]);
        var n = e;
        i.allowRowDragAndDrop && this.log("primary_column_missing", t);
        for (var r = 0; r < n.length; r++) {
            var o = xh[n[r]],
                s = o.check(t, i);
            if (s.success) {
                var a = o.generateMessage(t, i, s.options);
                console[o.logType](a)
            }
        }
    }, t
}(fh), xh = {
    mapping_fields_missing: {
        type: "mapping_fields_missing",
        logType: "error",
        check: function(e, t) {
            var i = {
                success: !1
            };
            return (g(t.idMapping) && g(t.childMapping) && g(t.parentIdMapping) || !g(t.idMapping) && g(t.parentIdMapping) || g(t.idMapping) && !g(t.parentIdMapping)) && (i = {
                success: !0
            }), i
        },
        generateMessage: function(e, t, i) {
            return "[EJ2TreeGrid.Error]: MAPPING FIELDS MISSING \nOne of the following fields are missing which are required for the hierarchy relation of records in Tree Grid.\n* childMapping\n* idMapping\n* parentIdMapping\nRefer to the following documentation links for more details\n" + Ch + "/api/treegrid#childmapping\n" + Ch + "/api/treegrid#idmapping\n" + Ch + "/api/treegrid#$parentidmapping"
        }
    }
}, kh = function() {
    var e = function(t, i) {
        return (e = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(e, t) {
                e.__proto__ = t
            } || function(e, t) {
                for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
            })(t, i)
    };
    return function(t, i) {
        function n() {
            this.constructor = t
        }
        e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
    }
}(), Th = function(e) {
    function t(t) {
        var i = e.call(this, t.grid) || this;
        return i.treeCopyContent = "", i.copiedUniqueIdCollection = [], i.treeGridParent = t, i
    }
    return kh(t, e), t.prototype.setCopyData = function(t) {
        var i = this.treeGridParent.getCurrentViewRecords();
        if ("" === window.getSelection().toString()) {
            this.clipBoardTextArea.value = this.copyContent = "";
            var n = this.treeGridParent.grid.getRows();
            if ("Cell" !== this.treeGridParent.selectionSettings.mode) {
                for (var r = this.treeGridParent.getSelectedRowIndexes().sort((function(e, t) {
                        return e - t
                    })), o = 0; o < r.length; o++)
                    if (o > 0 && (this.treeCopyContent += "\n"), !n[r[o]].classList.contains("e-summaryrow")) {
                        var s = [].slice.call(n[r[o]].querySelectorAll(".e-rowcell")),
                            a = this.treeGridParent.getSelectedRecords()[o].uniqueID; - 1 === this.copiedUniqueIdCollection.indexOf(a) && ("Parent" !== this.treeGridParent.copyHierarchyMode && "Both" !== this.treeGridParent.copyHierarchyMode || this.parentContentData(i, r[o], n, t, o), this.getCopyData(s, !1, "\t", t), this.treeCopyContent += this.copyContent, this.copiedUniqueIdCollection.push(a), this.copyContent = "", "Child" !== this.treeGridParent.copyHierarchyMode && "Both" !== this.treeGridParent.copyHierarchyMode || this.childContentData(i, r[o], n, t))
                    } if (t) {
                    var l = [];
                    for (o = 0; o < this.treeGridParent.getVisibleColumns().length; o++) l[o] = this.treeGridParent.getVisibleColumns()[o].headerText;
                    this.getCopyData(l, !1, "\t", t), this.treeCopyContent = this.copyContent + "\n" + this.treeCopyContent
                }
                var h = {
                    data: this.treeCopyContent,
                    cancel: !1
                };
                if (this.treeGridParent.trigger("beforeCopy", h), h.cancel) return;
                this.clipBoardTextArea.value = this.copyContent = h.data, me.userAgent.match(/ipad|ipod|iphone/i) ? this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length) : this.clipBoardTextArea.select(), this.isSelect = !0, this.copiedUniqueIdCollection = [], this.treeCopyContent = ""
            } else e.prototype.setCopyData.call(this, t)
        }
    }, t.prototype.parentContentData = function(e, t, i, n, r) {
        if (!g(e[t].parentItem))
            for (var o = e[t].parentItem.level, s = 0; s < o + 1; s++)
                for (var a = 0; a < e.length; a++)
                    if (!g(e[t].parentItem) && e[a].uniqueID === e[t].parentItem.uniqueID) {
                        t = a;
                        var l = [].slice.call(i[t].querySelectorAll(".e-rowcell")),
                            h = e[a].uniqueID;
                        if (-1 === this.copiedUniqueIdCollection.indexOf(h)) {
                            this.getCopyData(l, !1, "\t", n), this.treeCopyContent = r > 0 ? this.treeCopyContent + this.copyContent + "\n" : this.copyContent + "\n" + this.treeCopyContent, this.copiedUniqueIdCollection.push(h), this.copyContent = "";
                            break
                        }
                    }
    }, t.prototype.copy = function(t) {
        e.prototype.copy.call(this, t)
    }, t.prototype.paste = function(t, i, n) {
        e.prototype.paste.call(this, t, i, n)
    }, t.prototype.getModuleName = function() {
        return "clipboard"
    }, t.prototype.destroy = function() {
        e.prototype.destroy.call(this)
    }, t.prototype.childContentData = function(e, t, i, n) {
        if (e[t].hasChildRecords)
            for (var r = e[t].childRecords, o = 0; o < r.length; o++)
                for (var s = 0; s < e.length; s++)
                    if (!g(r[o].uniqueID) && e[s].uniqueID === r[o].uniqueID) {
                        if (!g(i[s]) && !i[s].classList.contains("e-summaryrow")) {
                            var a = [].slice.call(i[s].querySelectorAll(".e-rowcell")),
                                l = e[s].uniqueID; - 1 === this.copiedUniqueIdCollection.indexOf(l) && (this.getCopyData(a, !1, "\t", n), this.treeCopyContent += "\n" + this.copyContent, this.copyContent = "", this.copiedUniqueIdCollection.push(l), this.childContentData(e, s, i, n))
                        }
                        break
                    }
    }, t
}(ua);

function Dh(e) {
    if (e.dataSource instanceof yn) {
        var t = e.dataSource.adaptor;
        return t instanceof cn || t instanceof un || t instanceof gn || t instanceof mn || t instanceof dn
    }
    return !1
}

function Eh(e) {
    return !(!e.dataSource || !("result" in e.dataSource))
}

function Rh(e, t, i) {
    var n, r = g(t.parentItem) ? null : Oh(e, t.parentItem.uniqueID);
    return null == r || (!e.initialRender || g(r[e.expandStateMapping]) || r[e.expandStateMapping] ? !1 !== r.expanded && (!r.parentItem || ((n = Oh(e, r.parentItem.uniqueID)) && e.initialRender && !g(n[e.expandStateMapping]) && !n[e.expandStateMapping] ? (n.expanded = !1, !1) : (!n || !1 !== n.expanded) && (!n || Rh(e, n, i)))) : (r.expanded = !1, !1))
}

function Ph(e) {
    var t = [];
    if (g(e) || !e.hasChildRecords && !g(e.childRecords) && !e.childRecords.length) return [];
    if (!g(e.childRecords))
        for (var i = e.childRecords, n = 0, r = Object.keys(i).length; n < r; n++) t.push(i[n]), (i[n].hasChildRecords || !g(i[n].childRecords) && i[n].childRecords.length) && (t = t.concat(Ph(i[n])));
    return t
}

function Ih(e) {
    return !Dh(e) || !g(e.dataSource.ready)
}

function Mh(e) {
    for (var t, i, n = [], r = 0; e && r < e.length; r++) {
        i = Object.keys(e[r]), t = {};
        for (var o = 0; o < i.length; o++) t[i[o]] = e[r][i[o]];
        n.push(t)
    }
    return n
}

function Lh(e) {
    return delete e.hasChildRecords, delete e.childRecords, delete e.index, delete e.parentItem, delete e.level, e
}

function Oh(e, t, i) {
    if (i) {
        return e.uniqueIDFilterCollection[t]
    }
    return e.uniqueIDCollection[t]
}

function Ah(e) {
    var t = window.getComputedStyle(e);
    return "none" === t.display || "hidden" === t.visibility
}
var Bh, Fh, Nh = function() {
        function e(e) {
            this.parent = e, this.selectedItems = [], this.selectedIndexes = [], this.addEventListener()
        }
        return e.prototype.getModuleName = function() {
            return "selection"
        }, e.prototype.addEventListener = function() {
            this.parent.on("dataBoundArg", this.headerCheckbox, this), this.parent.on("columnCheckbox", this.columnCheckbox, this), this.parent.on("updateGridActions", this.updateGridActions, this), this.parent.grid.on("colgroup-refresh", this.headerCheckbox, this), this.parent.on("checkboxSelection", this.checkboxSelection, this)
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off("dataBoundArg", this.headerCheckbox), this.parent.off("columnCheckbox", this.columnCheckbox), this.parent.grid.off("colgroup-refresh", this.headerCheckbox), this.parent.off("checkboxSelection", this.checkboxSelection), this.parent.off("updateGridActions", this.updateGridActions))
        }, e.prototype.destroy = function() {
            this.removeEventListener()
        }, e.prototype.checkboxSelection = function(e) {
            var t, i = xl("target", e),
                n = Ka(i, "e-checkbox-wrapper");
            if (n && n.querySelectorAll(".e-treecheckselect").length > 0) {
                t = n.querySelector('input[type="checkbox"]');
                var r = void 0;
                (r = []).push(i.closest("tr").rowIndex), this.selectCheckboxes(r), this.triggerChkChangeEvent(t, t.nextElementSibling.classList.contains("e-check"), i.closest("tr"))
            } else if (n && n.querySelectorAll(".e-treeselectall").length > 0 && this.parent.autoCheckHierarchy) {
                var o = !n.querySelector(".e-frame").classList.contains("e-check") && !n.querySelector(".e-frame").classList.contains("e-stop");
                this.headerSelection(o), t = n.querySelector('input[type="checkbox"]'), this.triggerChkChangeEvent(t, o, i.closest("tr"))
            }
        }, e.prototype.triggerChkChangeEvent = function(e, t, i) {
            var n = this.parent.getCurrentViewRecords()[i.rowIndex],
                r = {
                    checked: t,
                    target: e,
                    rowElement: i,
                    rowData: e.classList.contains("e-treeselectall") ? this.parent.getCheckedRecords() : n
                };
            this.parent.trigger("checkboxChange", r)
        }, e.prototype.getCheckboxcolumnIndex = function() {
            for (var e, t, i = this.parent.columns, n = 0; n < i.length; n++) i[n].showCheckbox && (e = this.parent.columns[n].uid);
            for (var r = this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv").length, o = 0; o < r; o++) {
                this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv")[o].getAttribute("e-mappinguid") === e && (t = o)
            }
            return t
        }, e.prototype.headerCheckbox = function() {
            if (this.columnIndex = this.getCheckboxcolumnIndex(), this.columnIndex > -1 && 0 === this.parent.getHeaderContent().querySelectorAll(".e-treeselectall").length) {
                var e = this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv")[this.columnIndex],
                    t = void 0,
                    i = this.parent.createElement("input", {
                        className: "e-treeselectall",
                        attrs: {
                            type: "checkbox"
                        }
                    });
                (t = Fr(this.parent.createElement, !1, {
                    checked: !1,
                    label: " "
                })).classList.add("e-hierarchycheckbox"), t.querySelector(".e-frame").style.width = "18px", t.insertBefore(i.cloneNode(), t.firstChild), g(e) || e.insertBefore(t, e.firstChild), this.parent.autoCheckHierarchy && this.headerSelection()
            } else if (this.columnIndex > -1 && this.parent.getHeaderContent().querySelectorAll(".e-treeselectall").length > 0) {
                var n = (t = this.parent.getHeaderContent().querySelectorAll(".e-checkbox-wrapper")[0]).querySelector(".e-frame").classList.contains("e-check");
                this.parent.autoCheckHierarchy && n && this.headerSelection(n)
            }
        }, e.prototype.renderColumnCheckbox = function(e) {
            var t, i = this.parent.createElement("input", {
                    className: "e-treecheckselect",
                    attrs: {
                        type: "checkbox"
                    }
                }),
                n = e.data;
            e.cell.classList.add("e-treegridcheckbox"), e.cell.setAttribute("aria-label", "checkbox");
            var r = !g(n.checkboxState) && "uncheck" !== n.checkboxState;
            ((t = Fr(this.parent.createElement, !1, {
                checked: r,
                label: " "
            })).classList.add("e-hierarchycheckbox"), t.querySelector(".e-frame").style.width = "18px", "indeterminate" === n.checkboxState) && (gt([t.querySelectorAll(".e-frame")[0]], ["e-check", "e-stop", "e-uncheck"]), t.querySelector(".e-frame").classList.add("e-stop"));
            return t.insertBefore(i.cloneNode(), t.firstChild), t
        }, e.prototype.columnCheckbox = function(e) {
            var t = this.renderColumnCheckbox(e),
                i = e.cell.querySelector(".e-treecolumn-container");
            if (g(i)) {
                var n = this.parent.createElement("span", {
                        className: "e-treecheckbox"
                    }),
                    r = e.cell.innerHTML;
                e.cell.innerHTML = "", n.innerHTML = r;
                var o = this.parent.createElement("div", {
                    className: "e-treecheckbox-container"
                });
                o.appendChild(t), o.appendChild(n), e.cell.appendChild(o)
            } else e.cell.querySelector(".e-hierarchycheckbox") || i.insertBefore(t, i.querySelectorAll(".e-treecell")[0])
        }, e.prototype.selectCheckboxes = function(e) {
            for (var t = 0; t < e.length; t++) {
                var i = this.parent.getCurrentViewRecords()[e[t]],
                    n = Oh(this.parent, i.uniqueID),
                    r = "uncheck" === (i = S() && "BlazorAdaptor" === this.parent.dataSource.adaptorName ? i : n).checkboxState ? "check" : "uncheck";
                i.checkboxState = r;
                for (var o = Object.keys(i), s = 0; s < o.length; s++) n.hasOwnProperty(o[s]) && (n[o[s]] = i[o[s]]);
                this.traverSelection(i, r, !1), this.parent.autoCheckHierarchy && this.headerSelection()
            }
        }, e.prototype.traverSelection = function(e, t, i) {
            var n = 0;
            if (this.updateSelectedItems(e, t), !i && e.parentItem && this.parent.autoCheckHierarchy && this.updateParentSelection(e.parentItem), e.childRecords && this.parent.autoCheckHierarchy) {
                var r = e.childRecords;
                !g(this.parent.filterModule) && this.parent.filterModule.filteredResult.length > 0 && this.parent.autoCheckHierarchy && (r = this.getFilteredChildRecords(r)), n = r.length;
                for (var o = 0; o < n; o++) r[o].isSummaryRow || (r[o].hasChildRecords ? this.traverSelection(r[o], t, !0) : this.updateSelectedItems(r[o], t))
            }
        }, e.prototype.getFilteredChildRecords = function(e) {
            var t = this;
            return e.filter((function(e) {
                return t.parent.filterModule.filteredResult.indexOf(e) > -1
            }))
        }, e.prototype.updateParentSelection = function(e) {
            var t, i = [],
                n = Oh(this.parent, e.uniqueID);
            n && n.childRecords && (i = n.childRecords), !g(this.parent.filterModule) && this.parent.filterModule.filteredResult.length > 0 && this.parent.autoCheckHierarchy && (i = this.getFilteredChildRecords(i)), t = i && i.length;
            var r = 0,
                o = 0;
            if (!g(n)) {
                for (var s = function(e) {
                        var t = a.parent.getCurrentViewRecords().filter((function(t) {
                                return t.uniqueID === i[e].uniqueID
                            })),
                            n = Oh(a.parent, i[e].uniqueID),
                            s = S() && "BlazorAdaptor" === a.parent.dataSource.adaptorName ? t[0] : n;
                        g(s) || ("indeterminate" === s.checkboxState ? r++ : "check" === s.checkboxState && o++)
                    }, a = this, l = 0; l < i.length; l++) s(l);
                n.checkboxState = r > 0 || o > 0 && o !== t ? "indeterminate" : 0 === o && 0 === r ? "uncheck" : "check", this.updateSelectedItems(n, n.checkboxState), n.parentItem && this.updateParentSelection(n.parentItem)
            }
        }, e.prototype.headerSelection = function(e) {
            var t, i = this,
                n = !g(this.parent.filterModule) && this.parent.filterModule.filteredResult.length > 0 ? this.parent.filterModule.filteredResult : this.parent.flatData;
            if (n = S() && "BlazorAdaptor" === this.parent.dataSource.adaptorName || Dh(this.parent) ? this.parent.getCurrentViewRecords() : n, !g(e))
                for (var r = 0; r < n.length; r++)
                    if (e) {
                        if ("check" === n[r].checkboxState) continue;
                        n[r].checkboxState = "check", this.updateSelectedItems(n[r], n[r].checkboxState)
                    } else this.selectedItems.indexOf(n[r]) > -1 && (n[r].checkboxState = "uncheck", this.updateSelectedItems(n[r], n[r].checkboxState), this.parent.autoCheckHierarchy && this.updateParentSelection(n[r]));
            !1 === e && this.parent.enableVirtualization && (this.selectedItems = [], this.selectedIndexes = [], n.filter((function(e) {
                e.checkboxState = "uncheck", i.updateSelectedItems(e, e.checkboxState)
            }))), t = this.selectedItems.length;
            var o = this.parent.getHeaderContent().querySelectorAll(".e-frame")[0];
            t > 0 && n.length > 0 ? t === n.length || e ? (gt([o], ["e-stop"]), o.classList.add("e-check")) : (gt([o], ["e-check"]), o.classList.add("e-stop")) : gt([o], ["e-check", "e-stop"])
        }, e.prototype.updateSelectedItems = function(e, t, i) {
            var n, r, o = this.parent.getCurrentViewRecords().filter((function(t) {
                    return t.uniqueID === e.uniqueID
                })),
                s = this.parent.getCurrentViewRecords().indexOf(o[0]),
                a = Oh(this.parent, e.uniqueID);
            if (s > -1) {
                var l = this.parent.getRows()[s],
                    h = void 0;
                (this.parent.frozenRows || this.parent.getFrozenColumns()) && (h = this.parent.getMovableDataRows()[s]), g(r = l.querySelectorAll(".e-frame")[0] ? l.querySelectorAll(".e-frame")[0] : h.querySelectorAll(".e-frame")[0]) || gt([r], ["e-check", "e-stop", "e-uncheck"])
            }
            if (g(n = S() && "BlazorAdaptor" === this.parent.dataSource.adaptorName ? o[0] : a) && (n = e), n.checkboxState = t, "check" === t && g(e.isSummaryRow)) - 1 !== s && -1 === this.selectedIndexes.indexOf(s) && this.selectedIndexes.push(s), -1 === this.selectedItems.indexOf(n) && -1 !== s && !g(this.parent.filterModule) && this.parent.filterModule.filteredResult.length > 0 && this.selectedItems.push(n), -1 !== this.selectedItems.indexOf(n) || g(this.parent.filterModule) || 0 !== this.parent.filterModule.filteredResult.length || this.selectedItems.push(n), -1 === this.selectedItems.indexOf(n) && g(this.parent.filterModule) && this.selectedItems.push(n);
            else if (("uncheck" === t || "indeterminate" === t) && g(e.isSummaryRow)) {
                var p = this.selectedItems.indexOf(n);
                if (-1 !== p && this.selectedItems.splice(p, 1), -1 !== this.selectedIndexes.indexOf(s)) {
                    var d = this.selectedIndexes.indexOf(s);
                    this.selectedIndexes.splice(d, 1)
                }
            }
            var c = "indeterminate" === t ? "e-stop" : "e-" + t;
            s > -1 && (g(r) || r.classList.add(c))
        }, e.prototype.updateGridActions = function(e) {
            var t, i, n = this,
                r = e.requestType;
            if (function(e) {
                    for (var t = 0; t < e.columns.length; t++)
                        if (e.columns[t].showCheckbox) return !0;
                    return !1
                }(this.parent) && this.parent.autoCheckHierarchy)
                if ("sorting" === r || "paging" === r) {
                    var o = this.parent.grid.getRows();
                    i = (t = this.parent.getCurrentViewRecords()).length, this.selectedIndexes = [];
                    for (var s = 0; s < i; s++) o[s].classList.contains("e-summaryrow") || this.updateSelectedItems(t[s], t[s].checkboxState, !0)
                } else if ("delete" === r || "add" === e.action) {
                var a = [];
                "delete" === r ? a = e.data : a.push(e.data);
                for (s = 0; s < a.length; s++) {
                    if ("delete" === r) {
                        var l = this.parent.flatData.indexOf(a[s]),
                            h = this.selectedIndexes.indexOf(l);
                        this.selectedIndexes.splice(h, 1), this.updateSelectedItems(a[s], "uncheck")
                    }
                    g(a[s].parentItem) || this.updateParentSelection(a[s].parentItem)
                }
            } else "add" === e.requestType && this.parent.autoCheckHierarchy ? e.data.checkboxState = "uncheck" : ("filtering" === r || "searching" === r || "refresh" === r && !Dh(this.parent)) && (this.selectedItems = [], this.selectedIndexes = [], (t = !g(this.parent.filterModule) && this.parent.filterModule.filteredResult.length > 0 ? this.parent.getCurrentViewRecords() : this.parent.flatData).forEach((function(e) {
                e.hasChildRecords ? n.updateParentSelection(e) : n.updateSelectedItems(e, e.checkboxState)
            })), this.headerSelection())
        }, e.prototype.getCheckedrecords = function() {
            return this.selectedItems
        }, e.prototype.getCheckedRowIndexes = function() {
            return this.selectedIndexes
        }, e
    }(),
    Hh = function() {
        function e(e) {
            this.parent = e, Pa.Inject(Ia), this.addEventListener()
        }
        return e.prototype.getModuleName = function() {
            return "print"
        }, e.prototype.addEventListener = function() {
            this.parent.grid.on("printGrid-Init", this.printTreeGrid, this)
        }, e.prototype.removeEventListener = function() {
            this.parent.grid.off("printGrid-Init", this.printTreeGrid)
        }, e.prototype.printTreeGrid = function(e) {
            var t = xl("printgrid", e),
                i = xl("element", e);
            t.addEventListener("queryCellInfo", this.parent.grid.queryCellInfo), t.addEventListener("rowDataBound", this.parent.grid.rowDataBound), t.addEventListener("beforeDataBound", this.parent.grid.beforeDataBound), ut([i], "e-treegrid")
        }, e.prototype.print = function() {
            this.parent.grid.print()
        }, e.prototype.destroy = function() {
            this.removeEventListener()
        }, e
    }(),
    Vh = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    jh = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    zh = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Vh(t, e), jh([zt()], t.prototype, "fields", void 0), jh([zt(!1)], t.prototype, "ignoreCase", void 0), jh([zt("contains")], t.prototype, "operator", void 0), jh([zt()], t.prototype, "key", void 0), jh([zt()], t.prototype, "hierarchyMode", void 0), t
    }(oi),
    qh = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Wh = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    _h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return qh(t, e), Wh([zt("Row")], t.prototype, "mode", void 0), Wh([zt("Flow")], t.prototype, "cellSelectionMode", void 0), Wh([zt("Single")], t.prototype, "type", void 0), Wh([zt(!1)], t.prototype, "persistSelection", void 0), Wh([zt("Default")], t.prototype, "checkboxMode", void 0), Wh([zt(!1)], t.prototype, "checkboxOnly", void 0), Wh([zt(!0)], t.prototype, "enableToggle", void 0), t
    }(oi),
    Gh = function() {
        function e(e) {
            this.parent = e, this.templateResult = null, this.parent.grid.on("template-result", this.columnTemplateResult, this), this.parent.grid.on("reactTemplateRender", this.reactTemplateRender, this)
        }
        return e.prototype.RowModifier = function(e) {
            if (e.data) {
                var t, i = e.data,
                    n = i.parentItem;
                if (g(i.parentItem) || (!(g((t = this.parent).grid.searchSettings.key) || "" === t.grid.searchSettings.key || "Child" !== t.searchSettings.hierarchyMode && "None" !== t.searchSettings.hierarchyMode) || t.allowFiltering && t.grid.filterSettings.columns.length && ("Child" === t.filterSettings.hierarchyMode || "None" === t.filterSettings.hierarchyMode)) || this.parent.allowPaging && "Root" !== this.parent.pageSettings.pageSizeMode && (!Dh(this.parent) || Ih(this.parent))) + e.row.getAttribute("aria-rowindex");
                else i.parentItem.index, (this.parent.initialRender && (!(g(n[this.parent.expandStateMapping]) || n[this.parent.expandStateMapping]) || this.parent.enableCollapseAll) || !Rh(this.parent, e.data, this.parent.grid.getCurrentViewRecords())) && (e.row.style.display = "none");
                if (Dh(this.parent) && !Ih(this.parent)) {
                    var r = this.parent,
                        o = this.parent.getCurrentViewRecords().filter((function(e) {
                            return a(r.idMapping, e) === a(r.parentIdMapping, i)
                        }));
                    if (o.length > 0) {
                        var s = o[0].expanded ? "table-row" : "none";
                        e.row.setAttribute("style", "display: " + s + ";")
                    }
                }
                xl("isSummaryRow", e.data) && ut([e.row], "e-summaryrow"), e.row.querySelector(".e-treegridexpand") ? e.row.setAttribute("aria-expanded", "true") : e.row.querySelector(".e-treegridcollapse") && e.row.setAttribute("aria-expanded", "false"), this.parent.enableCollapseAll && this.parent.initialRender && (g(i.parentItem) || (e.row.style.display = "none")), this.parent.trigger("rowDataBound", e)
            }
        }, e.prototype.cellRender = function(e) {
            if (e.data) {
                var t, i, n = this.parent.grid,
                    r = e.data,
                    o = g(r.filterLevel) ? r.level : r.filterLevel,
                    s = 0,
                    a = this.parent.getColumnByUid(e.column.uid),
                    l = r.isSummaryRow;
                if (t = g(r.parentItem) ? r.index : r.parentItem.index, n.getColumnIndexByUid(e.column.uid) === this.parent.treeColumnIndex && ("add" === e.requestType || "delete" === e.requestType || g(e.cell.querySelector(".e-treecell")))) {
                    for (var h = ct("div", {
                            className: "e-treecolumn-container"
                        }), p = ct("span", {
                            className: "e-icons e-none",
                            styles: "width: 10px; display: inline-block"
                        }), d = 0; d < o; d++) s += 10, h.appendChild(p.cloneNode());
                    var c = g(r.hasFilteredChildRecords) ? r.hasChildRecords : r.hasFilteredChildRecords;
                    if (c && !g(r.childRecords) && (c = !(0 === r.childRecords.length)), c) {
                        ut([e.cell], "e-treerowcell");
                        var u = ct("span", {
                            className: "e-icons"
                        });
                        ut([u], (this.parent.initialRender ? r.expanded && (g(r[this.parent.expandStateMapping]) || r[this.parent.expandStateMapping]) && !this.parent.enableCollapseAll : !(!r.expanded || !Rh(this.parent, r, this.parent.grid.getCurrentViewRecords()))) ? "e-treegridexpand" : "e-treegridcollapse"), s += 18, h.appendChild(u), p.style.width = "7px", s += 7, h.appendChild(p.cloneNode())
                    } else(o || !o && !r.level) && (s += 20, h.appendChild(p.cloneNode()), h.appendChild(p.cloneNode()));
                    i = ct("span", {
                        className: "e-treecell"
                    }), this.parent.allowTextWrap && (i.style.width = "Calc(100% - " + s + "px)"), ut([e.cell], "e-gridrowindex" + t + "level" + r.level), this.updateTreeCell(e, i, h), h.appendChild(i), e.cell.appendChild(h)
                }
                if ((this.parent.frozenColumns > this.parent.treeColumnIndex && n.getColumnIndexByUid(e.column.uid) === this.parent.frozenColumns + 1 || this.parent.frozenColumns <= this.parent.treeColumnIndex && n.getColumnIndexByUid(e.column.uid) === this.parent.frozenColumns - 1) && ut([e.cell], "e-gridrowindex" + t + "level" + r.level), !g(a) && a.showCheckbox && (this.parent.notify("columnCheckbox", e), this.parent.allowTextWrap)) {
                    var f = e.cell.querySelectorAll(".e-frame")[0];
                    s += parseInt(f.style.width, 16), s += 10, (i = n.getColumnIndexByUid(e.column.uid) === this.parent.treeColumnIndex ? e.cell.querySelector(".e-treecell") : e.cell.querySelector(".e-treecheckbox")).style.width = "Calc(100% - " + s + "px)"
                }
                if (l) {
                    ut([e.cell], "e-summarycell");
                    var m = xl(e.column.field, e.data);
                    null != e.cell.querySelector(".e-treecell") ? e.cell.querySelector(".e-treecell").innerHTML = m : e.cell.innerHTML = m
                }
                g(this.parent.rowTemplate) && this.parent.trigger("queryCellInfo", e)
            }
        }, e.prototype.updateTreeCell = function(e, t, i) {
            var n = this.parent.columns[this.parent.treeColumnIndex];
            n.field !== e.column.field || g(n.template) || (e.column.template = n.template, e.column.templateFn = ja(e.column.template), e.cell.classList.add("e-templatecell"));
            var r = null != e.cell.querySelector(".e-treecell") ? e.cell.querySelector(".e-treecell").innerHTML : e.cell.innerHTML;
            if ("object" == typeof e.column.template && this.templateResult) $a(t, this.templateResult), this.templateResult = null, e.cell.innerHTML = "";
            else if (e.cell.classList.contains("e-templatecell")) {
                var o = e.cell.children.length,
                    s = this.parent.element.id + e.column.uid;
                if (n.field !== e.column.field || g(n.template))
                    for (; 0 < o; o = e.cell.children.length) t.appendChild(e.cell.children[0]);
                else {
                    if (this.parent.isReact) e.column.templateFn(e.data, this.parent, "template", s, null, null, t), g(this.parent.grid.portals) && (this.parent.grid.portals = this.parent.portals), this.parent.renderReactTemplates();
                    else {
                        $a(t, e.column.templateFn(qa({
                            index: ""
                        }, e.data), this.parent, "template", s, this.parent.isStringTemplate))
                    }
                    delete e.column.template, delete e.column.templateFn, e.cell.innerHTML = ""
                }
            } else t.innerHTML = r, e.cell.innerHTML = ""
        }, e.prototype.columnTemplateResult = function(e) {
            this.templateResult = e.template
        }, e.prototype.reactTemplateRender = function(e) {
            this.parent.portals = e, this.parent.notify("renderReactTemplate", this.parent.portals), this.parent.renderReactTemplates()
        }, e.prototype.destroy = function() {
            this.parent.grid.off("template-result", this.columnTemplateResult), this.parent.grid.off("reactTemplateRender", this.reactTemplateRender)
        }, e
    }(),
    Uh = function() {
        function e(e) {
            this.addedRecords = "addedRecords", this.parent = e, this.parentItems = [], this.taskIds = [], this.hierarchyData = [], this.storedIndex = -1, this.sortedData = [], this.isSortAction = !1, this.addEventListener(), this.dataResults = {}, this.isSelfReference = !g(this.parent.parentIdMapping)
        }
        return e.prototype.addEventListener = function() {
            this.parent.on("updateRemoteLevel", this.updateParentRemoteData, this), this.parent.grid.on("sorting-begin", this.beginSorting, this), this.parent.on("updateAction", this.updateData, this), this.parent.on("remoteExpand", this.collectExpandingRecs, this), this.parent.on("dataProcessor", this.dataProcessor, this)
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off("remoteExpand", this.collectExpandingRecs), this.parent.off("updateRemoteLevel", this.updateParentRemoteData), this.parent.off("updateAction", this.updateData), this.parent.off("dataProcessor", this.dataProcessor), this.parent.grid.off("sorting-begin", this.beginSorting))
        }, e.prototype.destroy = function() {
            this.removeEventListener()
        }, e.prototype.isRemote = function() {
            return this.parent.dataSource instanceof yn
        }, e.prototype.convertToFlatData = function(e) {
            var t = this;
            this.parent.flatData = 0 !== Object.keys(e).length || this.parent.dataSource instanceof yn ? [] : this.parent.dataSource, this.parent.parentData = [];
            if (Dh(this.parent) && !Ih(this.parent) && e instanceof yn && !(e instanceof Array)) {
                var i = this.parent.dataSource;
                if (this.parent.parentIdMapping) {
                    if (this.parent.query = g(this.parent.query) ? new on : this.parent.query, this.parent.parentIdMapping) {
                        var n = this.parent.query.params.filter((function(e) {
                            return "IdMapping" === e.key
                        }));
                        this.parent.initialRender && !n.length && (this.parent.query.where(this.parent.parentIdMapping, "equal", null), this.parent.query.addParams("IdMapping", this.parent.idMapping))
                    }
                    if (!this.parent.hasChildMapping && ("BlazorAdaptor" !== this.parent.dataSource.adaptorName || this.parent.isClientRender)) {
                        var r = this.parent.query.clone();
                        r.queries = [], (r = r.select([this.parent.parentIdMapping])).isCountRequired = !0, i.executeQuery(r).then((function(e) {
                            t.parentItems = wn.distinct(e.result, t.parent.parentIdMapping, !1), 0 === xl("dataSource.requests", t.parent).filter((function(e) {
                                return "OK" !== e.httpRequest.statusText
                            })).length && (l("grid.contentModule.isLoaded", !0, t.parent), g(t.zerothLevelData) || (l("cancel", !1, t.zerothLevelData), a("grid.renderModule", t.parent).dataManagerSuccess(t.zerothLevelData), t.zerothLevelData = null), t.parent.grid.hideSpinner())
                        }))
                    }
                }
            } else e instanceof Array && this.convertJSONData(e)
        }, e.prototype.convertJSONData = function(e) {
            if (this.hierarchyData = [], this.taskIds = [], this.parent.idMapping)
                for (var t = 0; t < Object.keys(e).length; t++) {
                    var i = e[t];
                    this.hierarchyData.push(u({}, i)), g(i[this.parent.idMapping]) || this.taskIds.push(i[this.parent.idMapping])
                } else this.hierarchyData = e;
            if (this.isSelfReference) {
                var n = [],
                    r = new yn(this.hierarchyData).executeLocal((new on).group(this.parent.parentIdMapping));
                for (t = 0; t < r.length; t++) {
                    var o = r[t],
                        s = this.taskIds.indexOf(o.key);
                    if (!g(o.key) && s > -1) {
                        var a = o.items;
                        this.hierarchyData[s][this.parent.childMapping] = a
                    } else n.push.apply(n, o.items)
                }
                this.hierarchyData = this.selfReferenceUpdate(n)
            }
            if (Object.keys(this.hierarchyData).length) this.createRecords(this.hierarchyData);
            else {
                var l = !(this.parent.dataSource instanceof yn) && this.parent.isGantt;
                this.parent.flatData = l ? this.parent.dataSource : []
            }
            this.storedIndex = -1
        }, e.prototype.selfReferenceUpdate = function(e) {
            for (var t = []; this.hierarchyData.length > 0 && e.length > 0;) {
                var i = e.indexOf(this.hierarchyData[0]); - 1 === i ? this.hierarchyData.shift() : (t.push(this.hierarchyData.shift()), e.splice(i, 1))
            }
            return t
        }, e.prototype.updateParentRemoteData = function(e) {
            var t = e.result;
            if (this.parent.hasChildMapping || this.parentItems.length || "BlazorAdaptor" === this.parent.dataSource.adaptorName && !this.parent.isClientRender || this.parent.loadChildOnDemand)
                if ("BlazorAdaptor" === this.parent.dataSource.adaptorName && !this.parent.isClientRender || this.parent.loadChildOnDemand) g(t) || this.convertToFlatData(t);
                else
                    for (var i = 0; i < t.length; i++) g(t[i].index) && (t[i].taskData = u({}, t[i]), t[i].uniqueID = Za(this.parent.element.id + "_data_"), l("uniqueIDCollection." + t[i].uniqueID, t[i], this.parent), t[i].level = 0, t[i].index = Math.ceil(1e3 * Math.random()), (t[i][this.parent.hasChildMapping] || -1 !== this.parentItems.indexOf(t[i][this.parent.idMapping])) && (t[i].hasChildRecords = !0), t[i].checkboxState = "uncheck");
            else this.zerothLevelData = e, l("cancel", !0, e);
            e.result = "BlazorAdaptor" === this.parent.dataSource.adaptorName && !this.parent.isClientRender && !g(t) || this.parent.loadChildOnDemand ? this.parent.flatData : t, this.parent.notify("updateResults", e)
        }, e.prototype.collectExpandingRecs = function(e, t) {
            var i, n = this.parent.getRows();
            if (this.parent.rowTemplate) {
                var r = this.parent.getContentTable().rows;
                n = [].slice.call(r)
            }
            if (e.rows.length > 0) {
                t || (e.record.expanded = !0);
                for (var o = 0; o < e.rows.length; o++) {
                    if (S() && this.parent.isServerRendered ? (gt([e.rows[o]], "e-treerowcollapsed"), ut([e.rows[o]], "e-treerowexpanded")) : e.rows[o].style.display = "table-row", S() && "BlazorAdaptor" === this.parent.dataSource.adaptorName && !this.parent.isClientRender || this.parent.loadChildOnDemand) {
                        var s = e.rows[o].getElementsByClassName("e-treegridcollapse")[0];
                        i = this.parent.rowTemplate ? this.parent.grid.getCurrentViewRecords()[e.rows[o].rowIndex] : this.parent.grid.getRowObjectFromUID(e.rows[o].getAttribute("data-Uid")).data, !g(s) && i.expanded && (ut([s], "e-treegridexpand"), gt([s], "e-treegridcollapse"));
                        var a;
                        (a = n.filter((function(e) {
                            return e.querySelector(".e-gridrowindex" + i.index + "level" + (i.level + 1))
                        }))).length && i.expanded && this.collectExpandingRecs({
                            record: i,
                            rows: a,
                            parentRow: e.parentRow
                        }, !0)
                    }
                    var l = e.rows[o].querySelector(".e-detailrowcollapse");
                    g(l) || this.parent.grid.detailRowModule.expand(l)
                }
            } else this.fetchRemoteChildData({
                record: e.record,
                rows: e.rows,
                parentRow: e.parentRow
            })
        }, e.prototype.fetchRemoteChildData = function(e, t) {
            var i = this,
                n = {
                    row: e.parentRow,
                    data: e.record
                },
                r = this.parent.dataSource,
                o = this.parent.grid.getDataModule().generateQuery(),
                s = o.queries.filter((function(e) {
                    return "onPage" !== e.fn && "onWhere" !== e.fn
                }));
            o.queries = s, o.isCountRequired = !0, o.where(this.parent.parentIdMapping, "equal", e.record[this.parent.idMapping]), Xi(this.parent.element), r.executeQuery(o).then((function(t) {
                var r = i.parent.grid.currentViewData,
                    o = r.indexOf(e.record),
                    s = xl("actual.nextLevel", t),
                    h = t.result;
                e.record.childRecords = h;
                for (var p = 0; p < h.length; p++) {
                    h[p].taskData = u({}, h[p]), h[p].level = e.record.level + 1, h[p].index = Math.ceil(1e3 * Math.random());
                    var d = u({}, e.record);
                    delete d.childRecords, h[p].parentItem = d, h[p].parentUniqueID = e.record.uniqueID, h[p].uniqueID = Za(i.parent.element.id + "_data_"), h[p].checkboxState = "uncheck", l("uniqueIDCollection." + h[p].uniqueID, h[p], i.parent), !h[p][i.parent.hasChildMapping] && -1 === i.parentItems.indexOf(h[p][i.parent.idMapping]) || s && !s[p] || (h[p].hasChildRecords = !0, h[p].expanded = !1), r.splice(o + p + 1, 0, h[p])
                }
                if (l("result", r, t), l("action", "beforecontentrender", t), i.parent.trigger("actionComplete", t), Ji(i.parent.element), i.parent.grid.aggregates.length > 0 && !i.parent.enableVirtualization) {
                    var c = xl("query", t);
                    if (g(c) && (c = a("grid.renderModule.data", i.parent).aggregateQuery(new on)), !g(c)) {
                        var f = c.queries.filter((function(e) {
                            return "onAggregates" === e.fn
                        }));
                        t.result = i.parent.summaryModule.calculateSummaryValue(f, t.result, !0)
                    }
                }
                t.count = i.parent.grid.pageSettings.totalRecordsCount;
                var m = {};
                i.parent.enableVirtualization && i.remoteVirtualAction(m), a("grid.renderModule", i.parent).dataManagerSuccess(t, m), i.parent.trigger("expanded", n)
            }))
        }, e.prototype.remoteVirtualAction = function(e) {
            e.requestType = "refresh", l("isExpandCollapse", !0, e);
            var t = a("grid.contentModule", this.parent),
                i = a("currentInfo", t),
                n = a("prevInfo", t);
            i.loadNext && this.parent.grid.pageSettings.currentPage === i.nextInfo.page && (this.parent.grid.pageSettings.currentPage = n.page)
        }, e.prototype.beginSorting = function() {
            this.isSortAction = !0
        }, e.prototype.createRecords = function(e, t) {
            for (var i = [], n = 0, r = Object.keys(e).length; n < r; n++) {
                var o = u({}, e[n]);
                o.taskData = e[n];
                var s = 0;
                if (this.storedIndex++, o.hasOwnProperty("index") || (o.index = this.storedIndex), (!g(o[this.parent.childMapping]) || o[this.parent.hasChildMapping] && Eh(this.parent)) && (o.hasChildRecords = !0, this.parent.enableCollapseAll || !g(this.parent.dataStateChange) && g(o[this.parent.childMapping]) ? o.expanded = !1 : o.expanded = !!g(o[this.parent.expandStateMapping]) || o[this.parent.expandStateMapping]), o.hasOwnProperty("index") || (o.index = (o.hasChildRecords, this.storedIndex)), this.isSelfReference && g(o[this.parent.parentIdMapping]) && this.parent.parentData.push(o), o.uniqueID = Za(this.parent.element.id + "_data_"), l("uniqueIDCollection." + o.uniqueID, o, this.parent), !g(t)) {
                    var a = u({}, t);
                    delete a.childRecords, delete a[this.parent.childMapping], this.isSelfReference && delete a.taskData[this.parent.childMapping], o.parentItem = a, o.parentUniqueID = a.uniqueID, s = t.level + 1
                }
                if (o.hasOwnProperty("level") || (o.level = s), o.checkboxState = "uncheck", (g(o[this.parent.parentIdMapping]) || o.parentItem) && this.parent.flatData.push(o), this.isSelfReference || 0 !== o.level || this.parent.parentData.push(o), !g(o[this.parent.childMapping] && o[this.parent.childMapping].length)) {
                    var h = this.createRecords(o[this.parent.childMapping], o);
                    o.childRecords = h
                }
                i.push(o)
            }
            return i
        }, e.prototype.dataProcessor = function(e) {
            var t, i = xl("isExport", e),
                n = xl("expresults", e),
                r = xl("exportType", e),
                o = xl("isPrinting", e),
                s = xl("actionArgs", e),
                l = xl("requestType", e),
                h = xl("data", e),
                p = xl("action", e),
                d = s,
                c = this.parent.getPrimaryKeyFieldNames()[0],
                u = xl("data", d);
            g(d) || g(d.action) || "add" !== d.action || g(d.data) || !g(d.data[c]) || (d.data[c] = e.result[d.index][c], u.taskData[c] = e.result[d.index][c]), (!g(s) && Object.keys(s).length || "save" === l) && (l = l || s.requestType, h = h || xl("data", s), p = p || xl("action", s), "Batch" === this.parent.editSettings.mode && (this.batchChanges = this.parent.grid.editModule.getBatchChanges()), ("add" === p || "batchsave" === l && "Batch" === this.parent.editSettings.mode && this.batchChanges[this.addedRecords].length) && (this.parent.grid.currentViewData = e.result), this.parent.isLocalData && this.updateAction(h, p, l));
            var f = (t = i && !g(n) ? n : Eh(this.parent) ? a("result", this.parent.grid.dataSource) : this.parent.grid.dataSource) instanceof yn ? t.dataSource.json : t,
                m = Eh(this.parent) ? a("count", this.parent.dataSource) : f.length;
            if (this.parent.grid.allowFiltering && this.parent.grid.filterSettings.columns.length || this.parent.grid.searchSettings.key.length > 0) {
                var y = new on;
                g(x = xl("query", e)) && (x = new on, x = a("grid.renderModule.data", this.parent).filterQuery(x), x = a("grid.renderModule.data", this.parent).searchQuery(x));
                var v = x.queries.filter((function(e) {
                        return "onWhere" === e.fn
                    })),
                    b = x.queries.filter((function(e) {
                        return "onSearch" === e.fn
                    }));
                y.queries = v.concat(b);
                var w = new yn(f).executeLocal(y);
                if (this.parent.notify("updateFilterRecs", {
                        data: w
                    }), f = this.dataResults.result, this.dataResults.result = null, this.parent.grid.aggregates.length > 0) {
                    var C = xl("query", e);
                    if (g(x) && (x = a("grid.renderModule.data", this.parent).aggregateQuery(new on)), !g(C)) {
                        var S = C.queries.filter((function(e) {
                            return "onAggregates" === e.fn
                        }));
                        f = this.parent.summaryModule.calculateSummaryValue(S, f, !0)
                    }
                }
            }
            if (this.parent.grid.aggregates.length && 0 === this.parent.grid.sortSettings.columns.length && 0 === this.parent.grid.filterSettings.columns.length && !this.parent.grid.searchSettings.key.length) {
                var x;
                g(x = xl("query", e)) && (x = a("grid.renderModule.data", this.parent).aggregateQuery(new on));
                S = x.queries.filter((function(e) {
                    return "onAggregates" === e.fn
                }));
                f = this.parent.summaryModule.calculateSummaryValue(S, this.parent.flatData, !0)
            }
            if (this.parent.grid.sortSettings.columns.length > 0 || this.isSortAction) {
                this.isSortAction = !1;
                var k;
                k = this.parent.parentData;
                C = xl("query", e);
                for (var T = new on, D = this.parent.grid.sortSettings.columns.length - 1; D >= 0; D--) {
                    var E = this.parent.grid.getColumnByField(this.parent.grid.sortSettings.columns[D].field),
                        R = E.sortComparer && Ih(this.parent) ? E.sortComparer.bind(E) : this.parent.grid.sortSettings.columns[D].direction;
                    T.sortBy(this.parent.grid.sortSettings.columns[D].field, R)
                }
                var P = new yn(k).executeLocal(T);
                P;
                var I = {
                    modifiedData: P,
                    filteredData: f,
                    srtQry: T
                };
                if (this.parent.notify("createSort", I), f = I.modifiedData, this.dataResults.result = null, this.sortedData = f, this.parent.notify("updateModel", {}), this.parent.grid.aggregates.length > 0 && !g(C)) {
                    S = xl("query", e).queries.filter((function(e) {
                        return "onAggregates" === e.fn
                    }));
                    f = this.parent.summaryModule.calculateSummaryValue(S, this.sortedData, !1)
                }
            }
            m = Eh(this.parent) ? a("count", this.parent.dataSource) : f.length;
            var M = this.paging(f, m, i, o, r, e);
            f = M.result, m = M.count, e.result = f, e.count = m, this.parent.notify("updateResults", e)
        }, e.prototype.paging = function(e, t, i, n, r, o) {
            return !this.parent.allowPaging || i && "CurrentPage" !== r || n && "CurrentPage" !== this.parent.printMode ? !this.parent.enableVirtualization || i && "CurrentPage" !== r || "save" === a("requestType", o) || (this.parent.notify("pagingActions", {
                result: e,
                count: t,
                actionArgs: a("actionArgs", o)
            }), e = this.dataResults.result, t = this.dataResults.count) : (this.parent.notify("pagingActions", {
                result: e,
                count: t
            }), e = this.dataResults.result, t = Eh(this.parent) ? a("count", this.parent.dataSource) : this.dataResults.count), {
                result: e,
                count: t
            }
        }, e.prototype.updateData = function(e) {
            this.dataResults = e
        }, e.prototype.updateAction = function(e, t, i) {
            "delete" !== i && "save" !== i || this.parent.notify("crudAction", {
                value: e,
                action: t || i
            }), "batchsave" === i && "Batch" === this.parent.editSettings.mode && this.parent.notify("batchSave", {})
        }, e
    }();
! function(e) {
    e[e.Add = 0] = "Add", e[e.Edit = 1] = "Edit", e[e.Update = 2] = "Update", e[e.Delete = 3] = "Delete", e[e.Cancel = 4] = "Cancel", e[e.Search = 5] = "Search", e[e.ExpandAll = 6] = "ExpandAll", e[e.CollapseAll = 7] = "CollapseAll", e[e.ExcelExport = 8] = "ExcelExport", e[e.PdfExport = 9] = "PdfExport", e[e.CsvExport = 10] = "CsvExport", e[e.Print = 11] = "Print", e[e.RowIndent = 12] = "RowIndent", e[e.RowOutdent = 13] = "RowOutdent"
}(Bh || (Bh = {})),
function(e) {
    e[e.AutoFit = 0] = "AutoFit", e[e.AutoFitAll = 1] = "AutoFitAll", e[e.SortAscending = 2] = "SortAscending", e[e.SortDescending = 3] = "SortDescending", e[e.Edit = 4] = "Edit", e[e.Delete = 5] = "Delete", e[e.Save = 6] = "Save", e[e.Cancel = 7] = "Cancel", e[e.PdfExport = 8] = "PdfExport", e[e.ExcelExport = 9] = "ExcelExport", e[e.CsvExport = 10] = "CsvExport", e[e.FirstPage = 11] = "FirstPage", e[e.PrevPage = 12] = "PrevPage", e[e.LastPage = 13] = "LastPage", e[e.NextPage = 14] = "NextPage", e[e.AddRow = 15] = "AddRow"
}(Fh || (Fh = {}));
var Kh = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Yh = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Xh = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Kh(t, e), Yh([zt(12)], t.prototype, "pageSize", void 0), Yh([zt(8)], t.prototype, "pageCount", void 0), Yh([zt(1)], t.prototype, "currentPage", void 0), Yh([zt()], t.prototype, "totalRecordsCount", void 0), Yh([zt(!1)], t.prototype, "enableQueryString", void 0), Yh([zt(!1)], t.prototype, "pageSizes", void 0), Yh([zt(null)], t.prototype, "template", void 0), Yh([zt("All")], t.prototype, "pageSizeMode", void 0), t
    }(oi),
    Qh = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Jh = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Zh = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.intl = new ee, t.templateFn = {}, t
        }
        return Qh(t, e), t.prototype.setFormatter = function(e) {
            this.format && (this.format.skeleton || this.format.format) && (this.formatFn = this.getFormatFunction(this.format))
        }, t.prototype.getFormatFunction = function(e) {
            return e.type ? this.intl.getDateFormat(e) : this.intl.getNumberFormat(e)
        }, t.prototype.getFormatter = function() {
            return this.formatFn
        }, t.prototype.setTemplate = function(e) {
            void 0 === e && (e = {}), void 0 !== this.footerTemplate && (this.templateFn[d(dr, dr.Summary)] = {
                fn: Ge(this.footerTemplate, e),
                property: "footerTemplate"
            })
        }, t.prototype.getTemplate = function(e) {
            return this.templateFn[d(dr, e)]
        }, t.prototype.setPropertiesSilent = function(e) {
            this.setProperties(e, !0)
        }, Jh([zt()], t.prototype, "type", void 0), Jh([zt()], t.prototype, "footerTemplate", void 0), Jh([zt()], t.prototype, "field", void 0), Jh([zt()], t.prototype, "format", void 0), Jh([zt()], t.prototype, "columnName", void 0), Jh([zt()], t.prototype, "customAggregate", void 0), t
    }(oi),
    $h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Qh(t, e), Jh([Wt([], Zh)], t.prototype, "columns", void 0), Jh([zt(!0)], t.prototype, "showChildSummary", void 0), t
    }(oi),
    ep = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    tp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    ip = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return ep(t, e), tp([zt(!1)], t.prototype, "allowAdding", void 0), tp([zt(!1)], t.prototype, "allowEditing", void 0), tp([zt(!1)], t.prototype, "allowDeleting", void 0), tp([zt("Cell")], t.prototype, "mode", void 0), tp([zt("Top")], t.prototype, "newRowPosition", void 0), tp([zt(!0)], t.prototype, "allowEditOnDblClick", void 0), tp([zt(!0)], t.prototype, "showConfirmDialog", void 0), tp([zt(!1)], t.prototype, "showDeleteConfirmDialog", void 0), tp([zt("")], t.prototype, "template", void 0), tp([zt({})], t.prototype, "dialog", void 0), t
    }(oi),
    np = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    rp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    op = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return np(t, e), rp([zt()], t.prototype, "field", void 0), rp([zt()], t.prototype, "direction", void 0), t
    }(oi),
    sp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return np(t, e), rp([Wt([], op)], t.prototype, "columns", void 0), rp([zt(!0)], t.prototype, "allowUnsort", void 0), t
    }(oi),
    ap = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    lp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    hp = function(e) {
        function t(t, n) {
            var r = e.call(this, t, n) || this;
            r.dataResults = {}, r.uniqueIDCollection = {}, r.uniqueIDFilterCollection = {}, r.changedRecords = "changedRecords", r.deletedRecords = "deletedRecords", r.addedRecords = "addedRecords", i.Inject(Nh), l("mergePersistData", r.mergePersistTreeGridData, r);
            return g(r.injectedModules.Logger) || Pa.Inject(fh), r.grid = new Pa, r
        }
        var i;
        return ap(t, e), i = t, t.prototype.excelExport = function(e, t, i, n) {
            return S() ? (this.excelExportModule.Map(e, t, i, n, !1), null) : this.excelExportModule.Map(e, t, i, n, !1)
        }, t.prototype.csvExport = function(e, t, i, n) {
            return S() ? (this.excelExportModule.Map(e, t, i, n, !0), null) : this.excelExportModule.Map(e, t, i, n, !0)
        }, t.prototype.pdfExport = function(e, t, i, n) {
            return S() ? (this.pdfExportModule.Map(e, t, i, n), null) : this.pdfExportModule.Map(e, t, i, n)
        }, t.prototype.getModuleName = function() {
            return "treegrid"
        }, t.prototype.preRender = function() {
            this.TreeGridLocale(), this.initProperties(), this.defaultLocale = {
                Above: "Above",
                Below: "Below",
                AddRow: "Add Row",
                ExpandAll: "Expand All",
                CollapseAll: "Collapse All",
                RowIndent: "Indent",
                RowOutdent: "Outdent"
            }, this.l10n = new ki("treegrid", this.defaultLocale, this.locale), this.isSelfReference && g(this.childMapping) && (this.childMapping = "Children")
        }, t.prototype.sortByColumn = function(e, t, i) {
            this.sortModule.sortColumn(e, t, i)
        }, t.prototype.clearSorting = function() {
            this.sortModule && this.sortModule.clearSorting()
        }, t.prototype.removeSortColumn = function(e) {
            this.sortModule.removeSortColumn(e)
        }, t.prototype.search = function(e) {
            this.grid.search(e)
        }, t.prototype.autoFitColumns = function(e) {
            this.resizeModule.autoFitColumns(e), this.updateColumnModel()
        }, t.prototype.reorderColumns = function(e, t) {
            this.grid.reorderColumns(e, t)
        }, t.prototype.TreeGridLocale = function() {
            var e, t, i = ki.locale;
            e = {}, l(this.locale, {}, e), t = xl(this.locale, i), l("grid", xl(this.getModuleName(), t), xl(this.locale, e)), ki.load(e)
        }, t.prototype.print = function() {
            this.printModule.print()
        }, t.prototype.treeGridkeyActionHandler = function(e) {
            if (this.allowKeyboard) switch (e.action) {
                case "ctrlDownArrow":
                    this.expandAll();
                    break;
                case "ctrlUpArrow":
                    this.collapseAll();
                    break;
                case "ctrlShiftUpArrow":
                    var t = e.target.closest(".e-rowcell").closest("tr"),
                        i = t.querySelector(".e-treegridexpand");
                    null != i && this.expandCollapseRequest(t.querySelector(".e-treegridexpand"));
                    break;
                case "ctrlShiftDownArrow":
                    var n = e.target.closest(".e-rowcell").closest("tr"),
                        r = n.querySelector(".e-treegridcollapse");
                    null != r && this.expandCollapseRequest(n.querySelector(".e-treegridcollapse"));
                    break;
                case "downArrow":
                    var o = e.target.parentElement,
                        s = this.findnextRowElement(o);
                    if (null !== s) {
                        var a = s.rowIndex;
                        this.selectRow(a);
                        var l = e.target.cellIndex,
                            h = s.children[l];
                        ut([h], "e-focused"), ut([h], "e-focus")
                    } else this.clearSelection();
                    break;
                case "upArrow":
                    var p = e.target.parentElement,
                        d = this.findPreviousRowElement(p);
                    if (null !== d) {
                        var c = d.rowIndex;
                        this.selectRow(c);
                        var u = e.target.cellIndex,
                            g = d.children[u];
                        ut([g], "e-focused"), ut([g], "e-focus")
                    } else this.clearSelection()
            }
        }, t.prototype.findnextRowElement = function(e) {
            var t = e.nextElementSibling;
            return null === t || -1 === t.className.indexOf("e-summaryrow") && "none" !== t.style.display || (t = this.findnextRowElement(t)), t
        }, t.prototype.findPreviousRowElement = function(e) {
            var t = e.previousElementSibling;
            return null === t || -1 === t.className.indexOf("e-summaryrow") && "none" !== t.style.display || (t = this.findPreviousRowElement(t)), t
        }, t.prototype.initProperties = function() {
            this.defaultLocale = {}, this.flatData = [], this.parentData = [], this.columnModel = [], this.isExpandAll = !1, this.isCollapseAll = !1, this.keyConfigs = {
                ctrlDownArrow: "ctrl+downarrow",
                ctrlUpArrow: "ctrl+uparrow",
                ctrlShiftUpArrow: "ctrl+shift+uparrow",
                ctrlShiftDownArrow: "ctrl+shift+downarrow",
                downArrow: "downArrow",
                upArrow: "upArrow"
            }, this.isLocalData = !(this.dataSource instanceof yn) || this.dataSource.dataSource.offline || !g(this.dataSource.ready) || this.dataSource.adaptor instanceof fn, this.isSelfReference = !g(this.parentIdMapping)
        }, t.prototype.wireEvents = function() {
            ye.add(this.grid.element, "click", this.mouseClickHandler, this), ye.add(this.element, "touchend", this.mouseClickHandler, this), this.keyboardModule = new xi(this.element, {
                keyAction: this.treeGridkeyActionHandler.bind(this),
                keyConfigs: this.keyConfigs,
                eventName: "keydown"
            }), this.allowKeyboard && (this.element.tabIndex = -1 === this.element.tabIndex ? 0 : this.element.tabIndex)
        }, t.prototype.requiredModules = function() {
            var e = [];
            return this.isDestroyed || (e.push({
                member: "filter",
                args: [this, this.filterSettings]
            }), g(this.toolbar) || e.push({
                member: "toolbar",
                args: [this]
            }), this.contextMenuItems && e.push({
                member: "contextMenu",
                args: [this]
            }), this.allowPaging && e.push({
                member: "pager",
                args: [this, this.pageSettings]
            }), this.allowReordering && e.push({
                member: "reorder",
                args: [this]
            }), this.allowSorting && e.push({
                member: "sort",
                args: [this]
            }), this.aggregates.length > 0 && e.push({
                member: "summary",
                args: [this]
            }), e.push({
                member: "resize",
                args: [this]
            }), this.allowExcelExport && e.push({
                member: "ExcelExport",
                args: [this]
            }), (this.frozenColumns || this.frozenRows || this.getFrozenColumns()) && e.push({
                member: "freeze",
                args: [this]
            }), this.detailTemplate && e.push({
                member: "detailRow",
                args: [this]
            }), this.allowPdfExport && e.push({
                member: "PdfExport",
                args: [this]
            }), this.showColumnMenu && e.push({
                member: "columnMenu",
                args: [this]
            }), this.showColumnChooser && e.push({
                member: "ColumnChooser",
                args: [this]
            }), this.extendRequiredModules(e)), e
        }, t.prototype.extendRequiredModules = function(e) {
            this.allowRowDragAndDrop && e.push({
                member: "rowDragAndDrop",
                args: [this]
            }), (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) && e.push({
                member: "edit",
                args: [this]
            }), this.isCommandColumn(this.columns) && e.push({
                member: "commandColumn",
                args: [this]
            }), this.allowSelection && e.push({
                member: "selection",
                args: [this]
            }), this.enableVirtualization && e.push({
                member: "virtualScroll",
                args: [this]
            }), e.push({
                member: "logger",
                args: [this.grid]
            })
        }, t.prototype.isCommandColumn = function(e) {
            var t = this;
            return e.some((function(e) {
                return e.columns ? t.isCommandColumn(e.columns) : !(!e.commands && !e.commandsTemplate)
            }))
        }, t.prototype.unwireEvents = function() {
            this.grid && this.grid.element && ye.remove(this.grid.element, "click", this.mouseClickHandler)
        }, t.prototype.log = function(e, t) {
            this.loggerModule && this.loggerModule.treeLog(e, t, this)
        }, t.prototype.render = function() {
            var e = this;
            this.isReact && (this.grid.isReact = !0), Ni({
                target: this.element
            }, this.createElement), this.log(["mapping_fields_missing"]), this.renderModule = new Gh(this), this.dataModule = new Uh(this), this.printModule = new Hh(this);
            if (this.isClientRender && (this.isServerRendered = !1), this.trigger("load"), this.autoGenerateColumns(), this.initialRender = !0, g(this.dataSource) || this.convertTreeData(this.dataSource), !S() || !this.isServerRendered) {
                this.loadGrid(), this.element.classList.contains("e-treegrid") && this.rowDropSettings.targetID && (this.grid.rowDropSettings.targetID += "_gridcontrol"), this.addListener();
                var t = ct("div", {
                    id: this.element.id + "_gridcontrol"
                });
                ut([this.element], "e-treegrid"), g(this.height) || "string" != typeof this.height || -1 === this.height.indexOf("%") || (this.element.style.height = this.height), g(this.width) || "string" != typeof this.width || -1 === this.width.indexOf("%") || (this.element.style.width = this.width), this.element.appendChild(t), this.grid.appendTo(t), this.wireEvents()
            }
            this.renderComplete();
            var i = this.grid.destroyTemplate;
            if (this.grid.destroyTemplate = function(t, n) {
                    i.apply(e.grid);
                    e.isReact && g(e.portals) || e.clearTemplate(t, n)
                }, S() && this.isServerRendered) {
                var n = function(t) {
                    return e.gridRendered(t, n)
                };
                ga.on("component-rendered", n, this)
            }
        }, t.prototype.afterGridRender = function() {
            g(this.grid.clipboardModule) || this.grid.clipboardModule.destroy(), this.clipboardModule = this.grid.clipboardModule = new Th(this)
        }, t.prototype.gridRendered = function(e, t) {
            if (e.id === this.element.id + "_gridcontrol") {
                this.grid = e.grid, this.grid.query.queries = [];
                this.isServerRendered ? this.grid.isHybrid = !0 : this.grid.isJsComponent = !0, this.setBlazorGUID(), this.setColIndex(this.grid.columns), this.bindGridEvents();
                g(this.selectionModule) || this.grid.on("colgroup-refresh", this.selectionModule.headerCheckbox, this.selectionModule);
                for (var i = 0; i < this.columns.length; i++) this.columns[i].uid = this.grid.columns[i].uid;
                this.wireEvents(), this.afterGridRender();
                this.grid.processModel(), ga.off("component-rendered", this.gridRendered)
            }
        }, t.prototype.setColIndex = function(e, t) {
            void 0 === t && (t = 0);
            for (var i = 0, n = e.length; i < n; i++) e[i].columns ? (e[i].index = g(e[i].index) ? t : e[i].index, t++, t = this.setColIndex(e[i].columns, t)) : (e[i].index = g(e[i].index) ? t : e[i].index, t++);
            return t
        }, t.prototype.setBlazorGUID = function() {
            this.editSettings && (this.grid.editSettings.guid = this.editSettings.guid, this.grid.editSettings.template = this.editSettings.template);
            for (var e = 0; e < this.aggregates.length; e++)
                for (var t = 0; t < this.aggregates[e].columns.length; t++) this.grid.aggregates[e].columns[t].guid = this.aggregates[e].columns[t].guid;
            for (e = 0; e < this.columns.length; e++) this.grid.columns[e].guid = this.columns[e].guid
        }, t.prototype.convertTreeData = function(e) {
            var t = this;
            if (e instanceof Array && e.length > 0 && e[0].hasOwnProperty("level")) this.flatData = Eh(this) ? a("result", e) : e, this.flatData.filter((function(e) {
                l("uniqueIDCollection." + e.uniqueID, e, t), 0 === e.level && t.parentData.push(e)
            }));
            else if (Eh(this)) {
                var i = a("result", this.dataSource);
                this.dataModule.convertToFlatData(i)
            } else this.dataModule.convertToFlatData(e)
        }, t.prototype.bindGridProperties = function() {
            this.bindedDataSource(), this.grid.enableRtl = this.enableRtl, this.grid.allowKeyboard = this.allowKeyboard, this.grid.columns = this.getGridColumns(this.columns), this.grid.allowExcelExport = this.allowExcelExport, this.grid.allowPdfExport = this.allowPdfExport, this.grid.query = this.query, this.grid.columnQueryMode = this.columnQueryMode, this.grid.allowPaging = this.allowPaging, this.grid.pageSettings = Ua(this.pageSettings), this.grid.pagerTemplate = this.pagerTemplate, this.grid.showColumnMenu = this.showColumnMenu, this.grid.allowSorting = this.allowSorting, this.grid.allowFiltering = this.allowFiltering, this.grid.enableVirtualization = this.enableVirtualization, this.grid.width = this.width, this.grid.height = this.height, this.grid.enableAltRow = this.enableAltRow, this.grid.allowReordering = this.allowReordering, this.grid.allowTextWrap = this.allowTextWrap, this.grid.allowResizing = this.allowResizing, this.grid.enableHover = this.enableHover, this.grid.enableAutoFill = this.enableAutoFill, this.grid.allowRowDragAndDrop = this.allowRowDragAndDrop, this.grid.rowDropSettings = Ua(this.rowDropSettings), this.grid.rowHeight = this.rowHeight, this.grid.gridLines = this.gridLines, this.grid.allowSelection = this.allowSelection, this.grid.toolbar = Ua(this.getGridToolbar()), this.grid.toolbarTemplate = this.toolbarTemplate, this.grid.showColumnChooser = this.showColumnChooser, this.grid.filterSettings = Ua(this.filterSettings), this.grid.selectionSettings = Ua(this.selectionSettings), this.grid.sortSettings = Ua(this.sortSettings), this.grid.searchSettings = Ua(this.searchSettings), this.grid.aggregates = Ua(this.aggregates), this.grid.textWrapSettings = Ua(this.textWrapSettings), this.grid.printMode = Ua(this.printMode), this.grid.locale = Ua(this.locale), this.grid.selectedRowIndex = this.selectedRowIndex, this.grid.contextMenuItems = Ua(this.getContextMenu()), this.grid.columnMenuItems = Ua(this.columnMenuItems), this.grid.editSettings = this.getGridEditSettings(), this.grid.rowTemplate = Ua(this.rowTemplate), this.grid.detailTemplate = Ua(this.detailTemplate), this.grid.frozenRows = this.frozenRows, this.grid.frozenColumns = this.frozenColumns;
            this.grid.templateDotnetInstance = this.templateDotnetInstance;
            this.grid.isJsComponent = !0
        }, t.prototype.triggerEvents = function(e) {
            this.trigger(xl("name", e), e)
        }, t.prototype.bindGridEvents = function() {
            var e = this,
                t = this;
            this.grid.rowSelecting = function(t) {
                g(t.target) || !t.target.classList.contains("e-treegridexpand") && !t.target.classList.contains("e-treegridcollapse") ? e.trigger("rowSelecting", t) : t.cancel = !0
            }, this.grid.rowSelected = function(i) {
                S() ? S() && e.isServerRendered && (e.allowServerDataBinding = !1, e.setProperties({
                    selectedRowIndex: e.grid.selectedRowIndex
                }, !0), e.allowServerDataBinding = !0) : e.selectedRowIndex = e.grid.selectedRowIndex, t.notify("rowSelected", i), e.trigger("rowSelected", i)
            }, this.grid.rowDeselected = function(t) {
                e.selectedRowIndex = e.grid.selectedRowIndex, e.trigger("rowDeselected", t)
            }, this.grid.resizeStop = function(t) {
                e.updateColumnModel(), e.trigger("resizeStop", t)
            }, this.grid.excelQueryCellInfo = function(t) {
                e.notify("excelCellInfo", t), t = e.dataResults
            }, this.grid.pdfQueryCellInfo = function(t) {
                e.notify("pdfCellInfo", t), t = e.dataResults
            }, this.grid.checkBoxChange = function(t) {
                e.trigger("checkboxChange", t)
            }, this.grid.pdfExportComplete = this.triggerEvents.bind(this), this.grid.excelExportComplete = this.triggerEvents.bind(this), this.grid.excelHeaderQueryCellInfo = this.triggerEvents.bind(this), this.grid.pdfHeaderQueryCellInfo = this.triggerEvents.bind(this), this.grid.dataSourceChanged = this.triggerEvents.bind(this), this.grid.recordDoubleClick = this.triggerEvents.bind(this), this.grid.rowDeselecting = this.triggerEvents.bind(this), this.grid.cellDeselected = this.triggerEvents.bind(this), this.grid.cellDeselecting = this.triggerEvents.bind(this), this.grid.columnMenuOpen = this.triggerEvents.bind(this), this.grid.columnMenuClick = this.triggerEvents.bind(this), this.grid.cellSelected = this.triggerEvents.bind(this), this.grid.headerCellInfo = this.triggerEvents.bind(this), this.grid.resizeStart = this.triggerEvents.bind(this), this.grid.resizing = this.triggerEvents.bind(this), this.grid.columnDrag = this.triggerEvents.bind(this), this.grid.columnDragStart = this.triggerEvents.bind(this), this.grid.columnDrop = this.triggerEvents.bind(this), this.grid.beforePrint = this.triggerEvents.bind(this), this.grid.beforeCopy = this.triggerEvents.bind(this), this.grid.beforePaste = function(t) {
                for (var i = e.getRows(); i[t.rowIndex].classList.contains("e-summaryrow");) t.rowIndex++;
                e.trigger("beforePaste", t)
            }, this.grid.load = function() {
                if (t.grid.on("initial-end", t.afterGridRender, t), !g(e.loggerModule)) {
                    e.loggerModule = e.grid.loggerModule = new Sh(e.grid)
                }
            }, this.grid.printComplete = this.triggerEvents.bind(this), this.grid.actionFailure = this.triggerEvents.bind(this), this.extendedGridDataBoundEvent(), this.extendedGridEvents(), this.extendedGridActionEvents(), this.extendedGridEditEvents(), this.bindGridDragEvents(), this.bindCallBackEvents()
        }, t.prototype.lastRowBorder = function(e, t) {
            for (var i = 0; i < e.cells.length; i++) t ? ut([e.cells[i]], "e-lastrowcell") : gt([e.cells[i]], "e-lastrowcell")
        }, t.prototype.isPixelHeight = function() {
            return "auto" !== this.height && -1 === this.height.toString().indexOf("%")
        }, t.prototype.extendedGridDataBoundEvent = function() {
            var e = this,
                t = this;
            this.grid.dataBound = function(t) {
                (e.updateRowTemplate(t), e.updateColumnModel(), e.updateAltRow(e.getRows()), e.notify("dataBoundArg", t), !Dh(e) || Ih(e) || e.hasChildMapping) || l("grid.contentModule.isLoaded", !(xl("dataSource.requests", e).filter((function(e) {
                    return "OK" !== e.httpRequest.statusText
                })).length > 0), e);
                if (e.isPixelHeight() && e.initialRender)
                    for (var i, n = e.getContentTable().rows, r = (i = [].slice.call(n)).length - 1; r > 0; r--)
                        if (!Ah(i[r])) {
                            i[r].nextElementSibling && e.lastRowBorder(i[r], !0);
                            break
                        } e.trigger("dataBound", t), e.initialRender = !1
            }, this.grid.beforeDataBound = function(e) {
                var i = xl("action", e);
                if (Dh(t) && !Ih(t) && "edit" !== i) t.notify("updateRemoteLevel", e), e = t.dataResults;
                else if (0 === t.flatData.length && Ih(t) && t.dataSource instanceof yn) {
                    var n = t.dataSource;
                    t.dataModule.convertToFlatData(n.dataSource.json), e.result = t.grid.dataSource.dataSource.json = t.flatData
                }
                if (Dh(t) || Eh(this) || g(t.dataSource) || (this.isPrinting && l("isPrinting", !0, e), t.notify("dataProcessor", e)), u(e, t.dataResults), !this.isPrinting) {
                    var r = new vn;
                    return t.trigger("beforeDataBound", e, (function(e) {
                        r.resolve(e)
                    })), r
                }
            }, this.grid.log = function(t, i) {
                e.loggerModule && e.loggerModule.log(t, i)
            }
        }, t.prototype.bindCallBackEvents = function() {
            var e, t = this;
            S() && this.isServerRendered && (g(this.grid.beginEdit) || (e = this.grid.beginEdit)), this.grid.toolbarClick = function(e) {
                var i = new vn;
                return t.trigger("toolbarClick", e, (function(n) {
                    n.cancel || t.notify("toolbarClick", e), i.resolve(n)
                })), i
            }, this.grid.cellSelecting = function(e) {
                var i = new vn;
                return t.trigger(xl("name", e), e, (function(e) {
                    i.resolve(e)
                })), i
            }, this.grid.beginEdit = function(i) {
                S() && t.isServerRendered && e && "function" == typeof e && e.apply(t, [i]);
                var n = new vn;
                return t.trigger("beginEdit", i, (function(e) {
                    n.resolve(e)
                })), n
            }
        }, t.prototype.extendedGridEditEvents = function() {
            var e, t, i = this;
            if (S() && this.isServerRendered && (g(this.grid.cellEdit) || (e = this.grid.cellEdit), g(this.grid.cellSave) || (t = this.grid.cellSave)), this.editModule && S() && this.isServerRendered) {
                this.grid.on("key-pressed", this.editModule.keyPressed, this.editModule);
                var n = this.grid.localObserver.boundedEvents["key-pressed"];
                n.splice(0, 0, n.pop())
            }
            this.grid.dataStateChange = function(e) {
                i.isExpandRefresh ? (i.isExpandRefresh = !1, i.grid.dataSource = {
                    result: i.flatData,
                    count: a("count", i.grid.dataSource)
                }) : i.trigger("dataStateChange", e)
            }, this.grid.cellSave = function(e) {
                if (S() && i.isServerRendered && t && "function" == typeof t && t.apply(i, [e]), i.grid.isContextMenuOpen()) {
                    var n;
                    (g(n = i.grid.contextMenuModule.contextMenu.element.getElementsByClassName("e-selected")[0]) || n.id !== i.element.id + "_gridcontrol_cmenu_Save") && (e.cancel = !0)
                }
                var r = new vn;
                return i.trigger("cellSave", e, (function(e) {
                    S() && !i.isServerRendered && (e.cell = x(e.cell)), e.cancel || i.notify("cellSave", e), r.resolve(e)
                })), r
            }, this.grid.cellSaved = function(e) {
                i.trigger("cellSaved", e), i.notify("cellSaved", e)
            }, this.grid.cellEdit = function(t) {
                S() && i.isServerRendered && e && "function" == typeof e && e.apply(i, [t]);
                var n = new vn;
                return t.promise = n, i.notify("cellEdit", t), n
            }, this.grid.batchAdd = function(e) {
                i.trigger("batchAdd", e), i.notify("batchAdd", e)
            }, this.grid.beforeBatchSave = function(e) {
                i.trigger("beforeBatchSave", e), i.notify("beforeBatchSave", e)
            }, this.grid.beforeBatchAdd = function(e) {
                i.trigger("beforeBatchAdd", e), i.notify("beforeBatchAdd", e)
            }, this.grid.batchDelete = function(e) {
                i.trigger("batchDelete", e), i.notify("batchDelete", e)
            }, this.grid.beforeBatchDelete = function(e) {
                i.trigger("beforeBatchDelete", e), i.notify("beforeBatchDelete", e)
            }, this.grid.batchCancel = function(e) {
                "Cell" !== i.editSettings.mode && i.trigger("batchCancel", e), i.notify("batchCancel", e)
            }
        }, t.prototype.updateRowTemplate = function(e) {
            var t = this;
            S() && !this.isServerRendered ? setTimeout((function() {
                t.treeColumnRowTemplate(e)
            }), 1e3) : this.treeColumnRowTemplate(e)
        }, t.prototype.bindedDataSource = function() {
            if (this.dataSource && Eh(this)) {
                var e = this.flatData,
                    t = a("count", this.dataSource);
                this.grid.dataSource = {
                    result: e,
                    count: t
                }
            } else this.grid.dataSource = this.dataSource instanceof yn ? new yn(this.dataSource.dataSource, this.dataSource.defaultQuery, this.dataSource.adaptor) : this.flatData;
            if (S() && this.dataSource instanceof yn && (this.grid.dataSource.adaptorName = this.dataSource.adaptorName, this.grid.dataSource.dotnetInstance = this.dataSource.dotnetInstance, this.grid.dataSource.key = this.dataSource.key), this.dataSource instanceof yn && (this.dataSource.dataSource.offline || this.dataSource.ready)) {
                this.grid.dataSource.dataSource.json = Mh(this.dataSource.dataSource.json), this.grid.dataSource.ready = this.dataSource.ready;
                var i = this.grid.dataSource;
                g(this.grid.dataSource.ready) || this.grid.dataSource.ready.then((function(e) {
                    i.dataSource.offline = !0, i.isDataAvailable = !0, i.dataSource.json = e.result, i.adaptor = new pn
                }))
            }
        }, t.prototype.extendedGridActionEvents = function() {
            var e, t = this;
            S() && this.isServerRendered && (g(this.grid.actionComplete) || (e = this.grid.actionComplete)), this.grid.actionBegin = function(e) {
                "sorting" === e.requestType && e.target && e.target.parentElement && e.target.parentElement.classList.contains("e-hierarchycheckbox") && (e.cancel = !0), "reorder" === xl("requestType", e) && t.notify("getColumnIndex", {}), t.notify("actionBegin", {
                    editAction: e
                }), Dh(t) || g(t.filterModule) || Eh(t) || 0 !== t.grid.filterSettings.columns.length && 0 !== t.grid.searchSettings.key.length || (t.notify("clearFilters", {
                    flatData: t.grid.dataSource
                }), t.grid.dataSource = t.dataResults.result);
                var i = new vn;
                if (S() && "delete" === e.requestType && !t.isServerRendered) {
                    e.data = e.data[0]
                }
                return t.trigger("actionBegin", e, (function(e) {
                    if (S() && "delete" === e.requestType && !t.isServerRendered) {
                        e.data = [e.data]
                    }
                    e.cancel || t.notify("beginEdit", e), S() && "beginEdit" === e.requestType && !t.isServerRendered && (e.row = x(e.row)), i.resolve(e)
                })), i
            }, this.grid.actionComplete = function(i) {
                if (S() && t.isServerRendered && "filterAfterOpen" !== i.requestType) {
                    for (var n = t.getRows(), r = 0; r < n.length; r++) {
                        (n[r].classList.contains("e-treerowcollapsed") || n[r].classList.contains("e-treerowexpanded")) && (t.enableCollapseAll && "paging" === i.requestType ? gt([n[r]], "e-treerowexpanded") : gt([n[r]], "e-treerowcollapsed"), t.enableCollapseAll && "paging" === i.requestType ? ut([n[r]], "e-treerowcollapsed") : ut([n[r]], "e-treerowexpanded"));
                        var o = n[r].querySelectorAll(".e-rowcell"),
                            s = o[t.treeColumnIndex].getElementsByClassName("e-treegridcollapse")[0] || o[t.treeColumnIndex].getElementsByClassName("e-treegridexpand")[0];
                        s && (t.enableCollapseAll && "paging" === i.requestType ? gt([s], "e-treegridexpand") : gt([s], "e-treegridcollapse"), t.enableCollapseAll && "paging" === i.requestType ? ut([s], "e-treegridcollapse") : ut([s], "e-treegridexpand"))
                    }
                    e && "function" == typeof e && e.apply(t, [i])
                }
                if (t.notify("actioncomplete", i), t.updateColumnModel(), t.updateTreeGridModel(), "reorder" === i.requestType && t.notify("setColumnIndex", {}), t.notify("actionComplete", {
                        editAction: i
                    }), "add" === i.requestType && "Top" !== t.editSettings.newRowPosition && "Bottom" !== t.editSettings.newRowPosition && t.notify("beginAdd", i), "batchsave" === i.requestType && t.notify("batchSave", i), t.notify("updateGridActions", i), S() && "delete" === i.requestType && !t.isServerRendered) {
                    i.data = i.data[0]
                }
                t.trigger("actionComplete", i)
            }
        }, t.prototype.extendedGridEvents = function() {
            var e = this,
                t = this;
            this.grid.recordDoubleClick = function(t) {
                e.trigger("recordDoubleClick", t), e.notify("recordDoubleClick", t)
            }, this.grid.detailDataBound = function(t) {
                e.notify("detaildataBound", t), e.trigger("detailDataBound", t)
            }, this.grid.rowDataBound = function(e) {
                g(this.isPrinting) ? l("isPrinting", !1, e) : l("isPrinting", this.isPrinting, e), t.renderModule.RowModifier(e)
            }, this.grid.queryCellInfo = function(e) {
                g(this.isPrinting) ? l("isPrinting", !1, e) : l("isPrinting", this.isPrinting, e), t.renderModule.cellRender(e)
            }, this.grid.contextMenuClick = function(t) {
                e.notify("contextMenuClick", t), e.trigger("contextMenuClick", t)
            }, this.grid.contextMenuOpen = function(t) {
                e.notify("contextMenuOpen", t), e.trigger("contextMenuOpen", t)
            }, this.grid.queryCellInfo = function(t) {
                e.renderModule.cellRender(t)
            }
        }, t.prototype.bindGridDragEvents = function() {
            var e = this,
                t = this;
            this.grid.rowDragStartHelper = function(e) {
                t.trigger("rowDragStartHelper", e)
            }, this.grid.rowDragStart = function(e) {
                t.trigger("rowDragStart", e)
            }, this.grid.rowDrag = function(i) {
                e.grid.isEdit ? i.cancel = !0 : (t.notify("row-draging", i), t.trigger("rowDrag", i))
            }, this.grid.rowDrop = function(i) {
                e.grid.isEdit || t.notify("row-dropped", i), i.cancel = !0
            }
        }, t.prototype.loadGrid = function() {
            this.bindGridProperties(), this.bindGridEvents(), l("registeredTemplate", this.registeredTemplate, this.grid);
            l("viewContainerRef", this.viewContainerRef, this.grid)
        }, t.prototype.autoGenerateColumns = function() {
            if (!this.columns.length && !this.dataModule.isRemote() && Object.keys(this.dataSource).length) {
                this.columns = [];
                var e;
                e = this.dataSource[0];
                for (var t = Object.keys(e), i = 0; i < t.length; i++) - 1 === [this.childMapping, this.parentIdMapping].indexOf(t[i]) && this.columns.push(t[i])
            }
        }, t.prototype.getGridEditSettings = function() {
            var e = {};
            switch (e.allowAdding = this.editSettings.allowAdding, e.allowEditing = this.editSettings.allowEditing, e.allowDeleting = this.editSettings.allowDeleting, e.newRowPosition = "Bottom" === this.editSettings.newRowPosition ? "Bottom" : "Top", e.allowEditOnDblClick = this.editSettings.allowEditOnDblClick, e.showConfirmDialog = this.editSettings.showConfirmDialog, e.template = this.editSettings.template, e.showDeleteConfirmDialog = this.editSettings.showDeleteConfirmDialog, e.guid = this.editSettings.guid, e.dialog = this.editSettings.dialog, this.editSettings.mode) {
                case "Dialog":
                case "Batch":
                    e.mode = this.editSettings.mode;
                    break;
                case "Row":
                    e.mode = "Normal";
                    break;
                case "Cell":
                    e.mode = "Normal", e.showConfirmDialog = !1
            }
            return e
        }, t.prototype.getContextMenu = function() {
            if (this.contextMenuItems) {
                for (var e = [], t = 0; t < this.contextMenuItems.length; t++) {
                    switch (this.contextMenuItems[t]) {
                        case "AddRow":
                        case Fh.AddRow:
                            e.push({
                                text: this.l10n.getConstant("AddRow"),
                                target: ".e-content",
                                id: this.element.id + "_gridcontrol_cmenu_AddRow",
                                items: [{
                                    text: this.l10n.getConstant("Above"),
                                    id: "Above"
                                }, {
                                    text: this.l10n.getConstant("Below"),
                                    id: "Below"
                                }]
                            });
                            break;
                        default:
                            e.push(this.contextMenuItems[t])
                    }
                }
                return e
            }
            return null
        }, t.prototype.getGridToolbar = function() {
            if (this.toolbar) {
                for (var e = [], t = 0; t < this.toolbar.length; t++) {
                    switch (this.toolbar[t]) {
                        case "Search":
                        case Bh.Search:
                            e.push("Search");
                            break;
                        case "Print":
                        case Bh.Print:
                            e.push("Print");
                            break;
                        case "ExpandAll":
                        case Bh.ExpandAll:
                            var i = this.l10n.getConstant("ExpandAll");
                            e.push({
                                text: i,
                                tooltipText: i,
                                prefixIcon: "e-expand",
                                id: this.element.id + "_gridcontrol_expandall"
                            });
                            break;
                        case "CollapseAll":
                        case Bh.CollapseAll:
                            var n = this.l10n.getConstant("CollapseAll");
                            e.push({
                                text: n,
                                tooltipText: n,
                                prefixIcon: "e-collapse",
                                id: this.element.id + "_gridcontrol_collapseall"
                            });
                            break;
                        case "Indent":
                        case Bh.RowIndent:
                            var r = this.l10n.getConstant("RowIndent");
                            e.push({
                                text: r,
                                tooltipText: r,
                                prefixIcon: "e-indent",
                                id: this.element.id + "_gridcontrol_indent"
                            });
                            break;
                        case "Outdent":
                        case Bh.RowOutdent:
                            var o = this.l10n.getConstant("RowOutdent");
                            e.push({
                                text: o,
                                tooltipText: o,
                                prefixIcon: "e-outdent",
                                id: this.element.id + "_gridcontrol_outdent"
                            });
                            break;
                        default:
                            e.push(this.toolbar[t])
                    }
                }
                return e
            }
            return null
        }, t.prototype.getGridColumns = function(e) {
            var t, i, n = e;
            this.columnModel = [];
            for (var r = [], o = 0; o < n.length; o++) {
                var s = this.grid.getColumnByUid(n[o].uid);
                if (i = s || {}, t = {}, "string" == typeof this.columns[o]) i.field = t.field = this.columns[o];
                else
                    for (var a = 0, l = Object.keys(n[o]); a < l.length; a++) {
                        var h = l[a];
                        o === this.treeColumnIndex && "template" === h ? t[h] = n[o][h] : i[h] = t[h] = n[o][h]
                    }
                n[o].columns ? this.getGridColumns(e[o].columns) : this.columnModel.push(new ih(t)), r.push(i)
            }
            return r
        }, t.prototype.onPropertyChanged = function(e, t) {
            for (var i = !1, n = 0, r = Object.keys(e); n < r.length; n++) {
                var o = r[n];
                switch (o) {
                    case "columns":
                        S() && this.isServerRendered && this.preventUpdate || (this.grid.columns = this.getGridColumns(this.columns));
                        break;
                    case "treeColumnIndex":
                        this.grid.refreshColumns();
                        break;
                    case "allowPaging":
                        this.grid.allowPaging = this.allowPaging;
                        break;
                    case "pageSettings":
                        this.grid.pageSettings = Ua(this.pageSettings), i = !0;
                        break;
                    case "enableVirtualization":
                        this.grid.enableVirtualization = this.enableVirtualization;
                        break;
                    case "toolbar":
                        this.grid.toolbar = this.getGridToolbar();
                        break;
                    case "allowSelection":
                        this.grid.allowSelection = this.allowSelection;
                        break;
                    case "selectionSettings":
                        this.grid.selectionSettings = Ua(this.selectionSettings);
                        break;
                    case "allowSorting":
                        this.grid.allowSorting = this.allowSorting;
                        break;
                    case "allowMultiSorting":
                        this.grid.allowMultiSorting = this.allowMultiSorting;
                        break;
                    case "sortSettings":
                        this.grid.sortSettings = Ua(this.sortSettings);
                        break;
                    case "searchSettings":
                        this.grid.searchSettings = Ua(this.searchSettings);
                        break;
                    case "allowFiltering":
                        this.grid.allowFiltering = this.allowFiltering;
                        break;
                    case "filterSettings":
                        this.grid.filterSettings = Ua(this.filterSettings);
                        break;
                    case "showColumnMenu":
                        this.grid.showColumnMenu = this.showColumnMenu;
                        break;
                    case "allowRowDragAndDrop":
                        this.grid.allowRowDragAndDrop = this.allowRowDragAndDrop;
                        break;
                    case "aggregates":
                        this.grid.aggregates = Ua(this.aggregates);
                        break;
                    case "dataSource":
                        if (this.isLocalData = !(this.dataSource instanceof yn) || !g(this.dataSource.ready) || this.dataSource.adaptor instanceof fn, this.convertTreeData(this.dataSource), this.isLocalData) {
                            if (Eh(this)) {
                                var s = a("count", this.dataSource);
                                this.grid.dataSource = {
                                    result: this.flatData,
                                    count: s
                                }
                            } else this.grid.dataSource = this.dataSource instanceof yn ? new yn(this.dataSource.dataSource, this.dataSource.defaultQuery, this.dataSource.adaptor) : this.flatData;
                            this.enableVirtualization && (this.grid.contentModule.isDataSourceChanged = !0)
                        } else this.bindedDataSource(), this.enableVirtualization && (this.grid.contentModule.removeEventListener(), this.grid.contentModule.eventListener("on"), this.grid.contentModule.renderTable());
                        break;
                    case "query":
                        this.grid.query = this.query;
                        break;
                    case "enableCollapseAll":
                        e[o] ? this.collapseAll() : this.expandAll();
                        break;
                    case "expandStateMapping":
                        this.grid.refresh();
                        break;
                    case "gridLines":
                        this.grid.gridLines = this.gridLines;
                        break;
                    case "rowTemplate":
                        this.grid.rowTemplate = Ua(this.rowTemplate);
                        break;
                    case "frozenRows":
                        this.grid.frozenRows = this.frozenRows;
                        break;
                    case "frozenColumns":
                        this.grid.frozenColumns = this.frozenColumns;
                        break;
                    case "rowHeight":
                        this.grid.rowHeight = this.rowHeight;
                        break;
                    case "height":
                        g(this.height) || "string" != typeof this.height || -1 === this.height.indexOf("%") || (this.element.style.height = this.height), this.grid.height = this.height;
                        break;
                    case "width":
                        g(this.width) || "string" != typeof this.width || -1 === this.width.indexOf("%") || (this.element.style.width = this.width), this.grid.width = this.width;
                        break;
                    case "locale":
                        this.grid.locale = this.locale;
                        break;
                    case "selectedRowIndex":
                        this.grid.selectedRowIndex = this.selectedRowIndex;
                        break;
                    case "enableAltRow":
                        this.grid.enableAltRow = this.enableAltRow;
                        break;
                    case "enableHover":
                        this.grid.enableHover = this.enableHover;
                        break;
                    case "enableAutoFill":
                        this.grid.enableAutoFill = this.enableAutoFill;
                        break;
                    case "allowExcelExport":
                        this.grid.allowExcelExport = this.allowExcelExport;
                        break;
                    case "allowPdfExport":
                        this.grid.allowPdfExport = this.allowPdfExport;
                        break;
                    case "enableRtl":
                        this.grid.enableRtl = this.enableRtl;
                        break;
                    case "allowReordering":
                        this.grid.allowReordering = this.allowReordering;
                        break;
                    case "allowResizing":
                        this.grid.allowResizing = this.allowResizing;
                        break;
                    case "textWrapSettings":
                        this.grid.textWrapSettings = Ua(this.textWrapSettings);
                        break;
                    case "allowTextWrap":
                        this.grid.allowTextWrap = Ua(this.allowTextWrap), this.grid.refresh();
                        break;
                    case "contextMenuItems":
                        this.grid.contextMenuItems = this.getContextMenu();
                        break;
                    case "showColumnChooser":
                        this.grid.showColumnChooser = this.showColumnChooser;
                        break;
                    case "detailTemplate":
                        this.grid.detailTemplate = Ua(this.detailTemplate);
                        break;
                    case "columnMenuItems":
                        this.grid.columnMenuItems = Ua(this.columnMenuItems);
                        break;
                    case "editSettings":
                        this.grid.isEdit && "Normal" === this.grid.editSettings.mode && e[o].mode && ("Cell" === e[o].mode || "Row" === e[o].mode) && this.grid.closeEdit(), this.grid.editSettings = this.getGridEditSettings()
                }
                i && this.grid.refresh()
            }
        }, t.prototype.destroy = function() {
            this.removeListener(), this.unwireEvents(), e.prototype.destroy.call(this), this.grid && this.grid.destroy(), this.dataModule && this.dataModule.destroy();
            for (var t = ["dataModule", "sortModule", "renderModule", "filterModule", "printModule", "clipboardModule", "excelExportModule", "pdfExportModule", "toolbarModule", "summaryModule", "reorderModule", "resizeModule", "pagerModule", "keyboardModule", "columnMenuModule", "contextMenuModule", "editModule", "virtualScrollModule", "selectionModule", "detailRow", "rowDragAndDropModule", "freezeModule"], i = 0; i < t.length; i++) this[t[i]] && (this[t[i]] = null);
            this.element.innerHTML = "", this.grid = null
        }, t.prototype.dataBind = function() {
            e.prototype.dataBind.call(this), S() && this.isServerRendered && (!a("isRendered", this.grid) || this.initialRender) || this.grid.dataBind()
        }, t.prototype.getPersistData = function() {
            for (var e = ["pageSettings", "sortSettings", "filterSettings", "columns", "searchSettings", "selectedRowIndex"], t = {
                    pageSettings: ["template", "pageSizes", "pageSizeMode", "enableQueryString", "totalRecordsCount", "pageCount"],
                    filterSettings: ["type", "mode", "showFilterBarStatus", "immediateModeDelay", "ignoreAccent", "hierarchyMode"],
                    searchSettings: ["fields", "operator", "ignoreCase"],
                    sortSettings: [],
                    columns: [],
                    selectedRowIndex: []
                }, i = 0; i < e.length; i++)
                for (var n = this[e[i]], r = 0, o = t[e[i]]; r < o.length; r++) {
                    delete n[o[r]]
                }
            return this.ignoreInArrays(["filter", "edit", "filterBarTemplate", "headerTemplate", "template", "commandTemplate", "commands", "dataSource"], this.columns), this.addOnPersist(e)
        }, t.prototype.ignoreInArrays = function(e, t) {
            for (var i = 0; i < t.length; i++) t[i].columns ? (this.ignoreInColumn(e, t[i]), this.ignoreInArrays(e, t[i].columns)) : this.ignoreInColumn(e, t[i])
        }, t.prototype.ignoreInColumn = function(e, t) {
            for (var i = 0; i < e.length; i++) delete t[e[i]], t.filter = {}
        }, t.prototype.mouseClickHandler = function(e) {
            if (g(e.touches)) {
                var t = e.target;
                !t.classList.contains("e-treegridexpand") && !t.classList.contains("e-treegridcollapse") || this.isEditCollapse || this.grid.isEdit || this.expandCollapseRequest(t), this.isEditCollapse = !1, this.notify("checkboxSelection", {
                    target: t
                })
            }
        }, t.prototype.getRows = function() {
            return this.grid.getRows()
        }, t.prototype.getPager = function() {
            return this.grid.getPager()
        }, t.prototype.addRecord = function(e, t, i) {
            this.editModule && this.editModule.addRecord(e, t, i)
        }, t.prototype.closeEdit = function() {
            this.grid.editModule && this.grid.editModule.closeEdit()
        }, t.prototype.saveCell = function() {
            this.grid.editModule && this.grid.editModule.saveCell()
        }, t.prototype.updateCell = function(e, t, i) {
            this.grid.editModule && this.grid.editModule.updateCell(e, t, i)
        }, t.prototype.updateRow = function(e, t) {
            if (this.grid.editModule)
                if (g(e)) this.grid.editModule.updateRow(e, t);
                else {
                    var i = this.grid.getCurrentViewRecords()[e];
                    u(i, t), this.grid.editModule.updateRow(e, i)
                }
        }, t.prototype.deleteRecord = function(e, t) {
            this.grid.editModule && this.grid.editModule.deleteRecord(e, t)
        }, t.prototype.startEdit = function(e) {
            this.grid.editModule && this.grid.editModule.startEdit(e)
        }, t.prototype.editCell = function(e, t) {
            this.editModule && this.editModule.editCell(e, t)
        }, t.prototype.enableToolbarItems = function(e, t) {
            this.grid.toolbarModule && this.grid.toolbarModule.enableItems(e, t)
        }, t.prototype.endEdit = function() {
            this.grid.editModule && this.grid.editModule.endEdit()
        }, t.prototype.openColumnChooser = function(e, t) {
            this.columnChooserModule && this.columnChooserModule.openColumnChooser(e, t)
        }, t.prototype.deleteRow = function(e) {
            this.grid.editModule && this.grid.editModule.deleteRow(e)
        }, t.prototype.getPrimaryKeyFieldNames = function() {
            return this.grid.getPrimaryKeyFieldNames()
        }, t.prototype.setCellValue = function(e, t, i) {
            this.grid.setCellValue(e, t, i)
        }, t.prototype.setRowData = function(e, t) {
            var i, n = this.getCurrentViewRecords(),
                r = this.grid.getPrimaryKeyFieldNames()[0],
                o = {};
            n.some((function(t, i, n) {
                return t[r] === e && (o = t, !0)
            })), i = o.level, t.level = i, t.index = o.index, t.childRecords = o.childRecords, t.taskData = o.taskData, t.uniqueID = o.uniqueID, t.parentItem = o.parentItem, t.checkboxState = o.checkboxState, t.hasChildRecords = o.hasChildRecords, t.parentUniqueID = o.parentUniqueID, t.expanded = o.expanded, this.grid.setRowData(e, t)
        }, t.prototype.goToPage = function(e) {
            this.grid.pagerModule && this.grid.pagerModule.goToPage(e)
        }, t.prototype.updateExternalMessage = function(e) {
            this.pagerModule && this.grid.pagerModule.updateExternalMessage(e)
        }, t.prototype.getCellFromIndex = function(e, t) {
            return this.grid.getCellFromIndex(e, t)
        }, t.prototype.getColumnByField = function(e) {
            return S() && this.isServerRendered ? Ha(this.grid.columns, (function(t, i) {
                if (t.field === e) return t
            }))[0] : Ha(this.columnModel, (function(t, i) {
                if (t.field === e) return t
            }))[0]
        }, t.prototype.getColumnByUid = function(e) {
            return Ha(this.grid.columns, (function(t, i) {
                if (t.uid === e) return t
            }))[0]
        }, t.prototype.getColumnFieldNames = function() {
            return this.grid.getColumnFieldNames()
        }, t.prototype.getFooterContent = function() {
            return this.grid.getFooterContent()
        }, t.prototype.getFooterContentTable = function() {
            return this.grid.getFooterContentTable()
        }, t.prototype.showColumns = function(e, t) {
            this.grid.showColumns(e, t), this.updateColumnModel()
        }, t.prototype.hideColumns = function(e, t) {
            this.grid.hideColumns(e, t), this.updateColumnModel()
        }, t.prototype.getColumnHeaderByField = function(e) {
            return this.grid.getColumnHeaderByField(e)
        }, t.prototype.getColumnHeaderByIndex = function(e) {
            return this.grid.getColumnHeaderByIndex(e)
        }, t.prototype.getColumnHeaderByUid = function(e) {
            return this.grid.getColumnHeaderByUid(e)
        }, t.prototype.getColumnIndexByField = function(e) {
            return this.grid.getColumnIndexByField(e)
        }, t.prototype.getColumnIndexByUid = function(e) {
            return this.grid.getColumnIndexByUid(e)
        }, t.prototype.getColumns = function(e) {
            return S() && this.isServerRendered ? this.grid.columns : (this.updateColumnModel(this.grid.getColumns(e)), this.columnModel)
        }, t.prototype.updateColumnModel = function(e) {
            var t, i, n = g(e) ? this.grid.getColumns() : e; - 1 === this.treeColumnIndex || g(n[this.treeColumnIndex].template) || (t = n[this.treeColumnIndex].template, i = n[this.treeColumnIndex].field), this.columnModel = [];
            for (var r, o = !1, s = 0; s < n.length; s++) {
                r = {};
                for (var a = 0, l = Object.keys(n[s]); a < l.length; a++) {
                    var h = l[a];
                    S() && "edit" === h || (r[h] = n[s][h])
                }
                this.columnModel.push(new ih(r)), i !== this.columnModel[s].field || g(t) || "" === t || (this.columnModel[s].template = t)
            }
            if (!S() || !this.isServerRendered) {
                this.deepMerge = ["columns"], this.grid.columns.length !== this.columnModel.length && (o = !0), o || this.setProperties({
                    columns: this.columnModel
                }, !0), this.deepMerge = void 0
            }
            return this.columnModel
        }, t.prototype.getContent = function() {
            return this.grid.getContent()
        }, t.prototype.mergePersistTreeGridData = function() {
            this.grid.mergePersistGridData.apply(this)
        }, t.prototype.mergeColumns = function(e, t) {
            this.grid.mergeColumns.apply(this, [e, t])
        }, t.prototype.updateTreeGridModel = function() {
            this.setProperties({
                filterSettings: xl("properties", this.grid.filterSettings)
            }, !0), this.setProperties({
                pageSettings: xl("properties", this.grid.pageSettings)
            }, !0), this.setProperties({
                searchSettings: xl("properties", this.grid.searchSettings)
            }, !0), this.setProperties({
                sortSettings: xl("properties", this.grid.sortSettings)
            }, !0)
        }, t.prototype.getContentTable = function() {
            return this.grid.getContentTable()
        }, t.prototype.getDataRows = function() {
            for (var e = [], t = this.grid.getDataRows(), i = 0, n = t.length; i < n; i++) t[i].classList.contains("e-summaryrow") || e.push(t[i]);
            return e
        }, t.prototype.getCurrentViewRecords = function() {
            return this.grid.currentViewData
        }, t.prototype.getBatchChanges = function() {
            return this.grid.editModule.getBatchChanges()
        }, t.prototype.getHeaderContent = function() {
            return this.grid.getHeaderContent()
        }, t.prototype.getHeaderTable = function() {
            return this.grid.getHeaderTable()
        }, t.prototype.getRowByIndex = function(e) {
            return this.grid.getRowByIndex(e)
        }, t.prototype.getRowInfo = function(e) {
            return this.grid.getRowInfo(e)
        }, t.prototype.getUidByColumnField = function(e) {
            return this.grid.getUidByColumnField(e)
        }, t.prototype.getVisibleColumns = function() {
            for (var e = [], t = 0, i = this.columnModel; t < i.length; t++) {
                var n = i[t];
                n.visible && e.push(n)
            }
            return e
        }, t.prototype.showSpinner = function() {
            Xi(this.element)
        }, t.prototype.hideSpinner = function() {
            Ji(this.element)
        }, t.prototype.refresh = function() {
            this.convertTreeData(this.dataSource), this.grid.dataSource = this.dataSource instanceof yn ? new yn(this.dataSource.dataSource, this.dataSource.defaultQuery, this.dataSource.adaptor) : this.flatData, this.grid.refresh()
        }, t.prototype.getCheckedRecords = function() {
            return this.selectionModule.getCheckedrecords()
        }, t.prototype.getCheckedRowIndexes = function() {
            return this.selectionModule.getCheckedRowIndexes()
        }, t.prototype.selectCheckboxes = function(e) {
            this.selectionModule.selectCheckboxes(e)
        }, t.prototype.refreshColumns = function(e) {
            g(e) || e ? (this.grid.columns = this.getGridColumns(this.columns), this.grid.refreshColumns()) : this.grid.setProperties({
                columns: this.getGridColumns(this.columns)
            }, !0)
        }, t.prototype.refreshHeader = function() {
            this.grid.refreshHeader()
        }, t.prototype.expandCollapseRequest = function(e) {
            if ("Batch" === this.editSettings.mode) {
                if (this.getBatchChanges()[this.changedRecords].length || this.getBatchChanges()[this.deletedRecords].length || this.getBatchChanges()[this.addedRecords].length) {
                    var t = this.grid.editModule.dialogObj;
                    return this.grid.editModule.showDialog("CancelEdit", t), void(this.targetElement = e)
                }
            }
            if (this.rowTemplate) {
                var i = e.closest(".e-treerowcell").parentElement,
                    n = this.getCurrentViewRecords()[i.rowIndex];
                e.classList.contains("e-treegridexpand") ? this.collapseRow(i, n) : this.expandRow(i, n)
            } else {
                n = (i = this.grid.getRowInfo(e)).rowData;
                e.classList.contains("e-treegridexpand") ? this.collapseRow(i.row, n) : this.expandRow(i.row, n)
            }
        }, t.prototype.expandRow = function(e, t) {
            var i = this;
            t = this.getCollapseExpandRecords(e, t), !g(e) && e.cells[0].classList.contains("e-lastrowcell") && this.lastRowBorder(e, !1);
            var n = {
                data: t,
                row: e,
                cancel: !1
            };
            this.trigger("expanding", n, (function(n) {
                if (!n.cancel && (i.expandCollapse("expand", e, t), (!Dh(i) || Ih(i)) && !Eh(i))) {
                    var r = {
                        data: t,
                        row: e
                    };
                    i.trigger("expanded", r)
                }
            }))
        }, t.prototype.getCollapseExpandRecords = function(e, t) {
            return this.allowPaging && "All" === this.pageSettings.pageSizeMode && this.isExpandAll && g(t) && !Dh(this) ? t = this.flatData.filter((function(e) {
                return e.hasChildRecords
            })) : g(t) && (t = this.grid.getCurrentViewRecords()[e.rowIndex]), t
        }, t.prototype.collapseRow = function(e, t) {
            var i = this,
                n = {
                    data: t = this.getCollapseExpandRecords(e, t),
                    row: e,
                    cancel: !1
                };
            this.trigger("collapsing", n, (function(n) {
                if (!n.cancel) {
                    i.expandCollapse("collapse", e, t);
                    var r = {
                        data: t,
                        row: e
                    };
                    Dh(i) || i.trigger("collapsed", r)
                }
            }))
        }, t.prototype.expandAtLevel = function(e) {
            if ((this.allowPaging && "All" === this.pageSettings.pageSizeMode || this.enableVirtualization) && !Dh(this)) {
                var t = this.grid.dataSource.filter((function(t) {
                    return t.hasChildRecords && t.level === e && (t.expanded = !0), t.hasChildRecords && t.level === e
                }));
                this.expandRow(null, t)
            } else
                for (var i = xl("rows", t = this.getRecordDetails(e)), n = xl("records", t), r = 0; r < n.length; r++) this.expandRow(i[r], n[r])
        }, t.prototype.getRecordDetails = function(e) {
            var t = this.getRows().filter((function(t) {
                return -1 !== t.className.indexOf("level" + e) && (t.querySelector(".e-treegridcollapse") || t.querySelector(".e-treegridexpand"))
            }));
            return {
                records: this.getCurrentViewRecords().filter((function(t) {
                    return t.level === e && t.hasChildRecords
                })),
                rows: t
            }
        }, t.prototype.collapseAtLevel = function(e) {
            if ((this.allowPaging && "All" === this.pageSettings.pageSizeMode || this.enableVirtualization) && !Dh(this)) {
                var t = this.grid.dataSource.filter((function(t) {
                    return t.hasChildRecords && t.level === e && (t.expanded = !1), t.hasChildRecords && t.level === e
                }));
                this.collapseRow(null, t)
            } else
                for (var i = this.getRecordDetails(e), n = xl("rows", i), r = xl("records", i), o = 0; o < r.length; o++) this.collapseRow(n[o], r[o]);
            if (!this.grid.contentModule.isDataSourceChanged && this.enableVirtualization && this.getRows() && this.parentData.length === this.getRows().length) {
                this.grid.contentModule.startIndex = -1, this.grid.contentModule.endIndex = -1
            }
        }, t.prototype.expandAll = function() {
            this.expandCollapseAll("expand")
        }, t.prototype.collapseAll = function() {
            this.expandCollapseAll("collapse")
        }, t.prototype.expandCollapseAll = function(e) {
            var t = this.getRows().filter((function(t) {
                return t.querySelector(".e-treegrid" + ("expand" === e ? "collapse" : "expand"))
            }));
            if (this.isExpandAll = !0, this.isCollapseAll = !0, (this.allowPaging && "All" === this.pageSettings.pageSizeMode || this.enableVirtualization) && !Dh(this))
                if (this.flatData.filter((function(t) {
                        t.hasChildRecords && (t.expanded = "collapse" !== e)
                    })), t.length) "collapse" === e ? this.collapseRow(t[0]) : this.expandRow(t[0]);
                else {
                    var i = this.enableCollapseAll;
                    this.setProperties({
                        enableCollapseAll: !0
                    }, !0), this.grid.pagerModule.goToPage(1), this.setProperties({
                        enableCollapseAll: i
                    }, !0)
                }
            else
                for (var n = 0; n < t.length; n++) "collapse" === e ? this.collapseRow(t[n]) : this.expandRow(t[n]);
            this.isExpandAll = !1, this.isCollapseAll = !1
        }, t.prototype.expandCollapse = function(e, t, i, n) {
            var r = {
                row: t,
                data: i,
                childData: [],
                requestType: e
            };
            !Dh(this) && "expand" === e && this.isSelfReference && Eh(this) && this.updateChildOnDemand(r);
            var o = this.getRows();
            if (this.rowTemplate) {
                var s = this.getContentTable().rows;
                o = [].slice.call(s)
            }
            if (g(t) ? t = o[this.getCurrentViewRecords().indexOf(i)] : +t.getAttribute("aria-rowindex"), g(t) || t.setAttribute("aria-expanded", "expand" === e ? "true" : "false"), !(this.allowPaging && "All" === this.pageSettings.pageSizeMode || this.enableVirtualization) || Dh(this) || Eh(this)) {
                var a = void 0;
                if ("expand" === e) {
                    a = "table-row", n || (i.expanded = !0, this.uniqueIDCollection[i.uniqueID].expanded = i.expanded);
                    var l = t.getElementsByClassName("e-treegridcollapse")[0];
                    if (n && !g(i[this.expandStateMapping]) && i[this.expandStateMapping] && g(l) && (l = t.getElementsByClassName("e-treegridexpand")[0]), g(l)) return;
                    l.classList.contains("e-treegridexpand") || ut([l], "e-treegridexpand"), gt([l], "e-treegridcollapse")
                } else {
                    a = "none", n && !Eh(this) || (i.expanded = !1, this.uniqueIDCollection[i.uniqueID].expanded = i.expanded);
                    l = t.getElementsByClassName("e-treegridexpand")[0];
                    if (n && !g(i[this.expandStateMapping]) && !i[this.expandStateMapping] && g(l) && (l = t.getElementsByClassName("e-treegridcollapse")[0]), g(l)) return;
                    l.classList.contains("e-treegridcollapse") || ut([l], "e-treegridcollapse"), gt([l], "e-treegridexpand")
                }
                var h = o.filter((function(e) {
                    return e.classList.contains("e-griddetailrowindex" + i.index + "level" + (i.level + 1))
                }));
                if (Dh(this) && !Ih(this) ? this.remoteExpand(e, t, i, n) : Eh(this) && "collapse" !== e || this.localExpand(e, t, i, n), this.isPixelHeight() && !t.cells[0].classList.contains("e-lastrowcell"))
                    for (var p = this.getRows(), d = (s = this.getContentTable().rows, (p = [].slice.call(s)).length - 1); d > 0; d--)
                        if (!Ah(p[d])) {
                            var c = this.getContentTable().scrollHeight,
                                u = this.getContent().clientHeight;
                            this.lastRowBorder(p[d], c <= u);
                            break
                        } this.notify("rowExpandCollapse", {
                    detailrows: h,
                    action: a,
                    record: i,
                    row: t
                }), this.updateAltRow(o)
            } else this.notify("localPagedExpandCollapse", {
                action: e,
                row: t,
                record: i
            })
        }, t.prototype.updateChildOnDemand = function(e) {
            var t = this,
                i = new vn;
            e.childDataBind = i.resolve;
            var n = e.data;
            this.trigger("dataStateChange", e), i.promise.then((function(i) {
                if (e.childData.length) {
                    for (var r = t.flatData, o = 0, s = 0; s < r.length; s++)
                        if (r[s].taskData === n.taskData) {
                            o = s;
                            break
                        } var h = a("result", t.dataSource),
                        p = Mh(e.childData),
                        d = n[t.childMapping] && n[t.childMapping].length > p.length ? n[t.childMapping].length : p.length;
                    for (s = 0; s < d; s++) n[t.childMapping] && h.filter((function(e, i) {
                        e[t.parentIdMapping] === n[t.idMapping] && h.splice(i, 1)
                    })), p[s] ? (p[s].level = n.level + 1, p[s].index = Math.ceil(1e3 * Math.random()), p[s].parentItem = u({}, n), p[s].taskData = u({}, p[s]), delete p[s].parentItem.childRecords, delete p[s].taskData.parentItem, p[s].parentUniqueID = n.uniqueID, p[s].uniqueID = Za(t.element.id + "_data_"), l("uniqueIDCollection." + p[s].uniqueID, p[s], t), (!g(p[s][t.childMapping]) || p[s][t.hasChildMapping] && Eh(t)) && (p[s].hasChildRecords = !0), r.splice(o + 1 + s, n[t.childMapping] && n[t.childMapping][s] ? 1 : 0, p[s])) : r.splice(o + 1 + s, 1);
                    r[o][t.childMapping] = p, r[o].childRecords = p, r[o].expanded = !0, l("uniqueIDCollection." + r[o].uniqueID, r[o], t);
                    for (var c = 0; c < e.childData.length; c++) h.push(e.childData[c])
                }
                t.isExpandRefresh = !0, t.grid.refresh(), t.trigger("expanded", e)
            }))
        }, t.prototype.remoteExpand = function(e, t, i, n) {
            var r = this.getRows();
            if (this.rowTemplate) {
                var o = this.getContentTable().rows;
                r = [].slice.call(o)
            }
            var s, a = {
                data: i,
                row: t
            };
            if (s = r.filter((function(e) {
                    return e.querySelector(".e-gridrowindex" + i.index + "level" + (i.level + 1))
                })), "expand" === e) {
                this.notify("remoteExpand", {
                    record: i,
                    rows: s,
                    parentRow: t
                });
                var l = {
                    row: t,
                    data: i
                };
                s.length > 0 && this.trigger("expanded", l)
            } else this.collapseRemoteChild({
                record: i,
                rows: s
            }), this.trigger("collapsed", a)
        }, t.prototype.localExpand = function(e, t, i, n) {
            var r, o = this.getCurrentViewRecords().filter((function(e) {
                return e.parentUniqueID === i.uniqueID
            }));
            this.isPixelHeight() && t.cells[0].classList.contains("e-lastrowcell") && this.lastRowBorder(t, !1);
            var s = this.getRows();
            if (this.rowTemplate) {
                var a = this.getContentTable().rows;
                s = [].slice.call(a)
            }
            var l = "expand" === e ? "table-row" : "none",
                h = (o[0].parentItem.index, s.filter((function(e) {
                    return e.querySelector(".e-gridrowindex" + i.index + "level" + (i.level + 1))
                })));
            (this.frozenRows || this.frozenColumns || this.getFrozenColumns()) && (r = this.getMovableRows().filter((function(e) {
                return e.querySelector(".e-gridrowindex" + i.index + "level" + (i.level + 1))
            })));
            for (var p = 0; p < h.length; p++) h[p].style.display = l, g(r) || (r[p].style.display = l), this.notify("childRowExpand", {
                row: h[p]
            }), g(o[p].childRecords) || "expand" === e && !g(o[p].expanded) && !o[p].expanded || (this.expandCollapse(e, h[p], o[p], !0), this.frozenColumns <= this.treeColumnIndex && !g(r) && this.expandCollapse(e, r[p], o[p], !0))
        }, t.prototype.updateAltRow = function(e) {
            if (this.enableAltRow && !this.rowTemplate)
                for (var t = 0, i = 0; e && i < e.length; i++) {
                    var n = e[i];
                    "none" !== n.style.display && (n.classList.contains("e-altrow") && gt([n], "e-altrow"), t % 2 == 0 || n.classList.contains("e-summaryrow") || n.classList.contains("e-detailrow") || ut([n], "e-altrow"), n.classList.contains("e-summaryrow") || n.classList.contains("e-detailrow") || t++)
                }
        }, t.prototype.treeColumnRowTemplate = function(e) {
            if (this.rowTemplate) {
                var t = this.getContentTable().rows;
                t = [].slice.call(t);
                for (var i = 0; i < t.length; i++) {
                    var n = this.grid.getContentTable().rows[i].cells[this.treeColumnIndex],
                        r = t[i],
                        o = {
                            data: this.grid.getRowsObject()[i].data,
                            row: r,
                            cell: n,
                            column: this.getColumns()[this.treeColumnIndex]
                        };
                    this.renderModule.cellRender(o)
                }
            }
        }, t.prototype.collapseRemoteChild = function(e, t) {
            t || (e.record.expanded = !1);
            for (var i, n = e.rows, r = 0; r < n.length; r++) {
                S() && this.isServerRendered ? (gt([n[r]], "e-treerowexpanded"), ut([n[r]], "e-treerowcollapsed")) : n[r].style.display = "none";
                var o = n[r].querySelector(".e-detailrowexpand");
                if (g(o) || this.grid.detailRowModule.collapse(o), n[r].querySelector(".e-treecolumn-container .e-treegridexpand")) {
                    var s = n[r].querySelector(".e-treecolumn-container .e-treegridexpand");
                    i = this.rowTemplate ? this.grid.getCurrentViewRecords()[n[r].rowIndex] : this.grid.getRowObjectFromUID(n[r].getAttribute("data-Uid")).data, !g(s) && i.expanded && (gt([s], "e-treegridexpand"), ut([s], "e-treegridcollapse"));
                    for (var a = [], l = this.getRows(), h = 0; h < l.length; h++) l[h].querySelector(".e-gridrowindex" + i.index + "level" + (i.level + 1)) && a.push(l[h]);
                    a.length && i.expanded && this.collapseRemoteChild({
                        record: i,
                        rows: a
                    }, !0)
                }
            }
        }, t.prototype.addListener = function() {
            this.on("updateResults", this.updateResultModel, this), this.grid.on("initial-end", this.afterGridRender, this)
        }, t.prototype.updateResultModel = function(e) {
            this.dataResults = e
        }, t.prototype.removeListener = function() {
            this.isDestroyed || (this.off("updateResults", this.updateResultModel), this.grid.off("initial-end", this.afterGridRender))
        }, t.prototype.filterByColumn = function(e, t, i, n, r, o, s, a) {
            this.grid.filterByColumn(e, t, i, n, r, o, s, a)
        }, t.prototype.clearFiltering = function() {
            this.grid.clearFiltering()
        }, t.prototype.removeFilteredColsByField = function(e, t) {
            this.grid.removeFilteredColsByField(e, t)
        }, t.prototype.selectRow = function(e, t) {
            this.grid.selectRow(e, t)
        }, t.prototype.selectRows = function(e) {
            this.grid.selectRows(e)
        }, t.prototype.clearSelection = function() {
            this.grid.clearSelection()
        }, t.prototype.copy = function(e) {
            this.clipboardModule.copy(e)
        }, t.prototype.paste = function(e, t, i) {
            this.clipboardModule.paste(e, t, i)
        }, t.prototype.selectCell = function(e, t) {
            this.grid.selectCell(e, t)
        }, t.prototype.getSelectedRows = function() {
            return this.grid.getSelectedRows()
        }, t.prototype.getMovableCellFromIndex = function(e, t) {
            return this.grid.getMovableCellFromIndex(e, t)
        }, t.prototype.getMovableDataRows = function() {
            return this.grid.getMovableDataRows()
        }, t.prototype.getMovableRowByIndex = function(e) {
            return this.grid.getMovableRowByIndex(e)
        }, t.prototype.getMovableRows = function() {
            return this.grid.getMovableRows()
        }, t.prototype.getFrozenColumns = function() {
            return this.getFrozenCount(this.columns, 0)
        }, t.prototype.getFrozenCount = function(e, t) {
            for (var i = 0, n = e.length; i < n; i++) e[i].columns ? t = this.getFrozenCount(e[i].columns, t) : e[i].isFrozen && t++;
            return t
        }, t.prototype.getSelectedRowIndexes = function() {
            return this.grid.getSelectedRowIndexes()
        }, t.prototype.getSelectedRowCellIndexes = function() {
            return this.grid.getSelectedRowCellIndexes()
        }, t.prototype.getSelectedRecords = function() {
            return this.grid.getSelectedRecords()
        }, t.prototype.getDataModule = function() {
            return {
                baseModule: this.grid.getDataModule(),
                treeModule: this.dataModule
            }
        }, t.prototype.reorderRows = function(e, t, i) {
            this.rowDragAndDropModule.reorderRows(e, t, i)
        }, lp([zt(0)], t.prototype, "frozenRows", void 0), lp([zt(0)], t.prototype, "frozenColumns", void 0), lp([zt("Ellipsis")], t.prototype, "clipMode", void 0), lp([zt([])], t.prototype, "columns", void 0), lp([zt(null)], t.prototype, "childMapping", void 0), lp([zt(null)], t.prototype, "hasChildMapping", void 0), lp([zt(0)], t.prototype, "treeColumnIndex", void 0), lp([zt(null)], t.prototype, "idMapping", void 0), lp([zt(null)], t.prototype, "parentIdMapping", void 0), lp([zt(!1)], t.prototype, "enableCollapseAll", void 0), lp([zt(null)], t.prototype, "expandStateMapping", void 0), lp([zt(!1)], t.prototype, "allowRowDragAndDrop", void 0), lp([zt([])], t.prototype, "dataSource", void 0), lp([zt()], t.prototype, "query", void 0), lp([zt()], t.prototype, "cloneQuery", void 0), lp([zt("AllPages")], t.prototype, "printMode", void 0), lp([zt(!1)], t.prototype, "allowPaging", void 0), lp([zt(!1)], t.prototype, "loadChildOnDemand", void 0), lp([zt(!1)], t.prototype, "allowTextWrap", void 0), lp([qt({}, hh)], t.prototype, "textWrapSettings", void 0), lp([zt(!1)], t.prototype, "allowReordering", void 0), lp([zt(!1)], t.prototype, "allowResizing", void 0), lp([zt(!1)], t.prototype, "autoCheckHierarchy", void 0), lp([qt({}, Xh)], t.prototype, "pageSettings", void 0), lp([qt({}, ka)], t.prototype, "rowDropSettings", void 0), lp([zt()], t.prototype, "pagerTemplate", void 0), lp([zt(!1)], t.prototype, "showColumnMenu", void 0), lp([zt(!1)], t.prototype, "showColumnChooser", void 0), lp([zt(!1)], t.prototype, "allowSorting", void 0), lp([zt(!0)], t.prototype, "allowMultiSorting", void 0), lp([qt({}, sp)], t.prototype, "sortSettings", void 0), lp([Wt([], $h)], t.prototype, "aggregates", void 0), lp([qt({}, ip)], t.prototype, "editSettings", void 0), lp([zt(!1)], t.prototype, "allowFiltering", void 0), lp([zt()], t.prototype, "detailTemplate", void 0), lp([qt({}, sh)], t.prototype, "filterSettings", void 0), lp([qt({}, zh)], t.prototype, "searchSettings", void 0), lp([zt()], t.prototype, "toolbar", void 0), lp([zt()], t.prototype, "toolbarTemplate", void 0), lp([zt("Default")], t.prototype, "gridLines", void 0), lp([zt()], t.prototype, "contextMenuItems", void 0), lp([zt()], t.prototype, "columnMenuItems", void 0), lp([zt()], t.prototype, "rowTemplate", void 0), lp([zt("Parent")], t.prototype, "copyHierarchyMode", void 0), lp([zt(null)], t.prototype, "rowHeight", void 0), lp([zt(!0)], t.prototype, "enableAltRow", void 0), lp([zt(!0)], t.prototype, "allowKeyboard", void 0), lp([zt(!1)], t.prototype, "enableHover", void 0), lp([zt(!1)], t.prototype, "enableAutoFill", void 0), lp([zt("auto")], t.prototype, "height", void 0), lp([zt("auto")], t.prototype, "width", void 0), lp([zt(!1)], t.prototype, "enableVirtualization", void 0), lp([zt("All")], t.prototype, "columnQueryMode", void 0), lp([_t()], t.prototype, "created", void 0), lp([_t()], t.prototype, "load", void 0), lp([_t()], t.prototype, "expanding", void 0), lp([_t()], t.prototype, "expanded", void 0), lp([_t()], t.prototype, "collapsing", void 0), lp([_t()], t.prototype, "collapsed", void 0), lp([_t()], t.prototype, "cellSave", void 0), lp([_t()], t.prototype, "cellSaved", void 0), lp([_t()], t.prototype, "actionBegin", void 0), lp([_t()], t.prototype, "actionComplete", void 0), lp([_t()], t.prototype, "beginEdit", void 0), lp([_t()], t.prototype, "batchAdd", void 0), lp([_t()], t.prototype, "batchDelete", void 0), lp([_t()], t.prototype, "batchCancel", void 0), lp([_t()], t.prototype, "beforeBatchAdd", void 0), lp([_t()], t.prototype, "beforeBatchDelete", void 0), lp([_t()], t.prototype, "beforeBatchSave", void 0), lp([_t()], t.prototype, "cellEdit", void 0), lp([_t()], t.prototype, "actionFailure", void 0), lp([_t()], t.prototype, "dataBound", void 0), lp([_t()], t.prototype, "dataSourceChanged", void 0), lp([_t()], t.prototype, "dataStateChange", void 0), lp([_t()], t.prototype, "recordDoubleClick", void 0), lp([_t()], t.prototype, "rowDataBound", void 0), lp([_t()], t.prototype, "detailDataBound", void 0), lp([_t()], t.prototype, "queryCellInfo", void 0), lp([zt(!0)], t.prototype, "allowSelection", void 0), lp([_t()], t.prototype, "rowSelecting", void 0), lp([_t()], t.prototype, "rowSelected", void 0), lp([_t()], t.prototype, "rowDeselecting", void 0), lp([_t()], t.prototype, "rowDeselected", void 0), lp([_t()], t.prototype, "headerCellInfo", void 0), lp([_t()], t.prototype, "cellSelecting", void 0), lp([_t()], t.prototype, "columnMenuOpen", void 0), lp([_t()], t.prototype, "columnMenuClick", void 0), lp([_t()], t.prototype, "cellSelected", void 0), lp([_t()], t.prototype, "cellDeselecting", void 0), lp([_t()], t.prototype, "cellDeselected", void 0), lp([_t()], t.prototype, "resizeStart", void 0), lp([_t()], t.prototype, "resizing", void 0), lp([_t()], t.prototype, "resizeStop", void 0), lp([_t()], t.prototype, "columnDragStart", void 0), lp([_t()], t.prototype, "columnDrag", void 0), lp([_t()], t.prototype, "columnDrop", void 0), lp([_t()], t.prototype, "checkboxChange", void 0), lp([_t()], t.prototype, "printComplete", void 0), lp([_t()], t.prototype, "beforePrint", void 0), lp([_t()], t.prototype, "toolbarClick", void 0), lp([_t()], t.prototype, "beforeDataBound", void 0), lp([_t()], t.prototype, "contextMenuOpen", void 0), lp([_t()], t.prototype, "contextMenuClick", void 0), lp([_t()], t.prototype, "beforeCopy", void 0), lp([_t()], t.prototype, "beforePaste", void 0), lp([_t()], t.prototype, "rowDrag", void 0), lp([_t()], t.prototype, "rowDragStart", void 0), lp([_t()], t.prototype, "rowDragStartHelper", void 0), lp([_t()], t.prototype, "rowDrop", void 0), lp([zt(-1)], t.prototype, "selectedRowIndex", void 0), lp([qt({}, _h)], t.prototype, "selectionSettings", void 0), lp([zt(!1)], t.prototype, "allowExcelExport", void 0), lp([zt(!1)], t.prototype, "allowPdfExport", void 0), lp([_t()], t.prototype, "pdfQueryCellInfo", void 0), lp([_t()], t.prototype, "pdfHeaderQueryCellInfo", void 0), lp([_t()], t.prototype, "excelQueryCellInfo", void 0), lp([_t()], t.prototype, "excelHeaderQueryCellInfo", void 0), lp([_t()], t.prototype, "beforeExcelExport", void 0), lp([_t()], t.prototype, "excelExportComplete", void 0), lp([_t()], t.prototype, "beforePdfExport", void 0), lp([_t()], t.prototype, "pdfExportComplete", void 0), t = i = lp([Gt], t)
    }(pi),
    pp = function(e) {
        this.allowEditing = !0, this.allowReordering = !0, this.allowResizing = !0, this.allowSorting = !0, this.allowFiltering = !0, this.edit = {}, c(this, e)
    },
    dp = function() {
        function e(e) {
            var t = this;
            this.previousScroll = {
                top: 0,
                left: 0
            }, this.queryCellInfo = function(e) {
                t.parent.trigger("queryCellInfo", e)
            }, this.headerCellInfo = function(e) {
                t.parent.trigger("headerCellInfo", e)
            }, this.rowDataBound = function(e) {
                t.parent.trigger("rowDataBound", e)
            }, this.columnMenuOpen = function(e) {
                t.parent.notify("columnMenuOpen", e), t.parent.trigger("columnMenuOpen", e)
            }, this.columnMenuClick = function(e) {
                t.parent.trigger("columnMenuClick", e)
            }, this.parent = e, this.parent.treeGrid = new hp, this.parent.treeGrid.allowSelection = !1, this.parent.treeGrid.allowKeyboard = this.parent.allowKeyboard, this.treeGridColumns = [], this.validateGanttColumns(), this.addEventListener()
        }
        return e.prototype.addEventListener = function() {
            this.parent.on("renderPanels", this.createContainer, this), this.parent.on("chartScroll", this.updateScrollTop, this), this.parent.on("destroy", this.destroy, this), this.parent.treeGrid.on("renderReactTemplate", this.renderReactTemplate, this)
        }, e.prototype.renderReactTemplate = function(e) {
            this.parent.portals = e, this.parent.renderTemplates()
        }, e.prototype.createContainer = function() {
            this.treeGridElement = ct("div", {
                id: "treeGrid" + this.parent.element.id,
                className: "e-gantt-tree-grid"
            });
            var e = ct("div", {
                className: "e-gantt-temp-header"
            });
            this.parent.treeGridPane.appendChild(this.treeGridElement), this.treeGridElement.appendChild(e), this.parent.treeGridPane.classList.add("e-temp-content")
        }, e.prototype.renderTreeGrid = function() {
            this.composeProperties(), this.bindEvents(), this.parent.treeGrid.appendTo(this.treeGridElement), this.wireEvents()
        }, e.prototype.composeProperties = function() {
            this.parent.treeGrid.showColumnMenu = this.parent.showColumnMenu, this.parent.treeGrid.columnMenuItems = this.parent.columnMenuItems, this.parent.treeGrid.childMapping = this.parent.taskFields.child, this.parent.treeGrid.treeColumnIndex = this.parent.treeColumnIndex, this.parent.treeGrid.columns = this.treeGridColumns, this.parent.treeGrid.dataSource = this.parent.flatData, this.parent.treeGrid.expandStateMapping = this.parent.taskFields.expandState;
            this.parent.treeGrid.isGantt = !0, this.parent.treeGrid.rowHeight = this.parent.rowHeight, this.parent.treeGrid.gridLines = this.parent.gridLines, S() && 0 === this.parent.searchSettings.fields.length && "" === this.parent.searchSettings.key || (this.parent.treeGrid.searchSettings = this.parent.searchSettings);
            this.parent.treeGrid.isJsComponent = !0;
            var e = 0;
            g(this.parent.toolbarModule) || g(this.parent.toolbarModule.element) || (e = this.parent.toolbarModule.element.offsetHeight), this.parent.treeGrid.height = this.parent.ganttHeight - e - 46
        }, e.prototype.getContentDiv = function() {
            return this.treeGridElement.querySelector(".e-content")
        }, e.prototype.getHeaderDiv = function() {
            return this.treeGridElement.querySelector(".e-headercontent")
        }, e.prototype.getScrollbarWidth = function() {
            var e = document.createElement("div");
            e.style.visibility = "hidden", e.style.overflow = "scroll", e.style.msOverflowStyle = "scrollbar";
            var t = document.createElement("div");
            e.appendChild(t), this.parent.element.appendChild(e);
            var i = e.offsetWidth - t.offsetWidth;
            return e.parentNode.removeChild(e), i
        }, e.prototype.ensureScrollBar = function() {
            var e = this.getContentDiv(),
                t = this.getHeaderDiv(),
                i = this.getScrollbarWidth(),
                n = /Android|Mac|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            0 !== i ? e.style.cssText += "width: calc(100% + " + i + "px);" : e.classList.add("e-gantt-scroll-padding"), 0 === i && n && (t.style.cssText += "width: calc(100% + 17px);")
        }, e.prototype.bindEvents = function() {
            this.parent.treeGrid.dataBound = this.dataBound.bind(this), this.parent.treeGrid.collapsing = this.collapsing.bind(this), this.parent.treeGrid.collapsed = this.collapsed.bind(this), this.parent.treeGrid.expanding = this.expanding.bind(this), this.parent.treeGrid.expanded = this.expanded.bind(this), this.parent.treeGrid.actionBegin = this.actionBegin.bind(this), this.parent.treeGrid.actionComplete = this.treeActionComplete.bind(this), this.parent.treeGrid.created = this.created.bind(this), this.parent.treeGrid.actionFailure = this.actionFailure.bind(this), this.parent.treeGrid.queryCellInfo = this.queryCellInfo.bind(this), this.parent.treeGrid.headerCellInfo = this.headerCellInfo.bind(this), this.parent.treeGrid.rowDataBound = this.rowDataBound.bind(this), this.parent.treeGrid.columnMenuOpen = this.columnMenuOpen.bind(this), this.parent.treeGrid.columnMenuClick = this.columnMenuClick.bind(this)
        }, e.prototype.dataBound = function(e) {
            this.ensureScrollBar(), this.parent.treeDataBound(e)
        }, e.prototype.collapsing = function(e) {
            var t = this,
                i = new vn;
            if (!this.parent.ganttChartModule.isExpandCollapseFromChart) {
                var n = this.createExpandCollapseArgs(e);
                if (S()) return this.parent.trigger("collapsing", n, (function(e) {
                    i.resolve(e), l("chartRow", x(a("chartRow", e)), e), l("gridRow", x(a("gridRow", e)), e), a("cancel", e) || t.parent.ganttChartModule.collapseGanttRow(e, !0)
                })), i;
                this.parent.ganttChartModule.collapseGanttRow(n), l("cancel", a("cancel", n), e)
            }
        }, e.prototype.expanding = function(e) {
            var t = this,
                i = new vn;
            if (!this.parent.ganttChartModule.isExpandCollapseFromChart) {
                var n = this.createExpandCollapseArgs(e);
                if (S()) return this.parent.trigger("expanding", n, (function(e) {
                    i.resolve(e), l("chartRow", x(a("chartRow", e)), e), l("gridRow", x(a("gridRow", e)), e), a("cancel", e) || t.parent.ganttChartModule.expandGanttRow(e, !0)
                })), i;
                this.parent.ganttChartModule.expandGanttRow(n), l("cancel", a("cancel", n), e)
            }
        }, e.prototype.collapsed = function(e) {
            if (this.updateExpandStatus(e), !this.parent.ganttChartModule.isExpandCollapseFromChart) {
                var t = this.createExpandCollapseArgs(e);
                this.parent.ganttChartModule.collapsedGanttRow(t)
            }
        }, e.prototype.expanded = function(e) {
            if (this.updateExpandStatus(e), !this.parent.ganttChartModule.isExpandCollapseFromChart) {
                var t = this.createExpandCollapseArgs(e);
                this.parent.ganttChartModule.expandedGanttRow(t)
            }
        }, e.prototype.updateExpandStatus = function(e) {
            a("data", e) && S() && (this.parent.getTaskByUniqueID(a("data", e).uniqueID).expanded = a("data", e).expanded)
        }, e.prototype.actionBegin = function(e) {
            this.parent.notify("actionBegin", e), this.parent.trigger("actionBegin", e)
        }, e.prototype.created = function(e) {
            this.updateKeyConfigSettings()
        }, e.prototype.actionFailure = function(e) {
            this.parent.trigger("actionFailure", e)
        }, e.prototype.createExpandCollapseArgs = function(e) {
            var t = a("data", e);
            return {
                data: t,
                gridRow: a("row", e),
                chartRow: S() ? this.parent.ganttChartModule.getChartRows()[this.parent.currentViewData.indexOf(this.parent.getTaskByUniqueID(t.uniqueID))] : this.parent.ganttChartModule.getChartRows()[this.parent.currentViewData.indexOf(t)],
                cancel: !1
            }
        }, e.prototype.treeActionComplete = function(e) {
            var t = u({}, e, !0);
            if ("sorting" === a("requestType", e)) this.parent.notify("updateModel", {}), h(t, "isFrozen");
            else if ("filtering" === a("requestType", e)) {
                this.parent.notify("updateModel", {}), this.parent.element.querySelector(".e-treegrid").focus()
            } else if ("save" === a("type", e) && this.parent.editModule && this.parent.editModule.cellEditModule) {
                var i = a("data", e);
                g(i) || g(this.parent.getTaskByUniqueID(i.uniqueID)) || (this.parent.getTaskByUniqueID(i.uniqueID).taskData[this.parent.taskFields.duration] = i.taskData[this.parent.taskFields.duration], this.parent.getTaskByUniqueID(i.uniqueID).taskData[this.parent.taskFields.resourceInfo] = i.taskData[this.parent.taskFields.resourceInfo]), this.parent.editModule.cellEditModule.initiateCellEdit(e, this.currentEditRow), this.currentEditRow = {}
            }
            "filterafteropen" === a("requestType", e) && this.parent.notify("actionComplete", e), "searching" === a("requestType", e) && this.parent.notify("actionComplete", e), g(a("batchChanges", e)) || g(this.parent.toolbarModule) || this.parent.toolbarModule.refreshToolbarItems(), S() && this.parent.updateDataArgs(t), this.parent.isCancelled && (l("requestType", "cancel", t), l("action", "CellEditing", t), this.parent.isCancelled = !1), this.parent.trigger("actionComplete", t)
        }, e.prototype.updateKeyConfigSettings = function() {
            delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.delete, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.insert, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.upArrow, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.downArrow, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.ctrlHome, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.ctrlEnd, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.enter, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.tab, delete this.parent.treeGrid.grid.keyboardModule.keyConfigs.shiftTab, delete this.parent.treeGrid.keyboardModule.keyConfigs.enter, delete this.parent.treeGrid.keyboardModule.keyConfigs.upArrow, delete this.parent.treeGrid.keyboardModule.keyConfigs.downArrow, delete this.parent.treeGrid.keyboardModule.keyConfigs.ctrlShiftUpArrow, delete this.parent.treeGrid.keyboardModule.keyConfigs.ctrlShiftDownArrow, delete this.parent.treeGrid.keyboardModule.keyConfigs.ctrlUpArrow, delete this.parent.treeGrid.keyboardModule.keyConfigs.ctrlDownArrow, delete this.parent.treeGrid.keyboardModule.keyConfigs.tab, delete this.parent.treeGrid.keyboardModule.keyConfigs.shiftTab
        }, e.prototype.wireEvents = function() {
            var e = this.parent.treeGrid.element.querySelector(".e-content");
            e && ye.add(e, "scroll", this.scrollHandler, this), this.parent.isAdaptive && ye.add(this.parent.treeGridPane, "click", this.treeGridClickHandler, this)
        }, e.prototype.unWireEvents = function() {
            var e = this.parent.treeGrid.element && this.parent.treeGrid.element.querySelector(".e-content");
            e && ye.remove(e, "scroll", this.scrollHandler), this.parent.isAdaptive && ye.remove(this.parent.treeGridPane, "click", this.treeGridClickHandler)
        }, e.prototype.scrollHandler = function(e) {
            var t = this.parent.treeGrid.element.querySelector(".e-content");
            t.scrollTop !== this.previousScroll.top && this.parent.notify("grid-scroll", {
                top: t.scrollTop
            }), this.previousScroll.top = t.scrollTop, this.parent.contextMenuModule && this.parent.contextMenuModule.isOpen && this.parent.contextMenuModule.contextMenu.close()
        }, e.prototype.validateGanttColumns = function() {
            var e = this.parent,
                t = e.columns.length,
                i = this.parent.taskFields;
            this.parent.columnMapping = {}, this.parent.columnByField = {}, this.parent.customColumns = [];
            for (var n = ["id", "name", "startDate", "endDate", "duration", "dependency", "progress", "baselineStartDate", "baselineEndDate", "resourceInfo", "notes", "work", "manual", "type"], r = function(t) {
                    var r = {};
                    "string" == typeof e.columns[t] ? r.field = e.columns[t] : r = e.columns[t];
                    var s = [];
                    if (n.length > 0 && (s = n.filter((function(e) {
                            return r.field === i[e]
                        }))), 0 === s.length) return r.field === o.parent.resourceFields.group || (o.parent.customColumns.push(r.field), r.headerText = r.headerText ? r.headerText : r.field, r.width = r.width ? r.width : 150, r.editType = r.editType ? r.editType : "stringedit", r.type = r.type ? r.type : "string", o.bindTreeGridColumnProperties(r, !0)), "continue";
                    var a = n.indexOf(s[0]);
                    n.splice(a, 1), o.createTreeGridColumn(r, !0), o.parent.columnMapping[s[0]] = r.field
                }, o = this, s = 0; s < t; s++) r(s);
            for (var a = 0; a < n.length; a++) {
                var l = {};
                g(i[n[a]]) || (l.field = i[n[a]], this.createTreeGridColumn(l, 0 === t), this.parent.columnMapping[n[a]] = l.field)
            }
            if ("ProjectView" !== this.parent.viewType) {
                l = {};
                this.composeUniqueIDColumn(l), this.createTreeGridColumn(l, !0)
            }
        }, e.prototype.createTreeGridColumn = function(e, t) {
            var i = this.parent.taskFields;
            if (e.disableHtmlEncode = e.disableHtmlEncode ? e.disableHtmlEncode : this.parent.disableHtmlEncode, i.id !== e.field && (e.clipMode = e.clipMode ? e.clipMode : "EllipsisWithTooltip"), i.id === e.field) this.composeIDColumn(e);
            else if (i.name === e.field) e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("name"), e.width = e.width ? e.width : 150, e.editType = e.editType ? e.editType : "stringedit", e.type = e.type ? e.type : "string";
            else if (i.startDate === e.field) e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("startDate"), e.editType = e.editType ? e.editType : -1 !== this.parent.getDateFormat().toLowerCase().indexOf("hh") ? "datetimepickeredit" : "datepickeredit", e.format = e.format ? e.format : {
                type: "date",
                format: this.parent.getDateFormat()
            }, e.width = e.width ? e.width : 150, e.edit = {
                params: {
                    renderDayCell: this.parent.renderWorkingDayCell.bind(this.parent)
                }
            };
            else if (i.endDate === e.field) e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("endDate"), e.format = e.format ? e.format : {
                type: "date",
                format: this.parent.getDateFormat()
            }, e.editType = e.editType ? e.editType : -1 !== this.parent.getDateFormat().toLowerCase().indexOf("hh") ? "datetimepickeredit" : "datepickeredit", e.width = e.width ? e.width : 150, e.edit = {
                params: {
                    renderDayCell: this.parent.renderWorkingDayCell.bind(this.parent)
                }
            };
            else if (i.duration === e.field) e.width = e.width ? e.width : 150, e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("duration"), e.valueAccessor = e.valueAccessor ? e.valueAccessor : g(e.edit) ? this.durationValueAccessor.bind(this) : null, e.editType = e.editType ? e.editType : "stringedit", e.type = "string";
            else if (i.progress === e.field) this.composeProgressColumn(e);
            else if (i.dependency === e.field) e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("dependency"), e.width = e.width ? e.width : 150, e.editType = e.editType ? e.editType : "stringedit", e.type = "string", e.allowFiltering = !1 !== e.allowFiltering;
            else if (i.resourceInfo === e.field) this.composeResourceColumn(e);
            else if (i.notes === e.field) e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("notes"), e.width = e.width ? e.width : 150, e.editType = e.editType ? e.editType : "stringedit", S() && !e.template && this.parent.setProperties({
                showInlineNotes: !0
            }, !0), this.parent.showInlineNotes ? e.disableHtmlEncode = !1 : e.template || (e.template = '<div class="e-ganttnotes-info"><span class="e-icons e-notes-info"></span></div>');
            else if (i.baselineStartDate === e.field || i.baselineEndDate === e.field) {
                var n = i.baselineEndDate === e.field ? "baselineEndDate" : "baselineStartDate";
                e.width = e.width ? e.width : 150, e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant(n), e.format = e.format ? e.format : {
                    type: "date",
                    format: this.parent.getDateFormat()
                }, e.editType = e.editType ? e.editType : -1 !== this.parent.getDateFormat().toLowerCase().indexOf("hh") ? "datetimepickeredit" : "datepickeredit"
            } else i.work === e.field ? (e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("work"), e.width = e.width ? e.width : 150, e.valueAccessor = e.valueAccessor ? e.valueAccessor : this.workValueAccessor.bind(this), e.editType = e.editType ? e.editType : "numericedit") : i.type === e.field ? (e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("taskType"), e.width = e.width ? e.width : 150, e.editType = "dropdownedit", e.valueAccessor = e.valueAccessor ? e.valueAccessor : this.taskTypeValueAccessor.bind(this)) : i.manual === e.field && "Custom" === this.parent.taskMode && (e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("taskMode"), e.width = e.width ? e.width : 120, e.editType = e.editType ? e.editType : "dropdownedit", e.valueAccessor = e.valueAccessor ? e.valueAccessor : this.modeValueAccessor.bind(this), e.edit = {
                params: {
                    query: new on,
                    dataSource: [{
                        id: 1,
                        text: this.parent.localeObj.getConstant("manual"),
                        value: !0
                    }, {
                        id: 2,
                        text: this.parent.localeObj.getConstant("auto"),
                        value: !1
                    }],
                    fields: {
                        text: "text",
                        value: "value"
                    }
                }
            });
            this.bindTreeGridColumnProperties(e, t)
        }, e.prototype.composeResourceColumn = function(e) {
            e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("resourceName"), e.width = e.width ? e.width : 150, e.type = "string", e.valueAccessor = e.valueAccessor ? e.valueAccessor : this.resourceValueAccessor.bind(this), e.allowFiltering = !1 !== e.allowFiltering
        }, e.prototype.getResourceIds = function(e) {
            var t = a(this.parent.taskFields.resourceInfo, e.taskData),
                i = [];
            if (g(t)) return t;
            for (var n = 0; n < t.length; n++) i.push("object" == typeof t[n] ? t[n][this.parent.resourceFields.id] : t[n]);
            return i
        }, e.prototype.composeIDColumn = function(e) {
            e.isPrimaryKey = !!g(e.isPrimaryKey) || e.isPrimaryKey, e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("id"), e.width = e.width ? e.width : 100, e.allowEditing = !!e.allowEditing && e.allowEditing, e.editType = e.editType ? e.editType : "numericedit", "ProjectView" !== this.parent.viewType && (e.valueAccessor = this.idValueAccessor.bind(this), e.isPrimaryKey = !1)
        }, e.prototype.composeUniqueIDColumn = function(e) {
            e.field = "rowUniqueID", e.isPrimaryKey = !0, e.headerText = "UniqueID", e.allowEditing = !1, e.visible = !1
        }, e.prototype.composeProgressColumn = function(e) {
            e.headerText = e.headerText ? e.headerText : this.parent.localeObj.getConstant("progress"), e.width = e.width ? e.width : 150, e.editType = e.editType ? e.editType : "numericedit"
        }, e.prototype.bindTreeGridColumnProperties = function(e, t) {
            for (var i = {}, n = {}, r = 0, o = Object.keys(e); r < o.length; r++) {
                var s = o[r];
                i[s] = n[s] = e[s]
            }
            this.parent.columnByField[n.field] = n, this.parent.ganttColumns.push(new pp(n)), t && this.treeGridColumns.push(i)
        }, e.prototype.durationValueAccessor = function(e, t, i) {
            var n = t.ganttProperties;
            return g(n) ? "" : this.parent.dataOperation.getDurationString(n.duration, n.durationUnit)
        }, e.prototype.resourceValueAccessor = function(e, t, i) {
            var n = t.ganttProperties;
            return g(n) ? "" : n.resourceNames
        }, e.prototype.workValueAccessor = function(e, t, i) {
            var n = t.ganttProperties;
            return g(n) ? "" : this.parent.dataOperation.getWorkString(n.work, n.workUnit)
        }, e.prototype.taskTypeValueAccessor = function(e, t, i) {
            var n = t.ganttProperties;
            return g(n) ? "" : n.taskType
        }, e.prototype.modeValueAccessor = function(e, t, i) {
            return t[e] ? "Manual" : "Auto"
        }, e.prototype.idValueAccessor = function(e, t, i) {
            return 0 === t.level ? "R-" + t.ganttProperties.taskId : "T-" + t.ganttProperties.taskId
        }, e.prototype.updateScrollTop = function(e) {
            this.treeGridElement.querySelector(".e-content").scrollTop = a("top", e), this.previousScroll.top = this.treeGridElement.querySelector(".e-content").scrollTop
        }, e.prototype.treeGridClickHandler = function(e) {
            this.parent.notify("treeGridClick", e)
        }, e.prototype.removeEventListener = function() {
            this.parent.off("renderPanels", this.createContainer), this.parent.off("chartScroll", this.updateScrollTop), this.parent.off("destroy", this.destroy), this.parent.treeGrid.off("reactTemplateRender", this.renderReactTemplate)
        }, e.prototype.destroy = function() {
            this.removeEventListener(), this.unWireEvents(), this.parent.treeGrid.element && this.parent.treeGrid.destroy()
        }, e
    }(),
    cp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    up = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    gp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return cp(t, e), up([zt()], t.prototype, "field", void 0), up([zt()], t.prototype, "direction", void 0), t
    }(oi),
    fp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return cp(t, e), up([Wt([], gp)], t.prototype, "columns", void 0), up([zt(!0)], t.prototype, "allowUnsort", void 0), t
    }(oi),
    mp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    yp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    vp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return mp(t, e), yp([zt(null)], t.prototype, "from", void 0), yp([zt(null)], t.prototype, "to", void 0), t
    }(oi),
    bp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    wp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Cp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return bp(t, e), wp([zt(null)], t.prototype, "from", void 0), wp([zt(null)], t.prototype, "to", void 0), wp([zt(null)], t.prototype, "label", void 0), wp([zt(null)], t.prototype, "cssClass", void 0), t
    }(oi),
    Sp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    xp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    kp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Sp(t, e), xp([zt(null)], t.prototype, "day", void 0), xp([zt(null)], t.prototype, "label", void 0), xp([zt(null)], t.prototype, "cssClass", void 0), t
    }(oi),
    Tp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Dp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Ep = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Tp(t, e), Dp([zt(null)], t.prototype, "id", void 0), Dp([zt(null)], t.prototype, "name", void 0), Dp([zt(null)], t.prototype, "parentID", void 0), Dp([zt(null)], t.prototype, "startDate", void 0), Dp([zt(null)], t.prototype, "endDate", void 0), Dp([zt(null)], t.prototype, "dependency", void 0), Dp([zt(null)], t.prototype, "progress", void 0), Dp([zt(null)], t.prototype, "child", void 0), Dp([zt(null)], t.prototype, "milestone", void 0), Dp([zt(null)], t.prototype, "duration", void 0), Dp([zt(null)], t.prototype, "durationUnit", void 0), Dp([zt(null)], t.prototype, "cssClass", void 0), Dp([zt(null)], t.prototype, "baselineStartDate", void 0), Dp([zt(null)], t.prototype, "baselineEndDate", void 0), Dp([zt(null)], t.prototype, "resourceInfo", void 0), Dp([zt(null)], t.prototype, "expandState", void 0), Dp([zt(null)], t.prototype, "indicators", void 0), Dp([zt(null)], t.prototype, "notes", void 0), Dp([zt(null)], t.prototype, "work", void 0), Dp([zt(null)], t.prototype, "manual", void 0), Dp([zt(null)], t.prototype, "type", void 0), t
    }(oi),
    Rp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Pp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Ip = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Rp(t, e), Pp([zt("")], t.prototype, "format", void 0), Pp([zt("None")], t.prototype, "unit", void 0), Pp([zt(1)], t.prototype, "count", void 0), Pp([zt(null)], t.prototype, "formatter", void 0), t
    }(oi),
    Mp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Rp(t, e), Pp([zt("Week")], t.prototype, "timelineViewMode", void 0), Pp([qt({}, Ip)], t.prototype, "topTier", void 0), Pp([qt({}, Ip)], t.prototype, "bottomTier", void 0), Pp([zt(33)], t.prototype, "timelineUnitSize", void 0), Pp([zt(0)], t.prototype, "weekStartDay", void 0), Pp([zt(null)], t.prototype, "weekendBackground", void 0), Pp([zt(!0)], t.prototype, "showTooltip", void 0), Pp([zt(!0)], t.prototype, "updateTimescaleView", void 0), t
    }(oi),
    Lp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Op = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Ap = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Lp(t, e), Op([zt(!1)], t.prototype, "allowEditing", void 0), Op([zt(!1)], t.prototype, "allowAdding", void 0), Op([zt(!1)], t.prototype, "allowDeleting", void 0), Op([zt("Auto")], t.prototype, "mode", void 0), Op([zt("Top")], t.prototype, "newRowPosition", void 0), Op([zt(!1)], t.prototype, "showDeleteConfirmDialog", void 0), Op([zt(!1)], t.prototype, "allowTaskbarEditing", void 0), t
    }(oi),
    Bp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Fp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Np = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Bp(t, e), Fp([zt("Row")], t.prototype, "mode", void 0), Fp([zt("Flow")], t.prototype, "cellSelectionMode", void 0), Fp([zt("Single")], t.prototype, "type", void 0), Fp([zt(!1)], t.prototype, "persistSelection", void 0), Fp([zt(!1)], t.prototype, "enableToggle", void 0), t
    }(oi),
    Hp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Vp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    jp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Hp(t, e), Vp([zt(null)], t.prototype, "rightLabel", void 0), Vp([zt(null)], t.prototype, "leftLabel", void 0), Vp([zt(null)], t.prototype, "taskLabel", void 0), t
    }(oi),
    zp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    qp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Wp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return zp(t, e), qp([zt(!0)], t.prototype, "showTooltip", void 0), qp([zt()], t.prototype, "taskbar", void 0), qp([zt()], t.prototype, "baseline", void 0), qp([zt()], t.prototype, "connectorLine", void 0), qp([zt()], t.prototype, "editing", void 0), t
    }(oi),
    _p = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Gp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Up = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return _p(t, e), Gp([Wt([], ba)], t.prototype, "columns", void 0), Gp([zt("Menu")], t.prototype, "type", void 0), Gp([zt()], t.prototype, "operators", void 0), Gp([zt(!1)], t.prototype, "ignoreAccent", void 0), Gp([zt("Parent")], t.prototype, "hierarchyMode", void 0), t
    }(oi),
    Kp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Yp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Xp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Kp(t, e), Yp([zt(null)], t.prototype, "position", void 0), Yp([zt(-1)], t.prototype, "columnIndex", void 0), Yp([zt(4)], t.prototype, "separatorSize", void 0), Yp([zt(null)], t.prototype, "minimum", void 0), Yp([zt("Default")], t.prototype, "view", void 0), t
    }(oi),
    Qp = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    Jp = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Zp = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return Qp(t, e), Jp([zt(null)], t.prototype, "id", void 0), Jp([zt(null)], t.prototype, "name", void 0), Jp([zt(null)], t.prototype, "unit", void 0), Jp([zt(null)], t.prototype, "group", void 0), t
    }(oi),
    $p = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    ed = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    td = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return $p(t, e), ed([zt([])], t.prototype, "fields", void 0), ed([zt(!1)], t.prototype, "ignoreCase", void 0), ed([zt("contains")], t.prototype, "operator", void 0), ed([zt("")], t.prototype, "key", void 0), ed([zt("Parent")], t.prototype, "hierarchyMode", void 0), t
    }(oi),
    id = function() {
        function e(e) {
            this.taskBarHeight = 0, this.milestoneHeight = 0, this.milesStoneRadius = 0, this.baselineTop = 0, this.baselineHeight = 3, this.touchLeftConnectorpoint = "", this.touchRightConnectorpoint = "", this.parent = e, this.initPublicProp(), this.addEventListener()
        }
        return e.prototype.initPublicProp = function() {
            this.ganttChartTableBody = null
        }, e.prototype.addEventListener = function() {
            this.parent.on("renderPanels", this.createChartTable, this), this.parent.on("dataReady", this.initiateTemplates, this), this.parent.on("destroy", this.destroy, this)
        }, e.prototype.refreshChartByTimeline = function() {
            this.taskTable.style.width = C(this.parent.timelineModule.totalTimelineWidth), this.refreshGanttRows()
        }, e.prototype.createChartTable = function() {
            this.taskTable = ct("table", {
                className: "e-task-table e-zero-spacing",
                id: "GanttTaskTable" + this.parent.element.id,
                styles: "z-index: 2;position: absolute;width:" + this.parent.timelineModule.totalTimelineWidth + "px;",
                attrs: {
                    cellspacing: "0.25px"
                }
            });
            var e = ct("colgroup"),
                t = ct("col", {
                    styles: "width:" + this.parent.timelineModule.totalTimelineWidth + "px;"
                });
            e.appendChild(t), this.taskTable.appendChild(e), this.ganttChartTableBody = ct("tbody", {
                id: this.parent.element.id + "GanttTaskTableBody"
            }), this.taskTable.appendChild(this.ganttChartTableBody), this.parent.ganttChartModule.chartBodyContent.appendChild(this.taskTable)
        }, e.prototype.initiateTemplates = function() {
            this.taskTable.style.width = C(this.parent.timelineModule.totalTimelineWidth), this.initChartHelperPrivateVariable(), this.initializeChartTemplate()
        }, e.prototype.renderChartRows = function() {
            this.createTaskbarTemplate(), this.parent.isGanttChartRendered = !0
        }, e.prototype.getIndicatorNode = function(e) {
            var t = '<label class="e-label e-indicator-span"  style="line-height:' + this.parent.rowHeight + "px;left:" + this.getIndicatorleft(e.date) + 'px;"><i class="' + e.iconClass + '"></i> </label>';
            return this.createDivElement(t)
        }, e.prototype.getIndicatorleft = function(e) {
            return e = this.parent.dateValidationModule.getDateFromFormat(e), this.parent.dataOperation.getTaskLeft(e, !1)
        }, e.prototype.getChildTaskbarNode = function(e, t) {
            var i = null,
                n = this.templateData;
            if (this.childTaskbarTemplateFunction) i = this.childTaskbarTemplateFunction(u({
                index: e
            }, n), this.parent, "TaskbarTemplate", this.getTemplateID("TaskbarTemplate"), !1, void 0, t[0]);
            else {
                var r = "";
                if (this.taskLabelTemplateFunction) {
                    var o = this.taskLabelTemplateFunction(u({
                            index: e
                        }, n), this.parent, "TaskLabelTemplate", this.getTemplateID("TaskLabelTemplate"), !1),
                        s = ct("div");
                    s.appendChild(o[0]), r = s.innerHTML
                } else r = "isCustomTemplate" === (r = this.getTaskLabel(this.parent.labelSettings.taskLabel)) ? this.parent.labelSettings.taskLabel : r;
                var a = n.ganttProperties.startDate && n.ganttProperties.endDate && n.ganttProperties.duration ? '<div class="e-gantt-child-taskbar-inner-div e-gantt-child-taskbar ' + (n.ganttProperties.isAutoSchedule ? "" : "e-gantt-child-manualtaskbar") + '"style="width:' + n.ganttProperties.width + "px;height:" + this.taskBarHeight + 'px;"><div class="e-gantt-child-progressbar-inner-div e-gantt-child-progressbar ' + (n.ganttProperties.isAutoSchedule ? "" : "e-gantt-child-manualprogressbar") + '" style="border-style:' + (n.ganttProperties.progressWidth ? "solid;" : "none;") + "width:" + n.ganttProperties.progressWidth + "px;height:100%;border-top-right-radius:" + this.getBorderRadius(n.ganttProperties) + "px;border-bottom-right-radius:" + this.getBorderRadius(n.ganttProperties) + 'px;"><span class="' + Yl + '" style="line-height:' + (this.taskBarHeight - 1) + "px; text-align:" + ("ResourceView" === this.parent.viewType ? "left;" : "") + "display:" + ("ResourceView" === this.parent.viewType ? "inline-flex;" : "") + "width:" + ("ResourceView" === this.parent.viewType ? n.ganttProperties.width - 10 : "") + "px; height:" + this.taskBarHeight + 'px;">' + r + "</span></div></div>" : !n.ganttProperties.startDate || n.ganttProperties.endDate || n.ganttProperties.duration ? !n.ganttProperties.endDate || n.ganttProperties.startDate || n.ganttProperties.duration ? !n.ganttProperties.duration || n.ganttProperties.startDate || n.ganttProperties.endDate ? "" : '<div class="e-gantt-child-progressbar-inner-div e-gantt-child-taskbar e-gantt-unscheduled-taskbar ' + (n.ganttProperties.isAutoSchedule ? "" : "e-gantt-child-manualtaskbar") + '"style="left:' + n.ganttProperties.left + "px; width:" + n.ganttProperties.width + "px; height:" + this.taskBarHeight + 'px;"></div>' : '<div class="e-gantt-child-progressbar-inner-div e-gantt-child-taskbar e-gantt-unscheduled-taskbar-right ' + (n.ganttProperties.isAutoSchedule ? "" : "e-gantt-child-manualtaskbar") + '"style="left:' + n.ganttProperties.left + "px; height:" + this.taskBarHeight + 'px;"></div>' : '<div class="e-gantt-child-progressbar-inner-div e-gantt-child-taskbar e-gantt-unscheduled-taskbar-left ' + (n.ganttProperties.isAutoSchedule ? "" : "e-gantt-child-manualtaskbar") + '"style="left:' + n.ganttProperties.left + "px; height:" + this.taskBarHeight + 'px;"></div>';
                i = this.createDivElement(a)
            }
            return i
        }, e.prototype.getMilestoneNode = function(e, t) {
            var i = null,
                n = this.templateData;
            if (this.milestoneTemplateFunction) i = this.milestoneTemplateFunction(u({
                index: e
            }, n), this.parent, "MilestoneTemplate", this.getTemplateID("MilestoneTemplate"), !1, void 0, t[0]);
            else {
                var r = '<div class="e-gantt-milestone" style="position:absolute;"><div class="e-milestone-top ' + (n.ganttProperties.startDate || n.ganttProperties.endDate ? "" : "e-unscheduled-milestone-top") + '" style="border-right-width:' + this.milesStoneRadius + "px;border-left-width:" + this.milesStoneRadius + "px;border-bottom-width:" + this.milesStoneRadius + 'px;"></div><div class="e-milestone-bottom ' + (n.ganttProperties.startDate || n.ganttProperties.endDate ? "" : "e-unscheduled-milestone-bottom") + '" style="top:' + this.milesStoneRadius + "px;border-right-width:" + this.milesStoneRadius + "px; border-left-width:" + this.milesStoneRadius + "px; border-top-width:" + this.milesStoneRadius + 'px;"></div></div>';
                i = this.createDivElement(r)
            }
            return i
        }, e.prototype.getTaskBaselineNode = function() {
            var e = this.templateData,
                t = '<div class="' + Xl + ' " style="margin-top:' + this.baselineTop + "px;left:" + e.ganttProperties.baselineLeft + "px;width:" + e.ganttProperties.baselineWidth + "px;height:" + this.baselineHeight + "px;" + (this.baselineColor ? "background-color: " + this.baselineColor + ";" : "") + '"></div>';
            return this.createDivElement(t)
        }, e.prototype.getMilestoneBaselineNode = function() {
            var e = '<div class="e-baseline-gantt-milestone-container " style="left:' + (this.templateData.ganttProperties.baselineLeft - this.milesStoneRadius) + "px;margin-top:" + (2 - Math.floor(this.parent.rowHeight - this.milestoneMarginTop)) + 'px"><div class="e-baseline-gantt-milestone"><div class="e-baseline-gantt-milestone e-baseline-milestone-top"  style="top:' + -this.milestoneHeight + "px;border-right:" + this.milesStoneRadius + "px solid transparent;border-left:" + this.milesStoneRadius + "px solid transparent;border-top:0pxsolid transparent;border-bottom-width:" + this.milesStoneRadius + "px;border-bottom-style: solid;" + (this.baselineColor ? "border-bottom-color: " + this.baselineColor + ";" : "") + '"></div><div class="e-baseline-gantt-milestone e-baseline-milestone-bottom"  style="top:' + (this.milesStoneRadius - this.milestoneHeight) + "px;border-right:" + this.milesStoneRadius + "px solid transparent;border-left:" + this.milesStoneRadius + "px solid transparent;border-bottom:0pxsolid transparent;border-top-width:" + this.milesStoneRadius + "px;border-top-style: solid;" + (this.baselineColor ? "border-top-color: " + this.baselineColor + ";" : "") + '"></div></div></div>';
            return this.createDivElement(e)
        }, e.prototype.getLeftLabelNode = function(e) {
            var t = this.leftLabelContainer();
            t[0].setAttribute("aria-label", this.generateTaskLabelAriaLabel("left"));
            var i = null;
            if (this.leftTaskLabelTemplateFunction) i = this.leftTaskLabelTemplateFunction(u({
                index: e
            }, this.templateData), this.parent, "LeftLabelTemplate", this.getTemplateID("LeftLabelTemplate"), !1);
            else {
                var n = this.parent.labelSettings.leftLabel,
                    r = this.getTaskLabel(n);
                r && (r = "isCustomTemplate" === r ? n : r, i = this.getLableText(r, "e-left-label-inner-div"))
            }
            return i && i.length > 0 && t[0].appendChild([].slice.call(i)[0]), t
        }, e.prototype.getLableText = function(e, t) {
            var i = ct("div", {
                    className: t,
                    styles: "height:" + this.taskBarHeight + "px;margin-top:" + this.taskBarMarginTop + "px;"
                }),
                n = ct("span", {
                    className: "e-label"
                });
            n[this.parent.disableHtmlEncode ? "textContent" : "innerHTML"] = e, i.appendChild(n);
            var r = ct("div");
            return r.appendChild(i), r.childNodes
        }, e.prototype.getRightLabelNode = function(e) {
            var t = this.rightLabelContainer();
            t[0].setAttribute("aria-label", this.generateTaskLabelAriaLabel("right"));
            var i = null;
            if (this.rightTaskLabelTemplateFunction) i = this.rightTaskLabelTemplateFunction(u({
                index: e
            }, this.templateData), this.parent, "RightLabelTemplate", this.getTemplateID("RightLabelTemplate"), !1);
            else {
                var n = this.parent.labelSettings.rightLabel,
                    r = this.getTaskLabel(n);
                r && (r = "isCustomTemplate" === r ? n : r, i = this.getLableText(r, "e-right-label-inner-div"))
            }
            return i && i.length > 0 && t[0].appendChild([].slice.call(i)[0]), t
        }, e.prototype.getManualTaskbar = function() {
            var e = this.templateData,
                t = this.taskBarHeight / 2 - 1,
                i = e.ganttProperties.startDate && e.ganttProperties.endDate && e.ganttProperties.duration ? '<div class="' + Ql + '" style="width:' + e.ganttProperties.width + "px;height:" + t / 5 + "px;border-left-width:" + t / 5 + "px; border-bottom:" + t / 5 + 'px solid transparent;"></div>' : e.ganttProperties.startDate || e.ganttProperties.endDate || !e.ganttProperties.duration ? '<div class="' + Ql + " " + (e.ganttProperties.startDate ? "e-gantt-unscheduled-taskbar-left" : "e-gantt-unscheduled-taskbar-right") + '" style="width:' + e.ganttProperties.width + "px;height:" + 2 * t + "px;border-left-width:" + t / 5 + "px; border-bottom:" + t / 5 + 'px solid transparent;"></div>' : '<div class="' + Ql + ' e-gantt-unscheduled-manualtask" style="width:' + e.ganttProperties.width + "px;height:" + (t / 5 + 1) + "px;border-left-width:" + t / 5 + "px; border-bottom:" + t / 5 + 'px solid transparent;"></div>',
                n = '<div class="e-manualparent-main-container"style=left:' + (e.ganttProperties.left - e.ganttProperties.autoLeft) + "px;width:" + e.ganttProperties.width + "px;height:" + t + "px;>" + i + (e.ganttProperties.startDate && e.ganttProperties.endDate && e.ganttProperties.duration || e.ganttProperties.duration ? '<div class="e-gantt-manualparenttaskbar-left" style="height:' + t + "px;border-left-width:" + t / 5 + "px; border-bottom:" + t / 5 + 'px solid transparent;"></div><div class="e-gantt-manualparenttaskbar-right" style=left:' + (e.ganttProperties.width - t / 5) + "px;height:" + t + "px;border-right-width:" + t / 5 + "px;border-bottom:" + t / 5 + "px solid transparent;></div></div>" : ""),
                r = '<div class="e-gantt-manualparent-milestone" style="position:absolute;left:' + (e.ganttProperties.left - e.ganttProperties.autoLeft - this.milestoneHeight / 2) + "px;width:" + 2 * this.milesStoneRadius + 'px;"><div class="e-manualparent-milestone-top" style="border-right-width:' + this.milesStoneRadius + "px;border-left-width:" + this.milesStoneRadius + "px;border-bottom-width:" + this.milesStoneRadius + 'px;"></div><div class="e-manualparent-milestone-bottom" style="top:' + this.milesStoneRadius + "px;border-right-width:" + this.milesStoneRadius + "px; border-left-width:" + this.milesStoneRadius + "px; border-top-width:" + this.milesStoneRadius + 'px;"></div></div>';
            return this.createDivElement(0 === e.ganttProperties.width ? r : n)
        }, e.prototype.getParentTaskbarNode = function(e, t) {
            var i = null,
                n = this.templateData;
            if (this.parentTaskbarTemplateFunction) i = this.parentTaskbarTemplateFunction(u({
                index: e
            }, n), this.parent, "ParentTaskbarTemplate", this.getTemplateID("ParentTaskbarTemplate"), !1, void 0, t[0]);
            else {
                var r = "";
                if (this.taskLabelTemplateFunction) {
                    var o = this.taskLabelTemplateFunction(u({
                            index: e
                        }, n), this.parent, "TaskLabelTemplate", this.getTemplateID("TaskLabelTemplate"), !1),
                        s = ct("div");
                    s.appendChild(o[0]), r = s.innerHTML
                } else r = "isCustomTemplate" === (r = this.getTaskLabel(this.parent.labelSettings.taskLabel)) ? this.parent.labelSettings.taskLabel : r;
                var a = this.taskBarHeight / 5,
                    l = '<div class="e-gantt-parent-taskbar-inner-div ' + this.getExpandClass(n) + ' e-gantt-parent-taskbar" style="width:' + (n.ganttProperties.isAutoSchedule ? n.ganttProperties.width : n.ganttProperties.autoWidth) + "px;height:" + (n.ganttProperties.isAutoSchedule ? this.taskBarHeight : 3 * a) + "px;margin-top:" + (n.ganttProperties.isAutoSchedule ? "" : 2 * a) + 'px;"><div class="e-gantt-parent-progressbar-inner-div ' + this.getExpandClass(n) + ' e-gantt-parent-progressbar" style="border-style:' + (n.ganttProperties.progressWidth ? "solid;" : "none;") + "width:" + n.ganttProperties.progressWidth + "px;border-top-right-radius:" + this.getBorderRadius(n) + "px;border-bottom-right-radius:" + this.getBorderRadius(n) + 'px;height:100%;"><span class="' + Yl + '" style="line-height:' + (this.taskBarHeight - 1) + "px; display:" + ("ResourceView" === this.parent.viewType ? "inline-flex;" : "") + "width:" + ("ResourceView" === this.parent.viewType ? n.ganttProperties.width - 10 : "") + "px; height:" + this.taskBarHeight + 'px;">' + r + "</span></div></div>",
                    h = '<div class="e-gantt-parent-milestone" style="position:absolute;"><div class="e-parent-milestone-top" style="border-right-width:' + this.milesStoneRadius + "px;border-left-width:" + this.milesStoneRadius + "px;border-bottom-width:" + this.milesStoneRadius + 'px;"></div><div class="e-parent-milestone-bottom" style="top:' + this.milesStoneRadius + "px;border-right-width:" + this.milesStoneRadius + "px; border-left-width:" + this.milesStoneRadius + "px; border-top-width:" + this.milesStoneRadius + 'px;"></div></div>';
                i = this.createDivElement(n.ganttProperties.isMilestone ? n.ganttProperties.isAutoSchedule ? h : "" : l)
            }
            return i
        }, e.prototype.getTableTrNode = function() {
            var e = ct("table"),
                t = "Horizontal" === this.parent.gridLines || "Both" === this.parent.gridLines ? "e-chart-row-border" : "";
            return e.innerHTML = '<tr class="' + this.getRowClassName(this.templateData) + ' e-chart-row"style="display:' + this.getExpandDisplayProp(this.templateData) + ";height:" + this.parent.rowHeight + 'px;"><td class="e-chart-row-cell ' + t + '" style="width:' + this.parent.timelineModule.totalTimelineWidth + 'px;"></td></tr>', e.childNodes
        }, e.prototype.initializeChartTemplate = function() {
            g(this.parent.parentTaskbarTemplate) || (this.parentTaskbarTemplateFunction = this.templateCompiler(this.parent.parentTaskbarTemplate)), !g(this.parent.labelSettings.leftLabel) && this.isTemplate(this.parent.labelSettings.leftLabel) && (this.leftTaskLabelTemplateFunction = this.templateCompiler(this.parent.labelSettings.leftLabel)), !g(this.parent.labelSettings.rightLabel) && this.isTemplate(this.parent.labelSettings.rightLabel) && (this.rightTaskLabelTemplateFunction = this.templateCompiler(this.parent.labelSettings.rightLabel)), !g(this.parent.labelSettings.taskLabel) && this.isTemplate(this.parent.labelSettings.taskLabel) && (this.taskLabelTemplateFunction = this.templateCompiler(this.parent.labelSettings.taskLabel)), g(this.parent.taskbarTemplate) || (this.childTaskbarTemplateFunction = this.templateCompiler(this.parent.taskbarTemplate)), g(this.parent.milestoneTemplate) || (this.milestoneTemplateFunction = this.templateCompiler(this.parent.milestoneTemplate))
        }, e.prototype.createDivElement = function(e) {
            var t = ct("div");
            return t.innerHTML = e, t.childNodes
        }, e.prototype.isTemplate = function(e) {
            var t = !1;
            return ("string" != typeof e || 0 === e.indexOf("#") || e.indexOf("<") > -1 || e.indexOf("$") > -1) && (t = !0), t
        }, e.prototype.getTemplateID = function(e) {
            return this.parent.element.id + e
        }, e.prototype.updateTaskbarBlazorTemplate = function(e, t) {
            var i = !0,
                n = !0,
                r = !0;
            t && (t.ganttProperties.isMilestone ? n = r = !1 : t.hasChildRecords ? i = r = !1 : t.hasChildRecords || (n = i = !1)), this.parentTaskbarTemplateFunction && n && (e ? Ue(this.getTemplateID("ParentTaskbarTemplate"), "ParentTaskbarTemplate", this.parent, !1) : Ke(this.getTemplateID("ParentTaskbarTemplate"))), this.childTaskbarTemplateFunction && r && (e ? Ue(this.getTemplateID("TaskbarTemplate"), "TaskbarTemplate", this.parent, !1) : Ke(this.getTemplateID("TaskbarTemplate"))), this.milestoneTemplateFunction && i && (e ? Ue(this.getTemplateID("MilestoneTemplate"), "MilestoneTemplate", this.parent, !1) : Ke(this.getTemplateID("MilestoneTemplate"))), this.leftTaskLabelTemplateFunction && (e ? Ue(this.getTemplateID("LeftLabelTemplate"), "LeftLabelTemplate", this.parent.labelSettings, !1) : Ke(this.getTemplateID("LeftLabelTemplate"))), this.rightTaskLabelTemplateFunction && (e ? Ue(this.getTemplateID("RightLabelTemplate"), "RightLabelTemplate", this.parent.labelSettings, !1) : Ke(this.getTemplateID("RightLabelTemplate"))), this.taskLabelTemplateFunction && (n || r) && (e ? Ue(this.getTemplateID("TaskLabelTemplate"), "TaskLabelTemplate", this.parent.labelSettings, !1) : Ke(this.getTemplateID("TaskLabelTemplate")))
        }, e.prototype.leftLabelContainer = function() {
            var e = '<div class="' + (this.leftTaskLabelTemplateFunction ? "e-left-label-container e-left-label-temp-container" : "e-left-label-container") + ' " tabindex="-1" style="height:' + (this.parent.rowHeight - 1) + "px;width:" + this.taskNameWidth(this.templateData) + '"></div>';
            return this.createDivElement(e)
        }, e.prototype.taskbarContainer = function() {
            var e = this.templateData,
                t = !(!this.parent.editModule || !this.parent.editSettings.allowTaskbarEditing || "ParentResizing" !== this.parent.editModule.taskbarEditModule.taskBarEditAction),
                i = '<div class="e-taskbar-main-container ' + this.parent.getUnscheduledTaskClass(e.ganttProperties) + " " + (e.ganttProperties.cssClass ? e.ganttProperties.cssClass : "") + '"  tabindex="-1" style="' + (e.ganttProperties.isMilestone && !t ? "width:" + this.milestoneHeight + "px;height:" + this.milestoneHeight + "px;margin-top:" + this.milestoneMarginTop + "px;left:" + (e.ganttProperties.left - this.milestoneHeight / 2) + "px;" : "width:" + e.ganttProperties.width + "px;margin-top:" + this.taskBarMarginTop + "px;left:" + (!e.hasChildRecords || e.ganttProperties.isAutoSchedule ? e.ganttProperties.left : e.ganttProperties.autoLeft) + "px;height:" + this.taskBarHeight + "px;cursor:" + (e.ganttProperties.isAutoSchedule ? "move;" : "auto;")) + '"></div>';
            return this.createDivElement(i)
        }, e.prototype.rightLabelContainer = function() {
            var e = '<div class="' + (this.rightTaskLabelTemplateFunction ? "e-right-label-container e-right-label-temp-container" : "e-right-label-container") + '"  tabindex="-1" style="left:' + this.getRightLabelLeft(this.templateData) + "px;height:" + (this.parent.rowHeight - 1) + 'px;"></div>';
            return this.createDivElement(e)
        }, e.prototype.childTaskbarLeftResizer = function() {
            var e = '<div class="e-taskbar-left-resizer e-icon" style="left:' + -(this.parent.isAdaptive ? 12 : 2) + "px;height:" + this.taskBarHeight + 'px;"></div>';
            return this.createDivElement(e)
        }, e.prototype.childTaskbarRightResizer = function() {
            var e = this.parent.isAdaptive ? -2 : -10,
                t = '<div class="e-taskbar-right-resizer e-icon" style="left:' + (this.templateData.ganttProperties.width + e) + "px;height:" + this.taskBarHeight + 'px;"></div>';
            return this.createDivElement(t)
        }, e.prototype.childTaskbarProgressResizer = function() {
            var e = '<div class="e-child-progress-resizer" style="left:' + (this.templateData.ganttProperties.progressWidth - 6) + "px;margin-top:" + (this.taskBarHeight - 4) + 'px;"><div class="e-progressbar-handler"><div class="e-progressbar-handler-element"></div><div class="e-progressbar-handler-after"></div></div>';
            return this.createDivElement(e)
        }, e.prototype.getLeftPointNode = function() {
            var e = this.templateData,
                t = -((this.parent.isAdaptive ? 14 : 2) + this.connectorPointWidth),
                i = -(this.connectorPointWidth + 2),
                n = Math.floor(this.milesStoneRadius - this.connectorPointWidth / 2),
                r = '<div class="e-left-connectorpoint-outer-div" style="' + (e.ganttProperties.isMilestone ? "margin-top:" + n + "px;left:" + i + "px;" : "margin-top:" + this.connectorPointMargin + "px;left:" + t + "px;") + '"><div class="' + Jl + " " + this.parent.getUnscheduledTaskClass(e.ganttProperties) + '" style="width: ' + this.connectorPointWidth + "px;height: " + this.connectorPointWidth + 'px;">' + this.touchLeftConnectorpoint + "</div></div>";
            return this.createDivElement(r)
        }, e.prototype.getRightPointNode = function() {
            var e = this.templateData,
                t = this.parent.isAdaptive ? 10 : -2,
                i = Math.floor(this.milesStoneRadius - this.connectorPointWidth / 2),
                n = '<div class="e-right-connectorpoint-outer-div" style="' + (e.ganttProperties.isMilestone ? "left:" + (this.milestoneHeight - 2) + "px;margin-top:" + i + "px;" : "left:" + (e.ganttProperties.width + t) + "px;margin-top:" + this.connectorPointMargin + "px;") + '"><div class="e-connectorpoint-right ' + this.parent.getUnscheduledTaskClass(e.ganttProperties) + '" style="width:' + this.connectorPointWidth + "px;height:" + this.connectorPointWidth + 'px;">' + this.touchRightConnectorpoint + "</div></div>";
            return this.createDivElement(n)
        }, e.prototype.getTaskLabel = function(e) {
            var t = this.parent.ganttColumns.length,
                i = null;
            if (g(e) || "" === e) i = "";
            else if (e === this.parent.taskFields.resourceInfo) i = this.getResourceName(this.templateData);
            else {
                for (var n = 0; n < t; n++)
                    if (e === this.parent.ganttColumns[n].field) {
                        i = this.getFieldValue(this.templateData[e]).toString();
                        break
                    } if (g(i)) return "isCustomTemplate"
            }
            return i
        }, e.prototype.getExpandDisplayProp = function(e) {
            return e = this.templateData, this.parent.getExpandStatus(e) ? "table-row" : "none"
        }, e.prototype.getRowClassName = function(e) {
            var t = "gridrowtaskId",
                i = (e = this.templateData).parentItem;
            return i && (t += i.taskId.toString()), t += "level", t += e.level.toString()
        }, e.prototype.getBorderRadius = function(e) {
            var t = (e = this.templateData).ganttProperties.width - e.ganttProperties.progressWidth;
            return t <= 4 ? 4 - t : 0
        }, e.prototype.taskNameWidth = function(e) {
            var t, i = (e = this.templateData).ganttProperties;
            return (t = e.ganttProperties.isMilestone ? e.ganttProperties.left - this.parent.getTaskbarHeight() / 2 : e.hasChildRecords && !i.isAutoSchedule ? this.parent.allowUnscheduledTasks ? i.left < i.autoLeft ? i.left : i.autoLeft : i.autoStartDate.getTime() < i.startDate.getTime() ? i.autoLeft : i.left : e.ganttProperties.left) < 0 && (t = 0), t + "px"
        }, e.prototype.getRightLabelLeft = function(e) {
            var t, i, n = (e = this.templateData).ganttProperties;
            return e.ganttProperties.isMilestone ? e.ganttProperties.left + this.parent.getTaskbarHeight() / 2 : e.hasChildRecords && !n.isAutoSchedule ? (this.parent.allowUnscheduledTasks ? (t = n.left < n.autoLeft ? n.left : n.autoLeft, i = n.autoWidth) : (t = n.autoStartDate.getTime() < n.startDate.getTime() ? n.autoLeft : n.left, i = (n.autoEndDate.getTime() < n.endDate.getTime() ? this.parent.dataOperation.getTaskLeft(n.endDate, n.isMilestone) : this.parent.dataOperation.getTaskLeft(n.autoEndDate, n.isMilestone)) - t), t + i) : e.ganttProperties.left + e.ganttProperties.width
        }, e.prototype.getExpandClass = function(e) {
            return (e = this.templateData).expanded ? "e-row-expand" : !e.expanded && e.hasChildRecords ? "e-row-collapse" : ""
        }, e.prototype.getFieldValue = function(e) {
            return g(e) ? "" : e
        }, e.prototype.getResourceName = function(e) {
            var t = null;
            if (!g((e = this.templateData).ganttProperties.resourceInfo)) {
                var i = e.ganttProperties.resourceInfo.length;
                if (i > 0) {
                    for (var n = 0; n < i; n++) {
                        var r = e.ganttProperties.resourceInfo[n][this.parent.resourceFields.name],
                            o = e.ganttProperties.resourceInfo[n][this.parent.resourceFields.unit];
                        100 !== o && (r += "[" + o + "%]"), g(t) ? t = r : t += " , " + r
                    }
                    return t
                }
                return ""
            }
            return ""
        }, e.prototype.initChartHelperPrivateVariable = function() {
            if (this.baselineColor = g(this.parent.baselineColor) || "" === this.parent.baselineColor ? null : this.parent.baselineColor, this.taskBarHeight = g(this.parent.taskbarHeight) || this.parent.taskbarHeight >= this.parent.rowHeight ? Math.floor(.62 * this.parent.rowHeight) : this.parent.taskbarHeight, this.parent.renderBaseline) {
                var e = void 0;
                e = this.taskBarHeight + this.baselineHeight <= this.parent.rowHeight ? this.taskBarHeight : this.taskBarHeight - (this.baselineHeight + 1), this.taskBarHeight = e
            }
            this.milestoneHeight = Math.floor(.82 * this.taskBarHeight), this.taskBarMarginTop = Math.floor((this.parent.rowHeight - this.taskBarHeight) / 2), this.milestoneMarginTop = Math.floor((this.parent.rowHeight - this.milestoneHeight) / 2), this.milesStoneRadius = Math.floor(this.milestoneHeight / 2), this.baselineTop = -(Math.floor(this.parent.rowHeight - (this.taskBarHeight + this.taskBarMarginTop)) - 1), this.connectorPointWidth = this.parent.isAdaptive ? Math.round(this.taskBarHeight / 2) : 8, this.connectorPointMargin = Math.floor(this.taskBarHeight / 2 - this.connectorPointWidth / 2)
        }, e.prototype.refreshGanttRows = function() {
            if (this.parent.currentViewData = this.parent.treeGrid.getCurrentViewRecords().slice(), this.createTaskbarTemplate(), "ResourceView" === this.parent.viewType && this.parent.showOverAllocation) {
                for (var e = 0; e < this.parent.currentViewData.length; e++) {
                    var t = this.parent.currentViewData[e];
                    t.childRecords.length > 0 && (this.parent.setRecordValue("workTimelineRanges", this.parent.dataOperation.mergeRangeCollections(t.ganttProperties.workTimelineRanges, !0), t.ganttProperties, !0), this.parent.dataOperation.calculateRangeLeftWidth(t.ganttProperties.workTimelineRanges))
                }
                this.parent.ganttChartModule.renderRangeContainer(this.parent.currentViewData)
            }
        }, e.prototype.createTaskbarTemplate = function() {
            this.updateTaskbarBlazorTemplate(!1), this.ganttChartTableBody.innerHTML = "";
            for (var e = [], t = 0; t < this.parent.currentViewData.length; t++) {
                var i = this.parent.currentViewData[t];
                "ResourceView" === this.parent.viewType && !i.expanded && this.parent.enableMultiTaskbar && e.push(i), this.ganttChartTableBody.appendChild(this.getGanttChartRow(t, i))
            }
            if (this.triggerQueryTaskbarInfo(), e.length)
                for (var n = 0; n < e.length; n++) e[n].hasChildRecords && (this.parent.isGanttChartRendered = !0, this.parent.chartRowsModule.refreshRecords([e[n]]));
            this.parent.renderTemplates(), this.updateTaskbarBlazorTemplate(!0)
        }, e.prototype.getGanttChartRow = function(e, t) {
            this.templateData = t;
            var i = null,
                n = this.getTableTrNode(),
                r = this.getLeftLabelNode(e),
                o = this.taskbarContainer();
            if (o[0].setAttribute("aria-label", this.generateAriaLabel(this.templateData)), o[0].setAttribute("rowUniqueId", this.templateData.ganttProperties.rowUniqueID), !this.templateData.hasChildRecords) {
                var s = this.getLeftPointNode();
                o[0].appendChild([].slice.call(s)[0])
            }
            if (this.templateData.hasChildRecords) {
                var a = this.getParentTaskbarNode(e, o);
                if (!this.templateData.ganttProperties.isAutoSchedule) {
                    var l = this.getManualTaskbar();
                    o[0].appendChild([].slice.call(l)[0])
                }
                a && a.length > 0 && o[0].appendChild([].slice.call(a)[0]), this.parent.renderBaseline && this.templateData.ganttProperties.baselineStartDate && this.templateData.ganttProperties.baselineEndDate && (i = this.getTaskBaselineNode())
            } else if (this.templateData.ganttProperties.isMilestone) {
                var h = this.getMilestoneNode(e, o);
                h && h.length > 0 && o[0].appendChild([].slice.call(h)[0]), this.parent.renderBaseline && this.templateData.ganttProperties.baselineStartDate && this.templateData.ganttProperties.baselineEndDate && (i = this.getMilestoneBaselineNode())
            } else {
                var p = Fl(this.templateData.ganttProperties),
                    d = null,
                    c = null,
                    f = null;
                if (!g(p)) {
                    (p || this.templateData.ganttProperties.duration) && p && (d = this.childTaskbarProgressResizer(), f = this.childTaskbarLeftResizer(), c = this.childTaskbarRightResizer());
                    var m = this.getChildTaskbarNode(e, o);
                    f && o[0].appendChild([].slice.call(f)[0]), m && m.length > 0 && o[0].appendChild([].slice.call(m)[0]), d && o[0].appendChild([].slice.call(d)[0]), c && o[0].appendChild([].slice.call(c)[0])
                }
                this.parent.renderBaseline && this.templateData.ganttProperties.baselineStartDate && this.templateData.ganttProperties.baselineEndDate && (i = this.getTaskBaselineNode())
            }
            if (!this.templateData.hasChildRecords) {
                var y = this.getRightPointNode();
                o[0].appendChild([].slice.call(y)[0])
            }
            var v = this.getRightLabelNode(e);
            if (n[0].childNodes[0].childNodes[0].appendChild([].slice.call(r)[0]), n[0].childNodes[0].childNodes[0].appendChild([].slice.call(o)[0]), this.templateData.ganttProperties.indicators && this.templateData.ganttProperties.indicators.length > 0)
                for (var b = void 0, w = void 0, C = this.templateData.ganttProperties.indicators, S = 0; S < C.length; S++) {
                    if (b = this.getIndicatorNode(C[S]), C[S].name.indexOf("$") > -1 || C[S].name.indexOf("#") > -1) w = this.templateCompiler(C[S].name)(u({
                        index: e
                    }, this.templateData), this.parent, "indicatorLabelText");
                    else {
                        var x = ct("Text");
                        x.innerHTML = C[S].name, w = x.childNodes
                    }
                    b[0].appendChild([].slice.call(w)[0]), b[0].title = g(C[S].tooltip) ? "" : C[S].tooltip, n[0].childNodes[0].childNodes[0].appendChild([].slice.call(b)[0])
                }
            return v && v.length > 0 && n[0].childNodes[0].childNodes[0].appendChild([].slice.call(v)[0]), g(i) || n[0].childNodes[0].childNodes[0].appendChild([].slice.call(i)[0]), n[0].childNodes[0]
        }, e.prototype.triggerQueryTaskbarInfo = function() {
            if (this.parent.queryTaskbarInfo)
                for (var e, t, i = this.ganttChartTableBody.querySelectorAll("tr").length, n = 0; n < i; n++)(e = this.ganttChartTableBody.querySelectorAll("tr")[n]).querySelector(".e-taskbar-main-container"), t = this.parent.currentViewData[n], this.triggerQueryTaskbarInfoByIndex(e, t)
        }, e.prototype.triggerQueryTaskbarInfoByIndex = function(e, t) {
            var i, n, r, o = this;
            i = e.querySelector(".e-taskbar-main-container");
            var s = {
                    data: t,
                    rowElement: e,
                    taskbarElement: e.querySelector(".e-taskbar-main-container"),
                    taskbarType: t.hasChildRecords ? "ParentTask" : t.ganttProperties.isMilestone ? "Milestone" : "ChildTask"
                },
                a = this.getClassName(s);
            "Milestone" === s.taskbarType ? (s.milestoneColor = i.querySelector(a[0]) ? getComputedStyle(i.querySelector(a[0])).borderBottomColor : null, s.baselineColor = e.querySelector(a[1]) ? getComputedStyle(e.querySelector(a[1])).borderBottomColor : null) : (s.taskbarBgColor = i.querySelector(a[0]) ? getComputedStyle(i.querySelector(a[0])).backgroundColor : null, s.taskbarBorderColor = i.querySelector(a[0]) ? getComputedStyle(i.querySelector(a[0])).borderColor : null, s.progressBarBgColor = i.querySelector(a[1]) ? getComputedStyle(i.querySelector(a[1])).backgroundColor : null, s.baselineColor = e.querySelector("." + Xl) ? getComputedStyle(e.querySelector("." + Xl)).backgroundColor : null, s.taskLabelColor = i.querySelector("." + Yl) ? getComputedStyle(i.querySelector("." + Yl)).color : null), s.rightLabelColor = e.querySelector(".e-right-label-container") && e.querySelector(".e-right-label-container").querySelector(".e-label") ? getComputedStyle(e.querySelector(".e-right-label-container").querySelector(".e-label")).color : null, s.leftLabelColor = e.querySelector(".e-left-label-container") && e.querySelector(".e-left-label-container").querySelector(".e-label") ? getComputedStyle(e.querySelector(".e-left-label-container").querySelector(".e-label")).color : null, S() && (n = s.rowElement, r = s.taskbarElement), this.parent.trigger("queryTaskbarInfo", s, (function(e) {
                o.updateQueryTaskbarInfoArgs(e, n, r)
            }))
        }, e.prototype.updateQueryTaskbarInfoArgs = function(e, t, i) {
            var n = S() && t ? t : e.rowElement,
                r = S() && i ? i : e.taskbarElement,
                o = this.getClassName(e);
            "Milestone" === e.taskbarType ? (r.querySelector(o[0]) && getComputedStyle(r.querySelector(o[0])).borderBottomColor !== e.milestoneColor && (r.querySelector(o[0]).style.borderBottomColor = e.milestoneColor, r.querySelector(".e-milestone-bottom").style.borderTopColor = e.milestoneColor), n.querySelector(o[1]) && getComputedStyle(n.querySelector(o[1])).borderTopColor !== e.baselineColor && (n.querySelector(o[1]).style.borderBottomColor = e.baselineColor, n.querySelector(".e-baseline-milestone-bottom").style.borderTopColor = e.baselineColor)) : (r.querySelector(o[0]) && getComputedStyle(r.querySelector(o[0])).backgroundColor !== e.taskbarBgColor && (r.querySelector(o[0]).style.backgroundColor = e.taskbarBgColor), r.querySelector(o[0]) && getComputedStyle(r.querySelector(o[0])).borderColor !== e.taskbarBorderColor && (r.querySelector(o[0]).style.borderColor = e.taskbarBorderColor), r.querySelector(o[1]) && getComputedStyle(r.querySelector(o[1])).backgroundColor !== e.progressBarBgColor && (r.querySelector(o[1]).style.backgroundColor = e.progressBarBgColor), r.querySelector("." + Yl) && getComputedStyle(r.querySelector("." + Yl)).color !== e.taskLabelColor && (r.querySelector("." + Yl).style.color = e.taskLabelColor), n.querySelector("." + Xl) && getComputedStyle(n.querySelector("." + Xl)).backgroundColor !== e.baselineColor && (n.querySelector("." + Xl).style.backgroundColor = e.baselineColor)), n.querySelector(".e-left-label-container") && n.querySelector(".e-left-label-container").querySelector(".e-label") && getComputedStyle(n.querySelector(".e-left-label-container").querySelector(".e-label")).color !== e.leftLabelColor && (n.querySelector(".e-left-label-container").querySelector(".e-label").style.color = e.leftLabelColor), n.querySelector(".e-right-label-container") && n.querySelector(".e-right-label-container").querySelector(".e-label") && getComputedStyle(n.querySelector(".e-right-label-container").querySelector(".e-label")).color !== e.rightLabelColor && (n.querySelector(".e-right-label-container").querySelector(".e-label").style.color = e.rightLabelColor)
        }, e.prototype.getClassName = function(e) {
            var t = [];
            return t.push("." + ("ParentTask" === e.taskbarType ? "e-gantt-parent-taskbar" : "ChildTask" === e.taskbarType ? "e-gantt-child-taskbar" : "e-milestone-top")), t.push("." + ("ParentTask" === e.taskbarType ? "e-gantt-parent-progressbar" : "ChildTask" === e.taskbarType ? "e-gantt-child-progressbar" : "e-baseline-milestone-top")), t
        }, e.prototype.templateCompiler = function(e) {
            if (!g(e) && "" !== e) {
                try {
                    return document.querySelectorAll(e).length ? Ge(document.querySelector(e).innerHTML.trim(), this.parent) : Ge(e, this.parent)
                } catch (t) {
                    return Ge(e, this.parent)
                }
            }
            return null
        }, e.prototype.refreshRow = function(e, t) {
            var i = this.ganttChartTableBody.childNodes[e],
                n = this.parent.currentViewData[e];
            if (-1 !== e && n) {
                var r = n;
                "ResourceView" === this.parent.viewType && r.hasChildRecords && !r.expanded && this.parent.enableMultiTaskbar ? i.replaceChild(this.getResourceParent(r).childNodes[0], i.childNodes[0]) : i.replaceChild(this.getGanttChartRow(e, r).childNodes[0], i.childNodes[0]), "ResourceView" === this.parent.viewType && r.hasChildRecords && this.parent.showOverAllocation && (t ? this.parent.ganttChartModule.renderRangeContainer(this.parent.currentViewData) : (this.parent.dataOperation.updateOverlappingValues(r), this.parent.ganttChartModule.renderRangeContainer([r]))), this.triggerQueryTaskbarInfoByIndex(i, r);
                var o = "ProjectView" === this.parent.viewType ? r.ganttProperties.taskId : r.ganttProperties.rowUniqueID;
                this.parent.treeGrid.grid.setRowData(o, r), this.parent.treeGrid.grid.getRowObjectFromUID(this.parent.treeGrid.grid.getDataRows()[e].getAttribute("data-uid")).data = r
            }
        }, e.prototype.getResourceParent = function(e) {
            var t = this.parent.ganttChartModule.getChartRows();
            this.templateData = e;
            var i = this.getTableTrNode(),
                n = this.leftLabelContainer(),
                r = ct("div", {
                    className: "e-collapse-parent"
                });
            i[0].childNodes[0].childNodes[0].appendChild(r);
            var o = this.parent.dataOperation.setSortedChildTasks(e);
            this.parent.dataOperation.updateOverlappingIndex(o);
            for (var s = 0; s < t.length; s++)
                if (t[s].classList.contains("gridrowtaskId" + e.ganttProperties.rowUniqueID + "level" + (e.level + 1))) {
                    var a = t[s].querySelector(".e-taskbar-main-container");
                    ut([a], "collpse-parent-border");
                    var l = t[s].querySelector(".e-taskbar-main-container").getAttribute("rowUniqueId"),
                        h = this.parent.getRecordByID(l).ganttProperties.eOverlapIndex.toString(),
                        p = a.cloneNode(!0);
                    p.style.zIndex = h, i[0].childNodes[0].childNodes[0].childNodes[0].appendChild(p)
                } return i[0].childNodes[0].childNodes[0].appendChild([].slice.call(n)[0]), i[0].childNodes[0]
        }, e.prototype.refreshRecords = function(e, t) {
            if (this.parent.isGanttChartRendered) {
                if (this.updateTaskbarBlazorTemplate(!1), "ResourceView" === this.parent.viewType && this.parent.enableMultiTaskbar) {
                    e = new yn(e).executeLocal((new on).sortBy("expanded", "Descending"))
                }
                for (var i = 0; i < e.length; i++) {
                    var n = this.parent.currentViewData.indexOf(e[i]);
                    this.refreshRow(n, t)
                }
                this.parent.ganttChartModule.updateLastRowBottomWidth(), this.parent.renderTemplates(), this.updateTaskbarBlazorTemplate(!0)
            }
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off("renderPanels", this.createChartTable), this.parent.off("dataReady", this.initiateTemplates), this.parent.off("destroy", this.destroy))
        }, e.prototype.destroy = function() {
            this.removeEventListener()
        }, e.prototype.generateAriaLabel = function(e) {
            e = this.templateData;
            var t = "",
                i = this.parent.localeObj.getConstant("name"),
                n = this.parent.localeObj.getConstant("startDate"),
                r = this.parent.localeObj.getConstant("endDate"),
                o = this.parent.localeObj.getConstant("duration"),
                s = e.ganttProperties.taskName,
                a = e.ganttProperties.startDate,
                l = e.ganttProperties.endDate,
                h = e.ganttProperties.duration;
            return e.ganttProperties.isMilestone ? t = i + " " + s + " " + n + " " + this.parent.getFormatedDate(a) : (s && (t += i + " " + s + " "), a && (t += n + " " + this.parent.getFormatedDate(a) + " "), l && (t += r + " " + this.parent.getFormatedDate(l) + " "), h && (t += o + " " + this.parent.getDurationString(h, e.ganttProperties.durationUnit))), t
        }, e.prototype.generateTaskLabelAriaLabel = function(e) {
            var t = "";
            return "left" === e && this.parent.labelSettings.leftLabel && !this.leftTaskLabelTemplateFunction ? t += this.parent.localeObj.getConstant("leftTaskLabel") + " " + this.getTaskLabel(this.parent.labelSettings.leftLabel) : "right" === e && this.parent.labelSettings.rightLabel && !this.rightTaskLabelTemplateFunction && (t += this.parent.localeObj.getConstant("rightTaskLabel") + " " + this.getTaskLabel(this.parent.labelSettings.rightLabel)), t
        }, e
    }(),
    nd = function() {
        function e(e) {
            this.parent = e, this.dateValidateModule = this.parent.dateValidationModule
        }
        return e.prototype.ensurePredecessorCollection = function() {
            for (var e = this.parent.predecessorsCollection, t = e.length - 1; t >= 0; t--) {
                var i = e[t],
                    n = i.ganttProperties;
                i.hasChildRecords || this.ensurePredecessorCollectionHelper(i, n)
            }
        }, e.prototype.ensurePredecessorCollectionHelper = function(e, t) {
            var i = t.predecessorsName;
            if (!i || "string" != typeof i && "number" != typeof i) {
                if (i && "object" == typeof i && i.length) {
                    for (var n = [], r = 0; r < i.length; r++) {
                        var o = i[r],
                            s = {};
                        s.from = a("from", o), s.to = a("to", o) ? a("to", o) : t.rowUniqueID, s.type = a("type", o) ? a("type", o) : "FS";
                        var l = a("offset", o);
                        if (g(l)) s.offset = 0, s.offsetUnit = this.parent.durationUnit.toLocaleLowerCase();
                        else if ("string" == typeof l) {
                            var h = this.getOffsetDurationUnit(a("offset", o));
                            s.offset = h.duration, s.offsetUnit = h.durationUnit
                        } else s.offset = parseFloat(l.toString()), s.offsetUnit = this.parent.durationUnit.toLocaleLowerCase();
                        this.checkIsParent(s.from.toString()) || n.push(s)
                    }
                    this.parent.setRecordValue("predecessor", n, t, !0)
                }
            } else this.parent.setRecordValue("predecessor", this.calculatePredecessor(i, e), t, !0);
            this.parent.setRecordValue("predecessorsName", this.getPredecessorStringValue(e), t, !0), this.parent.setRecordValue("taskData." + this.parent.taskFields.dependency, t.predecessorsName, e), this.parent.setRecordValue(this.parent.taskFields.dependency, t.predecessorsName, e)
        }, e.prototype.updateUnscheduledDependency = function(e) {
            for (var t = this.parent.taskFields, i = g(e[t.dependency]) ? [] : e[t.dependency].toString().split(","), n = 0; n < i.length; n++) {
                var r = parseInt(i[n], 10);
                if (!isNaN(r)) {
                    var o = this.parent.getRecordByID(r.toString()),
                        s = g(o) ? null : u({}, {}, o.taskData, !0);
                    !g(s) && g(s[t.startDate]) && g(s[t.duration]) && g(s[t.endDate]) && (s[t.duration] = 1, s[t.startDate] = this.parent.projectStartDate, this.parent.updateRecordByID(s))
                }
            }
        }, e.prototype.checkIsParent = function(e) {
            var t = !1;
            return this.parent.connectorLineModule.getRecordByID(e).hasChildRecords && (t = !0), t
        }, e.prototype.calculatePredecessor = function(e, t) {
            var i, n, r, o, s = this,
                a = e.toString(),
                l = [];
            return a.split(",").forEach((function(e) {
                n = e.split("+"), r = "+", e.indexOf("-") >= 0 && (n = e.split("-"), r = "-"), i = n[0].match(/(\d+|[A-z]+)/g);
                var a = "ResourceView" === s.parent.viewType ? s.parent.getTaskIds() : s.parent.ids,
                    h = "ResourceView" === s.parent.viewType ? a.indexOf("T" + i[0]) : a.indexOf(i[0]);
                if (i[0] && -1 !== h) {
                    if (i.length > 1) {
                        var p = i[1].toUpperCase();
                        o = "FS" === p || "FF" === p || "SF" === p || "SS" === p ? p : "FS"
                    } else o = "FS";
                    var d = n.length > 1 ? r + "" + n[1] : "0",
                        c = s.getOffsetDurationUnit(d),
                        u = {
                            from: i[0],
                            type: o,
                            isDrawn: !1,
                            to: "ResourceView" === s.parent.viewType ? t.ganttProperties.taskId.toString() : t.ganttProperties.rowUniqueID.toString(),
                            offsetUnit: c.durationUnit,
                            offset: c.duration
                        };
                    s.checkIsParent(i[0]) || l.push(u)
                }
            })), l
        }, e.prototype.getPredecessorStringValue = function(e) {
            var t = e.ganttProperties.predecessor,
                i = this.parent.durationUnitTexts,
                n = "";
            if (t)
                for (var r = t.length, o = 0; o < r; o++) {
                    var s = t[o],
                        l = "",
                        h = "ResourceView" === this.parent.viewType ? e.ganttProperties.taskId : e.ganttProperties.rowUniqueID;
                    if (s.from !== h.toString()) {
                        if (l = s.from + s.type, 0 !== s.offset) {
                            l += s.offset > 0 ? "+" + s.offset + " " : s.offset + " ";
                            var p = 1 !== s.offset;
                            "day" === s.offsetUnit ? l += a(p ? "days" : "day", i) : "hour" === s.offsetUnit ? l += a(p ? "hours" : "hour", i) : l += a(p ? "minutes" : "minute", i)
                        }
                        n = n.length > 0 ? n + "," + l : l
                    }
                }
            return n
        }, e.prototype.getOffsetDurationUnit = function(e) {
            var t = 0,
                i = this.parent.durationUnit.toLocaleLowerCase(),
                n = this.parent.durationUnitEditText;
            if ("string" == typeof e) {
                for (var r = e.match(/[^0-9]+|[0-9]+/g), o = 0; o < r.length; o++) r[o] = r[o].trim();
                "-" === r[0] && r[1] ? (r[1] = r[0] + r[1], r.shift()) : "+" === r[0] && r.shift(), "." !== r[1] || isNaN(parseInt(r[2], 10)) || (r[0] += r[1] + r[2], r.splice(1, 2)), r && r.length <= 2 && (t = parseFloat(r[0]), i = r[1] ? r[1].toLowerCase().trim() : "", i = -1 !== a("minute", n).indexOf(i) ? "minute" : -1 !== a("hour", n).indexOf(i) ? "hour" : -1 !== a("day", n).indexOf(i) ? "day" : this.parent.durationUnit.toLocaleLowerCase())
            } else t = e, i = this.parent.durationUnit.toLocaleLowerCase();
            return isNaN(t) && (t = 0, i = this.parent.durationUnit.toLocaleLowerCase()), {
                duration: t,
                durationUnit: i
            }
        }, e.prototype.updatePredecessors = function() {
            for (var e, t = this.parent.predecessorsCollection, i = t.length, n = 0; n < i; n++)(e = t[n]).hasChildRecords || this.updatePredecessorHelper(e, t)
        }, e.prototype.updatePredecessorHelper = function(e, t) {
            var i, n, r;
            t = g(t) ? [] : t, r = (i = e.ganttProperties.predecessor).length;
            for (var o = 0; o < r; o++) {
                var s = i[o];
                n = this.parent.connectorLineModule.getRecordByID(s.from);
                var a = "ResourceView" === this.parent.viewType ? e.ganttProperties.taskId : e.ganttProperties.rowUniqueID;
                if (s.from !== a.toString() && n) {
                    var l = void 0;
                    n.ganttProperties.predecessor ? ((l = u([], n.ganttProperties.predecessor, [], !0)).push(s), this.parent.setRecordValue("predecessor", l, n.ganttProperties, !0)) : ((l = []).push(s), this.parent.setRecordValue("predecessor", l, n.ganttProperties, !0), t.push(n))
                }
            }
        }, e.prototype.updatedRecordsDateByPredecessor = function() {
            for (var e = this.parent.flatData, t = 0; t < e.length; t++) e[t].ganttProperties.predecessor && this.validatePredecessorDates(e[t])
        }, e.prototype.validatePredecessorDates = function(e) {
            if (e.ganttProperties.predecessor) {
                var t = e.ganttProperties.predecessor,
                    i = void 0,
                    n = void 0,
                    r = null,
                    o = "ResourceView" === this.parent.viewType ? e.ganttProperties.taskId.toString() : e.ganttProperties.rowUniqueID.toString(),
                    s = t.filter((function(e) {
                        return e.to === o ? e : null
                    }));
                for (i = 0; i < s.length; i++) {
                    var a;
                    a = s[i], n = this.parent.connectorLineModule.getRecordByID(a.from), ((r = this.parent.connectorLineModule.getRecordByID(a.to)).ganttProperties.isAutoSchedule || this.parent.validateManualTasksOnLinking) && this.validateChildGanttRecord(n, r)
                }
            }
        }, e.prototype.validateChildGanttRecord = function(e, t) {
            if (this.parent.editedTaskBarItem !== t && !g(Fl(e.ganttProperties)) && !g(Fl(t.ganttProperties)) && this.parent.isInPredecessorValidation && (t.ganttProperties.isAutoSchedule || this.parent.validateManualTasksOnLinking)) {
                var i = t.ganttProperties,
                    n = "ResourceView" === this.parent.viewType ? i.taskId.toString() : i.rowUniqueID.toString(),
                    r = i.predecessor.filter((function(e) {
                        return e.to === n ? e : null
                    })),
                    o = this.getPredecessorDate(t, r);
                this.parent.setRecordValue("startDate", o, i, !0), this.parent.dataOperation.updateMappingData(t, "startDate"), this.dateValidateModule.calculateEndDate(t), this.parent.setRecordValue("left", this.parent.dataOperation.calculateLeft(i), i, !0), this.parent.setRecordValue("width", this.parent.dataOperation.calculateWidth(t), i, !0), this.parent.setRecordValue("progressWidth", this.parent.dataOperation.getProgressWidth(i.width, i.progress), i, !0), t.parentItem && this.parent.getParentTask(t.parentItem).ganttProperties.isAutoSchedule && this.parent.isInPredecessorValidation && this.parent.dataOperation.updateParentItems(t.parentItem)
            }
        }, e.prototype.getPredecessorDate = function(e, t) {
            var i, n, r, o, s = this,
                a = t.filter((function(t) {
                    var i = "ResourceView" === s.parent.viewType ? e.ganttProperties.taskId : e.ganttProperties.rowUniqueID;
                    return t.to === i.toString() ? t : null
                }));
            if (a)
                for (var l = a.length, h = 0; h < l; h++) {
                    var p = a[h];
                    r = this.parent.connectorLineModule.getRecordByID(p.from), o = this.parent.connectorLineModule.getRecordByID(p.to), n = this.getValidatedStartDate(o.ganttProperties, r.ganttProperties, p), (null == i || 1 === this.dateValidateModule.compareDates(n, i)) && (i = n)
                }
            return i
        }, e.prototype.getValidatedStartDate = function(e, t, i) {
            var n, r, o = i.type,
                s = i.offset;
            switch (o) {
                case "FS":
                    n = this.dateValidateModule.getValidEndDate(t), e.isMilestone && 0 === s || (n = this.dateValidateModule.checkStartDate(n, e)), 0 !== s && (n = this.updateDateByOffset(n, i, e)), r = e.isMilestone ? n : this.dateValidateModule.checkStartDate(n, e);
                    break;
                case "FF":
                case "SF":
                    n = "FF" === o ? this.dateValidateModule.getValidEndDate(t) : this.dateValidateModule.getValidStartDate(t), 0 !== s && (n = this.updateDateByOffset(n, i, e)), e.isMilestone || (n = this.dateValidateModule.checkEndDate(n, e)), r = this.dateValidateModule.getStartDate(n, e.duration, e.durationUnit, e);
                    break;
                case "SS":
                    n = this.dateValidateModule.getValidStartDate(t), 0 !== s && (n = this.updateDateByOffset(n, i, e)), r = e.isMilestone ? n : this.dateValidateModule.checkStartDate(n, e)
            }
            return r
        }, e.prototype.updateDateByOffset = function(e, t, i) {
            var n, r = t.offset,
                o = t.offsetUnit;
            return r < 0 ? n = this.dateValidateModule.getStartDate(this.dateValidateModule.checkEndDate(e, i), -1 * r, o, i) : (n = this.dateValidateModule.getEndDate(e, r, o, i, !1), i.isMilestone || (n = this.dateValidateModule.checkStartDate(n, i))), n
        }, e.prototype.createConnectorLinesCollection = function(e) {
            var t, i, n = e || this.parent.currentViewData,
                r = n.length;
            for (this.parent.connectorLineModule.expandedRecords = this.parent.getExpandedRecords(this.parent.currentViewData), t = 0; t < r; t++)(i = n[t].ganttProperties.predecessor) && this.addPredecessorsCollection(i)
        }, e.prototype.addPredecessorsCollection = function(e) {
            var t, i, n, r, o;
            if (e)
                for (t = e.length, i = 0; i < t; i++) {
                    n = e[i];
                    r = this.parent.connectorLineModule.getRecordByID(n.from), o = this.parent.connectorLineModule.getRecordByID(n.to), this.parent.currentViewData && -1 !== this.parent.currentViewData.indexOf(r) && -1 !== this.parent.currentViewData.indexOf(o) && this.updateConnectorLineObject(r, o, n)
                }
        }, e.prototype.updateConnectorLineObject = function(e, t, i) {
            var n;
            if (n = this.parent.connectorLineModule.createConnectorLineObject(e, t, i)) {
                if (this.parent.connectorLineIds.length > 0 && -1 === this.parent.connectorLineIds.indexOf(n.connectorLineId)) this.parent.updatedConnectorLineCollection.push(n), this.parent.connectorLineIds.push(n.connectorLineId);
                else if (0 === this.parent.connectorLineIds.length) this.parent.updatedConnectorLineCollection.push(n), this.parent.connectorLineIds.push(n.connectorLineId);
                else if (-1 !== this.parent.connectorLineIds.indexOf(n.connectorLineId)) {
                    var r = this.parent.connectorLineIds.indexOf(n.connectorLineId);
                    this.parent.updatedConnectorLineCollection[r] = n
                }
                i.isDrawn = !0
            }
            return n
        }, e.prototype.validatePredecessor = function(e, t, i) {
            if (this.parent.isInPredecessorValidation && e.ganttProperties.predecessor) {
                for (var n = e.ganttProperties.predecessor, r = void 0, o = null, s = void 0, a = void 0, l = "ResourceView" === this.parent.viewType ? e.ganttProperties.taskId.toString() : e.ganttProperties.rowUniqueID.toString(), h = n.filter((function(e) {
                        return e.to === l ? e : null
                    })), p = n.filter((function(e) {
                        return e.from === l ? e : null
                    })), d = 0; d < h.length; d++) {
                    s = h[d], r = this.parent.connectorLineModule.getRecordByID(s.from), o = this.parent.connectorLineModule.getRecordByID(s.to), this.parent.isInPredecessorValidation && o.ganttProperties.isAutoSchedule ? this.parent.isValidationEnabled = !0 : this.parent.isValidationEnabled = !1;
                    var c = "ResourceView" === this.parent.viewType ? e.ganttProperties.taskId : e.ganttProperties.rowUniqueID;
                    c.toString() !== s.to && c.toString() !== s.from || i && "predecessor" !== i || this.validateChildGanttRecord(r, o)
                }
                for (d = 0; d < p.length; d++) a = p[d], r = this.parent.connectorLineModule.getRecordByID(a.from), o = this.parent.connectorLineModule.getRecordByID(a.to), this.parent.isInPredecessorValidation && o.ganttProperties.isAutoSchedule ? this.parent.isValidationEnabled = !0 : this.parent.isValidationEnabled = !1, "predecessor" !== i && this.parent.isValidationEnabled && this.validateChildGanttRecord(r, o), !1 !== r.expanded && o.expanded, o && this.validatePredecessor(o, void 0, "successor")
            }
        }, e.prototype.getValidPredecessor = function(e) {
            var t = this,
                i = [];
            if (!g(e)) {
                var n = e.ganttProperties.predecessor;
                n && n.length > 0 && (i = n.filter((function(i) {
                    var n = "ResourceView" === t.parent.viewType ? e.ganttProperties.taskId : e.ganttProperties.rowUniqueID;
                    return i.from !== n.toString()
                })))
            }
            return i
        }, e
    }(),
    rd = function() {
        function e(e) {
            this.expandedRecords = [], this.parent = e, this.dependencyViewContainer = ct("div", {
                className: "e-gantt-dependency-view-container"
            }), this.initPublicProp()
        }
        return e.prototype.getconnectorLineGap = function(e) {
            return e.milestoneChild ? this.parent.chartRowsModule.milestoneMarginTop / 2 + this.parent.chartRowsModule.milestoneHeight / 2 : this.parent.chartRowsModule.taskBarMarginTop / 2 + this.parent.chartRowsModule.taskBarHeight / 2
        }, e.prototype.initPublicProp = function() {
            this.lineColor = this.parent.connectorLineBackground, this.lineStroke = this.parent.connectorLineWidth > 4 ? 4 : this.parent.connectorLineWidth, this.createConnectorLineTooltipTable()
        }, e.prototype.getTaskbarMidpoint = function(e) {
            return Math.floor(e ? this.parent.chartRowsModule.milestoneMarginTop + this.parent.chartRowsModule.milestoneHeight / 2 : this.parent.chartRowsModule.taskBarMarginTop + this.parent.chartRowsModule.taskBarHeight / 2) + 1
        }, e.prototype.createConnectorLineObject = function(e, t, i) {
            var n = {},
                r = this.parent.pdfExportModule && this.parent.pdfExportModule.isPdfExport ? this.parent.currentViewData : this.expandedRecords,
                o = r.indexOf(e),
                s = r.indexOf(t),
                a = e.ganttProperties,
                l = t.ganttProperties;
            if (-1 === o || -1 === s) return null;
            n.parentLeft = a.isMilestone ? a.left - this.parent.chartRowsModule.milestoneHeight / 2 : a.left, n.childLeft = l.isMilestone ? l.left - this.parent.chartRowsModule.milestoneHeight / 2 : l.left, n.parentWidth = 0 === a.width || a.isMilestone ? Math.floor(this.parent.chartRowsModule.milestoneHeight) : a.width, n.childWidth = 0 === l.width || l.isMilestone ? Math.floor(this.parent.chartRowsModule.milestoneHeight) : l.width, n.parentIndex = o, n.childIndex = s, n.rowHeight = this.parent.rowHeight, n.type = i.type;
            var h = "ResourceView" === this.parent.viewType ? a.taskId : a.rowUniqueID,
                p = "ResourceView" === this.parent.viewType ? l.taskId : l.rowUniqueID;
            return n.connectorLineId = "parent" + h + "child" + p, n.milestoneParent = !!a.isMilestone, n.milestoneChild = !!l.isMilestone, g(Fl(a)) || g(Fl(l)) ? null : n
        }, e.prototype.renderConnectorLines = function(e) {
            for (var t = "", i = [], n = 0; n < e.length; n++) t += this.getConnectorLineTemplate(e[n]), i.push(e[n]);
            this.dependencyViewContainer.innerHTML = t;
            for (var r = this.parent.connectorLineModule.dependencyViewContainer.childNodes, o = 0; o < r.length; o++)
                for (var s = r[o].childNodes, a = 0; a < s.length; a++) {
                    var l = this.parent.connectorLineModule.generateAriaLabel(i[o]);
                    s[a].setAttribute("aria-label", l)
                }
            this.parent.ganttChartModule.chartBodyContent.appendChild(this.dependencyViewContainer)
        }, e.prototype.getParentPosition = function(e) {
            if (e.parentIndex < e.childIndex) {
                if ("FF" === e.type) return e.childLeft + e.childWidth >= e.parentLeft + e.parentWidth ? "FFType2" : "FFType1";
                if (e.parentLeft < e.childLeft && e.childLeft > e.parentLeft + e.parentWidth + 25) {
                    if ("FS" === e.type) return "FSType1";
                    if ("SF" === e.type) return "SFType1";
                    if ("SS" === e.type) return "SSType2";
                    if ("FF" === e.type) return "FFType2"
                } else if (e.parentLeft < e.childLeft && e.childLeft < e.parentLeft + e.parentWidth || e.parentLeft === e.childLeft || e.parentLeft > e.childLeft) {
                    if (e.parentLeft > e.childLeft + e.childWidth + 25 && "SF" === e.type) return "SFType2";
                    if (e.parentLeft > e.childLeft) {
                        if ("SS" === e.type) return "SSType1";
                        if ("SF" === e.type) return "SFType1";
                        if ("FF" === e.type) return "FFType1"
                    } else if (e.childLeft + e.childWidth > e.parentLeft + e.parentWidth && "FF" === e.type) return "FFType2";
                    if ("FS" === e.type) return "FSType2";
                    if ("SS" === e.type) return "SSType2";
                    if ("FF" === e.type) return "FFType1";
                    if ("SF" === e.type) return "SFType1"
                } else if (e.parentLeft < e.childLeft) {
                    if ("FS" === e.type) return "FSType2";
                    if ("FF" === e.type) return "FFType2";
                    if ("SS" === e.type) return "SSType2";
                    if ("SF" === e.type) return "SFType1"
                }
            } else if (e.parentIndex > e.childIndex)
                if (e.parentLeft < e.childLeft && e.childLeft > e.parentLeft + e.parentWidth) {
                    if ("FS" === e.type) return 30 >= e.childLeft - (e.milestoneParent ? e.parentLeft + e.parentWidth + 4 : e.parentLeft + e.parentWidth) ? "FSType3" : "FSType4";
                    if (e.parentLeft < e.childLeft || e.childLeft + e.childWidth > e.parentLeft + e.parentWidth) {
                        if ("SS" === e.type) return "SSType4";
                        if ("FF" === e.type) return "FFType4";
                        if ("SF" === e.type) return "SFType4"
                    } else if (e.childLeft + e.childWidth > e.parentLeft + e.parentWidth && "FF" === e.type) return "FFType4"
                } else if (e.parentLeft < e.childLeft && e.childLeft < e.parentLeft + e.parentWidth || e.parentLeft === e.childLeft || e.parentLeft > e.childLeft) {
                if (e.childLeft + e.childWidth <= e.parentLeft + e.parentWidth) {
                    if ("FF" === e.type) return "FFType3";
                    if ("SF" === e.type) return e.childLeft + e.childWidth + 25 < e.parentLeft ? "SFType3" : "SFType4";
                    if ("SS" === e.type) return e.childLeft <= e.parentLeft ? "SSType3" : "SSType4"
                } else if (e.childLeft + e.childWidth > e.parentLeft + e.parentWidth) {
                    if ("FF" === e.type) return "FFType4";
                    if ("SF" === e.type) return "SFType4";
                    if ("SS" === e.type) return e.childLeft <= e.parentLeft ? "SSType3" : "SSType4"
                }
                if ("FS" === e.type) return "FSType3"
            } else if (e.parentLeft < e.childLeft) {
                if ("FS" === e.type) return "FSType3";
                if ("SS" === e.type) return "SSType4";
                if ("FF" === e.type) return "FFType4";
                if ("SF" === e.type) return "SFType4"
            }
            return null
        }, e.prototype.getHeightValue = function(e) {
            return e.parentIndex * e.rowHeight > e.childIndex * e.rowHeight ? e.parentIndex * e.rowHeight - e.childIndex * e.rowHeight : e.childIndex * e.rowHeight - e.parentIndex * e.rowHeight
        }, e.prototype.getInnerElementWidthSSType2 = function(e) {
            return e.parentLeft === e.childLeft ? 10 : e.childLeft - e.parentLeft
        }, e.prototype.getInnerElementLeftSSType2 = function(e) {
            return e.parentLeft === e.childLeft ? e.parentLeft - 20 : e.parentLeft - 10
        }, e.prototype.getInnerChildWidthSSType2 = function(e) {
            return e.parentLeft + e.parentWidth < e.childLeft ? 10 : e.parentLeft === e.childLeft ? 20 : e.parentLeft + e.parentWidth >= e.childLeft ? 10 : e.childLeft - e.parentLeft
        }, e.prototype.getBorderStyles = function(e, t) {
            return "border-" + e + "-width:" + t + "px;" + ("border-" + e + "-style:solid;") + (g(this.lineColor) ? "" : "border-" + e + "-color:" + this.lineColor + ";")
        }, e.prototype.getConnectorLineTemplate = function(e) {
            var t = this.getInnerChildWidthSSType2(e),
                i = this.getInnerElementWidthSSType2(e),
                n = this.getInnerElementLeftSSType2(e),
                r = this.getHeightValue(e),
                o = !!e.milestoneParent,
                s = !!e.milestoneChild,
                a = "";
            if (this.getParentPosition(e)) {
                a = '<div id="ConnectorLine' + e.connectorLineId + '" style="background-color:black">';
                var l = '<div class="e-connector-line-container" tabindex="-1" style="',
                    h = '<div class="e-line" style="' + (g(this.lineColor) ? "" : "outline-color:" + this.lineColor + ";"),
                    p = '<div class="e-connector-line-right-arrow" style="' + (g(this.lineColor) ? "" : "outline-color:" + this.lineColor + ";"),
                    d = '<div class="e-connector-line-left-arrow" style="' + (g(this.lineColor) ? "" : "outline-color:" + this.lineColor + ";"),
                    c = d + (s ? "left:0px;" : "") + this.getBorderStyles("right", 10) + "top:" + (-5 - this.lineStroke + (this.lineStroke - 1)) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div>',
                    u = this.getBorderStyles("left", 10) + "top:" + "-6px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div>',
                    f = this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>' + h + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - (this.lineStroke - 1)) + 'position:relative;"></div>',
                    m = d + "left:" + (e.childLeft + e.childWidth - e.parentLeft + 10) + "px;" + this.getBorderStyles("right", 10),
                    y = "top:" + -(6 + (5 + this.lineStroke) + this.lineStroke / 2) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>';
                "FSType1" === this.getParentPosition(e) && (l = l + "left:" + (e.parentLeft + e.parentWidth) + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FSType1">', l = (l += h) + "left:" + (o ? -1 : 0) + "px;width:" + (o ? e.childLeft - (e.parentLeft + e.parentWidth + 10) + this.lineStroke - 10 + 1 : e.childLeft - (e.parentLeft + e.parentWidth + 10) + this.lineStroke - 10) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.childLeft - (e.parentLeft + e.parentWidth + 10) - 10) + "px;width:0px;" + this.getBorderStyles("right", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.childLeft - (e.parentLeft + e.parentWidth + 10) - 10) + "px;width:10px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += p) + "left:" + (e.childLeft - (e.parentLeft + e.parentWidth + 10)) + "px;" + this.getBorderStyles("left", 10) + "top:" + (-6 - this.lineStroke) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div></div>'), "FSType2" === this.getParentPosition(e) && (l = l + "left:" + e.parentLeft + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FSType2">', l = (l += h) + "left:" + (o ? e.parentWidth - 1 : e.parentWidth) + "px;width:" + (o ? 11 : 10) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.parentWidth + 10 - this.lineStroke) + "px;" + this.getBorderStyles("left", this.lineStroke) + "width:0px;" + this.getBorderStyles("top", r - this.getconnectorLineGap(e) - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.parentWidth - (e.parentLeft + e.parentWidth - e.childLeft + 20)) + "px;width:" + (e.parentLeft + e.parentWidth - e.childLeft + 30) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.parentWidth - (e.parentLeft + e.parentWidth - e.childLeft + 20)) + "px;width:0px;" + this.getBorderStyles("top", this.getconnectorLineGap(e) - this.lineStroke) + this.getBorderStyles("left", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.parentWidth - (e.parentLeft + e.parentWidth - e.childLeft + 20)) + "px;width:10px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += p) + "left:" + (e.parentWidth - (e.parentLeft + e.parentWidth - e.childLeft + 10)) + "px;" + this.getBorderStyles("left", 10) + "border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + "px;top:" + (-6 - this.lineStroke) + 'px;width:0;height:0;position:relative;"></div></div>'), "FSType3" === this.getParentPosition(e) && (l = l + "left:" + (e.childLeft - 20) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(o) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FSType3">', l = (l += p) + "left:10px;" + this.getBorderStyles("left", 10) + "border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + "px;top:" + '-6px;width:0;height:0;position:relative;"></div>', l = (l += h) + "width:10px;" + this.getBorderStyles("top", this.lineStroke) + "position:relative;top:" + -(6 + (5 + this.lineStroke) + Math.round(this.lineStroke / 2)) + 'px;"></div>', l = (l += h) + "width:" + this.lineStroke + "px;" + this.getBorderStyles("top", r - this.getconnectorLineGap(e) - this.lineStroke + 1) + "position:relative;top:" + -(13 + 2 * (this.lineStroke - 1)) + 'px;"></div>', l = (l += h) + "width:" + (e.parentLeft + e.parentWidth - e.childLeft + 30) + "px;" + this.getBorderStyles("top", this.lineStroke) + "position:relative;top:" + -(13 + 2 * (this.lineStroke - 1)) + 'px;"></div>', l = (l += h) + "left:" + (e.parentLeft + e.parentWidth - e.childLeft + (30 - this.lineStroke)) + "px;width:0px;height:" + (this.getconnectorLineGap(e) - this.lineStroke) + "px;" + this.getBorderStyles("left", this.lineStroke) + "position:relative;top:" + -(13 + 2 * (this.lineStroke - 1)) + 'px;"></div>', l = (l += h) + (o ? "left:" + (e.parentLeft + e.parentWidth - e.childLeft + (18 - this.lineStroke)) + "px;width:" + (12 + this.lineStroke) + "px;" : "left:" + (e.parentLeft + e.parentWidth - e.childLeft + 20) + "px;width:10px;") + this.getBorderStyles("top", this.lineStroke) + "position:relative;top:" + -(13 + 2 * (this.lineStroke - 1)) + 'px;"></div></div>'), "FSType4" === this.getParentPosition(e) && (l = l + "left:" + (e.parentLeft + e.parentWidth) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FSType4">', l = (l += p) + "left:" + (e.childLeft - (e.parentLeft + e.parentWidth + 10)) + "px;" + this.getBorderStyles("left", 10) + "top:" + "-6px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div>', l = (l += h) + "left:" + (e.childLeft - (e.parentLeft + e.parentWidth) - 20) + "px;top:" + -(6 + (5 + this.lineStroke) + Math.round(this.lineStroke / 2)) + "px;width:10px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;left:" + (e.childLeft - (e.parentLeft + e.parentWidth) - 20) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke + 1) + 'position:relative;"></div>', l = (l += h) + (o ? "left:-1px;" : "") + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:" + (o ? e.childLeft - (e.parentLeft + e.parentWidth + 20) + 1 + this.lineStroke : e.childLeft - (e.parentLeft + e.parentWidth + 20) + this.lineStroke) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div></div>'), "SSType4" === this.getParentPosition(e) && (l = l + "left:" + (e.parentLeft - 10) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SSType4">', l = (l += p) + "left:" + (e.childLeft - e.parentLeft) + "px;" + u, l = (l += h) + "top:" + -(6 + (5 + this.lineStroke) + this.lineStroke / 2) + "px;width:" + (e.childLeft - e.parentLeft) + "px;" + f, l = (l += h) + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:10px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div></div>'), "SSType3" === this.getParentPosition(e) && (l = l + "left:" + (e.childLeft - 20) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SSType3">', l = (l += p) + "left:10px;" + u, l = (l += h) + "top:" + -(6 + (5 + this.lineStroke) + this.lineStroke / 2) + "px;width:10px;" + f, l = (l += h) + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:" + (e.parentLeft - e.childLeft + 21) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div></div>'), "SSType2" === this.getParentPosition(e) && (l = l + "left:" + n + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(o) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SSType2">', l = (l += h) + "width:" + (t + 1) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "width:" + i + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += p) + "left:" + i + "px;" + this.getBorderStyles("left", 10) + "top:" + (-6 - this.lineStroke) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div></div>'), "SSType1" === this.getParentPosition(e) && (l = l + "left:" + (e.childLeft - 20) + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(o) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SSType1">', l = (l += h) + "width:" + (e.parentLeft - e.childLeft + 21) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "width:10px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += p) + "left:10px;" + this.getBorderStyles("left", 10) + "top:" + (-6 - this.lineStroke) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div></div>'), "FFType1" === this.getParentPosition(e) && (l = l + "left:" + (e.childLeft + e.childWidth) + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(o) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FFType1">', l = (l += h) + "left:" + (o ? e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) - 1 : e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth)) + "px;width:" + (o ? 21 + this.lineStroke : 20 + this.lineStroke) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) + 20) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (s ? 4 : 10) + "px;width:" + (s ? e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) + (16 + this.lineStroke) : e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) + (10 + this.lineStroke)) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += d) + (s ? "left:0px;" : "") + this.getBorderStyles("right", 10) + "top:" + (-6 - this.lineStroke) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div></div>'), "FFType2" === this.getParentPosition(e) && (l = l + "left:" + (e.parentLeft + e.parentWidth) + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(o) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FFType2">', l = (l += h) + (o ? "left:-1px;" : "") + "width:" + (o ? e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + (21 + this.lineStroke) : e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + (20 + this.lineStroke)) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + 20) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (s ? e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + 4 : e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + 10) + "px;width:" + (s ? 16 + this.lineStroke : 10 + this.lineStroke) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += d) + "left:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth)) + "px;" + this.getBorderStyles("right", 10) + "top:" + (-6 - this.lineStroke) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div></div>'), "FFType3" === this.getParentPosition(e) && (l = l + "left:" + (e.childLeft + e.childWidth) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FFType3">', l += c, l = (l += h) + (s ? "left:4px;width:" + (e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) + 16) : "left:10px;width:" + (e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) + 10)) + "px;top:" + -(6 + (5 + this.lineStroke) + this.lineStroke / 2) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) + 20) + "px;top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke + 1) + 'position:relative;"></div>', l = (l += h) + (o ? "left:" + (e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth) - 1) + "px;width:21" : "left:" + (e.parentLeft + e.parentWidth - (e.childLeft + e.childWidth)) + "px;width:20") + "px;top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div></div>'), "FFType4" === this.getParentPosition(e) && (l = l + "left:" + (e.parentLeft + e.parentWidth) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="FFType4">', l = (l += d) + "left:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth)) + "px;" + this.getBorderStyles("right", 10) + "top:" + (-5 - this.lineStroke + (this.lineStroke - 1)) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div>', l = (l += h) + (s ? "left:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + 4) + "px;width:" + (16 + this.lineStroke) : "left:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + 10) + "px;width:" + (10 + this.lineStroke)) + "px;" + y, l = (l += h) + "left:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + 20) + "px;top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke + 1) + 'position:relative;"></div>', l = (l += h) + (o ? "left:-1px;width:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + (21 + this.lineStroke)) : "width:" + (e.childLeft + e.childWidth - (e.parentLeft + e.parentWidth) + (20 + this.lineStroke))) + "px;top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div></div>'), "SFType4" === this.getParentPosition(e) && (l = (l = l + "left:" + (e.parentLeft - 10) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SFType4">') + m + "top:" + (-5 - this.lineStroke + (this.lineStroke - 1)) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div>', l = (l += h) + "left:" + (s ? e.childLeft + e.childWidth - e.parentLeft + (14 + this.lineStroke) + "px;width:16" : e.childLeft + e.childWidth - e.parentLeft + 20 + "px;width:" + (10 + this.lineStroke)) + "px;" + y, l = (l += h) + "left:" + (e.childLeft + e.childWidth - e.parentLeft + 30) + "px;top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.getconnectorLineGap(e) - (this.lineStroke - 1)) + 'position:relative;"></div>', l = (l += h) + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:" + (e.childLeft + e.childWidth - e.parentLeft + (30 + this.lineStroke)) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", this.getconnectorLineGap(e) - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:11px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div></div>'), "SFType3" === this.getParentPosition(e) && (l = l + "left:" + (e.childLeft + e.childWidth) + "px;top:" + (e.childIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SFType3">', l += c, l = (l += h) + (s ? "left:4px;width:" + (16 + this.lineStroke) : "left:10px;width:" + (10 + this.lineStroke)) + "px;top:" + -(13 + 2 * (this.lineStroke - 1) - 1) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:20px;top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - (this.lineStroke - 1)) + 'position:relative;"></div>', l = (l += h) + "left:20px;top:" + -(13 + 2 * (this.lineStroke - 1)) + "px;width:" + (e.parentLeft - (e.childLeft + e.childWidth + 20) + this.lineStroke) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div></div>'), "SFType1" === this.getParentPosition(e) && (l = l + "left:" + (e.parentLeft - 10) + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(s) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SFType1">', l = (l += h) + "width:11px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.getconnectorLineGap(e) - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "width:" + (e.childLeft + e.childWidth - e.parentLeft + (30 + this.lineStroke)) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.childLeft + e.childWidth - e.parentLeft + 30) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", this.getconnectorLineGap(e) - this.lineStroke) + 'position:relative;"></div>', l = (l = (l += h) + (s ? "left:" + (e.childLeft + e.childWidth - e.parentLeft + 15) + "px;width:" + (15 + this.lineStroke) : "left:" + (e.childLeft + e.childWidth - e.parentLeft + 20) + "px;width:" + (10 + this.lineStroke)) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>') + m + "top:" + (-6 - this.lineStroke) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;position:relative;"></div></div>'), "SFType2" === this.getParentPosition(e) && (l = l + "left:" + (e.childLeft + e.childWidth) + "px;top:" + (e.parentIndex * e.rowHeight + this.getTaskbarMidpoint(o) - (this.lineStroke - 1)) + "px;width:1px;height:" + r + 'px;position:absolute" data-connectortype="SFType2">', l = (l += h) + "left:" + (e.parentLeft - (e.childLeft + e.childWidth) - 10) + "px;width:11px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += h) + "left:" + (e.parentLeft - (e.childLeft + e.childWidth) - 10) + "px;width:0px;" + this.getBorderStyles("left", this.lineStroke) + this.getBorderStyles("top", r - this.lineStroke) + 'position:relative;"></div>', l = (l += h) + (s ? "left:4px;width:" + (e.parentLeft - (e.childLeft + e.childWidth) - (14 - this.lineStroke)) : "left:10px;width:" + (e.parentLeft - (e.childLeft + e.childWidth) - (20 - this.lineStroke))) + "px;" + this.getBorderStyles("top", this.lineStroke) + 'position:relative;"></div>', l = (l += d) + "left:0px;" + this.getBorderStyles("right", 10) + "top:" + (-6 - this.lineStroke) + "px;border-bottom-width:" + (5 + this.lineStroke) + "px;border-top-width:" + (5 + this.lineStroke) + 'px;width:0;height:0;position:relative;"></div></div>'), a += l, a += "</div>"
            }
            return a
        }, e.prototype.createConnectorLineTooltipTable = function() {
            this.tooltipTable = ct("table", {
                className: ".e-tooltiptable",
                styles: "margin-top:0px",
                attrs: {
                    cellspacing: "2px",
                    cellpadding: "2px"
                }
            });
            var e = ct("tbody");
            e.innerHTML = "", this.tooltipTable.appendChild(e)
        }, e.prototype.getConnectorLineTooltipInnerTd = function(e, t, i, n) {
            var r = '<tr  id="fromPredecessor"><td >' + this.parent.localeObj.getConstant("from") + "</td><td> ";
            return r = (r = (r = r + e + " </td><td> " + this.parent.localeObj.getConstant(t) + " </td> </tr>") + '<tr id="toPredecessor"><td>' + this.parent.localeObj.getConstant("to") + "</td><td> " + i) + " </td><td> " + this.parent.localeObj.getConstant(n) + " </td></tr></tbody><table>"
        }, e.prototype.generateAriaLabel = function(e) {
            var t = e.type,
                i = this.parent.getExpandedRecords(this.parent.currentViewData),
                n = i[e.parentIndex].ganttProperties.taskName,
                r = i[e.childIndex].ganttProperties.taskName,
                o = this.parent.localeObj.getConstant("start"),
                s = this.parent.localeObj.getConstant("finish");
            return "FS" === t ? n + " " + s + " to " + r + " " + o : "FF" === t ? n + " " + s + " to " + r + " " + s : "SS" === t ? n + " " + o + " to " + r + " " + o : n + " " + o + " to " + r + " " + s
        }, e.prototype.getRecordByID = function(e) {
            return g(e) ? null : "ResourceView" === this.parent.viewType ? this.parent.flatData[this.parent.getTaskIds().indexOf("T" + e.toString())] : this.parent.flatData[this.parent.ids.indexOf(e.toString())]
        }, e
    }(),
    od = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    sd = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    ad = "e-pane",
    ld = "e-pane-horizontal",
    hd = "e-pane-vertical",
    pd = "e-split-bar",
    dd = "e-split-bar-horizontal",
    cd = "e-static-pane",
    ud = "e-resize-handler",
    gd = "e-arrow-left",
    fd = "e-arrow-up",
    md = "e-arrow-down",
    yd = "e-icon-hidden",
    vd = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return od(t, e), sd([zt()], t.prototype, "size", void 0), sd([zt(!1)], t.prototype, "collapsible", void 0), sd([zt(!1)], t.prototype, "collapsed", void 0), sd([zt(!0)], t.prototype, "resizable", void 0), sd([zt(null)], t.prototype, "min", void 0), sd([zt(null)], t.prototype, "max", void 0), sd([zt()], t.prototype, "content", void 0), sd([zt("")], t.prototype, "cssClass", void 0), t
    }(oi),
    bd = function(e) {
        function t(t, i) {
            var n = e.call(this, t, i) || this;
            return n.allPanes = [], n.paneOrder = [], n.separatorOrder = [], n.allBars = [], n.previousCoordinates = {}, n.currentCoordinates = {}, n.updatePrePaneInPercentage = !1, n.updateNextPaneInPercentage = !1, n.panesDimensions = [], n.border = 0, n.validDataAttributes = ["data-size", "data-min", "data-max", "data-collapsible", "data-resizable", "data-content", "data-collapsed"], n.validElementAttributes = ["data-orientation", "data-width", "data-height"], n.iconsDelay = 300, n.templateElement = [], n.collapseFlag = !1, n.expandFlag = !0, n
        }
        return od(t, e), t.prototype.onPropertyChanged = function(e, t) {
            if (this.element.classList.contains("e-splitter"))
                for (var i = 0, n = Object.keys(e); i < n.length; i++) {
                    switch (n[i]) {
                        case "height":
                            this.setSplitterSize(this.element, e.height, "height");
                            break;
                        case "width":
                            this.setSplitterSize(this.element, e.width, "width");
                            break;
                        case "cssClass":
                            this.setCssClass(this.element, e.cssClass);
                            break;
                        case "enabled":
                            this.isEnabled(this.enabled);
                            break;
                        case "separatorSize":
                            this.setSeparatorSize(e.separatorSize);
                            break;
                        case "orientation":
                            this.changeOrientation(e.orientation);
                            break;
                        case "paneSettings":
                            if (e.paneSettings instanceof Array && t.paneSettings instanceof Array) this.destroyPaneSettings(), this.allBars = [], this.allPanes = [], this.createSplitPane(this.element), this.addSeparator(this.element), this.getPanesDimensions(), this.setRTL(this.enableRtl), this.isCollapsed();
                            else
                                for (var r = Object.keys(e.paneSettings), o = 0; o < r.length; o++)
                                    for (var s = parseInt(Object.keys(e.paneSettings)[o], 10), a = Object.keys(e.paneSettings[s]).length, l = 0; l < a; l++) {
                                        var h = Object.keys(e.paneSettings[s])[l];
                                        switch (h) {
                                            case "content":
                                                var p = Object(e.paneSettings[s])[h];
                                                g(p) || (this.allPanes[s].innerHTML = "", this.setTemplate(p, this.allPanes[s]));
                                                break;
                                            case "resizable":
                                                var d = Object(e.paneSettings[s])[h];
                                                this.resizableModel(s, d);
                                                break;
                                            case "collapsible":
                                                this.collapsibleModelUpdate(s);
                                                break;
                                            case "collapsed":
                                                e.paneSettings[s].collapsed ? this.isCollapsed(s) : this.collapsedOnchange(s);
                                                break;
                                            case "cssClass":
                                                this.setCssClass(this.allPanes[s], e.paneSettings[s].cssClass);
                                                break;
                                            case "size":
                                                var c = Object(e.paneSettings[s])[h];
                                                "" === c || g(c) || this.updatePaneSize(c, s)
                                        }
                                    }
                            break;
                        case "enableRtl":
                            this.setRTL(e.enableRtl)
                    }
                }
        }, t.prototype.updatePaneSize = function(e, t) {
            this.allPanes[t].style.flexBasis = e;
            for (var i, n = [], r = 0, o = 0; o < this.allPanes.length; o++) this.paneSettings[o].size || "" === this.allPanes[o].innerText ? this.paneSettings[o].size && (i = "Horizontal" === this.orientation ? this.allPanes[t].offsetWidth : this.allPanes[t].offsetHeight) : (n[r] = o, r++);
            i = "Horizontal" === this.orientation ? this.allBars[0].offsetWidth * this.allBars.length + i : this.allBars[0].offsetHeight * this.allBars.length + i;
            for (var s = (("Horizontal" === this.orientation ? this.element.offsetWidth : this.element.offsetHeight) - i - 2 * this.border) / n.length, a = 0; a < n.length; a++) this.allPanes[n[a]].style.flexBasis = s + "px";
            this.allPanes[t].classList.add(cd)
        }, t.prototype.preRender = function() {
            if (this.wrapper = this.element.cloneNode(!0), this.wrapperParent = this.element.parentElement, !this.checkBlazor()) {
                gt([this.wrapper], ["e-control", "e-lib", "e-splitter"]);
                var e = "Horizontal" === this.orientation ? "e-splitter-horizontal" : "e-splitter-vertical";
                ut([this.element], e)
            }
            var t = "msie" === me.info.name ? "e-ie" : "";
            this.setCssClass(this.element, t), me.isDevice && ut([this.element], "e-splitter-touch")
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist([])
        }, t.prototype.getModuleName = function() {
            return "splitter"
        }, t.prototype.render = function() {
            this.checkBlazor() || (this.checkDataAttributes(), this.setCssClass(this.element, this.cssClass), this.isEnabled(this.enabled), this.setDimension(this.getHeight(this.element), this.getWidth(this.element))), this.createSplitPane(this.element), this.addSeparator(this.element), this.getPanesDimensions(), this.setPaneSettings(), this.checkBlazor() || this.setRTL(this.enableRtl), this.collapseFlag = !0, this.isCollapsed(), this.collapseFlag = !1, ye.add(document, "touchstart click", this.onDocumentClick, this), this.renderComplete(), window.addEventListener("resize", this.reportWindowSize.bind(this), !0), ye.add(this.element, "keydown", this.onMove, this)
        }, t.prototype.onDocumentClick = function(e) {
            e.target.classList.contains(pd) || g(this.currentSeparator) || (this.currentSeparator.classList.remove("e-split-bar-hover"), this.currentSeparator.classList.remove("e-split-bar-active"))
        }, t.prototype.checkPaneSize = function(e) {
            var t, i, n = g(this.separatorSize) ? 1 : this.separatorSize;
            if (t = "Horizontal" === this.orientation ? this.previousPane.offsetWidth : this.previousPane.offsetHeight, i = "Horizontal" === this.orientation ? this.nextPane.offsetWidth : this.nextPane.offsetHeight, this.previousPane.style.flexBasis.indexOf("%") > 0 || this.nextPane.style.flexBasis.indexOf("%") > 0) {
                var r = this.updatePaneFlexBasis(this.previousPane),
                    o = this.updatePaneFlexBasis(this.nextPane);
                this.totalPercent = r + o, this.totalWidth = this.convertPercentageToPixel(this.totalPercent + "%"), "keydown" !== e.type || g(e.keyCode) || ((39 === e.keyCode || 40 === e.keyCode) && i > 0 ? (this.previousPane.style.flexBasis = r + 1 + "%", this.nextPane.style.flexBasis = o - 1 + "%") : (37 === e.keyCode || 38 === e.keyCode) && t > 0 && (this.previousPane.style.flexBasis = r - 1 + "%", this.nextPane.style.flexBasis = o + 1 + "%"))
            } else this.totalWidth = "Horizontal" === this.orientation ? this.previousPane.offsetWidth + this.nextPane.offsetWidth : this.previousPane.offsetHeight + this.nextPane.offsetHeight, "keydown" !== e.type || g(e.keyCode) || ((39 === e.keyCode || 40 === e.keyCode) && i > 0 ? (this.addStaticPaneClass(), this.previousPane.style.flexBasis = t + n + "px", this.nextPane.style.flexBasis = i < n ? "0px" : i - n + "px") : (37 === e.keyCode || 38 === e.keyCode) && t > 0 && (this.addStaticPaneClass(), this.previousPane.style.flexBasis = t < n ? "0px" : t - n + "px", this.nextPane.style.flexBasis = i + n + "px"))
        }, t.prototype.onMove = function(e) {
            if (this.allPanes.length > 1) {
                var t = this.getSeparatorIndex(this.currentSeparator),
                    i = this.previousPane.classList.contains("e-collapsed"),
                    n = this.previousPane.classList.contains("e-expanded"),
                    r = this.nextPane.classList.contains("e-collapsed");
                ("Horizontal" !== this.orientation && 38 === e.keyCode || "Horizontal" === this.orientation && 39 === e.keyCode || "Horizontal" === this.orientation && 37 === e.keyCode || "Horizontal" !== this.orientation && 40 === e.keyCode) && (!n && !r && !i || n && !r) && document.activeElement.classList.contains(pd) && this.paneSettings[t].resizable && this.paneSettings[t + 1].resizable ? (this.checkPaneSize(e), this.triggerResizing(e)) : 13 === e.keyCode && this.paneSettings[t].collapsible && document.activeElement.classList.contains(pd) && (this.previousPane.classList.contains("e-collapsed") ? (this.expand(t), ut([this.currentSeparator], "e-split-bar-active")) : (this.collapse(t), ut([this.currentSeparator], "e-split-bar-active")))
            }
        }, t.prototype.sanitizeHelper = function(e) {
            if (this.enableHtmlSanitizer) {
                var t = Oi.beforeSanitize();
                u(t, t, {
                    cancel: !1,
                    helper: null
                }), this.trigger("beforeSanitizeHtml", t), t.cancel && !g(t.helper) ? e = t.helper(e) : t.cancel || (e = Oi.serializeValue(t, e))
            }
            return e
        }, t.prototype.checkDataAttributes = function() {
            for (var e, t, i = 0; i < this.validElementAttributes.length; i++) g(t = this.element.getAttribute(this.validElementAttributes[i])) || (this[e = this.removeDataPrefix(this.validElementAttributes[i])] = t);
            for (var n = 0; n < this.element.children.length; n++)
                for (var r = 0; r < this.validDataAttributes.length; r++)
                    if (!g(t = this.element.children[n].getAttribute(this.validDataAttributes[r]))) {
                        t = "collapsible" === (e = this.removeDataPrefix(this.validDataAttributes[r])) || "resizable" === e ? "true" === t : t, g(this.paneSettings[n]) && (this.paneSettings[n] = {
                            size: "",
                            min: null,
                            max: null,
                            content: "",
                            resizable: !0,
                            collapsible: !1,
                            collapsed: !1
                        });
                        var o = this.paneSettings[n][e];
                        "resizable" !== e && "collapsible" !== e && "collapsed" !== e || (this.paneSettings[n][e] = t), (g(o) || "" === o) && (this.paneSettings[n][e] = t)
                    }
        }, t.prototype.destroyPaneSettings = function() {
            [].slice.call(this.element.children).forEach((function(e) {
                wt(e)
            })), this.restoreElem()
        }, t.prototype.checkBlazor = function() {
            return S() && this.isServerRendered
        }, t.prototype.setPaneSettings = function() {
            for (var e = this.allPanes.length, t = [], i = {
                    size: "",
                    min: null,
                    max: null,
                    content: "",
                    resizable: !0,
                    collapsed: !1,
                    collapsible: !1,
                    cssClass: ""
                }, n = 0; n < e; n++) g(this.paneSettings[n]) ? t[n] = i : t[n] = this.paneSettings[n];
            this.setProperties({
                paneSettings: t
            }, !0)
        }, t.prototype.checkArrow = function(e, t) {
            return this.allBars[e].querySelector(".e-navigate-arrow." + t)
        }, t.prototype.removeDataPrefix = function(e) {
            return e.slice(e.lastIndexOf("-") + 1)
        }, t.prototype.setRTL = function(e) {
            e ? ut([this.element], "e-rtl") : gt([this.element], "e-rtl")
        }, t.prototype.setSplitterSize = function(e, t, i) {
            Dt(e, "width" === i ? {
                width: C(t)
            } : {
                height: C(t)
            })
        }, t.prototype.getPanesDimensions = function() {
            for (var e = 0; e < this.allPanes.length; e++) "Horizontal" === this.orientation ? this.panesDimensions.push(this.allPanes[e].getBoundingClientRect().width) : this.panesDimensions.push(this.allPanes[e].getBoundingClientRect().height)
        }, t.prototype.setCssClass = function(e, t) {
            t && ut([e], t.split(t.indexOf(",") > -1 ? "," : " "))
        }, t.prototype.hideResizer = function(e) {
            ut([xt("." + ud, e)], "e-hide-handler")
        }, t.prototype.showResizer = function(e) {
            !g(this.previousPane) && this.previousPane.classList.contains("e-resizable") && !g(this.nextPane) && this.nextPane.classList.contains("e-resizable") && gt([xt("." + ud, e)], "e-hide-handler")
        }, t.prototype.resizableModel = function(e, t) {
            var i, n = e;
            i = e === this.allBars.length ? e - 1 : e, ye.remove(this.allBars[i], "mousedown", this.onMouseDown), t ? (ye.add(this.allBars[i], "mousedown", this.onMouseDown, this), this.isResizable() && (this.showResizer(this.allBars[i]), gt([xt("." + ud, this.allBars[i])], "e-hide-handler"), this.allBars[i].classList.add("e-resizable-split-bar"), e === this.allBars.length ? this.allPanes[e].classList.add("e-resizable") : this.allPanes[i].classList.add("e-resizable"), this.updateResizablePanes(n))) : (this.updateResizablePanes(n), this.hideResizer(this.allBars[i]), this.allBars[i].classList.remove("e-resizable-split-bar"), e === this.allBars.length ? this.allPanes[e].classList.remove("e-resizable") : this.allPanes[i].classList.remove("e-resizable"))
        }, t.prototype.collapsibleModelUpdate = function(e) {
            var t, i, n;
            n = e === this.allBars.length ? e - 1 : e, t = "Horizontal" === this.orientation ? this.checkArrow(n, gd) : this.checkArrow(n, fd), i = "Horizontal" === this.orientation ? this.checkArrow(n, "e-arrow-right") : this.checkArrow(n, md), this.paneCollapsible(this.allPanes[e], e), this.updateCollapseIcons(n, i, t)
        }, t.prototype.collapseArrow = function(e, t) {
            return kt("." + t, this.allBars[e])[0]
        }, t.prototype.updateIsCollapsed = function(e, t, i) {
            if (!g(e)) {
                var n = e === this.allBars.length,
                    r = n ? e - 1 : e;
                (!n && this.allPanes[e + 1].classList.contains("e-collapsed") && 0 !== e ? this.collapseArrow(r - 1, i) : n ? this.collapseArrow(r, i) : this.collapseArrow(r, t)).click()
            }
        }, t.prototype.isCollapsed = function(e) {
            var t = this;
            if (g(e) || !this.paneSettings[e].collapsed || !g(this.allPanes[e].classList.contains("e-collapsed"))) {
                if (this.expandFlag = !1, g(e)) {
                    for (var i = 0; i < this.allPanes.length; i++) !g(this.paneSettings[i]) && this.paneSettings[i].collapsed && this.updateIsCollapsed(i, this.targetArrows().collapseArrow, this.targetArrows().lastBarArrow);
                    for (i = this.allPanes.length - 1; i >= 0; i--)
                        if (!g(this.paneSettings[i]) && this.paneSettings[i].collapsed && !this.allPanes[i].classList.contains("e-collapsed")) {
                            var n = "Horizontal" === this.orientation ? "e-arrow-right" : md;
                            if (0 !== i) this.collapseArrow(i - 1, n).click();
                            if (!this.nextPane.classList.contains("e-collapsed")) this.collapseArrow(i - 1, n).click()
                        }
                } else {
                    this.collapseFlag = !0;
                    var r = e === this.allBars.length,
                        o = r ? e - 1 : e,
                        s = {
                            target: !r && this.allPanes[e + 1].classList.contains("e-collapsed") && 0 !== e ? this.collapseArrow(o - 1, this.targetArrows().lastBarArrow) : r ? this.collapseArrow(o, this.targetArrows().lastBarArrow) : this.collapseArrow(o, this.targetArrows().collapseArrow)
                        },
                        a = this.beforeAction(s);
                    this.trigger("beforeCollapse", a, (function(i) {
                        if (!i.cancel) {
                            var n = [];
                            n[0] = e;
                            for (var r = 1, o = 0; o < t.allPanes.length; o++) t.allPanes[o].classList.contains("e-collapsed") && (n[r] = o, r++);
                            n = n.sort(), t.updateIsCollapsed(e, t.targetArrows().collapseArrow, t.targetArrows().lastBarArrow);
                            for (o = 0; o < n.length; o++) t.allPanes[n[o]].classList.contains("e-collapsed") || t.updateIsCollapsed(n[o], t.targetArrows().collapseArrow, t.targetArrows().lastBarArrow);
                            for (o = n.length; o > 0; o--)
                                if (!t.allPanes[n[o - 1]].classList.contains("e-collapsed")) {
                                    var a = t.targetArrows();
                                    t.updateIsCollapsed(n[o - 1], a.collapseArrow, a.lastBarArrow)
                                } var l = t.afterAction(s);
                            t.trigger("collapsed", l), t.collapseFlag = !1
                        }
                    }))
                }
                this.expandFlag = !0
            }
        }, t.prototype.targetArrows = function() {
            return this.splitterProperty(), {
                collapseArrow: "Horizontal" === this.orientation ? gd : fd,
                lastBarArrow: "Vertical" === this.orientation ? md : "e-arrow-right"
            }
        }, t.prototype.collapsedOnchange = function(e) {
            g(this.paneSettings[e]) || g(this.paneSettings[e].collapsed) || !this.allPanes[e].classList.contains("e-collapsed") || this.updateIsCollapsed(e, this.targetArrows().lastBarArrow, this.targetArrows().collapseArrow)
        }, t.prototype.isEnabled = function(e) {
            e ? gt([this.element], "e-disabled") : ut([this.element], "e-disabled")
        }, t.prototype.setSeparatorSize = function(e) {
            for (var t = g(e) ? "auto" : e + "px", i = "Horizontal" === this.orientation ? dd : "e-split-bar-vertical", n = 0; n < this.allBars.length; n++) {
                var r = kt("." + i, this.element)[n],
                    o = kt("." + ud, r)[0];
                "Horizontal" === this.orientation ? (r.style.width = t, g(o) || (o.style.width = t)) : (r.style.height = t, g(o) || (o.style.height = t))
            }
        }, t.prototype.changeOrientation = function(e) {
            var t = "Vertical" === e;
            this.element.classList.remove(t ? "e-splitter-horizontal" : "e-splitter-vertical"), this.element.classList.add(t ? "e-splitter-vertical" : "e-splitter-horizontal");
            for (var i = 0; i < this.allPanes.length; i++) this.allPanes[i].classList.remove(t ? ld : hd), this.allPanes[i].classList.add(t ? hd : ld);
            for (i = 0; i < this.allBars.length; i++) wt(this.allBars[i]);
            this.allBars = [], this.addSeparator(this.element)
        }, t.prototype.checkSplitPane = function(e, t) {
            return this.collectPanes(e.parentElement.children)[t]
        }, t.prototype.collectPanes = function(e) {
            for (var t = [], i = 0; i < e.length; i++) e[i].classList.contains(ad) && t.push(e[i]);
            return t
        }, t.prototype.getPrevPane = function(e, t) {
            return this.checkSplitPane(e, (t - 1) / 2)
        }, t.prototype.getNextPane = function(e, t) {
            return this.checkSplitPane(e, (t - 1) / 2 + 1)
        }, t.prototype.updateSeparatorSize = function(e) {
            var t = g(this.separatorSize) ? "1px" : this.separatorSize + "px";
            "Horizontal" === this.orientation ? e.style.width = t : e.style.height = t
        }, t.prototype.addResizeHandler = function(e) {
            var t = this.createElement("div");
            ut([t], [ud, "e-icons"]), this.updateSeparatorSize(t), e.appendChild(t)
        }, t.prototype.getHeight = function(e) {
            this.height;
            return "" !== e.style.height && "100%" === this.height ? e.style.height : this.height
        }, t.prototype.getWidth = function(e) {
            this.width;
            return "" !== e.style.width && "100%" === this.width ? e.style.width : this.width
        }, t.prototype.setDimension = function(e, t) {
            Dt(this.element, {
                height: e,
                width: t
            })
        }, t.prototype.updateCollapseIcons = function(e, t, i) {
            g(this.paneSettings[e]) || g(this.paneSettings[e].collapsible) || (this.paneSettings[e].collapsible ? gt([i], [yd]) : ut([i], [yd]), g(this.paneSettings[e + 1]) || (this.paneSettings[e + 1].collapsible ? gt([t], [yd]) : ut([t], [yd])), g(this.paneSettings[e + 1]) || this.paneSettings[e + 1].collapsible && (this.paneSettings[e + 1].collapsible ? gt([t], [yd]) : ut([t], [yd])))
        }, t.prototype.updateIconClass = function() {
            "Horizontal" === this.orientation ? (this.leftArrow = gd, this.rightArrow = "e-arrow-right") : (this.leftArrow = fd, this.rightArrow = md)
        }, t.prototype.createSeparator = function(e) {
            var t = this.createElement("div");
            this.allBars.push(t);
            var i, n, r = this.createElement("button"),
                o = this.createElement("button");
            return r.setAttribute("tabindex", "-1"), o.setAttribute("tabindex", "-1"), r.setAttribute("aria-label", "Toggle navigation"), o.setAttribute("aria-label", "Toggle navigation"), r.setAttribute("type", "button"), o.setAttribute("type", "button"), i = g(this.separatorSize) ? "1px" : this.separatorSize + "px", "Horizontal" === this.orientation ? (this.updateIconClass(), ut([o], ["e-navigate-arrow", gd, yd]), ut([r], ["e-navigate-arrow", "e-arrow-right", yd]), ut([t], [pd, dd]), t.style.width = i) : (ut([r], ["e-navigate-arrow", md, yd]), ut([o], ["e-navigate-arrow", fd, yd]), ut([t], [pd, "e-split-bar-vertical"]), this.updateIconClass(), t.style.height = i), this.addMouseActions(t), t.appendChild(o), this.addResizeHandler(t), t.appendChild(r), this.updateCollapseIcons(e, r, o), t.setAttribute("tabindex", "0"), n = this, t.addEventListener("focus", (function() {
                t.classList.add("e-split-bar-active"), n.currentSeparator = t, n.getPaneDetails()
            })), t.addEventListener("blur", (function() {
                t.classList.remove("e-split-bar-active")
            })), t
        }, t.prototype.updateResizablePanes = function(e) {
            this.getPaneDetails(), this.isResizable() ? this.allPanes[e].classList.add("e-resizable") : this.allPanes[e].classList.remove("e-resizable")
        }, t.prototype.addSeparator = function(e) {
            var t, i, n = this,
                r = this.allPanes.length,
                o = e.children;
            if (this.checkBlazor())
                for (var s = 0; s < this.element.children.length; s++) this.element.children[s].classList.contains(pd) && this.allBars.push(this.element.children[s]);
            for (var a = 0; a < r; a++)
                if (a < r - 1) {
                    if (this.checkBlazor() || (Dt(t = this.createSeparator(a), {
                            order: 2 * a + 1
                        }), this.separatorOrder.push(2 * a + 1), o[a].parentNode.appendChild(t), this.currentSeparator = t, t.setAttribute("role", "separator"), t.setAttribute("aria-orientation", this.orientation.toLowerCase())), this.checkBlazor() && (i = this, t = this.allBars[a], this.updateIconClass()), this.checkBlazor() || this.wireClickEvents(), this.checkBlazor() && !g(t) && (this.currentSeparator = t, this.addMouseActions(t), this.wireClickEvents(), t.addEventListener("focus", (function() {
                            document.activeElement.classList.contains("e-split-bar") && (i.currentSeparator = document.activeElement, i.currentSeparator.classList.add("e-split-bar-active")), n.getPaneDetails()
                        })), t.addEventListener("blur", (function() {
                            i.currentSeparator.classList.remove("e-split-bar-active")
                        }))), !g(t))
                        if (this.isResizable()) {
                            ye.add(t, "mousedown", this.onMouseDown, this);
                            var l = "msie" === me.info.name ? "pointerdown" : "touchstart";
                            ye.add(t, l, this.onMouseDown, this), t.classList.add("e-resizable-split-bar"), this.updateResizablePanes(a)
                        } else ut([xt("." + ud, t)], "e-hide-handler")
                } else t && ut([t], "e-last-bar"), r > 1 && this.updateResizablePanes(a);
            if ("msie" === me.info.name) {
                var h = this.element.querySelectorAll(".e-splitter .e-resize-handler");
                for (a = 0; a < h.length; a++) {
                    var p = g(this.separatorSize) ? 1 : this.separatorSize;
                    h[a].style.paddingLeft = p / 2 + "px", h[a].style.paddingRight = p / 2 + "px"
                }
            }
        }, t.prototype.isResizable = function() {
            var e = !1;
            return (!g(this.paneSettings[this.getPreviousPaneIndex()]) && this.paneSettings[this.getPreviousPaneIndex()].resizable && !g(this.paneSettings[this.getNextPaneIndex()]) && this.paneSettings[this.getNextPaneIndex()].resizable || g(this.paneSettings[this.getNextPaneIndex()])) && (e = !0), e
        }, t.prototype.addMouseActions = function(e) {
            var t, i, n = this;
            e.addEventListener("mouseenter", (function() {
                t = setTimeout((function() {
                    ut([e], ["e-split-bar-hover"])
                }), n.iconsDelay)
            })), e.addEventListener("mouseleave", (function() {
                clearTimeout(t), gt([e], ["e-split-bar-hover"])
            })), e.addEventListener("mouseout", (function() {
                clearTimeout(i)
            })), e.addEventListener("mouseover", (function() {
                i = setTimeout((function() {
                    ut([e], ["e-split-bar-hover"])
                }), n.iconsDelay)
            }))
        }, t.prototype.getEventType = function(e) {
            return e.indexOf("mouse") > -1 ? "mouse" : "touch"
        }, t.prototype.updateCurrentSeparator = function(e) {
            this.currentSeparator = this.isSeparator(e) ? e.parentElement : e
        }, t.prototype.isSeparator = function(e) {
            return !e.classList.contains(pd)
        }, t.prototype.isMouseEvent = function(e) {
            var t = !1;
            return ("mouse" === this.getEventType(e.type) || !g(e.pointerType) && "mouse" === this.getEventType(e.pointerType)) && (t = !0), t
        }, t.prototype.updateCursorPosition = function(e, t) {
            if (this.isMouseEvent(e)) this.changeCoordinates({
                x: e.pageX,
                y: e.pageY
            }, t);
            else {
                var i = "msie" !== me.info.name ? e.touches[0] : e;
                this.changeCoordinates({
                    x: i.pageX,
                    y: i.pageY
                }, t)
            }
        }, t.prototype.changeCoordinates = function(e, t) {
            "previous" === t ? this.previousCoordinates = e : this.currentCoordinates = e
        }, t.prototype.reportWindowSize = function() {
            for (var e = this, t = this.allPanes.length, i = 0; i < t; i++) {
                if (g(this.paneSettings[i].size) && this.allPanes[i].classList.remove(cd), t - 1 === i) this.element.querySelectorAll("." + cd).length === t && gt([this.allPanes[i]], cd)
            }
            setTimeout((function() {
                e.updateSplitterSize(!0)
            }), 200)
        }, t.prototype.updateSplitterSize = function(e) {
            for (var t = 0, i = [], n = 0, r = this.element.children, o = 0; o < r.length; o++) t += "Horizontal" === this.orientation ? r[o].offsetWidth : r[o].offsetHeight;
            for (var s = 0; s < this.allBars.length; s++) t += "Horizontal" === this.orientation ? parseInt(getComputedStyle(this.allBars[s]).marginLeft, 10) + parseInt(getComputedStyle(this.allBars[s]).marginLeft, 10) : parseInt(getComputedStyle(this.allBars[s]).marginTop, 10) + parseInt(getComputedStyle(this.allBars[s]).marginBottom, 10);
            var a = "Horizontal" === this.orientation ? this.element.offsetWidth - (2 * this.border + t) : this.element.offsetHeight - (2 * this.border + t);
            for (o = 0; o < this.allPanes.length; o++) this.paneSettings[o].size || "" === this.allPanes[o].innerText || (i[n] = o, n++);
            var l = a / i.length;
            for (s = 0; s < i.length; s++) this.allPanes[i[s]].style.flexBasis = "Horizontal" === this.orientation ? this.allPanes[i[s]].offsetWidth + l + "px" : this.allPanes[i[s]].offsetHeight + l + "px";
            if (2 === this.allPanes.length && e) {
                var h = this.allPanes.length,
                    p = void 0,
                    d = void 0,
                    c = void 0,
                    u = void 0;
                for (o = 0; o < h; o++)
                    if (null !== this.paneSettings[o].min && (d = this.convertPixelToNumber(this.paneSettings[o].min.toString()), this.paneSettings[o].min.indexOf("%") > 0 && (d = this.convertPercentageToPixel(this.paneSettings[o].min)), p = this.convertPixelToNumber(d.toString()), this.allPanes[o].offsetWidth < p)) {
                        0 === o ? (c = this.allPanes[o], u = this.allPanes[o + 1]) : (c = this.allPanes[o], u = this.allPanes[o - 1]);
                        var g = p - this.allPanes[o].offsetWidth,
                            f = c.style.flexBasis.indexOf("%") > -1;
                        c.style.flexBasis = f ? this.convertPixelToPercentage(c.offsetWidth + g) + "%" : c.offsetWidth + g + "px", u.style.flexBasis = u.style.flexBasis.indexOf("%") > -1 ? this.convertPixelToPercentage(u.offsetWidth - g) + "%" : u.offsetWidth - g + "px"
                    }
            }
        }, t.prototype.wireResizeEvents = function() {
            ye.add(document, "mousemove", this.onMouseMove, this), ye.add(document, "mouseup", this.onMouseUp, this);
            var e = "msie" === me.info.name ? "pointermove" : "touchmove",
                t = "msie" === me.info.name ? "pointerup" : "touchend";
            ye.add(document, e, this.onMouseMove, this), ye.add(document, t, this.onMouseUp, this)
        }, t.prototype.unwireResizeEvents = function() {
            window.removeEventListener("resize", this.reportWindowSize.bind(this));
            var e = "msie" === me.info.name ? "pointermove" : "touchmove",
                t = "msie" === me.info.name ? "pointerup" : "touchend";
            ye.remove(document, "mousemove", this.onMouseMove), ye.remove(document, "mouseup", this.onMouseUp), ye.remove(document, e, this.onMouseMove), ye.remove(document, t, this.onMouseUp)
        }, t.prototype.wireClickEvents = function() {
            ye.add(this.currentSeparator, "touchstart click", this.clickHandler, this)
        }, t.prototype.clickHandler = function(e) {
            if (!e.target.classList.contains("e-navigate-arrow")) {
                var t = kt(".e-splitter > ." + pd + ".e-split-bar-hover");
                t.length > 0 && gt(t, "e-split-bar-hover"), e.target.classList.add("e-split-bar-hover")
            }
            var i = e.target;
            (i.classList.contains(gd) || i.classList.contains(fd)) && this.collapseAction(e), (i.classList.contains("e-arrow-right") || i.classList.contains(md)) && this.expandAction(e);
            for (var n = 0, r = this.element.children, o = 0; o < r.length; o++) n += "Horizontal" === this.orientation ? r[o].offsetWidth : r[o].offsetHeight;
            n > this.element.offsetWidth && this.updateSplitterSize()
        }, t.prototype.expandAction = function(e) {
            var t = this;
            this.splitterDetails(e);
            var i = this.beforeAction(e);
            this.expandFlag ? this.trigger("beforeExpand", i, (function(i) {
                i.cancel || t.expandPane(e);
                var n = t.afterAction(e);
                t.trigger("expanded", n)
            })) : this.expandPane(e)
        }, t.prototype.expandPane = function(e) {
            var t = this.element.querySelectorAll(".e-collapsed").length,
                i = !this.previousPane.classList.contains("e-collapsed") && this.previousPane.classList.contains(cd) && !this.nextPane.classList.contains("e-collapsed") && !this.nextPane.classList.contains("e-expanded") && this.nextPane.nextElementSibling.classList.contains(ad) && !this.nextPane.nextElementSibling.classList.contains(cd) && !(t === this.allPanes.length - 2),
                n = ["e-collapsed", "e-pane-hidden"];
            this.previousPane.classList.contains("e-collapsed") ? (gt([this.previousPane], n), gt([this.nextPane], "e-expanded"), this.expandFlag && this.updatePaneSettings(this.prevPaneIndex, !1)) : (gt([this.nextPane], "e-expanded"), gt([this.previousPane], n), ut([this.previousPane], "e-expanded"), ut([this.nextPane], n), this.expandFlag && this.updatePaneSettings(this.nextPaneIndex, !0)), this.updateIconsOnExpand(e), this.previousPane.setAttribute("aria-expanded", "true"), this.nextPane.setAttribute("aria-expanded", "false"), this.updateFlexGrow(this.checkStaticPanes()), i && (this.previousPane.classList.remove("e-expanded"), this.previousPane.style.flexGrow = "")
        }, t.prototype.checkStaticPanes = function() {
            for (var e = !0, t = 0; t < this.allPanes.length; t++) !this.allPanes[t].classList.contains("e-collapsed") && e && (e = !!this.allPanes[t].classList.contains(cd));
            return e
        }, t.prototype.updateFlexGrow = function(e) {
            for (var t = this.allPanes, i = 0; i < t.length; i++) t[i].classList.contains("e-expanded") ? t[i].style.flexGrow = "1" : t[i].classList.contains("e-collapsed") ? t[i].style.flexGrow = "0" : t[i].style.flexGrow = "", e && !this.nextPane.classList.contains("e-collapsed") && (this.nextPane.style.flexGrow = "1")
        }, t.prototype.hideTargetBarIcon = function(e, t) {
            ut([xt("." + t, e)], yd)
        }, t.prototype.showTargetBarIcon = function(e, t) {
            gt([xt("." + t, e)], yd)
        }, t.prototype.updateIconsOnCollapse = function(e) {
            this.splitterProperty(), this.previousPane.classList.contains("e-collapsed") && !this.nextPane.classList.contains("e-collapsed") ? (ut([e.target], yd), this.paneSettings[this.prevPaneIndex].collapsible && this.showCurrentBarIcon(), this.resizableModel(this.currentBarIndex, !1), !this.previousPane.classList.contains("e-collapsed") || this.nextPane.classList.contains("e-collapsed") || this.paneSettings[this.prevPaneIndex].collapsible || this.hideTargetBarIcon(this.prevBar, this.rightArrow), this.previousPane.previousElementSibling && !this.previousPane.previousElementSibling.classList.contains("e-collapsed") && (this.previousPane.classList.contains("e-collapsed") && this.paneSettings[this.prevPaneIndex].collapsible ? this.showTargetBarIcon(this.prevBar, this.leftArrow) : this.paneSettings[this.prevPaneIndex].collapsible || this.hideTargetBarIcon(this.prevBar, this.leftArrow)), g(this.prevBar) || (this.resizableModel(this.currentBarIndex - 1, !1), this.hideTargetBarIcon(this.prevBar, this.arrow)), this.paneSettings[this.prevPaneIndex].collapsible || this.hideTargetBarIcon(this.currentSeparator, this.rightArrow)) : this.splitInstance.prevPaneCollapsed || this.splitInstance.nextPaneExpanded || (this.paneSettings[this.currentBarIndex].resizable && this.resizableModel(this.currentBarIndex, !0), !this.splitInstance.nextPaneNextEle.classList.contains("e-collapsed") && this.paneSettings[this.currentBarIndex + 1].resizable && this.resizableModel(this.currentBarIndex + 1, !0), this.paneSettings[this.currentBarIndex].collapsible || ut([e.target], yd), this.previousPane && 0 === this.prevPaneIndex && this.paneSettings[this.prevPaneIndex].collapsible && this.showTargetBarIcon(this.currentSeparator, this.leftArrow), this.nextPane && this.nextPaneIndex === this.allPanes.length - 1 && this.paneSettings[this.nextPaneIndex].collapsible && this.showTargetBarIcon(this.getPrevBar(this.nextPaneIndex), this.rightArrow), !this.previousPane.classList.contains("e-collapsed") && this.paneSettings[this.nextPaneIndex].collapsible && this.showTargetBarIcon(this.currentSeparator, this.rightArrow), g(this.nextBar) || (this.nextPane.nextElementSibling && this.nextPane.nextElementSibling.classList.contains("e-collapsed") && this.paneSettings[this.nextPaneIndex + 1].collapsible || !this.nextPane.nextElementSibling.classList.contains("e-collapsed") && this.paneSettings[this.nextPaneIndex].collapsible ? this.showTargetBarIcon(this.nextBar, this.leftArrow) : !this.paneSettings[this.splitInstance.nextPaneIndex + 1].collapsible && this.paneSettings[this.currentBarIndex] && this.hideTargetBarIcon(this.nextBar, this.arrow)), this.nextPaneIndex === this.allPanes.length - 1 || !this.nextPane.nextElementSibling || this.nextPane.classList.contains("e-collapsed") || this.nextPane.nextElementSibling.classList.contains("e-collapsed") || this.paneSettings[this.nextPaneIndex + 1].collapsible || this.hideTargetBarIcon(this.nextBar, this.rightArrow))
        }, t.prototype.collapseAction = function(e) {
            var t = this;
            this.splitterDetails(e);
            var i = this.beforeAction(e);
            this.collapseFlag ? this.collapsePane(e) : this.trigger("beforeCollapse", i, (function(i) {
                if (!i.cancel) {
                    t.collapsePane(e);
                    var n = t.afterAction(e);
                    t.trigger("collapsed", n)
                }
            }))
        }, t.prototype.collapsePane = function(e) {
            var t = this.element.querySelectorAll(".e-collapsed").length,
                i = this.previousPane.classList.contains(cd) && !this.previousPane.classList.contains("e-collapsed") && !this.nextPane.classList.contains("e-collapsed") && this.nextPane.nextElementSibling.classList.contains(ad) && !this.nextPane.nextElementSibling.classList.contains(cd) && !this.nextPane.nextElementSibling.classList.contains("e-collapsed") && !(t === this.allPanes.length - 2) || this.nextPane.classList.contains("e-collapsed") && !this.previousPane.classList.contains(cd) && this.nextPane.classList.contains(cd),
                n = ["e-collapsed", "e-pane-hidden"];
            this.nextPane.classList.contains("e-collapsed") ? (gt([this.previousPane], "e-expanded"), gt([this.nextPane], n), this.collapseFlag || this.updatePaneSettings(this.nextPaneIndex, !1)) : (gt([this.previousPane], "e-expanded"), gt([this.nextPane], n), ut([this.nextPane], "e-expanded"), ut([this.previousPane], n), this.collapseFlag || this.updatePaneSettings(this.prevPaneIndex, !0)), this.updateIconsOnCollapse(e), this.previousPane.setAttribute("aria-expanded", "false"), this.nextPane.setAttribute("aria-expanded", "true"), this.updateFlexGrow(this.checkStaticPanes()), i && (this.nextPane.classList.remove("e-expanded"), this.nextPane.style.flexGrow = "")
        }, t.prototype.beforeAction = function(e) {
            return S() ? {
                element: this.element,
                event: e,
                index: [this.prevPaneIndex, this.nextPaneIndex],
                separator: this.currentSeparator,
                cancel: !1
            } : {
                element: this.element,
                event: e,
                pane: [this.previousPane, this.nextPane],
                index: [this.prevPaneIndex, this.nextPaneIndex],
                separator: this.currentSeparator,
                cancel: !1
            }
        }, t.prototype.updatePaneSettings = function(e, t) {
            this.paneSettings[e].collapsed = t
        }, t.prototype.splitterProperty = function() {
            this.splitInstance = {
                currentBarIndex: this.currentBarIndex,
                nextPaneCollapsible: this.nextPane.classList.contains("e-collapsible"),
                prevPaneCollapsible: this.previousPane.classList.contains("e-collapsible"),
                prevPaneExpanded: this.previousPane.classList.contains("e-expanded"),
                nextPaneExpanded: this.nextPane.classList.contains("e-expanded"),
                nextPaneCollapsed: this.nextPane.classList.contains("e-collapsed"),
                prevPaneCollapsed: this.previousPane.classList.contains("e-collapsed"),
                nextPaneIndex: this.getNextPaneIndex(),
                prevPaneIndex: this.getPreviousPaneIndex(),
                nextPaneNextEle: this.nextPane.nextElementSibling,
                prevPanePreEle: this.previousPane.previousElementSibling
            }
        }, t.prototype.showCurrentBarIcon = function() {
            gt([xt("." + this.arrow, this.currentSeparator)], yd)
        }, t.prototype.updateIconsOnExpand = function(e) {
            this.splitterProperty(), ut([e.target], yd), this.splitInstance.prevPaneExpanded || this.splitInstance.nextPaneCollapsed ? this.splitInstance.prevPaneExpanded && this.splitInstance.nextPaneCollapsed && (this.resizableModel(this.currentBarIndex, !1), this.resizableModel(this.currentBarIndex + 1, !1), this.paneSettings[this.nextPaneIndex].collapsible && this.showCurrentBarIcon(), g(this.nextBar) || this.hideTargetBarIcon(this.nextBar, this.arrow), this.nextPane && this.nextPaneIndex === this.allPanes.length - 1 && !this.paneSettings[this.nextPaneIndex].collapsible && this.splitInstance.nextPaneCollapsed && this.hideTargetBarIcon(this.currentSeparator, this.arrow), this.nextPaneIndex !== this.allPanes.length - 1 && this.nextPane.nextElementSibling && this.nextPane.classList.contains("e-collapsed") && !this.nextPane.nextElementSibling.classList.contains("e-collapsed") && this.paneSettings[this.nextPaneIndex].collapsible && this.showTargetBarIcon(this.nextBar, this.rightArrow)) : (this.paneSettings[this.prevPaneIndex].collapsible && this.showCurrentBarIcon(), this.paneSettings[this.nextPaneIndex].collapsible && gt([e.target], yd), this.paneSettings[this.currentBarIndex].resizable && this.resizableModel(this.currentBarIndex, !0), g(this.prevBar) || this.splitInstance.prevPanePreEle.classList.contains("e-collapsed") ? (this.previousPane.previousElementSibling && this.paneSettings[this.prevPaneIndex].collapsible && this.previousPane.previousElementSibling.classList.contains("e-collapsed") && this.paneSettings[this.prevPaneIndex - 1].collapsible && this.showTargetBarIcon(this.prevBar, this.rightArrow), this.paneSettings[this.currentBarIndex + 1].collapsible || this.hideTargetBarIcon(this.currentSeparator, this.rightArrow)) : (this.paneSettings[this.currentBarIndex - 1].resizable && this.resizableModel(this.currentBarIndex - 1, !0), this.paneSettings[this.prevPaneIndex].collapsible && this.showTargetBarIcon(this.prevBar, this.rightArrow), this.paneSettings[this.currentBarIndex - 1].collapsible || this.hideTargetBarIcon(this.prevBar, this.arrow), this.paneSettings[this.currentBarIndex].collapsible && !this.paneSettings[this.currentBarIndex + 1].collapsible && this.hideTargetBarIcon(this.currentSeparator, this.rightArrow)))
        }, t.prototype.afterAction = function(e) {
            return S() ? {
                element: this.element,
                event: e,
                index: [this.prevPaneIndex, this.nextPaneIndex],
                separator: this.currentSeparator
            } : {
                element: this.element,
                event: e,
                pane: [this.previousPane, this.nextPane],
                index: [this.prevPaneIndex, this.nextPaneIndex],
                separator: this.currentSeparator
            }
        }, t.prototype.currentIndex = function(e) {
            this.currentBarIndex = this.getSeparatorIndex(e.target.parentElement)
        }, t.prototype.getSeparatorIndex = function(e) {
            var t = "Horizontal" === this.orientation ? dd : "e-split-bar-vertical";
            return this.checkBlazor() && this.allBars.length < 1 && (this.allBars = kt("." + t, this.element)), [].slice.call(this.allBars).indexOf(e)
        }, t.prototype.getPrevBar = function(e) {
            return this.allBars[e - 1]
        }, t.prototype.getNextBar = function(e) {
            return this.allBars[e + 1]
        }, t.prototype.updateBars = function(e) {
            this.prevBar = this.getPrevBar(e), this.nextBar = this.getNextBar(e)
        }, t.prototype.splitterDetails = function(e) {
            "Horizontal" === this.orientation ? this.arrow = e.target.classList.contains(gd) ? "e-arrow-right" : gd : this.arrow = e.target.classList.contains(fd) ? md : fd, this.updateCurrentSeparator(e.target), this.currentIndex(e), this.updateBars(this.currentBarIndex), this.getPaneDetails()
        }, t.prototype.triggerResizing = function(e) {
            var t = S() ? {
                element: this.element,
                event: e,
                index: [this.prevPaneIndex, this.nextPaneIndex],
                paneSize: [this.prePaneDimenson, this.nextPaneDimension],
                separator: this.currentSeparator
            } : {
                element: this.element,
                event: e,
                pane: [this.previousPane, this.nextPane],
                index: [this.prevPaneIndex, this.nextPaneIndex],
                paneSize: [this.prePaneDimenson, this.nextPaneDimension],
                separator: this.currentSeparator
            };
            this.trigger("resizing", t)
        }, t.prototype.onMouseDown = function(e) {
            var t = this;
            e.preventDefault();
            var i = e.target;
            if (!i.classList.contains("e-navigate-arrow")) {
                this.updateCurrentSeparator(i), ut([this.currentSeparator], "e-split-bar-active"), this.updateCursorPosition(e, "previous"), this.getPaneDetails();
                for (var n = S() ? {
                        element: this.element,
                        event: e,
                        index: [this.getPreviousPaneIndex(), this.getNextPaneIndex()],
                        separator: this.currentSeparator,
                        cancel: !1
                    } : {
                        element: this.element,
                        event: e,
                        pane: [this.previousPane, this.nextPane],
                        index: [this.getPreviousPaneIndex(), this.getNextPaneIndex()],
                        separator: this.currentSeparator,
                        cancel: !1
                    }, r = 0; r < this.element.querySelectorAll("iframe").length; r++) this.element.querySelectorAll("iframe")[r].style.pointerEvents = "none";
                this.trigger("resizeStart", n, (function(i) {
                    i.cancel || (t.wireResizeEvents(), t.checkPaneSize(e))
                }))
            }
        }, t.prototype.updatePaneFlexBasis = function(e) {
            var t;
            if (e.style.flexBasis.indexOf("%") > 0) t = this.removePercentageUnit(e.style.flexBasis);
            else if ("" !== e.style.flexBasis) t = this.convertPixelToPercentage(this.convertPixelToNumber(e.style.flexBasis));
            else {
                var i = "Horizontal" === this.orientation ? e.offsetWidth : e.offsetHeight;
                t = this.convertPixelToPercentage(i)
            }
            return t
        }, t.prototype.removePercentageUnit = function(e) {
            return parseFloat(e.slice(0, e.indexOf("%")))
        }, t.prototype.convertPercentageToPixel = function(e, t) {
            var i, n = e.toString();
            if (n.indexOf("%") > -1) {
                i = parseFloat(n.slice(0, n.indexOf("%")));
                var r = void 0;
                r = g(t) ? "Horizontal" === this.orientation ? this.element.offsetWidth : this.element.offsetHeight : this.panesDimensions[this.allPanes.indexOf(t)], i = Math.ceil(r * (i / 100))
            } else i = parseInt(n, 10);
            return i
        }, t.prototype.convertPixelToPercentage = function(e) {
            return e / ("Horizontal" === this.orientation ? this.element.offsetWidth : this.element.offsetHeight) * 100
        }, t.prototype.convertPixelToNumber = function(e) {
            return e.indexOf("p") > -1 ? parseFloat(e.slice(0, e.indexOf("p"))) : parseFloat(e)
        }, t.prototype.calcDragPosition = function(e, t) {
            var i;
            return (i = (i = ("Horizontal" === this.orientation ? this.currentCoordinates.x - e : this.currentCoordinates.y - e) / t) > 1 ? 1 : i < 0 ? 0 : i) * t
        }, t.prototype.getSeparatorPosition = function(e) {
            this.updateCursorPosition(e, "current");
            var t = "Horizontal" === this.orientation ? this.element.getBoundingClientRect().left : this.element.getBoundingClientRect().top + window.scrollY,
                i = "Horizontal" === this.orientation ? this.element.offsetWidth : this.element.offsetHeight;
            return this.calcDragPosition(t, i)
        }, t.prototype.getMinMax = function(e, t, i) {
            var n = "min" === i ? 0 : null,
                r = null;
            return "min" === i ? g(this.paneSettings[e]) || g(this.paneSettings[e].min) || (r = this.paneSettings[e].min) : g(this.paneSettings[e]) || g(this.paneSettings[e].max) || (r = this.paneSettings[e].max), this.paneSettings.length > 0 && !g(this.paneSettings[e]) && !g(r) ? (r.indexOf("%") > 0 && (r = this.convertPercentageToPixel(r).toString()), this.convertPixelToNumber(r)) : n
        }, t.prototype.getPreviousPaneIndex = function() {
            return (parseInt(this.currentSeparator.style.order, 10) - 1) / 2
        }, t.prototype.getNextPaneIndex = function() {
            return (parseInt(this.currentSeparator.style.order, 10) - 1) / 2 + 1
        }, t.prototype.getPaneDetails = function() {
            var e = null,
                t = null;
            this.order = parseInt(this.currentSeparator.style.order, 10), this.allPanes.length > 1 && (e = this.getPrevPane(this.currentSeparator, this.order), t = this.getNextPane(this.currentSeparator, this.order)), e && t && (this.previousPane = e, this.nextPane = t, this.prevPaneIndex = this.getPreviousPaneIndex(), this.nextPaneIndex = this.getNextPaneIndex())
        }, t.prototype.getPaneHeight = function(e) {
            return "Horizontal" === this.orientation ? e.offsetWidth.toString() : e.offsetHeight.toString()
        }, t.prototype.isValidSize = function(e) {
            var t = !1;
            return !g(this.paneSettings[e]) && !g(this.paneSettings[e].size) && this.paneSettings[e].size.indexOf("%") > -1 && (t = !0), t
        }, t.prototype.getPaneDimensions = function() {
            this.previousPaneHeightWidth = "" === this.previousPane.style.flexBasis ? this.getPaneHeight(this.previousPane) : this.previousPane.style.flexBasis, this.nextPaneHeightWidth = "" === this.nextPane.style.flexBasis ? this.getPaneHeight(this.nextPane) : this.nextPane.style.flexBasis, this.isValidSize(this.prevPaneIndex) && (this.previousPaneHeightWidth = this.convertPercentageToPixel(this.previousPaneHeightWidth).toString(), this.updatePrePaneInPercentage = !0), this.isValidSize(this.nextPaneIndex) && (this.nextPaneHeightWidth = this.convertPercentageToPixel(this.nextPaneHeightWidth).toString(), this.updateNextPaneInPercentage = !0), this.prePaneDimenson = this.convertPixelToNumber(this.previousPaneHeightWidth.toString()), this.nextPaneDimension = this.convertPixelToNumber(this.nextPaneHeightWidth.toString())
        }, t.prototype.checkCoordinates = function(e, t) {
            var i = !0;
            return e !== this.previousCoordinates.x && t !== this.previousCoordinates.y || (i = !1), i
        }, t.prototype.isCursorMoved = function(e) {
            return "mouse" === this.getEventType(e.type) || !g(e.pointerType) && "mouse" === this.getEventType(e.pointerType) ? this.checkCoordinates(e.pageX, e.pageY) : "msie" !== me.info.name ? this.checkCoordinates(e.touches[0].pageX, e.touches[0].pageY) : this.checkCoordinates(e.pageX, e.pageY)
        }, t.prototype.getBorder = function() {
            this.border = 0;
            var e = "Horizontal" === this.orientation ? (this.element.offsetWidth - this.element.clientWidth) / 2 : (this.element.offsetHeight - this.element.clientHeight) / 2;
            this.border = "chrome" !== me.info.name ? this.border : e
        }, t.prototype.onMouseMove = function(e) {
            if (this.isCursorMoved(e)) {
                this.getPaneDetails(), this.getPaneDimensions(), this.triggerResizing(e);
                var t, i = this.validateDraggedPosition(this.getSeparatorPosition(e), this.prePaneDimenson, this.nextPaneDimension);
                if (this.getBorder(), t = "Horizontal" === this.orientation ? this.element.getBoundingClientRect().left + i - this.currentSeparator.getBoundingClientRect().left + this.border : this.element.getBoundingClientRect().top + i - this.currentSeparator.getBoundingClientRect().top + this.border, this.nextPaneHeightWidth = "string" == typeof this.nextPaneHeightWidth && this.nextPaneHeightWidth.indexOf("p") > -1 ? this.convertPixelToNumber(this.nextPaneHeightWidth) : parseInt(this.nextPaneHeightWidth, 10), this.prevPaneCurrentWidth = t + this.convertPixelToNumber(this.previousPaneHeightWidth), this.nextPaneCurrentWidth = this.nextPaneHeightWidth - t, this.validateMinMaxValues(), this.nextPaneCurrentWidth < 0 && (this.nextPaneCurrentWidth = 0), this.prevPaneCurrentWidth < 0 && (this.prevPaneCurrentWidth = 0), this.nextPaneCurrentWidth + this.prevPaneCurrentWidth > this.totalWidth && (this.nextPaneCurrentWidth < this.prevPaneCurrentWidth ? this.prevPaneCurrentWidth = this.prevPaneCurrentWidth - (this.nextPaneCurrentWidth + this.prevPaneCurrentWidth - this.totalWidth) : this.nextPaneCurrentWidth = this.nextPaneCurrentWidth - (this.nextPaneCurrentWidth + this.prevPaneCurrentWidth - this.totalWidth)), this.nextPaneCurrentWidth + this.prevPaneCurrentWidth < this.totalWidth) {
                    var n = this.totalWidth - (this.nextPaneCurrentWidth + this.prevPaneCurrentWidth);
                    this.nextPaneCurrentWidth = this.nextPaneCurrentWidth + n
                }
                this.calculateCurrentDimensions(), this.addStaticPaneClass(), this.previousPane.style.flexBasis = this.prevPaneCurrentWidth, this.nextPane.style.flexBasis = this.nextPaneCurrentWidth, this.allPanes.length > 2 || this.updateSplitterSize()
            }
        }, t.prototype.validateMinRange = function(e, t, i) {
            var n, r, o = null,
                s = 0;
            return g(this.paneSettings[e]) || g(this.paneSettings[e].min) || (o = this.paneSettings[e].min.toString()), g(o) || (o.indexOf("%") > 0 && (o = this.convertPercentageToPixel(o).toString()), t < (n = this.convertPixelToNumber(o)) && (s = t - n <= 0 ? 0 : t - n, this.totalWidth = this.totalWidth - s, this.totalPercent = this.convertPixelToPercentage(this.totalWidth), r = n)), g(r) ? t : r
        }, t.prototype.validateMaxRange = function(e, t, i) {
            var n, r, o = null;
            return g(this.paneSettings[e]) || g(this.paneSettings[e].max) || (o = this.paneSettings[e].max.toString()), g(o) || (o.indexOf("%") > 0 && (o = this.convertPercentageToPixel(o).toString()), t > (n = this.convertPixelToNumber(o)) && (this.totalWidth = this.totalWidth - (t - n), this.totalPercent = this.convertPixelToPercentage(this.totalWidth), r = n)), g(r) ? t : r
        }, t.prototype.validateMinMaxValues = function() {
            this.prevPaneCurrentWidth = this.validateMinRange(this.prevPaneIndex, this.prevPaneCurrentWidth, this.previousPane), this.nextPaneCurrentWidth = this.validateMinRange(this.nextPaneIndex, this.nextPaneCurrentWidth, this.nextPane), this.prevPaneCurrentWidth = this.validateMaxRange(this.prevPaneIndex, this.prevPaneCurrentWidth, this.previousPane), this.nextPaneCurrentWidth = this.validateMaxRange(this.nextPaneIndex, this.nextPaneCurrentWidth, this.nextPane)
        }, t.prototype.equatePaneWidths = function() {
            var e;
            this.prevPaneCurrentWidth + this.nextPaneCurrentWidth > this.totalPercent && (e = this.prevPaneCurrentWidth + this.nextPaneCurrentWidth - this.totalPercent, this.prevPaneCurrentWidth = this.prevPaneCurrentWidth - e / 2 + "%", this.nextPaneCurrentWidth = this.nextPaneCurrentWidth - e / 2 + "%"), this.prevPaneCurrentWidth + this.nextPaneCurrentWidth < this.totalPercent && (e = this.totalPercent - (this.prevPaneCurrentWidth + this.nextPaneCurrentWidth), this.prevPaneCurrentWidth = this.prevPaneCurrentWidth + e / 2 + "%", this.nextPaneCurrentWidth = this.nextPaneCurrentWidth + e / 2 + "%")
        }, t.prototype.calculateCurrentDimensions = function() {
            this.updatePrePaneInPercentage || this.updateNextPaneInPercentage ? (this.prevPaneCurrentWidth = Math.round(Number(Math.round(10 * this.convertPixelToPercentage(this.prevPaneCurrentWidth)) / 10)), this.nextPaneCurrentWidth = Math.round(Number(Math.round(10 * this.convertPixelToPercentage(this.nextPaneCurrentWidth)) / 10)), 0 === this.prevPaneCurrentWidth && (this.nextPaneCurrentWidth = this.totalPercent), 0 === this.nextPaneCurrentWidth && (this.prevPaneCurrentWidth = this.totalPercent), this.prevPaneCurrentWidth + this.nextPaneCurrentWidth !== this.totalPercent ? this.equatePaneWidths() : (this.prevPaneCurrentWidth = this.prevPaneCurrentWidth + "%", this.nextPaneCurrentWidth = this.nextPaneCurrentWidth + "%"), this.prevPaneCurrentWidth = this.updatePrePaneInPercentage ? this.prevPaneCurrentWidth : this.convertPercentageToPixel(this.prevPaneCurrentWidth) + "px", this.nextPaneCurrentWidth = this.updateNextPaneInPercentage ? this.nextPaneCurrentWidth : this.convertPercentageToPixel(this.nextPaneCurrentWidth) + "px", this.updatePrePaneInPercentage = !1, this.updateNextPaneInPercentage = !1) : (this.prevPaneCurrentWidth = this.prevPaneCurrentWidth + "px", this.nextPaneCurrentWidth = this.nextPaneCurrentWidth + "px")
        }, t.prototype.addStaticPaneClass = function() {
            this.previousPane.classList.contains(cd) || this.previousPane.classList.add(cd), this.nextPane.classList.contains(cd) || this.nextPane.classList.add(cd)
        }, t.prototype.validateDraggedPosition = function(e, t, i) {
            var n = "Horizontal" === this.orientation ? this.currentSeparator.offsetLeft : this.currentSeparator.offsetTop,
                r = n - t,
                o = i + n,
                s = this.getMinMax(this.prevPaneIndex, this.previousPane, "min"),
                a = this.getMinMax(this.nextPaneIndex, this.nextPane, "min"),
                l = this.getMinMax(this.prevPaneIndex, this.previousPane, "max"),
                h = this.getMinMax(this.nextPaneIndex, this.nextPane, "max"),
                p = e;
            return e > o - a ? p = o - a : e < r + s && (p = r + s), g(l) ? g(h) || e < o - h && (p = o - h) : e > r + l && (p = r + l), p
        }, t.prototype.onMouseUp = function(e) {
            gt([this.currentSeparator], "e-split-bar-active"), this.unwireResizeEvents();
            for (var t = S() ? {
                    event: e,
                    element: this.element,
                    index: [this.prevPaneIndex, this.nextPaneIndex],
                    separator: this.currentSeparator,
                    paneSize: [this.prePaneDimenson, this.nextPaneDimension]
                } : {
                    event: e,
                    element: this.element,
                    pane: [this.previousPane, this.nextPane],
                    index: [this.prevPaneIndex, this.nextPaneIndex],
                    separator: this.currentSeparator,
                    paneSize: [this.prePaneDimenson, this.nextPaneDimension]
                }, i = 0; i < this.element.querySelectorAll("iframe").length; i++) this.element.querySelectorAll("iframe")[i].style.pointerEvents = "auto";
            this.trigger("resizeStop", t)
        }, t.prototype.panesDimension = function(e, t) {
            var i, n = t.length;
            parseInt(this.getHeight(this.element), 10), g(this.paneSettings[e]) ? Dt(t[e], {
                order: 2 * e
            }) : g(this.paneSettings[e].size) ? (this.sizeFlag = !0, Dt(t[e], {
                order: 2 * e
            })) : (i = this.paneSettings[e].size, e < n && (Dt(t[e], {
                "flex-basis": i,
                order: 2 * e
            }), e < n - 1 && "" !== this.paneSettings[e].size ? ut([t[e]], cd) : this.sizeFlag || (t[e].style.flexBasis = null), e === n - 1 && this.sizeFlag && "" !== this.paneSettings[e].size && ut([t[e]], cd))), this.paneOrder.push(2 * e)
        }, t.prototype.setTemplate = function(e, t) {
            t.innerHTML = "", e = "string" == typeof e ? this.sanitizeHelper(e) : e, this.templateCompile(t, e), this.isReact && this.renderReactTemplates()
        }, t.prototype.templateCompile = function(e, t) {
            Object.keys(window);
            var i = this.createElement("div");
            this.compileElement(i, t, "content"), 0 !== i.childNodes.length && [].slice.call(i.childNodes).forEach((function(t) {
                e.appendChild(t)
            }))
        }, t.prototype.compileElement = function(e, t, i) {
            var n, r;
            Object.keys(window);
            if ("string" == typeof t)
                if ("." === t[0] || "#" === t[0]) {
                    var o = document.querySelector(t);
                    if (!g(o)) return this.templateElement.push(o), "none" === o.style.display && o.style.removeProperty("display"), "" === o.getAttribute("style") && o.removeAttribute("style"), void e.appendChild(o);
                    t = t.trim()
                } else t = t.trim();
            n = g(t.outerHTML) ? Ge(t) : Ge(t.outerHTML), g(n) || (r = S() && !this.isStringTemplate ? n({}, this, i, this.element.id + "content" + this.allPanes.length.toString(), this.isStringTemplate) : n({}, this, i, this.element.id + "content" + this.allPanes.length.toString(), !0)), !g(n) && r && r.length > 0 && [].slice.call(r).forEach((function(t) {
                e.appendChild(t)
            }))
        }, t.prototype.paneCollapsible = function(e, t) {
            this.paneSettings[t].collapsible ? ut([e], "e-collapsible") : gt([e], "e-collapsible")
        }, t.prototype.createSplitPane = function(e) {
            var t = e.children.length;
            if (!this.checkBlazor())
                for (var i = 0; i < this.paneSettings.length; i++)
                    if (t < this.paneSettings.length) {
                        var n = this.createElement("div");
                        this.element.appendChild(n), t += 1
                    } t = e.children.length;
            var r = [].slice.call(e.children);
            if (this.sizeFlag = !1, t > 0)
                for (i = 0; i < t; i++) "DIV" !== r[i].nodeName && "SPAN" !== r[i].nodeName || (this.checkBlazor() && r[i].classList.contains(ad) ? this.allPanes.push(r[i]) : this.checkBlazor() || this.allPanes.push(r[i]), this.checkBlazor() || ("Horizontal" === this.orientation ? (ut([r[i]], [ad, ld, "e-scrollable"]), this.panesDimension(i, r)) : (ut([r[i]], [ad, hd, "e-scrollable"]), this.panesDimension(i, r)), g(this.paneSettings[i]) || g(this.paneSettings[i].content) || this.setTemplate(this.paneSettings[i].content, r[i]), !g(this.paneSettings[i]) && this.paneSettings[i].cssClass && this.setCssClass(r[i], this.paneSettings[i].cssClass), g(this.paneSettings[i]) || this.paneCollapsible(r[i], i)))
        }, t.prototype.expand = function(e) {
            this.collapsedOnchange(e), this.updatePaneSettings(e, !1)
        }, t.prototype.collapse = function(e) {
            this.isCollapsed(e), this.updatePaneSettings(e, !0)
        }, t.prototype.destroy = function() {
            if (!this.isDestroyed) {
                for (this.checkBlazor() || e.prototype.destroy.call(this), ye.remove(document, "touchstart click", this.onDocumentClick); this.element.attributes.length > 0;) this.element.removeAttribute(this.element.attributes[0].name);
                if (this.checkBlazor())
                    for (var t = this.element.children, i = t.length - 1; i >= 0; i--) wt(t[i]);
                else {
                    this.element.innerHTML = this.wrapper.innerHTML;
                    for (i = 0; i < this.wrapper.attributes.length; i++) this.element.setAttribute(this.wrapper.attributes[i].name, this.wrapper.attributes[i].value)
                }
                this.refreshing && (ut([this.element], ["e-control", "e-lib", "e-splitter"]), this.allBars = [], this.allPanes = []), this.restoreElem(), this.isReact && this.clearTemplate()
            }
        }, t.prototype.restoreElem = function() {
            if (this.templateElement.length > 0)
                for (var e = 0; e < this.templateElement.length; e++) this.templateElement[e].style.display = "none", document.body.appendChild(this.templateElement[e])
        }, t.prototype.addPaneClass = function(e) {
            return "Horizontal" === this.orientation ? ut([e], [ad, ld, "e-scrollable"]) : ut([e], [ad, hd, "e-scrollable"]), e
        }, t.prototype.removePaneOrders = function(e) {
            for (var t = document.querySelectorAll("." + e), i = 0; i < t.length; i++) t[i].style.removeProperty("order")
        }, t.prototype.setPaneOrder = function() {
            for (var e = 0; e < this.allPanes.length; e++) this.panesDimension(e, this.allPanes)
        }, t.prototype.removeSeparator = function() {
            for (var e = 0; e < this.allBars.length; e++) wt(this.allBars[e]);
            this.allBars = []
        }, t.prototype.updatePanes = function() {
            this.setPaneOrder(), this.removeSeparator(), this.addSeparator(this.element)
        }, t.prototype.addPane = function(e, t) {
            var i = this.createElement("div");
            i = this.addPaneClass(i), t = t > this.allPanes.length + 1 ? this.allPanes.length : t;
            var n = {
                size: g(e.size) ? "" : e.size,
                min: g(e.min) ? null : e.min,
                max: g(e.max) ? null : e.max,
                content: g(e.content) ? "" : e.content,
                resizable: !!g(e.resizable) || e.resizable,
                collapsible: !g(e.collapsible) && e.collapsible,
                collapsed: !g(e.collapsed) && e.collapsed,
                cssClass: g(e.cssClass) ? "" : e.cssClass
            };
            this.paneSettings.splice(t, 0, n), this.setProperties({
                paneSettings: this.paneSettings
            }, !0), "Horizontal" === this.orientation ? (this.element.insertBefore(i, this.element.querySelectorAll("." + ld)[t]), this.removePaneOrders(ld)) : (this.element.insertBefore(i, this.element.querySelectorAll("." + hd)[t]), this.removePaneOrders(hd)), this.allPanes.splice(t, 0, i), this.updatePanes(), this.setTemplate(this.paneSettings[t].content, i), this.setCssClass(this.allPanes[t], e.cssClass), this.allPanes[this.allPanes.length - 1].classList.remove(cd)
        }, t.prototype.removePane = function(e) {
            e = e > this.allPanes.length + 1 ? this.allPanes.length : e;
            var t = "Horizontal" === this.orientation ? ld : hd;
            g(this.element.querySelectorAll("." + t)[e]) || (wt(this.element.querySelectorAll("." + t)[e]), this.allPanes.splice(e, 1), this.removePaneOrders(t), this.updatePanes(), this.paneSettings.splice(e, 1), this.setProperties({
                paneSettings: this.paneSettings
            }, !0), this.allPanes.length > 0 && this.allPanes[this.allPanes.length - 1].classList.remove(cd))
        }, sd([zt("100%")], t.prototype, "height", void 0), sd([zt("100%")], t.prototype, "width", void 0), sd([Wt([], vd)], t.prototype, "paneSettings", void 0), sd([zt("Horizontal")], t.prototype, "orientation", void 0), sd([zt("")], t.prototype, "cssClass", void 0), sd([zt(!0)], t.prototype, "enabled", void 0), sd([zt(!0)], t.prototype, "enableHtmlSanitizer", void 0), sd([zt(null)], t.prototype, "separatorSize", void 0), sd([_t()], t.prototype, "beforeSanitizeHtml", void 0), sd([_t()], t.prototype, "created", void 0), sd([_t()], t.prototype, "resizeStart", void 0), sd([_t()], t.prototype, "resizing", void 0), sd([_t()], t.prototype, "resizeStop", void 0), sd([_t()], t.prototype, "beforeCollapse", void 0), sd([_t()], t.prototype, "beforeExpand", void 0), sd([_t()], t.prototype, "collapsed", void 0), sd([_t()], t.prototype, "expanded", void 0), t = sd([Gt], t)
    }(pi),
    wd = function() {
        function e(e) {
            this.parent = e, this.parent.on("destroy", this.destroy, this)
        }
        return e.prototype.renderSplitter = function() {
            var e = this;
            g(this.parent.toolbarModule) || g(this.parent.toolbarModule.element) || this.parent.toolbarModule.element.offsetHeight;
            var t = this.calculateSplitterPosition(this.parent.splitterSettings);
            this.parent.splitterElement = ct("div", {
                className: "e-gantt-splitter"
            }), this.parent.treeGridPane = ct("div", {
                className: "e-gantt-tree-grid-pane"
            }), this.parent.chartPane = ct("div", {
                className: "e-gantt-chart-pane"
            }), this.parent.splitterElement.appendChild(this.parent.treeGridPane), this.parent.splitterElement.appendChild(this.parent.chartPane), this.splitterObject = new bd({
                height: null,
                width: this.parent.ganttWidth.toString(),
                separatorSize: this.parent.splitterSettings.separatorSize,
                paneSettings: [{
                    resizable: !0,
                    size: t,
                    min: this.getSpliterPositionInPercentage(this.parent.splitterSettings.minimum)
                }, {
                    resizable: !0
                }],
                orientation: "Horizontal",
                resizeStart: function(t) {
                    var i = S() ? t.element.querySelectorAll(".e-pane")[0] : t.pane[0],
                        n = S() ? t.element.querySelectorAll(".e-pane")[1] : t.pane[1];
                    e.splitterPreviousPositionGrid = i.scrollWidth + 1 + "px", e.splitterPreviousPositionChart = n.scrollWidth + 1 + "px";
                    var r = new vn;
                    return e.parent.trigger("splitterResizeStart", t, (function(e) {
                        r.resolve(e)
                    })), r
                },
                resizing: function(t) {
                    e.parent.trigger("splitterResizing", t)
                },
                resizeStop: function(t) {
                    var i = new vn;
                    return e.parent.trigger("splitterResized", t, (function(t) {
                        !0 === t.cancel && (e.splitterObject.paneSettings[0].size = null, e.splitterObject.paneSettings[0].size = e.getSpliterPositionInPercentage(e.splitterPreviousPositionGrid), e.splitterObject.paneSettings[1].size = null, e.splitterObject.paneSettings[1].size = e.getSpliterPositionInPercentage(e.splitterPreviousPositionChart)), i.resolve(t)
                    })), i
                }
            }), this.parent.element.appendChild(this.parent.splitterElement), this.splitterObject.appendTo(this.parent.splitterElement)
        }, e.prototype.calculateSplitterPosition = function(e, t) {
            return "Grid" === e.view ? "100%" : "Chart" === e.view ? "0%" : g(e.position) || "" === e.position ? !g(e.columnIndex) && e.columnIndex >= 0 ? t ? this.getSpliterPositionInPercentage(this.getTotalColumnWidthByIndex(e.columnIndex).toString() + "px") : this.getSpliterPositionInPercentage(150 * e.columnIndex + "px") : this.getSpliterPositionInPercentage("250px") : this.getSpliterPositionInPercentage(e.position)
        }, e.prototype.getSpliterPositionInPercentage = function(e) {
            var t = g(e) || "" === e ? null : e;
            if (!g(t))
                if (-1 !== e.indexOf("px")) {
                    var i = parseInt(e, 10);
                    t = i / this.parent.ganttWidth * 100 <= 100 ? i / this.parent.ganttWidth * 100 + "%" : "25%"
                } else t = -1 === e.indexOf("%") ? e + "%" : e;
            return t
        }, e.prototype.getTotalColumnWidthByIndex = function(e) {
            var t = 0,
                i = this.parent.treeGrid.element.querySelectorAll(".e-headercell");
            e = i.length > e ? e : i.length;
            for (var n = 0; n < e; n++) t += i[n].offsetWidth;
            return t
        }, e.prototype.updateSplitterPosition = function() {
            this.splitterObject.separatorSize = this.parent.splitterSettings.separatorSize >= 4 ? this.parent.splitterSettings.separatorSize : 4;
            var e = this.calculateSplitterPosition(this.parent.splitterSettings, !0);
            this.splitterObject.paneSettings[0].min = this.getSpliterPositionInPercentage(this.parent.splitterSettings.minimum), this.splitterObject.dataBind(), this.splitterObject.paneSettings[0].size = e
        }, e.prototype.triggerCustomResizedEvent = function() {
            var e = this.splitterObject.element.querySelectorAll(".e-pane")[0],
                t = this.splitterObject.element.querySelectorAll(".e-pane")[1],
                i = {
                    event: null,
                    element: this.splitterObject.element,
                    pane: [e, t],
                    index: [0, 1],
                    separator: this.splitterObject.element.querySelector(".e-split-bar"),
                    paneSize: [e.offsetWidth, t.offsetWidth]
                };
            this.parent.trigger("splitterResized", i), !0 === i.cancel && (this.splitterObject.paneSettings[0].size = this.getSpliterPositionInPercentage(this.splitterPreviousPositionGrid), this.splitterObject.paneSettings[1].size = this.getSpliterPositionInPercentage(this.splitterPreviousPositionChart))
        }, e.prototype.destroy = function() {
            this.splitterObject.destroy(), this.parent.off("destroy", this.destroy)
        }, e
    }(),
    Cd = function() {
        function e(e) {
            this.parent = e, this.createTooltip(), this.parent.on("destroy", this.destroy, this)
        }
        return e.prototype.createTooltip = function() {
            this.toolTipObj = new br, this.toolTipObj.target = ".e-header-cell-label, .e-gantt-child-taskbar,.e-gantt-parent-taskbar, .e-gantt-milestone, .e-gantt-unscheduled-taskbar.e-event-markers, .e-baseline-bar, .e-event-markers,.e-connector-line-container, .e-indicator-span, .e-notes-info, .e-gantt-manualparent-milestone,.e-taskbar-left-resizer, .e-taskbar-right-resizer, .e-baseline-gantt-milestone, .e-gantt-manualparenttaskbar", this.toolTipObj.position = "BottomCenter", this.toolTipObj.openDelay = 700, this.toolTipObj.enableHtmlSanitizer = !1, this.toolTipObj.cssClass = "e-gantt-tooltip", this.toolTipObj.animation = {
                open: {
                    effect: "None",
                    delay: 0
                },
                close: {
                    effect: "None",
                    delay: 0
                }
            }, this.toolTipObj.afterOpen = this.updateTooltipPosition.bind(this), this.toolTipObj.showTipPointer = !1, this.toolTipObj.beforeRender = this.tooltipBeforeRender.bind(this), this.toolTipObj.afterClose = this.tooltipCloseHandler.bind(this), this.toolTipObj.isStringTemplate = !0, this.toolTipObj.appendTo(this.parent.element)
        }, e.prototype.tooltipBeforeRender = function(e) {
            var t, i, n = this.parent;
            n.isOnEdit && (e.cancel = !0), t = g(Tt(e.target, "div.e-taskbar-main-container")) ? Bl(e.target, "e-chart-row-cell") : e.target;
            var r = {
                data: {},
                args: e,
                cancel: !1,
                content: ""
            };
            if (e.target.classList.contains("e-header-cell-label")) n.timelineSettings.showTooltip ? r.content = this.toolTipObj.content = n.tooltipModule.getTooltipContent("timeline", i, n, e) : e.cancel = !0;
            else if (n.tooltipSettings.showTooltip)
                if (t && (r.data = n.ganttChartModule.getRecordByTaskBar(t), i = r.data), e.target.classList.contains("e-gantt-child-taskbar") || e.target.classList.contains("e-gantt-parent-taskbar") || e.target.classList.contains("e-gantt-milestone") || e.target.classList.contains("e-gantt-unscheduled-taskbar") || e.target.classList.contains("e-taskbar-left-resizer") || e.target.classList.contains("e-taskbar-right-resizer")) {
                    var o = void 0;
                    n.tooltipSettings.taskbar && (o = n.tooltipModule.templateCompiler(n.tooltipSettings.taskbar, n, i, "TooltipTaskbarTemplate")), r.content = this.toolTipObj.content = o ? o[0] : n.tooltipModule.getTooltipContent(i.ganttProperties.isMilestone ? "milestone" : "taskbar", i, n, e)
                } else if (e.target.classList.contains("e-baseline-bar") || e.target.classList.contains("e-baseline-gantt-milestone")) {
                var s = void 0;
                n.tooltipSettings.baseline && (s = n.tooltipModule.templateCompiler(n.tooltipSettings.baseline, n, i, "TooltipBaselineTemplate")), r.content = this.toolTipObj.content = s ? s[0] : n.tooltipModule.getTooltipContent(i.ganttProperties.isMilestone ? "milestone" : "baseline", i, n, e)
            } else if (e.target.classList.contains("e-event-markers")) r.content = this.toolTipObj.content = n.tooltipModule.getTooltipContent("marker", i, n, e);
            else if (e.target.classList.contains("e-connector-line-container")) {
                var a = void 0;
                n.tooltipModule.predecessorTooltipData = n.tooltipModule.getPredecessorTooltipData(e), r.data = this.predecessorTooltipData, n.tooltipSettings.connectorLine && (a = n.tooltipModule.templateCompiler(n.tooltipSettings.connectorLine, n, n.tooltipModule.predecessorTooltipData, "TooltipConnectorLineTemplate")), r.content = this.toolTipObj.content = a ? a[0] : n.tooltipModule.getTooltipContent("connectorLine", i, n, e)
            } else if (e.target.classList.contains("e-indicator-span")) r.content = this.toolTipObj.content = n.tooltipModule.getTooltipContent("indicator", i, n, e), g(r.content) && (e.cancel = !0);
            else if (e.target.classList.contains("e-notes-info")) {
                var l = this.parent.ganttChartModule.getRecordByTarget(e.event);
                r.content = this.toolTipObj.content = l.ganttProperties.notes, g(r.content) && (e.cancel = !0)
            } else e.target.classList.contains("e-gantt-manualparenttaskbar") ? (r.content = this.toolTipObj.content = n.tooltipModule.getTooltipContent("manualtaskbar", i, n, e), g(r.content) && (e.cancel = !0)) : e.target.classList.contains("e-gantt-manualparent-milestone") && (r.content = this.toolTipObj.content = n.tooltipModule.getTooltipContent("manualmilestone", i, n, e), g(r.content) && (e.cancel = !0));
            else e.cancel = !0;
            if (!1 === e.cancel) {
                var h = new vn;
                return n.trigger("beforeTooltipRender", r, (function(t) {
                    h.resolve(t), t.cancel && (e.cancel = !0)
                })), this.parent.isAdaptive || "mouseover" !== e.event.type || (this.currentTarget = e.target, ye.add(this.currentTarget, "mousemove", this.mouseMoveHandler.bind(this))), this.parent.renderTemplates(), h
            }
        }, e.prototype.tooltipCloseHandler = function(e) {
            this.tooltipMouseEvent = null, this.parent.isAdaptive || ye.remove(this.currentTarget, "mousemove", this.mouseMoveHandler), this.currentTarget = null
        }, e.prototype.mouseMoveHandler = function(e) {
            this.tooltipMouseEvent = e
        }, e.prototype.updateTooltipPosition = function(e) {
            if (!g(this.tooltipMouseEvent) && !e.target.classList.contains("e-notes-info")) {
                var t = this.getPointorPosition(this.tooltipMouseEvent),
                    i = this.parent.getOffsetRect(this.parent.chartPane),
                    n = i.top + this.parent.chartPane.offsetHeight,
                    r = i.left + this.parent.chartPane.offsetWidth,
                    o = t.x,
                    s = t.y,
                    a = !1;
                r < o + e.element.offsetWidth + 20 ? o = o - e.element.offsetWidth - 10 : o += 10, n < s + e.element.offsetHeight + 20 ? s = s - e.element.offsetHeight - 10 : (a = !0, s += 10), window.innerHeight < e.element.offsetHeight + s && (s = s - e.element.offsetHeight - (a ? 20 : 10)), e.element.style.left = o + "px", e.element.style.top = s + "px"
            }
        }, e.prototype.getPointorPosition = function(e) {
            var t, i;
            return g(a("pageX", e)) && g(a("pageY", e)) ? g(a("clientX", e)) && g(a("clientY", e)) || (t = a("clientX", e) + document.body.scrollLeft + document.documentElement.scrollLeft, i = a("clientY", e) + document.body.scrollTop + document.documentElement.scrollTop) : (t = a("pageX", e), i = a("pageY", e)), {
                x: t,
                y: i
            }
        }, e.prototype.getTooltipContent = function(e, t, i, n) {
            var r, o, s;
            switch (t && (s = g((o = t.ganttProperties).taskName) ? "" : '<tr class = "e-gantt-tooltip-rowcell"><td colspan="3">' + o.taskName + "</td></tr>"), e) {
                case "milestone":
                    r = '<table class = "e-gantt-tooltiptable"><tbody>' + s + (g(o.startDate) ? "" : '<tr><td class = "e-gantt-tooltip-label"> Date</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(o.startDate, this.parent.getDateFormat()) + "</td></tr>") + "</tbody></table>";
                    break;
                case "taskbar":
                    var a = !(t.hasChildRecords && !o.isAutoSchedule);
                    r = '<table class = "e-gantt-tooltiptable"><tbody>' + s + (o.startDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant(a ? "startDate" : "subTasksStartDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value"> ' + this.parent.getFormatedDate(a ? o.startDate : o.autoStartDate, this.parent.getDateFormat()) + "</td></tr>" : "") + (o.endDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant(a ? "endDate" : "subTasksEndDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(a ? o.endDate : o.autoEndDate, this.parent.getDateFormat()) + "</td></tr>" : "") + (g(o.duration) ? "" : '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("duration") + '</td><td>:</td><td class = "e-gantt-tooltip-value"> ' + this.parent.getDurationString(a ? o.duration : o.autoDuration, o.durationUnit) + "</td></tr>") + (g(o.progress) ? "" : '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("progress") + "</td><td>:</td><td>" + o.progress + "</td></tr>") + "</tbody></table>";
                    break;
                case "baseline":
                    r = '<table class = "e-gantt-tooltiptable"><tbody>' + s + '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("baselineStartDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(o.baselineStartDate, this.parent.getDateFormat()) + '</td></tr><tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("baselineEndDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(o.baselineEndDate, this.parent.getDateFormat()) + "</td></tr></tbody></table>";
                    break;
                case "marker":
                    var l = i.tooltipModule.getMarkerTooltipData(n),
                        h = l.label ? l.label : "";
                    r = '<table class = "e-gantt-tooltiptable"><tbody><tr><td>' + this.parent.getFormatedDate(this.parent.dateValidationModule.getDateFromFormat(l.day), this.parent.getDateFormat()) + "</td></tr><tr><td>" + h + "</td></tr></tbody></table>";
                    break;
                case "connectorLine":
                    r = '<table class = "e-gantt-tooltiptable"><tbody><tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("from") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + i.tooltipModule.predecessorTooltipData.fromName + " (" + i.tooltipModule.predecessorTooltipData.fromId + ')</td></tr><tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("to") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + i.tooltipModule.predecessorTooltipData.toName + " (" + i.tooltipModule.predecessorTooltipData.toId + ')</td></tr><tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("taskLink") + '</td><td>:</td><td class = "e-gantt-tooltip-value"> ' + i.tooltipModule.predecessorTooltipData.linkText + '</td></tr><tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("lag") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + i.tooltipModule.predecessorTooltipData.offsetString + "</td></tr></tbody></table>";
                    break;
                case "indicator":
                    n.target.title.length && (r = '<table class = "e-gantt-tooltiptable"><tbody><tr>' + n.target.title + "</tr></tbody></table>");
                    break;
                case "timeline":
                    r = '<table class = "e-gantt-tooltiptable"><tbody><tr>' + n.target.title + "</tr></tbody></table>";
                    break;
                case "manualtaskbar":
                    var p = o.autoStartDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("subTasksStartDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value"> ' + this.parent.getFormatedDate(o.autoStartDate, this.parent.getDateFormat()) + "</td></tr>" : "",
                        d = o.autoEndDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("subTasksEndDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(o.autoEndDate, this.parent.getDateFormat()) + "</td></tr>" : "",
                        c = g(o.duration) ? "" : '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("duration") + '</td><td>:</td><td class = "e-gantt-tooltip-value"> ' + this.parent.getDurationString(o.duration, o.durationUnit) + "</td></tr>";
                    r = '<table class = "e-gantt-tooltiptable"><tbody>' + s + (o.startDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("startDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value"> ' + this.parent.getFormatedDate(o.startDate, this.parent.getDateFormat()) + "</td></tr>" : "") + p + (o.endDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("endDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(o.endDate, this.parent.getDateFormat()) + "</td></tr>" : "") + d + c + "</tbody></table>";
                    break;
                case "manualmilestone":
                    var u = o.autoStartDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("subTasksStartDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value"> ' + this.parent.getFormatedDate(o.autoStartDate, this.parent.getDateFormat()) + "</td></tr>" : "",
                        f = o.autoEndDate ? '<tr><td class = "e-gantt-tooltip-label">' + this.parent.localeObj.getConstant("subTasksEndDate") + '</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(o.autoEndDate, this.parent.getDateFormat()) + "</td></tr>" : "";
                    r = '<table class = "e-gantt-tooltiptable"><tbody>' + s + ('<tr><td class = "e-gantt-tooltip-label"> Date</td><td>:</td><td class = "e-gantt-tooltip-value">' + this.parent.getFormatedDate(o.startDate, this.parent.getDateFormat()) + "</tr>") + u + f + "</tbody></table>"
            }
            return r
        }, e.prototype.getMarkerTooltipData = function(e) {
            var t = e.target.id.match(/\d+/g);
            return this.parent.eventMarkers[Number(t)]
        }, e.prototype.getPredecessorTooltipData = function(e) {
            var t, i, n = e.target.parentElement.id.match(/\d+/g);
            "ResourceView" === this.parent.viewType ? (t = this.parent.flatData[this.parent.getTaskIds().indexOf("T" + n[0])], i = this.parent.flatData[this.parent.getTaskIds().indexOf("T" + n[1])]) : (t = this.parent.flatData[this.parent.ids.indexOf(n[0])], i = this.parent.flatData[this.parent.ids.indexOf(n[1])]);
            var r = t.ganttProperties.predecessor.filter((function(e) {
                return e.to === n[1]
            }));
            return {
                fromId: "ResourceView" === this.parent.viewType ? t.ganttProperties.taskId : t.ganttProperties.rowUniqueID,
                toId: "ResourceView" === this.parent.viewType ? i.ganttProperties.taskId : i.ganttProperties.rowUniqueID,
                fromName: t.ganttProperties.taskName,
                toName: i.ganttProperties.taskName,
                linkType: r[0].type,
                linkText: this.parent.getPredecessorTextValue(r[0].type),
                offset: r[0].offset,
                offsetUnit: r[0].offsetUnit,
                offsetString: this.parent.getDurationString(r[0].offset, r[0].offsetUnit)
            }
        }, e.prototype.templateCompiler = function(e, t, i, n) {
            var r = t.chartRowsModule.templateCompiler(e),
                o = t.chartRowsModule.getTemplateID(n);
            return r(u({
                index: 0
            }, i), t, n, o, !0)
        }, e.prototype.destroy = function() {
            this.toolTipObj.destroy()
        }, e
    }(),
    Sd = function() {
        function e(e) {
            this.parent = e, this.activeElement = null, this.previousActiveElement = null
        }
        return e.prototype.getActiveElement = function(e) {
            return e ? this.previousActiveElement : this.activeElement
        }, e.prototype.setActiveElement = function(e) {
            this.previousActiveElement = this.activeElement, this.activeElement = e
        }, e.prototype.onKeyPress = function(e) {
            var t = this.parent,
                i = t.getExpandedRecords(t.currentViewData),
                n = this.parent.focusModule.getActiveElement();
            if ("home" !== e.action && "end" !== e.action && "downArrow" !== e.action && "upArrow" !== e.action && "delete" !== e.action && "rightArrow" !== e.action && "leftArrow" !== e.action && "focusTask" !== e.action && "focusSearch" !== e.action && "expandAll" !== e.action && "collapseAll" !== e.action || g(t.editModule) || g(t.editModule.cellEditModule) || !0 !== t.editModule.cellEditModule.isCellEdit) switch (t.isAdaptive && ("addRowDialog" !== e.action && "editRowDialog" !== e.action && "delete" !== e.action && "addRow" !== e.action || t.selectionModule && "Multiple" === t.selectionSettings.type && (t.selectionModule.hidePopUp(), document.getElementsByClassName("e-gridpopup")[0].style.display = "none")), e.action) {
                case "home":
                    if (t.selectionModule && "Cell" !== t.selectionSettings.mode) {
                        if (0 === t.selectedRowIndex) return;
                        t.selectionModule.selectRow(0, !1, !0)
                    }
                    break;
                case "end":
                    if (t.selectionModule && "Cell" !== t.selectionSettings.mode) {
                        var r = i[i.length - 1];
                        if (t.selectedRowIndex === t.currentViewData.indexOf(r)) return;
                        t.selectionModule.selectRow(t.currentViewData.indexOf(r), !1, !0)
                    }
                    break;
                case "downArrow":
                case "upArrow":
                    var o = t.element.querySelector("#" + t.element.id + "_searchbar");
                    o && o.parentElement.classList.contains("e-input-focus") && t.selectionModule.clearSelection(), t.element.classList.contains("e-scroll-disabled") || (this.upDownKeyNavigate(e), g(n) || g(n.closest(".e-chart-row")) || t.ganttChartModule.manageFocus(this.getActiveElement(), "remove", !0));
                    break;
                case "expandAll":
                    t.ganttChartModule.expandCollapseAll("expand");
                    break;
                case "collapseAll":
                    t.ganttChartModule.expandCollapseAll("collapse");
                    break;
                case "expandRow":
                case "collapseRow":
                    this.expandCollapseKey(e);
                    break;
                case "saveRequest":
                    if (!g(t.editModule) && !g(t.editModule.cellEditModule) && t.editModule.cellEditModule.isCellEdit) {
                        var s = t.editModule.cellEditModule.editedColumn;
                        if (s.field === t.columnMapping.duration && !g(s.edit) && !g(s.edit.read)) {
                            var l = e.target.ej2_instances[0],
                                h = e.target.value,
                                p = t.currentViewData[t.selectedRowIndex].ganttProperties;
                            s.field === t.columnMapping.duration && h !== (g(s.edit) || g(s.edit.read) ? g(s.valueAccessor) ? t.dataOperation.getDurationString(p.duration, p.durationUnit) : s.valueAccessor(t.columnMapping.duration, t.editedRecords, s) : s.edit.read()).toString() && (l.value = h, l.dataBind())
                        }
                        if (t.editModule.dialogModule.dialogObj && a("dialogOpen", t.editModule.dialogModule.dialogObj)) return;
                        t.editModule.cellEditModule.isCellEdit = !1, t.treeGrid.grid.saveCell(), t.element.querySelector(".e-treegrid").focus()
                    }
                    if (!g(this.parent.onTaskbarClick) && !g(n) && !g(n.closest(".e-chart-row"))) {
                        var d = e.target,
                            c = n.querySelector(".e-gantt-parent-taskbar,.e-gantt-child-taskbar,.e-gantt-milestone");
                        c && this.parent.ganttChartModule.onTaskbarClick(e, d, c)
                    }
                    break;
                case "cancelRequest":
                    g(t.editModule) || g(t.editModule.cellEditModule) || (t.editModule.cellEditModule.isCellEdit = !1, g(t.toolbarModule) || t.toolbarModule.refreshToolbarItems());
                    break;
                case "addRow":
                    e.preventDefault(), t.element.querySelector(".e-gantt-chart").focus(), t.addRecord();
                    break;
                case "addRowDialog":
                    if (e.preventDefault(), t.editModule && t.editModule.dialogModule && t.editSettings.allowAdding) {
                        if (t.editModule.dialogModule.dialogObj && a("dialogOpen", t.editModule.dialogModule.dialogObj)) return;
                        t.editModule.dialogModule.openAddDialog()
                    }
                    break;
                case "editRowDialog":
                    if (e.preventDefault(), t.element.querySelector(".e-treegrid").focus(), t.editModule && t.editModule.dialogModule && t.editSettings.allowEditing) {
                        if (t.editModule.dialogModule.dialogObj && a("dialogOpen", t.editModule.dialogModule.dialogObj)) return;
                        t.editModule.dialogModule.openToolbarEditDialog()
                    }
                    break;
                case "delete":
                    t.selectionModule && t.editModule && (!t.editSettings.allowTaskbarEditing || t.editSettings.allowTaskbarEditing && !t.editModule.taskbarEditModule.touchEdit) && ("Cell" !== t.selectionSettings.mode && t.selectionModule.selectedRowIndexes.length || "Cell" === t.selectionSettings.mode && t.selectionModule.getSelectedRowCellIndexes().length) && t.editModule.startDeleteAction();
                    break;
                case "focusTask":
                    e.preventDefault();
                    var u = void 0;
                    if (t.selectionModule) {
                        var f = t.currentViewData;
                        if ("Cell" === t.selectionSettings.mode || g(f[t.selectedRowIndex])) {
                            if ("Cell" === t.selectionSettings.mode && t.selectionModule.getSelectedRowCellIndexes().length > 0) {
                                var m = t.selectionModule.getSelectedRowCellIndexes();
                                u = f[m[m.length - 1].rowIndex].ganttProperties.rowUniqueID
                            }
                        } else u = t.currentViewData[t.selectedRowIndex].ganttProperties.rowUniqueID
                    }
                    u && t.scrollToTask(u.toString());
                    break;
                case "focusSearch":
                    if (t.element.querySelector("#" + t.element.id + "_searchbar")) {
                        var y = t.element.querySelector("#" + t.element.id + "_searchbar");
                        y.setAttribute("tabIndex", "-1"), y.focus()
                    }
                    break;
                case "tab":
                case "shiftTab":
                    t.element.classList.contains("e-scroll-disabled") || t.ganttChartModule.onTabAction(e);
                    break;
                case "contextMenu":
                    var v = document.getElementById(this.parent.element.id + "_contextmenu").ej2_instances[0],
                        b = this.parent.getOffsetRect(e.target),
                        w = b.top + b.height / 2,
                        C = b.left + b.width / 2;
                    this.setActiveElement(e.target), v.open(w, C), e.preventDefault();
                    break;
                default:
                    var S = {
                        requestType: "keyPressed",
                        action: e.action,
                        keyEvent: e
                    };
                    t.trigger("actionComplete", S)
            }
        }, e.prototype.upDownKeyNavigate = function(e) {
            e.preventDefault();
            var t = this.parent,
                i = t.getExpandedRecords(t.currentViewData);
            if (t.selectionModule) {
                if ("Cell" !== t.selectionSettings.mode && -1 !== t.selectedRowIndex) {
                    var n = t.currentViewData[t.selectedRowIndex],
                        r = this.parent.ganttChartModule.focusedRowIndex,
                        o = r > -1 ? r : i.indexOf(n),
                        s = "downArrow" === e.action ? i[o + 1] : i[o - 1];
                    t.selectionModule.selectRow(t.currentViewData.indexOf(s), !1, !0)
                } else if ("Cell" === t.selectionSettings.mode && t.selectionModule.getSelectedRowCellIndexes().length > 0) {
                    var a = t.selectionModule.getSelectedRowCellIndexes(),
                        l = a[a.length - 1],
                        h = l.cellIndexes[l.cellIndexes.length - 1],
                        p = (n = t.currentViewData[l.rowIndex], o = i.indexOf(n), s = "downArrow" === e.action ? i[o + 1] : i[o - 1], {
                            rowIndex: t.currentViewData.indexOf(s),
                            cellIndex: h
                        });
                    t.selectionModule.selectCell(p)
                }
                this.parent.ganttChartModule.focusedRowIndex = this.parent.selectedRowIndex
            }
        }, e.prototype.expandCollapseKey = function(e) {
            var t = this.parent;
            if (t.selectionModule && -1 !== t.selectedRowIndex) {
                var i = void 0;
                if ("Cell" !== t.selectionSettings.mode) i = t.selectedRowIndex;
                else if ("Cell" === t.selectionSettings.mode && t.selectionModule.getSelectedRowCellIndexes().length > 0) {
                    var n = t.selectionModule.getSelectedRowCellIndexes();
                    i = n[n.length - 1].rowIndex
                }
                "expandRow" === e.action ? t.expandByIndex(i) : t.collapseByIndex(i)
            }
        }, e
    }(),
    xd = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    kd = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    Td = function(e) {
        function t(t, i) {
            var n = e.call(this, t, i) || this;
            return n.isCancelled = !1, n.previousRecords = {}, n.editedRecords = [], n.isOnEdit = !1, n.isOnDelete = !1, n.isConnectorLineUpdate = !1, n.staticSelectedRowIndex = -1, n.needsID = !0, n.showActiveElement = !0, n.enableHeaderFocus = !0, n.isTreeGridRendered = !1, n.isGanttChartRendered = !1, n
        }
        return xd(t, e), t.prototype.getModuleName = function() {
            return "gantt"
        }, t.prototype.preRender = function() {
            this.initProperties()
        }, t.prototype.initProperties = function() {
            this.globalize = new ee(this.locale), this.isAdaptive = me.isDevice, this.flatData = [], this.currentViewData = [], this.ids = [], this.ganttColumns = [], this.localeObj = new ki(this.getModuleName(), this.getDefaultLocale(), this.locale), this.dataOperation = new Ul(this), this.nonWorkingHours = [], this.nonWorkingTimeRanges = [], this.workingTimeRanges = [], this.defaultEndTime = null, this.defaultStartTime = null, this.durationUnitTexts = {
                days: "days",
                hours: "hours",
                minutes: "minutes",
                day: "day",
                hour: "hour",
                minute: "minute"
            }, this.durationUnitEditText = {
                minute: ["m", "min", "minute", "minutes"],
                hour: ["h", "hr", "hour", "hours"],
                day: ["d", "dy", "day", "days"]
            }, this.perDayWidth = null, this.isMileStoneEdited = !1, this.chartVerticalLineContainer = null, this.updatedConnectorLineCollection = [], this.connectorLineIds = [], this.predecessorsCollection = [], this.isInPredecessorValidation = this.enablePredecessorValidation, this.isValidationEnabled = !0, this.isLoad = !0, this.editedTaskBarItem = null, this.validationDialogElement = null, this.currentEditedArgs = {}, this.dialogValidateMode = {
                respectLink: !1,
                removeLink: !1,
                preserveLinkWithEditing: !0
            }, this.secondsPerDay = this.dataOperation.getSecondsPerDay(), this.nonWorkingDayIndex = [], this.dataOperation.getNonWorkingDayIndex(), this.columnMapping = {}, this.controlId = this.element.id, this.cloneProjectStartDate = null, this.cloneProjectEndDate = null, this.totalHolidayDates = this.dataOperation.getHolidayDates(), this.ganttChartModule = new $l(this), this.timelineModule = new th(this), this.chartRowsModule = new id(this), this.treeGridModule = new dp(this), this.dateValidationModule = new _l(this), this.predecessorModule = new nd(this), this.connectorLineModule = new rd(this), this.splitterModule = new wd(this), this.tooltipModule = new Cd(this), this.keyConfig = {
                home: "home",
                end: "end",
                downArrow: "downarrow",
                upArrow: "uparrow",
                collapseAll: "ctrl+uparrow",
                expandAll: "ctrl+downarrow",
                collapseRow: "ctrl+shift+uparrow",
                expandRow: "ctrl+shift+downarrow",
                saveRequest: "13",
                cancelRequest: "27",
                addRow: "insert",
                addRowDialog: "ctrl+insert",
                editRowDialog: "ctrl+f2",
                delete: "delete",
                tab: "tab",
                shiftTab: "shift+tab",
                focusTask: "shift+f5",
                indentLevel: "shift+leftarrow",
                outdentLevel: "shift+rightarrow",
                focusSearch: "ctrl+shift+70",
                contextMenu: "shift+F10"
            }, this.focusModule = new Sd(this), this.zoomingLevels = this.getZoomingLevels(), this.resourceFieldsMapping(), g(this.resourceFields.unit) && (this.resourceFields.unit = "unit"), g(this.taskFields.work) || (this.taskType = "FixedWork"), this.taskIds = []
        }, t.prototype.getDateFormat = function() {
            return g(this.dateFormat) ? S() ? this.globalize.getDatePattern({
                skeleton: "d"
            }) : this.globalize.getDatePattern({
                skeleton: "yMd"
            }) : this.dateFormat
        }, t.prototype.resourceFieldsMapping = function() {
            var e = this.resourceFields;
            e.id = g(e.id) ? this.resourceIDMapping : e.id, e.name = g(e.name) ? this.resourceNameMapping : e.name
        }, t.prototype.validateDimentionValue = function(e) {
            return g(e) ? null : "string" == typeof e && "auto" !== e && -1 === e.indexOf("%") ? -1 === e.indexOf("px") ? e + "px" : e : "number" == typeof e ? e + "px" : e.toString()
        }, t.prototype.calculateDimensions = function() {
            var e = this.validateDimentionValue(this.height),
                t = this.validateDimentionValue(this.width);
            g(this.width) || "string" != typeof this.width || -1 === this.width.indexOf("%") || (t = this.width);
            var i = this.element.style.height,
                n = this.element.style.width;
            t && (this.element.style.width = t), e && (this.element.style.height = e), e || i || (this.element.style.height = "auto"), t || n || (this.element.style.width = "auto"), this.ganttHeight = this.element.offsetHeight, this.ganttWidth = this.element.offsetWidth
        }, t.prototype.render = function() {
            this.isReact && (this.treeGrid.grid.isReact = !0), Ni({
                target: this.element
            }, this.createElement), this.trigger("load", {}), this.element.classList.add("e-gantt"), this.isAdaptive ? this.element.classList.add("e-device") : this.element.classList.remove("e-device"), this.calculateDimensions(), g(this.toolbarModule) || this.renderToolbar(), this.splitterModule.renderSplitter(), this.notify("renderPanels", null), this.showSpinner(), this.dataOperation.checkDataBinding()
        }, t.prototype.showSpinner = function() {
            Xi(this.element)
        }, t.prototype.hideSpinner = function() {
            Ji(this.element)
        }, t.prototype.renderGantt = function(e) {
            this.timelineModule.processTimelineUnit(), this.timelineModule.calculateZoomingLevelsPerDayWidth(), this.predecessorModule && this.taskFields.dependency && (this.predecessorModule.updatePredecessors(), this.isInPredecessorValidation && this.predecessorModule.updatedRecordsDateByPredecessor()), this.dataOperation.calculateProjectDates(), this.timelineModule.validateTimelineProp(), e ? (this.updateProjectDates(this.cloneProjectStartDate, this.cloneProjectEndDate, this.isTimelineRoundOff), this.dataOperation.updateGanttData(), this.treeGrid.dataSource = this.flatData) : (this.dataOperation.updateGanttData(), this.treeGridPane.classList.remove("e-temp-content"), Ct(this.treeGridPane.querySelector(".e-gantt-temp-header")), this.notify("dataReady", {}), this.enableContextMenu && this.notify("initiate-contextMenu", {}), this.renderTreeGrid(), this.wireEvents(), this.notify("initPredessorDialog", {})), this.splitterModule.updateSplitterPosition(), "Vertical" !== this.gridLines && "Both" !== this.gridLines || this.renderChartVerticalLines()
        }, t.prototype.wireEvents = function() {
            this.allowKeyboard && (this.keyboardModule = new xi(this.element, {
                keyAction: this.keyActionHandler.bind(this),
                keyConfigs: this.keyConfig,
                eventName: "keydown"
            }))
        }, t.prototype.keyActionHandler = function(e) {
            this.focusModule.onKeyPress(e)
        }, t.prototype.renderToolbar = function() {
            g(this.toolbarModule) || (this.toolbarModule.renderToolbar(), this.toolbarModule.refreshToolbarItems())
        }, t.prototype.renderTreeGrid = function() {
            this.treeGridModule.renderTreeGrid()
        }, t.prototype.updateCurrentViewData = function() {
            if (S() && 0 !== this.flatData.length) {
                var e = this.treeGrid.getCurrentViewRecords().slice();
                this.currentViewData = [];
                for (var t = 0; t < e.length; t++) this.currentViewData.push(this.getTaskByUniqueID(e[t].uniqueID));
                this.treeGrid.grid.currentViewData = this.currentViewData
            } else this.currentViewData = this.treeGrid.getCurrentViewRecords().slice()
        }, t.prototype.getRecordFromFlatdata = function(e) {
            for (var t = [], i = 0; i < e.length; i++) t.push(this.getTaskByUniqueID(e[i].uniqueID));
            return t
        }, t.prototype.updateContentHeight = function() {
            var e = this.getExpandedRecords(this.currentViewData);
            this.contentHeight = e.length * this.rowHeight
        }, t.prototype.getExpandStatus = function(e) {
            var t = this.getParentTask(e.parentItem);
            return !!g(t) || !1 !== t.expanded && (!t.parentItem || !1 !== this.getParentTask(t.parentItem).expanded && this.getExpandStatus(this.getParentTask(t.parentItem)))
        }, t.prototype.getExpandedRecords = function(e) {
            var t = this;
            return e.filter((function(e) {
                return !0 === t.getExpandStatus(e)
            }))
        }, t.prototype.getZoomingLevels = function() {
            return [{
                topTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 50
                },
                bottomTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 10
                },
                timelineUnitSize: 99,
                level: 0,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 20
                },
                bottomTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 5
                },
                timelineUnitSize: 99,
                level: 1,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 5
                },
                bottomTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 1
                },
                timelineUnitSize: 99,
                level: 2,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Year",
                    format: "MMM, yy",
                    count: 1
                },
                bottomTier: {
                    unit: "Month",
                    formatter: this.displayHalfValue,
                    count: 6
                },
                timelineUnitSize: 66,
                level: 3,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Year",
                    format: "MMM, yy",
                    count: 1
                },
                bottomTier: {
                    unit: "Month",
                    formatter: this.displayHalfValue,
                    count: 6
                },
                timelineUnitSize: 99,
                level: 4,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Year",
                    format: "MMM, yy",
                    count: 1
                },
                bottomTier: {
                    unit: "Month",
                    formatter: this.displayQuarterValue,
                    count: 3
                },
                timelineUnitSize: 66,
                level: 5,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Month",
                    formatter: this.displayQuarterValue,
                    count: 3
                },
                timelineUnitSize: 99,
                level: 6,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Year",
                    format: "yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Month",
                    format: "MMM yyyy",
                    count: 1
                },
                timelineUnitSize: 99,
                level: 7,
                timelineViewMode: "Year",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Month",
                    format: "MMM, yy",
                    count: 1
                },
                bottomTier: {
                    unit: "Week",
                    format: "dd",
                    count: 1
                },
                timelineUnitSize: 33,
                level: 8,
                timelineViewMode: "Month",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Month",
                    format: "MMM, yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Week",
                    format: "dd MMM",
                    count: 1
                },
                timelineUnitSize: 66,
                level: 9,
                timelineViewMode: "Month",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Month",
                    format: "MMM, yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Week",
                    format: "dd MMM",
                    count: 1
                },
                timelineUnitSize: 99,
                level: 10,
                timelineViewMode: "Month",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Week",
                    format: "MMM dd, yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Day",
                    format: "d",
                    count: 1
                },
                timelineUnitSize: 33,
                level: 11,
                timelineViewMode: "Week",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Week",
                    format: "MMM dd, yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Day",
                    format: "d",
                    count: 1
                },
                timelineUnitSize: 66,
                level: 12,
                timelineViewMode: "Week",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Week",
                    format: "MMM dd, yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Day",
                    format: "d",
                    count: 1
                },
                timelineUnitSize: 99,
                level: 13,
                timelineViewMode: "Week",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 12
                },
                timelineUnitSize: 66,
                level: 14,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 12
                },
                timelineUnitSize: 99,
                level: 15,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 6
                },
                timelineUnitSize: 66,
                level: 16,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 6
                },
                timelineUnitSize: 99,
                level: 17,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 2
                },
                timelineUnitSize: 66,
                level: 18,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 2
                },
                timelineUnitSize: 99,
                level: 19,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 1
                },
                timelineUnitSize: 66,
                level: 20,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Day",
                    format: "E dd yyyy",
                    count: 1
                },
                bottomTier: {
                    unit: "Hour",
                    format: "hh a",
                    count: 1
                },
                timelineUnitSize: 99,
                level: 21,
                timelineViewMode: "Day",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Hour",
                    format: "ddd MMM, h a",
                    count: 1
                },
                bottomTier: {
                    unit: "Minutes",
                    format: "mm",
                    count: 30
                },
                timelineUnitSize: 66,
                level: 22,
                timelineViewMode: "Hour",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Hour",
                    format: "ddd MMM, h a",
                    count: 1
                },
                bottomTier: {
                    unit: "Minutes",
                    format: "mm",
                    count: 15
                },
                timelineUnitSize: 66,
                level: 23,
                timelineViewMode: "Hour",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }, {
                topTier: {
                    unit: "Hour",
                    format: "ddd MMM, h a",
                    count: 1
                },
                bottomTier: {
                    unit: "Minutes",
                    format: "mm",
                    count: 1
                },
                timelineUnitSize: 66,
                level: 24,
                timelineViewMode: "Hour",
                weekStartDay: 0,
                updateTimescaleView: !0,
                weekendBackground: null,
                showTooltip: !0
            }]
        }, t.prototype.displayQuarterValue = function(e) {
            var t = e.getMonth();
            return t >= 0 && t <= 2 ? "Q1" : t >= 3 && t <= 5 ? "Q2" : t >= 6 && t <= 8 ? "Q3" : "Q4"
        }, t.prototype.displayHalfValue = function(e) {
            var t = e.getMonth();
            return t >= 0 && t <= 6 ? "H1" : "H2"
        }, t.prototype.getFormatedDate = function(e, t) {
            return g(e) ? null : (g(t) && (t = this.getDateFormat()), this.globalize.formatDate(e, {
                format: t
            }))
        }, t.prototype.getDurationString = function(e, t) {
            return this.dateValidationModule.getDurationString(e, t)
        }, t.prototype.getWorkString = function(e, t) {
            return this.dateValidationModule.getWorkString(e, t)
        }, t.prototype.treeDataBound = function(e) {
            if (this.updateCurrentViewData(), this.updateContentHeight(), !this.isTreeGridRendered) {
                this.isTreeGridRendered = !0, this.isLoad = !1;
                var t = 0;
                g(this.toolbarModule) || g(this.toolbarModule.element) || (t = this.toolbarModule.element.offsetHeight), this.timelineModule.isSingleTier ? (ut(this.treeGrid.element.querySelectorAll(".e-headercell"), Kl), ut(this.treeGrid.element.querySelectorAll(".e-columnheader"), Kl)) : (gt(this.treeGrid.element.querySelectorAll(".e-headercell"), Kl), gt(this.treeGrid.element.querySelectorAll(".e-columnheader"), Kl)), this.treeGrid.height = this.ganttHeight - t - this.treeGrid.grid.getHeaderContent().offsetHeight, this.notify("tree-grid-created", {}), this.createGanttPopUpElement(), this.hideSpinner(), l("isGanttCreated", !0, e), this.renderComplete()
            }
            this.predecessorModule && this.taskFields.dependency && (this.connectorLineIds = [], this.updatedConnectorLineCollection = [], this.predecessorModule.createConnectorLinesCollection()), this.notify("recordsUpdated", {}), this.trigger("dataBound", e)
        }, t.prototype.onPropertyChanged = function(e, t) {
            for (var i = !1, n = 0, r = Object.keys(e); n < r.length; n++) {
                var o = r[n];
                switch (o) {
                    case "allowSelection":
                        this.treeGrid.allowSelection = this.allowSelection, this.treeGrid.dataBind();
                        break;
                    case "allowRowDragAndDrop":
                        this.treeGrid.allowRowDragAndDrop = this.allowRowDragAndDrop, this.treeGrid.dataBind();
                        break;
                    case "allowFiltering":
                        this.treeGrid.allowFiltering = this.allowFiltering, this.treeGrid.dataBind();
                        break;
                    case "workWeek":
                        this.dataOperation.getNonWorkingDayIndex(), this.dataOperation.reUpdateGanttData(), this.chartRowsModule.initiateTemplates(), this.taskFields.dependency && this.predecessorModule.updatedRecordsDateByPredecessor(), this.chartRowsModule.refreshGanttRows(), this.treeGrid.refreshColumns(), this.timelineModule.refreshTimeline();
                        break;
                    case "toolbar":
                        this.notify("ui-toolbarupdate", {
                            module: "toolbar",
                            properties: e
                        });
                        break;
                    case "showColumnMenu":
                        this.treeGrid.showColumnMenu = this.showColumnMenu, this.treeGrid.dataBind();
                        break;
                    case "columnMenuItems":
                        this.treeGrid.grid.columnMenuItems = Ua(this.columnMenuItems);
                        break;
                    case "eventMarkers":
                    case "highlightWeekends":
                        this.notify("ui-update", {
                            module: "day-markers",
                            properties: e
                        });
                        break;
                    case "sortSettings":
                        this.treeGrid.sortSettings = Ua(this.sortSettings), this.treeGrid.dataBind();
                        break;
                    case "timelineSettings":
                        this.timelineModule.refreshTimeline();
                        break;
                    case "rowHeight":
                    case "taskbarHeight":
                        this.treeGrid.rowHeight = this.rowHeight, this.treeGrid.dataBind(), this.chartRowsModule.initiateTemplates(), this.timelineModule.updateChartByNewTimeline(), this.taskFields.dependency && this.ganttChartModule.reRenderConnectorLines();
                        break;
                    case "filterSettings":
                        this.treeGrid.filterSettings = Ua(this.filterSettings), this.treeGrid.dataBind();
                        break;
                    case "allowResizing":
                        this.treeGrid.allowResizing = this.allowResizing, this.treeGrid.dataBind();
                        break;
                    case "allowReordering":
                        this.treeGrid.allowReordering = this.allowReordering, this.treeGrid.dataBind();
                        break;
                    case "gridLines":
                        this.treeGrid.gridLines = this.gridLines, this.treeGrid.dataBind(), this.renderChartGridLines();
                        break;
                    case "tooltipSettings":
                        this.tooltipModule.toolTipObj && this.tooltipModule.toolTipObj.destroy(), this.tooltipModule.createTooltip();
                        break;
                    case "splitterSettings":
                        this.splitterModule.updateSplitterPosition();
                        break;
                    case "selectionSettings":
                        this.treeGrid.selectionSettings = Ua(this.selectionSettings), this.treeGrid.grid.selectionSettings.enableToggle = this.selectionSettings.enableToggle, this.treeGrid.dataBind();
                        break;
                    case "searchSettings":
                        this.treeGrid.grid.searchSettings = Ua(this.searchSettings), this.treeGrid.grid.dataBind(), this.toolbarModule && this.toolbarModule.updateSearchTextBox();
                        break;
                    case "labelSettings":
                    case "renderBaseline":
                    case "baselineColor":
                        this.chartRowsModule.initiateTemplates(), this.chartRowsModule.refreshGanttRows();
                        break;
                    case "resourceIDMapping":
                    case "resourceNameMapping":
                    case "resources":
                        this.dataOperation.reUpdateResources(), this.treeGrid.refreshColumns(), this.chartRowsModule.initiateTemplates(), this.chartRowsModule.refreshGanttRows();
                        break;
                    case "includeWeekend":
                    case "dayWorkingTime":
                    case "allowUnscheduledTasks":
                    case "holidays":
                        "holidays" === o && (this.totalHolidayDates = this.dataOperation.getHolidayDates(), this.notify("ui-update", {
                            module: "day-markers",
                            properties: e
                        })), this.dataOperation.reUpdateGanttData(), this.treeGrid.refreshColumns(), this.chartRowsModule.initiateTemplates(), this.chartRowsModule.refreshGanttRows();
                        break;
                    case "addDialogFields":
                    case "editDialogFields":
                        this.editModule && this.editModule.dialogModule && this.editModule.dialogModule.processDialogFields();
                        break;
                    case "columns":
                        this.treeGridModule.treeGridColumns = [], this.treeGridModule.validateGanttColumns(), this.treeGrid.columns = this.treeGridModule.treeGridColumns, this.chartRowsModule.initiateTemplates(), this.timelineModule.updateChartByNewTimeline();
                        break;
                    case "width":
                    case "height":
                        this.reUpdateDimention();
                        break;
                    case "editSettings":
                        this.treeGrid.editSettings.allowAdding = this.editSettings.allowAdding, this.treeGrid.editSettings.allowDeleting = this.editSettings.allowDeleting, this.treeGrid.editSettings.showDeleteConfirmDialog = this.editSettings.showDeleteConfirmDialog, this.treeGrid.editSettings.allowEditing = this.editSettings.allowEditing, g(this.editModule) || this.editModule.reUpdateEditModules(), g(this.toolbarModule) || this.toolbarModule.refreshToolbarItems();
                        break;
                    case "connectorLineBackground":
                    case "connectorLineWidth":
                        this.taskFields.dependency && (this.connectorLineModule.initPublicProp(), this.ganttChartModule.reRenderConnectorLines());
                        break;
                    case "treeColumnIndex":
                        this.treeGrid.treeColumnIndex = this.treeColumnIndex;
                        break;
                    case "projectStartDate":
                    case "projectEndDate":
                        this.dataOperation.calculateProjectDates(), this.updateProjectDates(this.cloneProjectStartDate, this.cloneProjectEndDate, this.isTimelineRoundOff);
                        break;
                    case "selectedRowIndex":
                        g(this.selectionModule) || this.selectionModule.selectRowByIndex();
                        break;
                    case "dataSource":
                        this.closeGanttActions(), this.dataOperation.checkDataBinding(!0);
                        break;
                    case "enableContextMenu":
                    case "contextMenuItems":
                        this.enableContextMenu || "contextMenuItems" === o ? this.notify("reRender-contextMenu", {
                            module: "contextMenu",
                            enable: this.contextMenuItems
                        }) : this.treeGrid.contextMenuItems = [], this.treeGrid.dataBind();
                        break;
                    case "currencyCode":
                    case "locale":
                    case "enableRtl":
                        i = !0;
                        break;
                    case "validateManualTasksOnLinking":
                        this.validateManualTasksOnLinking = e.validateManualTasksOnLinking;
                        break;
                    case "readOnly":
                        this.readOnly = this.readOnly, this.refresh();
                        break;
                    case "showOverAllocation":
                        this.updateOverAllocationCotainer();
                        break;
                    case "viewType":
                        "ProjectView" !== e.viewType && "ResourceView" !== e.viewType || this.refresh()
                }
            }
            i && this.refresh()
        }, t.prototype.updateOverAllocationCotainer = function() {
            if (this.showOverAllocation && "ResourceView" === this.viewType) this.ganttChartModule.renderOverAllocationContainer();
            else {
                var e = this.element.querySelector(".e-rangecontainer");
                e && (e.innerHTML = "")
            }
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist(["allowSelection"])
        }, t.prototype.destroy = function() {
            this.notify("destroy", {}), g(this.validationDialogElement) || this.validationDialogElement.isDestroyed || this.validationDialogElement.destroy();
            for (var t = ["ganttChartModule", "timelineModule", "chartRowsModule", "treeGridModule", "ganttDataUpdatesModule", "dateValidationModule", "tooltipModule"], i = 0; i < t.length; i++) this[t[i]] && (this[t[i]] = null);
            this.keyboardModule && this.keyboardModule.destroy(), e.prototype.destroy.call(this), this.chartVerticalLineContainer = null, this.element.innerHTML = "", gt([this.element], "e-gantt"), this.element.innerHTML = "", this.isTreeGridRendered = !1, this.resetTemplates()
        }, t.prototype.getTaskbarHeight = function() {
            return this.chartRowsModule.taskBarHeight
        }, t.prototype.requiredModules = function() {
            var e = [];
            return this.isDestroyed || (this.allowSorting && e.push({
                member: "sort",
                args: [this]
            }), (this.allowFiltering || this.toolbar && -1 !== this.toolbar.indexOf("Search")) && e.push({
                member: "filter",
                args: [this]
            }), this.allowReordering && e.push({
                member: "reorder",
                args: [this]
            }), this.allowExcelExport && e.push({
                member: "excelExport",
                args: [this]
            }), this.allowRowDragAndDrop && e.push({
                member: "rowDragAndDrop",
                args: [this]
            }), this.allowResizing && e.push({
                member: "resize",
                args: [this]
            }), this.toolbar && e.push({
                member: "toolbar",
                args: [this]
            }), (this.editSettings.allowAdding || this.editSettings.allowEditing || this.editSettings.allowDeleting || this.editSettings.allowTaskbarEditing || this.allowRowDragAndDrop) && e.push({
                member: "edit",
                args: [this]
            }), this.allowSelection && e.push({
                member: "selection",
                args: [this]
            }), this.tooltipSettings.showTooltip && e.push({
                member: "tooltip",
                args: [this]
            }), (this.highlightWeekends || this.holidays && this.holidays.length > 0 || this.eventMarkers && this.eventMarkers.length > 0) && e.push({
                member: "dayMarkers",
                args: [this]
            }), this.enableContextMenu && e.push({
                member: "contextMenu",
                args: [this]
            }), this.showColumnMenu && e.push({
                member: "columnMenu",
                args: [this]
            }), this.allowPdfExport && e.push({
                member: "pdfExport",
                args: [this]
            })), e
        }, t.prototype.sortColumn = function(e, t, i) {
            this.sortModule && this.allowSorting && this.sortModule.sortColumn(e, t, i)
        }, t.prototype.clearSorting = function() {
            this.sortModule.clearSorting()
        }, t.prototype.renderChartGridLines = function() {
            var e = "e-chart-row-border",
                t = this.chartVerticalLineContainer,
                i = document.getElementById(this.element.id + "GanttTaskTableBody").querySelectorAll("td");
            if ("Vertical" === this.gridLines) {
                if (g(t) ? this.renderChartVerticalLines() : "none" === t.style.display && (t.style.display = "block"), i[0].classList.contains(e))
                    for (var n = 0; n < i.length; n++) gt([i[n]], e)
            } else if ("Horizontal" === this.gridLines) {
                if (g(t) || (t.style.display = "none"), !i[0].classList.contains(e))
                    for (n = 0; n < i.length; n++) ut([i[n]], e)
            } else if ("Both" === this.gridLines) {
                if (g(t) ? this.renderChartVerticalLines() : "none" === t.style.display && (t.style.display = "block"), !i[0].classList.contains(e))
                    for (n = 0; n < i.length; n++) ut([i[n]], e)
            } else if ("None" === this.gridLines && (g(t) || "none" === t.style.display || (t.style.display = "none"), i[0].classList.contains(e)))
                for (n = 0; n < i.length; n++) gt([i[n]], e)
        }, t.prototype.updateGridLineContainerHeight = function() {
            this.chartVerticalLineContainer && (this.chartVerticalLineContainer.style.height = C(this.contentHeight))
        }, t.prototype.reUpdateDimention = function() {
            var e = 0;
            this.calculateDimensions(), g(this.toolbarModule) || g(this.toolbarModule.element) || (this.toolbarModule.toolbar.refresh(), this.toolbarModule.refreshToolbarItems(), e = this.toolbarModule.element.offsetHeight), this.treeGrid.height = this.ganttHeight - e - this.treeGrid.grid.getHeaderContent().offsetHeight, this.splitterModule.splitterObject.height = (this.ganttHeight - e).toString(), this.splitterModule.splitterObject.width = this.ganttWidth.toString(), this.ganttChartModule.scrollObject.setHeight(this.ganttHeight - this.ganttChartModule.chartTimelineContainer.offsetHeight - e)
        }, t.prototype.renderChartVerticalLines = function() {
            this.element.contains(this.chartVerticalLineContainer) || (this.chartVerticalLineContainer = ct("div", {
                id: this.element.id + "line-container",
                styles: "position:absolute;height:100%;z-index:1"
            }), this.element.getElementsByClassName("e-chart-rows-container")[0].appendChild(this.chartVerticalLineContainer)), this.chartVerticalLineContainer.innerHTML = "";
            var e = this.element.getElementsByClassName("e-timeline-header-table-container")[1];
            g(e) && (e = this.element.getElementsByClassName("e-timeline-header-table-container")[0]);
            for (var t, i = e.getElementsByTagName("th"), n = i.length, r = 0, o = ct("div"), s = 0; s < n; s++) {
                r = 0 === s ? -1 : r + parseFloat(t), t = i[s].style.width;
                var a = ct("div", {
                    className: "e-line-container-cell",
                    styles: "left:" + r + "px"
                });
                o.appendChild(a)
            }
            this.chartVerticalLineContainer.innerHTML = o.innerHTML
        }, t.prototype.getDefaultLocale = function() {
            var e = {
                emptyRecord: "No records to display",
                id: "ID",
                name: "Name",
                startDate: "Start Date",
                endDate: "End Date",
                duration: "Duration",
                progress: "Progress",
                dependency: "Dependency",
                notes: "Notes",
                baselineStartDate: "Baseline Start Date",
                baselineEndDate: "Baseline End Date",
                taskMode: "Task Mode",
                changeScheduleMode: "Change Schedule Mode",
                subTasksStartDate: "SubTasks Start Date",
                subTasksEndDate: "SubTasks End Date",
                scheduleStartDate: "Schedule Start Date",
                scheduleEndDate: "Schedule End Date",
                auto: "Auto",
                manual: "Manual",
                type: "Type",
                offset: "Offset",
                resourceName: "Resources",
                resourceID: "Resource ID",
                day: "day",
                hour: "hour",
                minute: "minute",
                days: "days",
                hours: "hours",
                minutes: "minutes",
                generalTab: "General",
                customTab: "Custom Columns",
                writeNotes: "Write Notes",
                addDialogTitle: "New Task",
                editDialogTitle: "Task Information",
                add: "Add",
                edit: "Edit",
                update: "Update",
                delete: "Delete",
                cancel: "Cancel",
                search: "Search",
                task: " task",
                tasks: " tasks",
                zoomIn: "Zoom in",
                zoomOut: "Zoom out",
                zoomToFit: "Zoom to fit",
                excelExport: "Excel export",
                csvExport: "CSV export",
                pdfExport: "Pdf export",
                expandAll: "Expand all",
                collapseAll: "Collapse all",
                nextTimeSpan: "Next timespan",
                prevTimeSpan: "Previous timespan",
                saveButton: "Save",
                taskBeforePredecessor_FS: 'You moved "{0}" to start before "{1}" finishes and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                taskAfterPredecessor_FS: 'You moved "{0}" away from "{1}" and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                taskBeforePredecessor_SS: 'You moved "{0}" to start before "{1}" starts and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                taskAfterPredecessor_SS: 'You moved "{0}" to start after "{1}" starts and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                taskBeforePredecessor_FF: 'You moved "{0}" to finish before "{1}" finishes and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                taskAfterPredecessor_FF: 'You moved "{0}" to finish after "{1}" finishes and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                taskBeforePredecessor_SF: 'You moved "{0}" away from "{1}" to starts and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                taskAfterPredecessor_SF: 'You moved "{0}" to finish after "{1}" starts and the two tasks are linked.As the result, the links cannot be honored. Select one action below to perform',
                okText: "Ok",
                confirmDelete: "Are you sure you want to Delete this Record and any child Records?",
                from: "From",
                to: "To",
                taskLink: "Task Link",
                lag: "Lag",
                start: "Start",
                finish: "Finish",
                enterValue: "Enter the value",
                taskInformation: "Task Information",
                deleteTask: "Delete Task",
                deleteDependency: "Delete Dependency",
                convert: "Convert",
                save: "Save",
                above: "Above",
                below: "Below",
                child: "Child",
                milestone: "Milestone",
                toTask: "To Task",
                toMilestone: "To Milestone",
                eventMarkers: "Event markers",
                leftTaskLabel: "Left task label",
                rightTaskLabel: "Right task label",
                timelineCell: "Timeline cell",
                confirmPredecessorDelete: "Are you sure you want to remove dependency link?",
                unit: "Unit",
                work: "Work",
                taskType: "Task Type",
                unassignedTask: "Unassigned Task",
                group: "Group",
                indent: "Indent",
                outdent: "Outdent"
            };
            if (S()) {
                u(e, {
                    zoomIn: "Zoom In",
                    zoomOut: "Zoom Out",
                    zoomToFit: "Zoom To Fit",
                    excelExport: "Excel Export",
                    csvExport: "CSV Export",
                    pdfExport: "Pdf Export",
                    expandAll: "Expand All",
                    collapseAll: "Collapse All",
                    nextTimeSpan: "Next Timespan",
                    prevTimeSpan: "Previous Timespan"
                }, {}, !0)
            }
            return e
        }, t.prototype.removeSortColumn = function(e) {
            this.sortModule.removeSortColumn(e)
        }, t.prototype.actionBeginTask = function(e) {
            this.trigger("actionBegin", e)
        }, t.prototype.scrollToDate = function(e) {
            var t = this.dateValidationModule.getDateFromFormat(e),
                i = this.dataOperation.getTaskLeft(t, !1);
            this.ganttChartModule.updateScrollLeft(i)
        }, t.prototype.scrollToTask = function(e) {
            if (-1 !== this.ids.indexOf(e)) {
                var t = this.flatData[this.ids.indexOf(e)].ganttProperties.left;
                this.ganttChartModule.updateScrollLeft(t)
            }
        }, t.prototype.updateChartScrollOffset = function(e, t) {
            g(e) || (e = this.ganttChartModule.scrollElement.scrollWidth <= e ? this.ganttChartModule.scrollElement.scrollWidth : e, this.ganttChartModule.scrollObject.setScrollLeft(e)), g(t) || (t = this.ganttChartModule.scrollElement.scrollHeight <= t ? this.ganttChartModule.scrollElement.scrollHeight : t, this.ganttChartModule.scrollObject.setScrollTop(t))
        }, t.prototype.getParentTask = function(e) {
            if (g(e)) return null;
            var t = this.flatData.filter((function(t) {
                return e.uniqueID === t.uniqueID
            }));
            return t.length > 0 ? t[0] : null
        }, t.prototype.filterByColumn = function(e, t, i, n, r, o) {
            this.treeGrid.filterByColumn(e, t, i, n, r, o)
        }, t.prototype.excelExport = function(e, t, i, n) {
            return this.excelExportModule ? this.treeGrid.excelExport(e, t, i, n) : null
        }, t.prototype.csvExport = function(e, t, i, n) {
            return this.excelExportModule ? this.treeGrid.csvExport(e, t, i, n) : null
        }, t.prototype.pdfExport = function(e, t, i) {
            return this.pdfExportModule ? this.pdfExportModule.export(e, t, i) : null
        }, t.prototype.clearFiltering = function(e) {
            this.treeGrid.grid.clearFiltering(e)
        }, t.prototype.removeFilteredColsByField = function(e) {
            this.treeGrid.removeFilteredColsByField(e, !1)
        }, t.prototype.renderWorkingDayCell = function(e) {
            var t = "Auto" !== this.taskMode || !!this.includeWeekend ? [] : this.nonWorkingDayIndex,
                i = this.totalHolidayDates;
            if (t.length > 0 && -1 !== t.indexOf(e.date.getDay())) e.isDisabled = !0;
            else if (i.length > 0) {
                var n = new Date(e.date.getTime());
                n.setHours(0, 0, 0), -1 !== i.indexOf(n.getTime()) && (e.isDisabled = !0)
            }
        }, t.prototype.previousTimeSpan = function(e) {
            this.timelineModule.performTimeSpanAction("prevTimeSpan", "publicMethod", new Date(this.timelineModule.timelineStartDate.getTime()), new Date(this.timelineModule.timelineEndDate.getTime()), e)
        }, t.prototype.nextTimeSpan = function(e) {
            this.timelineModule.performTimeSpanAction("nextTimeSpan", "publicMethod", new Date(this.timelineModule.timelineStartDate.getTime()), new Date(this.timelineModule.timelineEndDate.getTime()), e)
        }, t.prototype.updateProjectDates = function(e, t, i, n) {
            S() && (e = this.dataOperation.getDateFromFormat(e), t = this.dataOperation.getDateFromFormat(t)), this.timelineModule.totalTimelineWidth = 0, this.cloneProjectStartDate = e, this.cloneProjectEndDate = t, this.isTimelineRoundOff = i, this.timelineModule.refreshTimelineByTimeSpan(), this.dataOperation.reUpdateGanttDataPosition(), this.timelineModule.updateChartByNewTimeline(), this.ganttChartModule.chartBodyContent.style.width = C(this.timelineModule.totalTimelineWidth), this.ganttChartModule.updateLastRowBottomWidth(), "Vertical" !== this.gridLines && "Both" !== this.gridLines || this.renderChartVerticalLines(), this.taskFields.dependency && this.ganttChartModule.reRenderConnectorLines(), "beforeAdd" !== n && this.notify("selectRowByIndex", {})
        }, t.prototype.reorderColumns = function(e, t) {
            this.treeGrid.reorderColumns(e, t)
        }, t.prototype.initiateEditAction = function(e) {
            this.isOnEdit = e, this.previousRecords = {}, this.editedRecords = []
        }, t.prototype.setRecordValue = function(e, t, i, n) {
            if (this.isOnEdit || this.isOnDelete) {
                this.makeCloneData(e, i, n);
                var r = n ? i.rowUniqueID : i.ganttProperties.rowUniqueID,
                    o = this.getRecordByID(r);
                o && -1 === this.editedRecords.indexOf(o) && this.editedRecords.push(o)
            }
            l(e, t = f(t) ? null : t, i)
        }, t.prototype.makeCloneData = function(e, t, i) {
            var n, r, o = a(e, t);
            if (i && (e = "ganttProperties." + e), g(this.previousRecords[t.uniqueID])) {
                this.previousRecords[t.uniqueID] = {}
            }
            f(a(e, n = this.previousRecords[t.uniqueID])) && (f(r = o instanceof Date ? new Date(o.getTime()) : function(e) {
                var t = Object.prototype.toString;
                return "[object Array]" === t.call(e) && "[object Object]" === t.call(e[0])
            }(o) ? u([], o, [], !0) : p(o) ? u({}, {}, o, !0) : o) ? l(e, null, n) : l(e, r, n))
        }, t.prototype.closeGanttActions = function() {
            this.editModule && (this.editModule.cellEditModule && this.editModule.cellEditModule.isCellEdit ? (this.treeGrid.closeEdit(), this.editModule.cellEditModule.isCellEdit = !1, g(this.toolbarModule) || this.toolbarModule.refreshToolbarItems()) : this.editModule.dialogModule && this.editModule.dialogModule.dialogObj && this.editModule.dialogModule.dialogObj.visible && (this.editModule.dialogModule.dialogObj.hide(), this.editModule.dialogModule.dialogClose()))
        }, t.prototype.getTaskByUniqueID = function(e) {
            var t = this.flatData.filter((function(t) {
                return t.uniqueID === e
            }));
            return t.length > 0 ? t[0] : null
        }, t.prototype.getRecordByID = function(e) {
            return g(e) ? null : this.flatData[this.ids.indexOf(e.toString())]
        }, t.prototype.setSplitterPosition = function(e, t) {
            var i = {};
            i[t] = e;
            var n = this.splitterModule.calculateSplitterPosition(i, !0),
                r = this.splitterModule.splitterObject.element.querySelectorAll(".e-pane")[0],
                o = this.splitterModule.splitterObject.element.querySelectorAll(".e-pane")[1];
            this.splitterModule.splitterPreviousPositionGrid = r.scrollWidth + 1 + "px", this.splitterModule.splitterPreviousPositionChart = o.scrollWidth + 1 + "px", this.splitterModule.splitterObject.paneSettings[0].size = n, this.splitterModule.triggerCustomResizedEvent()
        }, t.prototype.expandByIndex = function(e) {
            if ("number" == typeof e) {
                var t = this.contructExpandCollapseArgs(null, e);
                this.ganttChartModule.isExpandCollapseFromChart = !0, this.ganttChartModule.expandGanttRow(t)
            } else
                for (var i = 0; i < e.length; i++)
                    if ("number" == typeof e[i]) {
                        var n = e[i];
                        t = this.contructExpandCollapseArgs(null, n);
                        this.ganttChartModule.isExpandCollapseFromChart = !0, this.ganttChartModule.expandGanttRow(t)
                    }
        }, t.prototype.expandByID = function(e) {
            var t = this.contructExpandCollapseArgs(e);
            this.ganttChartModule.isExpandCollapseFromChart = !0, this.ganttChartModule.expandGanttRow(t)
        }, t.prototype.collapseByIndex = function(e) {
            var t = this.contructExpandCollapseArgs(null, e);
            this.ganttChartModule.isExpandCollapseFromChart = !0, this.ganttChartModule.collapseGanttRow(t)
        }, t.prototype.collapseByID = function(e) {
            var t = this.contructExpandCollapseArgs(e);
            this.ganttChartModule.isExpandCollapseFromChart = !0, this.ganttChartModule.collapseGanttRow(t)
        }, t.prototype.addRecord = function(e, t, i) {
            if (this.editModule && this.editSettings.allowAdding)
                if ("ResourceView" === this.viewType) {
                    this.editModule.addRowPosition = t, this.editModule.addRowIndex = i;
                    var n = e[this.taskFields.resourceInfo],
                        r = void 0,
                        o = void 0;
                    if (!g(n) && n.length) {
                        for (var s = 0; s < n.length && (r = "object" == typeof n[s] ? n[s][this.resourceFields.id] : n[0], !(o = this.flatData[this.getTaskIds().indexOf("R" + r)])); s++);
                        if (o && o.childRecords.length || 0 === o.level) {
                            var a = o.childRecords[i];
                            if (a) {
                                var l = "Above" === t || "Below" === t ? t : "Child";
                                "Child" === l ? this.editModule.addRecord(e, l, this.getTaskIds().indexOf("R" + r)) : this.editModule.addRecord(e, l, this.flatData.indexOf(a))
                            } else this.editModule.addRecord(e, "Child", this.getTaskIds().indexOf("R" + r))
                        } else this.editModule.addRecord(e, "Bottom")
                    } else this.editModule.addRecord(e, "Bottom");
                    this.editModule.addRowPosition = null, this.editModule.addRowIndex = null
                } else this.editModule.addRecord(e, t, i)
        }, t.prototype.updateRecordByID = function(e) {
            this.editModule && this.editSettings.allowEditing && this.editModule.updateRecordByID(e)
        }, t.prototype.updateTaskId = function(e, t) {
            this.editModule && this.editSettings.allowEditing && this.editModule.updateTaskId(e, t)
        }, t.prototype.expandAtLevel = function(e) {
            this.ganttChartModule.expandAtLevel(e)
        }, t.prototype.indent = function() {
            this.editModule && this.editSettings.allowEditing && this.editModule.indent()
        }, t.prototype.outdent = function() {
            this.editModule && this.editSettings.allowEditing && this.editModule.outdent()
        }, t.prototype.zoomIn = function() {
            this.timelineModule.processZooming(!0)
        }, t.prototype.zoomOut = function() {
            this.timelineModule.processZooming(!1)
        }, t.prototype.fitToProject = function() {
            this.timelineModule.processZoomToFit(), this.ganttChartModule.updateScrollLeft(0)
        }, t.prototype.reorderRows = function(e, t, i) {
            this.rowDragAndDropModule.reorderRows(e, t, i)
        }, t.prototype.updateRecordByIndex = function(e, t) {
            if (this.editModule && this.editSettings.allowEditing) {
                var i, n = this.taskFields;
                i = this.currentViewData.length > 0 ? g(this.currentViewData[e]) ? null : this.currentViewData[e] : null, g(i) || (t[n.id] = i[n.id], this.editModule.updateRecordByID(t))
            }
        }, t.prototype.addPredecessor = function(e, t) {
            var i = this.getRecordByID(e.toString());
            this.editModule && !g(i) && this.editSettings.allowTaskbarEditing && this.connectorLineEditModule.addPredecessor(i, t)
        }, t.prototype.removePredecessor = function(e) {
            var t = this.getRecordByID(e.toString());
            this.editModule && !g(t) && this.editSettings.allowTaskbarEditing && this.connectorLineEditModule.removePredecessor(t)
        }, t.prototype.updatePredecessor = function(e, t) {
            var i = this.getRecordByID(e.toString());
            this.editModule && !g(i) && this.editSettings.allowTaskbarEditing && this.connectorLineEditModule.updatePredecessor(i, t)
        }, t.prototype.openAddDialog = function() {
            this.editModule && this.editModule.dialogModule && this.editSettings.allowAdding && this.editModule.dialogModule.openAddDialog()
        }, t.prototype.openEditDialog = function(e) {
            this.editModule && this.editModule.dialogModule && this.editSettings.allowEditing && this.editModule.dialogModule.openEditDialog(e)
        }, t.prototype.contructExpandCollapseArgs = function(e, t) {
            var i, n, r;
            return g(t) ? (n = this.getRecordByID(e.toString()), r = a("rowIndex", i = this.getRowByID(e))) : g(t) || (r = a("rowIndex", i = this.getRowByIndex(t)), n = this.currentViewData[r]), {
                data: n,
                gridRow: this.treeGrid.getRows()[r],
                chartRow: i,
                cancel: !1
            }
        }, t.prototype.getRowByIndex = function(e) {
            try {
                var t = this.element.querySelectorAll(".e-chart-row");
                return g(e) ? null : t[e]
            } catch (e) {
                return null
            }
        }, t.prototype.getRowByID = function(e) {
            var t = this.getRecordByID(e.toString()),
                i = this.currentViewData.indexOf(t);
            return -1 !== i ? this.getRowByIndex(i) : null
        }, t.prototype.getUnscheduledTaskClass = function(e) {
            return g(e.startDate) && g(e.endDate) && g(e.duration) || g(e.startDate) || g(e.endDate) || g(e.duration) ? " e-gantt-unscheduled-task" : ""
        }, t.prototype.isUnscheduledTask = function(e) {
            return !!(g(e.startDate) || g(e.endDate) || g(e.duration))
        }, t.prototype.createGanttPopUpElement = function() {
            var e = this.createElement("div", {
                    className: "e-ganttpopup",
                    styles: "display:none;"
                }),
                t = this.createElement("div", {
                    className: "e-content",
                    attrs: {
                        tabIndex: "-1"
                    }
                });
            vt([t, this.createElement("div", {
                className: "e-uptail e-tail"
            })], e), t.appendChild(this.createElement("span")), vt([t, this.createElement("div", {
                className: "e-downtail e-tail"
            })], e), document.getElementById(this.element.id + "GanttChart").appendChild(e)
        }, t.prototype.getPredecessorTextValue = function(e) {
            var t;
            switch (e) {
                case "SS":
                    t = this.localeObj.getConstant("start") + "-" + this.localeObj.getConstant("start");
                    break;
                case "FF":
                    t = this.localeObj.getConstant("finish") + "-" + this.localeObj.getConstant("finish");
                    break;
                case "SF":
                    t = this.localeObj.getConstant("start") + "-" + this.localeObj.getConstant("finish");
                    break;
                case "FS":
                    t = this.localeObj.getConstant("finish") + "-" + this.localeObj.getConstant("start")
            }
            return t
        }, t.prototype.search = function(e) {
            this.filterModule && (this.searchSettings.key = e, this.dataBind())
        }, t.prototype.getOffsetRect = function(e) {
            var t = e.getBoundingClientRect(),
                i = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop,
                n = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,
                r = document.documentElement.clientTop || document.body.clientTop || 0,
                o = document.documentElement.clientLeft || document.body.clientLeft || 0,
                s = t.top + i - r,
                a = t.left + n - o;
            return {
                top: Math.round(s),
                left: Math.round(a),
                width: t.width,
                height: t.height
            }
        }, t.prototype.expandAll = function() {
            this.ganttChartModule.expandCollapseAll("expand")
        }, t.prototype.updateDataSource = function(e, t) {
            if (!g(t))
                for (var i = 0, n = Object.keys(t); i < n.length; i++) {
                    var r = n[i];
                    switch (r) {
                        case "projectStartDate":
                            this.setProperties({
                                projectStartDate: t[r]
                            }, !0);
                            break;
                        case "projectEndDate":
                            this.setProperties({
                                projectEndDate: t[r]
                            }, !0)
                    }
                }
            this.dataSource = e
        }, t.prototype.collapseAll = function() {
            this.ganttChartModule.expandCollapseAll("collapse")
        }, t.prototype.getGridColumns = function() {
            return this.treeGrid.getColumns()
        }, t.prototype.getColumnByField = function(e, t) {
            var i = t.filter((function(t) {
                return t.field === e
            }));
            return i.length > 0 ? i[0] : null
        }, t.prototype.getGanttColumns = function() {
            return this.ganttColumns
        }, t.prototype.showColumn = function(e, t) {
            this.treeGrid.showColumns(e, t)
        }, t.prototype.hideColumn = function(e, t) {
            this.treeGrid.hideColumns(e, t)
        }, t.prototype.setScrollTop = function(e) {
            this.ganttChartModule.scrollObject.setScrollTop(e)
        }, t.prototype.cancelEdit = function() {
            this.isCancelled = !0, this.closeGanttActions()
        }, t.prototype.selectCell = function(e, t) {
            this.selectionModule && this.selectionModule.selectCell(e, t)
        }, t.prototype.selectCells = function(e) {
            this.selectionModule && this.selectionModule.selectCells(e)
        }, t.prototype.selectRow = function(e, t) {
            this.selectionModule && this.selectionModule.selectRow(e, t)
        }, t.prototype.selectRows = function(e) {
            this.selectionModule && this.selectionModule.selectRows(e)
        }, t.prototype.deleteRecord = function(e) {
            this.editModule && this.editModule.deleteRecord(e)
        }, t.prototype.enableItems = function(e, t) {
            this.toolbarModule && this.toolbarModule.enableItems(e, t)
        }, t.prototype.clearSelection = function() {
            this.selectionModule && this.selectionModule.clearSelection()
        }, t.prototype.updateDataArgs = function(e) {
            if (!Array.isArray(e.data)) {
                var t = [];
                t.push(e.data), l("data", t, e)
            }
            return e
        }, t.prototype.convertToMilestone = function(e) {
            var t = this.getRecordByID(e);
            if (!g(t)) {
                var i = u({}, {}, t.taskData, !0),
                    n = this.taskFields;
                if (g(n.duration) ? (i[n.startDate] = new Date(t.taskData[n.startDate]), i[n.endDate] = new Date(t.taskData[n.startDate])) : i[n.duration] = 0, g(n.milestone) || !1 === i[n.milestone] && (i[n.milestone] = !0), g(n.progress) || (i[n.progress] = 0), !g(n.child) && i[n.child] && (i[n.child] = []), !g(n.parentID) && i[n.parentID] && (i[n.parentID] = null), !g(this.contextMenuModule) && this.contextMenuModule.isOpen && "Milestone" === this.contextMenuModule.item) {
                    g(n.dependency) || (i[n.dependency] = null);
                    this.addRecord(i, "Below")
                } else t.hasChildRecords || t.ganttProperties.isMilestone || this.updateRecordByID(i)
            }
        }, t.prototype.changeTaskMode = function(e) {
            var t = this.taskFields,
                i = this.getRecordByID(e[t.id]),
                n = i.ganttProperties;
            this.isOnEdit = !0, this.setRecordValue("isAutoSchedule", !n.isAutoSchedule, n, !0), this.setRecordValue("taskData." + t.manual, !n.isAutoSchedule, i), this.setRecordValue(t.manual, !n.isAutoSchedule, i), this.editModule.updateTaskScheduleModes(i);
            var r = {
                data: i
            };
            this.editModule.initiateUpdateAction(r)
        }, t.prototype.getTaskIds = function() {
            return this.taskIds
        }, t.prototype.setTaskIds = function(e) {
            if ("ProjectView" !== this.viewType) {
                var t = e.ganttProperties.taskId;
                t = 0 === e.level ? "R" + t : "T" + t, this.taskIds.push(t)
            }
        }, t.prototype.renderTemplates = function() {
            this.isReact && this.renderReactTemplates()
        }, t.prototype.resetTemplates = function() {
            this.isReact && this.clearTemplate()
        }, kd([zt(!0)], t.prototype, "allowKeyboard", void 0), kd([zt(!0)], t.prototype, "disableHtmlEncode", void 0), kd([zt(!0)], t.prototype, "autoFocusTasks", void 0), kd([zt(!0)], t.prototype, "allowSelection", void 0), kd([zt(!1)], t.prototype, "allowSorting", void 0), kd([zt(!0)], t.prototype, "enablePredecessorValidation", void 0), kd([zt(!1)], t.prototype, "showColumnMenu", void 0), kd([zt()], t.prototype, "columnMenuItems", void 0), kd([zt()], t.prototype, "timezone", void 0), kd([zt(!1)], t.prototype, "collapseAllParentTasks", void 0), kd([zt(!1)], t.prototype, "highlightWeekends", void 0), kd([zt(0)], t.prototype, "treeColumnIndex", void 0), kd([zt([])], t.prototype, "dataSource", void 0), kd([zt("day")], t.prototype, "durationUnit", void 0), kd([zt(null)], t.prototype, "query", void 0), kd([zt(null)], t.prototype, "dateFormat", void 0), kd([zt("auto")], t.prototype, "height", void 0), kd([zt(!1)], t.prototype, "renderBaseline", void 0), kd([zt("Horizontal")], t.prototype, "gridLines", void 0), kd([qt({}, jp)], t.prototype, "labelSettings", void 0), kd([zt(null)], t.prototype, "taskbarTemplate", void 0), kd([zt(null)], t.prototype, "parentTaskbarTemplate", void 0), kd([zt(null)], t.prototype, "milestoneTemplate", void 0), kd([zt()], t.prototype, "baselineColor", void 0), kd([zt("auto")], t.prototype, "width", void 0), kd([zt()], t.prototype, "toolbar", void 0), kd([zt(["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"])], t.prototype, "workWeek", void 0), kd([zt(!1)], t.prototype, "includeWeekend", void 0), kd([zt(!1)], t.prototype, "allowUnscheduledTasks", void 0), kd([zt(!1)], t.prototype, "showInlineNotes", void 0), kd([zt(36)], t.prototype, "rowHeight", void 0), kd([zt(null)], t.prototype, "taskbarHeight", void 0), kd([zt(null)], t.prototype, "projectStartDate", void 0), kd([zt(null)], t.prototype, "projectEndDate", void 0), kd([zt(null)], t.prototype, "resourceIDMapping", void 0), kd([zt(null)], t.prototype, "resourceNameMapping", void 0), kd([zt([])], t.prototype, "resources", void 0), kd([zt(null)], t.prototype, "connectorLineBackground", void 0), kd([zt(1)], t.prototype, "connectorLineWidth", void 0), kd([zt([])], t.prototype, "columns", void 0), kd([zt([])], t.prototype, "addDialogFields", void 0), kd([zt([])], t.prototype, "editDialogFields", void 0), kd([zt(-1)], t.prototype, "selectedRowIndex", void 0), kd([zt("hour")], t.prototype, "workUnit", void 0), kd([zt("FixedUnit")], t.prototype, "taskType", void 0), kd([zt("ProjectView")], t.prototype, "viewType", void 0), kd([Wt([{
            from: 8,
            to: 12
        }, {
            from: 13,
            to: 17
        }], vp)], t.prototype, "dayWorkingTime", void 0), kd([Wt([], Cp)], t.prototype, "holidays", void 0), kd([Wt([], kp)], t.prototype, "eventMarkers", void 0), kd([qt({}, Ep)], t.prototype, "taskFields", void 0), kd([qt({}, Zp)], t.prototype, "resourceFields", void 0), kd([qt({}, Mp)], t.prototype, "timelineSettings", void 0), kd([qt({}, fp)], t.prototype, "sortSettings", void 0), kd([qt({}, Ap)], t.prototype, "editSettings", void 0), kd([qt({}, Wp)], t.prototype, "tooltipSettings", void 0), kd([qt({}, Np)], t.prototype, "selectionSettings", void 0), kd([zt(!1)], t.prototype, "allowFiltering", void 0), kd([zt(!1)], t.prototype, "allowExcelExport", void 0), kd([zt(!1)], t.prototype, "allowRowDragAndDrop", void 0), kd([zt(!1)], t.prototype, "allowReordering", void 0), kd([zt(!1)], t.prototype, "readOnly", void 0), kd([zt(!1)], t.prototype, "allowResizing", void 0), kd([zt(!1)], t.prototype, "enableContextMenu", void 0), kd([zt()], t.prototype, "contextMenuItems", void 0), kd([zt(!1)], t.prototype, "allowPdfExport", void 0), kd([zt(!1)], t.prototype, "validateManualTasksOnLinking", void 0), kd([zt(!1)], t.prototype, "enableMultiTaskbar", void 0), kd([zt(!1)], t.prototype, "showOverAllocation", void 0), kd([zt("Auto")], t.prototype, "taskMode", void 0), kd([qt({}, Up)], t.prototype, "filterSettings", void 0), kd([qt({}, td)], t.prototype, "searchSettings", void 0), kd([qt({}, Xp)], t.prototype, "splitterSettings", void 0), kd([_t()], t.prototype, "queryTaskbarInfo", void 0), kd([_t()], t.prototype, "beforeExcelExport", void 0), kd([_t()], t.prototype, "excelExportComplete", void 0), kd([_t()], t.prototype, "excelQueryCellInfo", void 0), kd([_t()], t.prototype, "excelHeaderQueryCellInfo", void 0), kd([_t()], t.prototype, "rowDrag", void 0), kd([_t()], t.prototype, "rowDragStart", void 0), kd([_t()], t.prototype, "rowDragStartHelper", void 0), kd([_t()], t.prototype, "rowDrop", void 0), kd([_t()], t.prototype, "collapsing", void 0), kd([_t()], t.prototype, "collapsed", void 0), kd([_t()], t.prototype, "expanding", void 0), kd([_t()], t.prototype, "expanded", void 0), kd([_t()], t.prototype, "actionBegin", void 0), kd([_t()], t.prototype, "actionComplete", void 0), kd([_t()], t.prototype, "actionFailure", void 0), kd([_t()], t.prototype, "taskbarEdited", void 0), kd([_t()], t.prototype, "endEdit", void 0), kd([_t()], t.prototype, "cellEdit", void 0), kd([_t()], t.prototype, "load", void 0), kd([_t()], t.prototype, "created", void 0), kd([_t()], t.prototype, "destroyed", void 0), kd([_t()], t.prototype, "taskbarEditing", void 0), kd([_t()], t.prototype, "dataBound", void 0), kd([_t()], t.prototype, "resizeStart", void 0), kd([_t()], t.prototype, "resizing", void 0), kd([_t()], t.prototype, "resizeStop", void 0), kd([_t()], t.prototype, "splitterResizeStart", void 0), kd([_t()], t.prototype, "splitterResizing", void 0), kd([_t()], t.prototype, "splitterResized", void 0), kd([_t()], t.prototype, "columnDragStart", void 0), kd([_t()], t.prototype, "columnDrag", void 0), kd([_t()], t.prototype, "columnDrop", void 0), kd([_t()], t.prototype, "beforeTooltipRender", void 0), kd([_t()], t.prototype, "rowSelecting", void 0), kd([_t()], t.prototype, "rowSelected", void 0), kd([_t()], t.prototype, "rowDeselecting", void 0), kd([_t()], t.prototype, "rowDeselected", void 0), kd([_t()], t.prototype, "cellSelecting", void 0), kd([_t()], t.prototype, "cellSelected", void 0), kd([_t()], t.prototype, "cellDeselecting", void 0), kd([_t()], t.prototype, "cellDeselected", void 0), kd([_t()], t.prototype, "queryCellInfo", void 0), kd([_t()], t.prototype, "headerCellInfo", void 0), kd([_t()], t.prototype, "rowDataBound", void 0), kd([_t()], t.prototype, "columnMenuOpen", void 0), kd([_t()], t.prototype, "toolbarClick", void 0), kd([_t()], t.prototype, "columnMenuClick", void 0), kd([_t()], t.prototype, "contextMenuOpen", void 0), kd([_t()], t.prototype, "contextMenuClick", void 0), kd([_t()], t.prototype, "onTaskbarClick", void 0), kd([_t()], t.prototype, "recordDoubleClick", void 0), kd([_t()], t.prototype, "onMouseMove", void 0), kd([_t()], t.prototype, "beforePdfExport", void 0), kd([_t()], t.prototype, "pdfExportComplete", void 0), kd([_t()], t.prototype, "pdfQueryCellInfo", void 0), kd([_t()], t.prototype, "pdfQueryTaskbarInfo", void 0), kd([_t()], t.prototype, "pdfQueryTimelineCellInfo", void 0), kd([_t()], t.prototype, "pdfColumnHeaderQueryCellInfo", void 0), t = kd([Gt], t)
    }(pi),
    Dd = "e-rhandler",
    Ed = "e-rsuppress",
    Rd = "e-ricon",
    Pd = "e-rhelper",
    Id = "th.e-headercell",
    Md = "e-rcursor",
    Ld = function() {
        function e(e) {
            this.tapped = !1, this.isDblClk = !0, this.parent = e, this.parent.isDestroyed || (this.widthService = new Ws(e), this.addEventListener())
        }
        return e.prototype.autoFitColumns = function(e) {
            var t = null == e || e.length <= 0 ? this.parent.getColumns().map((function(e) {
                return e.field
            })) : "string" == typeof e ? [e] : e;
            this.findColumn(t)
        }, e.prototype.autoFit = function() {
            var e = this.parent.getColumns().filter((function(e) {
                return !0 === e.autoFit
            })).map((function(e) {
                return e.field || e.headerText
            }));
            e.length > 0 && this.autoFitColumns(e), "Auto" === this.parent.resizeSettings.mode && this.widthService.setWidthToTable()
        }, e.prototype.resizeColumn = function(e, t, i) {
            var n, r, o, s, a, l, h = this.parent,
                p = 0,
                d = 0,
                c = i || this.parent.getUidByColumnField(e),
                u = this.parent.getNormalizedColumnIndex(c),
                f = this.parent.getColumnIndexByField(e),
                m = h.getFrozenColumns();
            g(h.getFooterContent()) || (o = h.getFooterContentTable()), m ? t < m ? (n = h.getHeaderTable(), r = h.getContentTable(), s = n.querySelector('[e-mappinguid="' + c + '"]').parentElement.cloneNode(!0), a = r.querySelectorAll("td:nth-child(" + (u + 1) + ")"), o && (l = o.querySelectorAll("td:nth-child(" + (u + 1) + ")"))) : (n = h.getHeaderContent().querySelector(".e-movableheader").children[0], r = h.getContent().querySelector(".e-movablecontent").children[0], s = n.querySelector('[e-mappinguid="' + c + '"]').parentElement.cloneNode(!0), a = r.querySelectorAll("td:nth-child(" + (u - m + 1) + ")"), o && (l = (o = h.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child(" + (u - m + 1) + ")"))) : (n = h.getHeaderTable(), r = h.getContentTable(), s = n.querySelector('[e-mappinguid="' + c + '"]').parentElement.cloneNode(!0), a = r.querySelectorAll("td:nth-child(" + (u + 1) + "):not(.e-groupcaption)"), o && (l = o.querySelectorAll("td:nth-child(" + (u + 1) + "):not(.e-groupcaption)")));
            var y = n.querySelector("tr").querySelectorAll(".e-grouptopleftcell");
            if (y.length > 0)
                for (var v = 0; v < y.length; v++) d += y[v].offsetWidth;
            var b = r.querySelector(".e-detailrowcollapse") || r.querySelector(".e-detailrowexpand");
            (this.parent.detailTemplate || this.parent.childGrid) && b && (d += b.offsetWidth);
            var w = [s],
                S = [],
                x = [];
            if (o)
                for (v = 0; v < l.length; v++) x[v] = l[v].cloneNode(!0);
            for (v = 0; v < a.length; v++) S[v] = a[v].cloneNode(!0);
            var k = this.createTable(n, w, "e-gridheader"),
                T = this.createTable(r, S, "e-gridcontent"),
                D = null;
            x.length && (D = this.createTable(o, x, "e-gridfooter"));
            var E = h.getColumns()[f],
                R = E.width = C(Math.max(k, T, D)),
                P = E.maxWidth && parseFloat(E.maxWidth.toString());
            if (parseInt(R, 10) > P && (E.width = P), this.widthService.setColumnWidth(h.getColumns()[f]), !1 === h.getColumns().some((function(e) {
                    return null === e.width || void 0 === e.width || e.width.length <= 0
                }))) {
                var I = h.getColumns();
                for (v = 0; v < I.length; v++) I[v].visible && (p += parseFloat(I[v].width))
            }
            var M = p + d;
            p > 0 && !h.getFrozenColumns() && ((this.parent.detailTemplate || this.parent.childGrid) && this.widthService.setColumnWidth(new xn({
                width: "30px"
            })), "Auto" === this.parent.resizeSettings.mode && (M = "100%"), n.style.width = C(M), r.style.width = C(M), g(o) || (o.style.width = C(M)));
            var L = n.offsetWidth;
            h.getContent().scrollWidth > L ? (n.classList.add("e-tableborder"), r.classList.add("e-tableborder")) : (n.classList.remove("e-tableborder"), r.classList.remove("e-tableborder")), g(o) || o.classList.add("e-tableborder")
        }, e.prototype.destroy = function() {
            var e = this.parent.element;
            e && (e.querySelector(".e-gridheader") || e.querySelector(".e-gridcontent")) && (this.widthService = null, this.unwireEvents(), this.removeEventListener())
        }, e.prototype.getModuleName = function() {
            return "resize"
        }, e.prototype.findColumn = function(e) {
            for (var t = 0; t < e.length; t++) {
                var i = e[t],
                    n = this.parent.getColumnIndexByField(i),
                    r = this.parent.getColumns()[n];
                n > -1 && !g(r) && !0 === r.visible && this.resizeColumn(i, n)
            }
        }, e.prototype.createTable = function(e, t, i) {
            var n = this.parent.createElement("div");
            n.className = this.parent.element.className, n.style.cssText = "display: inline-block;visibility:hidden;position:absolute";
            var r = this.parent.createElement("div");
            r.className = i;
            var o = this.parent.createElement("table");
            o.className = e.className, o.classList.add("e-resizetable"), o.style.cssText = "table-layout: auto;width: auto";
            for (var s = this.parent.createElement("tr"), a = 0; a < t.length; a++) {
                var l = s.cloneNode();
                l.className = e.querySelector("tr").className, l.appendChild(t[a]), o.appendChild(l)
            }
            r.appendChild(o), n.appendChild(r), document.body.appendChild(n);
            var h = o.getBoundingClientRect().width;
            return document.body.removeChild(n), Math.ceil(h)
        }, e.prototype.addEventListener = function() {
            this.parent.isDestroyed || (this.parent.on(Rr, this.refreshHeight, this), this.parent.on(Sr, this.wireEvents, this), this.parent.on(xr, this.autoFit, this), this.parent.on("refreshResizeHandlers", this.refreshHeight, this))
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off(Rr, this.refreshHeight), this.parent.off(Sr, this.wireEvents), this.parent.off("refreshResizeHandlers", this.refreshHeight))
        }, e.prototype.render = function() {
            this.unwireEvents(), this.wireEvents(), this.setHandlerHeight()
        }, e.prototype.refreshHeight = function() {
            for (var e = this.getResizeHandlers(), t = 0; t < e.length; t++) e[t].parentElement.offsetHeight > 0 && (e[t].style.height = e[t].parentElement.offsetHeight + "px");
            this.setHandlerHeight()
        }, e.prototype.wireEvents = function() {
            ye.add(this.parent.getHeaderContent(), me.touchStartEvent, this.resizeStart, this), ye.add(this.parent.getHeaderContent(), "dblclick", this.callAutoFit, this)
        }, e.prototype.unwireEvents = function() {
            ye.remove(this.parent.getHeaderContent(), me.touchStartEvent, this.resizeStart), ye.remove(this.parent.getHeaderContent(), "dblclick", this.callAutoFit)
        }, e.prototype.getResizeHandlers = function() {
            return this.parent.getFrozenColumns() ? [].slice.call(this.parent.getHeaderContent().querySelectorAll("." + Dd)) : [].slice.call(this.parent.getHeaderTable().querySelectorAll("." + Dd))
        }, e.prototype.setHandlerHeight = function() {
            for (var e = [].slice.call(this.parent.getHeaderTable().querySelectorAll("." + Ed)), t = 0; t < e.length; t++) e[t].style.height = e[t].parentElement.offsetHeight + "px"
        }, e.prototype.callAutoFit = function(e) {
            if (e.target.classList.contains("e-rhandler")) {
                var t = this.getTargetColumn(e);
                if (t.columns) return;
                this.resizeColumn(t.field, this.parent.getNormalizedColumnIndex(t.uid), t.uid), Tt(e.target, Id).classList.add("e-resized")
            }
        }, e.prototype.resizeStart = function(e) {
            var t = this;
            if (e.target.classList.contains("e-rhandler")) {
                if (!this.helper) {
                    if (0 === this.getScrollBarWidth()) {
                        if (this.parent.allowGrouping)
                            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) this.widthService.setColumnWidth(new xn({
                                width: "30px"
                            }), i);
                        for (var n = 0, r = this.refreshColumnWidth(); n < r.length; n++) {
                            var o = r[n];
                            this.widthService.setColumnWidth(o)
                        }
                        this.widthService.setWidthToTable()
                    }
                    if (this.refreshStackedColumnWidth(), this.element = e.target, this.parent.getVisibleFrozenColumns()) {
                        var s = this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody"),
                            a = this.parent.getContent().querySelector(".e-frozencontent").querySelector("tbody"),
                            l = s.querySelectorAll("tr"),
                            h = a.querySelectorAll("tr");
                        for (i = 0; i < l.length; i++) this.parent.rowHeight ? (l[i].style.height = this.parent.rowHeight + "px", h[i].style.height = this.parent.rowHeight + "px") : (l[i].style.removeProperty("height"), h[i].style.removeProperty("height"))
                    }
                    this.parentElementWidth = this.parent.element.getBoundingClientRect().width, this.appendHelper(), this.column = this.getTargetColumn(e), this.pageX = this.getPointX(e), this.parent.enableRtl ? this.minMove = parseFloat(this.column.width.toString()) - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0) : this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0) - parseFloat(g(this.column.width) ? "" : this.column.width.toString()), this.minMove += this.pageX
                }
                if (me.isDevice && !this.helper.classList.contains(Rd)) this.helper.classList.add(Rd), ye.add(document, me.touchStartEvent, this.removeHelper, this), ye.add(this.helper, me.touchStartEvent, this.resizeStart, this);
                else {
                    var p = void 0;
                    if (!S() || this.parent.isJsComponent) p = {
                        e: e,
                        column: this.column
                    };
                    else p = {
                        column: u({}, this.column)
                    };
                    this.parent.trigger("resizeStart", p, (function(e) {
                        e.cancel || t.parent.isEdit ? t.cancelResizeAction() : (ye.add(document, me.touchEndEvent, t.resizeEnd, t), ye.add(t.parent.element, me.touchMoveEvent, t.resizing, t), t.updateCursor("add"))
                    }))
                }
            }
        }, e.prototype.cancelResizeAction = function(e) {
            e && (ye.remove(this.parent.element, me.touchMoveEvent, this.resizing), ye.remove(document, me.touchEndEvent, this.resizeEnd), this.updateCursor("remove")), me.isDevice && (ye.remove(document, me.touchStartEvent, this.removeHelper), ye.remove(this.helper, me.touchStartEvent, this.resizeStart)), wt(this.helper), this.refresh()
        }, e.prototype.getWidth = function(e, t, i) {
            return t && e < t ? t : i && e > i ? i : e
        }, e.prototype.updateResizeEleHeight = function() {
            for (var e = [].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")), t = 0; t < e.length; t++) e[t].style.height = this.element.parentElement.offsetHeight + "px"
        }, e.prototype.getColData = function(e, t) {
            return {
                width: parseFloat(g(this.widthService.getWidth(e)) || "auto" === this.widthService.getWidth(e) ? "0" : this.widthService.getWidth(e).toString()) + t,
                minWidth: e.minWidth ? parseFloat(e.minWidth.toString()) : null,
                maxWidth: e.maxWidth ? parseFloat(e.maxWidth.toString()) : null
            }
        }, e.prototype.resizing = function(e) {
            if (!g(this.column)) {
                var t = 0;
                g(this.column) && (t = Ka(this.element, "th").offsetWidth), this.parent.allowTextWrap && (this.updateResizeEleHeight(), this.setHelperHeight());
                var i = this.getPointX(e),
                    n = this.parent.enableRtl ? -(i - this.pageX) : i - this.pageX,
                    r = this.getColData(this.column, n);
                r.width || (r.width = Tt(this.element, "th").offsetWidth);
                var o = this.getWidth(r.width, r.minWidth, r.maxWidth);
                if (this.parent.log("resize_min_max", {
                        column: this.column,
                        width: o
                    }), (!this.parent.enableRtl && this.minMove >= i || this.parent.enableRtl && this.minMove <= i) && (o = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10, this.pageX = i = this.minMove), o !== parseFloat(g(this.column.width) || "auto" === this.column.width ? t.toString() : this.column.width.toString())) {
                    this.pageX = i, this.column.width = C(o);
                    var s = {
                        e: e,
                        column: this.column
                    };
                    if (this.parent.trigger("resizing", s), s.cancel) return void this.cancelResizeAction(!0);
                    var a = [this.column],
                        l = [this.column];
                    this.column.columns && (a = this.getSubColumns(this.column, []), a = this.calulateColumnsWidth(a, !1, n), l = this.calulateColumnsWidth(a, !0, n));
                    for (var h = 0, p = l; h < p.length; h++) {
                        var d = p[h];
                        this.widthService.setColumnWidth(d, null, "resize")
                    }
                    this.updateHelper()
                }
                this.isDblClk = !1
            }
        }, e.prototype.calulateColumnsWidth = function(e, t, i) {
            for (var n = [], r = 0, o = e; r < o.length; r++) {
                for (var s = o[r], a = 0, l = 0; l < e.length; l++) a += parseFloat(e[l].width.toString());
                var h = this.getColData(s, parseFloat(s.width) * i / a),
                    p = this.getWidth(h.width, h.minWidth, h.maxWidth);
                p !== parseFloat(s.width.toString()) && (t && (s.width = C(p < 1 ? 1 : p)), n.push(s))
            }
            return n
        }, e.prototype.getSubColumns = function(e, t) {
            for (var i = 0, n = e.columns; i < n.length; i++) {
                var r = n[i];
                !1 !== r.visible && r.allowResizing && (r.columns ? this.getSubColumns(r, t) : t.push(r))
            }
            return t
        }, e.prototype.resizeEnd = function(e) {
            if (this.helper && !this.parent.isDestroyed) {
                var t;
                if (ye.remove(this.parent.element, me.touchMoveEvent, this.resizing), ye.remove(document, me.touchEndEvent, this.resizeEnd), this.updateCursor("remove"), wt(this.helper), !S() || this.parent.isJsComponent) t = {
                    e: e,
                    column: this.column
                };
                else t = {
                    column: u({}, this.column)
                };
                var i = this.parent.getContent().querySelector(".e-content"),
                    n = i.querySelector(".e-movablecontent") ? i.querySelector(".e-movablecontent") : i;
                n.scrollHeight > n.clientHeight && (this.parent.scrollModule.setPadding(), n.style.overflowY = "scroll"), this.parent.trigger("resizeStop", t), Tt(this.element, ".e-headercell").classList.add("e-resized"), Ka(this.element, "e-frozenheader") ? this.isFrozenColResized = !0 : this.isFrozenColResized = !1, this.parent.getFrozenColumns() && this.parent.notify("freezerender", {
                    case: "textwrap"
                }), this.parent.allowTextWrap && (this.updateResizeEleHeight(), this.parent.notify("textWrapRefresh", {
                    case: "textwrap"
                })), this.refresh(), this.doubleTapEvent(e), this.isDblClk = !0
            }
        }, e.prototype.getPointX = function(e) {
            return e.touches && e.touches.length ? e.touches[0].pageX : e.pageX
        }, e.prototype.refreshColumnWidth = function() {
            for (var e = this.parent.getColumns(), t = 0, i = [].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell")); t < i.length; t++)
                for (var n = i[t], r = 0, o = e; r < o.length; r++) {
                    var s = o[r];
                    if (n.querySelector("[e-mappinguid]") && n.querySelector("[e-mappinguid]").getAttribute("e-mappinguid") === s.uid && s.visible) {
                        s.width = n.getBoundingClientRect().width;
                        break
                    }
                }
            return e
        }, e.prototype.refreshStackedColumnWidth = function() {
            for (var e = 0, t = this.parent.getStackedColumns(this.parent.columns); e < t.length; e++) {
                var i = t[e];
                i.width = this.getStackedWidth(i, 0)
            }
        }, e.prototype.getStackedWidth = function(e, t) {
            for (var i = 0, n = e.columns; i < n.length; i++) {
                var r = n[i];
                !1 !== r.visible && (r.columns ? this.getStackedWidth(r, t) : t += r.width)
            }
            return t
        }, e.prototype.getTargetColumn = function(e) {
            var t = Tt(e.target, Id),
                i = (t = t.querySelector(".e-headercelldiv") || t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");
            return this.parent.getColumnByUid(i)
        }, e.prototype.updateCursor = function(e) {
            var t = [].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));
            t.push(this.parent.element);
            for (var i = 0, n = t; i < n.length; i++) {
                n[i].classList[e](Md)
            }
        }, e.prototype.refresh = function() {
            this.column = null, this.pageX = null, this.element = null, this.helper = null
        }, e.prototype.appendHelper = function() {
            this.helper = this.parent.createElement("div", {
                className: Pd
            }), this.parent.element.appendChild(this.helper), this.setHelperHeight()
        }, e.prototype.setHelperHeight = function() {
            var e = this.parent.getContent().offsetHeight - this.getScrollBarWidth(),
                t = Tt(this.element, Id),
                i = [].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),
                n = this.parent.getFrozenColumns();
            n && (t.parentElement.children.length !== n ? i.splice(0, i.length / 2) : i.splice(i.length / 2, i.length / 2));
            for (var r = i.indexOf(t.parentElement); r < i.length && r > -1; r++) e += i[r].offsetHeight;
            var o = this.calcPos(t);
            o.left += this.parent.enableRtl ? -1 : t.offsetWidth - 2, this.helper.style.cssText = "height: " + e + "px; top: " + o.top + "px; left:" + Math.floor(o.left) + "px;"
        }, e.prototype.getScrollBarWidth = function(e) {
            var t = this.parent.getFrozenColumns() ? this.parent.getContent().querySelector(".e-movablecontent") : this.parent.getContent().firstChild;
            return t.scrollHeight > t.clientHeight && e || t.scrollWidth > t.clientWidth ? rl() : 0
        }, e.prototype.removeHelper = function(e) {
            var t = e.target.classList;
            t.contains(Dd) || t.contains(Rd) || !this.helper || (ye.remove(document, me.touchStartEvent, this.removeHelper), ye.remove(this.helper, me.touchStartEvent, this.resizeStart), wt(this.helper), this.refresh())
        }, e.prototype.updateHelper = function() {
            var e = Tt(this.element, Id),
                t = Math.floor(this.calcPos(e).left + (this.parent.enableRtl ? -1 : e.offsetWidth - 2));
            if (t > this.parentElementWidth && (t = this.parentElementWidth - 2), this.parent.getFrozenColumns()) {
                var i = Tt(e, ".e-table").offsetLeft;
                t < i && (t = i)
            }
            this.helper.style.left = t + "px"
        }, e.prototype.calcPos = function(e) {
            for (var t = {
                    top: 0,
                    left: 0
                }, i = e.getBoundingClientRect(), n = e.ownerDocument, r = Ka(e, "e-grid") || n.documentElement; r && (r === n.body || r === n.documentElement) && "static" === r.style.position;) r = r.parentNode;
            return r && r !== e && 1 === r.nodeType && (t = r.getBoundingClientRect()), {
                top: i.top - t.top,
                left: i.left - t.left
            }
        }, e.prototype.doubleTapEvent = function(e) {
            this.getUserAgent() && this.isDblClk && (this.tapped ? (clearTimeout(this.tapped), this.callAutoFit(e), this.tapped = null) : this.tapped = setTimeout(this.timeoutHandler(), 300))
        }, e.prototype.getUserAgent = function() {
            var e = me.userAgent.toLowerCase();
            return /iphone|ipod|ipad/.test(e)
        }, e.prototype.timeoutHandler = function() {
            this.tapped = null
        }, e
    }(),
    Od = function() {
        function e(e) {
            Pa.Inject(Ld), this.parent = e
        }
        return e.prototype.autoFitColumns = function(e) {
            this.parent.grid.autoFitColumns(e)
        }, e.prototype.getModuleName = function() {
            return "resize"
        }, e.prototype.destroy = function() {
            this.parent.isDestroyed || this.parent.grid.resizeModule.destroy()
        }, e
    }(),
    Ad = function() {
        function e(e) {
            this.parent = e, hp.Inject(Od), this.parent.treeGrid.allowResizing = this.parent.allowResizing, this.bindEvents()
        }
        return e.prototype.getModuleName = function() {
            return "resize"
        }, e.prototype.bindEvents = function() {
            var e = this;
            this.parent.treeGrid.resizeStart = function(t) {
                e.parent.trigger("resizeStart", t)
            }, this.parent.treeGrid.resizing = function(t) {
                e.parent.trigger("resizing", t)
            }, this.parent.treeGrid.resizeStop = function(t) {
                e.parent.trigger("resizeStop", t)
            }
        }, e.prototype.destroy = function() {}, e
    }(),
    Bd = function() {
        function e(e) {
            this.parent = e
        }
        return e.prototype.addNew = function(e, t) {
            var i, n;
            if (this.isEdit = !1, n = this.parent.frozenRows && "Top" === this.parent.editSettings.newRowPosition ? this.parent.getHeaderContent().querySelector("tbody") : this.parent.getContentTable().querySelector("tbody"), t.row = this.parent.createElement("tr", {
                    className: "e-row e-addedrow"
                }), n.querySelector(".e-emptyrow")) {
                var r = n.querySelector(".e-emptyrow");
                if (r.parentNode.removeChild(r), this.parent.getFrozenColumns()) {
                    var o = this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody");
                    o.firstElementChild.parentNode.removeChild(o.firstElementChild)
                }
            }
            if ("Top" === this.parent.editSettings.newRowPosition ? n.insertBefore(t.row, n.firstChild) : n.appendChild(t.row), t.row.appendChild(this.getEditElement(e, !1, void 0, t, !0)), this.parent.editModule.checkLastRow(t.row, t), this.parent.getFrozenColumns()) {
                var s = this.renderMovableform(t.row, t);
                i = this.parent.frozenRows && "Top" === this.parent.editSettings.newRowPosition ? this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody") : this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody"), "Top" === this.parent.editSettings.newRowPosition ? i.insertBefore(s, i.firstChild) : i.appendChild(s), t.row.querySelector(".e-normaledit").setAttribute("colspan", this.parent.getVisibleFrozenColumns() + ""), s.setAttribute("colspan", "" + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns())), "auto" === this.parent.height && this.parent.notify("frozenHeight", {})
            }
        }, e.prototype.renderMovableform = function(e, t) {
            var i = e.cloneNode(!0),
                n = t.movableForm = i.querySelector("form");
            return this.parent.editSettings.template ? (n.innerHTML = "", this.appendChildren(n, t.rowData, !1), i) : (this.renderMovable(e, i), i.querySelector("colgroup").innerHTML = this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").innerHTML, i)
        }, e.prototype.updateFreezeEdit = function(e, t) {
            return t = t.concat([].slice.call(this.getFreezeRow(e).querySelectorAll("td.e-rowcell")))
        }, e.prototype.getFreezeRow = function(e) {
            if (this.parent.getFrozenColumns()) {
                var t = parseInt(e.getAttribute("aria-rowindex"), 10),
                    i = this.parent.getContent().querySelector(".e-frozencontent").querySelector("tbody"),
                    n = this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody"),
                    r = this.parent.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody"),
                    o = this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody");
                if (this.parent.frozenRows && t >= this.parent.frozenRows && (t -= this.parent.frozenRows), i.contains(e)) return this.parent.infiniteScrollSettings.enableCache ? this.parent.getMovableRowByIndex(t) : n.children[t];
                if (n.contains(e)) return this.parent.infiniteScrollSettings.enableCache ? this.parent.getRowByIndex(t) : i.children[t];
                if (r.contains(e)) return o.children[t];
                if (o.contains(e)) return r.children[t]
            }
            return e
        }, e.prototype.update = function(e, t) {
            this.isEdit = !0;
            if (Tt(t.row, ".e-movablecontent") && (t.row = this.getFreezeRow(t.row), S() && this.parent.isServerRendered && (t.cloneRow = t.row.cloneNode(!0))), S() && this.parent.isServerRendered) {
                t.row.parentNode.insertBefore(t.cloneRow, t.row), t.row.classList.add("e-hiddenrow");
                var i = [].slice.call(t.cloneRow.querySelectorAll("td.e-rowcell"));
                t.cloneRow.innerHTML = "", i = this.updateFreezeEdit(t.cloneRow, i), t.cloneRow.appendChild(this.getEditElement(e, !0, i, t, !0)), t.cloneRow.classList.add("e-editedrow"), this.refreshFreezeEdit(t.cloneRow, t)
            } else {
                i = [].slice.call(t.row.querySelectorAll("td.e-rowcell"));
                t.row.innerHTML = "", i = this.updateFreezeEdit(t.row, i), t.row.appendChild(this.getEditElement(e, !0, i, t, !0)), t.row.classList.add("e-editedrow"), this.parent.editModule.checkLastRow(t.row, t), this.refreshFreezeEdit(t.row, t)
            }
        }, e.prototype.refreshFreezeEdit = function(e, t) {
            var i, n, r = e.firstChild,
                o = parseInt(e.getAttribute("aria-rowindex"), 10);
            if (this.parent.getFrozenColumns()) {
                o < this.parent.frozenRows ? (n = this.parent.getHeaderContent(), i = ".e-frozenheader") : (n = this.parent.getContent(), i = ".e-frozencontent");
                var s = r.cloneNode(!0),
                    a = t.movableForm = s.querySelector("form");
                this.parent.editSettings.template && (a.innerHTML = "", this.appendChildren(a, t.rowData, !1));
                var l = void 0;
                n.querySelector(i).contains(e) ? (l = this.parent.getMovableRowByIndex(o), S() && this.parent.isServerRendered ? (t.frozen = l, t.cloneFrozen = l.cloneNode(!0), l.classList.add("e-hiddenrow"), l.parentNode.insertBefore(t.cloneFrozen, l), this.updateFrozenCont(t.cloneFrozen, r, s)) : this.updateFrozenCont(l, r, s)) : (l = this.parent.getRowByIndex(o), S() && this.parent.isServerRendered ? (t.frozen = l, t.cloneFrozen = l.cloneNode(!0), l.parentNode.insertBefore(t.cloneFrozen, l), l.classList.add("e-hiddenrow"), this.updateFrozenCont(t.cloneFrozen, s, r)) : this.updateFrozenCont(l, s, r)), S() && this.parent.isServerRendered ? (t.cloneFrozen.appendChild(s), t.cloneFrozen.classList.add("e-editedrow")) : (l.appendChild(s), l.classList.add("e-editedrow")), Ml(t.movableForm.querySelector("td:not(.e-hide)"), t.form.querySelector("td:not(.e-hide)"))
            }
        }, e.prototype.updateFrozenCont = function(e, t, i) {
            e.innerHTML = "", this.parent.editSettings.template || (this.renderMovable(t, i), i.querySelector("colgroup").innerHTML = this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").innerHTML), t.setAttribute("colspan", this.parent.getVisibleFrozenColumns() + ""), i.setAttribute("colspan", this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns() + "")
        }, e.prototype.renderMovable = function(e, t) {
            var i = this.parent.getFrozenColumns();
            t.querySelector("tr").innerHTML = "";
            for (var n = i; n < this.parent.getColumns().length; n++) t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[i]))
        }, e.prototype.getEditElement = function(e, t, i, n, r) {
            var o = this.parent,
                s = 0,
                a = g(o.detailTemplate) && g(o.childGrid) ? 0 : 1;
            o.allowGrouping && (s = o.groupSettings.columns.length);
            var l = this.parent.createElement("td", {
                    className: "e-editcell e-normaledit",
                    attrs: {
                        colspan: (o.getVisibleColumns().length - o.getVisibleFrozenColumns() + this.parent.getIndentCount()).toString()
                    }
                }),
                h = n.form = this.parent.createElement("form", {
                    id: o.element.id + "EditForm",
                    className: "e-gridform"
                });
            if (this.parent.editSettings.template) return this.appendChildren(h, n.rowData, r), l.appendChild(h), l;
            var p = this.parent.createElement("table", {
                className: "e-table e-inline-edit",
                attrs: {
                    cellspacing: "0.25"
                }
            });
            p.appendChild(o.getContentTable().querySelector("colgroup").cloneNode(!0));
            var d = this.parent.createElement("tbody"),
                c = this.parent.createElement("tr"),
                u = 0;
            for (a && c.insertBefore(this.parent.createElement("td", {
                    className: "e-detailrowcollapse"
                }), c.firstChild), o.isRowDragable() && c.appendChild(this.parent.createElement("td", {
                    className: "e-dragindentcell"
                })); u < s;) c.appendChild(this.parent.createElement("td", {
                className: "e-indentcell"
            })), u++;
            var f = 0;
            for (u = 0; t && f < i.length && u < o.getColumns().length || u < o.getColumns().length;) {
                var m = t ? i[f].getAttribute("colspan") : null,
                    y = o.getColumns()[u],
                    v = this.parent.createElement("td", {
                        className: "e-rowcell",
                        attrs: {
                            style: "text-align:" + (y.textAlign ? y.textAlign : ""),
                            colspan: m || ""
                        }
                    });
                y.visible ? (v.appendChild(e[y.uid]), "booleanedit" === y.editType ? v.classList.add("e-boolcell") : (y.commands || y.commandsTemplate) && ut([v], "e-unboundcell")) : v.classList.add("e-hide"), c.appendChild(v), u = m ? u + parseInt(m, 10) : u + 1, f++
            }
            return d.appendChild(c), p.appendChild(d), h.appendChild(p), l.appendChild(h), l
        }, e.prototype.removeEventListener = function() {}, e.prototype.appendChildren = function(e, t, i) {
            var n = this,
                r = u({}, t, {
                    isAdd: !this.isEdit,
                    isFrozen: i
                }, !0),
                o = this.parent.element.id + "editSettingsTemplate";
            this.parent.isReact && "string" != typeof this.parent.editSettings.template ? (this.parent.getEditTemplate()(r, this.parent, "editSettingsTemplate", o, null, null, e), this.parent.renderTemplates()) : $a(e, this.parent.getEditTemplate()(r, this.parent, "editSettingsTemplate", o));
            Ue(o, "Template", this.parent.editSettings, !0, (function() {
                for (var e = n.parent.getColumns(), t = 0; t < e.length; t++) e[t].validationRules && (n.parent.editModule.formObj.rules[e[t].field] = e[t].validationRules)
            }))
        }, e
    }(),
    Fd = function() {
        function e(e) {
            this.parent = e
        }
        return e.prototype.update = function(e, t) {
            if (S() && this.parent.isServerRendered) {
                t.cloneCell.innerHTML = "", t.cloneCell.appendChild(this.getEditElement(e, t)), t.cloneCell.classList.remove("e-ellipsistooltip"), t.cloneCell.classList.add("e-editedbatchcell"), Et(t.row, ["e-editedrow", "e-batchrow"], [])
            } else t.cell.innerHTML = "", t.cell.appendChild(this.getEditElement(e, t)), t.cell.classList.remove("e-ellipsistooltip"), t.cell.classList.add("e-editedbatchcell"), Et(t.row, ["e-editedrow", "e-batchrow"], [])
        }, e.prototype.getEditElement = function(e, t) {
            var i = this.parent,
                n = this.parent.createElement("form", {
                    id: i.element.id + "EditForm",
                    className: "e-gridform"
                });
            return n.appendChild(e[t.columnObject.uid]), "booleanedit" === t.columnObject.editType && t.cell.classList.add("e-boolcell"), t.columnObject.editType || t.cell.classList.add("e-inputbox"), n
        }, e.prototype.removeEventListener = function() {}, e
    }(),
    Nd = function() {
        function e(e, t) {
            this.parent = e, this.serviceLocator = t, this.parent.isDestroyed || (this.parent.on("dialog-destroy", this.destroy, this), this.parent.on("destroy", this.destroy, this))
        }
        return e.prototype.setLocaleObj = function() {
            this.l10n = this.serviceLocator.getService("localization")
        }, e.prototype.addNew = function(e, t) {
            this.isEdit = !1, this.createDialog(e, t)
        }, e.prototype.update = function(e, t) {
            this.isEdit = !0, this.createDialog(e, t)
        }, e.prototype.createDialog = function(e, t) {
            var i = this.parent;
            this.dialog = this.parent.createElement("div", {
                id: i.element.id + "_dialogEdit_wrapper",
                styles: "width: auto"
            }), this.dialog.setAttribute("aria-label", "Dialog edit"), i.element.appendChild(this.dialog), this.setLocaleObj(), this.dialogObj = new Fo(u({
                header: i.editSettings.headerTemplate ? this.getDialogEditTemplateElement("HeaderTemplate", t) : this.isEdit ? this.l10n.getConstant("EditFormTitle") + t.primaryKeyValue[0] : this.l10n.getConstant("AddFormTitle"),
                isModal: !0,
                visible: !0,
                cssClass: "e-edit-dialog",
                content: this.getEditElement(e, t),
                showCloseIcon: !0,
                allowDragging: !0,
                close: this.dialogClose.bind(this),
                closeOnEscape: !0,
                width: i.editSettings.template ? "auto" : "330px",
                target: t.target ? t.target : document.body,
                animationSettings: {
                    effect: "None"
                },
                footerTemplate: i.editSettings.footerTemplate ? this.getDialogEditTemplateElement("FooterTemplate", t) : null,
                buttons: [{
                    click: this.btnClick.bind(this),
                    buttonModel: {
                        content: this.l10n.getConstant("SaveButton"),
                        cssClass: "e-primary",
                        isPrimary: !0
                    }
                }, {
                    click: this.btnClick.bind(this),
                    buttonModel: {
                        cssClass: "e-flat",
                        content: this.l10n.getConstant("CancelButton")
                    }
                }]
            }, i.editSettings.dialog && i.editSettings.dialog.params || {})), S() ? this.dialogObj.locale = this.parent.locale : t.dialog = this.dialogObj;
            this.dialogObj.isStringTemplate = !0, this.dialogObj.appendTo(this.dialog), Il(this.parent.element, this.dialogObj.element.parentElement)
        }, e.prototype.btnClick = function(e) {
            this.l10n.getConstant("CancelButton").toLowerCase() === e.target.innerText.trim().toLowerCase() ? this.dialogClose() : this.parent.endEdit()
        }, e.prototype.dialogClose = function() {
            this.parent.closeEdit()
        }, e.prototype.destroy = function(e) {
            for (var t = ["template", "headerTemplate", "footerTemplate"], i = 0; i < t.length; i++)
                if (this.parent.editSettings[t[i]]) {
                    var n = t[i].charAt(0).toUpperCase() + t[i].slice(1);
                    Ue(this.parent.element.id + "editSettings" + n, n, this.parent.editSettings)
                } this.parent.notify("destroy-form", {}), this.parent.isEdit = !1, this.parent.notify(Mr, {}), this.dialog && !this.dialogObj.isDestroyed && (this.dialogObj.destroy(), Ct(this.dialog))
        }, e.prototype.getDialogEditTemplateElement = function(e, t) {
            var i = this.parent.createElement("div", {
                    className: "e-dialog" + e
                }),
                n = u({}, t.rowData, {
                    isAdd: !this.isEdit
                }, !0),
                r = this.parent.element.id + "editSettings" + e;
            return $a(i, this.parent.getEditHeaderTemplate()(n, this.parent, "editSettings" + e, r)), Ue(r, e, this.parent.editSettings), i
        }, e.prototype.getEditElement = function(e, t) {
            var i = this,
                n = this.parent,
                r = this.parent.createElement("div", {
                    className: this.isEdit ? "e-editedrow" : "e-insertedrow"
                }),
                o = t.form = this.parent.createElement("form", {
                    id: n.element.id + "EditForm",
                    className: "e-gridform"
                });
            if (this.parent.editSettings.template) {
                var s = this.parent.element.id + "editSettingsTemplate",
                    a = u({}, t.rowData, {
                        isAdd: !this.isEdit
                    }, !0);
                this.parent.isReact && "string" != typeof this.parent.editSettings.template ? (this.parent.getEditTemplate()(a, this.parent, "editSettingsTemplate", s, null, null, o), this.parent.renderTemplates()) : $a(o, this.parent.getEditTemplate()(a, this.parent, "editSettingsTemplate", s));
                return Ue(s, "Template", this.parent.editSettings, !0, (function() {
                    for (var e = i.parent.getColumns(), t = 0; t < e.length; t++) e[t].validationRules && (i.parent.editModule.formObj.rules[e[t].field] = e[t].validationRules)
                })), r.appendChild(o), r
            }
            for (var l = this.parent.createElement("table", {
                    className: "e-table",
                    attrs: {
                        cellspacing: "6px"
                    }
                }), h = this.parent.createElement("tbody"), p = n.getColumns(), d = 0; d < p.length; d++)
                if (!(this.parent.editModule.checkColumnIsGrouped(p[d]) || p[d].commands || p[d].commandsTemplate)) {
                    var c = this.parent.createElement("tr"),
                        g = this.parent.createElement("td", {
                            className: "e-rowcell",
                            attrs: {
                                style: "text-align:" + (this.parent.enableRtl ? "right" : "left") + ";width:190px"
                            }
                        });
                    this.parent.createElement("label", {
                        innerHTML: p[d].field
                    });
                    e[p[d].uid].classList.remove("e-input"), g.appendChild(e[p[d].uid]), c.appendChild(g), h.appendChild(c)
                } return l.appendChild(h), o.appendChild(l), r.appendChild(o), r
        }, e.prototype.removeEventListener = function() {
            this.parent.isDestroyed || (this.parent.off("dialog-destroy", this.destroy), this.parent.off("destroy", this.destroy))
        }, e
    }(),
    Hd = function() {
        function e(e, t) {
            this.editType = {
                Inline: Bd,
                Normal: Bd,
                Batch: Fd,
                Dialog: Nd
            }, this.parent = e, this.serviceLocator = t, this.renderer = new this.editType[this.parent.editSettings.mode](e, t), this.focus = t.getService("focus")
        }
        return e.prototype.addNew = function(e) {
            this.renderer.addNew(this.getEditElements(e), e), this.convertWidget(e)
        }, e.prototype.update = function(e) {
            this.renderer.update(this.getEditElements(e), e), this.parent.notify("edit-form", e), this.convertWidget(e)
        }, e.prototype.convertWidget = function(e) {
            var t, i, n, r = this.parent,
                o = r.getFrozenColumns(),
                s = "Dialog" === r.editSettings.mode ? document.querySelector("#" + r.element.id + "_dialogEdit_wrapper").querySelector(".e-gridform") : r.element.querySelector(".e-gridform");
            if (o && "Normal" === r.editSettings.mode) {
                var a = parseInt(e.row.getAttribute("aria-rowindex"), 10);
                n = r.frozenRows && ("add" === e.requestType && "Top" === r.editSettings.newRowPosition || a < r.frozenRows) ? r.element.querySelector(".e-movableheader").querySelector(".e-gridform") : r.element.querySelector(".e-movablecontent").querySelector(".e-gridform")
            }
            for (var l = "Batch" !== r.editSettings.mode ? r.getColumns() : [r.getColumnByField(e.columnName)], h = 0, p = l; h < p.length; h++) {
                var d = p[h];
                if (!this.parent.editSettings.template || g(d.field)) {
                    if (!this.parent.editModule.checkColumnIsGrouped(d) && !d.commands) {
                        d.valueAccessor(d.field, e.rowData, d), i = o && l.indexOf(d) >= o && "Normal" === r.editSettings.mode ? n.querySelector("[e-mappinguid=" + d.uid + "]") : s.querySelector("[e-mappinguid=" + d.uid + "]");
                        var c = d.edit.write;
                        g(i) || ("string" == typeof c ? (c = xl(c, window))({
                            rowData: e.rowData,
                            element: i,
                            column: d,
                            requestType: e.requestType,
                            row: e.row,
                            foreignKeyData: d.isForeignColumn() && xl(d.field, e.foreignKeyData)
                        }) : d.edit.write({
                            rowData: e.rowData,
                            element: i,
                            column: d,
                            requestType: e.requestType,
                            row: e.row,
                            foreignKeyData: d.isForeignColumn() && xl(d.field, e.foreignKeyData)
                        }), t || i.getAttribute("disabled") || (this.focusElement(i, e.type), t = !0))
                    }
                } else {
                    var f = u({}, e);
                    f.element = s.querySelector("[name=" + sl(d.field) + "]"), g(f.element) && o && (f.element = n.querySelector("[name=" + sl(d.field) + "]")), "string" == typeof d.edit.write ? xl(d.edit.write, window)(f) : d.edit.write(f)
                }
            }
            if (!(0 === o || this.parent.allowTextWrap || "add" !== e.requestType && "beginEdit" !== e.requestType || "Dialog" === this.parent.editSettings.mode || g(s) || g(n))) {
                var m = n.querySelector("tr").children[0],
                    y = s.querySelector("tr").children[0];
                y.offsetHeight > m.offsetHeight ? m.style.height = y.offsetHeight + "px" : y.style.height = m.offsetHeight + "px"
            }
        }, e.prototype.focusElement = function(e, t) {
            var i = this.parent.element.querySelector(".e-edit-checkselect");
            (g(i) || i.nextElementSibling.classList.add("e-focus"), "Batch" === this.parent.editSettings.mode) ? this.focus.onClick({
                target: Tt(e, "td")
            }, !0): !this.parent.enableVirtualization || "Normal" !== this.parent.editSettings.mode || this.parent.enableVirtualization && "Bottom" === this.parent.editSettings.newRowPosition && Ka(e, "e-addedrow") ? e.focus() : e.focus({
                preventScroll: !0
            });
            e.classList.contains("e-defaultcell") && e.setSelectionRange(e.value.length, e.value.length)
        }, e.prototype.getEditElements = function(e) {
            var t = this,
                i = this.parent,
                n = {},
                r = "Batch" !== i.editSettings.mode ? i.getColumns() : [i.getColumnByField(e.columnName)];
            if (this.parent.editSettings.template) return {};
            for (var o = 0, s = r.length; o < s; o++) {
                var a = r[o];
                if (!this.parent.editModule.checkColumnIsGrouped(a))
                    if (a.commands || a.commandsTemplate) {
                        var l = this.serviceLocator.getService("cellRendererFactory"),
                            h = new os(this.parent),
                            p = l.getCellRenderer(dr.CommandColumn),
                            d = h.generateRows(e.rowData)[0].cells.filter((function(e) {
                                return e.rowID
                            })),
                            c = p.render(d[o], e.rowData, {
                                index: e.row ? e.row.getAttribute("aria-rowindex") : 0
                            });
                        (w = c.firstElementChild).setAttribute("textAlign", c.getAttribute("textAlign")), n[a.uid] = w
                    } else {
                        var g = a.valueAccessor(a.field, e.rowData, a),
                            f = {
                                column: a,
                                value: g,
                                type: e.requestType,
                                data: e.rowData
                            },
                            m = a.edit.create,
                            y = void 0;
                        if (a.editTemplate) {
                            y = this.parent.createElement("span", {
                                attrs: {
                                    "e-mappinguid": a.uid
                                }
                            });
                            var v = this.parent.element.id + a.uid + "editTemplate",
                                b = Dl({}, e.rowData, {
                                    column: a
                                });
                            if (this.parent.isReact && "string" != typeof a.editTemplate) a.getEditTemplate()(u({
                                index: e.rowIndex
                            }, b), this.parent, "editTemplate", v, null, null, y), this.parent.renderTemplates();
                            else $a(y, a.getEditTemplate()(u({
                                index: e.rowIndex
                            }, b), this.parent, "editTemplate", v));
                            if (S()) {
                                Ue(v, "EditTemplate", a, !0, function(e) {
                                    var i = e;
                                    return function() {
                                        t.parent.editModule.formObj.rules[i.field] = i.validationRules
                                    }
                                }(a))
                            }
                        } else {
                            var w;
                            if ("string" == typeof(y = "string" == typeof m ? (m = xl(m, window))(f) : a.edit.create(f)))(w = this.parent.createElement("div")).innerHTML = y, y = w.firstChild;
                            var C = "input" !== y.tagName && y.querySelectorAll("input").length,
                                x = sl(a.field);
                            St(C ? y.querySelector("input") : y, {
                                name: x,
                                "e-mappinguid": a.uid,
                                id: i.element.id + x
                            }), Et(y, ["e-input", "e-field"], []), "Right" === a.textAlign && y.classList.add("e-ralign"), ((a.isPrimaryKey || a.isIdentity) && "beginEdit" === e.requestType || a.isIdentity && "add" === e.requestType) && y.setAttribute("disabled", "")
                        }
                        n[a.uid] = y
                    }
            }
            return n
        }, e.prototype.destroy = function() {
            this.renderer.removeEventListener()
        }, e
    }(),
    Vd = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    jd = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    zd = "e-frame",
    qd = "e-ripple-container",
    Wd = ["title", "class", "style", "disabled", "readonly", "name", "value"],
    _d = function(e) {
        function t(t, i) {
            var n = e.call(this, t, i) || this;
            return n.isFocused = !1, n.isMouseClick = !1, n
        }
        return Vd(t, e), t.prototype.changeState = function(e) {
            var t, i, n = this.getWrapper().getElementsByClassName(zd)[0];
            ii && (i = this.getWrapper().getElementsByClassName(qd)[0]), "check" === e ? (n.classList.remove("e-stop"), n.classList.add("e-check"), i && (i.classList.remove("e-ripple-stop"), i.classList.add("e-ripple-check")), t = "true", this.element.checked = !0) : "uncheck" === e ? (gt([n], ["e-check", "e-stop"]), i && gt([i], ["e-ripple-check", "e-ripple-stop"]), t = "false", this.element.checked = !1) : (n.classList.remove("e-check"), n.classList.add("e-stop"), i && (i.classList.remove("e-ripple-check"), i.classList.add("e-ripple-stop")), t = "mixed", this.element.indeterminate = !0), this.getWrapper().setAttribute("aria-checked", t)
        }, t.prototype.clickHandler = function(e) {
            this.isMouseClick && (this.focusOutHandler(), this.isMouseClick = !1), this.indeterminate ? (this.changeState(this.checked ? "check" : "uncheck"), this.indeterminate = !1, this.element.indeterminate = !1) : this.checked ? (this.changeState("uncheck"), this.checked = !1) : (this.changeState("check"), this.checked = !0);
            var t = {
                checked: this.element.checked,
                event: e
            };
            this.trigger("change", t)
        }, t.prototype.destroy = function() {
            var t = this,
                i = this.getWrapper();
            e.prototype.destroy.call(this), this.wrapper && (i = this.wrapper, this.disabled || this.unWireEvents(), "INPUT" === this.tagName ? (this.getWrapper() && i.parentNode.insertBefore(this.element, i), wt(i), this.element.checked = !1, this.indeterminate && (this.element.indeterminate = !1), ["name", "value", "disabled"].forEach((function(e) {
                t.element.removeAttribute(e)
            }))) : (["role", "aria-checked", "class"].forEach((function(e) {
                i.removeAttribute(e)
            })), i.innerHTML = ""))
        }, t.prototype.focusHandler = function() {
            this.isFocused = !0
        }, t.prototype.focusOutHandler = function() {
            this.getWrapper().classList.remove("e-focus"), this.isFocused = !1
        }, t.prototype.getModuleName = function() {
            return "checkbox"
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist(["checked", "indeterminate"])
        }, t.prototype.getWrapper = function() {
            return this.element.parentElement ? this.element.parentElement.parentElement : null
        }, t.prototype.initialize = function() {
            g(this.initialCheckedValue) && (this.initialCheckedValue = this.checked), this.name && this.element.setAttribute("name", this.name), this.value && this.element.setAttribute("value", this.value), this.checked && this.changeState("check"), this.indeterminate && this.changeState(), this.disabled && this.setDisabled()
        }, t.prototype.initWrapper = function() {
            var e = this.element.parentElement;
            e.classList.contains("e-checkbox-wrapper") || (e = this.createElement("div", {
                className: "e-checkbox-wrapper",
                attrs: {
                    role: "checkbox",
                    "aria-checked": "false"
                }
            }), this.element.parentNode.insertBefore(e, this.element));
            var t, i, n = this.createElement("label", {
                    attrs: {
                        for: this.element.id
                    }
                }),
                r = this.createElement("span", {
                    className: "e-icons " + zd
                });
            if (e.classList.add("e-wrapper"), this.enableRtl && e.classList.add("e-rtl"), this.cssClass && ut([e], this.cssClass.split(" ")), e.appendChild(n), n.appendChild(this.element), i = n, (t = this).element.getAttribute("ejs-for") && i.appendChild(t.createElement("input", {
                    attrs: {
                        name: t.name || t.element.name,
                        value: "false",
                        type: "hidden"
                    }
                })), n.appendChild(r), ii) {
                var o = this.createElement("span", {
                    className: qd
                });
                "Before" === this.labelPosition ? n.appendChild(o) : n.insertBefore(o, r), Jt(o, {
                    duration: 400,
                    isCenterRipple: !0
                })
            }
            this.label && this.setText(this.label)
        }, t.prototype.keyUpHandler = function() {
            this.isFocused && this.getWrapper().classList.add("e-focus")
        }, t.prototype.labelMouseHandler = function(e) {
            this.isMouseClick = !0, Nr(e, this.getWrapper().getElementsByClassName(qd)[0])
        }, t.prototype.onPropertyChanged = function(e, t) {
            for (var i = this.getWrapper(), n = 0, r = Object.keys(e); n < r.length; n++) {
                switch (r[n]) {
                    case "checked":
                        this.indeterminate = !1, this.element.indeterminate = !1, this.changeState(e.checked ? "check" : "uncheck");
                        break;
                    case "indeterminate":
                        e.indeterminate ? this.changeState() : (this.element.indeterminate = !1, this.changeState(this.checked ? "check" : "uncheck"));
                        break;
                    case "disabled":
                        e.disabled ? (this.setDisabled(), this.wrapper = this.getWrapper(), this.unWireEvents()) : (this.element.disabled = !1, i.classList.remove("e-checkbox-disabled"), i.setAttribute("aria-disabled", "false"), this.wireEvents());
                        break;
                    case "cssClass":
                        t.cssClass && gt([i], t.cssClass.split(" ")), e.cssClass && ut([i], e.cssClass.split(" "));
                        break;
                    case "enableRtl":
                        e.enableRtl ? i.classList.add("e-rtl") : i.classList.remove("e-rtl");
                        break;
                    case "label":
                        this.setText(e.label);
                        break;
                    case "labelPosition":
                        var o = i.getElementsByClassName("e-label")[0],
                            s = i.getElementsByTagName("label")[0];
                        wt(o), "After" === e.labelPosition ? s.appendChild(o) : s.insertBefore(o, i.getElementsByClassName(zd)[0]);
                        break;
                    case "name":
                        this.element.setAttribute("name", e.name);
                        break;
                    case "value":
                        this.element.setAttribute("value", e.value);
                        break;
                    case "htmlAttributes":
                        this.updateHtmlAttributeToWrapper()
                }
            }
        }, t.prototype.preRender = function() {
            var e = this.element;
            this.formElement = Tt(this.element, "form"), this.tagName = this.element.tagName, e = Ar(this.createElement, "EJS-CHECKBOX", "checkbox", e, "e-checkbox-wrapper", "checkbox"), this.element = e, "checkbox" !== this.element.getAttribute("type") && this.element.setAttribute("type", "checkbox"), this.element.id || (this.element.id = m("e-" + this.getModuleName()))
        }, t.prototype.render = function() {
            this.initWrapper(), this.initialize(), this.disabled || this.wireEvents(), this.updateHtmlAttributeToWrapper(), this.renderComplete(), this.wrapper = this.getWrapper()
        }, t.prototype.setDisabled = function() {
            var e = this.getWrapper();
            this.element.disabled = !0, e.classList.add("e-checkbox-disabled"), e.setAttribute("aria-disabled", "true")
        }, t.prototype.setText = function(e) {
            var t = this.getWrapper().getElementsByClassName("e-label")[0];
            if (t) t.textContent = e;
            else {
                e = this.enableHtmlSanitizer ? Oi.sanitize(e) : e, t = this.createElement("span", {
                    className: "e-label",
                    innerHTML: e
                });
                var i = this.getWrapper().getElementsByTagName("label")[0];
                "Before" === this.labelPosition ? i.insertBefore(t, this.getWrapper().getElementsByClassName(zd)[0]) : i.appendChild(t)
            }
        }, t.prototype.changeHandler = function(e) {
            e.stopPropagation()
        }, t.prototype.formResetHandler = function() {
            this.checked = this.initialCheckedValue, this.element.checked = this.initialCheckedValue
        }, t.prototype.unWireEvents = function() {
            var e = this.wrapper;
            ye.remove(this.element, "click", this.clickHandler), ye.remove(this.element, "keyup", this.keyUpHandler), ye.remove(this.element, "focus", this.focusHandler), ye.remove(this.element, "focusout", this.focusOutHandler);
            var t = e.getElementsByTagName("label")[0];
            ye.remove(t, "mousedown", this.labelMouseHandler), ye.remove(t, "mouseup", this.labelMouseHandler), this.formElement && ye.remove(this.formElement, "reset", this.formResetHandler), "EJS-CHECKBOX" === this.tagName && ye.remove(this.element, "change", this.changeHandler)
        }, t.prototype.wireEvents = function() {
            var e = this.getWrapper();
            ye.add(this.element, "click", this.clickHandler, this), ye.add(this.element, "keyup", this.keyUpHandler, this), ye.add(this.element, "focus", this.focusHandler, this), ye.add(this.element, "focusout", this.focusOutHandler, this);
            var t = e.getElementsByTagName("label")[0];
            ye.add(t, "mousedown", this.labelMouseHandler, this), ye.add(t, "mouseup", this.labelMouseHandler, this), this.formElement && ye.add(this.formElement, "reset", this.formResetHandler, this), "EJS-CHECKBOX" === this.tagName && ye.add(this.element, "change", this.changeHandler, this)
        }, t.prototype.updateHtmlAttributeToWrapper = function() {
            if (!g(this.htmlAttributes))
                for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) {
                    var i = t[e];
                    if (Wd.indexOf(i) > -1) {
                        var n = this.getWrapper();
                        if ("class" === i) ut([n], this.htmlAttributes[i].split(" "));
                        else if ("title" === i) n.setAttribute(i, this.htmlAttributes[i]);
                        else if ("style" === i) {
                            this.getWrapper().getElementsByClassName(zd)[0].setAttribute(i, this.htmlAttributes[i])
                        } else this.element.setAttribute(i, this.htmlAttributes[i])
                    }
                }
        }, t.prototype.click = function() {
            this.element.click()
        }, t.prototype.focusIn = function() {
            this.element.focus()
        }, jd([_t()], t.prototype, "change", void 0), jd([_t()], t.prototype, "created", void 0), jd([zt(!1)], t.prototype, "checked", void 0), jd([zt("")], t.prototype, "cssClass", void 0), jd([zt(!1)], t.prototype, "disabled", void 0), jd([zt(!1)], t.prototype, "indeterminate", void 0), jd([zt("")], t.prototype, "label", void 0), jd([zt("After")], t.prototype, "labelPosition", void 0), jd([zt("")], t.prototype, "name", void 0), jd([zt("")], t.prototype, "value", void 0), jd([zt(!1)], t.prototype, "enableHtmlSanitizer", void 0), jd([zt({})], t.prototype, "htmlAttributes", void 0), t = jd([Gt], t)
    }(pi),
    Gd = function() {
        function e(e) {
            this.activeClasses = ["e-selectionbackground", "e-active"], this.parent = e
        }
        return e.prototype.create = function(e) {
            var t = e.column,
                i = "e-field e-boolcell";
            "checkbox" === t.type && (i = "e-field e-boolcell e-edit-checkselect");
            var n = sl(e.column.field);
            return this.parent.createElement("input", {
                className: i,
                attrs: {
                    type: "checkbox",
                    value: e.value,
                    "e-mappinguid": t.uid,
                    id: this.parent.element.id + n,
                    name: n
                }
            })
        }, e.prototype.read = function(e) {
            return e.checked
        }, e.prototype.write = function(e) {
            var t, i;
            "add" === e.requestType || e.row.classList.contains("e-addedrow");
            if (g(e.row) || (t = e.row.querySelector(".e-edit-checkselect")), xl(e.column.field, e.rowData) && (i = JSON.parse(xl(e.column.field, e.rowData).toString().toLowerCase())), !g(t) && "checkbox" === e.column.type) {
                if (this.editType = this.parent.editSettings.mode, this.editRow = e.row, "add" !== e.requestType) {
                    var n = this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));
                    i = !!n && n.isSelected
                }
                cl.apply(void 0, [
                    [].slice.call(e.row.querySelectorAll(".e-rowcell")), i
                ].concat(this.activeClasses))
            }
            this.obj = new _d(u({
                label: "Dialog" !== this.parent.editSettings.mode ? " " : e.column.headerText,
                checked: i,
                disabled: !ll(e.column, e.requestType, e.element),
                enableRtl: this.parent.enableRtl,
                change: this.checkBoxChange.bind(this)
            }, e.column.edit.params)), S() && (this.obj.locale = this.parent.locale), this.obj.appendTo(e.element)
        }, e.prototype.checkBoxChange = function(e) {
            if (this.editRow && "Dialog" !== this.editType) {
                var t = !1;
                e.checked ? (t = !0, this.editRow.setAttribute("aria-selected", t.toString())) : this.editRow.removeAttribute("aria-selected"), cl.apply(void 0, [
                    [].slice.call(this.editRow.querySelectorAll(".e-rowcell")), t
                ].concat(this.activeClasses))
            }
        }, e.prototype.destroy = function() {
            this.obj && this.obj.destroy()
        }, e
    }(),
    Ud = "",
    Kd = "",
    Yd = [],
    Xd = "";

function Qd(e, t, i, n) {
    var r = t;
    n = null == n || n;
    var o = {
        item: null,
        index: null
    };
    if (e && e.length) {
        for (var s = e.length, a = n ? e.toLocaleLowerCase() : e, l = 0, h = r; l < h.length; l++) {
            var p = h[l],
                d = (n ? p.textContent.toLocaleLowerCase() : p.textContent).replace(/^\s+|\s+$/g, "");
            if ("Equal" === i && d === a || "StartsWith" === i && d.substr(0, s) === a) return o.item = p, o.index = l, {
                item: p,
                index: l
            }
        }
        return o
    }
    return o
}
var Jd, Zd = {
    li: "e-list-item",
    ul: "e-list-parent e-ul",
    group: "e-list-group-item",
    icon: "e-list-icon",
    text: "e-list-text",
    check: "e-list-check",
    checked: "e-checked",
    selected: "e-selected",
    expanded: "e-expanded",
    textContent: "e-text-content",
    hasChild: "e-has-child",
    level: "e-level",
    url: "e-list-url",
    collapsible: "e-icon-collapsible",
    disabled: "e-disabled",
    image: "e-list-img",
    iconWrapper: "e-icon-wrapper",
    anchorWrap: "e-anchor-wrap",
    navigable: "e-navigable"
};

function $d(e, t) {
    var i = {};
    if (g(e) || "string" == typeof e || "number" == typeof e || !g(e.isHeader)) return e;
    for (var n = 0, r = Object.keys(t); n < r.length; n++) {
        var o = t[r[n]],
            s = g(o) || "string" != typeof o ? void 0 : a(o, e);
        g(s) || (i[o] = s)
    }
    return i
}! function(e) {
    e.defaultMappedFields = {
        id: "id",
        text: "text",
        url: "url",
        value: "value",
        isChecked: "isChecked",
        enabled: "enabled",
        expanded: "expanded",
        selected: "selected",
        iconCss: "iconCss",
        child: "child",
        isVisible: "isVisible",
        hasChildren: "hasChildren",
        tooltip: "tooltip",
        htmlAttributes: "htmlAttributes",
        urlAttributes: "urlAttributes",
        imageAttributes: "imageAttributes",
        imageUrl: "imageUrl",
        groupBy: null
    };
    var t = {
            level: 1,
            listRole: "presentation",
            itemRole: "presentation",
            groupItemRole: "group",
            itemText: "list-item",
            wrapperRole: "presentation"
        },
        i = {
            showCheckBox: !1,
            showIcon: !1,
            enableHtmlSanitizer: !1,
            expandCollapse: !1,
            fields: e.defaultMappedFields,
            ariaAttributes: t,
            listClass: "",
            itemClass: "",
            processSubChild: !1,
            sortOrder: "None",
            template: null,
            groupTemplate: null,
            headerTemplate: null,
            expandIconClass: "e-icon-collapsible",
            moduleName: "list",
            expandIconPosition: "Right",
            itemNavigable: !1
        };

    function n(e, t, i, n, o) {
        return S(e, r(e, t, i, n, o), null, n)
    }

    function r(e, t, n, r, o) {
        var s = [],
            a = u({}, i, r);
        Zd = b(a.moduleName);
        for (var l = m(), h = 0; h < t.length; h++)
            if (!g(t[h])) {
                var p = void 0;
                if (a.itemCreating && "function" == typeof a.itemCreating) {
                    var d = {
                        dataSource: t,
                        curData: t[h],
                        text: t[h],
                        options: a
                    };
                    a.itemCreating(d)
                }
                if (p = n ? v(e, t[h], void 0, null, null, [], null, l, h, r) : C(e, t[h], void 0, null, null, r, o), a.itemCreated && "function" == typeof a.itemCreated) {
                    d = {
                        dataSource: t,
                        curData: t[h],
                        text: t[h],
                        item: p,
                        options: a
                    };
                    a.itemCreated(d)
                }
                s.push(p)
            } return s
    }

    function o(n, r, o, s, a, l) {
        var h = u({}, i, o);
        Zd = b(h.moduleName);
        var f, w = u({}, e.defaultMappedFields, h.fields),
            S = u({}, t, h.ariaAttributes),
            x = [];
        s && (S.level = s);
        var k, T, D = [];
        r && r.length && !g(p(r).item) && !p(r).item.hasOwnProperty(w.id) && (f = m());
        for (var E = 0; E < r.length; E++) {
            var R = $d(r[E], w);
            if (!g(r[E])) {
                if (h.itemCreating && "function" == typeof h.itemCreating) {
                    var P = {
                        dataSource: r,
                        curData: r[E],
                        text: R[w.text],
                        options: h,
                        fields: w
                    };
                    h.itemCreating(P)
                }
                var I = r[E];
                h.itemCreating && "function" == typeof h.itemCreating && (R = $d(r[E], w)), R.hasOwnProperty(w.id) && !g(R[w.id]) && (f = R[w.id]);
                var M = [];
                if (h.showCheckBox && (h.itemNavigable && (R[w.url] || R[w.urlAttributes]) ? x.push(n("input", {
                        className: Zd.check,
                        attrs: {
                            type: "checkbox"
                        }
                    })) : M.push(n("input", {
                        className: Zd.check,
                        attrs: {
                            type: "checkbox"
                        }
                    }))), !0 === a) h.showIcon && R.hasOwnProperty(w.iconCss) && !g(R[w.iconCss]) && M.push(n("span", {
                    className: Zd.icon + " " + R[w.iconCss]
                })), T = (k = v(n, I, R, w, h.itemClass, M, !(!I.hasOwnProperty("isHeader") || !I.isHeader), f, E, o)).querySelector("." + Zd.anchorWrap), h.itemNavigable && x.length && yt(x, k.firstElementChild);
                else {
                    if ((k = C(n, I, R, w, h.itemClass, o, l)).classList.add(Zd.level + "-" + S.level), k.setAttribute("aria-level", S.level.toString()), T = k.querySelector("." + Zd.anchorWrap), R.hasOwnProperty(w.tooltip) && k.setAttribute("title", R[w.tooltip]), R.hasOwnProperty(w.htmlAttributes) && R[w.htmlAttributes] && d(k, R[w.htmlAttributes]), R.hasOwnProperty(w.enabled) && !1 === R[w.enabled] && k.classList.add(Zd.disabled), R.hasOwnProperty(w.isVisible) && !1 === R[w.isVisible] && (k.style.display = "none"), R.hasOwnProperty(w.imageUrl) && !g(R[w.imageUrl]) && !h.template) {
                        var L = {
                            src: R[w.imageUrl]
                        };
                        c(L, R[w.imageAttributes]);
                        var O = n("img", {
                            className: Zd.image,
                            attrs: L
                        });
                        T ? T.insertAdjacentElement("afterbegin", O) : yt([O], k.firstElementChild)
                    }
                    if (h.showIcon && R.hasOwnProperty(w.iconCss) && !g(R[w.iconCss]) && !h.template) {
                        var A;
                        A = n("div", {
                            className: Zd.icon + " " + R[w.iconCss]
                        }), T ? T.insertAdjacentElement("afterbegin", A) : yt([A], k.firstElementChild)
                    }
                    M.length && yt(M, k.firstElementChild), h.itemNavigable && x.length && yt(x, k.firstElementChild), y(n, R, w, r, h, k, S.level)
                }
                if (T && ut([k], [Zd.navigable]), h.itemCreated && "function" == typeof h.itemCreated) {
                    P = {
                        dataSource: r,
                        curData: r[E],
                        text: R[w.text],
                        item: k,
                        options: h,
                        fields: w
                    };
                    h.itemCreated(P)
                }
                x = [], D.push(k)
            }
        }
        return D
    }

    function s(e, t, n, r, s, a) {
        var l = u({}, i, n);
        return S(e, o(e, t, n, r, s, a), l.listClass, n)
    }

    function a(e, t) {
        if (t && e) {
            return Array.prototype.slice.call(t).indexOf(e)
        }
    }

    function l(e, t, i) {
        if (void 0 === i && (i = new on), "Ascending" === e) i.sortBy(t, "ascending", !0);
        else if ("Descending" === e) i.sortBy(t, "descending", !0);
        else
            for (var n = 0; n < i.queries.length; n++) "onSortBy" === i.queries[n].fn && i.queries.splice(n, 1);
        return i
    }

    function h(e, t) {
        return new yn(e).executeLocal(t)
    }

    function p(e) {
        for (var t = {
                typeof: null,
                item: null
            }, i = 0; i < e.length; i++)
            if (!g(e[i])) return {
                typeof: typeof e[i],
                item: e[i]
            };
        return t
    }

    function d(e, t) {
        var i = {};
        c(i, t), i.class && (ut([e], i.class.split(" ")), delete i.class), St(e, i)
    }

    function f(e) {
        for (var t = {}, i = e.attributes, n = 0; n < i.length; n++) t[i[n].nodeName] = i[n].nodeValue;
        return t
    }

    function m() {
        return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
    }

    function y(e, t, i, n, r, o, a) {
        var l = t[i.child] || [],
            h = t[i.hasChildren];
        if (l.length && (h = !0, o.classList.add(Zd.hasChild), r.processSubChild)) {
            var p = s(e, l, r, ++a);
            o.appendChild(p)
        }
        r.expandCollapse && h && !r.template && (o.firstElementChild.classList.add(Zd.iconWrapper), ("Left" === r.expandIconPosition ? yt : vt)([e("div", {
            className: "e-icons " + r.expandIconClass
        })], o.querySelector("." + Zd.textContent)))
    }

    function v(e, n, r, o, s, a, l, h, p, c) {
        var f, m, y = u({}, i, c),
            v = u({}, t, y.ariaAttributes),
            b = n,
            C = n;
        "string" != typeof n && "number" != typeof n && "boolean" != typeof n && (f = n, b = "boolean" == typeof r[o.text] || "number" == typeof r[o.text] ? r[o.text] : r[o.text] || "", C = r[o.value]), m = g(f) || g(r[o.id]) || "" === r[o.id] ? h + "-" + p : h;
        var S = e("li", {
            className: (!0 === l ? Zd.group : Zd.li) + " " + (g(s) ? "" : s),
            id: m,
            attrs: "" !== v.groupItemRole && "" !== v.itemRole ? {
                role: !0 === l ? v.groupItemRole : v.itemRole
            } : {}
        });
        return f && r.hasOwnProperty(o.enabled) && "false" === r[o.enabled].toString() && S.classList.add(Zd.disabled), l ? S.innerText = b : (S.setAttribute("data-value", g(C) ? "null" : C), S.setAttribute("role", "option"), f && r.hasOwnProperty(o.htmlAttributes) && r[o.htmlAttributes] && d(S, r[o.htmlAttributes]), a.length && !y.itemNavigable && vt(a, S), f && (r[o.url] || r[o.urlAttributes] && r[o.urlAttributes].href) ? S.appendChild(w(e, f, o, b, a, y.itemNavigable)) : (a.length && y.itemNavigable && vt(a, S), S.appendChild(document.createTextNode(b)))), S
    }

    function b(e) {
        return {
            li: "e-" + e + "-item",
            ul: "e-" + e + "-parent e-ul",
            group: "e-" + e + "-group-item",
            icon: "e-" + e + "-icon",
            text: "e-" + e + "-text",
            check: "e-" + e + "-check",
            checked: "e-checked",
            selected: "e-selected",
            expanded: "e-expanded",
            textContent: "e-text-content",
            hasChild: "e-has-child",
            level: "e-level",
            url: "e-" + e + "-url",
            collapsible: "e-icon-collapsible",
            disabled: "e-disabled",
            image: "e-" + e + "-img",
            iconWrapper: "e-icon-wrapper",
            anchorWrap: "e-anchor-wrap",
            navigable: "e-navigable"
        }
    }

    function w(e, t, i, n, r, o) {
        var s, a = $d(t, i),
            l = {
                href: a[i.url]
            };
        if (a.hasOwnProperty(i.urlAttributes) && a[i.urlAttributes] && (c(l, a[i.urlAttributes]), l.href = a[i.url] ? a[i.url] : a[i.urlAttributes].href), o) {
            s = e("a", {
                className: Zd.text + " " + Zd.url
            });
            var h = e("div", {
                className: Zd.anchorWrap
            });
            r && r.length && vt(r, h), h.appendChild(document.createTextNode(n)), vt([h], s)
        } else s = e("a", {
            className: Zd.text + " " + Zd.url,
            innerHTML: n
        });
        return d(s, l), s
    }

    function C(e, n, r, o, s, a, l) {
        var h, p, d, c = u({}, i, a),
            f = u({}, t, c.ariaAttributes),
            y = n;
        "string" != typeof n && "number" != typeof n && (d = n, y = r[o.text] || "", h = g(r._id) ? r[o.id] : r._id, p = !(!n.hasOwnProperty("isHeader") || !n.isHeader)), a && a.enableHtmlSanitizer && (y = y);
        var v = e("li", {
            className: (!0 === p ? Zd.group : Zd.li) + " " + (g(s) ? "" : s),
            attrs: "" !== f.groupItemRole && "" !== f.itemRole ? {
                role: !0 === p ? f.groupItemRole : f.itemRole
            } : {}
        });
        g(h) ? v.setAttribute("data-uid", m()) : v.setAttribute("data-uid", h);
        if (a && a.removeBlazorID && "object" == typeof n && n.hasOwnProperty("BlazId") && delete n.BlazId, p && a && a.groupTemplate)(b = Ge(a.groupTemplate)(n, l, "groupTemplate", c.groupTemplateID, !!c.isStringTemplate, null, v)) && vt(b, v);
        else if (!p && a && a.template) {
            var b;
            (b = Ge(a.template)(n, l, "template", c.templateID, !!c.isStringTemplate, null, v)) && vt(b, v)
        } else {
            var C = e("div", {
                className: Zd.textContent,
                attrs: "" !== f.wrapperRole ? {
                    role: f.wrapperRole
                } : {}
            });
            if (d && (r[o.url] || r[o.urlAttributes] && r[o.urlAttributes].href)) C.appendChild(w(e, d, o, y, null, c.itemNavigable));
            else {
                var S = e("span", {
                    className: Zd.text,
                    attrs: "" !== f.itemText ? {
                        role: f.itemText
                    } : {}
                });
                a && a.enableHtmlSanitizer ? S.innerText = y : S.innerHTML = y, C.appendChild(S)
            }
            v.appendChild(C)
        }
        return v
    }

    function S(e, n, r, o) {
        var s = u({}, i, o),
            a = u({}, t, s.ariaAttributes),
            l = e("ul", {
                className: (Zd = b(s.moduleName)).ul + " " + (g(r) ? "" : r),
                attrs: "" !== a.listRole ? {
                    role: a.listRole
                } : {}
            });
        return vt(n, l), l
    }
    e.createList = function(e, r, o, a, l) {
        var h = u({}, i, o),
            d = u({}, t, h.ariaAttributes),
            c = p(r).typeof;
        return "string" === c || "number" === c ? n(e, r, a, o, l) : s(e, r, o, d.level, a, l)
    }, e.createListFromArray = n, e.createListItemFromArray = r, e.createListItemFromJson = o, e.createListFromJson = s, e.getSiblingLI = function(e, t, n) {
        if (Zd = b(i.moduleName), e && e.length) {
            var r, o, s = Array.prototype.slice.call(e);
            for (r = s[(o = t ? a(t, s) : !0 === n ? s.length : -1) + (!0 === n ? -1 : 1)]; r && (!mt(r) || r.classList.contains(Zd.disabled));) r = s[o += !0 === n ? -1 : 1];
            return r
        }
    }, e.indexOf = a, e.groupDataSource = function(t, i, n) {
        void 0 === n && (n = "None");
        var r = u({}, e.defaultMappedFields, i),
            o = (new on).group(r.groupBy),
            s = h(t, o = l(n, "key", o));
        t = [];
        for (var a = 0; a < s.length; a++) {
            var p = s[a].items,
                d = {};
            d[r.text] = s[a].key, d.isHeader = !0;
            var c = r.text;
            "id" === c && (d[c = "text"] = s[a].key), d._id = "group-list-item-" + (s[a].key ? s[a].key.toString().trim() : "undefined"), d.items = p, t.push(d);
            for (var g = 0; g < p.length; g++) t.push(p[g])
        }
        return t
    }, e.addSorting = l, e.getDataSource = h, e.createJsonFromElement = function t(n, r) {
        var o = u({}, i, r),
            s = u({}, e.defaultMappedFields, o.fields),
            a = n.cloneNode(!0),
            l = [];
        a.classList.add("json-parent");
        var h = a.querySelectorAll(".json-parent>li");
        a.classList.remove("json-parent");
        for (var p = 0; p < h.length; p++) {
            for (var d = h[p], c = d.querySelector("a"), g = d.querySelector("ul"), y = {}, v = c ? c.childNodes : d.childNodes, b = Object.keys(v), w = 0; w < v.length; w++) v[Number(b[w])].hasChildNodes() || (y[s.text] = v[Number(b[w])].textContent);
            var C = f(d);
            C.id ? (y[s.id] = C.id, delete C.id) : y[s.id] = m(), Object.keys(C).length && (y[s.htmlAttributes] = C), c && (C = f(c), Object.keys(C).length && (y[s.urlAttributes] = C)), g && (y[s.child] = t(g, r)), l.push(y)
        }
        return l
    }, e.renderContentTemplate = function(t, n, r, o, s, a) {
        for (var l, h = t("ul", {
                className: (Zd = b(i.moduleName)).ul,
                attrs: {
                    role: "presentation"
                }
            }), p = u({}, i, s), d = u({}, e.defaultMappedFields, o), c = Ge(n), f = [], y = m(), v = 0; v < r.length; v++) {
            var w = $d(r[v], d),
                C = r[v],
                S = C.isHeader;
            if (l = "string" == typeof r[v] || "number" == typeof r[v] ? C : w[d.value], p.itemCreating && "function" == typeof p.itemCreating) {
                var x = {
                    dataSource: r,
                    curData: C,
                    text: l,
                    options: p,
                    fields: d
                };
                p.itemCreating(x)
            }
            p.itemCreating && "function" == typeof p.itemCreating && (w = $d(r[v], d), l = "string" == typeof r[v] || "number" == typeof r[v] ? C : w[d.value]);
            var k = t("li", {
                id: y + "-" + v,
                className: S ? Zd.group : Zd.li,
                attrs: {
                    role: "presentation"
                }
            });
            if (S) "string" == typeof r[v] || "number" == typeof r[v] ? k.innerText = C : k.innerText = w[d.text];
            else {
                var T, D = S ? p.groupTemplateID : p.templateID;
                if (S)(T = c(C, a, "headerTemplate", D, !!p.isStringTemplate, null, k)) && vt(T, k);
                else(T = c(C, a, "template", D, !!p.isStringTemplate, null, k)) && vt(T, k);
                k.setAttribute("data-value", g(l) ? "null" : l), k.setAttribute("role", "option")
            }
            if (p.itemCreated && "function" == typeof p.itemCreated) {
                x = {
                    dataSource: r,
                    curData: C,
                    text: l,
                    item: k,
                    options: p,
                    fields: d
                };
                p.itemCreated(x)
            }
            f.push(k)
        }
        return vt(f, h), h
    }, e.renderGroupTemplate = function(t, n, r, o, s, a) {
        for (var l = Ge(t), h = u({}, e.defaultMappedFields, r), p = u({}, i, s), d = h.groupBy, c = 0, g = o; c < g.length; c++) {
            var f = g[c],
                m = {};
            m[d] = f.textContent, f.innerHTML = "";
            var y = l(m, a, "groupTemplate", p.groupTemplateID, !!p.isStringTemplate, null, f);
            y && vt(y, f)
        }
        return o
    }, e.generateId = m, e.generateUL = S, e.generateIcon = function(e, t, n, r) {
        var o = u({}, i, r);
        return Zd = b(o.moduleName), ("Left" === o.expandIconPosition ? yt : vt)([e("div", {
            className: "e-icons " + o.expandIconClass + " " + (g(n) ? "" : n)
        })], t.querySelector("." + Zd.textContent)), t
    }
}(Jd || (Jd = {}));
var ec, tc = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    ic = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    nc = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return tc(t, e), ic([zt()], t.prototype, "text", void 0), ic([zt()], t.prototype, "value", void 0), ic([zt()], t.prototype, "iconCss", void 0), ic([zt()], t.prototype, "groupBy", void 0), ic([zt()], t.prototype, "htmlAttributes", void 0), t
    }(oi),
    rc = "e-dropdownbase",
    oc = "e-rtl",
    sc = "e-content",
    ac = "e-active",
    lc = "e-hover",
    hc = "e-nodata",
    pc = "e-fixed-head",
    dc = "e-item-focus",
    cc = "e-list-item",
    uc = "e-list-group-item",
    gc = "e-disabled",
    fc = "e-dd-group",
    mc = function(e) {
        function t(t, i) {
            return e.call(this, t, i) || this
        }
        return tc(t, e), t.prototype.getPropObject = function(e, t, i) {
            var n = new Object,
                r = new Object;
            n[e] = t[e], r[e] = i[e];
            var o = new Object;
            return o.newProperty = n, o.oldProperty = r, o
        }, t.prototype.getValueByText = function(e, t, i) {
            var n = null;
            return g(this.listData) || (n = t ? this.checkValueCase(e, !0, i) : this.checkValueCase(e, !1, i)), n
        }, t.prototype.checkValueCase = function(e, t, i, n) {
            var r = this,
                o = null;
            n && (o = e);
            var s = this.listData,
                l = this.fields,
                h = this.typeOfData(s).typeof;
            if ("string" === h || "number" === h || "boolean" === h)
                for (var p = 0, d = s; p < d.length; p++) {
                    var c = d[p];
                    g(c) || (i ? o = this.checkingAccent(String(c), e, t) : t ? this.checkIgnoreCase(String(c), e) && (o = this.getItemValue(String(c), e, t)) : this.checkNonIgnoreCase(String(c), e) && (o = this.getItemValue(String(c), e, t, n)))
                } else t ? s.filter((function(t) {
                    !g(a(l.value, t)) && r.checkIgnoreCase(a(l.text, t).toString(), e) && (o = a(l.value, t))
                })) : n ? s.filter((function(e) {
                    var t = a(l.value, e);
                    g(t) || g(o) || t.toString() !== o.toString() || (o = a(l.text, e))
                })) : s.filter((function(t) {
                    r.checkNonIgnoreCase(a(l.text, t), e) && (o = a(l.value, t))
                }));
            return o
        }, t.prototype.checkingAccent = function(e, t, i) {
            var n = wn.ignoreDiacritics(String(e)),
                r = wn.ignoreDiacritics(t.toString()),
                o = null;
            return i ? this.checkIgnoreCase(n, r) && (o = this.getItemValue(String(e), t, i)) : this.checkNonIgnoreCase(String(e), t) && (o = this.getItemValue(String(e), t, i)), o
        }, t.prototype.checkIgnoreCase = function(e, t) {
            return String(e).toLowerCase() === t.toString().toLowerCase()
        }, t.prototype.checkNonIgnoreCase = function(e, t) {
            return String(e) === t.toString()
        }, t.prototype.getItemValue = function(e, t, i, n) {
            var r = this.listData,
                o = this.typeOfData(r).typeof;
            return n ? e.toString() : i ? "string" === o ? String(e) : this.getFormattedValue(String(e)) : "string" === o ? t : this.getFormattedValue(t)
        }, t.prototype.templateCompiler = function(e) {
            var t = !1;
            if (e) {
                try {
                    t = !!document.querySelectorAll(e).length
                } catch (e) {
                    t = !1
                }
            }
            return t
        }, t.prototype.l10nUpdate = function(e) {
            var t = "listbox" === this.getModuleName() ? this.ulElement : this.list;
            if ("No records found" !== this.noRecordsTemplate || "Request failed" !== this.actionFailureTemplate) {
                this.DropDownBaseresetBlazorTemplates(!1, !1, !0, !0);
                var i = e ? this.actionFailureTemplate : this.noRecordsTemplate,
                    n = e ? this.actionFailureTemplateId : this.noRecordsTemplateId;
                t.innerHTML = "";
                var r = Ge(this.templateCompiler(i) ? document.querySelector(i).innerHTML.trim() : i)({}, this, e ? "actionFailureTemplate" : "noRecordsTemplate", n, this.isStringTemplate, null, t);
                if (r && r.length > 0)
                    for (var o = 0; o < r.length; o++) t.appendChild(r[o]);
                this.DropDownBaseupdateBlazorTemplates(!1, !1, !e, e, !1, !1, !1, !1)
            } else {
                var s = new ki(this.getLocaleName(), {}, this.locale);
                "" !== s.getConstant("actionFailureTemplate") ? this.l10n = s : this.l10n = new ki("listbox" === this.getModuleName() ? "listbox" : "dropdowns", {
                    noRecordsTemplate: "No records found",
                    actionFailureTemplate: "Request failed"
                }, this.locale);
                var a = e ? this.l10n.getConstant("actionFailureTemplate") : this.l10n.getConstant("noRecordsTemplate");
                if ("listbox" === this.getModuleName()) {
                    var l = this.createElement("li");
                    l.textContent = a, t.appendChild(l), l.classList.add("e-list-nrt")
                } else t.innerHTML = a
            }
        }, t.prototype.getLocaleName = function() {
            return "drop-down-base"
        }, t.prototype.getTextByValue = function(e) {
            return this.checkValueCase(e, !1, !1, !0)
        }, t.prototype.getFormattedValue = function(e) {
            if (this.listData && this.listData.length) {
                var t = this.typeOfData(this.listData);
                if (S() && g(e) || "null" === e) return null;
                if ("number" == typeof a(this.fields.value ? this.fields.value : "value", t.item) || "number" === t.typeof) return parseFloat(e);
                if ("boolean" == typeof a(this.fields.value ? this.fields.value : "value", t.item) || "boolean" === t.typeof) return "true" === e
            }
            return e
        }, t.prototype.setEnableRtl = function() {
            this.list && this.enableRtlElements.push(this.list), this.enableRtl ? ut(this.enableRtlElements, oc) : gt(this.enableRtlElements, oc)
        }, t.prototype.initialize = function() {
            if (this.bindEvent = !0, this.actionFailureTemplateId = this.element.id + "ActionFailureTemplate", "UL" === this.element.tagName) {
                var e = Jd.createJsonFromElement(this.element);
                this.setProperties({
                    fields: {
                        text: "text",
                        value: "text"
                    }
                }, !0), this.resetList(e, this.fields)
            } else if ("SELECT" === this.element.tagName) {
                (this.dataSource instanceof Array ? this.dataSource.length > 0 : !g(this.dataSource)) || this.renderItemsBySelect()
            } else this.setListData(this.dataSource, this.fields, this.query)
        }, t.prototype.DropDownBaseupdateBlazorTemplates = function(e, t, i, n, r, o, s, a) {
            this.isStringTemplate || (this.itemTemplate && e && Ue(this.itemTemplateId, "ItemTemplate", this, a), this.groupTemplate && t && Ue(this.groupTemplateId, "GroupTemplate", this, a), this.noRecordsTemplate && i && Ue(this.noRecordsTemplateId, "NoRecordsTemplate", this, a), this.actionFailureTemplate && n && Ue(this.actionFailureTemplateId, "ActionFailureTemplate", this, a), r && Ue(this.valueTemplateId, "ValueTemplate", this, a), o && Ue(this.headerTemplateId, "HeaderTemplate", this), s && Ue(this.footerTemplateId, "FooterTemplate", this))
        }, t.prototype.DropDownBaseresetBlazorTemplates = function(e, t, i, n, r, o, s) {
            this.isStringTemplate || (this.itemTemplate && e && Ke(this.itemTemplateId), this.groupTemplate && t && Ke(this.groupTemplateId), this.noRecordsTemplate && i && Ke(this.noRecordsTemplateId), this.actionFailureTemplate && n && Ke(this.actionFailureTemplateId), r && Ke(this.valueTemplateId), o && Ke(this.headerTemplateId), s && Ke(this.footerTemplateId))
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist([])
        }, t.prototype.setEnabled = function() {
            this.element.setAttribute("aria-disabled", this.enabled ? "false" : "true")
        }, t.prototype.updateDataAttribute = function(e) {
            for (var t = ["class", "style", "id", "type"], i = {}, n = 0; n < this.element.attributes.length; n++) - 1 !== t.indexOf(this.element.attributes[n].name) || "dropdownlist" === this.getModuleName() && "readonly" === this.element.attributes[n].name || (i[this.element.attributes[n].name] = this.element.getAttribute(this.element.attributes[n].name));
            u(i, e, i), this.setProperties({
                htmlAttributes: i
            }, !0)
        }, t.prototype.renderItemsBySelect = function() {
            var e = this.element,
                t = {
                    value: "value",
                    text: "text"
                },
                i = [],
                n = e.querySelectorAll("select>optgroup"),
                r = e.querySelectorAll("select>option");
            if (this.getJSONfromOption(i, r, t), n.length) {
                for (var o = 0; o < n.length; o++) {
                    var s = n[o],
                        a = {};
                    a[t.text] = s.label, a.isHeader = !0;
                    var l = s.querySelectorAll("option");
                    i.push(a), this.getJSONfromOption(i, l, t)
                }
                e.querySelectorAll("select>option")
            }
            this.fields.text = t.text, this.fields.value = t.value, this.resetList(i, t)
        }, t.prototype.getJSONfromOption = function(e, t, i) {
            for (var n = 0, r = t; n < r.length; n++) {
                var o = r[n],
                    s = {};
                s[i.text] = o.innerText, s[i.value] = o.getAttribute(i.value) ? o.getAttribute(i.value) : o.innerText, e.push(s)
            }
        }, t.prototype.preRender = function() {
            this.scrollTimer = -1, this.enableRtlElements = [], this.isRequested = !1, this.isDataFetched = !1, this.itemTemplateId = this.element.id + "ItemTemplate", this.valueTemplateId = this.element.id + "ValueTemplate", this.groupTemplateId = this.element.id + "GroupTemplate", this.headerTemplateId = this.element.id + "HeaderTemplate", this.footerTemplateId = this.element.id + "FooterTemplate", this.noRecordsTemplateId = this.element.id + "NoRecordsTemplate"
        }, t.prototype.setListData = function(e, t, i) {
            var n, r = this;
            t = t || this.fields, this.isActive = !0;
            var o = {
                cancel: !1,
                data: e,
                query: i
            };
            this.trigger("actionBegin", o, (function(i) {
                if (!i.cancel)
                    if (r.showSpinner(), e instanceof yn) {
                        if (r.isRequested = !0, r.isDataFetched) return void r.emptyDataRequest(t);
                        i.data.executeQuery(r.getQuery(i.query)).then((function(e) {
                            r.trigger("actionComplete", e, (function(e) {
                                if (!e.cancel) {
                                    var i = e.result;
                                    0 === i.length && (r.isDataFetched = !0), n = r.renderItems(i, t), r.onActionComplete(n, i, e), r.groupTemplate && r.renderGroupTemplate(n), r.isRequested = !1, r.bindChildItems(i, n, t, e)
                                }
                            }))
                        })).catch((function(e) {
                            r.isRequested = !1, r.onActionFailure(e), r.hideSpinner()
                        }))
                    } else {
                        var o = new yn(i.data),
                            s = {
                                cancel: !1,
                                result: r.getQuery(i.query).executeLocal(o)
                            };
                        r.trigger("actionComplete", s, (function(e) {
                            e.cancel || (n = r.renderItems(e.result, t), r.onActionComplete(n, e.result), r.groupTemplate && r.renderGroupTemplate(n), r.bindChildItems(e.result, n, t))
                        }))
                    }
            }))
        }, t.prototype.bindChildItems = function(e, t, i, n) {
            var r = this;
            e.length >= 100 && "autocomplete" === this.getModuleName() ? setTimeout((function() {
                vt(r.remainingItems(r.sortedData, i), t), r.DropDownBaseupdateBlazorTemplates(!0, !1, !1, !1), r.liCollections = r.list.querySelectorAll("." + cc), r.updateListValues(), r.raiseDataBound(e, n)
            }), 0) : this.raiseDataBound(e, n)
        }, t.prototype.updateListValues = function() {}, t.prototype.findListElement = function(e, t, i, n) {
            var r = null;
            if (e)
                for (var o = [].slice.call(e.querySelectorAll(t)), s = 0; s < o.length; s++)
                    if (o[s].getAttribute(i) === n + "") {
                        r = o[s];
                        break
                    } return r
        }, t.prototype.raiseDataBound = function(e, t) {
            this.hideSpinner();
            var i = {
                items: e,
                e: t
            };
            this.trigger("dataBound", i)
        }, t.prototype.remainingItems = function(e, t) {
            var i = new yn(e).executeLocal((new on).skip(100));
            if (this.itemTemplate) {
                var n = this.templateListItem(i, t);
                return [].slice.call(n.childNodes)
            }
            var r = this.typeOfData(i).typeof;
            return "string" === r || "number" === r || "boolean" === r ? Jd.createListItemFromArray(this.createElement, i, !0, this.listOption(i, t), this) : Jd.createListItemFromJson(this.createElement, i, this.listOption(i, t), 1, !0, this)
        }, t.prototype.emptyDataRequest = function(e) {
            var t = [];
            this.onActionComplete(this.renderItems(t, e), t), this.isRequested = !1, this.hideSpinner()
        }, t.prototype.showSpinner = function() {}, t.prototype.hideSpinner = function() {}, t.prototype.onActionFailure = function(e) {
            this.liCollections = [], this.trigger("actionFailure", e), this.l10nUpdate(!0), ut([this.list], hc)
        }, t.prototype.onActionComplete = function(e, t, i) {
            this.listData = t, S() && this.isServerRendered && "listbox" === this.getModuleName() ? (Ct(this.list.querySelector(".e-list-parent")), Ct(this.list.querySelector(".e-hidden-select"))) : (this.isReact && this.clearTemplate(["itemTemplate", "groupTemplate", "actionFailureTemplate", "noRecordsTemplate"]), this.list.innerHTML = ""), this.fixedHeaderElement = g(this.fixedHeaderElement) ? this.fixedHeaderElement : null, this.list.appendChild(e), this.liCollections = this.list.querySelectorAll("." + cc), this.ulElement = this.list.querySelector("ul"), this.postRender(this.list, t, this.bindEvent)
        }, t.prototype.postRender = function(e, t, i) {
            var n = e.querySelector("." + cc),
                r = e.querySelector("." + ac);
            n && !r && n.classList.add(dc), t.length <= 0 ? (this.l10nUpdate(), ut([e], hc)) : e.classList.remove(hc)
        }, t.prototype.getQuery = function(e) {
            return e || (this.query ? this.query : new on)
        }, t.prototype.renderGroupTemplate = function(e) {
            if (null !== this.fields.groupBy && this.dataSource || this.element.querySelector("." + uc)) {
                var t = this.dataSource,
                    i = {
                        groupTemplateID: this.groupTemplateId,
                        isStringTemplate: this.isStringTemplate
                    },
                    n = e.querySelectorAll("." + uc);
                if (this.templateCompiler(this.groupTemplate)) {
                    var r = document.querySelector(this.groupTemplate).innerHTML.trim();
                    Jd.renderGroupTemplate(r, t, this.fields.properties, n, i, this)
                } else Jd.renderGroupTemplate(this.groupTemplate, t, this.fields.properties, n, i, this);
                this.DropDownBaseupdateBlazorTemplates(!1, !0, !1, !1, !1, !1, !1, !1)
            }
        }, t.prototype.createListItems = function(e, t) {
            e && t.groupBy || this.element.querySelector("optgroup") ? (t.groupBy && ("None" !== this.sortOrder && (e = this.getSortedDataSource(e)), e = Jd.groupDataSource(e, t.properties, this.sortOrder)), ut([this.list], fc)) : e = this.getSortedDataSource(e);
            var i = this.listOption(e, t),
                n = e.length > 100 ? new yn(e).executeLocal((new on).take(100)) : e;
            return this.sortedData = e, Jd.createList(this.createElement, "autocomplete" === this.getModuleName() ? n : e, i, !0, this)
        }, t.prototype.listOption = function(e, t) {
            var i = !g(t.iconCss),
                n = g(t.properties) ? t : t.properties;
            return u({}, null !== t.text || null !== t.value ? {
                fields: n,
                showIcon: i,
                ariaAttributes: {
                    groupItemRole: "presentation"
                }
            } : {
                fields: {
                    value: "text"
                }
            }, t, !0)
        }, t.prototype.setFloatingHeader = function(e) {
            g(this.fixedHeaderElement) && (this.fixedHeaderElement = this.createElement("div", {
                className: pc
            }), this.list.querySelector("li").classList.contains(uc) || (this.fixedHeaderElement.style.display = "none"), yt([this.fixedHeaderElement], this.list), this.setFixedHeader()), g(this.fixedHeaderElement) || "0" !== this.fixedHeaderElement.style.zIndex || this.setFixedHeader(), this.scrollStop(e)
        }, t.prototype.scrollStop = function(e) {
            for (var t = e.target, i = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue("height"), 10), n = Math.round(t.scrollTop / i), r = this.list.querySelectorAll("li"), o = n; o > -1; o--) {
                if (!g(r[o]) && r[o].classList.contains(uc)) {
                    var s = r[o];
                    this.fixedHeaderElement.innerHTML = s.innerHTML, this.fixedHeaderElement.style.top = e.target.scrollTop + "px", this.fixedHeaderElement.style.display = "block";
                    break
                }
                this.fixedHeaderElement.style.display = "none", this.fixedHeaderElement.style.top = "none"
            }
        }, t.prototype.renderItems = function(e, t) {
            var i;
            if (this.itemTemplate && e) {
                var n = e;
                n && t.groupBy ? ("None" !== this.sortOrder && (n = this.getSortedDataSource(n)), n = Jd.groupDataSource(n, t.properties, this.sortOrder)) : n = this.getSortedDataSource(n), this.sortedData = n;
                var r = n.length > 100 ? new yn(n).executeLocal((new on).take(100)) : n;
                i = this.templateListItem("autocomplete" === this.getModuleName() ? r : n, t);
                var o = "listbox" === this.getModuleName();
                this.DropDownBaseupdateBlazorTemplates(!0, !1, !1, !1, !1, !1, !1, o)
            } else i = this.createListItems(e, t);
            return i
        }, t.prototype.templateListItem = function(e, t) {
            this.DropDownBaseresetBlazorTemplates(!0, !1, !1, !1);
            var i = this.listOption(e, t);
            if (i.templateID = this.itemTemplateId, i.isStringTemplate = this.isStringTemplate, this.templateCompiler(this.itemTemplate)) {
                var n = document.querySelector(this.itemTemplate).innerHTML.trim();
                return Jd.renderContentTemplate(this.createElement, n, e, t.properties, i, this)
            }
            return Jd.renderContentTemplate(this.createElement, this.itemTemplate, e, t.properties, i, this)
        }, t.prototype.typeOfData = function(e) {
            for (var t = {
                    typeof: null,
                    item: null
                }, i = 0; !g(e) && i < e.length; i++) {
                if (!g(e[i]))
                    if (!g("string" == typeof e[i] || "number" == typeof e[i] || "boolean" == typeof e[i] ? e[i] : a(this.fields.value ? this.fields.value : "value", e[i]))) return {
                        typeof: typeof e[i],
                        item: e[i]
                    }
            }
            return t
        }, t.prototype.setFixedHeader = function() {
            this.list.parentElement.style.display = "block";
            var e = 0;
            this.list && this.list.parentElement && (e = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-width"), 10));
            var t = this.liCollections[0].offsetWidth - e;
            this.fixedHeaderElement.style.width = t.toString() + "px", Dt(this.fixedHeaderElement, {
                zIndex: 10
            });
            var i = this.ulElement.querySelector("." + uc);
            this.fixedHeaderElement.innerHTML = i.innerHTML
        }, t.prototype.getSortedDataSource = function(e) {
            if (e && "None" !== this.sortOrder) {
                var t = this.fields.text ? this.fields.text : "text";
                e = Jd.getDataSource(e, Jd.addSorting(this.sortOrder, t))
            }
            return e
        }, t.prototype.getIndexByValue = function(e) {
            for (var t, i = this.getItems(), n = 0; n < i.length; n++)
                if (!g(e) && i[n].getAttribute("data-value") === e.toString()) {
                    t = n;
                    break
                } return t
        }, t.prototype.dispatchEvent = function(e, t) {
            var i = document.createEvent("HTMLEvents");
            i.initEvent(t, !1, !0), e.dispatchEvent(i)
        }, t.prototype.setFields = function() {
            this.fields.value && !this.fields.text ? this.fields.text = this.fields.value : !this.fields.value && this.fields.text ? this.fields.value = this.fields.text : this.fields.value || this.fields.text || (this.fields.value = this.fields.text = "text")
        }, t.prototype.resetList = function(e, t, i) {
            if (this.list) {
                if ("SELECT" === this.element.tagName && this.element.options.length > 0 || "UL" === this.element.tagName && this.element.childNodes.length > 0) !(e instanceof Array ? e.length > 0 : !g(e)) && this.selectData && this.selectData.length > 0 && (e = this.selectData);
                this.setListData(e, t, i)
            }
        }, t.prototype.updateSelectElementData = function(e) {
            e && g(this.selectData) && this.listData && this.listData.length > 0 && (this.selectData = this.listData)
        }, t.prototype.updateSelection = function() {}, t.prototype.renderList = function() {
            this.render()
        }, t.prototype.updateDataSource = function(e) {
            this.resetList(this.dataSource)
        }, t.prototype.setUpdateInitial = function(e, t) {
            this.isDataFetched = !1;
            for (var i = {}, n = 0; e.length > n; n++) t[e[n]] && "fields" === e[n] ? this.setFields() : t[e[n]] && (i[e[n]] = t[e[n]]);
            Object.keys(i).length > 0 && (-1 === Object.keys(i).indexOf("dataSource") && (i.dataSource = this.dataSource), this.updateDataSource(i))
        }, t.prototype.onPropertyChanged = function(e, t) {
            "dropdownbase" === this.getModuleName() && this.setUpdateInitial(["fields", "query", "dataSource"], e), this.setUpdateInitial(["sortOrder", "itemTemplate"], e);
            for (var i = 0, n = Object.keys(e); i < n.length; i++) {
                switch (n[i]) {
                    case "query":
                    case "sortOrder":
                    case "dataSource":
                    case "itemTemplate":
                        break;
                    case "enableRtl":
                        this.setEnableRtl();
                        break;
                    case "enabled":
                        this.setEnabled();
                        break;
                    case "groupTemplate":
                        if (this.renderGroupTemplate(this.list), this.ulElement && this.fixedHeaderElement) {
                            var r = this.ulElement.querySelector("." + uc);
                            this.fixedHeaderElement.innerHTML = r.innerHTML
                        }
                        break;
                    case "locale":
                        this.list && !g(this.liCollections) && 0 === this.liCollections.length && this.l10nUpdate();
                        break;
                    case "zIndex":
                        this.setProperties({
                            zIndex: e.zIndex
                        }, !0), this.setZIndex()
                }
            }
        }, t.prototype.render = function(e) {
            this.list = this.createElement("div", {
                className: sc,
                attrs: {
                    tabindex: "0"
                }
            }), this.list.classList.add(rc), this.setFields();
            var t = {
                duration: 300,
                selector: "." + cc
            };
            this.rippleFun = Jt(this.list, t);
            var i = this.element.querySelector("select>optgroup");
            if (!this.fields.groupBy && g(i) || this.isGroupChecking || ye.add(this.list, "scroll", this.setFloatingHeader, this), "dropdownbase" === this.getModuleName()) {
                this.element.getAttribute("tabindex") && this.list.setAttribute("tabindex", this.element.getAttribute("tabindex")), gt([this.element], rc), this.element.style.display = "none";
                var n = this.createElement("div");
                this.element.parentElement.insertBefore(n, this.element), n.appendChild(this.element), n.appendChild(this.list)
            }
            this.setEnableRtl(), this.setEnabled(), e || this.initialize()
        }, t.prototype.getModuleName = function() {
            return "dropdownbase"
        }, t.prototype.getItems = function() {
            return this.ulElement.querySelectorAll("." + cc)
        }, t.prototype.addItem = function(e, t) {
            if ((!this.list || this.list.textContent === this.noRecordsTemplate && "listbox" !== this.getModuleName()) && this.renderList(), "None" !== this.sortOrder && g(t)) {
                var i = [].slice.call(this.listData);
                i.push(e), i = this.getSortedDataSource(i), t = this.fields.groupBy ? (i = Jd.groupDataSource(i, this.fields.properties, this.sortOrder)).indexOf(e) : i.indexOf(e)
            }
            this.DropDownBaseresetBlazorTemplates(!0, !1, !1, !1);
            var n, r = this.getItems().length,
                o = this.list.querySelector("." + ac);
            e = e instanceof Array ? e : [e], n = g(t) || t < 0 || t > r - 1 ? r : t;
            var s = this.fields;
            e && s.groupBy && (e = Jd.groupDataSource(e, s.properties));
            for (var l = [], h = 0; h < e.length; h++) {
                var p = e[h],
                    d = p.isHeader,
                    c = this.createElement("li", {
                        className: d ? uc : cc,
                        id: "option-add-" + h
                    }),
                    u = p instanceof Object ? a(s.text, p) : p;
                if (d && (c.innerText = u), this.itemTemplate && !d) {
                    var f = Ge(this.itemTemplate)(p, this, "itemTemplate", this.itemTemplateId, this.isStringTemplate, null, c);
                    f && vt(f, c), this.DropDownBaseupdateBlazorTemplates(!0, !1, !1, !1)
                } else d || c.appendChild(document.createTextNode(u));
                c.setAttribute("data-value", p instanceof Object ? a(s.value, p) : p), c.setAttribute("role", "option"), this.notify("addItem", {
                    module: "CheckBoxSelection",
                    item: c
                }), l.push(c), this.listData.push(p), "None" === this.sortOrder && g(t) && 0 === n && (n = null), this.updateActionCompleteData(c, p, n), this.trigger("beforeItemRender", {
                    element: c,
                    item: p
                })
            }
            if (0 === r && g(this.list.querySelector("ul"))) this.list.innerHTML = "", this.list.classList.remove(hc), this.list.appendChild(this.ulElement), this.liCollections = l, vt(l, this.ulElement), this.updateAddItemList(this.list, r);
            else {
                "listbox" === this.getModuleName() && 0 === r && (this.ulElement.innerHTML = "");
                var m = [];
                for (h = 0; h < e.length; h++) {
                    for (var y = this.ulElement.querySelectorAll(".e-list-group-item"), v = 0; v < y.length; v++) m[v] = y[v].innerText;
                    if (m.indexOf(l[h].innerText) > -1 && s.groupBy) {
                        for (v = 0; v < y.length; v++)
                            if (m[v] === l[h].innerText) {
                                "None" === this.sortOrder ? this.ulElement.insertBefore(l[h + 1], y[v + 1]) : this.ulElement.insertBefore(l[h + 1], this.ulElement.childNodes[t]), h += 1;
                                break
                            }
                    } else this.liCollections[n] ? this.liCollections[n].parentNode.insertBefore(l[h], this.liCollections[n]) : this.ulElement.appendChild(l[h]);
                    var b = [].slice.call(this.liCollections);
                    b.splice(n, 0, l[h]), this.liCollections = b, n += 1, "multiselect" === this.getModuleName() && this.updateDataList()
                }
            }(o || 0 === t) && this.updateSelection()
        }, t.prototype.validationAttribute = function(e, t) {
            var i = e.getAttribute("name") ? e.getAttribute("name") : e.getAttribute("id");
            t.setAttribute("name", i), e.removeAttribute("name");
            for (var n = ["required", "aria-required", "form"], r = 0; r < n.length; r++)
                if (e.getAttribute(n[r])) {
                    var o = e.getAttribute(n[r]);
                    t.setAttribute(n[r], o), e.removeAttribute(n[r])
                }
        }, t.prototype.setZIndex = function() {}, t.prototype.updateActionCompleteData = function(e, t, i) {}, t.prototype.updateAddItemList = function(e, t) {}, t.prototype.updateDataList = function() {}, t.prototype.getDataByValue = function(e) {
            if (!g(this.listData)) {
                var t = this.typeOfData(this.listData).typeof;
                if ("string" === t || "number" === t || "boolean" === t)
                    for (var i = 0, n = this.listData; i < n.length; i++) {
                        if (!g(s = n[i]) && s === e) return s
                    } else
                        for (var r = 0, o = this.listData; r < o.length; r++) {
                            var s;
                            if (!g(s = o[r]) && a(this.fields.value ? this.fields.value : "value", s) === e) return s
                        }
            }
            return null
        }, t.prototype.destroy = function() {
            document.body.contains(this.list) && (ye.remove(this.list, "scroll", this.setFloatingHeader), g(this.rippleFun) || this.rippleFun(), wt(this.list)), e.prototype.destroy.call(this)
        }, ic([qt({
            text: null,
            value: null,
            iconCss: null,
            groupBy: null
        }, nc)], t.prototype, "fields", void 0), ic([zt(!1)], t.prototype, "enablePersistence", void 0), ic([zt(null)], t.prototype, "itemTemplate", void 0), ic([zt(null)], t.prototype, "groupTemplate", void 0), ic([zt("No records found")], t.prototype, "noRecordsTemplate", void 0), ic([zt("Request failed")], t.prototype, "actionFailureTemplate", void 0), ic([zt("None")], t.prototype, "sortOrder", void 0), ic([zt(!0)], t.prototype, "enabled", void 0), ic([zt([])], t.prototype, "dataSource", void 0), ic([zt(null)], t.prototype, "query", void 0), ic([zt("StartsWith")], t.prototype, "filterType", void 0), ic([zt(!0)], t.prototype, "ignoreCase", void 0), ic([zt(1e3)], t.prototype, "zIndex", void 0), ic([zt(!1)], t.prototype, "ignoreAccent", void 0), ic([zt()], t.prototype, "locale", void 0), ic([_t()], t.prototype, "actionBegin", void 0), ic([_t()], t.prototype, "actionComplete", void 0), ic([_t()], t.prototype, "actionFailure", void 0), ic([_t()], t.prototype, "select", void 0), ic([_t()], t.prototype, "dataBound", void 0), ic([_t()], t.prototype, "created", void 0), ic([_t()], t.prototype, "destroyed", void 0), t = ic([Gt], t)
    }(pi),
    yc = function() {
        var e = function(t, i) {
            return (e = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(t, i)
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }(),
    vc = function(e, t, i, n) {
        var r, o = arguments.length,
            s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
        else
            for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
        return o > 3 && s && Object.defineProperty(t, i, s), s
    },
    bc = {
        root: "e-dropdownlist",
        hover: lc,
        selected: ac,
        rtl: oc,
        li: cc,
        disable: gc,
        base: rc,
        focus: dc,
        input: "e-input-group",
        inputFocus: "e-input-focus",
        icon: "e-input-group-icon e-ddl-icon",
        iconAnimation: "e-icon-anim",
        value: "e-input-value",
        device: "e-ddl-device",
        backIcon: "e-input-group-icon e-back-icon e-icons",
        filterBarClearIcon: "e-input-group-icon e-clear-icon e-icons",
        filterInput: "e-input-filter",
        filterParent: "e-filter-parent",
        mobileFilter: "e-ddl-device-filter",
        footer: "e-ddl-footer",
        header: "e-ddl-header",
        clearIcon: "e-clear-icon",
        clearIconHide: "e-clear-icon-hide",
        popupFullScreen: "e-popup-full-page",
        disableIcon: "e-ddl-disable-icon",
        hiddenElement: "e-ddl-hidden"
    },
    wc = {
        container: null,
        buttons: []
    },
    Cc = function(e) {
        function t(t, i) {
            var n = e.call(this, t, i) || this;
            return n.previousValue = null, n.isListSearched = !1, n
        }
        return yc(t, e), t.prototype.preRender = function() {
            var t = S() && this.isServerRendered;
            this.isServerBlazor = !!t, this.isServerBlazor ? this.initializeData() : (this.element.style.opacity = "0", this.initializeData(), e.prototype.preRender.call(this)), this.activeIndex = this.index, this.queryString = ""
        }, t.prototype.initializeData = function() {
            this.isPopupOpen = !1, this.isDocumentClick = !1, this.isInteracted = !1, this.isFilterFocus = !1, this.beforePopupOpen = !1, this.initial = !0, this.initRemoteRender = !1, this.isNotSearchList = !1, this.isTyped = !1, this.isSelected = !1, this.preventFocus = !1, this.preventAutoFill = !1, this.isValidKey = !1, this.typedString = "", this.isEscapeKey = !1, this.isPreventBlur = !1, this.isTabKey = !1, this.actionCompleteData = {
                isUpdated: !1
            }, this.prevSelectPoints = {}, this.isSelectCustom = !1, this.isDropDownClick = !1, this.preventAltUp = !1, this.isCustomFilter = !1, this.isSecondClick = !1, this.keyConfigure = {
                tab: "tab",
                enter: "13",
                escape: "27",
                end: "35",
                home: "36",
                down: "40",
                up: "38",
                pageUp: "33",
                pageDown: "34",
                open: "alt+40",
                close: "shift+tab",
                hide: "alt+38",
                space: "32"
            }
        }, t.prototype.setZIndex = function() {
            this.popupObj && this.popupObj.setProperties({
                zIndex: this.zIndex
            })
        }, t.prototype.renderList = function(t) {
            this.isServerBlazor ? this.interopAdaptor.invokeMethodAsync("OnServerRenderList", this.beforePopupOpen, !1) : (e.prototype.render.call(this, t), this.wireListEvents())
        }, t.prototype.floatLabelChange = function() {
            if ("dropdownlist" === this.getModuleName() && "Auto" === this.floatLabelType) {
                var e = this.inputWrapper.container.querySelector(".e-float-text");
                "" !== this.inputElement.value || this.isInteracted ? Et(e, ["e-label-top"], ["e-label-bottom"]) : Et(e, ["e-label-bottom"], ["e-label-top"])
            }
        }, t.prototype.resetHandler = function(e) {
            e.preventDefault(), this.clearAll(e)
        }, t.prototype.resetFocusElement = function() {
            if (this.removeHover(), this.removeSelection(), this.removeFocus(), this.list.scrollTop = 0, "autocomplete" !== this.getModuleName() && !g(this.ulElement)) {
                var e = this.ulElement.querySelector("." + bc.li);
                e && e.classList.add(bc.focus)
            }
        }, t.prototype.clearAll = function(e, t) {
            !g(t) && (g(t) || !g(t.dataSource) && (t.dataSource instanceof yn || 0 !== t.dataSource.length)) || (this.isActive = !0, this.resetSelection(t));
            var i = this.getItemData();
            this.previousValue !== i.value && this.onChangeEvent(e)
        }, t.prototype.resetSelection = function(e) {
            if (this.list)
                if (g(e) || !g(e.dataSource) && (e.dataSource instanceof yn || 0 !== e.dataSource.length)) {
                    if (this.allowFiltering && "autocomplete" !== this.getModuleName() && !g(this.actionCompleteData.ulElement) && !g(this.actionCompleteData.list)) {
                        var t = this.actionCompleteData.ulElement.querySelector("li"),
                            i = this.ulElement && this.ulElement.querySelector("li");
                        "EJS-COMBOBOX" === this.element.tagName && t && i && t.childElementCount > 0 && i.childElementCount > 0 && t.textContent !== i.textContent && this.itemTemplate && this.cloneElements(), this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0), this.actionCompleteData.list)
                    }
                    this.resetFocusElement()
                } else this.selectedLI = null, this.actionCompleteData.isUpdated = !1, this.actionCompleteData.ulElement = null, this.actionCompleteData.list = null, this.resetList(e.dataSource);
            this.isServerBlazor || (this.hiddenElement.innerHTML = ""), this.inputElement.value = "", this.value = null, this.itemData = null, this.text = null, this.index = null, this.activeIndex = null, this.item = null, this.queryString = "", this.valueTempElement && (wt(this.valueTempElement), this.inputElement.style.display = "block", this.valueTempElement = null), this.setSelection(null, null), this.isSelectCustom = !1, this.updateIconState(), this.cloneElements()
        }, t.prototype.setHTMLAttributes = function() {
            if (Object.keys(this.htmlAttributes).length)
                for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) {
                    var i = t[e];
                    if ("class" === i) {
                        var n = this.htmlAttributes[i].replace(/\s+/g, " ").trim();
                        "" !== n && ut([this.inputWrapper.container], n.split(" "))
                    } else if ("disabled" === i && "disabled" === this.htmlAttributes[i]) this.enabled = !1, this.setEnable();
                    else if ("readonly" !== i || g(this.htmlAttributes[i]))
                        if ("style" === i) this.inputWrapper.container.setAttribute("style", this.htmlAttributes[i]);
                        else {
                            var r = ["title", "id", "placeholder", "aria-placeholder", "role", "autocorrect", "autocomplete", "autocapitalize", "spellcheck", "minlength", "maxlength"];
                            "autocomplete" !== this.getModuleName() && "combobox" !== this.getModuleName() || r.push("tabindex"), 0 === i.indexOf("data") || ["name", "required"].indexOf(i) > -1 ? this.hiddenElement.setAttribute(i, this.htmlAttributes[i]) : r.indexOf(i) > -1 ? "placeholder" === i ? No.setPlaceholder(this.htmlAttributes[i], this.inputElement) : this.inputElement.setAttribute(i, this.htmlAttributes[i]) : this.inputWrapper.container.setAttribute(i, this.htmlAttributes[i])
                        }
                    else this.readonly = !0, this.dataBind()
                }
            "autocomplete" !== this.getModuleName() && "combobox" !== this.getModuleName() || this.inputWrapper.container.removeAttribute("tabindex")
        }, t.prototype.getAriaAttributes = function() {
            return {
                "aria-disabled": "false",
                "aria-owns": this.element.id + "_options",
                role: "listbox",
                "aria-haspopup": "true",
                "aria-expanded": "false",
                "aria-activedescendant": "null",
                "aria-live": "polite",
                "aria-labelledby": this.hiddenElement.id
            }
        }, t.prototype.setEnableRtl = function() {
            No.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]), this.popupObj && (this.popupObj.enableRtl = this.enableRtl, this.popupObj.dataBind())
        }, t.prototype.setEnable = function() {
            No.setEnabled(this.enabled, this.inputElement), this.enabled ? (gt([this.inputWrapper.container], bc.disable), this.inputElement.setAttribute("aria-disabled", "false"), this.targetElement().setAttribute("tabindex", this.tabIndex)) : (this.hidePopup(), ut([this.inputWrapper.container], bc.disable), this.inputElement.setAttribute("aria-disabled", "true"), this.targetElement().tabIndex = -1)
        }, t.prototype.getPersistData = function() {
            return this.addOnPersist(["value"])
        }, t.prototype.getLocaleName = function() {
            return "drop-down-list"
        }, t.prototype.preventTabIndex = function(e) {
            "dropdownlist" === this.getModuleName() && (e.tabIndex = -1)
        }, t.prototype.targetElement = function() {
            return this.inputWrapper.container
        }, t.prototype.getNgDirective = function() {
            return "EJS-DROPDOWNLIST"
        }, t.prototype.getElementByText = function(e) {
            return this.getElementByValue(this.getValueByText(e))
        }, t.prototype.getElementByValue = function(e) {
            for (var t, i = 0, n = this.getItems(); i < n.length; i++) {
                var r = n[i];
                if (this.getFormattedValue(r.getAttribute("data-value")) === e) {
                    t = r;
                    break
                }
            }
            return t
        }, t.prototype.initValue = function() {
            this.renderList(), this.dataSource instanceof yn ? this.initRemoteRender = !0 : this.updateValues()
        }, t.prototype.updateValues = function() {
            if (g(this.value))
                if (this.text && g(this.value)) {
                    var e = this.getElementByText(this.text);
                    if (g(e)) return void this.setProperties({
                        text: null
                    });
                    this.setSelection(e, null)
                } else this.setSelection(this.liCollections[this.activeIndex], null);
            else this.setSelection(this.getElementByValue(this.value), null);
            this.setHiddenValue(), No.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton)
        }, t.prototype.onBlur = function(e) {
            if (this.enabled) {
                var t = e.relatedTarget,
                    i = e.target,
                    n = this.isPreventBlur;
                this.isPreventBlur = !1, !n || this.isDocumentClick || !this.isPopupOpen || g(i) && (this.isFilterLayout() || !g(t)) ? this.isDocumentClick || !g(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(bc.mobileFilter) ? this.beforePopupOpen || (this.isDocumentClick = !1) : (("dropdownlist" === this.getModuleName() && !this.isFilterFocus && t !== this.inputElement && (document.activeElement !== t || document.activeElement === t && i.classList.contains(bc.inputFocus)) || g(t) && "dropdownlist" === this.getModuleName() && this.allowFiltering && i !== this.inputWrapper.container || "dropdownlist" !== this.getModuleName() && !this.inputWrapper.container.contains(t) || this.isTabKey) && (this.isDocumentClick = !!this.isPopupOpen, this.focusOutAction(e), this.isTabKey = !1), !this.isRequested || this.isPopupOpen || this.isPreventBlur || (this.isActive = !1, this.beforePopupOpen = !1)) : "dropdownlist" === this.getModuleName() && this.allowFiltering && this.isPopupOpen ? this.filterInput.focus() : this.targetElement().focus()
            }
        }, t.prototype.focusOutAction = function(e) {
            this.isInteracted = !1, this.focusOut(e), this.onFocusOut()
        }, t.prototype.onFocusOut = function() {
            this.enabled && (this.isSelected && (this.isSelectCustom = !1, this.onChangeEvent(null)), this.floatLabelChange(), this.dispatchEvent(this.hiddenElement, "change"), "dropdownlist" === this.getModuleName() && "INPUT" !== this.element.tagName && this.dispatchEvent(this.inputElement, "blur"), this.inputWrapper.clearButton && ut([this.inputWrapper.clearButton], bc.clearIconHide), this.trigger("blur"))
        }, t.prototype.onFocus = function(e) {
            if (!this.isInteracted) {
                this.isInteracted = !0;
                var t = {
                    isInteracted: !!e,
                    event: e
                };
                this.trigger("focus", t)
            }
            this.updateIconState()
        }, t.prototype.resetValueHandler = function(e) {
            var t = Tt(this.inputElement, "form");
            if (t && e.target === t) {
                var i = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute("value");
                this.text = i
            }
        }, t.prototype.wireEvent = function() {
            ye.add(this.inputWrapper.container, "mousedown", this.dropDownClick, this), ye.add(this.inputWrapper.container, "focus", this.focusIn, this), ye.add(this.inputWrapper.container, "keypress", this.onSearch, this), this.bindCommonEvent()
        }, t.prototype.bindCommonEvent = function() {
            ye.add(this.targetElement(), "blur", this.onBlur, this);
            var e = Tt(this.inputElement, "form");
            e && ye.add(e, "reset", this.resetValueHandler, this), me.isDevice ? this.keyboardModule = new xi(this.targetElement(), {
                keyAction: this.mobileKeyActionHandler.bind(this),
                keyConfigs: this.keyConfigure,
                eventName: "keydown"
            }) : this.keyboardModule = new xi(this.targetElement(), {
                keyAction: this.keyActionHandler.bind(this),
                keyConfigs: this.keyConfigure,
                eventName: "keydown"
            }), this.bindClearEvent()
        }, t.prototype.bindClearEvent = function() {
            this.showClearButton && ye.add(this.inputWrapper.clearButton, "mousedown", this.resetHandler, this)
        }, t.prototype.unBindCommonEvent = function() {
            ye.remove(this.targetElement(), "blur", this.onBlur);
            var e = Tt(this.inputElement, "form");
            e && ye.remove(e, "reset", this.resetValueHandler), me.isDevice || this.keyboardModule.destroy(), this.showClearButton && ye.remove(this.inputWrapper.clearButton, "mousedown", this.resetHandler)
        }, t.prototype.updateIconState = function() {
            this.showClearButton && ("" === this.inputElement.value || this.readonly ? ut([this.inputWrapper.clearButton], bc.clearIconHide) : gt([this.inputWrapper.clearButton], bc.clearIconHide))
        }, t.prototype.wireListEvents = function() {
            ye.add(this.list, "click", this.onMouseClick, this), ye.add(this.list, "mouseover", this.onMouseOver, this), ye.add(this.list, "mouseout", this.onMouseLeave, this)
        }, t.prototype.onSearch = function(e) {
            32 !== e.charCode && 13 !== e.charCode && (void 0 === this.list && (this.isServerBlazor ? (this.isServerIncrementalSearch = !0, this.interopAdaptor.invokeMethodAsync("OnServerRenderList", !0, !1)) : this.renderList()), this.searchKeyEvent = e, this.onServerIncrementalSearch(e))
        }, t.prototype.onServerIncrementalSearch = function(e) {
            this.isRequested || g(this.list) || g(this.list.querySelector("li")) || !this.enabled || this.readonly || this.incrementalSearch(e)
        }, t.prototype.onMouseClick = function(e) {
            var t = e.target,
                i = (t.classList, Tt(t, "." + cc));
            if (this.isValidLI(i))
                if (this.setSelection(i, e), me.isDevice && this.isFilterLayout()) history.back();
                else {
                    this.closePopup(100)
                }
        }, t.prototype.onMouseOver = function(e) {
            var t = Tt(e.target, "." + cc);
            this.setHover(t)
        }, t.prototype.setHover = function(e) {
            this.enabled && this.isValidLI(e) && !e.classList.contains(lc) && (this.removeHover(), ut([e], lc))
        }, t.prototype.onMouseLeave = function(e) {
            this.removeHover()
        }, t.prototype.removeHover = function() {
            if (this.list) {
                var e = this.isServerBlazor && this.popupObj && this.popupObj.element ? this.popupObj.element.querySelectorAll("." + lc) : this.list.querySelectorAll("." + lc);
                e && e.length && gt(e, lc)
            }
        }, t.prototype.isValidLI = function(e) {
            return e && e.hasAttribute("role") && "option" === e.getAttribute("role")
        }, t.prototype.incrementalSearch = function(e) {
            if (this.liCollections.length > 0) {
                var t = function(e, t, i, n, r, o) {
                    var s;
                    if (Ud += String.fromCharCode(e), setTimeout((function() {
                            Ud = ""
                        }), 1e3), Ud = n ? Ud.toLowerCase() : Ud, Xd === r && Kd === Ud) {
                        for (var a = 0; a < Yd.length; a++)
                            if (Yd[a].classList.contains("e-active")) {
                                s = a;
                                break
                            } return Yd[s += 1]
                    }
                    var l = t,
                        h = Ud.length,
                        p = void 0;
                    a = i = i ? i + 1 : 0, Yd = [];
                    do {
                        a === l.length && (a = -1), p = l[s = -1 === a ? 0 : a], (o ? n ? p.textContent.trim().toLowerCase() : p.textContent.trim() : n ? p.innerText.toLowerCase() : p.innerText).substr(0, h) === Ud && Yd.push(l[s]), a++
                    } while (a !== i);
                    return Kd = Ud, Xd = r, Yd[0]
                }(e.charCode, this.liCollections, this.activeIndex, !0, this.element.id, this.isServerBlazor);
                g(t) || (this.setSelection(t, e), this.setScrollPosition())
            }
        }, t.prototype.hideSpinner = function() {
            g(this.spinnerElement) || (Ji(this.spinnerElement), gt([this.spinnerElement], bc.disableIcon), this.spinnerElement.innerHTML = "", this.spinnerElement = null)
        }, t.prototype.showSpinner = function() {
            g(this.spinnerElement) && (this.spinnerElement = me.isDevice && !g(this.filterInputObj) && this.filterInputObj.buttons[1] || !g(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0], ut([this.spinnerElement], bc.disableIcon), Ni({
                target: this.spinnerElement,
                width: me.isDevice ? "16px" : "14px"
            }, this.createElement), Xi(this.spinnerElement))
        }, t.prototype.keyActionHandler = function(e) {
            if (this.enabled) {
                var t = "pageUp" === e.action || "pageDown" === e.action,
                    i = "dropdownlist" !== this.getModuleName() && ("home" === e.action || "end" === e.action);
                this.isEscapeKey = "escape" === e.action, this.isTabKey = !this.isPopupOpen && "tab" === e.action;
                var n = "down" === e.action || "up" === e.action || "home" === e.action || "end" === e.action,
                    r = "down" === e.action || "up" === e.action || "pageUp" === e.action || "pageDown" === e.action || "home" === e.action || "end" === e.action;
                if ((!(this.isEditTextBox() || t || i) || this.isPopupOpen) && !this.readonly) {
                    var o = "tab" === e.action || "close" === e.action;
                    if (void 0 !== this.list || this.isRequested || o || "escape" === e.action || (this.searchKeyEvent = e, this.renderList()), ((!this.isServerBlazor || "open" !== e.action && "space" !== e.action) && g(this.list) || !g(this.liCollections) && r && 0 === this.liCollections.length || this.isRequested) && (!this.isServerBlazor || !n)) return;
                    switch ((o && "autocomplete" !== this.getModuleName() && this.isPopupOpen || "escape" === e.action) && e.preventDefault(), this.isSelected = "escape" !== e.action && this.isSelected, this.isTyped = !r && "escape" !== e.action && this.isTyped, e.action) {
                        case "down":
                        case "up":
                            this.updateUpDownAction(e);
                            break;
                        case "pageUp":
                            this.pageUpSelection(this.activeIndex - this.getPageCount(), e), e.preventDefault();
                            break;
                        case "pageDown":
                            this.pageDownSelection(this.activeIndex + this.getPageCount(), e), e.preventDefault();
                            break;
                        case "home":
                        case "end":
                            this.updateHomeEndAction(e);
                            break;
                        case "space":
                            "dropdownlist" === this.getModuleName() && (this.beforePopupOpen || this.showPopup());
                            break;
                        case "open":
                            this.showPopup();
                            break;
                        case "hide":
                            this.preventAltUp = this.isPopupOpen, this.hidePopup(e), this.focusDropDown(e);
                            break;
                        case "enter":
                            this.selectCurrentItem(e);
                            break;
                        case "tab":
                            this.selectCurrentValueOnTab(e);
                            break;
                        case "escape":
                        case "close":
                            this.isPopupOpen && (this.hidePopup(e), this.focusDropDown(e))
                    }
                }
            }
        }, t.prototype.updateUpDownAction = function(e) {
            if (this.isServerBlazor && g(this.list)) this.isServerNavigation = !0, this.interopAdaptor.invokeMethodAsync("OnServerRenderList", !0, !1);
            else {
                this.isServerNavigation = !1;
                var t = this.list.querySelector("." + bc.focus);
                if (this.isSelectFocusItem(t)) this.setSelection(t, e);
                else {
                    var i, n = "down" === e.action ? this.activeIndex + 1 : this.activeIndex - 1,
                        r = 0;
                    "autocomplete" === this.getModuleName() && (r = "down" === e.action && g(this.activeIndex) ? 0 : this.liCollections.length - 1, n = n < 0 ? this.liCollections.length - 1 : n === this.liCollections.length ? 0 : n), i = g(this.activeIndex) ? this.liCollections[r] : this.liCollections[n], g(i) || this.setSelection(i, e)
                }
                e.preventDefault()
            }
        }, t.prototype.updateHomeEndAction = function(e) {
            if ("dropdownlist" === this.getModuleName())
                if (this.isServerBlazor && g(this.list)) this.isServerNavigation = !0, this.interopAdaptor.invokeMethodAsync("OnServerRenderList", !0, !1);
                else {
                    this.isServerNavigation = !1;
                    var t = 0;
                    if (t = "home" === e.action ? 0 : this.getItems().length - 1, e.preventDefault(), this.activeIndex === t) return;
                    this.setSelection(this.liCollections[t], e)
                }
        }, t.prototype.selectCurrentValueOnTab = function(e) {
            "autocomplete" === this.getModuleName() ? this.selectCurrentItem(e) : this.isPopupOpen && (this.hidePopup(e), this.focusDropDown(e))
        }, t.prototype.mobileKeyActionHandler = function(e) {
            if (this.enabled && (!this.isEditTextBox() || this.isPopupOpen) && !this.readonly) {
                if (void 0 !== this.list || this.isRequested || (this.searchKeyEvent = e, this.renderList()), g(this.list) || !g(this.liCollections) && 0 === this.liCollections.length || this.isRequested) return;
                "enter" === e.action && this.selectCurrentItem(e)
            }
        }, t.prototype.selectCurrentItem = function(e) {
            if (this.isPopupOpen) {
                var t = this.list.querySelector("." + bc.focus);
                t && (this.setSelection(t, e), this.isTyped = !1), this.isSelected && (this.isSelectCustom = !1, this.onChangeEvent(e)), this.hidePopup(), this.focusDropDown(e)
            } else this.showPopup()
        }, t.prototype.isSelectFocusItem = function(e) {
            return !g(e)
        }, t.prototype.getPageCount = function() {
            var e = this.list.classList.contains(hc) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue("height");
            return Math.round(this.list.getBoundingClientRect().height / parseInt(e, 10))
        }, t.prototype.pageUpSelection = function(e, t) {
            var i = e >= 0 ? this.liCollections[e + 1] : this.liCollections[0];
            this.setSelection(i, t)
        }, t.prototype.pageDownSelection = function(e, t) {
            var i = this.getItems(),
                n = e <= i.length ? this.liCollections[e - 1] : this.liCollections[i.length - 1];
            this.setSelection(n, t)
        }, t.prototype.unWireEvent = function() {
            ye.remove(this.inputWrapper.container, "mousedown", this.dropDownClick), ye.remove(this.inputWrapper.container, "keypress", this.onSearch), ye.remove(this.inputWrapper.container, "focus", this.focusIn), this.unBindCommonEvent()
        }, t.prototype.unWireListEvents = function() {
            ye.remove(this.list, "click", this.onMouseClick), ye.remove(this.list, "mouseover", this.onMouseOver), ye.remove(this.list, "mouseout", this.onMouseLeave)
        }, t.prototype.checkSelector = function(e) {
            return "#" + e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g, "\\$1")
        }, t.prototype.onDocumentClick = function(e) {
            var t = e.target;
            if (!g(this.popupObj) && Tt(t, this.checkSelector(this.popupObj.element.id)) || this.inputWrapper.container.contains(e.target)) t === this.inputElement || this.allowFiltering && t === this.filterInput || "combobox" === this.getModuleName() && !this.allowFiltering && me.isDevice && t === this.inputWrapper.buttons[0] || (this.isPreventBlur = (me.isIE || "edge" === me.info.name) && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput), e.preventDefault());
            else if (this.inputWrapper.container.classList.contains(bc.inputFocus) || this.isPopupOpen) {
                this.isDocumentClick = !0;
                var i = this.isRequested;
                this.isInteracted = !1, this.hidePopup(e), i || (this.onFocusOut(), this.inputWrapper.container.classList.remove(bc.inputFocus))
            }
        }, t.prototype.activeStateChange = function() {
            this.isDocumentClick && (this.hidePopup(), this.onFocusOut(), this.inputWrapper.container.classList.remove(bc.inputFocus))
        }, t.prototype.focusDropDown = function(e) {
            !this.initial && this.isFilterLayout() && this.focusIn(e)
        }, t.prototype.dropDownClick = function(e) {
            if (3 !== e.which && 2 !== e.button && !this.targetElement().classList.contains(bc.disable) && this.inputWrapper.clearButton !== e.target) {
                var t = e.target;
                if (t === this.inputElement || this.allowFiltering && t === this.filterInput || "combobox" === this.getModuleName() || e.preventDefault(), this.readonly) this.focusIn(e);
                else {
                    this.isPopupOpen ? (this.hidePopup(), this.isFilterLayout() && this.focusDropDown(e)) : (this.focusIn(e), this.floatLabelChange(), this.queryString = "" === this.inputElement.value.trim() ? null : this.inputElement.value, this.isDropDownClick = !0, this.showPopup());
                    var i = this,
                        n = S() ? 1e3 : this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;
                    this.isSecondClick || setTimeout((function() {
                        i.cloneElements(), i.isSecondClick = !0
                    }), n)
                }
            }
        }, t.prototype.cloneElements = function() {
            if (this.list) {
                var e = this.list.querySelector("ul");
                e && (e = e.cloneNode ? e.cloneNode(!0) : e, this.actionCompleteData.ulElement = e)
            }
        }, t.prototype.updateSelectedItem = function(e, t, i, n) {
            var r = this;
            this.removeSelection(), e.classList.add(ac), this.removeHover();
            var o = this.getFormattedValue(e.getAttribute("data-value")),
                s = this.getDataByValue(o);
            if (this.initial || i || g(t)) this.selectEventCallback(e, t, i, s, o), this.isServerBlazor && this.interopAdaptor.invokeMethodAsync("OnServerItemData", this.itemData), n && this.setSelectOptions(e, t);
            else {
                var a = this.detachChanges(s);
                this.isSelected = !0;
                var l = {
                    e: t,
                    item: e,
                    itemData: a,
                    isInteracted: !!t,
                    cancel: !1
                };
                this.trigger("select", l, (function(a) {
                    a.cancel ? e.classList.remove(ac) : (r.selectEventCallback(e, t, i, s, o), r.isServerBlazor && r.interopAdaptor.invokeMethodAsync("OnServerItemData", r.itemData), n && r.setSelectOptions(e, t))
                }))
            }
        }, t.prototype.selectEventCallback = function(e, t, i, n, r) {
            this.previousItemData = g(this.itemData) ? null : this.itemData, this.item = e, this.itemData = n;
            var o = this.list.querySelector("." + dc);
            o && gt([o], dc), e.setAttribute("aria-selected", "true"), this.activeIndex = this.getIndexByValue(r)
        }, t.prototype.activeItem = function(e) {
            this.isValidLI(e) && !e.classList.contains(ac) && (this.removeSelection(), e.classList.add(ac), this.removeHover(), e.setAttribute("aria-selected", "true"))
        }, t.prototype.setValue = function(e) {
            var t = this.getItemData();
            return null === t.value ? S() && null !== t.text || "" !== t.text ? No.setValue(t.text, this.inputElement, this.floatLabelType, this.showClearButton) : No.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton) : No.setValue(t.text, this.inputElement, this.floatLabelType, this.showClearButton), this.isServerBlazor && this.interopAdaptor.invokeMethodAsync("OnServerValueTemplate", t), this.valueTemplate && null !== this.itemData && !this.isServerBlazor ? (this.DropDownBaseresetBlazorTemplates(!1, !1, !1, !1, !0), this.setValueTemplate()) : this.inputElement.previousSibling === this.valueTempElement && (wt(this.valueTempElement), this.inputElement.style.display = "block"), this.previousValue === t.value ? (this.isSelected = !1, !0) : (this.isSelected = !this.initial, this.isSelectCustom = !1, "dropdownlist" === this.getModuleName() && this.updateIconState(), !1)
        }, t.prototype.setSelection = function(e, t) {
            this.isValidLI(e) && (!e.classList.contains(ac) || this.isPopupOpen && this.isSelected && e.classList.contains(ac)) ? this.updateSelectedItem(e, t, !1, !0) : this.setSelectOptions(e, t)
        }, t.prototype.setSelectOptions = function(e, t) {
            this.list && this.removeHover(), this.previousSelectedLI = g(this.selectedLI) ? null : this.selectedLI, this.selectedLI = e, this.setValue(t) || (this.isPopupOpen && (St(this.targetElement(), {
                "aria-activedescendant": this.selectedLI ? this.selectedLI.id : null
            }), this.isFilterLayout() && this.filterInput && St(this.filterInput, {
                "aria-activedescendant": this.selectedLI ? this.selectedLI.id : null
            })), (!this.isPopupOpen && !g(e) || this.isPopupOpen && !g(t) && ("keydown" !== t.type || "keydown" === t.type && "enter" === t.action)) && (this.isSelectCustom = !1, this.onChangeEvent(t)), !this.isPopupOpen || g(this.selectedLI) || null === this.itemData || t && "click" === t.type || this.setScrollPosition(t), "mozilla" !== me.info.name && (St(this.inputElement, {
                "aria-label": this.inputElement.value
            }), St(this.targetElement(), {
                "aria-describedby": this.inputElement.id
            }), this.targetElement().removeAttribute("aria-live")))
        }, t.prototype.dropdownCompiler = function(e) {
            var t = !1;
            if (e) {
                try {
                    t = !!document.querySelectorAll(e).length
                } catch (e) {
                    t = !1
                }
            }
            return t
        }, t.prototype.setValueTemplate = function() {
            this.isReact && this.clearTemplate(["valueTemplate"]), this.valueTempElement || (this.valueTempElement = this.createElement("span", {
                className: bc.value
            }), this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement), this.inputElement.style.display = "none"), this.valueTempElement.innerHTML = "";
            var e = S() ? JSON.parse(JSON.stringify(this.itemData)) : this.itemData,
                t = Ge(this.dropdownCompiler(this.valueTemplate) ? document.querySelector(this.valueTemplate).innerHTML.trim() : this.valueTemplate)(e, this, "valueTemplate", this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);
            if (t && t.length > 0)
                for (var i = 0; i < t.length; i++) this.valueTempElement.appendChild(t[i]);
            this.renderReactTemplates(), this.DropDownBaseupdateBlazorTemplates(!1, !1, !1, !1, !0, !0, !0)
        }, t.prototype.removeSelection = function() {
            if (this.list) {
                var e = this.list.querySelectorAll("." + ac);
                e.length && (gt(e, ac), e[0].removeAttribute("aria-selected"))
            }
        }, t.prototype.getItemData = function() {
            var e, t, i, n = this.fields;
            return g(e = this.itemData) || (t = a(n.value, e), i = a(n.text, e)), {
                value: g(e) || f(t) ? e : t,
                text: g(e) || f(t) ? e : i
            }
        }, t.prototype.onChangeEvent = function(e) {
            var t = this.getItemData(),
                i = this.isSelectCustom ? null : this.activeIndex;
            this.setProperties({
                index: i,
                text: t.text,
                value: t.value
            }, !0), this.detachChangeEvent(e)
        }, t.prototype.detachChanges = function(e) {
            return "string" == typeof e || "boolean" == typeof e || "number" == typeof e ? Object.defineProperties({}, {
                value: {
                    value: e,
                    enumerable: !0
                },
                text: {
                    value: e,
                    enumerable: !0
                }
            }) : e
        }, t.prototype.detachChangeEvent = function(e) {
            if (this.isSelected = !1, this.previousValue = this.value, this.activeIndex = this.index, this.typedString = g(this.text) ? "" : this.text, !this.initial) {
                var t = this.detachChanges(this.itemData),
                    i = void 0;
                i = "string" == typeof this.previousItemData || "boolean" == typeof this.previousItemData || "number" == typeof this.previousItemData ? Object.defineProperties({}, {
                    value: {
                        value: this.previousItemData,
                        enumerable: !0
                    },
                    text: {
                        value: this.previousItemData,
                        enumerable: !0
                    }
                }) : this.previousItemData, this.setHiddenValue();
                var n = {
                    e: e,
                    item: this.item,
                    itemData: t,
                    previousItem: this.previousSelectedLI,
                    previousItemData: i,
                    isInteracted: !!e,
                    value: this.value,
                    element: this.element
                };
                this.trigger("change", n), this.isServerBlazor && this.enablePersistence && this.interopAdaptor.invokeMethodAsync("ServerChange")
            }!g(this.value) && "" !== this.value || "Always" === this.floatLabelType || gt([this.inputWrapper.container], "e-valid-input")
        }, t.prototype.setHiddenValue = function() {
            if (g(this.value)) this.isServerBlazor || (this.hiddenElement.innerHTML = "");
            else if (this.isServerBlazor && this.hiddenElement.querySelector("option"))(e = this.hiddenElement.querySelector("option")).textContent = this.text, e.setAttribute("value", this.value.toString());
            else if (!this.isServerBlazor) {
                var e;
                this.hiddenElement.innerHTML = "<option selected>" + this.text + "</option>", (e = this.hiddenElement.querySelector("option")).setAttribute("value", this.value.toString())
            }
        }, t.prototype.onFilterUp = function(e) {
            if (e.ctrlKey && 86 === e.keyCode || !this.isValidKey && 40 !== e.keyCode && 38 !== e.keyCode) this.isValidKey = !1;
            else switch (this.isValidKey = !1, e.keyCode) {
                case 38:
                case 40:
                    "autocomplete" !== this.getModuleName() || this.isPopupOpen || this.preventAltUp || this.isRequested ? this.preventAutoFill = !1 : (this.preventAutoFill = !0, this.searchLists(e)), this.preventAltUp = !1, e.preventDefault();
                    break;
                case 46:
                case 8:
                    this.typedString = this.filterInput.value, !this.isPopupOpen && "" !== this.typedString || this.isPopupOpen && this.queryString.length > 0 || "" === this.typedString && "" === this.queryString && "autocomplete" !== this.getModuleName() ? (this.preventAutoFill = !0, this.searchLists(e)) : "" === this.typedString && (this.list && this.resetFocusElement(), this.activeIndex = null, "autocomplete" === this.getModuleName() && this.hidePopup()), e.preventDefault();
                    break;
                default:
                    this.typedString = this.filterInput.value, this.preventAutoFill = !1, this.searchLists(e)
            }
        }, t.prototype.onFilterDown = function(e) {
            switch (e.keyCode) {
                case 13:
                    break;
                case 40:
                case 38:
                    this.queryString = this.filterInput.value, e.preventDefault();
                    break;
                case 9:
                    this.isPopupOpen && "autocomplete" !== this.getModuleName() && e.preventDefault();
                    break;
                default:
                    this.prevSelectPoints = this.getSelectionPoints(), this.queryString = this.filterInput.value
            }
        }, t.prototype.removeFillSelection = function() {
            if (this.isInteracted) {
                var e = this.getSelectionPoints();
                this.inputElement.setSelectionRange(e.end, e.end)
            }
        }, t.prototype.getQuery = function(e) {
            var t;
            if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {
                t = e ? e.clone() : this.query ? this.query.clone() : new on;
                var i = "" === this.typedString ? "contains" : this.filterType,
                    n = this.typeOfData(this.dataSource).typeof;
                if ((this.dataSource instanceof yn || "string" !== n) && "number" !== n) {
                    var r = this.fields.text ? this.fields.text : "";
                    t.where(r, i, this.typedString, this.ignoreCase, this.ignoreAccent)
                } else t.where("", i, this.typedString, this.ignoreCase, this.ignoreAccent)
            } else t = e || (this.query ? this.query : new on);
            return t
        }, t.prototype.getSelectionPoints = function() {
            var e = this.inputElement;
            return {
                start: Math.abs(e.selectionStart),
                end: Math.abs(e.selectionEnd)
            }
        }, t.prototype.searchLists = function(e) {
            var t = this;
            (this.isTyped = !0, this.activeIndex = null, this.isListSearched = !0, this.filterInput.parentElement.querySelector("." + bc.clearIcon)) && (this.filterInput.parentElement.querySelector("." + bc.clearIcon).style.visibility = "" === this.filterInput.value ? "hidden" : "visible");
            if (this.isDataFetched = !1, this.isFiltering())
                if (this.isServerBlazor) this.beforePopupOpen = "combobox" === this.getModuleName() && this.isFiltering() && !this.beforePopupOpen ? !this.beforePopupOpen : this.beforePopupOpen, "" === this.filterInput.value && "dropdownlist" !== this.getModuleName() ? this.interopAdaptor.invokeMethodAsync("OnServerRenderList", this.beforePopupOpen, !1) : this.interopAdaptor.invokeMethodAsync("OnServerFilter", this.filterInput.value);
                else {
                    var i = {
                        preventDefaultAction: !1,
                        text: this.filterInput.value,
                        updateData: function(e, n, r) {
                            i.cancel || (t.isCustomFilter = !0, t.filteringAction(e, n, r))
                        },
                        baseEventArgs: e,
                        cancel: !1
                    };
                    this.trigger("filtering", i, (function(e) {
                        e.cancel || t.isCustomFilter || e.preventDefaultAction || t.filteringAction(t.dataSource, null, t.fields)
                    }))
                }
        }, t.prototype.filter = function(e, t, i) {
            this.isCustomFilter = !0, this.filteringAction(e, t, i)
        }, t.prototype.filteringAction = function(e, t, i) {
            g(this.filterInput) || (this.beforePopupOpen = !0, "" !== this.filterInput.value.trim() || this.itemTemplate ? (this.isNotSearchList = !1, t = "" === this.filterInput.value.trim() ? null : t, this.resetList(e, i, t)) : (this.actionCompleteData.isUpdated = !1, this.isTyped = !1, g(this.actionCompleteData.ulElement) || g(this.actionCompleteData.list) || this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list), this.isTyped = !0, g(this.itemData) || "dropdownlist" !== this.getModuleName() || (this.focusIndexItem(), this.setScrollPosition()), this.isNotSearchList = !0), this.renderReactTemplates())
        }, t.prototype.setSearchBox = function(e) {
            if (this.isFiltering()) {
                var t = e.querySelector("." + bc.filterParent) ? e.querySelector("." + bc.filterParent) : this.createElement("span", {
                    className: bc.filterParent
                });
                this.isServerBlazor && (t.innerHTML = ""), this.filterInput = this.createElement("input", {
                    attrs: {
                        type: "text"
                    },
                    className: bc.filterInput
                }), this.element.parentNode.insertBefore(this.filterInput, this.element);
                var i = !1;
                return me.isDevice && (i = !0), this.filterInputObj = No.createInput({
                    element: this.filterInput,
                    buttons: i ? [bc.backIcon, bc.filterBarClearIcon] : [bc.filterBarClearIcon],
                    properties: {
                        placeholder: this.filterBarPlaceholder
                    }
                }, this.createElement), g(this.cssClass) || (-1 !== this.cssClass.split(" ").indexOf("e-outline") ? ut([this.filterInputObj.container], "e-outline") : -1 !== this.cssClass.split(" ").indexOf("e-filled") && ut([this.filterInputObj.container], "e-filled")), vt([this.filterInputObj.container], t), yt([t], e), St(this.filterInput, {
                    "aria-disabled": "false",
                    "aria-owns": this.element.id + "_options",
                    role: "listbox",
                    "aria-activedescendant": this.selectedLI ? this.selectedLI.id : null,
                    autocomplete: "off",
                    autocorrect: "off",
                    autocapitalize: "off",
                    spellcheck: "false"
                }), this.clearIconElement = this.filterInput.parentElement.querySelector("." + bc.clearIcon), !me.isDevice && this.clearIconElement && (ye.add(this.clearIconElement, "click", this.clearText, this), this.clearIconElement.style.visibility = "hidden"), me.isDevice ? this.searchKeyModule = new xi(this.filterInput, {
                    keyAction: this.mobileKeyActionHandler.bind(this),
                    keyConfigs: this.keyConfigure,
                    eventName: "keydown"
                }) : this.searchKeyModule = new xi(this.filterInput, {
                    keyAction: this.keyActionHandler.bind(this),
                    keyConfigs: this.keyConfigure,
                    eventName: "keydown"
                }), ye.add(this.filterInput, "input", this.onInput, this), ye.add(this.filterInput, "keyup", this.onFilterUp, this), ye.add(this.filterInput, "keydown", this.onFilterDown, this), ye.add(this.filterInput, "blur", this.onBlur, this), ye.add(this.filterInput, "paste", this.pasteHandler, this), this.filterInputObj
            }
            return wc
        }, t.prototype.onInput = function(e) {
            this.isValidKey = !0, me.isDevice && "mozilla" === me.info.name && (this.typedString = this.filterInput.value, this.preventAutoFill = !0, this.searchLists(e))
        }, t.prototype.pasteHandler = function(e) {
            var t = this;
            setTimeout((function() {
                t.typedString = t.filterInput.value, t.searchLists(e)
            }))
        }, t.prototype.onActionFailure = function(t) {
            e.prototype.onActionFailure.call(this, t), this.beforePopupOpen && this.renderPopup()
        }, t.prototype.onActionComplete = function(t, i, n, r) {
            var o = this;
            if (this.isNotSearchList) this.isNotSearchList = !1;
            else if (this.isActive) {
                var s = this.selectedLI ? this.selectedLI.cloneNode(!0) : null;
                if (e.prototype.onActionComplete.call(this, t, i, n), this.updateSelectElementData(this.allowFiltering), this.isRequested && !g(this.searchKeyEvent) && "keydown" === this.searchKeyEvent.type && (this.isRequested = !1, this.keyActionHandler(this.searchKeyEvent), this.searchKeyEvent = null), this.isRequested && !g(this.searchKeyEvent) && (this.incrementalSearch(this.searchKeyEvent), this.searchKeyEvent = null), this.list.scrollTop = 0, g(t) || St(t, {
                        id: this.element.id + "_options",
                        role: "listbox",
                        "aria-hidden": "false"
                    }), this.initRemoteRender && (this.initial = !0, this.activeIndex = this.index, this.updateValues(), this.initRemoteRender = !1, this.initial = !1, this.value && this.dataSource instanceof yn)) {
                    var a = g(this.fields.value) ? this.fields.text : this.fields.value;
                    i.some((function(e) {
                        return e[a] === o.value
                    })) || this.dataSource.executeQuery(this.getQuery(this.query).where(new sn(a, "equal", this.value))).then((function(e) {
                        e.result.length > 0 && (o.addItem(e.result, i.length), o.updateValues())
                    }))
                }
                "autocomplete" !== this.getModuleName() && this.isFiltering() && !this.isTyped && ((!this.actionCompleteData.isUpdated || !this.isCustomFilter && !this.isFilterFocus || g(this.itemData) && this.allowFiltering && (this.dataSource instanceof yn || !g(this.dataSource) && !g(this.dataSource.length) && 0 !== this.dataSource.length)) && (this.actionCompleteData = {
                    ulElement: t.cloneNode(!0),
                    list: i,
                    isUpdated: !0
                }), this.addNewItem(i, s), g(this.itemData) || this.focusIndexItem()), this.beforePopupOpen && this.renderPopup()
            }
        }, t.prototype.addNewItem = function(e, t) {
            var i = this;
            if (!g(this.itemData) && !g(t)) {
                var n = this.getItemData().value;
                e.some((function(e) {
                    return ("string" == typeof e || "number" == typeof e) && e === n || a(i.fields.value, e) === n
                })) || this.addItem(this.itemData)
            }
        }, t.prototype.updateActionCompleteData = function(e, t, i) {
            "autocomplete" !== this.getModuleName() && this.actionCompleteData.ulElement && (null != i ? this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0), this.actionCompleteData.ulElement.childNodes[i]) : this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)), this.isFiltering() && this.actionCompleteData.list.indexOf(t) < 0 && this.actionCompleteData.list.push(t))
        }, t.prototype.focusIndexItem = function() {
            var e = this.getItemData().value;
            this.activeIndex = this.getIndexByValue(e);
            var t = this.findListElement(this.list, "li", "data-value", e);
            this.selectedLI = t, this.activeItem(t), this.removeFocus()
        }, t.prototype.updateSelection = function() {
            var e = this.list.querySelector("." + ac);
            e ? (this.setProperties({
                index: this.getIndexByValue(e.getAttribute("data-value"))
            }), this.activeIndex = this.index) : (this.removeFocus(), this.list.querySelector("." + cc).classList.add(bc.focus))
        }, t.prototype.removeFocus = function() {
            var e = this.list.querySelectorAll("." + bc.focus);
            e && e.length && gt(e, bc.focus)
        }, t.prototype.renderPopup = function() {
            var e = this;
            if (this.popupObj && document.body.contains(this.popupObj.element)) this.refreshPopup();
            else {
                this.trigger("beforeOpen", {
                    cancel: !1
                }, (function(t) {
                    if (t.cancel) e.beforePopupOpen = !1;
                    else {
                        var i = e.serverPopupEle ? e.serverPopupEle : e.createElement("div", {
                                id: e.element.id + "_popup",
                                className: "e-ddl e-popup " + (null != e.cssClass ? e.cssClass : "")
                            }),
                            n = e.setSearchBox(i);
                        if (e.listHeight = C(e.popupHeight), e.headerTemplate && !e.isServerBlazor && e.setHeaderTemplate(i), vt([e.list], i), e.footerTemplate && !e.isServerBlazor && e.setFooterTemplate(i), e.isServerRendered && i && i.querySelector(".e-ddl-footer") && i.appendChild(i.querySelector(".e-ddl-footer")), document.body.appendChild(i), e.updateServerPopup(i), i.style.visibility = "hidden", "auto" !== e.popupHeight) {
                            if (e.searchBoxHeight = 0, g(n.container) || (e.searchBoxHeight = n.container.parentElement.getBoundingClientRect().height, e.listHeight = (parseInt(e.listHeight, 10) - e.searchBoxHeight).toString() + "px"), e.headerTemplate || e.isServerRendered && i && i.querySelector(".e-ddl-header")) {
                                e.header = e.header ? e.header : i.querySelector(".e-ddl-header");
                                var r = Math.round(e.header.getBoundingClientRect().height);
                                e.listHeight = (parseInt(e.listHeight, 10) - (r + e.searchBoxHeight)).toString() + "px"
                            }
                            if (e.footerTemplate || e.isServerRendered && i && i.querySelector(".e-ddl-footer")) {
                                e.footer = e.footer ? e.footer : i.querySelector(".e-ddl-footer");
                                r = Math.round(e.footer.getBoundingClientRect().height);
                                e.listHeight = (parseInt(e.listHeight, 10) - (r + e.searchBoxHeight)).toString() + "px"
                            }
                            e.list.style.maxHeight = (parseInt(e.listHeight, 10) - 2).toString() + "px", i.style.maxHeight = C(e.popupHeight)
                        } else i.style.height = "auto";
                        var o = 0,
                            s = void 0;
                        if (!g(e.selectedLI) && !g(e.activeIndex) && e.activeIndex >= 0 ? e.setScrollPosition() : e.list.scrollTop = 0, me.isDevice && !e.allowFiltering && ("dropdownlist" === e.getModuleName() || e.isDropDownClick && "combobox" === e.getModuleName())) {
                            o = e.getOffsetValue(i);
                            var a = e.isEmptyList() ? e.list : e.liCollections[0];
                            s = -(parseInt(getComputedStyle(a).textIndent, 10) - parseInt(getComputedStyle(e.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth, 10))
                        }
                        e.getFocusElement(), e.createPopup(i, o, s), e.checkCollision(i), me.isDevice && (e.popupObj.element.classList.add(bc.device), ("dropdownlist" === e.getModuleName() || "combobox" === e.getModuleName() && !e.allowFiltering && e.isDropDownClick) && (e.popupObj.collision = {
                            X: "fit",
                            Y: "fit"
                        }), e.isFilterLayout() && (e.popupObj.element.classList.add(bc.mobileFilter), e.popupObj.position = {
                            X: 0,
                            Y: 0
                        }, e.popupObj.dataBind(), St(e.popupObj.element, {
                            style: "left:0px;right:0px;top:0px;bottom:0px;"
                        }), ut([document.body, e.popupObj.element], bc.popupFullScreen), e.setSearchBoxPosition(), e.backIconElement = n.container.querySelector(".e-back-icon"), e.clearIconElement = n.container.querySelector("." + bc.clearIcon), ye.add(e.backIconElement, "click", e.clickOnBackIcon, e), ye.add(e.clearIconElement, "click", e.clearText, e))), i.style.visibility = "visible", ut([i], "e-popup-close");
                        for (var l = 0, h = e.popupObj.getScrollableParent(e.inputWrapper.container); l < h.length; l++) {
                            var p = h[l];
                            ye.add(p, "scroll", e.scrollHandler, e)
                        }
                        me.isDevice && e.isFilterLayout() && ye.add(e.list, "scroll", e.listScroll, e), St(e.targetElement(), {
                            "aria-expanded": "true"
                        }), ut([e.isFiltering() ? e.filterInput.parentElement : e.inputWrapper.container], [bc.inputFocus]);
                        e.beforePopupOpen = !0;
                        var d = {
                            popup: S() && e.isServerRendered ? null : e.popupObj,
                            cancel: !1,
                            animation: {
                                name: "FadeIn",
                                duration: 100
                            }
                        };
                        e.trigger("open", d, (function(t) {
                            t.cancel ? (e.beforePopupOpen = !1, e.destroyPopup()) : (e.serverBlazorUpdateSelection(), e.bindServerScrollEvent(), ut([e.inputWrapper.container], [bc.iconAnimation]), e.renderReactTemplates(), e.popupObj.show(new Qt(t.animation), 1e3 === e.zIndex ? e.element : null))
                        }))
                    }
                }))
            }
        }, t.prototype.checkCollision = function(e) {
            (!me.isDevice || me.isDevice && "dropdownlist" !== this.getModuleName() && !this.isDropDownClick) && (Hn(e).length > 0 && (e.style.marginTop = -parseInt(getComputedStyle(e).marginTop, 10) + "px"), this.popupObj.resolveCollision())
        }, t.prototype.serverBlazorUpdateSelection = function() {
            (this.isServerBlazor && (null !== this.value || null !== this.index || null !== this.text) || "dropdownlist" !== this.getModuleName() && !this.isTyped) && ("dropdownlist" === this.getModuleName() && (this.removeSelection(), this.removeFocus(), this.removeHover(), this.updateValues()), "combobox" === this.getModuleName() && this.ulElement && this.findListElement(this.ulElement, "li", "data-value", this.value) && !this.isTyped && this.updateValues(), this.isServerBlazor && "dropdownlist" !== this.getModuleName() && ("" === this.text || null === this.text) && this.ulElement && (this.ulElement.querySelector("li").classList.contains(lc) || ut([this.ulElement.querySelector("li")], lc)))
        }, t.prototype.bindServerScrollEvent = function() {
            this.isServerBlazor && this.list && this.fields.groupBy && !this.isGroupChecking && (ye.remove(this.list, "scroll", this.setFloatingHeader), ye.add(this.list, "scroll", this.setFloatingHeader, this))
        }, t.prototype.updateServerPopup = function(e) {
            this.isServerBlazor && (e && e.querySelector("li") && gt([e.querySelector(".e-content")], ["e-nodata"]), this.initial = !1, e.removeAttribute("style"))
        }, t.prototype.getOffsetValue = function(e) {
            var t = getComputedStyle(e),
                i = parseInt(t.borderTopWidth, 10),
                n = parseInt(t.borderBottomWidth, 10);
            return this.setPopupPosition(i + n)
        }, t.prototype.createPopup = function(e, t, i) {
            var n = this;
            this.popupObj = new lr(e, {
                width: this.setWidth(),
                targetType: "relative",
                relateTo: this.inputWrapper.container,
                collision: {
                    X: "flip",
                    Y: "flip"
                },
                offsetY: t,
                enableRtl: this.enableRtl,
                offsetX: i,
                position: {
                    X: "left",
                    Y: "bottom"
                },
                zIndex: this.zIndex,
                close: function() {
                    n.isDocumentClick || n.focusDropDown(), n.isReact && n.clearTemplate(["headerTemplate", "footerTemplate"]);
                    var e = "autocomplete" === n.getModuleName();
                    n.DropDownBaseresetBlazorTemplates(e, e, !0, !0, !1, !0, !0), n.isNotSearchList = !1, n.isDocumentClick = !1, n.destroyPopup();
                    var t = Tt(n.inputElement, "form");
                    n.isFiltering() && t && n.actionCompleteData.list && n.actionCompleteData.list[0] && (n.isActive = !0, n.onActionComplete(n.actionCompleteData.ulElement, n.actionCompleteData.list, null, !0))
                },
                open: function() {
                    ye.add(document, "mousedown", n.onDocumentClick, n), n.isPopupOpen = !0;
                    var e = n.actionCompleteData && n.actionCompleteData.ulElement && n.actionCompleteData.ulElement.querySelector("li"),
                        t = n.list.querySelector("ul li");
                    n.isFiltering() && n.itemTemplate && n.element.tagName === n.getNgDirective() && e && t && e.textContent !== t.textContent && n.cloneElements(), n.isFilterLayout() && (gt([n.inputWrapper.container], [bc.inputFocus]), n.isFilterFocus = !0, n.filterInput.focus(), n.inputWrapper.clearButton && ut([n.inputWrapper.clearButton], bc.clearIconHide)), n.activeStateChange()
                },
                targetExitViewport: function() {
                    me.isDevice || n.hidePopup()
                }
            })
        }, t.prototype.isEmptyList = function() {
            return !g(this.liCollections) && 0 === this.liCollections.length
        }, t.prototype.getFocusElement = function() {}, t.prototype.isFilterLayout = function() {
            return "dropdownlist" === this.getModuleName() && this.allowFiltering
        }, t.prototype.scrollHandler = function() {
            me.isDevice && ("dropdownlist" === this.getModuleName() && !this.isFilterLayout() || "combobox" === this.getModuleName() && !this.allowFiltering && this.isDropDownClick) && this.hidePopup()
        }, t.prototype.setSearchBoxPosition = function() {
            var e = this.filterInput.parentElement.getBoundingClientRect().height;
            this.popupObj.element.style.maxHeight = "100%", this.popupObj.element.style.width = "100%", this.list.style.maxHeight = window.innerHeight - e + "px", this.list.style.height = window.innerHeight - e + "px";
            var t = this.filterInput.parentElement.querySelector("." + bc.clearIcon);
            wt(this.filterInput), t.parentElement.insertBefore(this.filterInput, t)
        }, t.prototype.setPopupPosition = function(e) {
            var t, i = e,
                n = this.list.querySelector("." + bc.focus) || this.selectedLI,
                r = this.isEmptyList() ? this.list : this.liCollections[0],
                o = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1],
                s = r.getBoundingClientRect().height,
                a = this.list.offsetHeight / 2,
                l = g(n) ? r.offsetTop : n.offsetTop;
            if (o.offsetTop - a < l && !g(this.liCollections) && this.liCollections.length > 0 && !g(n)) {
                var h = this.list.offsetHeight / s,
                    p = parseInt(getComputedStyle(this.list).paddingBottom, 10);
                t = (h - (this.liCollections.length - this.activeIndex)) * s - i + p, this.list.scrollTop = n.offsetTop
            } else l > a ? (t = a - s / 2, this.list.scrollTop = l - a + s / 2) : t = l;
            return -(t = t + s + i - (s - this.inputWrapper.container.offsetHeight) / 2)
        }, t.prototype.setWidth = function() {
            var e = C(this.popupWidth);
            e.indexOf("%") > -1 && (e = (this.inputWrapper.container.offsetWidth * parseFloat(e) / 100).toString() + "px");
            if (me.isDevice && !this.allowFiltering && ("dropdownlist" === this.getModuleName() || this.isDropDownClick && "combobox" === this.getModuleName())) {
                var t = this.isEmptyList() ? this.list : this.liCollections[0];
                e = parseInt(e, 10) + 2 * (parseInt(getComputedStyle(t).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) + "px"
            }
            return e
        }, t.prototype.scrollBottom = function(e) {
            if (!g(this.selectedLI)) {
                var t = this.list.offsetHeight,
                    i = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop,
                    n = this.list.scrollTop + i - t;
                n = e ? n + 2 * parseInt(getComputedStyle(this.list).paddingTop, 10) : n;
                var r = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;
                r = this.fields.groupBy && !g(this.fixedHeaderElement) ? r - this.fixedHeaderElement.offsetHeight : r, 0 === this.activeIndex ? this.list.scrollTop = 0 : (i > t || !(r > 0 && this.list.offsetHeight > r)) && (this.list.scrollTop = n)
            }
        }, t.prototype.scrollTop = function() {
            if (!g(this.selectedLI)) {
                var e = this.selectedLI.offsetTop - this.list.scrollTop;
                this.selectedLI.offsetTop, this.selectedLI.offsetHeight, this.list.scrollTop;
                e = this.fields.groupBy && !g(this.fixedHeaderElement) ? e - this.fixedHeaderElement.offsetHeight : e;
                var t = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;
                0 === this.activeIndex ? this.list.scrollTop = 0 : e < 0 ? this.list.scrollTop = this.list.scrollTop + e : t > 0 && this.list.offsetHeight > t || (this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !g(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0))
            }
        }, t.prototype.isEditTextBox = function() {
            return !1
        }, t.prototype.isFiltering = function() {
            return this.allowFiltering
        }, t.prototype.isPopupButton = function() {
            return !0
        }, t.prototype.setScrollPosition = function(e) {
            if (g(e)) this.scrollBottom(!0);
            else switch (e.action) {
                case "pageDown":
                case "down":
                case "end":
                    this.scrollBottom();
                    break;
                default:
                    this.scrollTop()
            }
        }, t.prototype.clearText = function() {
            this.filterInput.value = "", this.searchLists(null)
        }, t.prototype.listScroll = function() {
            this.filterInput.blur()
        }, t.prototype.setEleWidth = function(e) {
            g(e) || ("number" == typeof e ? this.inputWrapper.container.style.width = C(e) : "string" == typeof e && (this.inputWrapper.container.style.width = e.match(/px|%|em/) ? e : C(e)))
        }, t.prototype.closePopup = function(e) {
            var t = this;
            if (this.isTyped = !1, this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen) {
                ye.remove(document, "mousedown", this.onDocumentClick), this.isActive = !1, this.filterInputObj = null, this.isDropDownClick = !1, this.preventAutoFill = !1;
                for (var i = 0, n = this.popupObj.getScrollableParent(this.inputWrapper.container); i < n.length; i++) {
                    var r = n[i];
                    ye.remove(r, "scroll", this.scrollHandler)
                }
                me.isDevice && this.isFilterLayout() && (gt([document.body, this.popupObj.element], bc.popupFullScreen), ye.remove(this.list, "scroll", this.listScroll)), this.isFilterLayout() && (me.isDevice || (this.searchKeyModule.destroy(), this.clearIconElement && ye.remove(this.clearIconElement, "click", this.clearText)), this.backIconElement && (ye.remove(this.backIconElement, "click", this.clickOnBackIcon), ye.remove(this.clearIconElement, "click", this.clearText)), ye.remove(this.filterInput, "input", this.onInput), ye.remove(this.filterInput, "keyup", this.onFilterUp), ye.remove(this.filterInput, "keydown", this.onFilterDown), ye.remove(this.filterInput, "blur", this.onBlur), ye.remove(this.filterInput, "paste", this.pasteHandler), this.filterInput = null), St(this.targetElement(), {
                    "aria-expanded": "false",
                    "aria-activedescendant": null
                }), this.inputWrapper.container.classList.remove(bc.iconAnimation), this.isFiltering() && (this.actionCompleteData.isUpdated = !1), this.beforePopupOpen = !1;
                var o = {
                        name: "FadeOut",
                        duration: 100,
                        delay: e || 0
                    },
                    s = {
                        popup: S() && this.isServerRendered ? null : this.popupObj,
                        cancel: !1,
                        animation: o
                    };
                this.trigger("close", s, (function(e) {
                    if (!g(t.popupObj) && !g(t.popupObj.element.querySelector(".e-fixed-head"))) {
                        var i = t.popupObj.element.querySelector(".e-fixed-head");
                        i.parentNode.removeChild(i), t.fixedHeaderElement = null
                    }
                    e.cancel || ("autocomplete" !== t.getModuleName() || t.isServerBlazor || t.rippleFun(), t.isPopupOpen ? t.popupObj.hide(new Qt(e.animation)) : t.destroyPopup())
                }))
            }
        }, t.prototype.destroyPopup = function() {
            var e = document.querySelector("#" + this.element.id + "_popup_holder");
            this.isServerBlazor && this.serverPopupEle && e && (e.appendChild(this.serverPopupEle), this.interopAdaptor.invokeMethodAsync("OnServerClosePopup")), this.isPopupOpen = !1, this.isFilterFocus = !1, this.popupObj.destroy(), wt(this.popupObj.element)
        }, t.prototype.clickOnBackIcon = function() {
            this.hidePopup(), this.focusIn()
        }, t.prototype.render = function() {
            if (this.isServerBlazor) this.inputElement = this.element, this.inputWrapper = {
                container: this.element.parentElement
            }, this.hiddenElement = this.inputWrapper.container.querySelector("select"), this.inputWrapper.buttons = [this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon")], this.showClearButton && (this.inputWrapper.clearButton = this.inputWrapper.container.querySelector(".e-clear-icon"), No.wireClearBtnEvents(this.element, this.inputWrapper.clearButton, this.inputWrapper.container)), "Auto" === this.floatLabelType && No.wireFloatingEvents(this.element), No.bindInitialEvent({
                element: this.element,
                buttons: null,
                customTag: null,
                floatLabelType: this.floatLabelType,
                properties: this.properties
            }), this.setFields(), this.wireEvent(), this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.enabled || (this.targetElement().tabIndex = -1), this.element.hasAttribute("autofocus") && this.focusIn(), this.initial = !1;
            else {
                "INPUT" === this.element.tagName ? (this.inputElement = this.element, g(this.inputElement.getAttribute("role")) && this.inputElement.setAttribute("role", "textbox"), g(this.inputElement.getAttribute("type")) && this.inputElement.setAttribute("type", "text")) : (this.inputElement = this.createElement("input", {
                    attrs: {
                        role: "textbox",
                        type: "text"
                    }
                }), this.element.tagName !== this.getNgDirective() && (this.element.style.display = "none"), this.element.parentElement.insertBefore(this.inputElement, this.element), this.preventTabIndex(this.inputElement));
                var e = this.cssClass;
                g(this.cssClass) || "" === this.cssClass || (e = this.cssClass.replace(/\s+/g, " ").trim()), this.inputWrapper = No.createInput({
                    element: this.inputElement,
                    buttons: this.isPopupButton() ? [bc.icon] : null,
                    floatLabelType: this.floatLabelType,
                    properties: {
                        readonly: "dropdownlist" === this.getModuleName() || this.readonly,
                        placeholder: this.placeholder,
                        cssClass: e,
                        enabled: this.enabled,
                        enableRtl: this.enableRtl,
                        showClearButton: this.showClearButton
                    }
                }, this.createElement), this.element.tagName === this.getNgDirective() ? this.element.appendChild(this.inputWrapper.container) : this.inputElement.parentElement.insertBefore(this.element, this.inputElement), this.hiddenElement = this.createElement("select", {
                    attrs: {
                        "aria-hidden": "true",
                        tabindex: "-1",
                        class: bc.hiddenElement
                    }
                }), yt([this.hiddenElement], this.inputWrapper.container), this.validationAttribute(this.element, this.hiddenElement), this.setFields(), this.inputWrapper.container.style.width = C(this.width), this.inputWrapper.container.classList.add("e-ddl"), this.wireEvent(), this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.element.removeAttribute("tabindex");
                var t = this.element.getAttribute("id") ? this.element.getAttribute("id") : m("ej2_dropdownlist");
                if (this.element.id = t, this.hiddenElement.id = t + "_hidden", this.targetElement().setAttribute("tabindex", this.tabIndex), St(this.targetElement(), this.getAriaAttributes()), this.updateDataAttribute(this.htmlAttributes), this.setHTMLAttributes(), null !== this.value || null !== this.activeIndex || null !== this.text) this.initValue();
                else if ("SELECT" === this.element.tagName && this.element.options[0]) {
                    var i = this.element;
                    this.value = i.options[i.selectedIndex].value, this.text = g(this.value) ? null : i.options[i.selectedIndex].textContent, this.initValue()
                }
                this.preventTabIndex(this.element), this.enabled || (this.targetElement().tabIndex = -1), this.initial = !1, this.element.style.opacity = "", this.inputElement.onselect = function(e) {
                    e.stopImmediatePropagation()
                }, this.inputElement.onchange = function(e) {
                    e.stopImmediatePropagation()
                }, this.element.hasAttribute("autofocus") && this.focusIn(), g(this.text) || this.inputElement.setAttribute("value", this.text)
            }
            this.renderComplete()
        }, t.prototype.setFooterTemplate = function(e) {
            this.footer ? this.footer.innerHTML = "" : (this.footer = this.createElement("div"), ut([this.footer], bc.footer));
            var t = Ge(this.dropdownCompiler(this.footerTemplate) ? document.querySelector(this.footerTemplate).innerHTML.trim() : this.footerTemplate)({}, this, "footerTemplate", this.footerTemplateId, this.isStringTemplate, null, this.footer);
            if (t && t.length > 0)
                for (var i = 0; i < t.length; i++) this.footer.appendChild(t[i]);
            this.DropDownBaseupdateBlazorTemplates(!1, !1, !1, !1, !1, !1, !0), vt([this.footer], e)
        }, t.prototype.setHeaderTemplate = function(e) {
            this.header ? this.header.innerHTML = "" : (this.header = this.createElement("div"), ut([this.header], bc.header));
            var t = Ge(this.dropdownCompiler(this.headerTemplate) ? document.querySelector(this.headerTemplate).innerHTML.trim() : this.headerTemplate)({}, this, "headerTemplate", this.headerTemplateId, this.isStringTemplate, null, this.header);
            if (t && t.length)
                for (var i = 0; i < t.length; i++) this.header.appendChild(t[i]);
            this.DropDownBaseupdateBlazorTemplates(!1, !1, !1, !1, !1, !0, !1);
            var n = e.querySelector("div.e-content");
            e.insertBefore(this.header, n)
        }, t.prototype.setOldText = function(e) {
            this.text = e
        }, t.prototype.setOldValue = function(e) {
            this.value = e
        }, t.prototype.refreshPopup = function() {
            g(this.popupObj) || !document.body.contains(this.popupObj.element) || (!this.allowFiltering || me.isDevice && this.isFilterLayout()) && "autocomplete" !== this.getModuleName() || (gt([this.popupObj.element], "e-popup-close"), this.popupObj.refreshPosition(this.inputWrapper.container), this.popupObj.resolveCollision())
        }, t.prototype.checkData = function(e) {
            !e.dataSource || g(Object.keys(e.dataSource)) || !this.itemTemplate || !this.allowFiltering || this.isListSearched && e.dataSource instanceof yn || (this.list = null, this.actionCompleteData = {
                ulElement: null,
                list: null,
                isUpdated: !1
            }), this.isListSearched = !1;
            var t = -1 !== Object.keys(e).indexOf("value") && g(e.value),
                i = -1 !== Object.keys(e).indexOf("text") && g(e.text);
            "autocomplete" !== this.getModuleName() && this.allowFiltering && (t || i) && (this.itemData = null)
        }, t.prototype.updateDataSource = function(e) {
            "" === this.inputElement.value && (g(e) || !g(e.dataSource) && (e.dataSource instanceof yn || 0 !== e.dataSource.length)) || this.clearAll(null, e), (g(e) || !g(e.dataSource) && (e.dataSource instanceof yn || 0 !== e.dataSource.length) || e.dataSource !== []) && this.resetList(this.dataSource), this.isCustomFilter || this.isFilterFocus || document.activeElement === this.filterInput || this.checkCustomValue()
        }, t.prototype.checkCustomValue = function() {
            this.itemData = this.getDataByValue(this.value);
            var e = this.getItemData();
            this.setProperties({
                value: e.value,
                text: e.text
            })
        }, t.prototype.updateInputFields = function() {
            "dropdownlist" === this.getModuleName() && No.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton)
        }, t.prototype.onPropertyChanged = function(t, i) {
            "dropdownlist" === this.getModuleName() && (this.isServerBlazor || (this.checkData(t), this.setUpdateInitial(["fields", "query", "dataSource"], t)));
            for (var n = 0, r = Object.keys(t); n < r.length; n++) {
                var o = r[n];
                switch (o) {
                    case "query":
                    case "dataSource":
                        break;
                    case "htmlAttributes":
                        this.setHTMLAttributes();
                        break;
                    case "width":
                        this.setEleWidth(t.width);
                        break;
                    case "placeholder":
                        No.setPlaceholder(t.placeholder, this.inputElement);
                        break;
                    case "filterBarPlaceholder":
                        this.filterInput && No.setPlaceholder(t.filterBarPlaceholder, this.filterInput);
                        break;
                    case "readonly":
                        "dropdownlist" !== this.getModuleName() && No.setReadonly(t.readonly, this.inputElement);
                        break;
                    case "cssClass":
                        this.setCssClass(t.cssClass, i.cssClass);
                        break;
                    case "enableRtl":
                        this.setEnableRtl();
                        break;
                    case "enabled":
                        this.setEnable();
                        break;
                    case "text":
                        if (null === t.text) {
                            this.clearAll();
                            break
                        }
                        if (this.list || (this.dataSource instanceof yn && (this.initRemoteRender = !0), this.renderList()), !this.initRemoteRender) {
                            var s = this.getElementByText(t.text);
                            this.checkValidLi(s) || (this.liCollections && 100 === this.liCollections.length && "autocomplete" === this.getModuleName() && this.listData.length > 100 ? this.setSelectionData(t.text, i.text, "text") : this.isServerBlazor || this.setOldText(i.text)), this.updateInputFields()
                        }
                        break;
                    case "value":
                        if (null === t.value) {
                            this.clearAll();
                            break
                        }
                        if (this.notify("beforeValueChange", {
                                newProp: t
                            }), this.list || (this.dataSource instanceof yn && (this.initRemoteRender = !0), this.renderList()), !this.initRemoteRender) {
                            var a = this.getElementByValue(t.value);
                            this.checkValidLi(a) || (this.liCollections && 100 === this.liCollections.length && "autocomplete" === this.getModuleName() && this.listData.length > 100 ? this.setSelectionData(t.value, i.value, "value") : this.isServerBlazor || this.setOldValue(i.value)), this.updateInputFields()
                        }
                        break;
                    case "index":
                        if (null === t.index) {
                            this.clearAll();
                            break
                        }
                        if (this.list || (this.dataSource instanceof yn && (this.initRemoteRender = !0), this.renderList()), !this.initRemoteRender && this.liCollections) {
                            var l = this.liCollections[t.index];
                            this.checkValidLi(l) || (this.liCollections && 100 === this.liCollections.length && "autocomplete" === this.getModuleName() && this.listData.length > 100 ? this.setSelectionData(t.index, i.index, "index") : this.isServerBlazor || (this.index = i.index)), this.updateInputFields()
                        }
                        break;
                    case "footerTemplate":
                        this.popupObj && this.setFooterTemplate(this.popupObj.element);
                        break;
                    case "headerTemplate":
                        this.popupObj && this.setHeaderTemplate(this.popupObj.element);
                        break;
                    case "valueTemplate":
                        g(this.itemData) || null == this.valueTemplate || this.setValueTemplate();
                        break;
                    case "allowFiltering":
                        this.allowFiltering && (this.actionCompleteData = {
                            ulElement: this.ulElement,
                            list: this.listData,
                            isUpdated: !0
                        }, this.updateSelectElementData(this.allowFiltering));
                        break;
                    case "floatLabelType":
                        No.removeFloating(this.inputWrapper), No.addFloating(this.inputElement, t.floatLabelType, this.placeholder, this.createElement);
                        break;
                    case "showClearButton":
                        No.setClearButton(t.showClearButton, this.inputElement, this.inputWrapper, null, this.createElement), this.bindClearEvent();
                        break;
                    default:
                        var h;
                        h = this.getPropObject(o, t, i), e.prototype.onPropertyChanged.call(this, h.newProperty, h.oldProperty)
                }
            }
        }, t.prototype.checkValidLi = function(e) {
            return !!this.isValidLI(e) && (this.setSelection(e, null), !0)
        }, t.prototype.setSelectionData = function(e, t, i) {
            var n, r = this;
            this.updateListValues = function() {
                "text" === i ? (n = r.getElementByText(e), r.checkValidLi(n) || r.setOldText(t)) : "value" === i ? (n = r.getElementByValue(e), r.checkValidLi(n) || r.setOldValue(t)) : "index" === i && (n = r.liCollections[e], r.checkValidLi(n) || (r.index = t))
            }
        }, t.prototype.setCssClass = function(e, t) {
            g(t) || (t = t.replace(/\s+/g, " ").trim()), g(e) || (e = e.replace(/\s+/g, " ").trim()), No.setCssClass(e, [this.inputWrapper.container], t), this.popupObj && No.setCssClass(e, [this.popupObj.element], t)
        }, t.prototype.getModuleName = function() {
            return "dropdownlist"
        }, t.prototype.showPopup = function() {
            if (this.enabled)
                if (S() && this.itemTemplate && this.DropDownBaseupdateBlazorTemplates(!0, !1, !1, !1), this.beforePopupOpen) this.refreshPopup();
                else {
                    this.beforePopupOpen = !0, this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0] ? (this.isActive = !0, this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, !0)) : (g(this.list) || !f(this.list) && (this.list.classList.contains(hc) || this.list.querySelectorAll("." + cc).length <= 0) || this.isFiltering() && this.isServerBlazor) && this.renderList(), this.isServerBlazor || this.invokeRenderPopup();
                    var e = !this.isFiltering() || document.querySelector("#" + this.element.id + "_popup_holder"),
                        t = "dropdownlist" === this.getModuleName() || !this.isFiltering();
                    this.isServerBlazor && e && !g(this.list) && t && this.invokeRenderPopup()
                }
        }, t.prototype.invokeRenderPopup = function() {
            if (me.isDevice && this.isFilterLayout()) {
                var e = this;
                window.onpopstate = function() {
                    e.hidePopup()
                }, history.pushState({}, "")
            }
            g(this.list.children[0]) && !this.list.classList.contains(hc) || this.renderPopup(), St(this.targetElement(), {
                "aria-activedescendant": this.selectedLI ? this.selectedLI.id : null
            })
        }, t.prototype.clientRenderPopup = function(e, t) {
            t ? (this.serverPopupEle = t, this.list = t.querySelector(".e-dropdownbase.e-content") ? t.querySelector(".e-dropdownbase.e-content") : this.list, this.ulElement = this.list.querySelector("ul"), g(this.ulElement) && !this.list.classList.contains(hc) && ut([this.list], [hc]), this.liCollections = this.ulElement ? this.ulElement.querySelectorAll("." + cc) : [], this.listData = e, "autocomplete" === this.getModuleName() && this.liCollections.length > 0 && this.renderHightSearch(), this.initRemoteRender = !1, this.isPopupOpen || this.serverBlazorUpdateSelection(), this.unWireListEvents(), this.wireListEvents(), this.isServerIncrementalSearch && this.searchKeyEvent && (this.isServerIncrementalSearch = !1, this.initial = !1, this.onServerIncrementalSearch(this.searchKeyEvent)), this.isServerNavigation && this.searchKeyEvent && ("down" === this.searchKeyEvent.action || "up" === this.searchKeyEvent.action ? (this.isServerNavigation = !1, this.updateUpDownAction(this.searchKeyEvent)) : "home" !== this.searchKeyEvent.action && "end" !== this.searchKeyEvent.action || (this.isServerNavigation = !1, this.updateHomeEndAction(this.searchKeyEvent))), this.beforePopupOpen && this.invokeRenderPopup(), "dropdownlist" !== this.getModuleName() && this.onActionComplete(this.ulElement, this.listData)) : null != e && this.listData !== e && (this.listData = e, this.initRemoteRender = !1)
        }, t.prototype.renderHightSearch = function() {}, t.prototype.updateclientItemData = function(e) {
            this.listData = e
        }, t.prototype.initValueItemData = function(e) {
            this.itemData = e, this.previousValue = this.value, this.initial = !1
        }, t.prototype.serverUpdateListElement = function(e, t) {
            this.listData = e, this.ulElement && (this.liCollections = this.ulElement.querySelectorAll("." + cc))
        }, t.prototype.hidePopup = function(e) {
            var t = !!this.headerTemplate,
                i = !!this.headerTemplate;
            if (this.DropDownBaseresetBlazorTemplates(!1, !1, !1, !1, !1, t, i), this.isEscapeKey && "dropdownlist" === this.getModuleName())
                if (No.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton), this.isEscapeKey = !1, g(this.index)) this.resetSelection();
                else {
                    var n = this.findListElement(this.ulElement, "li", "data-value", this.value);
                    this.selectedLI = this.liCollections[this.index] || n, this.selectedLI && (this.updateSelectedItem(this.selectedLI, null, !0), this.valueTemplate && null !== this.itemData && this.setValueTemplate())
                } this.closePopup();
            var r = this.getItemData(),
                o = this.isServerBlazor ? !g(this.value) : !g(this.selectedLI);
            "" === this.inputElement.value.trim() && !this.isInteracted && (this.isSelectCustom || o && this.inputElement.value !== r.text) && (this.isSelectCustom = !1, this.clearAll(e))
        }, t.prototype.focusIn = function(e) {
            if (this.enabled && !this.targetElement().classList.contains(bc.disable)) {
                var t = !1;
                this.preventFocus && me.isDevice && (this.inputWrapper.container.tabIndex = 1, this.inputWrapper.container.focus(), this.preventFocus = !1, t = !0), t || this.targetElement().focus(), ut([this.inputWrapper.container], [bc.inputFocus]), this.onFocus(e)
            }
        }, t.prototype.focusOut = function(e) {
            this.enabled && (this.isTyped = !0, this.hidePopup(e), this.targetElement().blur(), gt([this.inputWrapper.container], [bc.inputFocus]))
        }, t.prototype.destroy = function() {
            if (this.isActive = !1, this.isReact && this.clearTemplate(), (!this.isServerBlazor || this.popupObj && document.body.contains(this.popupObj.element)) && this.hidePopup(), this.unWireEvent(), this.list && (this.unWireListEvents(), this.isServerBlazor && this.fields.groupBy && !this.isGroupChecking && ye.remove(this.list, "scroll", this.setFloatingHeader)), !this.isServerBlazor) {
                if (this.element && !this.element.classList.contains("e-" + this.getModuleName())) return;
                for (var t = ["readonly", "aria-disabled", "aria-placeholder", "placeholder", "aria-owns", "aria-labelledby", "aria-haspopup", "aria-expanded", "aria-activedescendant", "autocomplete", "aria-readonly", "autocorrect", "autocapitalize", "spellcheck", "aria-autocomplete", "aria-live", "aria-describedby", "aria-label"], i = 0; i < t.length; i++) this.inputElement.removeAttribute(t[i]);
                this.inputElement.setAttribute("tabindex", this.tabIndex), this.inputElement.classList.remove("e-input"), No.setValue("", this.inputElement, this.floatLabelType, this.showClearButton), this.element.style.display = "block", this.inputWrapper.container.parentElement.tagName === this.getNgDirective() || this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container), wt(this.inputWrapper.container), e.prototype.destroy.call(this)
            }
        }, t.prototype.getItems = function() {
            return this.list || (this.dataSource instanceof yn && (this.initRemoteRender = !0), this.renderList()), this.ulElement ? e.prototype.getItems.call(this) : []
        },





 t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.clear=function(){this.value=null},vc([zt(null)],t.prototype,"cssClass",void 0),vc([zt("100%")],t.prototype,"width",void 0),vc([zt("300px")],t.prototype,"popupHeight",void 0),vc([zt("100%")],t.prototype,"popupWidth",void 0),vc([zt(null)],t.prototype,"placeholder",void 0),vc([zt(null)],t.prototype,"filterBarPlaceholder",void 0),vc([zt({})],t.prototype,"htmlAttributes",void 0),vc([zt(null)],t.prototype,"query",void 0),vc([zt(null)],t.prototype,"valueTemplate",void 0),vc([zt(null)],t.prototype,"headerTemplate",void 0),vc([zt(null)],t.prototype,"footerTemplate",void 0),vc([zt(!1)],t.prototype,"allowFiltering",void 0),vc([zt(!1)],t.prototype,"readonly",void 0),vc([zt(null)],t.prototype,"text",void 0),vc([zt(null)],t.prototype,"value",void 0),vc([zt(null)],t.prototype,"index",void 0),vc([zt("Never")],t.prototype,"floatLabelType",void 0),vc([zt(!1)],t.prototype,"showClearButton",void 0),vc([_t()],t.prototype,"filtering",void 0),vc([_t()],t.prototype,"change",void 0),vc([_t()],t.prototype,"beforeOpen",void 0),vc([_t()],t.prototype,"open",void 0),vc([_t()],t.prototype,"close",void 0),vc([_t()],t.prototype,"blur",void 0),vc([_t()],t.prototype,"focus",void 0),t=vc([Gt],t)}(mc),Sc=function(){function e(e){this.parent=e,this.flag=!1}return e.prototype.create=function(e){var t=sl(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode,i=new sn(e.column.field,"notequal",null,!0,!1);this.obj=new Cc(u({dataSource:this.parent.dataSource instanceof yn?this.parent.dataSource:new yn(this.parent.dataSource),query:(new on).where(i).select(e.column.field),enabled:ll(e.column,e.requestType,e.element),fields:{value:e.column.field},value:xl(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,actionComplete:this.ddActionComplete.bind(this),created:this.dropdownCreated.bind(this),placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always",open:this.dropDownOpen.bind(this),sortOrder:"Ascending"},e.column.edit.params)),this.obj.query.params=this.parent.query.params,S()&&(this.obj.locale=this.parent.locale),this.obj.appendTo(e.element),e.element.setAttribute("name",sl(e.column.field))},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.dropdownCreated=function(e){this.flag=!0},e.prototype.ddActionComplete=function(e){e.result=wn.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof yn&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1},e.prototype.dropDownOpen=function(e){var t=Ka(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!g(t)){var i=document.querySelector("#"+t.id).ej2_instances[0];e.popup.element.style.zIndex=(i.zIndex+1).toString()}},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),xc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kc=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Tc="e-input-group-icon",Dc="e-spin-up",Ec=new RegExp("^(-)?(\\d*)$"),Rc=["title","style","class"],Pc=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isVue=!1,n.preventChange=!1,n.numericOptions=t,n}return xc(t,e),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=a("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),gt([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=Tt(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var t=this.createElement("input"),i=0;i<this.element.attributes.length;i++){"id"!==this.element.attributes[i].nodeName&&(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML)}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,l("ej2_instances",e,this.element)}if(!S()||!this.isServerRendered){St(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"});var n={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new ki("numerictextbox",n,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,S()&&this.isServerRendered||(this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value)),this.validateMinMax(),this.validateStep(),null!==this.placeholder||S()&&this.isServerRendered||this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(S()&&this.isServerRendered?(this.container=this.element.parentElement,this.inputWrapper={container:this.container},this.hiddenInput=this.container.querySelector('input[type="hidden"]'),this.showClearButton&&(this.inputWrapper.clearButton=this.container.querySelector(".e-clear-icon"),No.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),this.showSpinButton&&(this.spinDown=this.container.querySelector(".e-spin-down"),this.spinUp=this.container.querySelector("."+Dc),this.wireSpinBtnEvents()),No.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties})):(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value)),this.wireEvents(),S()&&this.isServerRendered||(null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value))),this.elementPrevValue=this.element.value,this.renderComplete())},t.prototype.checkAttributes=function(e){for(var t=0,i=e?g(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];t<i.length;t++){var n=i[t];if(!g(this.element.getAttribute(n)))switch(n){case"disabled":if(g(this.numericOptions)||void 0===this.numericOptions.enabled||e){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!e)}break;case"readonly":if(g(this.numericOptions)||void 0===this.numericOptions.readonly||e){var o="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:o},!e)}break;case"placeholder":(g(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(g(this.numericOptions)||void 0===this.numericOptions.value||e){var s=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(l(n,s,{}),!e)}break;case"min":if(g(this.numericOptions)||void 0===this.numericOptions.min||e){var a=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===a||isNaN(a)||this.setProperties(l(n,a,{}),!e)}break;case"max":if(g(this.numericOptions)||void 0===this.numericOptions.max||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===h||isNaN(h)||this.setProperties(l(n,h,{}),!e)}break;case"step":if(g(this.numericOptions)||void 0===this.numericOptions.step||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===p||isNaN(p)||this.setProperties(l(n,p,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(null!==d&&!isNaN(d)||"value"===n)&&this.setProperties(l(n,d,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new ee(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==a("currency",this)&&(l("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;g(this.cssClass)||""===this.cssClass||(e=this.getNumericValidClassList(this.cssClass));var t=No.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&St(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),St(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&St(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];0===o.indexOf("data")&&this.hiddenInput.setAttribute(o,t[o])}},t.prototype.updateHTMLAttrToElement=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Rc.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){No.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))},t.prototype.getNumericValidClassList=function(e){var t=e;return g(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.updateHTMLAttrToWrapper=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Rc.indexOf(i)>-1)if("class"===i){var n=this.getNumericValidClassList(this.htmlAttributes[i]);""!==n&&ut([this.container],n.split(" "))}else if("style"===i){var r=this.container.getAttribute(i);r=g(r)?this.htmlAttributes[i]:r+this.htmlAttributes[i],this.container.setAttribute(i,r)}else this.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.setElementWidth=function(e){g(e)||("number"==typeof e?this.container.style.width=C(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:C(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=No.appendSpan(Tc+" e-spin-down",this.container,this.createElement),St(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=No.appendSpan(Tc+" "+Dc,this.container,this.createElement),St(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),St(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,t){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)},t.prototype.checkErrorClass=function(){this.isValidState?gt([this.container],"e-error"):ut([this.container],"e-error"),St(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&ye.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",Tt(this.element,"form")){var t=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}},t.prototype.resetFormHandler=function(){"EJS-NUMERICTEXTBOX"===this.element.tagName?this.updateValue(null):this.updateValue(this.inputEleValue)},t.prototype.setSpinButton=function(){g(this.spinDown)||St(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),g(this.spinUp)||St(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){ye.add(this.element,"focus",this.focusHandler,this),ye.add(this.element,"blur",this.focusOutHandler,this),ye.add(this.element,"keydown",this.keyDownHandler,this),ye.add(this.element,"keyup",this.keyUpHandler,this),ye.add(this.element,"input",this.inputHandler,this),ye.add(this.element,"keypress",this.keyPressHandler,this),ye.add(this.element,"change",this.changeHandler,this),ye.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&ye.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){ye.add(this.spinUp,me.touchStartEvent,this.mouseDownOnSpinner,this),ye.add(this.spinDown,me.touchStartEvent,this.mouseDownOnSpinner,this),ye.add(this.spinUp,me.touchEndEvent,this.mouseUpOnSpinner,this),ye.add(this.spinDown,me.touchEndEvent,this.mouseUpOnSpinner,this),ye.add(this.spinUp,me.touchMoveEvent,this.touchMoveOnSpinner,this),ye.add(this.spinDown,me.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){ye.remove(this.element,"focus",this.focusHandler),ye.remove(this.element,"blur",this.focusOutHandler),ye.remove(this.element,"keyup",this.keyUpHandler),ye.remove(this.element,"input",this.inputHandler),ye.remove(this.element,"keydown",this.keyDownHandler),ye.remove(this.element,"keypress",this.keyPressHandler),ye.remove(this.element,"change",this.changeHandler),ye.remove(this.element,"paste",this.pasteHandler),this.formEle&&ye.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){ye.remove(this.spinUp,me.touchStartEvent,this.mouseDownOnSpinner),ye.remove(this.spinDown,me.touchStartEvent,this.mouseDownOnSpinner),ye.remove(this.spinUp,me.touchEndEvent,this.mouseUpOnSpinner),ye.remove(this.spinDown,me.touchEndEvent,this.mouseUpOnSpinner),ye.remove(this.spinUp,me.touchMoveEvent,this.touchMoveOnSpinner),ye.remove(this.spinDown,me.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)},t.prototype.raiseChangeEvent=function(e){if(this.prevValue!==this.value){var t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),c(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var t=this.element.value;setTimeout((function(){e.numericRegex().test(e.element.value)||e.setElementValue(t)}))}},t.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout((function(){if(e.element.selectionStart>0){var i,n=e.element.selectionStart,r=e.element.selectionStart-1,o=e.element.value.split("");i=a("decimal",te(e.locale)).charCodeAt(0)," "===e.element.value[r]&&e.element.selectionStart>0&&!t?(g(e.prevVal)?e.element.value=e.element.value.trim():0!==r?e.element.value=e.prevVal:0===r&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(r,r)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(o.indexOf(e.element.value[e.element.selectionStart-1])!==o.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===i||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==i)&&(e.element.value=e.element.value.substring(0,r)+e.element.value.substring(n,e.element.value.length),e.element.setSelectionRange(r,r),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(o.indexOf(e.element.value[e.element.selectionStart-2])!==o.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===i||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==i)&&(e.element.setSelectionRange(r,r),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(g(e.prevVal)?e.element.value=e.element.value:e.element.value=e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.prevVal=e.element.value}}))},t.prototype.keyUpHandler=function(e){if(this.enabled&&!this.readonly){!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&me.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);if(t=null===t||isNaN(t)?null:t,this.hiddenInput.value=t||0===t?t.toString():null,Tt(this.element,"form")){var i=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||t)&&me.isDevice&&this.preventHandler(),this.isVue){var i=this.instance.getNumberParser({format:"n"})(this.element.value),n=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),r={event:e,value:null===i||isNaN(i)?null:i,previousValue:null===n||isNaN(n)?null:n};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",r)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action("increment",e);break;case 40:e.preventDefault(),this.action("decrement",e)}},t.prototype.performAction=function(e,t,i){(null===e||isNaN(e))&&(e=0);var n="increment"===i?e+t:e-t;return n=this.correctRounding(e,t,n),this.strictMode?this.trimValue(n):n},t.prototype.correctRounding=function(e,t,i){var n=new RegExp("[,.](.*)"),r=(e.toString(),t.toString(),n.test(e.toString())),o=n.test(t.toString());if(r||o){var s=r?n.exec(e.toString())[0].length:0,a=o?n.exec(t.toString())[0].length:0,l=Math.max(s,a);return this.roundValue(i,l)}return i},t.prototype.roundValue=function(e,t){t=t||0;var i=Math.pow(10,t);return e*=i,Math.round(e)/i},t.prototype.updateValue=function(e,t){t&&(this.isInteract=!0),null===e||isNaN(e)||this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),(!this.isVue||this.isVue&&!this.preventChange)&&this.raiseChangeEvent(t)},t.prototype.updateCurrency=function(e,t){l(e,t,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var t;t=this.getNumberOfDecimals(e),this.setProperties({value:this.roundNumber(e,t)},!0)}else e=null,this.setProperties({value:e},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),St(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,t){No.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var t,i=new RegExp("[eE][-+]?([0-9]+)"),n=e.toString();if(i.test(n)){var r=i.exec(n);g(r)||(n=e.toFixed(Math.min(parseInt(r[1],10),20)))}var o=n.split(".")[1];return t=o&&o.length?o.length:0,null!==this.decimals&&(t=t<this.decimals?t:this.decimals),t},t.prototype.formatNumber=function(){var e;return e=this.getNumberOfDecimals(this.value),this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,t){var i=e,n=t||0,r=i.toString().split("e"),o=(i=Math.round(Number(r[0]+"e"+(r[1]?Number(r[1])+n:n)))).toString().split("e");return i=Number(o[0]+"e"+(o[1]?Number(o[1])-n:-n)),Number(i.toFixed(n))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!me.isDevice&&"11.0"===me.info.version&&13===e.keyCode){var t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var i=String.fromCharCode(e.which),n=this.element.value;return n=n.substring(0,this.element.selectionStart)+i+n.substring(this.element.selectionEnd),!!this.numericRegex().test(n)||(e.preventDefault(),e.stopPropagation(),!1)},t.prototype.numericRegex=function(){var e=a("decimal",te(this.locale)),t="*";return"."===e&&(e="\\"+e),0===this.decimals&&this.validateDecimalOnType?Ec:(this.decimals&&this.validateDecimalOnType&&(t="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+e+"\\d"+t+")?)|("+e+"\\d"+t+")))?$"))},t.prototype.mouseWheel=function(e){var t;e.preventDefault();var i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.action("increment",e):t<0&&this.action("decrement",e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var t=this;if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,gt([this.container],"e-error"),this.prevValue=this.value,this.value||0===this.value){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(me.isDevice||"11.0"!==me.info.version){var n=me.isDevice&&me.isIos?600:0;setTimeout((function(){t.element.setSelectionRange(0,i.length)}),n)}else this.element.setSelectionRange(0,i.length)}me.isDevice||ye.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var t=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),me.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout((function(){t.setElementValue(i,n)}),200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var r=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(r),me.isDevice||ye.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(Tt(this.element,"form")){var o=this.element.nextElementSibling,s=document.createEvent("FocusEvent");s.initEvent("focusout",!1,!0),o.dispatchEvent(s)}}},t.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var i=e.currentTarget,n=i.classList.contains(Dc)?"increment":"decrement";ye.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval((function(){t.isCalled=!0,t.action(n,e)}),150),ye.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){document.elementFromPoint(e.clientX,e.clientY).classList.contains(Tc)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.isPrevFocused&&(this.element.focus(),me.isDevice||(this.isPrevFocused=!1)),me.isDevice||e.preventDefault(),this.getElementData(e)){var t=e.currentTarget,i=t.classList.contains(Dc)?"increment":"decrement";if(ye.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,ye.remove(document,"mouseup",this.mouseUpClick),Tt(this.element,"form")){var n=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly)&&(clearInterval(this.timeOut),!0)},t.prototype.floatLabelTypeUpdate=function(){No.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),No.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,ye.remove(this.spinUp,"mouseleave",this.mouseUpClick),ye.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"increment")),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"decrement")),this.raiseChangeEvent()},t.prototype.destroy=function(){if(this.unwireEvents(),!S()||!this.isServerRendered){wt(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),wt(this.spinUp),wt(this.spinDown));for(var t=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),wt(this.container),e.prototype.destroy.call(this)}},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),ut([this.container],["e-input-focus"]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),gt([this.container],["e-input-focus"]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];switch(r){case"width":this.setElementWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":No.setEnabled(e.enabled,this.element);break;case"enableRtl":No.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":No.setReadonly(e.readonly,this.element),this.readonly?St(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0);break;case"placeholder":No.setPlaceholder(e.placeholder,this.element);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.updateValue(e.value),this.isVue&&this.preventChange&&(this.preventChange=!1);break;case"min":case"max":l(r,a(r,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),No.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var o=a(r,e);this.setProperties({currencyCode:o},!0),this.updateCurrency(r,o);break;case"currencyCode":var s=a(r,e);this.setProperties({currency:s},!0),this.updateCurrency("currency",s);break;case"format":l(r,a(r,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){S()?this.showClearButton&&(this.inputWrapper.clearButton=this.container.querySelector(".e-clear-icon"),No.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)):(No.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent())},t.prototype.updateSpinButton=function(e){S()?this.showSpinButton&&(this.spinDown=this.container.querySelector(".e-spin-down"),this.spinUp=this.container.querySelector("."+Dc),this.wireSpinBtnEvents()):e.showSpinButton?this.spinBtnCreation():(wt(this.spinUp),wt(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},kc([zt("")],t.prototype,"cssClass",void 0),kc([zt(null)],t.prototype,"value",void 0),kc([zt(-Number.MAX_VALUE)],t.prototype,"min",void 0),kc([zt(Number.MAX_VALUE)],t.prototype,"max",void 0),kc([zt(1)],t.prototype,"step",void 0),kc([zt(null)],t.prototype,"width",void 0),kc([zt(null)],t.prototype,"placeholder",void 0),kc([zt({})],t.prototype,"htmlAttributes",void 0),kc([zt(!0)],t.prototype,"showSpinButton",void 0),kc([zt(!1)],t.prototype,"readonly",void 0),kc([zt(!0)],t.prototype,"enabled",void 0),kc([zt(!1)],t.prototype,"showClearButton",void 0),kc([zt(!1)],t.prototype,"enablePersistence",void 0),kc([zt("n2")],t.prototype,"format",void 0),kc([zt(null)],t.prototype,"decimals",void 0),kc([zt(null)],t.prototype,"currency",void 0),kc([zt(null)],t.prototype,"currencyCode",void 0),kc([zt(!0)],t.prototype,"strictMode",void 0),kc([zt(!1)],t.prototype,"validateDecimalOnType",void 0),kc([zt("Never")],t.prototype,"floatLabelType",void 0),kc([_t()],t.prototype,"created",void 0),kc([_t()],t.prototype,"destroyed",void 0),kc([_t()],t.prototype,"change",void 0),kc([_t()],t.prototype,"focus",void 0),kc([_t()],t.prototype,"blur",void 0),t=kc([Gt],t)}(pi),Ic=function(){function e(e){this.parent=e}return e.prototype.keyEventHandler=function(e){if(13===e.keyCode||9===e.keyCode){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.dispatchEvent(t)}},e.prototype.create=function(e){var t=sl(e.column.field);return this.instances=new ee(this.parent.locale),this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,"e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return this.obj.value},e.prototype.write=function(e){var t=e.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new Pc(u({value:parseFloat(xl(e.column.field,e.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,enabled:ll(e.column,e.requestType,e.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale},t.edit.params)),e.element.setAttribute("name",sl(e.column.field)),this.obj.appendTo(e.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)},e.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())},e}(),Mc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lc=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Oc=["title","style","class"],Ac=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.previousValue=null,n.isAngular=!1,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.isVue=!1,n.textboxOptions=t,n}return Mc(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"floatLabelType":No.removeFloating(this.textboxWrapper),No.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":No.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();
 break;case"width":No.setWidth(e.width,this.textboxWrapper.container);break;case"value":var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=r,No.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(g(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&g(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper();this.element.attributes;this.checkAttributes(!0);break;case"readonly":No.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(No.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":No.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":No.setPlaceholder(this.placeholder,this.respectiveElement);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),No.setPlaceholder(this.placeholder,this.respectiveElement)}}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(!S()||!this.isServerRendered){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=Tt(this.element,"form"),g(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=a("ej2_instances",this.element),t=this.multiline?this.createElement("textarea"):this.createElement("input"),i=0;i<this.element.attributes.length;i++){var n=this.element.attributes[i].nodeName;"id"!==n&&(t.setAttribute(n,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML,"name"===n&&this.element.removeAttribute("name"))}this.element.appendChild(t),this.element=t,l("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkAttributes(!1),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new ee(this.locale);var r={placeholder:this.placeholder};if(this.l10n=new ki("textbox",r,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",m("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role");for(var o=["required","minlength","maxlength"],s=0;s<o.length;s++)if(this.element.hasAttribute(o[s])){var h=this.element.getAttribute(o[s]);this.textarea.setAttribute(o[s],h),this.element.removeAttribute(o[s])}}}},t.prototype.checkAttributes=function(e){for(var t=0,i=e?g(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];t<i.length;t++){var n=i[t];if(!g(this.element.getAttribute(n)))switch(n){case"disabled":if(g(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!e)}break;case"readonly":if(g(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var o="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:o},!e)}break;case"placeholder":(g(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":if(g(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e){var s="off"===this.element.autocomplete?"off":"on";this.setProperties({autocomplete:s},!e)}break;case"value":(g(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"type":(g(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;g(this.cssClass)||""===this.cssClass||(e=this.getInputValidClassList(this.cssClass)),S()&&this.isServerRendered?(this.respectiveElement=this.element,this.textboxWrapper={container:this.element.parentElement},this.showClearButton&&!this.multiline&&(this.textboxWrapper.clearButton=this.textboxWrapper.container.querySelector(".e-clear-icon"),No.wireClearBtnEvents(this.respectiveElement,this.textboxWrapper.clearButton,this.textboxWrapper.container)),"Auto"===this.floatLabelType&&No.wireFloatingEvents(this.respectiveElement),No.bindInitialEvent({element:this.respectiveElement,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties})):(this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=No.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement)),this.wireEvents(),g(this.value)||(No.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),g(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:g(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,No.setWidth(this.width,this.textboxWrapper.container),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Oc.indexOf(i)>-1)if("class"===i){var n=this.getInputValidClassList(this.htmlAttributes[i]);""!==n&&ut([this.textboxWrapper.container],n.split(" "))}else if("style"===i){var r=this.textboxWrapper.container.getAttribute(i);r=g(r)?this.htmlAttributes[i]:r+this.htmlAttributes[i],this.textboxWrapper.container.setAttribute(i,r)}else this.textboxWrapper.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateHTMLAttrToElement=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Oc.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){No.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))},t.prototype.getInputValidClassList=function(e){var t=e;return g(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){ye.add(this.respectiveElement,"focus",this.focusHandler,this),ye.add(this.respectiveElement,"blur",this.focusOutHandler,this),ye.add(this.respectiveElement,"input",this.inputHandler,this),ye.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&ye.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!g(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&ye.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");g(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t},t.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!g(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");g(e)||(g(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("focus",t)},t.prototype.focusOutHandler=function(e){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.respectiveElement.value||this.raiseChangeEvent(e,!0);var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("blur",t)},t.prototype.inputHandler=function(e){var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",t),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,t){var i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value},t.prototype.bindClearEvent=function(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?ye.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):ye.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")){this.value;No.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.trigger("input",t),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0)}},t.prototype.unWireEvents=function(){ye.remove(this.respectiveElement,"focus",this.focusHandler),ye.remove(this.respectiveElement,"blur",this.focusOutHandler),ye.remove(this.respectiveElement,"input",this.inputHandler),ye.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&ye.remove(this.formElement,"reset",this.resetForm),!g(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&ye.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),S()&&this.isServerRendered?this.textboxWrapper=null:("INPUT"===this.element.tagName&&this.multiline&&(wt(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-placeholder","aria-disabled","aria-readonly","aria-labelledby"]),g(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),wt(this.textboxWrapper.container)),this.textboxWrapper=null,e.prototype.destroy.call(this))},t.prototype.addIcon=function(e,t){No.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];"disabled"===n?(this.setProperties({enabled:!1},!0),No.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!0},!0),No.setReadonly(this.readonly,this.respectiveElement)):"class"===n?this.respectiveElement.classList.add(e[n]):"placeholder"===n?(this.setProperties({placeholder:e[n]},!0),No.setPlaceholder(this.placeholder,this.respectiveElement)):("rows"===n&&this.respectiveElement.tagName,this.respectiveElement.setAttribute(n,e[n]))}},t.prototype.removeAttributes=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];"disabled"===n?(this.setProperties({enabled:!0},!0),No.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!1},!0),No.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===n?(this.setProperties({placeholder:null},!0),No.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&ut([this.textboxWrapper.container],["e-input-focus"]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&gt([this.textboxWrapper.container],["e-input-focus"]))},Lc([zt("text")],t.prototype,"type",void 0),Lc([zt(!1)],t.prototype,"readonly",void 0),Lc([zt(null)],t.prototype,"value",void 0),Lc([zt("Never")],t.prototype,"floatLabelType",void 0),Lc([zt("")],t.prototype,"cssClass",void 0),Lc([zt(null)],t.prototype,"placeholder",void 0),Lc([zt("on")],t.prototype,"autocomplete",void 0),Lc([zt({})],t.prototype,"htmlAttributes",void 0),Lc([zt(!1)],t.prototype,"multiline",void 0),Lc([zt(!0)],t.prototype,"enabled",void 0),Lc([zt(!1)],t.prototype,"showClearButton",void 0),Lc([zt(!1)],t.prototype,"enablePersistence",void 0),Lc([zt(null)],t.prototype,"width",void 0),Lc([_t()],t.prototype,"created",void 0),Lc([_t()],t.prototype,"destroyed",void 0),Lc([_t()],t.prototype,"change",void 0),Lc([_t()],t.prototype,"blur",void 0),Lc([_t()],t.prototype,"focus",void 0),Lc([_t()],t.prototype,"input",void 0),t=Lc([Gt],t)}(pi),Bc=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=e.column;return this.parent.createElement("input",{className:"e-field e-input e-defaultcell",attrs:{type:"text",value:g(e.value)?"":e.value,"e-mappinguid":t.uid,id:this.parent.element.id+sl(t.field),name:sl(t.field),style:"text-align:"+t.textAlign}})},e.prototype.read=function(e){return e.value},e.prototype.write=function(e){var t=e.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new Ac(u({element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:ll(e.column,e.requestType,e.element),placeholder:i?"":e.column.headerText},t.edit.params)),this.obj.appendTo(e.element)},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),Fc=function(){function e(e,t,i){this.args={},this.currentVirtualData={},this.parent=e,this.renderer=i,this.serviceLocator=t,this.addEventListener()}return e.prototype.clickHandler=function(e){var t=e.target,i=this.parent;(Ka(t,"e-gridcontent")&&Ka(Ka(t,"e-gridcontent"),"e-grid").id===i.element.id||i.frozenRows&&Ka(t,"e-headercontent"))&&!Ka(t,"e-unboundcelldiv")&&(this.rowIndex=Ka(t,"e-rowcell")?parseInt(t.parentElement.getAttribute("aria-rowindex"),10):-1,i.isEdit&&i.editModule.endEdit())},e.prototype.dblClickHandler=function(e){Ka(e.target,"e-rowcell")&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(Ka(e.target,"e-row"))},e.prototype.editComplete=function(e){this.parent.isEdit=!1;switch(S()&&!this.parent.isJsComponent&&(e.rows=null),e.requestType){case"save":(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)&&this.parent.isPersistSelection||"edit"!==e.action&&this.parent.selectRow(0),this.parent.trigger("actionComplete",u(e,{requestType:"save",type:"actionComplete"}));break;case"delete":if(S()&&!this.parent.isJsComponent){var t="data";e[t]=e[t][0]}this.parent.trigger("actionComplete",u(e,{requestType:"delete",type:"actionComplete"})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}},e.prototype.startEdit=function(e){var t=this,i=this.parent,n=i.getPrimaryKeyFieldNames(),r=[];if(this.rowIndex=this.editRowIndex=parseInt(e.getAttribute("aria-rowindex"),10),i.enableVirtualization||i.enableInfiniteScrolling){var o='.e-row[aria-rowindex="'+this.rowIndex+'"]';if(!this.parent.element.querySelector(o))return}if(S())for(var s=this.parent.getColumns(),a=0;a<s.length;a++){var l=s[a];l.template&&Ke(i.element.id+l.uid,0,this.rowIndex)}if(Sl(i)){var h=i.getRowObjectFromUID(e.getAttribute("data-uid"));this.previousData=h.data}else if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var p={data:this.previousData,index:this.rowIndex};this.parent.notify("virtual-scroll-edit-action-begin",p),this.previousData=p.data}else this.previousData=i.getCurrentViewRecords()[this.rowIndex];for(a=0;a<n.length;a++)r.push(xl(n[a],this.previousData));this.uid=e.getAttribute("data-uid");var d=i.getRowObjectFromUID(this.uid),c={primaryKey:n,primaryKeyValue:r,requestType:"beginEdit",rowData:this.previousData,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:d&&d.foreignKeyData,target:void 0};S()&&!this.parent.isJsComponent||(c.row=e),i.trigger("beginEdit",c,(function(n){n.type="actionBegin",i.trigger(wr,n,(function(n){if(!n.cancel){i.isEdit=!0,n.row=n.row?n.row:e,S()&&i.isServerRendered&&(t.originalRow=n.row,t.cloneRow=n.row.cloneNode(!0),n.cloneRow=t.cloneRow),"Dialog"!==i.editSettings.mode&&i.clearSelection(),"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,n.row.classList.add("e-dlgeditrow")),t.renderer.update(n),S()&&(n.form=null,t.cloneFrozen=n.cloneFrozen,t.frozen=n.frozen,t.cloneRow=n.cloneRow,t.originalRow=n.row),t.uid=e.getAttribute("data-uid"),i.editModule.applyFormValidation(),n.type="actionComplete",i.trigger("actionComplete",n),t.args=n,t.parent.allowTextWrap&&t.parent.notify("freezerender",{case:"textwrap"}),S()&&(t.parent.notify(Mr,{}),i.element.querySelector(".e-gridpopup").style.display="none",t.parent.notify("start-edit",{}))}}))}))},e.prototype.updateRow=function(e,t){var i=this,n=this.parent;this.editRowIndex=e;var r={requestType:"save",action:"edit",type:wr,data:t,cancel:!1,previousData:n.getCurrentViewRecords()[e],row:n.getRowByIndex(e)};n.showSpinner(),n.notify("update-data",r),r.promise?r.promise.then((function(){return n.refresh()})).catch((function(e){return i.edFail(e)})):n.refresh()},e.prototype.editFormValidate=function(){var e=this.parent,t=e.editModule.formObj.validate(),i=!e.editModule.mFormObj||e.editModule.mFormObj.validate();return t&&i},e.prototype.endEdit=function(){var e=this.parent;if(this.parent.isEdit&&this.editFormValidate()){var t=u({},{},this.previousData,!0),i=u(this.args,{requestType:"save",type:wr,data:t,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),n="Dialog"===e.editSettings.mode,r=document.querySelector("#"+e.element.id+"_dialogEdit_wrapper"),o=n?r.querySelector(".e-gridform"):e.element.querySelector(".e-gridform"),s={virtualData:{},isAdd:!1};if(this.parent.notify("get-virtual-data",s),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||"Normal"!==this.parent.editSettings.mode||o?t=e.editModule.getCurrentEditedData(o,t):this.parent.isEdit&&(this.currentVirtualData=t=i.data=s.virtualData),e.getFrozenColumns()&&"Normal"===e.editSettings.mode){var a=e.element.querySelector(".e-movableheader").querySelector(".e-gridform");if(e.frozenRows&&a)t=e.editModule.getCurrentEditedData(a,t);else(l=e.element.querySelector(".e-movablecontent").querySelector(".e-gridform"))&&(t=e.editModule.getCurrentEditedData(l,t))}if(S()){var l;i[l="form"]=null,i.movableForm=null,i.row={}}var h=[].slice.call(e.element.querySelectorAll(".e-editedrow")).length;if(s.isAdd||!Object.keys(this.currentVirtualData).length||h||(h=1),n?r.querySelectorAll(".e-editedrow").length:h)i.action="edit",e.trigger(wr,i,(function(t){t.cancel||(e.showSpinner(),e.notify("update-data",t))}));else if(i.action="add",i.selectedRow=0,i.index=this.addedRowIndex,e.notify("virtual-scroll-edit-success",{}),e.notify(Er,i),this.addedRowIndex=null,i.cancel)return}},e.prototype.destroyElements=function(){var e=this.parent;e.editModule.destroyWidgets(),e.editModule.destroyForm(),this.parent.notify("dialog-destroy",{})},e.prototype.editHandler=function(e){var t=this;e.promise?e.promise.then((function(i){return t.edSucc(i,e)})).catch((function(e){return t.edFail(e)})):this.editSuccess(e.data,e)},e.prototype.edSucc=function(e,t){this.editSuccess(e,t)},e.prototype.edFail=function(e){if(S()&&this.parent.isServerRendered){g(e.error)||g(e.error.message)||(e.error=e.error.message)}this.editFailure(e)},e.prototype.updateCurrentViewData=function(e){this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||(this.parent.getCurrentViewRecords()[this.editRowIndex]=e)},e.prototype.requestSuccess=function(e){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==e.action&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))},e.prototype.editSuccess=function(e,t){if(!(g(e)||e instanceof Array)){t.data=u({},u({},t.rowData,t.data),e)}var i;if(this.requestSuccess(t),this.parent.trigger("beforeDataBound",t),t.type="actionComplete",this.parent.isEdit=!1,S()&&this.parent.isServerRendered){this.closeForm();var n="rowIndex";i={requestType:t.requestType,rowIndex:t[n],action:t.action,data:t.data},this.parent.notify("editsuccess",i)}else this.refreshRow(t.data);(this.parent.notify("virtual-scroll-edit-success",t),this.parent.editModule.checkLastRow(t.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(t.data),this.blazorTemplate(),S()&&this.parent.isServerRendered||(this.editRowIndex=null,this.parent.trigger("actionComplete",t)),S()&&this.parent.notify(Mr,{}),!this.parent.isCheckBoxSelection&&"Multiple"!==this.parent.selectionSettings.type||!this.parent.isPersistSelection)&&("Dialog"!==this.parent.editSettings.mode&&(S()&&this.parent.isServerRendered?i[n="editRowIndex"]=this.rowIndex>-1?this.rowIndex:this.editRowIndex:this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex)));this.parent.hideSpinner()},e.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.getFrozenColumns()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))},e.prototype.blazorTemplate=function(){var e=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&Ue(this.parent.element.id+"editSettingsTemplate","Template",this.parent.editSettings);for(var t=0;t<e.length;t++){var i=e[t];i.template&&Ue(this.parent.element.id+i.uid,"Template",i,!1),i.editTemplate&&Ue(this.parent.element.id+i.uid+"editTemplate","EditTemplate",i)}},e.prototype.editFailure=function(e){this.parent.trigger("actionFailure",S()&&e instanceof Array?e[0]:{error:e}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:e})},e.prototype.needRefresh=function(){var e=!0,t=this.parent.element.querySelector(".e-gridform");return!this.parent.enableVirtualization&&!this.parent.infiniteScrollSettings.enableCache||"Normal"!==this.parent.editSettings.mode||t||(e=!1),e},e.prototype.refreshRow=function(e){var t=this.parent.getFrozenColumns(),i=new rs(this.serviceLocator,null,this.parent),n=this.parent.getRowObjectFromUID(this.uid);if(n&&(n.changes=e,this.parent.notify("refresh-virtual-cache",e),vl(n,this.parent.getForeignKeyColumns(),n.changes),this.needRefresh()&&i.refresh(n,this.parent.getColumns(),!0),t)){var r=void 0,o=this.parent.element.querySelector("[data-uid="+n.uid+"]");r=Ka(o,"e-frozencontent")||Ka(o,"e-frozenheader")?this.parent.infiniteScrollSettings.enableCache?this.parent.getMovableRowByIndex(n.index).getAttribute("data-uid"):this.parent.getMovableRows()[n.index].getAttribute("data-uid"):this.parent.infiniteScrollSettings.enableCache?this.parent.getRowByIndex(n.index).getAttribute("data-uid"):this.parent.getRows()[n.index].getAttribute("data-uid"),(n=this.parent.getRowObjectFromUID(r)).changes=e,i.refresh(n,this.parent.columns,!0),this.parent.editModule.checkLastRow(o)}},e.prototype.closeEdit=function(){var e=this;if(this.parent.isEdit){var t=this.parent,i=u(this.args,{requestType:"cancel",type:wr,cancel:!1,data:this.previousData,selectedRow:t.selectedRowIndex});if(t.notify("virtual-scroll-edit-cancel",i),this.blazorTemplate(),S()){i.form=null}t.trigger(wr,i,(function(i){if(!i.cancel){"Dialog"===e.parent.editSettings.mode&&e.parent.notify("dialog-destroy",{}),t.isEdit=!1,e.stopEditStatus(),i.type="actionComplete","Dialog"!==t.editSettings.mode&&(S()&&t.isServerRendered?e.closeForm():e.refreshRow(i.data));var n=t.groupSettings.enableLazyLoading&&t.groupSettings.columns.length&&!t.getContentTable().querySelector("tr.e-emptyrow");t.getContentTable().querySelector("tr.e-emptyrow")||t.getContentTable().querySelector("tr.e-row")||n||t.renderModule.emptyRow(),"Dialog"!==t.editSettings.mode&&t.selectRow(e.rowIndex),t.trigger("actionComplete",i),S()&&(e.parent.notify(Mr,{}),e.parent.notify("close-edit",{}))}}))}},e.prototype.addRecord=function(e,t){var i=this,n=this.parent;if(this.addedRowIndex=t=g(t)?0:t,e)n.notify(Er,{requestType:"save",type:wr,data:e,selectedRow:0,action:"add",index:t});else if(!n.isEdit){this.previousData={},this.uid="";for(var r=n.columnModel,o=0;o<r.length;o++)r[o].field&&wn.setValue(r[o].field,r[o].defaultValue,this.previousData);var s={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:wr,index:t,rowData:this.previousData,target:void 0},a={virtualData:{}};if(this.parent.notify("get-virtual-data",a),(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(a.virtualData).length&&(s.data=s.rowData=a.virtualData),S()){s.form=null}n.trigger(wr,s,(function(e){e.cancel||(n.isEdit=!0,"Dialog"!==n.editSettings.mode&&n.clearSelection(),i.renderer.addNew(e),n.editModule.applyFormValidation(),e.type="actionComplete",e.row=n.element.querySelector(".e-addedrow"),n.trigger("actionComplete",e),S()&&(i.parent.notify(Mr,{}),i.parent.notify("start-add",{})),i.args=e)}))}},e.prototype.deleteRecord=function(e,t){if(this.editRowIndex=this.parent.selectedRowIndex,t){t=t instanceof Array?t:[t];var i=this.parent,n=Object.keys(t).length;e=e||this.parent.getPrimaryKeyFieldNames()[0];for(var r=function(n){var r,o,s=i.currentViewData.some((function(i){return o=i,t[n]===xl(e,i)||t[n]===i}));t[n]=s?o:((r={})[e]=t[n],r)},o=0;o<n;o++)r(o)}var s={requestType:"delete",type:wr,foreignKeyData:{},data:t||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if(g(this.parent.commandDelIndex)||(s.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&s.data.length>1){var a=this.parent.getSelectedRows()[0].getAttribute("data-uid");s.data=[this.parent.getRowObjectFromUID(a).data]}S()&&!this.parent.isJsComponent&&(s.data=s.data[0]),this.parent.notify(Er,s)},e.prototype.stopEditStatus=function(){var e,t,i=this.parent,n=i.element.querySelector(".e-addedrow");i.getFrozenColumns()&&(e=i.element.querySelectorAll(".e-addedrow")[1],t=i.element.querySelectorAll(".e-editedrow")[1],e&&Ct(e),t&&t.classList.remove("e-editedrow")),n&&Ct(n),(n=i.element.querySelector(".e-editedrow"))&&n.classList.remove("e-editedrow")},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("crud-Action",this.editHandler,this),this.parent.on("double-tap",this.dblClickHandler,this),this.parent.on(Ir,this.clickHandler,this),this.parent.on("recordAdded",this.requestSuccess,this),this.parent.on("dblclick",this.dblClickHandler,this),this.parent.on("delete-complete",this.editComplete,this),this.parent.on("save-complete",this.editComplete,this),this.parent.on("closeinline",this.closeForm,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("crud-Action",this.editHandler),this.parent.off("double-tap",this.dblClickHandler),this.parent.off(Ir,this.clickHandler),this.parent.off("recordAdded",this.requestSuccess),this.parent.off("dblclick",this.dblClickHandler),this.parent.off("delete-complete",this.editComplete),this.parent.off("save-complete",this.editComplete),this.parent.off("closeinline",this.closeForm))},e.prototype.destroy=function(){this.removeEventListener(),this.renderer.destroy()},e}(),Nc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hc=function(e){function t(t,i,n){var r=e.call(this,t,i)||this;return r.parent=t,r.serviceLocator=i,r.renderer=n,r}return Nc(t,e),t.prototype.closeEdit=function(){e.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t,i){e.prototype.addRecord.call(this,t,i)},t.prototype.endEdit=function(){e.prototype.endEdit.call(this)},t.prototype.updateRow=function(t,i){e.prototype.updateRow.call(this,t,i)},t.prototype.deleteRecord=function(t,i){e.prototype.deleteRecord.call(this,t,i)},t.prototype.startEdit=function(t){e.prototype.startEdit.call(this,t)},t}(Fc),Vc=function(){function e(e,t,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.parent=e,this.serviceLocator=t,this.renderer=i,this.focus=t.getService("focus"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ir,this.clickHandler,this),this.parent.on("dblclick",this.dblClickHandler,this),this.parent.on("beforecellfocused",this.onBeforeCellFocused,this),this.parent.on("cellfocused",this.onCellFocused,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(Cr,this.dataBoundFunction),this.parent.addEventListener("batchCancel",this.batchCancelFunction),this.parent.on("double-tap",this.dblClickHandler,this),this.parent.on(Pr,this.keyDownHandler,this),this.parent.on("editNextValCell",this.editNextValCell,this),this.parent.on("closebatch",this.closeForm,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ir,this.clickHandler),this.parent.off("dblclick",this.dblClickHandler),this.parent.off("beforecellfocused",this.onBeforeCellFocused),this.parent.off("cellfocused",this.onCellFocused),this.parent.removeEventListener(Cr,this.dataBoundFunction),this.parent.removeEventListener("batchCancel",this.batchCancelFunction),this.parent.off("double-tap",this.dblClickHandler),this.parent.off(Pr,this.keyDownHandler),this.parent.off("editNextValCell",this.editNextValCell),this.parent.off("closebatch",this.closeForm))},e.prototype.batchCancel=function(e){this.parent.focusModule.restoreFocus()},e.prototype.dataBound=function(){this.parent.notify(Mr,{})},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.clickHandler=function(e){Ka(e.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&Tt(this.form,"td")!==Tt(e.target,"td")&&(this.saveCell(),this.editNextValCell()),Ka(e.target,"e-rowcell")&&!this.parent.isEdit&&this.setCellIdx(e.target))},e.prototype.dblClickHandler=function(e){var t=Ka(e.target,"e-rowcell"),i=Ka(e.target,"e-row");t&&i&&!isNaN(parseInt(t.getAttribute("aria-colindex"),10))&&!t.parentElement.classList.contains("e-editedrow")&&this.editCell(parseInt(i.getAttribute("aria-rowindex"),10),this.parent.getColumns()[parseInt(t.getAttribute("aria-colindex"),10)].field,this.isAddRow(parseInt(i.getAttribute("aria-rowindex"),10)))},e.prototype.onBeforeCellFocused=function(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action)>-1)&&(e.cancel=!0,e.byClick?e.clickArgs.preventDefault():e.keyArgs.preventDefault())},e.prototype.onCellFocused=function(e){var t=this.parent.getFrozenColumns(),i=this.parent.getContent().querySelector(".e-movablecontent"),n=this.parent.getHeaderContent().querySelector(".e-movableheader"),r=!(e.container.isContent&&e.container.isDataCell||this.parent.frozenRows&&e.container.isHeader);if(e.byKey&&!r){var o=e.container.indexes,s=o[0],a=o[1];t&&(i.contains(e.element)||this.parent.frozenRows&&n.contains(e.element))&&(a+=t),this.parent.frozenRows&&e.container.isContent&&(s+=this.parent.frozenRows);var l=this.parent.isEdit;if(!this.parent.element.querySelectorAll(".e-popup-open").length)switch(l=l&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":var h=this.parent.getColumns()[e.indexes[1]];h&&!this.parent.isEdit&&this.editCell(e.indexes[0],h.field),(l||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(s,a);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault(),l&&this.editCell(s,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(s,a),this.focus.focus()}}else this.parent.isEdit&&r&&this.saveCell()},e.prototype.isAddRow=function(e){return this.parent.getDataRows()[e].classList.contains("e-insertedrow")},e.prototype.editCellFromIndex=function(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[t].field,this.isAddRow(e))},e.prototype.closeEdit=function(){var e=this.parent,t=this.parent.getRowsObject(),i={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",i),!i.cancel){!(e.frozenColumns&&t.length<2*this.parent.currentViewData.length)||S()&&e.isServerRendered||t.push.apply(t,this.parent.getMovableRowsObject());var n=this.parent.getColumns();if(S())for(var r=0;r<n.length;r++){var o=n[r];o.template&&Ue(this.parent.element.id+o.uid,"Template",o,!1)}var s,a,l=new rs(this.serviceLocator,null,this.parent);e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();for(r=0;r<t.length;r++)if(t[r].isDirty&&(e.frozenColumns&&(e.getMovableRowsObject()[t[r].index].isDirty=!0),s=e.getContentTable().querySelector("[data-uid="+t[r].uid+"]"),e.frozenRows&&!s&&(s=e.getHeaderContent().querySelector("[data-uid="+t[r].uid+"]")),e.frozenColumns&&(e.frozenRows&&(a=e.getHeaderContent().querySelector(".e-movableheader").querySelector("[data-uid="+t[r].uid+"]"))||(a=e.getContent().querySelector(".e-movablecontent").querySelector("[data-uid="+t[r].uid+"]"))),s||a)){if(s&&s.classList.contains("e-insertedrow")||a&&a.classList.contains("e-insertedrow"))s&&Ct(s),a&&(e.frozenColumns||e.frozenRows)&&Ct(a),this.removeRowObjectFromUID(t[r].uid),r--;else{vl(t[r],this.parent.getForeignKeyColumns(),t[r].data),delete t[r].changes,delete t[r].edit,t[r].isDirty=!1;var h=a||s;S()&&e.isServerRendered?(e.getFrozenColumns()&&this.removeHideAndSelection(a),this.removeHideAndSelection(s),this.closeForm()):(Et(h,[],["e-hiddenrow","e-updatedtd"]),l.refresh(t[r],e.getColumns(),!1))}if(this.parent.aggregates.length>0){var p=[];p.type="cancel",this.parent.notify("refresh-footer-rendered",p),this.parent.groupSettings.columns.length>0&&this.parent.notify("group-aggregates",p)}}S()&&e.isServerRendered&&e.selectRow(e.selectionModule.prevRowIndex),e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();var d=this.parent.getRowsObject();e.notify("batchCancel",{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new ts({isDataRow:!0,cells:[new is({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(Mr,{}),this.parent.notify("tooltip-destroy",{}),d={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger("batchCancel",d),e.frozenColumns&&t.splice(this.parent.getMovableRowsObject().length,t.length)}},e.prototype.removeHideAndSelection=function(e){if(e.classList.contains("e-hiddenrow")){e.removeAttribute("aria-selected");for(var t=[].slice.call(e.querySelectorAll(".e-selectionbackground")),i=0;i<t.length;i++)gt([t[i]],["e-selectionbackground","e-active"])}Et(e,[],["e-hiddenrow","e-updatedtd"])},e.prototype.deleteRecord=function(e,t){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(e,t),this.parent.aggregates.length>0&&(this.parent.notify("refresh-footer-rendered",{}),this.parent.groupSettings.columns.length>0&&this.parent.notify("group-aggregates",{}))},e.prototype.addRecord=function(e){this.bulkAddRow(e)},e.prototype.endEdit=function(e){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},e.prototype.closeForm=function(){for(var e=0;e<Object.keys(this.originalCell).length;e++)for(var t=0;t<Object.keys(this.cloneCell).length;t++)Object.keys(this.originalCell)[e]===Object.keys(this.cloneCell)[t]&&(this.cloneCell[Object.keys(this.cloneCell)[t]].replaceWith(this.originalCell[Object.keys(this.originalCell)[e]]),this.originalCell[Object.keys(this.originalCell)[e]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[e]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}},e.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},e.prototype.batchSave=function(){var e=this,t=this.parent;if(t.isCheckBoxSelection){var i=t.element.querySelector(".e-checkselectall").parentElement;i.classList.contains("e-checkbox-disabled")&&t.pageSettings.totalRecordsCount>t.currentViewData.length&&gt([i],["e-checkbox-disabled"])}var n=this.parent.getColumns();if(S())for(var r=0;r<n.length;r++){var o=n[r];o.template&&(We[this.parent.element.id+o.uid]=[],Ke(this.parent.element.id+o.uid))}if(this.saveCell(),!(t.isEdit||this.editNextValCell()||t.isEdit)){var s=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&s.deletedRecords.length&&this.parent.selectionSettings.persistSelection&&(s.deletedRecords=this.removeSelectedData,this.removeSelectedData=[]);var a={changedRecords:this.parent.getRowsObject().filter((function(e){return e.isDirty&&-1===["add","delete"].indexOf(e.edit)})).map((function(e){return e.data}))},l={batchChanges:s,cancel:!1};t.trigger("beforeBatchSave",l,(function(i){if(!i.cancel){if(S()&&e.parent.isServerRendered){var n=e.parent.getContent();if(e.closeForm(),gt(n.querySelectorAll(".e-updatedtd"),["e-updatedtd"]),n.querySelector(".e-insertedrow, .e-hiddenrow")){gt(n.querySelectorAll(".e-hiddenrow"),["e-hiddenrow"]);for(var r=[].slice.call(n.querySelectorAll(".e-insertedrow")),o=0;o<r.length;o++)r[o].remove()}e.refreshRowIdx()}t.showSpinner(),t.notify("bulk-save",{changes:s,original:a})}}))}},e.prototype.getBatchChanges=function(){for(var e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=0,i=this.parent.getRowsObject();t<i.length;t++){var n=i[t];if(n.isDirty)switch(n.edit){case"add":e.addedRecords.push(n.changes);break;case"delete":e.deletedRecords.push(n.data);break;default:e.changedRecords.push(n.changes)}}return e},e.prototype.removeRowObjectFromUID=function(e){for(var t=this.parent.getRowsObject(),i=0,n=t.length;i<n&&t[i].uid!==e;i++);t.splice(i,1)},e.prototype.addRowObject=function(e){var t="Top"===this.parent.editSettings.newRowPosition,i=this.parent.getFrozenColumns();if(i){var n=this.parent.getMovableRowsObject(),r=e.clone();r.cells=r.cells.slice(i),e.cells=e.cells.slice(0,i),t?n.unshift(r):n.push(r)}t?this.parent.getRowsObject().unshift(e):this.parent.getRowsObject().push(e)},e.prototype.bulkDelete=function(e,t){var i=this;this.removeSelectedData=[];var n=this.parent,r=n.selectedRowIndex,o=n.getSelectedRows(),s={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:r,rowData:t||n.getSelectedRecords()[0],cancel:!1};(S()&&!this.parent.isJsComponent||(s.row=t?n.editModule.deleteRowUid?n.getRowElementByUID(n.editModule.deleteRowUid):n.getRows()[n.getCurrentViewRecords().indexOf(t)]:t?n.getRows()[r]:o[0],s.row))&&n.trigger("beforeBatchDelete",s,(function(e){if(!e.cancel){if(i.removeSelectedData=n.getSelectedRecords(),n.clearSelection(),e.row=e.row?e.row:t?n.getRows()[r]:o[0],i.parent.getFrozenColumns()){t&&(r=parseInt(e.row.getAttribute("aria-rowindex"),10),o=[e.row],Ka(e.row,"e-frozencontent")||Ka(e.row,"e-frozenheader")?o=o.concat(n.getMovableRowByIndex(r)):(Ka(e.row,"e-movablecontent")||Ka(e.row,"e-movableheader"))&&(o=o.concat(n.getFrozenRowByIndex(r))));for(var s=0;s<o.length;s++){var a=o[s].getAttribute("data-uid");if(o[s].classList.contains("e-insertedrow"))i.removeRowObjectFromUID(a),Ct(o[s]);else(c=n.getRowObjectFromUID(a)).isDirty=!0,c.edit="delete",Et(o[s],["e-hiddenrow","e-updatedtd"],[]),n.frozenRows&&r<n.frozenRows&&n.getMovableDataRows().length>=n.frozenRows&&(n.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").appendChild(n.getMovableRowByIndex(n.frozenRows-1)),n.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").appendChild(n.getRowByIndex(n.frozenRows-1))),n.frozenRows&&r<n.frozenRows&&n.getDataRows().length>=n.frozenRows&&n.getHeaderContent().querySelector("tbody").appendChild(n.getRowByIndex(n.frozenRows-1));delete o[s]}var l=n.getContent().querySelector(".e-frozencontent"),h=n.getContent().querySelector(".e-movablecontent");l.style.height=h.offsetHeight-rl()+"px"}else if(i.parent.getFrozenColumns()||1!==o.length&&!t)for(s=0;s<o.length;s++){var p=o[s].getAttribute("data-uid");if(o[s].classList.contains("e-insertedrow"))i.removeRowObjectFromUID(p),Ct(o[s]);else{Et(o[s],["e-hiddenrow","e-updatedtd"],[]);var d=n.getRowObjectFromUID(p);d.isDirty=!0,d.edit="delete",delete o[s]}}else{var c;a=e.row.getAttribute("data-uid");if(a=t&&i.parent.editModule.deleteRowUid?a=i.parent.editModule.deleteRowUid:a,e.row.classList.contains("e-insertedrow"))i.removeRowObjectFromUID(a),Ct(e.row);else(c=n.getRowObjectFromUID(a)).isDirty=!0,c.edit="delete",Et(e.row,["e-hiddenrow","e-updatedtd"],[]);delete e.row}i.refreshRowIdx(),t&&(n.editModule.deleteRowUid=void 0,n.getSelectedRows().length&&(r=parseInt(n.getSelectedRows()[0].getAttribute("aria-rowindex"),10))),n.isCheckBoxSelection||n.selectRow(r),n.trigger("batchDelete",e),n.notify("batchDelete",{rows:i.parent.getRowsObject()}),n.notify(Mr,{})}}))},e.prototype.refreshRowIdx=function(){var e=[],t=[],i=[],n=this.parent.getFrozenColumns();if(this.parent.frozenRows&&(e=[].slice.call(this.parent.getHeaderTable().querySelector("tbody").children),n)){t=[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);for(var r=0;r<t.length;r++)i[r]=this.parent.createElement("tr",{className:"emptynonmv"})}n&&(t=t.concat([].slice.call(this.parent.getContentTable().querySelector("tbody").children)),i=i.concat([].slice.call(this.parent.element.querySelector(".e-movablecontent").querySelector("tbody").children)));r=0;for(var o=0,s=(e=e.concat([].slice.call(this.parent.getContentTable().querySelector("tbody").children))).length;r<s;r++)e[r].classList.contains("e-row")&&!e[r].classList.contains("e-hiddenrow")?(e[r].setAttribute("aria-rowindex",o.toString()),n&&(t[r].setAttribute("aria-rowindex",o.toString()),i[r].classList.contains("e-row")&&i[r].setAttribute("aria-rowindex",o.toString())),o++):(e[r].removeAttribute("aria-rowindex"),n&&t[r].removeAttribute("aria-rowindex"))},e.prototype.getIndexFromData=function(e){return function(e,t){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}(e,this.parent.getCurrentViewRecords())},e.prototype.bulkAddRow=function(e){var t=this,i=this.parent;if(i.editSettings.allowAdding&&(i.isEdit&&(this.saveCell(),this.parent.notify("editNextValCell",{})),!i.isEdit)){this.parent.element.classList.add("e-editing");var n={defaultData:e||this.getDefaultData(),primaryKey:i.getPrimaryKeyFieldNames(),cancel:!1};i.trigger("beforeBatchAdd",n,(function(n){if(!n.cancel){var r,o;t.isAdded=!0,i.clearSelection();for(var s,a,l=new rs(t.serviceLocator,null,t.parent),h=new os(t.parent).generateRows([n.defaultData]),p=l.render(h[0],i.getColumns()),d=0;d<t.parent.groupSettings.columns.length;d++)p.insertBefore(t.parent.createElement("td",{className:"e-indentcell"}),p.firstChild),h[0].cells.unshift(new is({cellType:dr.Indent}));var c=i.getContentTable().querySelector("tbody");if(p.classList.add("e-insertedrow"),c.querySelector(".e-emptyrow")){var g=c.querySelector(".e-emptyrow");if(g.parentNode.removeChild(g),t.parent.getFrozenColumns()){var f=t.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody");f.firstElementChild.parentNode.removeChild(f.firstElementChild)}}i.getFrozenColumns()&&(r=t.renderMovable(p),o=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody"):i.getContent().querySelector(".e-movablecontent").querySelector("tbody"),"Top"===t.parent.editSettings.newRowPosition?o.insertBefore(r,o.firstChild):o.appendChild(r),ut(r.querySelectorAll(".e-rowcell"),["e-updatedtd"]),"auto"===t.parent.height&&t.parent.notify("frozenHeight",{})),c=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderContent().querySelector("tbody"):i.getContent().querySelector("tbody"),"Top"===t.parent.editSettings.newRowPosition?c.insertBefore(p,c.firstChild):c.appendChild(p),ut(p.querySelectorAll(".e-rowcell"),["e-updatedtd"]),h[0].isDirty=!0,h[0].changes=u({},{},h[0].data,!0),h[0].edit="add",t.addRowObject(h[0]),t.refreshRowIdx(),t.focus.forgetPrevious(),i.notify("batchAdd",{rows:t.parent.getRowsObject(),args:{isFrozen:t.parent.getFrozenColumns()}});var m=t.getBatchChanges(),y=t.parent.getCurrentViewRecords().length+m.addedRecords.length-m.deletedRecords.length-1;"Top"===t.parent.editSettings.newRowPosition?i.selectRow(0):i.selectRow(y),e||(a=t.findNextEditableCell(0,!0),s=i.getColumns()[a],"Top"===t.parent.editSettings.newRowPosition?t.editCell(0,s.field,!0):t.editCell(y,s.field,!0)),t.parent.aggregates.length>0&&(e||m.addedRecords.length)&&t.parent.notify("refresh-footer-rendered",{});var v={defaultData:n.defaultData,row:p,columnObject:s,columnIndex:a,primaryKey:n.primaryKey,cell:p.cells[a]};i.trigger("batchAdd",v),i.getFrozenColumns()&&Ml(r.querySelector("td:not(.e-hide)"),p.querySelector("td:not(.e-hide)")),S()&&(t.parent.notify(Mr,{}),t.parent.notify("start-add",{}))}}))}},e.prototype.renderMovable=function(e){for(var t=e.cloneNode(!0),i=0;i<this.parent.getFrozenColumns();i++)t.removeChild(t.children[0]);i=this.parent.getFrozenColumns();for(var n=e.childElementCount;i<n;i++)e.removeChild(e.children[e.childElementCount-1]);return t},e.prototype.findNextEditableCell=function(e,t,i){for(var n,r=this.parent.getColumns(),o=r.length,s=e;s<o;s++){if(n=!!i&&g(r[s].validationRules),!t&&this.checkNPCell(r[s]))return s;if(t&&!r[s].template&&r[s].visible&&r[s].allowEditing&&(!r[s].isIdentity||!r[s].isPrimaryKey)&&!n)return s}return-1},e.prototype.checkNPCell=function(e){return!e.template&&e.visible&&!e.isPrimaryKey&&!e.isIdentity&&e.allowEditing},e.prototype.getDefaultData=function(){for(var e={},t={number:0,string:null,boolean:!1,date:null,datetime:null},i=0,n=this.parent.columnModel;i<n.length;i++){var r=n[i];r.field&&l(r.field,r.defaultValue?r.defaultValue:t[r.type],e)}return e},e.prototype.setCellIdx=function(e){var t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.getAttribute("index"),10)},e.prototype.editCell=function(e,t,i){var n=this.parent,r=n.getColumnByField(t);this.index=e,this.field=t,this.isAdd=i;var o=n.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===e&&this.parent.getDataRows().length-1!==e);S()&&r.template&&!i&&Ke(this.parent.element.id+r.uid,0,e),n.editSettings.allowEditing&&(!o&&r.allowEditing?this.editCellExtend(e,t,i):o&&(this.editNext=!0,this.saveCell()))},e.prototype.editCellExtend=function(e,t,i){var n=this,r=this.parent,o=r.getColumnByField(t),s=r.getPrimaryKeyFieldNames();if(!r.isEdit){var a,l,h,p=r.getColumnIndexByField(t),d=r.getFrozenColumns();if(d&&p>=d?(a=r.getMovableDataRows()[e],h=this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[e].getAttribute("data-uid")),l=h.changes?u({},{},h.changes,!0):u({},{},this.getDataByIndex(e),!0)):(a=r.getDataRows()[e],l=u({},{},this.getDataByIndex(e),!0)),s[0]===o.field&&!a.classList.contains("e-insertedrow")||o.columns||o.isPrimaryKey&&o.isIdentity)this.parent.isLastCellPrimaryKey=!0;else{this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");var c=r.getRowObjectFromUID(a.getAttribute("data-uid")),f=[].slice.apply(a.cells),m={columnName:o.field,isForeignKey:!g(o.foreignKeyValue),primaryKey:s,rowData:l,validationRules:u({},o.validationRules?o.validationRules:{}),value:xl(o.field,l),type:i?"add":"edit",cancel:!1,foreignKeyData:c&&c.foreignKeyData};(S()&&!this.parent.isJsComponent||(m.cell=f[this.getColIndex(f,this.getCellIdx(o.uid))],m.row=a,m.columnObject=o,m.cell))&&r.trigger("cellEdit",m,(function(t){if(!t.cancel){if(t.cell=t.cell?t.cell:f[n.getColIndex(f,n.getCellIdx(o.uid))],t.row=t.row?t.row:a,t.columnObject=t.columnObject?t.columnObject:o,t.columnObject.index=g(t.columnObject.index)?0:t.columnObject.index,n.cellDetails={rowData:l,column:o,value:t.value,isForeignKey:t.isForeignKey,rowIndex:e,cellIndex:parseInt(t.cell.getAttribute("aria-colindex"),10),foreignKeyData:t.foreignKeyData},t.cell.classList.contains("e-updatedtd")&&(n.isColored=!0,t.cell.classList.remove("e-updatedtd")),S()&&r.isServerRendered){var i=t.row.querySelectorAll(".e-indentcell, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop").length;n.cloneCell[""+n.cellDetails.rowIndex+t.columnObject.index]=t.cloneCell=t.cell.cloneNode(!0),Ka(t.cell,"e-movableheader")||Ka(t.cell,"e-movablecontent")?(t.row.insertCell(t.columnObject.index-r.getFrozenColumns()),t.row.replaceChild(t.cloneCell,t.row.cells[t.columnObject.index-r.getFrozenColumns()])):(t.row.insertCell(t.columnObject.index+i),t.row.replaceChild(t.cloneCell,t.row.cells[t.columnObject.index+i])),n.originalCell[""+n.cellDetails.rowIndex+t.columnObject.index]=t.cell.parentElement.removeChild(t.cell),gt([n.cloneCell[""+n.cellDetails.rowIndex+t.columnObject.index]],["e-focus","e-focused"])}r.isEdit=!0,r.clearSelection(),r.isCheckBoxSelection&&r.isPersistSelection||r.selectRow(n.cellDetails.rowIndex,!0),n.renderer.update(t),n.parent.notify("batcheditform-rendered",t),n.form=r.element.querySelector("#"+r.element.id+"EditForm"),r.editModule.applyFormValidation([o]),n.parent.element.querySelector(".e-gridpopup").style.display="none"}}))}}},e.prototype.updateCell=function(e,t,i){var n=this.parent.getColumnByField(t),r=this.parent.getColumnIndexByField(t);if(n&&!n.isPrimaryKey){var o=this.parent.getDataRows()[e].querySelectorAll(".e-rowcell")[r];if(this.parent.getFrozenColumns())o=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(".e-rowcell")).concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(".e-rowcell")))[r];var s=Ka(o,"e-movablecontent")?this.parent.getMovableRowsObject()[e]:this.parent.getRowObjectFromUID(o.parentElement.getAttribute("data-uid"));this.refreshTD(o,n,s,i),this.parent.trigger("queryCellInfo",{cell:o,column:n,data:s.changes})}},e.prototype.setChanges=function(e,t,i,n){var r;if(this.parent.getFrozenColumns()){var o=this.parent.getRowElementByUID(e.uid),s=parseInt(o.getAttribute("aria-rowindex"),10);(r=this.parent.getRowsObject()[s]).changes||(r.changes=u({},{},e.data,!0)),g(t)||l(t,i,r.changes);var a=void 0;if(S()&&this.parent.isServerRendered&&(Ka(n,"e-movableheader")||Ka(n,"e-movablecontent"))){var h=this.parent.getMovableRowByIndex(this.cellDetails.rowIndex),p=parseInt(h.getAttribute("aria-rowindex"),10);a=this.parent.getMovableRowsObject()[p]}else a=this.parent.getMovableRowsObject()[s];a.changes=u({},{},r.changes,!0),e.data[t]!==i&&(a.isDirty=!0,r.isDirty=!0)}else e.changes||(e.changes=u({},{},e.data,!0)),g(t)||wn.setValue(t,i,e.changes),e.data[t]!==i&&(e.isDirty=!0)},e.prototype.updateRow=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];this.updateCell(e,r,t[r])}},e.prototype.getCellIdx=function(e){var t=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return g(this.parent.detailTemplate)&&g(this.parent.childGrid)||t++,this.parent.isRowDragable()&&t++,t},e.prototype.refreshTD=function(e,t,i,n){var r,o=new gs(this.parent,this.serviceLocator);n="number"!==t.type||g(n)?n:parseFloat(n),this.setChanges(i,t.field,n,e);var s,a,l=this.parent.getFrozenColumns();l=l&&this.parent.isRowDragable()?l+1:l,vl(i,this.parent.getForeignKeyColumns(),i.changes),r=l&&this.getCellIdx(t.uid)>=l&&this.parent.getColumns().length===i.cells.length?i.cells.slice(l,i.cells.length):i.cells,this.parent.isReact&&(s=e.parentElement,a=e.cellIndex),o.refreshTD(e,r[this.getCellIdx(t.uid)-(this.getCellIdx(t.uid)>=l?l:0)],i.changes,{index:this.getCellIdx(t.uid)}),this.parent.isReact?(this.newReactTd=s.cells[a],s.cells[a].classList.add("e-updatedtd")):e.classList.add("e-updatedtd"),e.classList.add("e-updatedtd"),this.parent.notify(Mr,{})},e.prototype.getColIndex=function(e,t){var i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),g(this.parent.detailTemplate)&&g(this.parent.childGrid)||i++,this.parent.isRowDragable()&&i++;for(var n=0;n<e.length;n++){if(parseInt(e[n].getAttribute("aria-colindex"),10)===t-i)return n}return-1},e.prototype.editNextValCell=function(){var e=this.parent,t=this.getBatchChanges(),i=this.parent.getCurrentViewRecords().length+t.addedRecords.length-t.deletedRecords.length-1;if(this.isAdded&&!e.isEdit){for(var n=this.cellDetails.cellIndex;n<e.getColumns().length;n++){if(e.isEdit)return;var r=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),o=e.getColumns()[r];o&&("Bottom"===this.parent.editSettings.newRowPosition?this.editCell(i,o.field,!0):this.editCell(0,o.field,!0),this.saveCell())}e.isEdit||(this.isAdded=!1)}},e.prototype.escapeCellEdit=function(){var e=this.generateCellArgs();e.value=e.previousValue,this.successCallBack(e,e.cell.parentElement,e.column,!0)(e)},e.prototype.generateCellArgs=function(){var e=this.parent;this.parent.element.classList.remove("e-editing");var t=this.cellDetails.column,i={};i[t.field]=xl(t.field,this.cellDetails.rowData);var n=e.editModule.getCurrentEditedData(this.form,i),r=u({},n);n=u({},n,this.cellDetails.rowData);var o=xl(t.field,r);g(t.field)||f(o)||l(t.field,o,n);var s={columnName:t.field,value:xl(t.field,n),rowData:this.cellDetails.rowData,column:t,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return S()&&!this.parent.isJsComponent||(s.cell=this.form.parentElement,s.columnObject=t),s},e.prototype.saveCell=function(e){if(!this.preventSaveCell){var t=this.parent;if(e||t.isEdit&&!this.validateFormObj()){this.preventSaveCell=!0;var i=this.generateCellArgs(),n=S()?Ka(this.form,"e-row"):i.cell.parentElement,r=S()?this.cellDetails.column:i.column;S()&&delete i.column,e?this.successCallBack(i,n,r)(i):(t.trigger("cellSave",i,this.successCallBack(i,n,r)),t.notify("batchedit-form",{formObj:this.form}))}}},e.prototype.successCallBack=function(e,t,i,n){var r=this;return function(e){var o=r.parent;if(e.cell=e.cell?e.cell:r.form.parentElement,e.columnObject=e.columnObject?e.columnObject:i,e.columnObject.index=g(e.columnObject.index)?0:e.columnObject.index,e.cancel){if(r.preventSaveCell=!1,r.editNext){if(r.editNext=!1,r.cellDetails.rowIndex===r.index&&r.cellDetails.column.field===r.field)return;r.editCellExtend(r.index,r.field,r.isAdd)}}else{if(o.editModule.destroyWidgets([i]),o.isEdit=!1,o.editModule.destroyForm(),S()&&i.template&&!e.cell.parentElement.classList.contains("e-insertedrow")&&Ue(o.element.id+i.uid,"Template",i,!1),r.parent.notify("tooltip-destroy",{}),S()&&o.isServerRendered&&(Ka(e.cell,"e-movableheader")||Ka(e.cell,"e-movablecontent")))r.refreshTD(e.cell,i,o.getMovableRowsObject()[r.cellDetails.rowIndex],e.value);else{var s=Ka(e.cell,"e-movablecontent")?o.getMovableRowsObject()[r.cellDetails.rowIndex]:o.getRowObjectFromUID(t.getAttribute("data-uid"));r.refreshTD(e.cell,i,s,e.value),r.parent.isReact&&(e.cell=r.newReactTd)}if(gt([t],["e-editedrow","e-batchrow"]),gt([e.cell],["e-editedbatchcell","e-boolcell"]),(!g(e.value)&&e.value.toString()===(g(r.cellDetails.value)?"":r.cellDetails.value).toString()&&!r.isColored||g(e.value)&&g(r.cellDetails.value)&&!e.cell.parentElement.classList.contains("e-insertedrow"))&&(e.cell.classList.remove("e-updatedtd"),S()&&o.isServerRendered&&(g(e.value)?"":e.value).toString()===(g(r.cellDetails.value)?"":r.cellDetails.value).toString()&&(r.cloneCell[""+parseInt(t.getAttribute("aria-rowindex"),10)+e.columnObject.index].classList.contains("e-selectionbackground")?r.originalCell[""+parseInt(t.getAttribute("aria-rowindex"),10)+e.columnObject.index].classList.add("e-selectionbackground","e-active"):r.originalCell[""+parseInt(t.getAttribute("aria-rowindex"),10)+e.columnObject.index].classList.remove("e-selectionbackground","e-active"),r.cloneCell[""+parseInt(t.getAttribute("aria-rowindex"),10)+e.columnObject.index].replaceWith(r.originalCell[""+parseInt(t.getAttribute("aria-rowindex"),10)+e.columnObject.index]))),g(n)&&o.trigger("cellSaved",e),o.notify(Mr,{}),r.isColored=!1,r.parent.aggregates.length>0&&(r.parent.notify("refresh-footer-rendered",{}),r.parent.groupSettings.columns.length>0&&!r.isAddRow(r.cellDetails.rowIndex)&&r.parent.notify("group-aggregates",{})),r.preventSaveCell=!1,r.editNext){if(r.editNext=!1,r.cellDetails.rowIndex===r.index&&r.cellDetails.column.field===r.field)return;var a=o.getColumnByField(r.field);a&&a.allowEditing&&r.editCellExtend(r.index,r.field,r.isAdd)}n&&o.notify("restore-Focus",{})}}},e.prototype.getDataByIndex=function(e){var t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[e].getAttribute("data-uid"));return t.changes?t.changes:t.data},e.prototype.keyDownHandler=function(e){if(("tab"===e.action||"shiftTab"===e.action)&&this.parent.isEdit){var t=this.parent,i=this.getBatchChanges(),n=this.parent.getCurrentViewRecords().length+i.addedRecords.length-i.deletedRecords.length-1,r=Ka(e.target,"e-rowcell");if(r){var o=r.querySelector(".e-field");if(o){var s=this.parent.getVisibleColumns();s["tab"===e.action?s.length-1:0].field===o.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===n&&"tab"===e.action?"Top"===t.editSettings.newRowPosition?(t.editSettings.newRowPosition="Bottom",this.addRecord(),t.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}},e.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify("destroy-form",{}),this.parent.isEdit=!1,this.isColored=!1)},e}(),jc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zc=function(e){function t(t,i,n){var r=e.call(this,t,i)||this;return r.parent=t,r.serviceLocator=i,r.renderer=n,r}return jc(t,e),t.prototype.closeEdit=function(){e.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t,i){e.prototype.addRecord.call(this,t,i)},t.prototype.endEdit=function(){e.prototype.endEdit.call(this)},t.prototype.updateRow=function(t,i){e.prototype.updateRow.call(this,t,i)},t.prototype.deleteRecord=function(t,i){e.prototype.deleteRecord.call(this,t,i)},t.prototype.startEdit=function(t){e.prototype.startEdit.call(this,t)},t}(Fc),qc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wc=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},_c={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};!function(e){e[e.Message=0]="Message",e[e.Label=1]="Label"}(ec||(ec={}));var Gc,Uc=function(e){function t(t,i){var n=e.call(this,i,t)||this;if(n.validated=[],n.errorRules=[],n.allowSubmit=!1,n.required="required",n.infoElement=null,n.inputElement=null,n.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",n.localyMessage={},n.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===n.rules&&(n.rules={}),n.l10n=new ki("formValidator",n.defaultMessages,n.locale),n.locale&&n.localeFunc(),K.on("notifyExternalChange",n.afterLocalization,n),t="string"==typeof t?xt(t,document):t,null!=n.element)return n.element.setAttribute("novalidate",""),n.inputElements=kt(n.selectQuery,n.element),n.createHTML5Rules(),n.wireEvents(),n}var i;return qc(t,e),i=t,t.prototype.addRules=function(e,t){e&&(this.rules.hasOwnProperty(e)?u(this.rules[e],t,{}):this.rules[e]=t)},t.prototype.removeRules=function(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(g(this.rules[e]&&t))return;for(var i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}},t.prototype.validate=function(e){var t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter((function(t){return t.name===e})).length;this.errorRules=[];for(var i=0,n=t;i<n.length;i++){var r=n[i];this.validateRules(r)}return 0===this.errorRules.length},t.prototype.reset=function(){this.element.reset(),this.clearForm()},t.prototype.getInputElement=function(e){return this.inputElement=xt('[name="'+e+'"]',this.element),this.inputElement},t.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var t=0,i=kt("."+this.errorClass+", ."+this.validClass,this.element);t<i.length;t++){wt(i[t])}e.prototype.destroy.call(this),K.off("notifyExternalChange",this.afterLocalization)},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"locale":this.localeFunc()}}},t.prototype.localeFunc=function(){for(var e=0,t=Object.keys(this.defaultMessages);e<t.length;e++){var i=t[e];this.l10n.setLocale(this.locale);var n=this.l10n.getConstant(i);this.localyMessage[i]=n}},t.prototype.getModuleName=function(){return"formValidator"},t.prototype.afterLocalization=function(e){this.locale=e.locale,this.localeFunc()},t.prototype.refresh=function(){this.unwireEvents(),this.inputElements=kt(this.selectQuery,this.element),this.wireEvents()},t.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var e=0,t=kt(this.selectQuery,this.element);e<t.length;e++){var i=t[e];i.removeAttribute("aria-invalid"),i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),i.classList.remove(this.validClass)}},t.prototype.createHTML5Rules=function(){for(var e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"],i=0,n=this.inputElements;i<n.length;i++){for(var r=n[i],o={},s=0,a=e;s<a.length;s++){var l=a[s];if(null!==r.getAttribute(l))switch(l){case"required":this.defRule(r,o,l,r.required);break;case"data-validation":l=r.getAttribute(l),this.defRule(r,o,l,!0);break;case"type":-1!==t.indexOf(r.type)&&this.defRule(r,o,r.type,!0);break;case"rangeLength":case"range":this.defRule(r,o,l,JSON.parse(r.getAttribute(l)));break;case"equalTo":var h=r.getAttribute(l);this.defRule(r,o,l,h);break;default:"true"===r.getAttribute("data-val")?this.annotationRule(r,o,l,r.getAttribute(l)):this.defRule(r,o,l,r.getAttribute(l))}}0!==Object.keys(o).length&&this.addRules(r.name,o)}},t.prototype.annotationRule=function(e,t,i,n){var r=i.split("-"),o=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],s=r[r.length-1],a=r[r.length-2];if(-1!==o.indexOf(s))switch(s){case"required":this.defRule(e,t,"required",n);break;case"creditcard":this.defRule(e,t,"creditcard",n);break;case"phone":this.defRule(e,t,"tel",n)}else if(-1!==o.indexOf(a))switch(a){case"maxlength":this.defRule(e,t,"maxLength",n);break;case"minlength":this.defRule(e,t,"minLength",n);break;case"range":var l=e.getAttribute("data-val-range-min"),h=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[l,h]);break;case"equalto":var p=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",p[p.length-1]);break;case"regex":this.defRule(e,t,"regex",n)}},t.prototype.defRule=function(e,t,i,n){var r,o=e.getAttribute("data-"+i+"-message"),s=e.getAttribute("data-val-"+i);this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),r=this.getErrorMessage(this.rules[e.name][i],i)),o?n=[n,o]:s?n=[n,s]:r&&(n=[n,r]),t[i]=n},t.prototype.wireEvents=function(){for(var e=0,t=this.inputElements;e<t.length;e++){var n=t[e];i.isCheckable(n)?ye.add(n,"click",this.clickHandler,this):"SELECT"===n.tagName?ye.add(n,"change",this.changeHandler,this):(ye.add(n,"focusout",this.focusOutHandler,this),ye.add(n,"keyup",this.keyUpHandler,this))}ye.add(this.element,"submit",this.submitHandler,this),ye.add(this.element,"reset",this.resetHandler,this)},t.prototype.unwireEvents=function(){for(var e=0,t=this.inputElements;e<t.length;e++){var i=t[e];ye.clearEvents(i)}ye.remove(this.element,"submit",this.submitHandler),ye.remove(this.element,"reset",this.resetHandler)},t.prototype.focusOutHandler=function(e){this.trigger("focusout",e);var t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))},t.prototype.keyUpHandler=function(e){this.trigger("keyup",e);var t=e.target;(9!==e.which||this.rules[t.name]&&(!this.rules[t.name]||this.rules[t.name][this.required]))&&-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)},t.prototype.clickHandler=function(e){this.trigger("click",e);var t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},t.prototype.changeHandler=function(e){this.trigger("change",e);var t=e.target;this.validate(t.name)},t.prototype.submitHandler=function(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()},t.prototype.resetHandler=function(){this.clearForm()},t.prototype.validateRules=function(e){if(this.rules[e]){var t=Object.keys(this.rules[e]),i=!1,n=!1,r=t.indexOf("validateHidden"),o=t.indexOf("hidden");if(this.getInputElement(e),-1!==o&&(i=!0),-1!==r&&(n=!0),!i||i&&n){-1!==r&&t.splice(r,1),-1!==o&&t.splice(o-1,1),this.getErrorElement(e);for(var s=0,a=t;s<a.length;s++){var l=a[s],h=this.getErrorMessage(this.rules[e][l],l),p={name:e,message:h},d={inputName:e,element:this.inputElement,message:h};if(!this.isValid(e,l)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(p),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(p):this.createErrorElement(e,p.message,this.inputElement),d.errorElement=this.infoElement,d.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,d),this.trigger("validationComplete",d),"required"===l&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),d.status="success",this.trigger("validationComplete",d)}}}},t.prototype.optionalValidationStatus=function(e,t){this.rules[e][this.required]||this.inputElement.value.length||g(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))},t.prototype.isValid=function(e,t){var n=this.rules[e][t],r=n instanceof Array&&"string"==typeof n[1]?n[0]:n,o=this.rules[e][t],s={value:this.inputElement.value,param:r,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",s),o&&"function"==typeof o[0]?o[0].call(this,{element:this.inputElement,value:this.inputElement.value}):i.isCheckable(this.inputElement)?"required"!==t||kt("input[name="+e+"]:checked",this.element).length>0:i.checkValidator[t](s)},t.prototype.getErrorMessage=function(e,t){var i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t],n=i.match(/{(\d)}/g);if(!g(n))for(var r=0;r<n.length;r++){var o=e instanceof Array?e[r]:e;i=i.replace(n[r],o)}return i},t.prototype.createErrorElement=function(e,t,i){var n=ct(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});if(this.errorOption===ec.Message&&(n.classList.remove(this.errorClass),n.classList.add("e-message"),n=ct(this.errorContainer,{className:this.errorClass,innerHTML:n.outerHTML})),n.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(n);else if(!0===i.hasAttribute("data-msg-containerid")){var r=i.getAttribute("data-msg-containerid");this.element.querySelector("#"+r).appendChild(n)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,n):this.inputElement.parentNode.insertBefore(n,this.inputElement.nextSibling);n.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)},t.prototype.getErrorElement=function(e){return this.infoElement=xt(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=xt(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement},t.prototype.removeErrorRules=function(e){for(var t=0;t<this.errorRules.length;t++){this.errorRules[t].name===e&&this.errorRules.splice(t,1)}},t.prototype.showMessage=function(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)},t.prototype.hideMessage=function(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},t.prototype.checkRequired=function(e){this.rules[e][this.required]||this.inputElement.value.length||g(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))},t.isCheckable=function(e){var t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)},t.checkValidator={required:function(e){return isNaN(Date.parse(e.value))?e.value.toString().length>0:!isNaN(new Date(e.value).getTime())},email:function(e){return _c.EMAIL.test(e.value)},url:function(e){return _c.URL.test(e.value)},dateIso:function(e){return _c.DATE_ISO.test(e.value)},tel:function(e){return _c.PHONE.test(e.value)},creditcard:function(e){return _c.CREDITCARD.test(e.value)},number:function(e){return!isNaN(Number(e.value))&&-1===e.value.indexOf(" ")},digits:function(e){return _c.DIGITS.test(e.value)},maxLength:function(e){return e.value.length<=e.param},minLength:function(e){return e.value.length>=e.param},rangeLength:function(e){var t=e.param;return e.value.length>=t[0]&&e.value.length<=t[1]},range:function(e){var t=e.param;return!isNaN(Number(e.value))&&Number(e.value)>=t[0]&&Number(e.value)<=t[1]},date:function(e){return!isNaN(new Date(e.value).getTime())},max:function(e){return isNaN(Number(e.value))?new Date(e.value).getTime()<=new Date(JSON.parse(JSON.stringify(e.param))).getTime():+e.value<=e.param},min:function(e){if(isNaN(Number(e.value))){if(-1!==e.value.indexOf(",")){var t=e.value.replace(/,/g,"");return parseFloat(t)>=e.param}return new Date(e.value).getTime()>=new Date(JSON.parse(JSON.stringify(e.param))).getTime()}return+e.value>=e.param},regex:function(e){return new RegExp(e.param).test(e.value)},equalTo:function(e){var t=e.formElement.querySelector("#"+e.param);return e.param=t.value,e.param===e.value}},Wc([zt("")],t.prototype,"locale",void 0),Wc([zt("e-hidden")],t.prototype,"ignore",void 0),Wc([zt()],t.prototype,"rules",void 0),Wc([zt("e-error")],t.prototype,"errorClass",void 0),Wc([zt("e-valid")],t.prototype,"validClass",void 0),Wc([zt("label")],t.prototype,"errorElement",void 0),Wc([zt("div")],t.prototype,"errorContainer",void 0),Wc([zt(ec.Label)],t.prototype,"errorOption",void 0),Wc([_t()],t.prototype,"focusout",void 0),Wc([_t()],t.prototype,"keyup",void 0),Wc([_t()],t.prototype,"click",void 0),Wc([_t()],t.prototype,"change",void 0),Wc([_t()],t.prototype,"submit",void 0),Wc([_t()],t.prototype,"validationBegin",void 0),Wc([_t()],t.prototype,"validationComplete",void 0),Wc([_t()],t.prototype,"customPlacement",void 0),t=i=Wc([Gt],t)}(It),Kc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yc=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Xc="e-other-month",Qc="e-overlay",Jc="e-selected",Zc="e-focused-date",$c=function(e){function t(t,i){return e.call(this,t,i)||this}return Kc(t,e),t.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&b("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!g(this.values)&&this.values.length>0){for(var t=[],i=[],n=0;n<this.values.length;n++)-1===t.indexOf(+this.values[n])&&(t.push(+this.values[n]),i.push(this.values[n]));this.setProperties({values:i},!0);for(var r=0;r<this.values.length;r++)if(!this.checkDateValue(this.values[r]))if("string"==typeof this.values[r]&&this.checkDateValue(new Date(this.checkValue(this.values[r])))){var o=new Date(this.checkValue(this.values[r]));this.values.splice(r,1),this.values.splice(r,0,o)}else this.values.splice(r,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),e.prototype.render.call(this),"calendar"===this.getModuleName()){var s=Tt(this.element,"form");s&&ye.add(s,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)},t.prototype.setTimeZone=function(e){if(!g(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),e.prototype.validateDate.call(this,this.value),!g(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!g(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!g(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||g(this.value)?e.prototype.minMaxUpdate.call(this,this.value):!g(this.value)&&this.value<this.min&&this.min<=this.max?e.prototype.minMaxUpdate.call(this,this.min):!g(this.value)&&this.value>this.max&&this.min<=this.max&&e.prototype.minMaxUpdate.call(this,this.max)},t.prototype.generateTodayVal=function(e){var t=new Date;return e?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},t.prototype.todayButtonClick=function(t){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=t,this.isMultiSelection){var n=this.copyValues(this.values);e.prototype.checkPresentDate.call(this,i,this.values)||(n.push(i),this.setProperties({values:n}))}e.prototype.todayButtonClick.call(this,t,new Date(+this.value))}},t.prototype.keyActionHandle=function(t){e.prototype.keyActionHandle.call(this,t,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var t=this;this.changeHandler=function(e){t.triggerChange(e)},this.checkView(),e.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,e.prototype.createContent.call(this)},t.prototype.minMaxDate=function(t){return e.prototype.minMaxDate.call(this,t)},t.prototype.renderMonths=function(t){e.prototype.renderMonths.call(this,t,this.value)},t.prototype.renderDays=function(t,i){var n=e.prototype.renderDays.call(this,t,i,this.value,this.isMultiSelection,this.values);return this.isMultiSelection&&e.prototype.validateValues.call(this,this.isMultiSelection,this.values),n},t.prototype.renderYears=function(t){"Gregorian"===this.calendarMode?e.prototype.renderYears.call(this,t,this.value):this.islamicModule.islamicRenderYears(t,this.value)},t.prototype.renderDecades=function(t){"Gregorian"===this.calendarMode?e.prototype.renderDecades.call(this,t,this.value):this.islamicModule.islamicRenderDecade(t,this.value)},t.prototype.renderTemplate=function(t,i,n,r){"Gregorian"===this.calendarMode?e.prototype.renderTemplate.call(this,t,i,n,r,this.value):this.islamicModule.islamicRenderTemplate(t,i,n,r,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},t.prototype.clickHandler=function(t){var i=t.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(Xc))if(this.isMultiSelection){var n=this.copyValues(this.values);n.push(this.getIdValue(t,null)),this.setProperties({values:n},!0),this.setProperties({value:this.values[this.values.length-1]},!0)}else this.setProperties({value:this.getIdValue(t,null)},!0);var r=this.currentView();e.prototype.clickHandler.call(this,t,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!g(this.tableBodyElement.querySelectorAll("."+Zc)[0])&&"Year"===r&&this.tableBodyElement.querySelectorAll("."+Zc)[0].classList.remove(Zc)},t.prototype.switchView=function(t,i){e.prototype.switchView.call(this,t,i,this.isMultiSelection)},t.prototype.getModuleName=function(){return e.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){e.prototype.getPersistData.call(this);return this.addOnPersist(["value","values"])},t.prototype.onPropertyChanged=function(t,i){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"value":this.isDateSelected&&("string"==typeof t.value?this.setProperties({value:new Date(this.checkValue(t.value))},!0):t.value=new Date(this.checkValue(t.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof t.values||"number"==typeof t.values)this.setProperties({values:null},!0);else{for(var o=this.copyValues(this.values),s=0;s<o.length;s++){var a=o[s];this.checkDateValue(a)&&!e.prototype.checkPresentDate.call(this,a,o)&&o.push(a)}this.setProperties({values:o},!0),this.values.length>0&&this.setProperties({value:t.values[t.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:t.isMultiSelection},!0),this.update());break;default:e.prototype.onPropertyChanged.call(this,t,i,this.isMultiSelection,this.values)}}},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),"calendar"===this.getModuleName()){var t=Tt(this.element,"form");t&&ye.remove(t,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(t,i){this.minMaxUpdate(),e.prototype.navigateTo.call(this,t,i)},t.prototype.currentView=function(){return e.prototype.currentView.call(this)},t.prototype.addDate=function(t){if("string"!=typeof t&&"number"!=typeof t){var i=this.copyValues(this.values);if("object"==typeof t&&t.length>0)for(var n=t,r=0;r<n.length;r++)this.checkDateValue(n[r])&&!e.prototype.checkPresentDate.call(this,n[r],i)&&(!g(i)&&i.length>0?i.push(n[r]):i=[new Date(+n[r])]);else this.checkDateValue(t)&&!e.prototype.checkPresentDate.call(this,t,i)&&(!g(i)&&i.length>0?i.push(t):i=[new Date(+t)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if("string"!=typeof e&&"number"!=typeof e&&!g(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var i=e,n=0;n<i.length;n++)for(var r=0;r<t.length;r++)+t[r]==+i[n]&&t.splice(r,1);else for(r=0;r<t.length;r++)+t[r]==+e&&t.splice(r,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),e.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(t,i,n){e.prototype.selectDate.call(this,t,i,n,this.isMultiSelection,this.values),this.isMultiSelection&&!g(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(t)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!g(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!g(e),g(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||+this.value==+this.previousDate&&(null!=this.previousDate||isNaN(+this.value))?g(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)},Yc([zt(null)],t.prototype,"value",void 0),Yc([zt(null)],t.prototype,"values",void 0),Yc([zt(!1)],t.prototype,"isMultiSelection",void 0),Yc([_t()],t.prototype,"change",void 0),t=Yc([Gt],t)}(function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.effect="",n.isPopupClicked=!1,n.isDateSelected=!0,n.isTodayClicked=!1,n}return Kc(t,e),t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new ee(this.locale),(g(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add("e-calendar"),this.enableRtl&&this.element.classList.add("e-rtl"),me.isDevice&&this.element.classList.add("e-device"),St(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add("e-calendar"),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),me.isDevice&&this.calendarElement.classList.add("e-device"),St(this.calendarElement,{role:"calendar"})),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,t){g(e)&&this.setProperties({min:new Date(1900,0,1)},!0),g(t)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!g(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!g(t)&&!g(i)&&!g(e)){var r=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(r-1).toString(),e.style.zIndex=r.toString()}},t.prototype.minMaxUpdate=function(e){+this.min<=+this.max?gt([this.element],Qc):(this.setProperties({min:this.min},!0),ut([this.element],Qc)),this.min=g(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=g(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),Jt(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),St(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),Jt(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),St(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),St(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":""}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},t.prototype.getCultureValues=function(){var e,t=[],i=(S()?"days.":"days.stand-alone.")+this.dayHeaderFormat.toLowerCase();e="en"===this.locale||"en-US"===this.locale?a(i,ie()):this.getCultureObjects(X,""+this.locale);for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];t.push(a(o,e))}return t},t.prototype.toCapitalize=function(e){return!g(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?g(this.element.querySelectorAll(".e-content .e-week-header")[0])||wt(this.element.querySelectorAll(".e-content .e-week-header")[0]):g(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||wt(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e,t="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(t+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?ut([this.element],"e-week-number"):ut([this.calendarElement],"e-week-number")),e=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek);for(var i=0;i<=6;i++)t+='<th  class="">'+this.toCapitalize(e[i])+"</th>";t="<tr>"+t+"</tr>",this.tableHeadElement.innerHTML=t,this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?g(this.element.querySelectorAll(".e-content tbody")[0])||wt(this.element.querySelectorAll(".e-content tbody")[0]):g(this.calendarElement.querySelectorAll(".e-content tbody")[0])||wt(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max);this.globalize=new ee(this.locale),this.l10=new ki(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Jt(this.todayElement),this.updateFooter(),ut([this.todayElement],["e-btn","e-today","e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||ut([this.todayElement],"e-disabled"),this.footer=this.createElement("div",{className:"e-footer-container"}),
 	this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains("e-disabled")||ye.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,t,i,n){S()&&t?(this.element=document.getElementById(e),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=u(this.defaultKeyConfigs,i),this.blazorRef=t,this.serverModuleName=n):(ye.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=u(this.defaultKeyConfigs,this.keyConfigs)),"calendar"===this.getModuleName()?this.keyboardModule=new xi(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new xi(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,t,i,n){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=u(this.defaultKeyConfigs,i),this.blazorRef=t,this.serverModuleName=n},t.prototype.todayButtonClick=function(e,t){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t))):this.navigateTo("Month",new Date(this.checkValue(t))))},t.prototype.checkDeviceMode=function(e){me.isDevice&&S()&&e&&e.invokeMethodAsync("OnDevice",!0)},t.prototype.keyActionHandle=function(e,t,i){S()&&this.blazorRef&&(e.preventDefault(),this.tableBodyElement||(this.element=Tt(e.target,".e-calendar"),this.tableBodyElement=this.element.querySelector("tbody")),i=!1);var n,r=this.tableBodyElement.querySelector("tr td.e-focused-date");if(n=i?g(r)||+t!==parseInt(r.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):r:this.tableBodyElement.querySelector("tr td.e-selected"),S()&&this.blazorRef){this.tableBodyElement.focus();var o=e.target,s={Action:e.action,Key:e.key,Events:e,SelectDate:n?n.id:null,FocusedDate:r?r.id:null,classList:n?n.classList.toString():r?r.classList.toString():"e-cell",Id:r?r.id:n?n.id:null,TargetClassList:o.classList.toString()};this.blazorRef.invokeMethodAsync("OnCalendarKeyboardEvent",s),o.classList.contains("e-today")&&(o.blur(),this.tableBodyElement.focus()),"sf.calendars.Calendar"===this.serverModuleName&&(this.tableBodyElement=null)}else{var a=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=a===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.KeyboardNavigate(-1,a,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.KeyboardNavigate(1,a,e,this.max,this.min),e.preventDefault();break;case"moveUp":0===a?this.KeyboardNavigate(-7,a,e,this.max,this.min):this.KeyboardNavigate(-4,a,e,this.max,this.min),e.preventDefault();break;case"moveDown":0===a?this.KeyboardNavigate(7,a,e,this.max,this.min):this.KeyboardNavigate(4,a,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,t);else{var p=g(r)?n:r;if(!g(p)&&!p.classList.contains("e-disabled"))if(h){var d=new Date(parseInt(""+p.id,0));this.selectDate(e,d,p)}else this.contentClick(null,--a,p,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":g(r)&&(g(n)||h)||this.contentClick(null,--a,r||n,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),wt(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,a),wt(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()}},t.prototype.KeyboardNavigate=function(e,t,i,n,r){var o=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(wt(this.tableBodyElement),this.renderDecades(i)):this.currentDate=o;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode,this.isMonthYearRange(this.currentDate)?(wt(this.tableBodyElement),this.renderYears(i)):this.currentDate=o;break;case 0:this.addDay(this.currentDate,e,i,n,r),this.isMinMaxRange(this.currentDate)?(wt(this.tableBodyElement),this.renderMonths(i)):this.currentDate=o}},t.prototype.preRender=function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(e){t.triggerNavigate(e)}},t.prototype.minMaxDate=function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),n=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!=+i&&+t!=+n||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,t){var i,n=this.weekNumber?8:7;i="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,e,t):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(i,n,"e-month",e,t):this.islamicModule.islamicRenderTemplate(i,n,"e-month",e,t)},t.prototype.renderDays=function(e,t,i,n,r){var o,s=[],a=new Date(this.checkValue(e)),l=(this.weekNumber,a.getMonth());this.titleUpdate(e,"days");var h=a;for(a=new Date(h.getFullYear(),h.getMonth(),0,h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds());a.getDay()!==this.firstDayOfWeek;)this.setStartDate(a,-864e5);for(var p=0;p<42;++p){var d=this.createElement("td",{className:"e-cell"}),c=this.createElement("span");p%7==0&&this.weekNumber&&(c.textContent=""+this.getWeek(a),d.appendChild(c),ut([d],"e-week-number"),s.push(d)),o=new Date(+a),a=this.minMaxDate(a);var u={type:"dateTime",skeleton:S()?"D":"full"},f=this.globalize.parseDate(this.globalize.formatDate(a,u),u),m=this.dayCell(a),y=this.globalize.formatDate(a,{type:"date",skeleton:S()?"D":"full"}),v=this.createElement("span");v.textContent=this.globalize.formatDate(a,{format:"d",type:"date",skeleton:S()?"d":"yMd"});var b=this.min>a||this.max<a;b?(ut([m],"e-disabled"),ut([m],Qc)):v.setAttribute("title",""+y),l!==a.getMonth()&&ut([m],Xc),0!==a.getDay()&&6!==a.getDay()||ut([m],"e-weekend"),m.appendChild(v),this.renderDayCellArgs={date:a,isDisabled:!1,element:m,isOutOfRange:b};var w=this.renderDayCellArgs;if(this.renderDayCellEvent(w),w.isDisabled){var C=new Date(this.checkValue(i)),x=new Date(this.checkValue(w.date));if(n){if(!g(r)&&r.length>0)for(var k=0;k<r.length;k++){+new Date(this.globalize.formatDate(w.date,{type:"date",skeleton:S()?"d":"yMd"}))===+new Date(this.globalize.formatDate(r[k],{type:"date",skeleton:S()?"d":"yMd"}))&&(r.splice(k,1),k=-1)}}else C&&+C==+x&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!m.classList.contains(Jc)&&(ut([m],"e-disabled"),ut([m],Qc),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var T=m.classList.contains(Xc),D=m.classList.contains("e-disabled");if(D||ye.add(m,"click",this.clickHandler,this),!n||g(r)||D)!D&&this.getDateVal(a,i)?ut([m],Jc):this.updateFocus(T,D,a,m,e);else{for(var E=0;E<r.length;E++){var R="Gregorian"===this.calendarMode?"gregorian":"islamic",P={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:R};this.globalize.formatDate(a,P)===this.globalize.formatDate(r[E],P)&&this.getDateVal(a,r[E])||this.getDateVal(a,i)?ut([m],Jc):this.updateFocus(T,D,a,m,e)}r.length<=0&&this.updateFocus(T,D,a,m,e)}f.getMonth()===(new Date).getMonth()&&f.getDate()===(new Date).getDate()&&f.getFullYear()===(new Date).getFullYear()&&ut([m],"e-today"),s.push(this.renderDayCellArgs.element),a=new Date(+o),this.addDay(a,1,null,this.max,this.min)}return s},t.prototype.updateFocus=function(e,t,i,n,r){r.getDate()!==i.getDate()||e||t?(r>=this.max&&parseInt(n.id,0)===+this.max&&!e&&!t&&ut([n],Zc),r<=this.min&&parseInt(n.id,0)===+this.min&&!e&&!t&&ut([n],Zc)):ut([n],Zc)},t.prototype.renderYears=function(e,t){this.removeTableHeadElement();var i=[],n=g(t),r=new Date(this.checkValue(this.currentDate)),o=r.getMonth(),s=r.getFullYear(),a=r,l=a.getFullYear(),h=new Date(this.checkValue(this.min)).getFullYear(),p=new Date(this.checkValue(this.min)).getMonth(),d=new Date(this.checkValue(this.max)).getFullYear(),c=new Date(this.checkValue(this.max)).getMonth();a.setMonth(0),this.titleUpdate(this.currentDate,"months");this.min>a||this.max;a.setDate(1);for(var u=0;u<12;++u){var f=this.dayCell(a),m=this.createElement("span"),y=t&&t.getMonth()===a.getMonth(),v=t&&t.getFullYear()===s&&y;m.textContent=this.toCapitalize(this.globalize.formatDate(a,{format:S()?"MMM":null,type:"dateTime",skeleton:"MMM"})),this.min&&(l<h||u<p&&l===h)||this.max&&(l>d||u>c&&l>=d)?ut([f],"e-disabled"):!n&&v?ut([f],Jc):a.getMonth()===o&&this.currentDate.getMonth()===o&&ut([f],Zc),a.setDate(1),a.setMonth(a.getMonth()+1),f.classList.contains("e-disabled")||ye.add(f,"click",this.clickHandler,this),f.appendChild(m),i.push(f)}this.renderTemplate(i,4,"e-year",e,t)},t.prototype.renderDecades=function(e,t){this.removeTableHeadElement();var i=[],n=new Date(this.checkValue(this.currentDate));n.setMonth(0),n.setDate(1);var r=n.getFullYear(),o=new Date(n.setFullYear(r-r%10)),s=new Date(n.setFullYear(r-r%10+9)),a=o.getFullYear(),l=s.getFullYear(),h=this.globalize.formatDate(o,{format:S()?"yyyy":null,type:"dateTime",skeleton:"y"}),p=this.globalize.formatDate(s,{format:S()?"yyyy":null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=h+" - "+p;for(var d=new Date(r-r%10-1,0,1).getFullYear(),c=0;c<12;++c){var u=d+c;n.setFullYear(u);var f=this.dayCell(n);St(f,{role:"gridcell"});var m=this.createElement("span");m.textContent=this.globalize.formatDate(n,{format:S()?"yyyy":null,type:"dateTime",skeleton:"y"}),u<a||u>l?(ut([f],"e-other-year"),g(t)||n.getFullYear()!==t.getFullYear()||ut([f],Jc),(u<new Date(this.checkValue(this.min)).getFullYear()||u>new Date(this.checkValue(this.max)).getFullYear())&&ut([f],"e-disabled")):u<new Date(this.checkValue(this.min)).getFullYear()||u>new Date(this.checkValue(this.max)).getFullYear()?ut([f],"e-disabled"):g(t)||n.getFullYear()!==t.getFullYear()?n.getFullYear()!==this.currentDate.getFullYear()||f.classList.contains("e-disabled")||ut([f],Zc):ut([f],Jc),f.classList.contains("e-disabled")||ye.add(f,"click",this.clickHandler,this),f.appendChild(m),i.push(f)}this.renderTemplate(i,4,"e-decade",e,t)},t.prototype.dayCell=function(e){var t="Gregorian"===this.calendarMode?"gregorian":"islamic",i={skeleton:S()?"F":"full",type:"dateTime",calendar:t},n={className:"e-cell",attrs:{id:""+m(""+this.globalize.parseDate(this.globalize.formatDate(e,i),i).valueOf()),"aria-selected":"false",role:"gridcell"}};return this.createElement("td",n)},t.prototype.firstDay=function(e){var t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Xc):this.tableBodyElement.querySelectorAll("td:not(.e-other-year");if(t.length)for(var i=0;i<t.length;i++)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e},t.prototype.lastDay=function(e,t){var i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){var n=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return n&&i.setHours(this.firstDay(e).getHours()+n/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))},t.prototype.checkDateValue=function(e){return!g(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(.e-other-year"):this.tableBodyElement.querySelectorAll("td:not(."+Xc);if(t.length)for(var i=t.length-1;i>=0;i--)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e},t.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?g(this.element.querySelectorAll(".e-content table thead")[0])||wt(this.tableHeadElement):g(this.calendarElement.querySelectorAll(".e-content table thead")[0])||wt(this.tableHeadElement)},t.prototype.renderTemplate=function(e,t,i,n,r){var o,s=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),gt([this.contentElement,this.headerElement],["e-month","e-decade","e-year"]),ut([this.contentElement,this.headerElement],[i]);for(var a=t,l=0,h=0;h<e.length/t;++h){for(o=this.createElement("tr",{attrs:{role:"row"}}),l=0+l;l<a;l++)e[l].classList.contains("e-week-number")||g(e[l].children[0])||(ut([e[l].children[0]],["e-day"]),Jt(e[l].children[0],{duration:600,isCenterRipple:!0})),o.appendChild(e[l]),this.weekNumber&&7===l&&e[7].classList.contains(Xc)&&ut([o],"e-month-hide"),!this.weekNumber&&6===l&&e[6].classList.contains(Xc)&&ut([o],"e-month-hide"),this.weekNumber?41===l&&e[41].classList.contains(Xc)&&ut([o],"e-month-hide"):35===l&&e[35].classList.contains(Xc)&&ut([o],"e-month-hide");a+=t,l+=0,this.tableBodyElement.appendChild(o)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(s!==this.getViewNumber(this.currentView())||0===s&&s!==this.getViewNumber(this.currentView()))&&this.navigateHandler(n),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,t){this.clickEventEmitter(e);var i=e.currentTarget,n=this.getViewNumber(this.currentView());i.classList.contains(Xc)?this.contentClick(e,0,null,t):n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===n?this.contentClick(e,1,null,t):i.classList.contains(Xc)||0!==n?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,t,i,n){var r=this.getViewNumber(this.currentView()),o=this.getIdValue(e,i);switch(t){case 0:r===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(wt(this.tableBodyElement),this.currentDate=o,this.effect="e-zoomin",this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(o.getMonth()),o.getMonth()>0&&this.currentDate.getMonth()!==o.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(o.getFullYear())):this.currentDate=o,this.effect="e-zoomin",wt(this.tableBodyElement),this.renderMonths(e));break;case 1:if(r===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,o,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(o.getFullYear());else{var s=this.islamicModule.getIslamicDate(o);this.currentDate=this.islamicModule.toGregorian(s.year,s.month,1)}this.effect="e-zoomin",wt(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,t,i){switch(e){case 0:wt(this.tableBodyElement),this.renderMonths(t),i&&!g(this.tableBodyElement.querySelectorAll("."+Zc)[0])&&this.tableBodyElement.querySelectorAll("."+Zc)[0].classList.remove(Zc);break;case 1:wt(this.tableBodyElement),this.renderYears(t);break;case 2:wt(this.tableBodyElement),this.renderDecades(t)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,t,i,n){this.effect="";for(var r=0,o=Object.keys(e);r<o.length;r++){var s=o[r];switch(s){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),"min"===s?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),wt(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,n),this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(wt(this.todayElement),wt(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(gt([this.todayElement],"e-disabled"),wt(this.todayElement),wt(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":this.checkView(),this.createContentHeader(),this.createContentBody();break;case"locale":this.globalize=new ee(this.locale),this.createContentHeader(),this.createContentBody(),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():g(this.todayElement)||g(this.footer)||(wt(this.todayElement),wt(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}},t.prototype.validateValues=function(e,t){if(e&&!g(t)&&t.length>0){for(var i=this.copyValues(t),n=0;n<i.length;n++){var r=i[n],o="Gregorian"===this.calendarMode?"gregorian":"islamic",s=void 0;s="Gregorian"===this.calendarMode?this.globalize.formatDate(r,{type:"date",skeleton:S()?"d":"yMd"}):this.globalize.formatDate(r,{type:"dateTime",skeleton:"full",calendar:"islamic"});var a={type:"date",skeleton:S()?"d":"yMd",calendar:o},l=this.globalize.formatDate(this.min,a),h={type:"date",skeleton:S()?"d":"yMd",calendar:o},p=this.globalize.formatDate(this.max,h);(+new Date(s)<+new Date(l)||+new Date(s)>+new Date(p))&&(i.splice(n,1),n=-1)}this.setProperties({values:i},!0)}},t.prototype.setValueUpdate=function(){g(this.tableBodyElement)||(wt(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var t=[];if(!g(e)&&e.length>0)for(var i=0;i<e.length;i++)t.push(new Date(+e[i]));return t},t.prototype.titleUpdate=function(e,t){var i,n,r=new ee(this.locale),o="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(i=r.formatDate(e,{type:"dateTime",skeleton:S()?"y":"yMMMM",calendar:o}),n=r.formatDate(e,{format:S()?"yyyy":null,type:"dateTime",skeleton:"y",calendar:o})):(i=r.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:o}),n=r.formatDate(e,{type:"dateTime",format:"y",calendar:o})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(i);break;case"months":this.headerTitleElement.textContent=n}},t.prototype.setActiveDescendant=function(){var e,t,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),r="Gregorian"===this.calendarMode?"gregorian":"islamic",o=this.currentView();return t="Month"===o?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:S()?"D":"full",calendar:r}):"Year"===o?"islamic"!==r?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:S()?"y":"yMMMM",calendar:r}):this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:r}):this.globalize.formatDate(this.currentDate,{format:S()?"yyyy":null,type:"date",skeleton:"y",calendar:r}),(n||i)&&(g(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",t),e=(i||n).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){("calendar"===this.getModuleName()||this.calendarElement)&&gt([this.element],["e-calendar"]),"calendar"===this.getModuleName()&&(ye.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&ye.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),g(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element.innerHTML="",e.prototype.destroy.call(this)},t.prototype.title=function(e){var t=this.getViewNumber(this.currentView());this.effect="e-zoomin",this.switchView(++t,e)},t.prototype.getViewNumber=function(e){return"Month"===e?0:"Year"===e?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}},t.prototype.navigatePrevious=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}},t.prototype.navigateNext=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.navigateTo=function(e,t){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e))},t.prototype.currentView=function(){return this.contentElement.classList.contains("e-year")?"Year":this.contentElement.classList.contains("e-decade")?"Decade":"Month"},t.prototype.getDateVal=function(e,t){return!g(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},t.prototype.getCultureObjects=function(e,t){var i=(S()?".dates.days.":".dates.calendars.gregorian.days.format.")+this.dayHeaderFormat.toLowerCase(),n=(S()?".dates.days.":".dates.calendars.islamic.days.format.")+this.dayHeaderFormat.toLowerCase(),r=S()?"":"main.";return"Gregorian"===this.calendarMode?a(r+""+this.locale+i,e):a("main."+this.locale+n,e)},t.prototype.getWeek=function(e){var t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf(),n=t-i;return Math.ceil((n/864e5+new Date(i).getDay()+1)/7)},t.prototype.setStartDate=function(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),r=n.getTimezoneOffset()-i;e.setTime(n.getTime()+6e4*r)},t.prototype.addMonths=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year,n.month+t,1)}},t.prototype.addYears=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year+t,n.month,1)}},t.prototype.getIdValue=function(e,t){var i;i=e?e.currentTarget:t;var n="Gregorian"===this.calendarMode?"gregorian":"islamic",r={type:"dateTime",skeleton:S()?"F":"full",calendar:n},o=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),r),s=this.globalize.parseDate(o,r),a=s.valueOf()-s.valueOf()%1e3;return new Date(a)},t.prototype.adjustLongHeaderSize=function(){gt([this.element],"e-calendar-day-header-lg"),"Wide"===this.dayHeaderFormat&&ut(["calendar"===this.getModuleName()?this.element:this.calendarElement],"e-calendar-day-header-lg")},t.prototype.selectDate=function(e,t,i,n,r){var o=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(n&&!this.checkPresentDate(t,r)){var s=this.copyValues(r);!g(r)&&s.length>0?(s.push(new Date(this.checkValue(t))),this.setProperties({values:s},!0),this.setProperties({value:r[r.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var a=Tt(o,".e-calendar");if(g(a)&&(a=this.tableBodyElement),n||g(a.querySelector("."+Jc))||gt([a.querySelector("."+Jc)],Jc),n||g(a.querySelector("."+Zc))||gt([a.querySelector("."+Zc)],Zc),n){s=this.copyValues(r);for(var l=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),h=0;h<l.length;h++){var p=a.querySelectorAll("td."+Zc)[0],d=a.querySelectorAll("td."+Jc)[0];l[h]===p&&gt([l[h]],Zc),l[h]!==d||this.checkPresentDate(new Date(parseInt(d.getAttribute("id").split("_")[0],10)),r)||gt([l[h]],Jc)}if(o.classList.contains(Jc)){gt([o],Jc);for(var c=0;c<s.length;c++){var u="Gregorian"===this.calendarMode?"gregorian":"islamic",f={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:u};if(this.globalize.formatDate(t,f)===this.globalize.formatDate(s[c],f)){h=s.indexOf(s[c]);s.splice(h,1),ut([o],Zc)}}this.setProperties({values:s},!0)}else ut([o],Jc)}else ut([o],Jc);this.isDateSelected=!0},t.prototype.getFromatStringValue=function(){return S()?"M"+ie().dateSeperator+"d"+ie().dateSeperator+"yy":null},t.prototype.checkPresentDate=function(e,t){var i=!1;if(!g(t))for(var n=0;n<t.length;n++){var r="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:r})===this.globalize.formatDate(t[n],{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:r})&&(i=!0)}return i},t.prototype.setAriaActiveDescendant=function(){St(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?(ye.remove(this.previousIcon,"click",this.navigatePreviousHandler),ut([this.previousIcon],"e-disabled"),ut([this.previousIcon],""+Qc),this.previousIcon.setAttribute("aria-disabled","true")):(ye.add(this.previousIcon,"click",this.navigatePreviousHandler),gt([this.previousIcon],"e-disabled"),gt([this.previousIcon],""+Qc),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){u(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){u(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?(ye.remove(this.nextIcon,"click",this.navigateNextHandler),ut([this.nextIcon],"e-disabled"),ut([this.nextIcon],Qc),this.nextIcon.setAttribute("aria-disabled","true")):(ye.add(this.nextIcon,"click",this.navigateNextHandler),gt([this.nextIcon],"e-disabled"),gt([this.nextIcon],Qc),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,t,i){var n,r,o=t.getFullYear();return n=o,r=0,i&&(n=(o-=o%i)-o%i+i-1),e.getFullYear()>n?r=1:e.getFullYear()<o&&(r=-1),r},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},t.prototype.compareYear=function(e,t){return this.compare(e,t,0)},t.prototype.compareDecade=function(e,t){return this.compare(e,t,10)},t.prototype.shiftArray=function(e,t){return e.slice(t).concat(e.slice(0,t))},t.prototype.addDay=function(e,t,i,n,r){var o=t,s=new Date(+e);if(!g(this.tableBodyElement)&&!g(i)){for(;this.findNextTD(new Date(+e),o,n,r);)o+=t;var a=new Date(s.setDate(s.getDate()+o));o=+a>+n||+a<+r?o===t?t-t:t:o}e.setDate(e.getDate()+o)},t.prototype.findNextTD=function(e,t,i,n){var r=new Date(e.setDate(e.getDate()+t)),o=[],s=!1;if((!g(r)&&r.getMonth())===(!g(this.currentDate)&&this.currentDate.getMonth())){o=("Gregorian"===this.calendarMode?this.renderDays(r,null):this.islamicModule.islamicRenderDays(this.currentDate,r)).filter((function(e){return e.classList.contains("e-disabled")}))}else o=this.tableBodyElement.querySelectorAll("td.e-disabled");if(+r<=+i&&+r>=+n&&o.length)for(var a=0;a<o.length&&!(s=+r==+new Date(parseInt(o[a].id,0)));a++);return s},t.prototype.getMaxDays=function(e){var t,i,n=new Date(this.checkValue(e));for(t=28,i=n.getMonth();n.getMonth()===i;)++t,n.setDate(t);return t-1},t.prototype.setDateDecade=function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,t){return e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},Yc([zt(new Date(1900,0,1))],t.prototype,"min",void 0),Yc([zt(new Date(2099,11,31))],t.prototype,"max",void 0),Yc([zt(null)],t.prototype,"firstDayOfWeek",void 0),Yc([zt("Gregorian")],t.prototype,"calendarMode",void 0),Yc([zt("Month")],t.prototype,"start",void 0),Yc([zt("Month")],t.prototype,"depth",void 0),Yc([zt(!1)],t.prototype,"weekNumber",void 0),Yc([zt(!0)],t.prototype,"showTodayButton",void 0),Yc([zt("Short")],t.prototype,"dayHeaderFormat",void 0),Yc([zt(!1)],t.prototype,"enablePersistence",void 0),Yc([zt(null)],t.prototype,"keyConfigs",void 0),Yc([zt(null)],t.prototype,"serverTimezoneOffset",void 0),Yc([_t()],t.prototype,"created",void 0),Yc([_t()],t.prototype,"destroyed",void 0),Yc([_t()],t.prototype,"navigated",void 0),Yc([_t()],t.prototype,"renderDayCell",void 0),t=Yc([Gt],t)}(pi)),eu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tu=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},iu=["title","class","style"],nu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.previousElementValue="",n.isDateIconClicked=!1,n.isAltKeyPressed=!1,n.isInteracted=!0,n.isBlazorServer=!1,n.invalidValueString=null,n.checkPreviousValue=null,n.datepickerOptions=t,n}return eu(t,e),t.prototype.render=function(){this.initialize(),this.bindEvents(),this.renderComplete(),this.isBlazorServer||this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!g(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3),this.updateInput()}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):St(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&gt([this.inputWrapper.container],["e-non-edit"]):""===this.inputElement.value?gt([this.inputWrapper.container],["e-non-edit"]):ut([this.inputWrapper.container],["e-non-edit"])},t.prototype.initialize=function(){if(this.isBlazorServer){var e=this.element.parentElement;this.inputWrapper={container:e,clearButton:e.querySelector(".e-clear-icon"),buttons:[e.querySelector(".e-date-icon")]},No.bindInitialEvent({element:this.inputElement,floatLabelType:this.floatLabelType}),this.showClearButton&&this.inputWrapper.clearButton&&No.wireClearBtnEvents(this.inputElement,this.inputWrapper.clearButton,this.inputWrapper.container),this.setAllowEdit()}else this.checkInvalidValue(this.value),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput();this.previousElementValue=this.inputElement.value,this.previousDate=g(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){var e={"aria-live":"assertive","aria-atomic":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if("datepicker"===this.getModuleName()){var t={placeholder:this.placeholder};this.globalize=new ee(this.locale),this.l10n=new ki("datepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}var i=this.cssClass;g(this.cssClass)||""===this.cssClass||(i=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=No.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:i,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),""!==this.inputElement.name?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),St(this.inputElement,e),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),No.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),ut([this.inputWrapper.container],"e-date-wrapper")},t.prototype.updateInput=function(){var t;if(this.value&&!this.isCalendar()&&(this.isBlazorServer||this.disabledDates()),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(e.prototype.validateDate.call(this),this.minMaxUpdates(),e.prototype.minMaxUpdate.call(this)),!g(this.value)){var i=this.value,n=void 0,r=g(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?n="Gregorian"===this.calendarMode?this.globalize.formatDate(this.value,{format:r,type:"dateTime",skeleton:S()?"d":"yMd"}):this.globalize.formatDate(this.value,{format:r,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(t="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.formatDate(this.value,t)),+i<=+this.max&&+i>=+this.min)this.updateInputValue(n);else{var o=+i>=+this.max||!+this.value||!+this.value||+i<=+this.min;!this.strictMode&&o&&this.updateInputValue(n)}}g(this.value)&&this.strictMode&&this.updateInputValue(""),!this.strictMode&&g(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!g(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!g(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},
 	t.prototype.checkStringValue=function(e){var t=null,i=null,n=null;if("datetimepicker"===this.getModuleName()){var r=new ee(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:S()?"d":"yMd"},n={format:r.getDatePattern({skeleton:S()?"d":"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},
 	n={format:r.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return g(t=this.checkDateValue(this.globalize.parseDate(e,i)))&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,n))),t},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date||g(e))){var t=null,i=e;"number"==typeof e&&(i=e.toString());if("datetimepicker"===this.getModuleName()){var n=new ee(this.locale);"Gregorian"===this.calendarMode?({format:this.dateTimeFormat,type:"dateTime",skeleton:S()?"d":"yMd"},{format:n.getDatePattern({skeleton:S()?"d":"yMd"}),type:"dateTime"}):({format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},{format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};var r=!1;if("string"!=typeof i)i=null,r=!0;else if("string"==typeof i&&(i=i.trim()),!(t=this.checkStringValue(i))){var o=null;o=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!o.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?r=!0:t=new Date(i)}r?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}},t.prototype.bindInputEvent=function(){g(this.formatString)||(-1===this.formatString.indexOf("y")?ye.add(this.inputElement,"input",this.inputHandler,this):ye.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){this.enabled?(ye.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler,this),ye.add(this.inputElement,"focus",this.inputFocusHandler,this),ye.add(this.inputElement,"blur",this.inputBlurHandler,this),this.bindInputEvent(),ye.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&ye.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&ye.add(this.formElement,"reset",this.resetFormHandler,this)):(ye.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler),ye.remove(this.inputElement,"focus",this.inputFocusHandler),ye.remove(this.inputElement,"blur",this.inputBlurHandler),ye.remove(this.inputElement,"change",this.inputChangeHandler),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&ye.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&ye.remove(this.formElement,"reset",this.resetFormHandler)),this.defaultKeyConfigs=u(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new xi(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.resetFormHandler=function(){if(!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.isBlazorServer||(this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass()))}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=g(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"})},t.prototype.inputChangeHandler=function(e){e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&ye.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),this.clear(e)},t.prototype.clear=function(e){this.isBlazorServer||this.setProperties({value:null},!0),this.updateInputValue("");var t={event:e};this.trigger("cleared",t),this.invalidValueString="",this.isBlazorServer||(this.updateInput(),this.popupUpdate(),this.changeEvent(e)),this.isBlazorServer&&this.interopAdaptor.invokeMethodAsync("OnValueCleared")},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){No.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){me.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),this.isBlazorServer||e.preventDefault(),this.readonly||(this.isCalendar()&&!this.isBlazorServer?this.hide(e):(!this.isBlazorServer||this.isBlazorServer&&this.inputWrapper.container.nextElementSibling)&&(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),ut([this.inputWrapper.container],["e-input-focus"]),ut(this.inputWrapper.buttons,"e-active")))},t.prototype.updateHtmlAttributeToWrapper=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(!g(this.htmlAttributes[i])&&iu.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&ut([this.inputWrapper.container],n.split(" "))}else if("style"===i){var r=this.inputWrapper.container.getAttribute(i);g(r)?r=this.htmlAttributes[i]:";"===r.charAt(r.length-1)?r+=this.htmlAttributes[i]:r=r+";"+this.htmlAttributes[i],this.inputWrapper.container.setAttribute(i,r)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateHtmlAttributeToElement=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];iu.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){g(t)||(t=t.replace(/\s+/g," ").trim()),g(e)||(e=e.replace(/\s+/g," ").trim()),No.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&No.setCssClass(e,[this.popupWrapper],t)},
 	t.prototype.CalendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value==+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}},t.prototype.inputFocusHandler=function(){var e={model:S()&&this.isServerRendered?null:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&this.show()},t.prototype.inputHandler=function(e){this.isPopupClicked=!1},t.prototype.inputBlurHandler=function(e){if(this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),""===this.inputElement.value&&g(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()){var t={model:S()&&this.isServerRendered?null:this};this.trigger("blur",t)}this.isCalendar()&&(this.defaultKeyConfigs=u(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new xi(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.CalendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1},t.prototype.documentHandler=function(t){!g(this.popupObj)&&(this.inputWrapper.container.contains(t.target)||this.popupObj.element&&this.popupObj.element.contains(t.target))&&"touchstart"!==t.type&&t.preventDefault();var i=t.target;Tt(i,".e-datepicker.e-popup-wrapper")||Tt(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?Tt(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!g(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&Tt(i,".e-content")&&Tt(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())||Tt(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+e.prototype.generateTodayVal.call(this,this.value)&&!this.isBlazorServer)&&this.hide(t):(this.hide(t),this.focusOut())},t.prototype.inputKeyActionHandle=function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e)),"datepicker"===this.getModuleName()&&(this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnPopupHide",!0):this.show(null,e));break;case"escape":this.hide(e);break;case"enter":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(t){this.previousDate=!g(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(e.prototype.keyActionHandle.call(this,t),this.isBlazorServer||St(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((g(this.value)&&!g(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll(".e-selected").length>0&&gt(this.popupObj.element.querySelectorAll(".e-selected"),["e-selected"]),!g(this.value)&&!this.isBlazorServer&&+this.value>=+this.min&&+this.value<=+this.max)){var t=new Date(this.checkValue(this.value));e.prototype.navigateTo.call(this,"Month",t)}},t.prototype.strictModeUpdate=function(){var e,t,i,n;(e="datetimepicker"===this.getModuleName()?g(this.formatString)?this.dateTimeFormat:this.formatString:g(this.formatString)?this.formatString:this.formatString.replace("dd","d"),g(e))||e.split("M").length-1<3&&(e=e.replace("MM","M"));i="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:g(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:g(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?n=this.globalize.parseDate(this.inputElement.value,i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:S()?"d":"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.parseDate(this.inputElement.value,t)):(n=this.globalize.parseDate(this.inputElement.value,i),!g(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&n.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&n&&n.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&n?(this.updateInputValue(this.globalize.formatDate(n,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0),this.strictMode&&!n&&""===this.inputElement.value&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),g(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.isBlazorServer?(this.popupWrapper=this.inputWrapper.container.nextElementSibling,this.calendarElement=this.popupWrapper.firstElementChild,this.tableBodyElement=xt("tbody",this.calendarElement),this.contentElement=xt(".e-content",this.calendarElement)):(this.popupWrapper=this.createElement("div",{className:"e-datepicker e-popup-wrapper"}),g(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass)),me.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className="e-datepicker e-date-modal",document.body.className+=" e-date-overflow",this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new lr(this.popupWrapper,{content:this.isBlazorServer?null:this.calendarElement,relateTo:me.isDevice?document.body:this.inputWrapper.container,position:me.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:me.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=u(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new xi(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.CalendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new xi(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.CalendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&!e.isBlazorServer&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),wt(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.setAriaAttributes()},targetExitViewport:function(){me.isDevice||e.hide()}}),this.isBlazorServer||(this.popupObj.element.className+=" "+this.cssClass),this.setAriaAttributes()},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),n=this.createElement("div"),r=this.createElement("span",{className:"e-model-day"}),o=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},r.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},o.textContent=""+this.globalize.formatDate(this.value||new Date,e),t.appendChild(i),n.appendChild(r),n.appendChild(o),t.appendChild(n),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!g(e),this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)},t.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},t.prototype.changeEvent=function(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.selectCalendar=function(e){var t,i,n;i="datetimepicker"===this.getModuleName()&&g(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(n="Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n)):(n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n))),g(t)||this.updateInputValue(t)},t.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-popup-wrapper"))},t.prototype.setWidth=function(e){this.inputWrapper.container.style.width="number"==typeof e?C(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:C(this.width):"100%"},t.prototype.show=function(t,i){var n=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var r=!0,o=void 0;g(this.value)||+this.value>=+this.min&&+this.value<=+this.max?o=this.value||null:(o=new Date(this.checkValue(this.value)),this.isBlazorServer||this.setProperties({value:null},!0)),this.isCalendar()||(this.isBlazorServer||(e.prototype.render.call(this),this.setProperties({value:o||null},!0)),this.previousDate=o,this.createCalendar()),me.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){r=!1},popup:S()&&this.isServerRendered?null:this.popupObj,event:i||null,cancel:!1,appendTo:me.isDevice?this.mobilePopupWrapper:document.body};var s=this.preventArgs;this.trigger("open",s,(function(t){if(n.preventArgs=t,r&&!n.preventArgs.cancel){n.isBlazorServer&&(n.popupWrapper.style.visibility="",n.popupWrapper.style.width="auto",n.popupWrapper.style.height="auto"),ut(n.inputWrapper.buttons,"e-active"),n.preventArgs.appendTo.appendChild(n.popupWrapper),n.popupObj.refreshPosition(n.inputElement);var i={name:"FadeIn",duration:me.isDevice?0:300};1e3===n.zIndex?n.popupObj.show(new Qt(i),n.element):n.popupObj.show(new Qt(i),null),n.isBlazorServer||e.prototype.setOverlayIndex.call(n,n.mobilePopupWrapper,n.popupObj.element,n.modal,me.isDevice),n.setAriaAttributes()}else n.popupObj.destroy(),n.isBlazorServer&&n.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),n.popupWrapper=n.popupObj=null;g(n.inputElement)||""!==n.inputElement.value||!g(n.tableBodyElement)&&n.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(ut([n.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),gt(n.tableBodyElement.querySelectorAll("td.e-selected"),"e-selected")),ye.add(document,"mousedown touchstart",n.documentHandler,n)}))}},t.prototype.hide=function(e){var t=this;if(g(this.popupWrapper))me.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var i=!0;this.preventArgs={preventDefault:function(){i=!1},popup:S()&&this.isServerRendered?null:this.popupObj,event:e||null,cancel:!1},gt(this.inputWrapper.buttons,"e-active"),gt([document.body],"e-date-overflow");var n=this.preventArgs;this.isCalendar()?this.trigger("close",n,(function(e){t.closeEventCallback(i,e)})):this.closeEventCallback(i,n)}},t.prototype.closeEventCallback=function(e,t){if(this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel){this.isBlazorServer?(this.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),this.isAltKeyPressed=!1,this.popupWrapper=this.popupObj=null):(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy()),gt(this.inputWrapper.buttons,"e-active")}this.setAriaAttributes(),me.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),me.isDevice&&(g(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),ye.remove(document,"mousedown touchstart",this.documentHandler),me.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){if(document.activeElement!==this.inputElement&&this.enabled){this.inputElement.focus(),ut([this.inputWrapper.container],["e-input-focus"])}},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(gt([this.inputWrapper.container],["e-input-focus"]),this.inputElement.blur())},t.prototype.currentView=function(){var t;return this.calendarElement&&(t=e.prototype.currentView.call(this)),t},t.prototype.navigateTo=function(t,i){this.calendarElement&&e.prototype.navigateTo.call(this,t,i)},t.prototype.destroy=function(){this.isBlazorServer||(e.prototype.destroy.call(this),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&e.prototype.destroy.call(this));var t={"aria-live":"assertive","aria-atomic":"true","aria-disabled":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"};this.inputElement&&(No.removeAttributes(t,this.inputElement),g(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),ye.remove(this.inputElement,"blur",this.inputBlurHandler),ye.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&wt(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.isBlazorServer||this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),gt([this.inputElement],["e-input"])),gt([this.element],["e-datepicker"]),wt(this.inputWrapper.container)),this.formElement&&ye.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)g(this.inputElementCopy.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),gt([this.inputElementCopy],["e-datepicker","e-control","e-lib"]),this.inputElement=this.element,this.formElement=Tt(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.isBlazorServer=!(!S()||!this.isServerRendered||"datepicker"!==this.getModuleName()),this.isBlazorServer||(this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=m("ej2-datetimepicker"),null!==this.ngTag&&St(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=m("ej2-datepicker"),null!==this.ngTag&&St(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement()),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.isBlazorServer||(this.element.removeAttribute("tabindex"),e.prototype.preRender.call(this))},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var n=["required","aria-required","form"],r=0;r<n.length;r++)if(!g(e.getAttribute(n[r]))){var o=e.getAttribute(n[r]);t.setAttribute(n[r],o),e.removeAttribute(n[r])}},t.prototype.checkFormat=function(){var e=new ee(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=S()?this.format.replace(/tt/,"a"):this.format;else if(""===this.format.skeleton||g(this.format.skeleton))"datetimepicker"===this.getModuleName()?this.formatString=this.dateTimeFormat:this.formatString=null;else{var t=this.format.skeleton;"datetimepicker"===this.getModuleName()?this.formatString=e.getDatePattern({skeleton:t,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:t,type:"date"})}else this.formatString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new ee(this.locale),this.checkFormat(),this.checkView();var t,i=e?g(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];t="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:g(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:g(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var n=0,r=i;n<r.length;n++){var o=r[n];if(!g(this.inputElement.getAttribute(o)))switch(o){case"disabled":if((g(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e)&&!this.isBlazorServer){var s="disabled"!==this.inputElement.getAttribute(o)&&""!==this.inputElement.getAttribute(o)&&"true"!==this.inputElement.getAttribute(o);this.setProperties({enabled:s},!e)}break;case"readonly":if((g(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e)&&!this.isBlazorServer){var a="readonly"===this.inputElement.getAttribute(o)||""===this.inputElement.getAttribute(o)||"true"===this.inputElement.getAttribute(o);this.setProperties({readonly:a},!e)}break;case"placeholder":if((g(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&!this.isBlazorServer){this.inputElement.getAttribute(o);this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e)}break;case"style":this.isBlazorServer||this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(o));break;case"name":this.isBlazorServer||this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(o));break;case"value":if((g(this.datepickerOptions)||void 0===this.datepickerOptions.value||e)&&!this.isBlazorServer){var h=this.inputElement.getAttribute(o);this.setProperties(l(o,this.globalize.parseDate(h,t),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var p=this.inputElement.getAttribute(o);this.setProperties(l(o,this.globalize.parseDate(p),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var d=this.inputElement.getAttribute(o);this.setProperties(l(o,this.globalize.parseDate(d),{}),!e)}break;case"type":"text"===this.inputElement.getAttribute(o)||this.isBlazorServer||this.inputElement.setAttribute("type","text")}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(){var t,i;t=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value));var n=this.previousDate;this.minMaxUpdates(),this.isBlazorServer||e.prototype.render.call(this),this.previousDate=n;var r,o='*[id^="/id"]'.replace("/id",""+(t&&+t));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+t)&&this.setProperties({value:t},!0),g(this.calendarElement.querySelectorAll(o)[0])||this.calendarElement.querySelectorAll(o)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?r="Gregorian"===this.calendarMode?this.globalize.formatDate(t,{format:g(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}):this.globalize.formatDate(t,{format:g(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r=this.globalize.formatDate(t,i)),this.popupObj||this.updateInputValue(r)},t.prototype.setAriaAttributes=function(){if(this.isBlazorServer)if(this.isCalendar()){var e=this.tableBodyElement.querySelector("tr td.e-focused-date"),t=this.tableBodyElement.querySelector("tr td.e-selected"),i=e||t?(e||t).getAttribute("id"):"null";St(this.inputElement,{"aria-activedescendant":""+i})}else St(this.inputElement,{"aria-activedescendant":"null"});else this.isCalendar()?(No.addAttributes({"aria-expanded":"true"},this.inputElement),St(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(No.addAttributes({"aria-expanded":"false"},this.inputElement),St(this.inputElement,{"aria-activedescendant":"null"}))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!g(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&g(this.value)||t?(ut([this.inputWrapper.container],"e-error"),St(this.inputElement,{"aria-invalid":"true"})):(gt([this.inputWrapper.container],"e-error"),St(this.inputElement,{"aria-invalid":"false"}))},t.prototype.onPropertyChanged=function(t,i){"Gregorian"===this.calendarMode?(this.formatString,S()):this.formatString;for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"value":this.isInteracted=!1,this.invalidValueString=null,this.isBlazorServer||this.checkInvalidValue(t.value),t.value=this.value,this.previousElementValue=this.inputElement.value,this.isBlazorServer||(g(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(),+this.previousDate!=+this.value&&this.changeTrigger(null)),this.isInteracted=!0;break;case"format":this.checkFormat(),this.bindInputEvent(),this.isBlazorServer||this.updateInput();break;case"allowEdit":this.setAllowEdit();break;case"placeholder":No.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":No.setReadonly(this.readonly,this.inputElement);break;case"enabled":No.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled(),this.bindEvents();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),No.setPlaceholder(this.placeholder,this.inputElement),this.isBlazorServer||this.updateInput();break;case"enableRtl":No.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&!this.isBlazorServer&&e.prototype.onPropertyChanged.call(this,t,i);break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"showClearButton":No.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.isBlazorServer||this.updateInput();break;case"width":this.setWidth(t.width);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,No.removeFloating(this.inputWrapper),No.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;default:this.calendarElement&&!this.isBlazorServer&&e.prototype.onPropertyChanged.call(this,t,i)}this.hide(null)}},tu([zt(null)],t.prototype,"width",void 0),tu([zt(null)],t.prototype,"value",void 0),tu([zt(null)],t.prototype,"cssClass",void 0),tu([zt(!1)],t.prototype,"strictMode",void 0),tu([zt(null)],t.prototype,"format",void 0),tu([zt(!0)],t.prototype,"enabled",void 0),tu([zt({})],t.prototype,"htmlAttributes",void 0),tu([zt(null)],t.prototype,"values",void 0),tu([zt(!1)],t.prototype,"isMultiSelection",void 0),tu([zt(!0)],t.prototype,"showClearButton",void 0),tu([zt(!0)],t.prototype,"allowEdit",void 0),tu([zt(null)],t.prototype,"keyConfigs",void 0),tu([zt(!1)],t.prototype,"enablePersistence",void 0),tu([zt(1e3)],t.prototype,"zIndex",void 0),tu([zt(!1)],t.prototype,"readonly",void 0),tu([zt(null)],t.prototype,"placeholder",void 0),tu([zt("Never")],t.prototype,"floatLabelType",void 0),tu([zt(null)],t.prototype,"serverTimezoneOffset",void 0),tu([zt(!1)],t.prototype,"openOnFocus",void 0),tu([_t()],t.prototype,"open",void 0),tu([_t()],t.prototype,"cleared",void 0),tu([_t()],t.prototype,"close",void 0),tu([_t()],t.prototype,"blur",void 0),tu([_t()],t.prototype,"focus",void 0),tu([_t()],t.prototype,"created",void 0),tu([_t()],t.prototype,"destroyed",void 0),t=tu([Gt],t)}($c),ru=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ou=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},su=(new Date).getDate(),au=(new Date).getMonth(),lu=(new Date).getFullYear(),hu="e-input-focus",pu="e-list-item",du=["title","class","style"];(Gc||(Gc={})).createListItems=function(e,t,i,n,r,o){var s,a;this.calendarMode;var l=6e4*o,h=[],p=[];for(s=+t.setMilliseconds(0),a=+i.setMilliseconds(0);a>=s;)p.push(s),h.push(n.formatDate(new Date(s),{format:r,type:"time"})),s+=l;return{collection:p,list:Jd.createList(e,h,null,!0)}};!function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.liCollections=[],n.timeCollections=[],n.blazorTimeCollections=[],n.disableItemCollection=[],n.invalidValueString=null,n.isBlazorServer=!1,n.timeOptions=t,n}ru(t,e),t.prototype.preRender=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.cloneElement=this.element.cloneNode(!0),gt([this.cloneElement],["e-timepicker","e-control","e-lib"]),this.inputElement=this.element,this.angularTag=null,this.formElement=Tt(this.element,"form"),this.isBlazorServer=!(!S()||!this.isServerRendered||"timepicker"!==this.getModuleName()),this.isBlazorServer||("EJS-TIMEPICKER"===this.element.tagName&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",
 	this.element.removeAttribute("tabindex"),this.openPopupEventArgs={appendTo:document.body})},t.prototype.render=function(){if(this.isBlazorServer){this.globalize=new ee(this.locale),this.defaultCulture=new ee("en"),this.checkTimeFormat();var e=this.element.parentElement;this.inputWrapper={container:e,clearButton:e.querySelector(".e-clear-icon"),buttons:[e.querySelector(".e-time-icon")]},No.bindInitialEvent({element:this.inputElement,floatLabelType:this.floatLabelType}),this.showClearButton&&this.inputWrapper.clearButton&&No.wireClearBtnEvents(this.inputElement,this.inputWrapper.clearButton,this.inputWrapper.container)}else this.initialize(),this.createInputElement(),this.updateHtmlAttributeToWrapper(),this.setTimeAllowEdit(),this.setEnable(),this.validateInterval();this.bindEvents(),this.isBlazorServer||(this.validateDisable(),this.setValue(this.getFormattedValue(this.value))),this.anchor=this.inputElement,this.inputElement.setAttribute("value",this.inputElement.value),this.isBlazorServer||(this.inputEleValue=this.getDateObject(this.inputElement.value)),this.renderComplete()},t.prototype.setTimeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):St(this.inputElement,{readonly:""}),this.clearIconState()},t.prototype.clearIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&gt([this.inputWrapper.container],["e-non-edit"]):""===this.inputElement.value?gt([this.inputWrapper.container],["e-non-edit"]):ut([this.inputWrapper.container],["e-non-edit"])},t.prototype.validateDisable=function(){this.setMinMax(this.initMin,this.initMax),this.popupCreation(),this.popupObj.destroy(),this.popupWrapper=this.popupObj=null,isNaN(+this.value)||null===this.value||this.valueIsDisable(this.value)||(this.strictMode&&this.resetState(),this.initValue=null,this.initMax=this.getDateObject(this.initMax),this.initMin=this.getDateObject(this.initMin),this.timeCollections=this.liCollections=[],this.setMinMax(this.initMin,this.initMax))},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var n=["required","aria-required","form"],r=0;r<n.length;r++)if(!g(e.getAttribute(n[r]))){var o=e.getAttribute(n[r]);t.setAttribute(n[r],o),e.removeAttribute(n[r])}},t.prototype.initialize=function(){this.globalize=new ee(this.locale),this.defaultCulture=new ee("en"),this.checkTimeFormat(),this.checkInvalidValue(this.value),this.setProperties({value:this.checkDateValue(new Date(this.checkInValue(this.value)))},!0),this.setProperties({min:this.checkDateValue(new Date(this.checkInValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkInValue(this.max)))},!0),null!==this.angularTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.checkAttributes(!1);var e={placeholder:this.placeholder};this.l10n=new ki("timepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.initValue=this.checkDateValue(this.value),this.initMin=this.checkDateValue(this.min),this.initMax=this.checkDateValue(this.max),this.isNavigate=this.isPreventBlur=this.isTextSelected=!1,this.activeIndex=this.valueWithMinutes=this.prevDate=null,g(this.element.getAttribute("id"))?(this.element.id=m("ej2_timepicker"),null!==this.angularTag&&St(this.inputElement,{id:this.element.id+"_input"})):null!==this.angularTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"),g(this.inputElement.getAttribute("name"))&&St(this.inputElement,{name:this.element.id})},t.prototype.checkTimeFormat=function(){if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(g(this.format.skeleton)||""===this.format.skeleton)this.formatString=this.globalize.getDatePattern({type:"time",skeleton:"short"});else{var e=this.format.skeleton;this.formatString=this.globalize.getDatePattern({type:"time",skeleton:e})}else this.formatString=null},t.prototype.checkDateValue=function(e){return!g(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.createInputElement=function(){var e=this.cssClass;g(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=No.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[" e-input-group-icon e-time-icon e-icons"]},this.createElement),this.inputWrapper.container.style.width=this.setWidth(this.width),St(this.inputElement,{"aria-haspopup":"true","aria-autocomplete":"list",tabindex:"0","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"false","aria-invalid":"false"}),this.isNullOrEmpty(this.inputStyle)||No.addAttributes({style:this.inputStyle},this.inputElement),ut([this.inputWrapper.container],"e-time-wrapper")},t.prototype.getCldrDateTimeFormat=function(){var e=new ee(this.locale).getDatePattern({skeleton:S()?"d":"yMd"});return this.isNullOrEmpty(this.formatString)?e+" "+this.CldrFormat("time"):this.formatString},t.prototype.checkInvalidValue=function(e){var t=!1;if("object"!=typeof e&&!g(e)){var i=e;"string"==typeof i&&(i=i.trim());var n,r=null;if("number"==typeof e?i=e.toString():"string"==typeof e&&(/^[a-zA-Z0-9- ]*$/.test(e)||g(r=this.setCurrentDate(this.getDateObject(e)))&&g(r=this.checkDateValue(this.globalize.parseDate(i,{format:this.getCldrDateTimeFormat(),type:"datetime"})))&&(r=this.checkDateValue(this.globalize.parseDate(i,{format:this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"})))),r=!g(n=this.globalize.parseDate(i,{format:this.getCldrDateTimeFormat(),type:"datetime"}))&&n instanceof Date&&!isNaN(+n)?n:null,g(r)&&i.replace(/\s/g,"").length){var o=null;o=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!o.test(i)||/^[a-zA-Z0-9- ]*$/.test(e)||isNaN(+new Date(""+i))?t=!0:r=new Date(""+i)}t?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0),this.initValue=null):(this.setProperties({value:r},!0),this.initValue=this.value)}},t.prototype.CldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?S()?this.getBlazorCultureFormat("t"):a("timeFormats.short",ie()):this.getCultureTimeObject(X,""+this.locale)},t.prototype.destroy=function(){if(this.isBlazorServer)this.unBindEvents();else{this.hide(),this.unBindEvents();var t={"aria-haspopup":"true","aria-autocomplete":"list",tabindex:"0","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"true","aria-invalid":"false"};this.inputElement&&(No.removeAttributes(t,this.inputElement),null===this.angularTag&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),g(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.enableElement([this.inputElement]),this.inputElement.classList.remove("e-input"),g(this.cloneElement.getAttribute("disabled"))&&No.setEnabled(!0,this.inputElement,this.floatLabelType)),this.inputWrapper.container&&wt(this.inputWrapper.container),this.inputWrapper=this.popupWrapper=this.cloneElement=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],g(this.rippleFn)||this.rippleFn(),e.prototype.destroy.call(this),this.formElement&&ye.remove(this.formElement,"reset",this.formResetHandler)}},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)g(this.cloneElement.getAttribute(e[t]))?(this.inputElement.removeAttribute(e[t]),"value"===e[t].toLowerCase()&&(this.inputElement.value="")):(this.inputElement.setAttribute(e[t],this.cloneElement.getAttribute(e[t])),"value"===e[t].toLowerCase()&&(this.inputElement.value=this.cloneElement.getAttribute(e[t])))},t.prototype.popupCreation=function(){this.isBlazorServer?(this.popupWrapper=this.inputWrapper.container.nextElementSibling,this.generateList()):(this.popupWrapper=this.createElement("div",{className:"e-timepicker e-popup",attrs:{id:this.element.id+"_popup",style:"visibility:hidden"}}),g(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),!g(this.step)&&this.step>0&&(this.generateList(),vt([this.listWrapper],this.popupWrapper)),this.openPopupEventArgs.appendTo.appendChild(this.popupWrapper)),this.addSelection(),this.renderPopup(),wt(this.popupWrapper)},t.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupWrapper.getBoundingClientRect().height;return t>e?e:t},t.prototype.generateList=function(){this.isBlazorServer?this.listWrapper=this.popupWrapper.querySelector(".e-content"):this.createListItems(),this.wireListEvents();var e={duration:300,selector:"."+pu};if(this.rippleFn=Jt(this.listWrapper,e),this.liCollections=this.listWrapper.querySelectorAll("."+pu),this.isBlazorServer){this.blazorTimeCollections=[];for(var t=0;t<this.liCollections.length;t++)this.blazorTimeCollections.push(this.liCollections[t].getAttribute("data-value"))}},t.prototype.renderPopup=function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),this.popupObj=new lr(this.popupWrapper,{width:this.setPopupWidth(this.width),zIndex:this.zIndex,targetType:"relative",position:me.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:me.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},enableRtl:this.enableRtl,relateTo:me.isDevice?document.body:this.inputWrapper.container,offsetY:4,open:function(){e.popupWrapper.style.visibility="visible",ut([e.inputWrapper.buttons[0]],"e-active")},close:function(){gt([e.inputWrapper.buttons[0]],"e-active"),e.unWireListEvents(),e.inputElement.setAttribute("aria-activedescendant","null"),e.isBlazorServer||(Ct(e.popupObj.element),e.popupObj.destroy(),e.popupWrapper.innerHTML=""),e.listWrapper=e.popupWrapper=e.listTag=void 0},targetExitViewport:function(){me.isDevice||e.hide()}}),me.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),this.popupObj.element.style.maxHeight="240px"},t.prototype.getFormattedValue=function(e){return g(this.checkDateValue(e))?null:this.globalize.formatDate(e,{skeleton:S()?"t":"medium",type:"time"})},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),i=!this.isNullOrEmpty(this.initValue);if(this.checkDateValue(t)){var n=i?this.initValue.getDate():su,r=i?this.initValue.getMonth():au,o=i?this.initValue.getFullYear():lu;return new Date(o,r,n,t.getHours(),t.getMinutes(),t.getSeconds())}}return null},t.prototype.updateHtmlAttributeToWrapper=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(du.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&ut([this.inputWrapper.container],n.split(" "))}else if("style"===i){var r=this.inputWrapper.container.getAttribute(i);r=g(r)?this.htmlAttributes[i]:r+this.htmlAttributes[i],this.inputWrapper.container.setAttribute(i,r)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateHtmlAttributeToElement=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];du.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){g(t)||(t=t.replace(/\s+/g," ").trim()),g(e)||(e=e.replace(/\s+/g," ").trim()),No.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&No.setCssClass(e,[this.popupWrapper],t)},t.prototype.removeErrorClass=function(){gt([this.inputWrapper.container],"e-error"),St(this.inputElement,{"aria-invalid":"false"})},t.prototype.checkErrorState=function(e){var t=this.getDateObject(e);this.validateState(t)&&!this.invalidValueString?this.removeErrorClass():(ut([this.inputWrapper.container],"e-error"),St(this.inputElement,{"aria-invalid":"true"}))},t.prototype.validateInterval=function(){!g(this.step)&&this.step>0?this.enableElement([this.inputWrapper.buttons[0]]):this.disableTimeIcon()},t.prototype.disableTimeIcon=function(){this.disableElement([this.inputWrapper.buttons[0]]),this.hide()},t.prototype.disableElement=function(e){ut(e,"e-disabled")},t.prototype.enableElement=function(e){gt(e,"e-disabled")},t.prototype.selectInputText=function(){this.inputElement.setSelectionRange(0,this.inputElement.value.length)},t.prototype.setCursorToEnd=function(){this.inputElement.setSelectionRange(this.inputElement.value.length,this.inputElement.value.length)},t.prototype.getMeridianText=function(){var e;if("en"===this.locale||"en-US"===this.locale)e=a(S()?"dayPeriods.wide":"dayPeriods.format.wide",ie());else{var t=S()?".dates.dayPeriods.abbreviated":".dates.calendars.gregorian.dayPeriods.format.abbreviated";e=a((S()?"":"main.")+""+this.locale+t,X)}return e},t.prototype.getCursorSelection=function(){var e=this.inputElement,t=0,i=0;return isNaN(e.selectionStart)||(t=e.selectionStart,i=e.selectionEnd),{start:Math.abs(t),end:Math.abs(i)}},t.prototype.getActiveElement=function(){return g(this.popupWrapper)?null:this.popupWrapper.querySelectorAll(".e-active")},t.prototype.isNullOrEmpty=function(e){return!!(g(e)||"string"==typeof e&&""===e.trim())},t.prototype.setWidth=function(e){return e="number"==typeof e?C(e):"string"==typeof e?e.match(/px|%|em/)?e:C(e):"100%"},t.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px");return e},t.prototype.setScrollPosition=function(){var e;this.getPopupHeight();g(e=this.selectedElement)?this.popupWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,r=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupWrapper.scrollTop=i?n-(t/2+r/2):n:this.popupWrapper.scrollTop=0},t.prototype.setScrollTo=function(){var e;if(g(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var t=this.popupWrapper.querySelectorAll("."+pu);if(t.length){var i=this.isBlazorServer?new Date((new Date).toDateString()+" "+this.blazorTimeCollections[0]).setMilliseconds(0):this.timeCollections[0],n=this.isBlazorServer?new Date((new Date).toDateString()+" "+this.scrollTo.toLocaleTimeString()).setMilliseconds(0):this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.step))]}}g(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.getText=function(){return g(this.checkDateValue(this.value))?"":this.getValue(this.value)},t.prototype.getValue=function(e){return g(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.cldrDateFormat=function(){return"en"===this.locale||"en-US"===this.locale?S()?a("d",a(this.locale,re)):a("dateFormats.short",ie()):this.getCultureDateObject(X,""+this.locale)},t.prototype.getBlazorCultureFormat=function(e){return a(e,a(this.locale,re)).replace(/tt/,"a")},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.formatString)?"en"===this.locale||"en-US"===this.locale?S()?this.getBlazorCultureFormat("t"):a("timeFormats.short",ie()):this.getCultureTimeObject(X,""+this.locale):this.formatString},t.prototype.dateToNumeric=function(){return"en"===this.locale||"en-US"===this.locale?S()?this.getBlazorCultureFormat("T"):a("timeFormats.medium",ie()):S()?this.getBlazorCultureFormat("T"):a("main."+this.locale+".dates.calendars.gregorian.timeFormats.medium",X)},t.prototype.getExactDateTime=function(e){return g(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.dateToNumeric(),type:"time"})},t.prototype.setValue=function(e){var t=this.checkValue(e);this.strictMode||this.validateState(t)?this.isNullOrEmpty(t)?(this.initValue=null,this.validateMinMax(this.value,this.min,this.max)):this.initValue=this.compareFormatChange(t):(null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.validateMinMax(this.value,this.min,this.max)),this.updateInput(!0,this.initValue)},t.prototype.compareFormatChange=function(e){return g(e)?null:e!==this.getText()?this.getDateObject(e):this.getDateObject(this.value)},t.prototype.updatePlaceHolder=function(){No.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)},t.prototype.updateInputValue=function(e){No.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnTimeIconClick")},t.prototype.updateBlazorTimeCollections=function(e){this.blazorTimeCollections=e},t.prototype.popupHandler=function(e){me.isDevice&&this.inputElement.setAttribute("readonly",""),this.isBlazorServer||e.preventDefault(),this.isPopupOpen()&&!this.isBlazorServer?this.closePopup(0,e):(this.inputElement.focus(),this.show(e))},t.prototype.mouseDownHandler=function(){if(!this.readonly){this.getCursorSelection();this.inputElement.setSelectionRange(0,0),ye.add(this.inputElement,"mouseup",this.mouseUpHandler,this)}},t.prototype.mouseUpHandler=function(e){if(!this.readonly){e.preventDefault(),ye.remove(this.inputElement,"mouseup",this.mouseUpHandler);var t=this.getCursorSelection();0===t.start&&t.end===this.inputElement.value.length||(this.inputElement.value.length>0&&(this.cursorDetails=this.focusSelection()),this.inputElement.setSelectionRange(this.cursorDetails.start,this.cursorDetails.end))}},t.prototype.focusSelection=function(){var e=new RegExp("^[a-zA-Z0-9]+$"),t=this.inputElement.value.split("");t.push(" ");var i=this.getCursorSelection(),n=0,r=0,o=!1;if(this.isTextSelected)n=i.start,r=i.end,this.isTextSelected=!1;else for(var s=0;s<t.length;s++)if(e.test(t[s])||(r=s,o=!0),o){if(i.start>=n&&i.end<=r){r=r,this.isTextSelected=!0;break}n=s+1,o=!1}return{start:n,end:r}},t.prototype.inputHandler=function(e){if(!this.readonly&&this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"home":case"end":case"up":case"down":this.keyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.isBlazorServer?(this.inputElement.setAttribute("value",this.selectedElement.getAttribute("data-value")),this.interopAdaptor.invokeMethodAsync("OnListItemClick",this.activeIndex,!0)):(this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.updateValue(this.valueWithMinutes,e))):this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictMode",this.inputElement.value):this.updateValue(this.inputElement.value,e),this.hide(),this.isNavigate=!1,this.isPopupOpen()&&e.stopPropagation();break;case"open":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnPopupHide",!0):this.show(e);break;case"escape":this.isBlazorServer||(this.updateInputValue(this.objToString(this.value)),this.previousState(this.value)),this.hide();break;case"close":this.hide();break;default:this.isNavigate=!1}},t.prototype.onMouseClick=function(e){var t=e.target,i=this.selectedElement=Tt(t,"."+pu);this.setSelection(i,e),i&&i.classList.contains(pu)&&this.hide()},t.prototype.closePopup=function(e,t){var i=this;if(this.isPopupOpen()&&this.popupWrapper){var n={popup:this.isBlazorServer?null:this.popupObj,event:t||null,cancel:!1,name:"open"};gt([document.body],"e-time-overflow"),this.trigger("close",n,(function(t){if(!t.cancel){var n={name:"FadeOut",duration:50,delay:e||0};i.popupObj.hide(new Qt(n)),gt([i.inputWrapper.container],["e-icon-anim"]),St(i.inputElement,{"aria-expanded":"false"}),ye.remove(document,"mousedown touchstart",i.documentClickHandler),i.isBlazorServer&&(i.disposeServerPopup(),i.inputWrapper.container.parentElement.insertBefore(i.popupWrapper,i.inputWrapper.container.nextElementSibling),i.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),i.popupWrapper=i.popupObj=null)}me.isDevice&&i.modal&&(i.modal.style.display="none",i.modal.outerHTML="",i.modal=null),me.isDevice&&(g(i.mobileTimePopupWrap)||(i.mobileTimePopupWrap.remove(),i.mobileTimePopupWrap=null)),me.isDevice&&i.allowEdit&&!i.readonly&&i.inputElement.removeAttribute("readonly")}))}else me.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},t.prototype.disposeServerPopup=function(){this.popupWrapper&&(this.popupWrapper.style.visibility="hidden",this.popupWrapper.style.top="-9999px",this.popupWrapper.style.left="-9999px",this.popupWrapper.style.width="0px",this.popupWrapper.style.height="0px")},t.prototype.checkValueChange=function(e,t){if(this.strictMode||this.validateState(this.valueWithMinutes))if(t){var i=this.getDateObject(new Date(this.timeCollections[this.activeIndex]));+this.prevDate!=+i&&this.valueProcess(e,i)}else(this.prevValue!==this.inputElement.value||g(this.checkDateValue(this.value)))&&this.valueProcess(e,this.compareFormatChange(this.inputElement.value));else null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.setProperties({value:this.compareFormatChange(this.inputElement.value)},!0),this.initValue=this.valueWithMinutes=this.compareFormatChange(this.inputElement.value),this.prevValue=this.inputElement.value,+this.prevDate!=+this.value&&this.changeEvent(e)},t.prototype.onMouseOver=function(e){var t=Tt(e.target,"."+pu);this.setHover(t,"e-hover")},t.prototype.setHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeHover(t),ut([e],t),"e-navigation"===t&&e.setAttribute("aria-selected","true"))},t.prototype.setSelection=function(e,t){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.isBlazorServer?(this.selectedElement=e,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),ut([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"),this.inputElement.setAttribute("value",e.getAttribute("data-value")),this.interopAdaptor.invokeMethodAsync("OnListItemClick",this.activeIndex,!1),this.addSelection()):(this.checkValue(e.getAttribute("data-value")),this.selectedElement=e,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),ut([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"),this.checkValueChange(t,!0)))},t.prototype.onMouseLeave=function(){this.removeHover("e-hover")},t.prototype.scrollHandler=function(){"timepicker"===this.getModuleName()&&me.isDevice||this.hide()},t.prototype.setMinMax=function(e,t){g(this.checkDateValue(e))&&(this.initMin=this.getDateObject("12:00:00 AM")),g(this.checkDateValue(t))&&(this.initMax=this.getDateObject("11:59:59 PM"))},t.prototype.validateMinMax=function(e,t,i){var n=e instanceof Date?e:this.getDateObject(e);return g(this.checkDateValue(n))?+this.createDateObj(this.getFormattedValue(this.initMin))>+this.createDateObj(this.getFormattedValue(this.initMax))&&this.disableTimeIcon():e=this.strictOperation(this.initMin,this.initMax,e,n),this.strictMode&&(e=this.valueIsDisable(e)?e:null),this.checkErrorState(e),e},t.prototype.valueIsDisable=function(e){if(this.disableItemCollection.length>0){if(this.disableItemCollection.length===this.timeCollections.length)return!1;for(var t=e instanceof Date?this.objToString(e):e,i=0;i<this.disableItemCollection.length;i++)if(t===this.disableItemCollection[i])return!1}return!0},t.prototype.validateState=function(e){if(!this.strictMode){if(!this.valueIsDisable(e))return!1;var t=this.setCurrentDate(this.getDateObject(e)),i=this.setCurrentDate(this.getDateObject(this.initMax)),n=this.setCurrentDate(this.getDateObject(this.initMin));if(g(this.checkDateValue(t))){if(+i<+n||""!==this.inputElement.value)return!1}else if(+t>+i||+t<+n)return!1}return!0},t.prototype.strictOperation=function(e,t,i,n){var r=this.createDateObj(this.getFormattedValue(t)),o=this.createDateObj(this.getFormattedValue(e)),s=this.createDateObj(this.getFormattedValue(n));if(this.strictMode){if(+o>+r)return this.disableTimeIcon(),this.initValue=this.getDateObject(r),this.updateInputValue(this.getValue(this.initValue)),this.inputElement.value;if(+o>=+s)return this.getDateObject(o);if(+s>=+r||+o==+r)return this.getDateObject(r)}else if(+o>+r&&(this.disableTimeIcon(),!isNaN(+this.createDateObj(i))))return i;return i},t.prototype.bindEvents=function(){ye.add(this.inputWrapper.buttons[0],"mousedown",this.isBlazorServer?this.preventEventBubbling:this.popupHandler,this),ye.add(this.inputElement,"blur",this.inputBlurHandler,this),ye.add(this.inputElement,"focus",this.inputFocusHandler,this),ye.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&ye.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this),this.formElement&&ye.add(this.formElement,"reset",this.formResetHandler,this),me.isDevice||(this.keyConfigure=u(this.keyConfigure,this.keyConfigs),this.inputEvent=new xi(this.inputWrapper.container,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.showClearButton&&this.inputElement&&ye.add(this.inputElement,"mousedown",this.mouseDownHandler,this))},t.prototype.formResetHandler=function(){if(!this.inputElement.disabled){var e=this.inputElement.getAttribute("value"),t=this.isBlazorServer?this.inputEleValue:this.checkDateValue(this.inputEleValue);"EJS-TIMEPICKER"===this.element.tagName&&(t=null,e="",this.inputElement.setAttribute("value","")),this.isBlazorServer||(this.setProperties({value:t},!0),this.prevDate=this.value,this.valueWithMinutes=this.value,this.initValue=this.value),this.inputElement&&(this.updateInputValue(e),this.isBlazorServer||this.checkErrorState(e),this.prevValue=this.inputElement.value)}},t.prototype.inputChangeHandler=function(e){e.stopPropagation()},t.prototype.unBindEvents=function(){this.inputWrapper&&ye.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.popupHandler),ye.remove(this.inputElement,"blur",this.inputBlurHandler),ye.remove(this.inputElement,"focus",this.inputFocusHandler),ye.remove(this.inputElement,"change",this.inputChangeHandler),this.inputEvent&&this.inputEvent.destroy(),ye.remove(this.inputElement,"mousedown touchstart",this.mouseDownHandler),this.showClearButton&&!g(this.inputWrapper.clearButton)&&ye.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.clearHandler),this.formElement&&ye.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&ye.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this)},t.prototype.raiseClearedEvent=function(e){var t={event:e};this.trigger("cleared",t)},t.prototype.clearHandler=function(e){e.preventDefault(),g(this.value)?(this.resetState(),this.raiseClearedEvent(e)):this.clear(e),this.isBlazorServer&&this.interopAdaptor.invokeMethodAsync("OnValueCleared"),this.popupWrapper&&(this.popupWrapper.scrollTop=0)},t.prototype.clear=function(e){this.isBlazorServer||this.setProperties({value:null},!0),this.initValue=null,this.resetState(),this.raiseClearedEvent(e),this.isBlazorServer||this.changeEvent(e)},t.prototype.setZIndex=function(){this.popupObj&&(this.popupObj.zIndex=this.zIndex,this.popupObj.dataBind())},t.prototype.checkAttributes=function(e){for(var t,i=0,n=e?g(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["step","disabled","readonly","style","name","value","min","max","placeholder"];i<n.length;i++){var r=n[i];if(!g(this.inputElement.getAttribute(r)))switch(r){case"disabled":if(g(this.timeOptions)||void 0===this.timeOptions.enabled||e){var o="disabled"!==this.inputElement.getAttribute(r)&&""!==this.inputElement.getAttribute(r)&&"true"!==this.inputElement.getAttribute(r);this.setProperties({enabled:o},!e)}break;case"style":this.inputStyle=this.inputElement.getAttribute(r);break;case"readonly":if(g(this.timeOptions)||void 0===this.timeOptions.readonly||e){var s="readonly"===this.inputElement.getAttribute(r)||""===this.inputElement.getAttribute(r)||"true"===this.inputElement.getAttribute(r);this.setProperties({readonly:s},!e)}break;case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(r));break;case"step":this.step=parseInt(this.inputElement.getAttribute(r),10);break;case"placeholder":(g(this.timeOptions)||void 0===this.timeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(r)},!e);break;case"min":this.isBlazorServer||(g(this.timeOptions)||void 0===this.timeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(r)),g(this.checkDateValue(t))||this.setProperties({min:t},!e));break;case"max":this.isBlazorServer||(g(this.timeOptions)||void 0===this.timeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(r)),g(this.checkDateValue(t))||this.setProperties({max:t},!e));break;case"value":this.isBlazorServer||(g(this.timeOptions)||void 0===this.timeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(r)),g(this.checkDateValue(t))||(this.initValue=t,this.updateInput(!1,this.initValue),this.setProperties({value:t},!e)))}}},t.prototype.setCurrentDate=function(e){return g(this.checkDateValue(e))?null:new Date(lu,au,su,e.getHours(),e.getMinutes(),e.getSeconds())},t.prototype.getTextFormat=function(){var e=0;if("a"===this.cldrTimeFormat().split(" ")[0]||0===this.cldrTimeFormat().indexOf("a"))e=1;else if(this.cldrTimeFormat().indexOf("a")<0)for(var t=this.cldrTimeFormat().split(" "),i=0;i<t.length;i++)if(t[i].toLowerCase().indexOf("h")>=0){e=i;break}return e},t.prototype.updateValue=function(e,t){var i;if(this.isNullOrEmpty(e))this.resetState();else if(i=this.checkValue(e),this.strictMode){var n=null===i&&e.trim().length>0?this.previousState(this.prevDate):this.inputElement.value;this.updateInputValue(n)}this.checkValueChange(t,"string"!=typeof e)},t.prototype.previousState=function(e){for(var t=this.getDateObject(e),i=0;i<this.timeCollections.length;i++)if(+t===this.timeCollections[i]){this.activeIndex=i,this.selectedElement=this.liCollections[i],this.valueWithMinutes=new Date(this.timeCollections[i]);break}return this.prevValue},t.prototype.resetState=function(){this.removeSelection(),No.setValue("",this.inputElement,this.floatLabelType,!1),this.valueWithMinutes=this.activeIndex=null,this.strictMode||this.isBlazorServer||this.checkErrorState(null)},t.prototype.objToString=function(e){return g(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.checkValue=function(e){if(!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.validateValue(t,e)}return this.resetState(),this.valueWithMinutes=null},t.prototype.validateValue=function(e,t){var i,n=this.validateMinMax(t,this.min,this.max),r=this.createDateObj(n);if(this.getFormattedValue(r)!==this.getFormattedValue(this.value)?(this.valueWithMinutes=g(r)?null:r,i=this.objToString(this.valueWithMinutes)):(this.strictMode&&(e=r),this.valueWithMinutes=this.checkDateValue(e),i=this.objToString(this.valueWithMinutes)),!this.strictMode&&g(i)){var o=n.trim().length>0?n:"";this.updateInputValue(o)}else this.updateInputValue(i);return i},t.prototype.findNextElement=function(e){var t=this.inputElement.value,i=g(this.valueWithMinutes)||this.isBlazorServer?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),n=null,r=this.liCollections.length,o=this.isBlazorServer?g(this.blazorTimeCollections)?[]:this.blazorTimeCollections:this.timeCollections;if(g(this.checkDateValue(i))&&g(this.activeIndex))this.selectNextItem(e);else{if("home"===e.action){var s=this.validLiElement(0);this.isBlazorServer||(n=+this.createDateObj(new Date(this.timeCollections[s]))),this.activeIndex=s}else if("end"===e.action){s=this.validLiElement(o.length-1,!0);this.isBlazorServer||(n=+this.createDateObj(new Date(this.timeCollections[s]))),this.activeIndex=s}else if("down"===e.action)for(var a=0;a<r;a++){if(this.isBlazorServer?+i<+this.createDateObj(this.blazorTimeCollections[a]):+i<this.timeCollections[a]){s=this.validLiElement(a);this.isBlazorServer||(n=+this.createDateObj(new Date(this.timeCollections[s]))),this.activeIndex=s;break}if(a===r-1){s=this.validLiElement(0);this.isBlazorServer||(n=+this.createDateObj(new Date(this.timeCollections[s]))),this.activeIndex=s;break}}else for(a=r-1;a>=0;a--){if(this.isBlazorServer?+i>+this.createDateObj(this.blazorTimeCollections[a]):+i>this.timeCollections[a]){s=this.validLiElement(a,!0);this.isBlazorServer||(n=+this.createDateObj(new Date(this.timeCollections[s]))),this.activeIndex=s;break}if(0===a){s=this.validLiElement(r-1);this.isBlazorServer||(n=+this.createDateObj(new Date(this.timeCollections[s]))),this.activeIndex=s;break}}this.selectedElement=this.liCollections[this.activeIndex],this.isBlazorServer?(this.inputElement.setAttribute("value",this.selectedElement.getAttribute("data-value")),this.interopAdaptor.invokeMethodAsync("OnListItemClick",this.activeIndex,!0)):this.elementValue(g(n)?null:new Date(n))}},t.prototype.selectNextItem=function(e){var t=this.validLiElement(0,"down"!==e.action);this.activeIndex=t,this.selectedElement=this.liCollections[t],this.isBlazorServer?(this.inputElement.setAttribute("value",this.selectedElement.getAttribute("data-value")),this.interopAdaptor.invokeMethodAsync("OnListItemClick",t,!0)):this.elementValue(new Date(this.timeCollections[t]))},t.prototype.findNextInBlazor=function(e){var t=g(this.blazorTimeCollections)?0:this.blazorTimeCollections.length,i=0,n=this.createDateObj(this.inputElement.value);switch(e.action){case"home":this.activeIndex=i;break;case"end":i=t-1,this.activeIndex=i;break;case"down":for(var r=0;r<t;r++){if(this.isBlazorServer?+n<+this.createDateObj(this.blazorTimeCollections[r]):+n<this.timeCollections[r]){var o=this.validLiElement(r);this.activeIndex=o;break}if(r===t-1){var s=this.validLiElement(0);this.activeIndex=s;break}}break;case"up":for(r=t-1;r>=0;r--){if(this.isBlazorServer?+n>+this.createDateObj(this.blazorTimeCollections[r]):+n>this.timeCollections[r]){var a=this.validLiElement(r,!0);this.activeIndex=a;break}if(0===r){var l=this.validLiElement(t-1);this.activeIndex=l;break}}}this.interopAdaptor.invokeMethodAsync("OnListItemClick",this.activeIndex,!0)},t.prototype.elementValue=function(e){g(this.checkDateValue(e))||this.checkValue(e)},t.prototype.validLiElement=function(e,t){var i=null;if(this.isBlazorServer&&g(this.popupWrapper)){if((r=this.blazorTimeCollections).length)if(t)for(var n=e;n>=0;n--){i=n;break}else for(n=e;n<=r.length-1;n++){i=n;break}}else{var r,o=!0;if((r=g(this.popupWrapper)?this.liCollections:this.popupWrapper.querySelectorAll("."+pu)).length)if(t)for(n=e;n>=0;n--){if(!r[n].classList.contains("e-disabled")){i=n;break}0===n&&o&&(e=n=r.length,o=!1)}else for(n=e;n<=r.length-1;n++){if(!r[n].classList.contains("e-disabled")){i=n;break}n===r.length-1&&o&&(e=n=-1,o=!1)}}return i},t.prototype.keyHandler=function(e){if(!(g(this.step)||this.step<=0||this.inputWrapper.buttons[0].classList.contains("e-disabled"))){var t=this.isBlazorServer?g(this.blazorTimeCollections)?0:this.blazorTimeCollections.length:this.timeCollections.length;if(g(this.getActiveElement())||0===this.getActiveElement().length)if(g(this.popupObj)&&this.isBlazorServer)if(g(this.activeIndex)){var i=this.validLiElement(0,"down"!==e.action);this.activeIndex=i,this.interopAdaptor.invokeMethodAsync("OnListItemClick",i,!0)}else this.findNextInBlazor(e);else this.liCollections.length>0&&(this.isBlazorServer||g(this.value))&&g(this.activeIndex)?this.selectNextItem(e):this.findNextElement(e);else{var n=void 0;if(e.keyCode>=37&&e.keyCode<=40){i=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=i=this.activeIndex===t?0:this.activeIndex,this.activeIndex=i=this.activeIndex<0?t-1:this.activeIndex,this.activeIndex=i=this.validLiElement(this.activeIndex,40!==e.keyCode&&39!==e.keyCode),this.isBlazorServer||(n=g(this.timeCollections[i])?this.timeCollections[0]:this.timeCollections[i])}else if("home"===e.action){i=this.validLiElement(0);this.activeIndex=i,this.isBlazorServer||(n=this.timeCollections[i])}else if("end"===e.action){i=this.validLiElement(t-1,!0);this.activeIndex=i,this.isBlazorServer||(n=this.timeCollections[i])}this.selectedElement=this.liCollections[this.activeIndex],this.isBlazorServer?(this.inputElement.setAttribute("value",this.selectedElement.getAttribute("data-value")),this.interopAdaptor.invokeMethodAsync("OnListItemClick",this.activeIndex,!0)):this.elementValue(new Date(n))}this.isNavigate=!0,this.setHover(this.selectedElement,"e-navigation"),this.setActiveDescendant(),this.isBlazorServer||this.selectInputText(),!this.isPopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setScrollPosition()}},t.prototype.getCultureTimeObject=function(e,t){return S()?a("t",a(t,re)).replace(/tt/,"a"):a("main."+t+".dates.calendars.gregorian.timeFormats.short",e)},t.prototype.getCultureDateObject=function(e,t){return S()?a("d",a(t,re)):a("main."+t+".dates.calendars.gregorian.dateFormats.short",e)},t.prototype.wireListEvents=function(){ye.add(this.listWrapper,"click",this.onMouseClick,this),me.isDevice||(ye.add(this.listWrapper,"mouseover",this.onMouseOver,this),ye.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireListEvents=function(){this.listWrapper&&(ye.remove(this.listWrapper,"click",this.onMouseClick),me.isDevice||(ye.remove(this.listWrapper,"mouseover",this.onMouseOver),ye.remove(this.listWrapper,"mouseout",this.onMouseLeave)))},t.prototype.valueProcess=function(e,t){var i=g(this.checkDateValue(t))?null:t;+this.prevDate!=+i&&(this.initValue=i,this.changeEvent(e))},t.prototype.changeEvent=function(e){this.addSelection(),this.updateInput(!0,this.initValue);var t={event:e||null,value:this.value,text:this.inputElement.value,isInteracted:!g(e),element:this.element};t.value=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.prevDate=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.trigger("change",t),this.invalidValueString=null,this.checkErrorState(this.value)},t.prototype.updateInput=function(e,t){e&&(this.prevValue=this.getValue(t)),this.prevDate=this.valueWithMinutes=t,"number"==typeof t&&(this.value&&+new Date(+this.value).setMilliseconds(0))===+t||this.setProperties({value:t},!0),!this.strictMode&&g(this.value)&&this.invalidValueString&&(this.checkErrorState(this.invalidValueString),this.updateInputValue(this.invalidValueString)),this.clearIconState()},t.prototype.setActiveDescendant=function(){g(this.selectedElement)?St(this.inputElement,{"aria-activedescendant":"null"}):St(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})},t.prototype.removeSelection=function(){if(this.removeHover("e-hover"),!g(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll(".e-active");e.length&&(gt(e,"e-active"),e[0].removeAttribute("aria-selected"))}},t.prototype.removeHover=function(e){var t=this.getHoverItem(e);t&&t.length&&(gt(t,e),"e-navigation"===e&&t[0].removeAttribute("aria-selected"))},t.prototype.getHoverItem=function(e){var t;return g(this.popupWrapper)||(t=this.popupWrapper.querySelectorAll("."+e)),t},t.prototype.setActiveClass=function(){if(!g(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+pu);if(e.length)for(var t=0;t<e.length;t++)if(!this.isBlazorServer&&this.timeCollections[t]===+this.getDateObject(this.valueWithMinutes)||this.isBlazorServer&&this.blazorTimeCollections[t]===this.blazorTimeCollections[this.activeIndex]){e[t].setAttribute("aria-selected","true"),this.selectedElement=e[t],this.activeIndex=t;break}}},t.prototype.addSelection=function(){this.selectedElement=null,this.removeSelection(),this.setActiveClass(),g(this.selectedElement)||(ut([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.isValidLI=function(e){return e&&e.classList.contains(pu)&&!e.classList.contains("e-disabled")},t.prototype.createDateObj=function(e){var t=S()?"M"+ie().dateSeperator+"d"+ie().dateSeperator+"yy":null,i=this.globalize.formatDate(new Date,{format:t,skeleton:"short",type:"date"}),n=null;return"string"==typeof e?e.toUpperCase().indexOf("AM")>-1||e.toUpperCase().indexOf("PM")>-1?(i=this.defaultCulture.formatDate(new Date,{format:t,skeleton:"short",type:"date"}),g(n=isNaN(+new Date(i+" "+e))?null:new Date(new Date(i+" "+e).setMilliseconds(0)))&&(n=this.TimeParse(i,e))):n=this.TimeParse(i,e):e instanceof Date&&(n=e),n},t.prototype.TimeParse=function(e,t){var i;return i=g(i=this.globalize.parseDate(e+" "+t,{format:this.cldrDateFormat()+" "+this.cldrTimeFormat(),type:"datetime"}))?this.globalize.parseDate(e+" "+t,{format:this.cldrDateFormat()+" "+this.dateToNumeric(),type:"datetime"}):i,i=g(i)?i:new Date(i.setMilliseconds(0))},t.prototype.createListItems=function(){var e,t,i=this;this.listWrapper=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}});var n=6e4*this.step,r=[];for(this.timeCollections=[],this.disableItemCollection=[],e=+this.getDateObject(this.initMin).setMilliseconds(0),t=+this.getDateObject(this.initMax).setMilliseconds(0);t>=e;)this.timeCollections.push(e),r.push(this.globalize.formatDate(new Date(e),{format:this.cldrTimeFormat(),type:"time"})),e+=n;var o={itemCreated:function(e){var t={element:e.item,text:e.text,value:i.getDateObject(e.text),isDisabled:!1};i.trigger("itemRender",t,(function(e){e.isDisabled&&e.element.classList.add("e-disabled"),e.element.classList.contains("e-disabled")&&i.disableItemCollection.push(e.element.getAttribute("data-value"))}))}};this.listTag=Jd.createList(this.createElement,r,o,!0),St(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),vt([this.listTag],this.listWrapper)},t.prototype.documentClickHandler=function(e){var t=e.target;!g(this.popupObj)&&(this.inputWrapper.container.contains(t)||this.popupObj.element&&this.popupObj.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),Tt(t,"#"+this.popupObj.element.id)||t===this.inputElement||t===(this.inputWrapper&&this.inputWrapper.buttons[0])||t===(this.inputWrapper&&this.inputWrapper.clearButton)||t===(this.inputWrapper&&this.inputWrapper.container)?t!==this.inputElement&&(me.isDevice||(this.isPreventBlur=(me.isIE||"edge"===me.info.name)&&document.activeElement===this.inputElement&&t===this.popupWrapper)):this.isPopupOpen()&&(this.hide(),this.focusOut())},t.prototype.setEnableRtl=function(){No.setEnableRtl(this.enableRtl,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){No.setEnabled(this.enabled,this.inputElement,this.floatLabelType),this.enabled?(gt([this.inputWrapper.container],"e-disabled"),St(this.inputElement,{"aria-disabled":"false"}),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.hide(),ut([this.inputWrapper.container],"e-disabled"),St(this.inputElement,{"aria-disabled":"true"}),this.inputElement.tabIndex=-1)},t.prototype.getProperty=function(e,t){"min"===t?(this.initMin=this.checkDateValue(new Date(this.checkInValue(e.min))),this.setProperties({min:this.initMin},!0)):(this.initMax=this.checkDateValue(new Date(this.checkInValue(e.max))),this.setProperties({max:this.initMax},!0)),""===this.inputElement.value?this.validateMinMax(this.value,this.min,this.max):this.checkValue(this.inputElement.value),this.checkValueChange(null,!1)},t.prototype.inputBlurHandler=function(e){if(this.isPreventBlur&&this.isPopupOpen())this.inputElement.focus();else{this.closePopup(0,e),gt([this.inputWrapper.container],[hu]);var t={model:this.isBlazorServer?null:this};this.trigger("blur",t),this.isBlazorServer||this.getText()===this.inputElement.value?0===this.inputElement.value.trim().length&&this.resetState():this.updateValue(this.inputElement.value,e),this.isBlazorServer&&this.interopAdaptor.invokeMethodAsync("OnStrictMode",this.inputElement.value),this.cursorDetails=null,this.isNavigate=!1,""===this.inputElement.value&&(this.invalidValueString=null)}},t.prototype.focusOut=function(){if(document.activeElement===this.inputElement){this.inputElement.blur(),gt([this.inputWrapper.container],[hu]);var e={model:this.isBlazorServer?null:this};this.trigger("blur",e)}},t.prototype.isPopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-timepicker"))},t.prototype.inputFocusHandler=function(){var e={model:this.isBlazorServer?null:this};this.readonly||me.isDevice||this.selectInputText(),this.trigger("focus",e),this.clearIconState(),this.openOnFocus&&this.show()},t.prototype.focusIn=function(){if(document.activeElement!==this.inputElement&&this.enabled){this.inputElement.focus()}},t.prototype.hide=function(){this.closePopup(100,null),this.clearIconState()},t.prototype.show=function(e){var t=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupWrapper)){this.popupCreation(),me.isDevice&&this.listWrapper&&(this.modal=this.createElement("div"),this.modal.className="e-timepicker e-time-modal",document.body.className+=" e-time-overflow",document.body.appendChild(this.modal)),me.isDevice&&(this.mobileTimePopupWrap=this.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobileTimePopupWrap)),this.openPopupEventArgs={popup:this.isBlazorServer?null:this.popupObj||null,cancel:!1,event:e||null,name:"open",appendTo:me.isDevice?this.mobileTimePopupWrap:document.body};var i=this.openPopupEventArgs;this.trigger("open",i,(function(e){if(S()&&t.isServerRendered&&(e.popup=t.popupObj||null),t.openPopupEventArgs=e,t.openPopupEventArgs.cancel||t.inputWrapper.buttons[0].classList.contains("e-disabled"))t.popupObj.destroy(),t.isBlazorServer&&(t.disposeServerPopup(),t.inputWrapper.container.parentElement.insertBefore(t.popupWrapper,t.inputWrapper.container.nextElementSibling),t.interopAdaptor.invokeMethodAsync("OnPopupHide",!1)),t.popupWrapper=t.listTag=void 0,t.liCollections=t.timeCollections=t.disableItemCollection=[],t.popupObj=null;else{t.isBlazorServer&&(t.popupWrapper.style.visibility="",t.popupWrapper.style.width=t.inputWrapper.container.offsetWidth+"px",t.popupWrapper.style.height="auto"),t.isBlazorServer&&(t.openPopupEventArgs.popup=t.popupObj),t.openPopupEventArgs.appendTo.appendChild(t.popupWrapper),t.popupAlignment(t.openPopupEventArgs),t.setScrollPosition(),me.isDevice||t.inputElement.focus();var i={name:"FadeIn",duration:50};t.popupObj.refreshPosition(t.anchor),1e3===t.zIndex?t.popupObj.show(new Qt(i),t.element):t.popupObj.show(new Qt(i),null),t.setActiveDescendant(),St(t.inputElement,{"aria-expanded":"true"}),ut([t.inputWrapper.container],hu),ye.add(document,"mousedown touchstart",t.documentClickHandler,t),t.setOverlayIndex(t.mobileTimePopupWrap,t.popupObj.element,t.modal,me.isDevice)}}))}},t.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!g(t)&&!g(i)&&!g(e)){var r=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(r-1).toString(),e.style.zIndex=r.toString()}},t.prototype.formatValues=function(e){var t;return"number"==typeof e?t=C(e):"string"==typeof e&&(t=e.match(/px|%|em/)||isNaN(parseInt(e,10))?e:C(e)),t},t.prototype.popupAlignment=function(e){if(e.popup.position.X=this.formatValues(e.popup.position.X),e.popup.position.Y=this.formatValues(e.popup.position.Y),isNaN(parseFloat(e.popup.position.X))&&isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.targetType="container"),isNaN(parseFloat(e.popup.position.X))||(this.popupObj.offsetX=parseFloat(e.popup.position.X)),isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.offsetY=parseFloat(e.popup.position.Y)),me.isDevice)"center"===e.popup.position.X&&"center"===e.popup.position.Y&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.offsetY=0,this.popupObj.targetType="container",this.popupObj.collision={X:"fit",Y:"fit"});else{switch(e.popup.position.X){case"left":break;case"right":e.popup.offsetX=this.containerStyle.width;break;case"center":e.popup.offsetX=-this.containerStyle.width/2}switch(e.popup.position.Y){case"top":case"bottom":break;case"center":e.popup.offsetY=-this.containerStyle.height/2}"center"===e.popup.position.X&&"center"===e.popup.position.Y&&(this.popupObj.relateTo=this.inputWrapper.container,this.anchor=this.inputElement,this.popupObj.targetType="relative")}},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getModuleName=function(){return"timepicker"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];switch(r){case"placeholder":No.setPlaceholder(e.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",e.placeholder);break;case"readonly":No.setReadonly(this.readonly,this.inputElement,this.floatLabelType),this.readonly&&this.hide(),this.setTimeAllowEdit();break;case"enabled":this.setProperties({enabled:e.enabled},!0),this.setEnable();break;case"allowEdit":this.setTimeAllowEdit();break;case"enableRtl":this.isBlazorServer||(this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl());break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"min":case"max":this.isBlazorServer||this.getProperty(e,r);break;case"showClearButton":No.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"locale":this.setProperties({locale:e.locale},!0),this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.updatePlaceHolder(),this.isBlazorServer||this.setValue(this.value);break;case"width":Dt(this.inputWrapper.container,{width:this.setWidth(e.width)}),this.containerStyle=this.inputWrapper.container.getBoundingClientRect();break;case"format":this.setProperties({format:e.format},!0),this.checkTimeFormat(),this.isBlazorServer||this.setValue(this.value);break;case"value":this.isBlazorServer||(this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.invalidValueString?(this.updateInputValue(this.invalidValueString),this.checkErrorState(this.invalidValueString)):("string"==typeof e.value?(this.setProperties({value:this.checkDateValue(new Date(e.value))},!0),e.value=this.value):(e.value&&+new Date(+e.value).setMilliseconds(0))!==+this.value&&(e.value=this.checkDateValue(new Date(""+e.value))),this.initValue=e.value,e.value=this.compareFormatChange(this.checkValue(e.value))),this.checkValueChange(null,!1));break;case"floatLabelType":this.floatLabelType=e.floatLabelType,No.removeFloating(this.inputWrapper),No.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"strictMode":this.isBlazorServer||(this.invalidValueString=null,e.strictMode&&this.checkErrorState(null),this.setProperties({strictMode:e.strictMode},!0),this.checkValue(this.inputElement.value),this.checkValueChange(null,!1));break;case"scrollTo":this.isBlazorServer?this.popupWrapper&&this.setScrollTo():this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))?(this.popupWrapper&&this.setScrollTo(),this.setProperties({scrollTo:e.scrollTo},!0)):this.setProperties({scrollTo:null},!0)}}},t.prototype.checkInValue=function(e){return e instanceof Date?e.toUTCString():""+e},ou([zt(null)],t.prototype,"width",void 0),ou([zt(null)],t.prototype,"cssClass",void 0),ou([zt(!1)],t.prototype,"strictMode",void 0),ou([zt(null)],t.prototype,"keyConfigs",void 0),ou([zt(null)],t.prototype,"format",void 0),ou([zt(!0)],t.prototype,"enabled",void 0),ou([zt(!1)],t.prototype,"readonly",void 0),ou([zt({})],t.prototype,"htmlAttributes",void 0),ou([zt("Never")],t.prototype,"floatLabelType",void 0),ou([zt(null)],t.prototype,"placeholder",void 0),ou([zt(1e3)],t.prototype,"zIndex",void 0),ou([zt(!1)],t.prototype,"enablePersistence",void 0),ou([zt(!0)],t.prototype,"showClearButton",void 0),ou([zt(30)],t.prototype,"step",void 0),ou([zt(null)],t.prototype,"scrollTo",void 0),ou([zt(null)],t.prototype,"value",void 0),ou([zt(null)],t.prototype,"min",void 0),ou([zt(null)],t.prototype,"max",void 0),ou([zt(!0)],t.prototype,"allowEdit",void 0),ou([zt(!1)],t.prototype,"openOnFocus",void 0),ou([_t()],t.prototype,"change",void 0),ou([_t()],t.prototype,"created",void 0),ou([_t()],t.prototype,"destroyed",void 0),ou([_t()],t.prototype,"open",void 0),ou([_t()],t.prototype,"itemRender",void 0),ou([_t()],t.prototype,"close",void 0),ou([_t()],t.prototype,"cleared",void 0),ou([_t()],t.prototype,"blur",void 0),ou([_t()],t.prototype,"focus",void 0),t=ou([Gt],t)}(pi);var cu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uu=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},gu=(new Date).getDate(),fu=(new Date).getMonth(),mu=(new Date).getFullYear(),yu=(new Date).getHours(),vu=(new Date).getMinutes(),bu=(new Date).getSeconds(),wu=(new Date).getMilliseconds(),Cu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.valueWithMinutes=null,n.dateTimeOptions=t,n}return cu(t,e),t.prototype.focusHandler=function(){ut([this.inputWrapper.container],"e-input-focus")},t.prototype.focusIn=function(){e.prototype.focusIn.call(this)},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),gt([this.inputWrapper.container],["e-input-focus"]))},t.prototype.blurHandler=function(e){if(this.isTimePopupOpen()&&this.isPreventBlur)this.inputElement.focus();else{gt([this.inputWrapper.container],"e-input-focus");var t={model:S()&&this.isServerRendered?null:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",t)}},t.prototype.destroy=function(){this.popupObject&&this.popupObject.element.classList.contains("e-popup")&&(this.popupObject.destroy(),wt(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],g(this.rippleFn)||this.rippleFn());var t={"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false","aria-haspopup":"true","aria-activedescendant":"null",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off"};this.inputElement&&(No.removeAttributes(t,this.inputElement),this.inputElement.removeAttribute("aria-placeholder")),this.isCalendar()&&(this.popupWrapper&&wt(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,e.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1);var t={placeholder:this.placeholder};this.l10n=new ki("datetimepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),e.prototype.render.call(this),this.createInputElement(),e.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.setValue(),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.renderComplete()},t.prototype.setValue=function(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var t=this.validateMinMaxRange(this.initValue);No.setValue(this.getFormattedValue(t),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:t},!0)}else g(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,e.prototype.updateInput.call(this)},t.prototype.validateMinMaxRange=function(e){var t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t},t.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()},t.prototype.checkErrorState=function(){this.isValidState?gt([this.inputWrapper.container],"e-error"):ut([this.inputWrapper.container],"e-error"),St(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.validateValue=function(e){var t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t},t.prototype.disablePopupButton=function(e){e?(ut([this.inputWrapper.buttons[0],this.timeIcon],"e-disabled"),this.hide()):gt([this.inputWrapper.buttons[0],this.timeIcon],"e-disabled")},t.prototype.getFormattedValue=function(e){var t;return g(e)?null:(t="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:S()?"d":"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))},t.prototype.isDateObject=function(e){return!g(e)&&!isNaN(+e)},t.prototype.createInputElement=function(){gt([this.inputElement],"e-datepicker"),gt([this.inputWrapper.container],"e-date-wrapper"),ut([this.inputWrapper.container],"e-datetime-wrapper"),ut([this.inputElement],"e-datetimepicker"),this.renderTimeIcon()},t.prototype.renderTimeIcon=function(){this.timeIcon=No.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)},t.prototype.bindInputEvents=function(){ye.add(this.timeIcon,"mousedown",this.timeHandler,this),ye.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),ye.add(this.inputElement,"blur",this.blurHandler,this),ye.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=u(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new xi(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.unBindInputEvents=function(){ye.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),ye.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(ye.remove(this.inputElement,"blur",this.blurHandler),ye.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?S()?a("t",a(this.locale,re)).replace(/tt/,"a"):a("timeFormats.short",ie()):this.getCultureTimeObject(X,""+this.locale):this.timeFormat},t.prototype.cldrDateTimeFormat=function(){var e=new ee(this.locale).getDatePattern({skeleton:S()?"d":"yMd"});return this.isNullOrEmpty(this.formatString)?e+" "+this.getCldrFormat("time"):this.formatString},t.prototype.getCldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?S()?a("t",a(this.locale,re)).replace(/tt/,"a"):a("timeFormats.short",ie()):this.getCultureTimeObject(X,""+this.locale)},t.prototype.isNullOrEmpty=function(e){return!!(g(e)||"string"==typeof e&&""===e.trim())},t.prototype.getCultureTimeObject=function(e,t){return"Gregorian"===this.calendarMode?S()?a("t",a(this.locale,re)).replace(/tt/,"a"):a("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",e):a("main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},t.prototype.timeHandler=function(t){me.isDevice&&this.inputElement.setAttribute("readonly",""),t.currentTarget===this.timeIcon&&t.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&e.prototype.hide.call(this,t),this.isTimePopupOpen()?this.closePopup(t):(this.inputElement.focus(),this.popupCreation("time",t),ut([this.inputWrapper.container],["e-input-focus"])))},t.prototype.dateHandler=function(e){e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),g(this.popupWrapper)||this.popupCreation("date",e))},t.prototype.show=function(t,i){this.enabled&&this.readonly||!this.enabled||("time"!==t||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(i),e.prototype.show.call(this),this.popupCreation("date",i)):(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)))},t.prototype.toggle=function(t){this.isDatePopupOpen()?(e.prototype.hide.call(this,t),this.show("time",null)):this.isTimePopupOpen()?(this.hide(t),e.prototype.show.call(this,null,t),this.popupCreation("date",null)):this.show(null,t)},t.prototype.listCreation=function(){var e;e="Gregorian"===this.calendarMode?this.globalize.parseDate(this.inputElement.value,{format:this.cldrDateTimeFormat(),type:"datetime"}):this.globalize.parseDate(this.inputElement.value,{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var t=g(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=t,this.listWrapper=ct("div",{className:"e-content",attrs:{tabindex:"0"}});var i=this.startTime(t),n=this.endTime(t),r=Gc.createListItems(this.createElement,i,n,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=r.collection,this.listTag=r.list,St(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),vt([r.list],this.listWrapper),this.wireTimeListEvents();var o={duration:300,selector:".e-list-item"};this.rippleFn=Jt(this.listWrapper,o),this.liCollections=this.listWrapper.querySelectorAll(".e-list-item")},t.prototype.popupCreation=function(e,t){me.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(ut([this.popupWrapper],"e-datetimepopup-wrapper"),St(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=ct("div",{className:"e-datetimepicker e-popup",attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),g(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!g(this.step)&&this.step>0&&(this.listCreation(),vt([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),this.popupObject.refreshPosition(this.inputElement))},t.prototype.openPopup=function(e){var t=this;this.preventArgs={cancel:!1,popup:S()&&this.isServerRendered?null:this.popupObject,event:e||null};var i=this.preventArgs;this.trigger("open",i,(function(e){if(t.preventArgs=e,!t.preventArgs.cancel&&!t.readonly){var i={name:"FadeIn",duration:100};1e3===t.zIndex?t.popupObject.show(new Qt(i),t.element):t.popupObject.show(new Qt(i),null),ut([t.inputWrapper.container],["e-icon-anim"]),St(t.inputElement,{"aria-expanded":"true"}),ye.add(document,"mousedown touchstart",t.documentClickHandler,t)}}))},t.prototype.documentClickHandler=function(e){var t=e.target;!g(this.popupObject)&&(this.inputWrapper.container.contains(t)||this.popupObject.element&&this.popupObject.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),Tt(t,"#"+(this.popupObject&&this.popupObject.element.id))||t===this.inputElement||t===this.timeIcon||t===this.inputWrapper.container?t!==this.inputElement&&(me.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(me.isIE||"edge"===me.info.name)&&t===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut()),this.openOnFocus&&this.show()},t.prototype.isTimePopupOpen=function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains("e-datetimepicker"))},t.prototype.isDatePopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-datetimepopup-wrapper"))},t.prototype.renderPopup=function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),me.isDevice&&(this.timeModal=ct("div"),this.timeModal.className="e-datetimepicker e-time-modal",document.body.className+=" e-time-overflow",this.timeModal.style.display="block",document.body.appendChild(this.timeModal));this.popupObject=new lr(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:me.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:me.isDevice?document.body:this.inputWrapper.container,position:me.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){e.dateTimeWrapper.style.visibility="visible",ut([e.timeIcon],"e-active"),me.isDevice||(e.timekeyConfigure=u(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new xi(e.inputWrapper.container,{keyAction:e.TimeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){gt([e.timeIcon],"e-active"),e.unWireTimeListEvents(),e.inputElement.setAttribute("aria-activedescendant","null"),Ct(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){me.isDevice||e.hide()}}),this.popupObject.element.style.maxHeight="250px"},t.prototype.setDimension=function(e){return e="number"==typeof e?C(e):"string"==typeof e?e:"100%"},t.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px");return e},t.prototype.wireTimeListEvents=function(){ye.add(this.listWrapper,"click",this.onMouseClick,this),me.isDevice||(ye.add(this.listWrapper,"mouseover",this.onMouseOver,this),ye.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireTimeListEvents=function(){this.listWrapper&&(ye.remove(this.listWrapper,"click",this.onMouseClick),ye.remove(document,"mousedown touchstart",this.documentClickHandler),me.isDevice||(ye.add(this.listWrapper,"mouseover",this.onMouseOver,this),ye.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},t.prototype.onMouseOver=function(e){var t=Tt(e.target,".e-list-item");this.setTimeHover(t,"e-hover")},t.prototype.onMouseLeave=function(){this.removeTimeHover("e-hover")},t.prototype.setTimeHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),ut([e],t))},t.prototype.getPopupHeight=function(){var e=parseInt("250px",10),t=this.dateTimeWrapper.getBoundingClientRect().height;return t>e?e:t},t.prototype.changeEvent=function(t){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(e.prototype.changeEvent.call(this,t),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},t.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!g(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.value)},t.prototype.setTimeScrollPosition=function(){var e;g(e=this.selectedElement)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,r=e.getBoundingClientRect().height;n+e.offsetTop>t?this.dateTimeWrapper.scrollTop=i?n-(t/2+r/2):n:this.dateTimeWrapper.scrollTop=0},t.prototype.setScrollTo=function(){var e,t=this.dateTimeWrapper.querySelectorAll(".e-list-item");if(t.length>=0){var i=this.timeCollections[0],n=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;g(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.setInputValue=function(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var t=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));No.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0)}this.updateIconState()},t.prototype.getFullDateTime=function(){var e=null;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)},t.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var t=this.previousDate.getDate(),i=this.previousDate.getMonth(),n=this.previousDate.getFullYear(),r=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return new Date(n,i,t,r,o,s)}return this.previousDate},t.prototype.onMouseClick=function(e){var t=e.target,i=this.selectedElement=Tt(t,".e-list-item");i&&i.classList.contains("e-list-item")&&(this.timeValue=i.getAttribute("data-value"),this.hide(e)),this.setSelection(i,e)},t.prototype.setSelection=function(e,t){if(this.isValidLI(e)&&!e.classList.contains("e-active")){e.getAttribute("data-value");this.selectedElement=e;var i=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=i,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),ut([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}},t.prototype.setTimeActiveClass=function(){var e=g(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!g(e)){var t=e.querySelectorAll(".e-list-item");if(t.length)for(var i=0;i<t.length;i++)if(this.timeCollections[i]===+this.valueWithMinutes){t[i].setAttribute("aria-selected","true"),this.selectedElement=t[i],this.activeIndex=i,this.setTimeActiveDescendant();break}}},t.prototype.setTimeActiveDescendant=function(){g(this.selectedElement)?St(this.inputElement,{"aria-activedescendant":"null"}):St(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})},t.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),g(this.selectedElement)||(ut([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.removeTimeSelection=function(){if(this.removeTimeHover("e-hover"),!g(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll(".e-active");e.length&&(gt(e,"e-active"),e[0].removeAttribute("aria-selected"))}},t.prototype.removeTimeHover=function(e){var t=this.getTimeHoverItem(e);t&&t.length&&gt(t,e)},t.prototype.getTimeHoverItem=function(e){var t,i=g(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return g(i)||(t=i.querySelectorAll("."+e)),t},t.prototype.isValidLI=function(e){return e&&e.classList.contains("e-list-item")&&!e.classList.contains("e-disabled")},t.prototype.calculateStartEnd=function(e,t,i){var n=e.getDate(),r=e.getMonth(),o=e.getFullYear(),s=e.getHours(),a=e.getMinutes(),l=e.getSeconds(),h=e.getMilliseconds();return t?"starttime"===i?new Date(o,r,n,0,0,0):new Date(o,r,n,23,59,59):new Date(o,r,n,s,a,l,h)},t.prototype.startTime=function(e){var t,i,n,r=this.min;return+(n=null===e?new Date:e).getDate()==+r.getDate()&&+n.getMonth()==+r.getMonth()&&+n.getFullYear()==+r.getFullYear()||+new Date(n.getFullYear(),n.getMonth(),n.getDate())<=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(i=!1,t=this.min):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n>=+this.max&&(i=!0,t=this.max),this.calculateStartEnd(t,i,"starttime")},t.prototype.endTime=function(e){var t,i,n,r=this.max;return+(n=null===e?new Date:e).getDate()==+r.getDate()&&+n.getMonth()==+r.getMonth()&&+n.getFullYear()==+r.getFullYear()||+new Date(n.getUTCFullYear(),n.getMonth(),n.getDate())>=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(i=!1,t=this.max):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n<=+this.min&&(i=!0,t=this.min),this.calculateStartEnd(t,i,"endtime")},t.prototype.hide=function(e){var t=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:S()&&this.isServerRendered?null:this.popupObj||this.popupObject,event:e||null};var i=this.preventArgs;g(this.popupObj)?this.trigger("close",i,(function(i){t.dateTimeCloseEventCallback(e,i)})):this.dateTimeCloseEventCallback(e,i)}else me.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.dateTimeCloseEventCallback=function(t,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?e.prototype.hide.call(this,t):this.isTimePopupOpen()&&(this.closePopup(t),gt([document.body],"e-time-overflow"),me.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),me.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.closePopup=function(e){if(this.isTimePopupOpen()&&this.popupObject){var t={name:"FadeOut",duration:100,delay:0};this.popupObject.hide(new Qt(t)),this.inputWrapper.container.classList.remove("e-icon-anim"),St(this.inputElement,{"aria-expanded":"false"}),ye.remove(document,"mousedown touchstart",this.documentClickHandler)}},t.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),e.prototype.preRender.call(this),gt([this.inputElementCopy],["e-datetimepicker"])},t.prototype.getProperty=function(e,t){"min"===t?this.setProperties({min:this.validateValue(e.min)},!0):this.setProperties({max:this.validateValue(e.max)},!0)},t.prototype.checkAttributes=function(e){for(var t,i=0,n=e?g(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];i<n.length;i++){var r=n[i];if(!g(this.inputElement.getAttribute(r)))switch(r){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(r));break;case"step":this.step=parseInt(this.inputElement.getAttribute(r),10);break;case"readonly":if(g(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){var o="disabled"===this.inputElement.getAttribute(r)||""===this.inputElement.getAttribute(r)||"true"===this.inputElement.getAttribute(r);this.setProperties({readonly:o},!e)}break;case"placeholder":(g(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(r)},!e);break;case"min":(g(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(r)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({min:t},!e));break;case"disabled":if(g(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){var s="disabled"!==this.inputElement.getAttribute(r)&&"true"!==this.inputElement.getAttribute(r)&&""!==this.inputElement.getAttribute(r);this.setProperties({enabled:s},!e)}break;case"value":(g(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(r)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({value:t},!e));break;case"max":(g(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(r)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({max:t},!e))}}},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getTimeActiveElement=function(){return g(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll(".e-active")},t.prototype.createDateObj=function(e){return e instanceof Date?e:null},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),i=this.valueWithMinutes,n=!g(i);if(this.checkDateValue(t)){var r=n?i.getDate():gu,o=n?i.getMonth():fu,s=n?i.getFullYear():mu,a=n?i.getHours():yu,l=n?i.getMinutes():vu,h=n?i.getSeconds():bu,p=n?i.getMilliseconds():wu;return new Date(s,o,r,a,l,h,p)}}return null},t.prototype.findNextTimeElement=function(e){var t=this.inputElement.value,i=g(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),n=null,r=this.liCollections.length;if(!g(this.activeIndex)||!g(this.checkDateValue(i))){if("home"===e.action)n=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)n=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(var o=0;o<r;o++)if(+i<this.timeCollections[o]){n=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}}else for(o=r-1;o>=0;o--)if(+i>this.timeCollections[o]){n=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(g(n)?null:new Date(n))}},t.prototype.setTimeValue=function(e,t){var i,n,r=this.validateMinMaxRange(t),o=this.createDateObj(r);return this.getFormattedValue(o)!==(g(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=g(o)?null:o,n=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=o),this.valueWithMinutes=this.checkDateValue(e),n=new Date(+this.valueWithMinutes)),i="Gregorian"===this.calendarMode?this.globalize.formatDate(n,{format:g(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:S()?"d":"yMd"}):this.globalize.formatDate(n,{format:g(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&g(n),No.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),n},t.prototype.timeElementValue=function(e){if(!g(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null},t.prototype.timeKeyHandler=function(e){if(!(g(this.step)||this.step<=0)){var t=this.timeCollections.length;if(g(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(g(this.value)&&g(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var i=void 0;if(e.keyCode>=37&&e.keyCode<=40){var n=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=this.activeIndex===t?0:this.activeIndex,this.activeIndex=n=this.activeIndex<0?t-1:this.activeIndex,i=g(this.timeCollections[n])?this.timeCollections[0]:this.timeCollections[n]}else"home"===e.action?(this.activeIndex=0,i=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=t-1,i=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(i))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),!this.isTimePopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setTimeScrollPosition()}},t.prototype.TimeKeyActionHandle=function(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),ut([this.inputWrapper.container],"e-input-focus"),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}},t.prototype.inputKeyAction=function(e){switch(e.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(e)}},t.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"value":this.cldrDateTimeFormat(),S();this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,t.value=this.validateValue(t.value),No.setValue(this.getFormattedValue(t.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=t.value,this.setProperties({value:t.value},!0),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null);break;case"min":case"max":this.getProperty(t,o),this.updateInput();break;case"enableRtl":No.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":g(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),g(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),No.setCssClass(t.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&No.setCssClass(t.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),No.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),e.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:t.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue();break;case"placeholder":No.setPlaceholder(t.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",t.placeholder);break;case"enabled":No.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1),this.bindEvents();break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width);break;case"readonly":No.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,No.removeFloating(this.inputWrapper),No.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(t.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:t.scrollTo},!0)):this.setProperties({scrollTo:null},!0);break;default:e.prototype.onPropertyChanged.call(this,t,i)}this.hide(null)}},t.prototype.getModuleName=function(){return"datetimepicker"},t.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=g(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},uu([zt(null)],t.prototype,"timeFormat",void 0),uu([zt(30)],t.prototype,"step",void 0),uu([zt(null)],t.prototype,"scrollTo",void 0),uu([zt(1e3)],t.prototype,"zIndex",void 0),uu([zt(null)],t.prototype,"value",void 0),uu([zt(null)],t.prototype,"keyConfigs",void 0),uu([zt({})],t.prototype,"htmlAttributes",void 0),uu([zt(!1)],t.prototype,"enablePersistence",void 0),uu([zt(!0)],t.prototype,"allowEdit",void 0),uu([zt(!1)],t.prototype,"isMultiSelection",void 0),uu([zt(null)],t.prototype,"values",void 0),uu([zt(!0)],t.prototype,"showClearButton",void 0),uu([zt(null)],t.prototype,"placeholder",void 0),uu([zt(!1)],t.prototype,"strictMode",void 0),uu([zt(null)],t.prototype,"serverTimezoneOffset",void 0),uu([zt(new Date(1900,0,1))],t.prototype,"min",void 0),uu([zt(new Date(2099,11,31))],t.prototype,"max",void 0),uu([zt(null)],t.prototype,"firstDayOfWeek",void 0),uu([zt("Gregorian")],t.prototype,"calendarMode",void 0),uu([zt("Month")],t.prototype,"start",void 0),uu([zt("Month")],t.prototype,"depth",void 0),uu([zt(!1)],t.prototype,"weekNumber",void 0),uu([zt(!0)],t.prototype,"showTodayButton",void 0),uu([zt("Short")],t.prototype,"dayHeaderFormat",void 0),uu([zt(!1)],t.prototype,"openOnFocus",void 0),uu([_t()],t.prototype,"open",void 0),uu([_t()],t.prototype,"close",void 0),uu([_t()],t.prototype,"cleared",void 0),uu([_t()],t.prototype,"blur",void 0),uu([_t()],t.prototype,"focus",void 0),uu([_t()],t.prototype,"created",void 0),uu([_t()],t.prototype,"destroyed",void 0),t=uu([Gt],t)}(nu),Su=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=sl(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.write=function(e){"datepickeredit"===e.column.editType?this.obj=new nu(u(xu(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new Cu(u(xu(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params))),S()&&(this.obj.locale=this.parent.locale),this.obj.appendTo(e.element)},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}();function xu(e,t,i){var n="Dialog"!==t,r=kl(e.column.format,e.column.type),o=xl(e.column.field,e.rowData);return{floatLabelType:n?"Never":"Always",value:o=o?new Date(o):null,format:r,placeholder:n?"":e.column.headerText,enableRtl:i,enabled:ll(e.column,e.requestType,e.element)}}var ku=function(){function e(e){this.parent=e}return e.prototype.read=function(e,t){return t},e.prototype.write=function(){},e.prototype.destroy=function(){},e}(),Tu=function(){function e(e,t){this.editType={Inline:Hc,Normal:Hc,Batch:Vc,Dialog:zc},this.parent=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}return e.prototype.updateColTypeObj=function(){for(var t=this.parent.columnModel,i=0;i<t.length;i++)if(this.parent.editSettings.template||t[i].editTemplate){t[i].edit=u(new e.editCellType.templateedit(this.parent),t[i].edit||{})}else t[i].edit=u(new e.editCellType[t[i].editType&&e.editCellType[t[i].editType]?t[i].editType:"defaultedit"](this.parent,this.serviceLocator),t[i].edit||{});this.parent.log("primary_column_missing")},e.prototype.getModuleName=function(){return"edit"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=this.parent,i=(e.properties,0),n=Object.keys(e.properties);i<n.length;i++){switch(n[i]){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),t.isEdit=!1,t.refresh()}}},e.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new Hd(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},e.prototype.initialEnd=function(){this.updateColTypeObj()},e.prototype.startEdit=function(e){var t=this.parent;if(t.editSettings.allowEditing&&!t.isEdit&&"Batch"!==t.editSettings.mode){if(this.parent.element.classList.add("e-editing"),t.getSelectedRows().length)e||(e=t.getSelectedRows()[0]);else if(!e)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=e.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==e.style.display&&(this.editModule.startEdit(e),S()||(this.refreshToolbar(),t.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{})))}},e.prototype.checkLastRow=function(e,t){var i=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&t&&"add"===t.requestType&&this.parent.height>this.parent.getContentTable().scrollHeight?ut(e.querySelectorAll(".e-rowcell"),"e-lastrowadded"):i&&e&&e.classList&&ut(e.querySelectorAll(".e-rowcell"),"e-lastrowcell")},e.prototype.closeEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.querySelectorAll(".e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),S()||(this.refreshToolbar(),this.parent.notify("close-edit",{})))},e.prototype.refreshToolbar=function(){this.parent.notify(Mr,{})},e.prototype.addRecord=function(e,t){if(this.parent.editSettings.allowAdding){var i={startEdit:!0};e||this.parent.notify("virtual-scroll-add-action-begin",i),i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(e,t),S()||(this.refreshToolbar(),this.parent.notify("start-add",{})))}},e.prototype.deleteRecord=function(e,t){var i=this.parent;i.editSettings.allowDeleting&&(t||i.getSelectedRecords().length||!g(i.commandDelIndex)?i.editSettings.showDeleteConfirmDialog?this.showDialog("ConfirmDelete",this.dialogObj):this.editModule.deleteRecord(e,t):this.showDialog("DeleteOperationAlert",this.alertDObj))},e.prototype.deleteRow=function(e){this.deleteRowUid=e.getAttribute("data-uid");var t=this.parent.getRowObjectFromUID(this.deleteRowUid);g(t)||this.deleteRecord(null,t.data)},e.prototype.endEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(g(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify("editNextValCell",{}),g(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},e.prototype.updateCell=function(e,t,i){this.editModule.updateCell(e,t,i)},e.prototype.updateRow=function(e,t){this.editModule.updateRow(e,t)},e.prototype.batchCancel=function(){this.closeEdit()},e.prototype.batchSave=function(){this.endEdit()},e.prototype.editCell=function(e,t){this.editModule.editCell(e,t)},e.prototype.editFormValidate=function(){return!!this.formObj&&this.formObj.validate()},e.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},e.prototype.getCurrentEditCellData=function(){var e=this.getCurrentEditedData(this.formObj.element,{});return e[Object.keys(e)[0]]},e.prototype.saveCell=function(){this.editModule.saveCell()},e.prototype.endEditing=function(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()},e.prototype.showDialog=function(e,t){t.content="<div>"+this.l10n.getConstant(e)+"</div>",t.dataBind(),t.show()},e.prototype.getValueFromType=function(e,t){var i=t;switch(e.type){case"number":i=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":"booleanedit"!==e.editType&&(i=t===this.l10n.getConstant("True")||!0===t);break;case"date":case"datetime":"datepickeredit"!==e.editType&&"datetimepickeredit"!==e.editType&&t&&t.length?i=new Date(t):""===t&&(i=null)}return i},e.prototype.destroyToolTip=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-griderror"));e<t.length;e++){Ct(t[e])}this.parent.getContent().firstElementChild.style.position="relative"},e.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},e.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},e.prototype.alertClick=function(){this.alertDObj.hide()},e.prototype.dlgWidget=function(e,t){var i=this.parent.createElement("div",{id:this.parent.element.id+t});this.parent.element.appendChild(i);var n={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"}};n.buttons=e;var r=new Fo(n);return r.isStringTemplate=!0,r.appendTo(i),r},e.prototype.dlgCancel=function(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide()},e.prototype.dlgOk=function(e){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&(this.editModule.addCancelWhilePaging(),S()&&this.parent.isServerRendered&&this.editModule.closeEdit()),this.executeAction()}this.dlgCancel()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Dr,this.onPropertyChanged,this),this.parent.on(Sr,this.initialEnd,this),this.parent.on(Pr,this.keyPressHandler,this),this.parent.on(Lr,this.updateColTypeObj,this),this.parent.on("tooltip-destroy",this.destroyToolTip,this),this.parent.on(Or,this.preventBatch,this),this.parent.on("destroy-form",this.destroyForm,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(wr,this.actionBeginFunction),this.parent.addEventListener("actionComplete",this.actionCompleteFunction))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Dr,this.onPropertyChanged),this.parent.off(Sr,this.initialEnd),this.parent.off(Pr,this.keyPressHandler),this.parent.off(Lr,this.updateColTypeObj),this.parent.off("tooltip-destroy",this.destroyToolTip),this.parent.off(Or,this.preventBatch),this.parent.off("destroy-form",this.destroyForm),this.parent.removeEventListener("actionComplete",this.actionCompleteFunction),this.parent.removeEventListener(wr,this.actionBeginFunction))},e.prototype.actionComplete=function(e){["add","beginEdit","save","delete","cancel"].indexOf(e.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===e.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()},e.prototype.getCurrentEditedData=function(e,t){var i=this.parent;if(i.editSettings.template){for(var n=[].slice.call(e.elements),r=0;r<n.length;r++)if(n[r].hasAttribute("name")&&"e-multi-hidden"!==n[r].className||n[r].classList.contains("e-multiselect")){var o=n[r].hasAttribute("name")?al(n[r].getAttribute("name")):al(n[r].getAttribute("id")),s=i.getColumnByField(o)||{field:o,type:n[r].getAttribute("type")},l=void 0;"checkbox"===s.type||"boolean"===s.type?l=n[r].checked:n[r].value?(l=n[r].value,n[r].ej2_instances&&n[r].ej2_instances.length&&!g(n[r].ej2_instances[0].value)&&(n[r].blur(),l=n[r].ej2_instances[0].value,"date"!==s.type&&"dateTime"!==s.type&&"datetime"!==s.type||!n[r].ej2_instances[0].isServerRendered||(l=n[r].value))):n[r].ej2_instances&&(l=n[r].ej2_instances[0].value),s.edit&&"string"==typeof s.edit.read?l=a(s.edit.read,window)(n[r],l):s.edit&&s.edit.read&&(l=s.edit.read(n[r],l)),l=i.editModule.getValueFromType(s,l),"radio"===n[r].type?n[r].checked&&wn.setValue(s.field,l,t):wn.setValue(s.field,l,t)}return t}for(var h=i.columnModel.filter((function(e){return e.editTemplate})),p=0;p<h.length;p++)if(e[sl(h[p].field)]){var d=[].slice.call(e[sl(h[p].field)]),c=(d=d.length?d:[e[sl(h[p].field)]]).filter((function(e){return!g(e.ej2_instances)}));0===c.length&&(c=d.filter((function(e){return e.hasAttribute("name")})));for(r=0;r<c.length;r++){l=this.getValue(h[p],c[r],t);wn.setValue(h[p].field,l,t)}}for(var u=[].slice.call(e.querySelectorAll(".e-field")),f=0,m=u.length;f<m;f++){var y=i.getColumnByUid(u[f].getAttribute("e-mappinguid"));if(y&&y.field){l=this.getValue(y,u[f],t);wn.setValue(y.field,l,t)}}return t},e.prototype.getValue=function(e,t,i){var n=!t.ej2_instances||S()&&t.ej2_instances[0].isServerRendered&&("date"===e.type||"datetime"===e.type)?t.value:t.ej2_instances[0].value,r=this.parent,o=e.edit.read;return"checkbox"!==e.type&&"boolean"!==e.type||(n=t.checked),"string"==typeof o?(o=a(o,window),n=r.editModule.getValueFromType(e,o(t,n))):n=r.editModule.getValueFromType(e,e.edit.read(t,n)),g(i[e.field])&&""===n&&(n=i[e.field]),n},e.prototype.onActionBegin=function(e){if("columnstate"===e.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{"Batch"===this.parent.editSettings.mode||!this.formObj||this.formObj.isDestroyed||-1!==["filterafteropen","filterbeforeopen","filterchoicerequest","save","infiniteScroll"].indexOf(e.requestType)||e.cancel||(this.destroyWidgets(),this.destroyForm())}},e.prototype.destroyWidgets=function(e){this.parent.editSettings.template&&(this.parent.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),(e=e||this.parent.getVisibleColumns()).some((function(e){return!g(e.editTemplate)}))&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(var t=0,i=e;t<i.length;t++){var n=i[t],r=n.edit.destroy;S()&&n.editTemplate&&(Ke(this.parent.element.id+n.uid+"editTemplate"),Ue(this.parent.element.id+n.uid+"editTemplate","EditTemplate",n,!1)),n.edit.destroy&&("string"==typeof r?(r=a(r,window))():n.edit.destroy())}for(var o=[].slice.call(this.formObj.element.elements),s=0;s<o.length;s++)o[s].hasAttribute("name")&&o[s].ej2_instances&&o[s].ej2_instances.length&&!o[s].ej2_instances[0].isDestroyed&&o[s].ej2_instances[0].destroy()},e.prototype.destroyForm=function(){this.destroyToolTip(),this.formObj&&!this.formObj.isDestroyed&&this.formObj.destroy(),this.destroyToolTip()},e.prototype.destroy=function(){var e=this.parent.element;if(e){var t=!(!e.querySelector(".e-gridheader")||!e.querySelector(".e-gridcontent"));t&&this.destroyForm(),this.removeEventListener();var i=this.dialogObj.element;i.childElementCount>0&&(this.dialogObj.destroy(),Ct(i)),(i=this.alertDObj.element).childElementCount>0&&(this.alertDObj.destroy(),Ct(i)),t&&this.editModule&&this.editModule.destroy()}},e.prototype.keyPressHandler=function(e){switch(e.action){case"insert":this.addRecord();break;case"delete":"INPUT"===e.target.tagName&&!e.target.classList.contains("e-checkselect")||document.querySelector(".e-popup-open")||this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":Ka(e.target,"e-unboundcelldiv")||"Batch"===this.parent.editSettings.mode||!(Ka(e.target,"e-gridcontent")||this.parent.frozenRows&&Ka(e.target,"e-headercontent"))||document.querySelectorAll(".e-popup-open").length||(e.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.closeEdit())}},e.prototype.preventBatch=function(e){this.preventObj=e,this.showDialog("BatchSaveLostChanges",this.dialogObj)},e.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},e.prototype.applyFormValidation=function(e){var t=this.parent,i=t.getFrozenColumns(),n="Dialog"!==this.parent.editSettings.mode?t.element.querySelector(".e-gridform"):document.querySelector("#"+t.element.id+"_dialogEdit_wrapper").querySelector(".e-gridform"),r=t.element.querySelectorAll(".e-gridform")[1],o={},s={};e=e||t.getColumns();for(var a=0;a<e.length;a++)e[a].visible&&(S()&&e[a].editTemplate||(a<i&&e[a].validationRules?o[sl(e[a].field)]=e[a].validationRules:a>=i&&e[a].validationRules&&(s[sl(e[a].field)]=e[a].validationRules)));i&&"Dialog"!==this.parent.editSettings.mode?this.parent.editModule.mFormObj=this.createFormObj(r,s):o=u(o,s),S()&&this.parent.editSettings.template?this.parent.editModule.formObj=this.createFormObj(n,{}):this.parent.editModule.formObj=this.createFormObj(n,o)},e.prototype.createFormObj=function(e,t){var i=this;return new Uc(e,{rules:t,locale:this.parent.locale,validationComplete:function(e){i.validationComplete(e)},customPlacement:function(e,t){var n=e.getAttribute("e-mappinguid"),r={column:i.parent.getColumnByUid(n),error:t,inputElement:e,value:e.value};i.valErrorPlacement(e,t),i.parent.notify("validation-custom-placement",r)}})},e.prototype.valErrorPlacement=function(e,t){if(this.parent.isEdit){var i=t.getAttribute("for"),n=this.getElemTable(e).querySelector("#"+i+"_Error");n?n.querySelector(".e-tip-content").innerHTML=t.outerHTML:this.createTooltip(e,t,i,"")}},e.prototype.getElemTable=function(e){var t;return"Dialog"!==this.parent.editSettings.mode&&(t=this.parent.frozenRows&&this.parent.frozenRows>(parseInt(Tt(e,".e-row").getAttribute("aria-rowindex"),10)||0)),"Dialog"!==this.parent.editSettings.mode?t?this.parent.getHeaderTable():this.parent.getContentTable():document.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper")},e.prototype.validationComplete=function(e){if(this.parent.isEdit){var t=this.getElemTable(e.element).querySelector("#"+e.inputName+"_Error");t&&("failure"===e.status?t.style.display="":t.style.display="none")}},e.prototype.createTooltip=function(e,t,i,n){var r=this.parent.getContent().firstElementChild;this.parent.getFrozenColumns()&&(r=this.parent.getMovableVirtualContent());var o,s,a=r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth,l="Dialog"!==this.parent.editSettings.mode,h=Tt(e,".e-rowcell"),p=Tt(e,".e-row"),d=this.parent.getContent().querySelector(".e-frozencontent"),c=!1,u=!1,g=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,f=d?[].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll(".e-row")):[].slice.call(this.parent.getContent().querySelectorAll(".e-row"));if("Batch"===this.parent.editSettings.mode&&g>1&&f.length>=g&&f[f.length-1].getAttribute("aria-rowindex")===p.getAttribute("aria-rowindex")&&(u=!0),l){if(this.parent.frozenRows){var m=this.parent.getFrozenColumns()?this.parent.getFrozenVirtualHeader().querySelector("tbody").children:this.parent.getHeaderTable().querySelector("tbody").children;c=(o=m.length>(parseInt(p.getAttribute("aria-rowindex"),10)||0))&&parseInt(p.getAttribute("aria-rowindex"),10)===m.length-1}(c||g>1&&f.length>=g&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||h.classList.contains("e-lastrowcell")&&!p.classList.contains("e-addedrow"))||u)&&(s=!0)}var y=l?o?this.parent.getHeaderTable():this.parent.getContentTable():document.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper").querySelector(".e-dlg-content"),v=y.getBoundingClientRect(),b=l?this.parent.element.getBoundingClientRect().left:v.left,w=Tt(e,"td"),C=w?w.getBoundingClientRect():e.parentElement.getBoundingClientRect(),S=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+n+";top:"+((o?C.top+C.height:C.bottom-v.top-(this.parent.getFrozenColumns()?d.scrollTop:0))+y.scrollTop+9)+"px;left:"+(C.left-b+y.scrollLeft+C.width/2)+"px;max-width:"+C.width+"px;text-align:center;"});l&&v.left<b&&(S.style.left=parseInt(S.style.left,10)-v.left+b+"px");var x,k=this.parent.createElement("div",{className:"e-tip-content"});(k.appendChild(t),s?((x=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):((x=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),S.appendChild(k),S.appendChild(x),(this.parent.getFrozenColumns()||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode)?(("Normal"===this.parent.editSettings.mode?Tt(e,".e-editcell"):Tt(e,".e-table")).style.position="relative",S.style.position="absolute","Batch"===this.parent.editSettings.mode||Tt(e,".e-frozencontent")||Tt(e,".e-frozenheader")||this.parent.frozenRows&&!this.parent.getFrozenColumns()?this.formObj.element.appendChild(S):this.mFormObj.element.appendChild(S)):this.formObj.element.appendChild(S);!s&&l&&r.getBoundingClientRect().bottom<C.bottom+C.height&&(r.scrollTop=r.scrollTop+S.offsetHeight+x.scrollHeight);var T=parseInt(document.defaultView.getComputedStyle(S,null).getPropertyValue("font-size"),10);if(S.getBoundingClientRect().width<C.width&&S.querySelector("label").getBoundingClientRect().height/(1.2*T)>=2&&(S.style.width=S.style.maxWidth),!this.parent.getFrozenColumns()&&!this.parent.frozenRows||"Normal"!==this.parent.editSettings.mode&&"Batch"!==this.parent.editSettings.mode?S.style.left=parseInt(S.style.left,10)-S.offsetWidth/2+"px":S.style.left=w.offsetLeft+(w.offsetWidth/2-S.offsetWidth/2)+"px",l&&!a&&!this.parent.allowPaging||this.parent.getFrozenColumns()||this.parent.frozenRows){r.style.position="static";var D=Tn(w,S);S.style.top=D.top+C.height+9+"px"}if(s){if(!a||this.parent.getFrozenColumns()||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)S.style.bottom=C.height+9+"px";else{var E=r.scrollWidth>r.offsetWidth?rl():0;S.style.bottom=this.parent.height-r.querySelector("table").offsetHeight-E+C.height+9+"px"}if(f.length<g&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){var R=(this.parent.frozenRows?this.parent.frozenRows+(f.length-1):f.length-1)*this.parent.getRowHeight(),P=this.parent.getContent().clientHeight-R;S.style.bottom=P+9+"px"}S.style.top=null}},e.prototype.checkColumnIsGrouped=function(e){return!(e.visible||this.parent.groupSettings.columns.indexOf(e.field)>-1)},e.AddEditors=function(t){e.editCellType=u(e.editCellType,t)},e.editCellType={dropdownedit:Sc,numericedit:Ic,datepickeredit:Su,datetimepickeredit:Su,booleanedit:Gd,defaultedit:Bc,templateedit:ku},e}();function Du(e,t,i,n,r,o,s){var a,l,h,p=e.value,d=e.action,c=t.grid.getPrimaryKeyFieldNames()[0],f=t.dataSource instanceof yn?t.dataSource.dataSource.json:t.dataSource,m=[],y=p,v=!1;if("Batch"===t.editSettings.mode&&(h=t.grid.editModule.getBatchChanges()),"add"===d||"batchsave"===d&&"Batch"===t.editSettings.mode&&h.addedRecords.length){var b=function(e,t,i,n,r,o,s){var a,l=!1,h=i.grid.getCurrentViewRecords();switch(a=Lh(a=u({},e.value)),i.editSettings.newRowPosition){case"Top":t.unshift(a),l=!0;break;case"Bottom":t.push(a),l=!0;break;case"Above":a=g(s)?Lh(a=u({},h[r+1])):Lh(a=u({},s));break;case"Below":case"Child":if(g(s)){var p=i.grid.getPrimaryKeyFieldNames()[0],d=h[r];a=Lh(a=!g(d)&&d[p]===e.value[p]||-1!==o?u({},d):u({},e.value))}else a=Lh(a=u({},s));-1===o&&(t.unshift(a),l=!0)}return{value:a,isSkip:l}}(e,f,t,0,n,r,s);p=b.value,v=b.isSkip}if(p instanceof Array?m=Mh(p):m.push(u({},p)),!v&&("add"!==d||"Top"!==t.editSettings.newRowPosition&&"Bottom"!==t.editSettings.newRowPosition))for(var w=0;w<m.length;w++){"object"==typeof m[w][c]&&(m[w]=m[w][c]);var C=m[w].taskData?Object.keys(m[w].taskData):Object.keys(m[w]);a=f.length;for(var S=function(){if(f[a][c]===m[w][c]){if("delete"!==d){if("edit"===d){for(l=0;l<C.length;l++)if(f[a].hasOwnProperty(C[l])&&("Cell"!==t.editSettings.mode||!g(h)&&0===h.changedRecords.length||C[l]===o)){var e=Oh(t,m[w].uniqueID);f[a][C[l]]=m[w][C[l]],e&&e.taskData&&(e.taskData[C[l]]=e[C[l]]=f[a][C[l]])}}else if("add"===d||"batchsave"===d){var r=void 0;"Child"===t.editSettings.newRowPosition?i?(y.taskData[t.parentIdMapping]=f[a][t.idMapping],f.splice(a+1,0,y.taskData)):(f[a].hasOwnProperty(t.childMapping)||(f[a][t.childMapping]=[]),f[a][t.childMapping].push(y.taskData),Ru(c,f[a],d,t,i,y)):"Below"===t.editSettings.newRowPosition?(f.splice(a+1,0,y.taskData),Ru(c,f[a+1],d,t,i,y)):n?"Above"===t.editSettings.newRowPosition&&(f.splice(a,0,y.taskData),Ru(c,f[a],d,t,i,y)):(r=0,f.splice(r,0,y.taskData))}return"break"}var s=f[a];if(f.splice(a,1),i){if(!g(s[t.parentIdMapping]))for(var p=t.flatData.filter((function(e){return e[t.idMapping]===s[t.parentIdMapping]}))[0],u=p?p[t.childMapping]:[],v=u.length-1;v>=0;v--)if(u[v][t.idMapping]===s[t.idMapping]){u.splice(v,1),u.length||(p.hasChildRecords=!1,Ru(c,p,d,t,i));break}return"break"}}else g(f[a][t.childMapping])||Eu(f[a][t.childMapping],m[w],d,c,t,i,y,o)&&Ru(c,f[a],d,t,i)};a--&&a>=0;){if("break"===S())break}}}function Eu(e,t,i,n,r,o,s,a){for(var l=!1,h=e.length;h--&&h>=0;)if(e[h][n]===t[n]||o&&e[h][r.parentIdMapping]===t[r.idMapping]){if("edit"===i){for(var p=Object.keys(t),d=Oh(r,t.uniqueID),c=0;c<p.length;c++)if(e[h].hasOwnProperty(p[c])&&("Cell"!==r.editSettings.mode||p[c]===a)&&(d[p[c]]=d.taskData[p[c]]=e[h][p[c]]=t[p[c]],"Cell"===r.editSettings.mode)){r.grid.editModule.editModule.editRowIndex=t.index,r.grid.editModule.editModule.updateCurrentViewData(t)}break}if("add"===i||"batchsave"===i)"Child"===r.editSettings.newRowPosition?o?(s[r.parentIdMapping]=e[h][r.idMapping],e.splice(h+1,0,s),Ru(n,e[h],i,r,o,s)):(e[h].hasOwnProperty(r.childMapping)||(e[h][r.childMapping]=[]),e[h][r.childMapping].push(s.taskData),Ru(n,e[h],i,r,o,s)):"Above"===r.editSettings.newRowPosition?(e.splice(h,0,s.taskData),Ru(n,e[h],i,r,o,s)):"Below"===r.editSettings.newRowPosition&&(e.splice(h+1,0,s.taskData),Ru(n,e[h],i,r,o,s));else{e[h].parentItem;e.splice(h,1),e.length||(l=!0)}}else g(e[h][r.childMapping])||Eu(e[h][r.childMapping],t,i,n,r,o,s,a)&&Ru(n,e[h],i,r,o);return l}function Ru(e,t,i,n,r,o)
 
 





 {if("Above"!==n.editSettings.newRowPosition&&"Below"!==n.editSettings.newRowPosition||"add"!==i&&"batchsave"!==i||g(o.parentItem)){var s,l=n.grid.getCurrentViewRecords();if(l.map((function(i,n){i[e]!==t[e]||(s=n)})),g(s)||(t=l[s]),n.enableVirtualization&&g(t)&&!g(o)&&(t=a("uniqueIDCollection."+o.parentUniqueID,n)),t.hasChildRecords=!1,"add"===i||"batchsave"===i){t.expanded=!0,t.hasChildRecords=!0,n.sortSettings.columns.length&&g(o)&&(o=l.filter((function(e){return e.parentUniqueID===t.uniqueID?e:null})));var h=o?o instanceof Array?o[0]:o:l[s+1];"Below"!==n.editSettings.newRowPosition&&(t.hasOwnProperty("childRecords")?g(o)||t[e]===o[e]||t.childRecords.push(o):t.childRecords=[],-1===t.childRecords.indexOf(h)&&t[e]!==o[e]&&t.childRecords.unshift(h),r&&(t.hasOwnProperty(n.childMapping)||(t[n.childMapping]=[]),-1===t[n.childMapping].indexOf(h)&&t[e]!==o[e]&&t[n.childMapping].unshift(h)))}for(var p=n.grid.getPrimaryKeyFieldNames()[0],d=n.grid.dataSource instanceof yn?n.grid.dataSource.dataSource.json:n.grid.dataSource,c=0;c<d.length;c++)if(d[c][p]===t[p]){d[c]=t;break}n.grid.setRowData(e,t);var u=n.getRowByIndex(s);"Batch"===n.editSettings.mode&&(u=n.getRows()[n.grid.getRowIndexByPrimaryKey(t[e])]);var f=void 0;(n.frozenRows||n.getFrozenColumns())&&(f=n.getMovableRowByIndex(s)),(n.enableVirtualization||g(u))&&g(f)||n.renderModule.cellRender({data:t,cell:u.cells[n.treeColumnIndex]?u.cells[n.treeColumnIndex]:f.cells[n.treeColumnIndex-n.frozenColumns],column:n.grid.getColumns()[n.treeColumnIndex],requestType:i})}else{Oh(n,o.parentItem.uniqueID).childRecords.push(o)}}var Pu,Iu,Mu=function(){function e(e){this.batchChildCount=0,this.addedRecords="addedRecords",this.deletedRecords="deletedRecords",this.batchAddedRecords=[],this.batchDeletedRecords=[],this.batchAddRowRecord=[],this.parent=e,this.isSelfReference=!g(e.parentIdMapping),this.batchRecords=[],this.currentViewRecords=[],this.isAdd=!1,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("cellSaved",this.cellSaved,this),this.parent.on("batchAdd",this.batchAdd,this),this.parent.on("beforeBatchAdd",this.beforeBatchAdd,this),this.parent.on("batchSave",this.batchSave,this),this.parent.on("beforeBatchDelete",this.beforeBatchDelete,this),this.parent.on("beforeBatchSave",this.beforeBatchSave,this),this.parent.on("batchPageAction",this.batchPageAction,this),this.parent.on("batchCancelAction",this.batchCancelAction,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("cellSaved",this.cellSaved),this.parent.off("batchAdd",this.batchAdd),this.parent.off("batchSave",this.batchSave),this.parent.off("beforeBatchAdd",this.beforeBatchAdd),this.parent.off("beforeBatchDelete",this.beforeBatchDelete),this.parent.off("beforeBatchSave",this.beforeBatchSave),this.parent.off("batchPageAction",this.batchPageAction),this.parent.off("batchCancelAction",this.batchCancelAction))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getBatchRecords=function(){return this.batchRecords},e.prototype.getAddRowIndex=function(){return this.addRowIndex},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.getBatchChildCount=function(){return this.batchChildCount},e.prototype.batchPageAction=function(){var e,t=this.parent.grid.dataSource instanceof yn?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,i=this.parent.grid.getPrimaryKeyFieldNames()[0];if(!g(this.batchAddedRecords)&&this.batchAddedRecords.length)for(var n=0;n<this.batchAddedRecords.length;n++)e=t.map((function(e){return e[i]})).indexOf(this.batchAddedRecords[n][i]),t.splice(e,1);this.batchAddedRecords=this.batchRecords=this.batchAddRowRecord=this.batchDeletedRecords=this.currentViewRecords=[]},e.prototype.cellSaved=function(e){var t=e.cell.cellIndex,i=this.parent.frozenColumns||this.parent.getFrozenColumns();if(i&&e.columnObject.index>i&&(t+=i),t===this.parent.treeColumnIndex&&this.parent.renderModule.cellRender({data:e.rowData,cell:e.cell,column:this.parent.grid.getColumnByIndex(e.cell.cellIndex)}),this.isAdd&&"Batch"===this.parent.editSettings.mode&&"Bottom"!==this.parent.editSettings.newRowPosition){var n,r=this.parent.grid.dataSource instanceof yn?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,o=void 0,s=this.parent.grid.getPrimaryKeyFieldNames()[0],a=void 0,h=void 0;n=this.selectedIndex>-1?this.batchRecords[this.addRowIndex].parentItem:null;var p=void 0,d=void 0,f=void 0,m="Top"===this.parent.editSettings.newRowPosition||-1===this.selectedIndex?0:"Above"===this.parent.editSettings.newRowPosition?this.addRowIndex:this.addRowIndex+1;if(m=this.getActualRowObjectIndex(m),this.newBatchRowAdded){if(this.batchRecords.length&&(p=this.batchRecords[this.addRowIndex][this.parent.idMapping],f=this.batchRecords[this.addRowIndex][this.parent.parentIdMapping],this.batchRecords[this.addRowIndex].parentItem&&(d=this.batchRecords[this.addRowIndex].parentItem.uniqueID)),this.batchAddedRecords=Mh(this.batchAddedRecords),this.batchAddRowRecord=Mh(this.batchAddRowRecord),this.batchAddRowRecord.push(this.batchRecords[this.addRowIndex]),(o=this.parent.grid.getRowsObject()[m].changes).uniqueID=Za(this.parent.element.id+"_data_"),l("uniqueIDCollection."+o.uniqueID,o,this.parent),!o.hasOwnProperty("level")){if(this.batchIndex=-1===this.selectedIndex?0:this.batchIndex,"Child"===this.parent.editSettings.newRowPosition){if(o.primaryParent=n,this.selectedIndex>-1){o.parentItem=u({},this.batchRecords[this.addRowIndex]),o.parentUniqueID=o.parentItem.uniqueID,delete o.parentItem.childRecords,delete o.parentItem[this.parent.childMapping],o.level=o.parentItem.level+1,o.index=this.batchIndex;var y=Ph(this.batchRecords[this.addRowIndex]).length;v=g(v=Ph(this.batchRecords[this.addRowIndex])[y-1])?this.batchRecords[this.addRowIndex]:v,a=r.map((function(e){return e[s]})).indexOf(v[s]),this.isSelfReference&&(o[this.parent.parentIdMapping]=p),Ru(s,o.parentItem,"add",this.parent,this.isSelfReference,o)}}else if(("Above"===this.parent.editSettings.newRowPosition||"Below"===this.parent.editSettings.newRowPosition)&&!g(this.batchRecords[this.addRowIndex])){if(o.level=this.batchRecords[this.addRowIndex].level,o.level&&this.selectedIndex>-1&&(o.parentItem=n,o.parentUniqueID=d,delete o.parentItem.childRecords,delete o.parentItem[this.parent.childMapping]),o.index="Below"===this.parent.editSettings.newRowPosition?this.batchIndex:this.batchIndex-1,"Below"===this.parent.editSettings.newRowPosition&&this.selectedIndex>-1){y=Ph(this.batchRecords[this.addRowIndex]).length;v=g(v=Ph(this.batchRecords[this.addRowIndex])[y-1])?this.batchRecords[this.addRowIndex]:v,a=r.map((function(e){return e[s]})).indexOf(v[s])}if("Above"===this.parent.editSettings.newRowPosition&&this.selectedIndex>-1){var v=this.batchRecords[this.addRowIndex];a=r.map((function(e){return e[s]})).indexOf(v[s])}this.isSelfReference&&(o[this.parent.parentIdMapping]=f)}o.index=-1===o.index?0:o.index,o.hasChildRecords=!1,o.childRecords=[],this.batchRecords.splice(o.index,0,o),this.currentViewRecords.splice(o.index,0,o),h=a||o.index,"Above"!==this.parent.editSettings.newRowPosition&&(h=0===o.index?h:h+1),r.splice(h,0,o),this.batchAddedRecords.push(o)}this.parent.grid.getRowsObject()[m].data=o,this.newBatchRowAdded=!1}(this.parent.frozenColumns||this.parent.getFrozenColumns()&&"add"===this.parent.grid.getRowsObject()[m].edit)&&c(this.currentViewRecords[m],this.parent.grid.getRowsObject()[m].changes)}},e.prototype.beforeBatchAdd=function(e){if("Cell"===this.parent.editSettings.mode&&this.parent.editModule.isTabLastRow)return e.cancel=!0,void(this.parent.editModule.isTabLastRow=!1);this.selectedIndex=this.parent.grid.selectedRowIndex,this.addRowIndex=this.parent.grid.selectedRowIndex>-1?this.parent.grid.selectedRowIndex:0,this.addRowRecord=this.parent.getSelectedRecords()[0]},e.prototype.batchAdd=function(e){if("Bottom"!==this.parent.editSettings.newRowPosition){this.isAdd=!0,this.newBatchRowAdded=!0;var t=0;if(this.batchRecords.length||(this.batchAddedRecords=[],this.batchRecords=Mh(this.parent.grid.getCurrentViewRecords()),this.currentViewRecords=Mh(this.parent.grid.getCurrentViewRecords())),"Top"!==this.parent.editSettings.newRowPosition){var i=this.parent.grid.getCurrentViewRecords();"Batch"===this.parent.editSettings.mode&&(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)&&(i=this.batchRecords),this.updateChildCount(i),this.parent.notify("beginAdd",{}),this.batchChildCount=0}this.updateRowIndex();var n=a("focusModule",this.parent.grid),r=this.parent.getContentTable();this.parent.getBatchChanges()[this.deletedRecords].length&&"Above"===this.parent.editSettings.newRowPosition?(t=e.row.rowIndex,n.getContent().matrix.matrix=this.matrix):t=r.getElementsByClassName("e-batchrow")[0].rowIndex,n.getContent().matrix.current=[t,n.getContent().matrix.current[1]]}},e.prototype.beforeBatchDelete=function(e){this.batchRecords.length||(this.batchRecords=Mh(this.parent.grid.getCurrentViewRecords()),this.currentViewRecords=Mh(this.parent.grid.getCurrentViewRecords()));var t=a("focusModule",this.parent.grid);this.matrix=t.getContent().matrix.matrix,this.parent=this.parent;var i,n,r=[],o=this.parent.grid.getPrimaryKeyFieldNames()[0],s=Ph(n=this.parent.grid.getSelectedRecords()[this.parent.grid.getSelectedRecords().length-1]);if(s.length)for(var l=0;l<s.length;l++){var h=this.parent.grid.getRowIndexByPrimaryKey(s[l][o]);r.push(this.parent.grid.getRows()[h]),(this.parent.frozenRows||this.parent.frozenColumns||this.parent.getFrozenColumns())&&r.push(this.parent.grid.getMovableRows()[h])}if(!g(n.parentItem)){var p=Oh(this.parent,n.parentItem.uniqueID);if(!g(p)&&p.hasChildRecords){var d=p.childRecords.indexOf(n);p.childRecords.splice(d,1)}this.batchDeletedRecords=Mh(this.batchDeletedRecords),this.batchDeletedRecords.push(n)}s.push(n),i=s;for(l=0;l<i.length;l++){var c=this.batchRecords.map((function(e){return e[o]})).indexOf(i[l][o]);-1!==c&&this.batchRecords.splice(c,1)}for(l=0;l<r.length;l++)g(r[l])||this.parent.grid.selectionModule.selectedRecords.push(r[l])},e.prototype.updateRowIndex=function(){for(var e=this.parent.grid.getDataRows(),t=0;t<e.length;t++)e[t].setAttribute("aria-rowindex",t.toString());if(this.parent.frozenRows||this.parent.getFrozenColumns()||this.parent.frozenColumns){var i=this.parent.grid.getMovableDataRows();for(t=0;t<i.length;t++)i[t].setAttribute("aria-rowindex",t.toString())}},e.prototype.updateChildCount=function(e){for(var t=this.parent.grid.getPrimaryKeyFieldNames()[0],i="Child"===this.parent.editSettings.newRowPosition?"primaryParent":"parentItem",n=0;n<this.parent.getBatchChanges().addedRecords.length;n++)g(this.parent.getBatchChanges().addedRecords[n][i])||this.parent.getBatchChanges().addedRecords[n][i][t]===e[this.addRowIndex][t]&&(this.batchChildCount=this.batchChildCount+1)},e.prototype.beforeBatchSave=function(e){var t=e.batchChanges.changedRecords;if(e.batchChanges.changedRecords.length)for(var i=0;i<t.length;i++)Du({value:t[i],action:"edit"},this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,void 0);if(e.batchChanges.deletedRecords.length){var n=e.batchChanges.deletedRecords;for(i=0;i<n.length;i++){this.deleteUniqueID(n[i].uniqueID);for(var r=Ph(n[i]),o=0;o<r.length;o++)this.deleteUniqueID(r[o].uniqueID);e.batchChanges.deletedRecords=e.batchChanges.deletedRecords.concat(r)}}this.isAdd=!1},e.prototype.deleteUniqueID=function(e){delete this.parent.uniqueIDFilterCollection[e];delete this.parent.uniqueIDCollection[e]},e.prototype.batchCancelAction=function(){var e,t=this.parent.grid.getCurrentViewRecords(),i=this.parent.grid.dataSource instanceof yn?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,n=this.parent.grid.getPrimaryKeyFieldNames()[0];if(!g(this.parent.targetElement)){var r=this.parent.targetElement.closest("tr");this.parent.collapseRow(r),this.parent.targetElement=null}if(!g(this.batchAddedRecords))for(var o=0;o<this.batchAddedRecords.length;o++)if(e=i.map((function(e){return e[n]})).indexOf(this.batchAddedRecords[o][n]),i.splice(e,1),"Child"===this.parent.editSettings.newRowPosition&&(e=t.map((function(e){return e[n]})).indexOf(this.batchAddedRecords[o].parentItem?this.batchAddedRecords[o].parentItem[n]:this.batchAddedRecords[o][n]),!g(t[e])))for(var s=t[e].childRecords,a=0;s&&a<s.length;a++)s[a][n]===this.batchAddedRecords[o][n]&&t[e].childRecords.splice(a,1);if(!g(this.batchDeletedRecords))for(o=0;o<this.batchDeletedRecords.length;o++)if(!g(this.batchDeletedRecords[o].parentItem)){e=t.map((function(e){return e[n]})).indexOf(this.batchDeletedRecords[o].parentItem[n]);var l=0===this.batchDeletedRecords[o].index?this.batchDeletedRecords[o].index:this.batchDeletedRecords[o].index-1;g(t[e])||t[e].childRecords.splice(l,0,this.batchDeletedRecords[o])}this.batchAddedRecords=this.batchRecords=this.batchAddRowRecord=this.currentViewRecords=[],this.batchRecords=Mh(this.parent.grid.getCurrentViewRecords()),this.batchIndex=0,this.currentViewRecords=Mh(this.parent.grid.getCurrentViewRecords()),this.batchDeletedRecords=[],this.parent.grid.renderModule.refresh()},e.prototype.batchSave=function(e){if("Batch"===this.parent.editSettings.mode){var t=void 0,i=this.parent.getBatchChanges(),n=this.parent.grid.dataSource instanceof yn?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,r=this.parent.grid.getCurrentViewRecords(),o=this.parent.grid.getPrimaryKeyFieldNames()[0],s=i.addedRecords,a=void 0,h=void 0,p=void 0;if(s.length>1&&"Bottom"!==this.parent.editSettings.newRowPosition&&s.reverse(),"Bottom"!==this.parent.editSettings.newRowPosition)if(n.splice(n.length-s.length,s.length),this.parent.allowPaging){var d=Mh(n),c=d.map((function(e){return e[o]})).indexOf(r[0][o]),f=c+this.parent.grid.pageSettings.pageSize;r=d.splice(c,f)}else r.length>s.length&&r.splice(r.length-s.length,s.length);for(t=0;t<s.length;t++){var m=u({},s[t]);if(delete m.parentItem,delete m.uniqueID,delete m.index,delete m.level,delete m.hasChildRecords,delete m.childRecords,delete m.parentUniqueID,g(m.primaryParent)||delete m.primaryParent,s[t].taskData=m,g(p=this.batchAddRowRecord[t])&&(p=this.batchAddRowRecord[t-1]),this.isSelfReference&&(g(s[t].parentItem)||Ru(o,s[t].parentItem,"add",this.parent,this.isSelfReference,s[t])),g(p)||(h=p.index),"Top"!==this.parent.editSettings.newRowPosition&&"Bottom"!==this.parent.editSettings.newRowPosition&&g(s[t].parentItem)&&-1===this.selectedIndex&&(a=-1,p=null),Du({value:s[t],action:"add"},this.parent,this.isSelfReference,h,a,void 0,p),a=null,"Child"===this.parent.editSettings.newRowPosition&&!g(s[t].parentItem))for(var y=r.map((function(e){return e[o]})).indexOf(s[t].parentItem[o]),v=r[y].childRecords,b=0;b<v.length;b++)v[b][o]===s[t][o]&&r[y].childRecords.splice(b,1)}if(i.deletedRecords.length)for(t=0;t<i.deletedRecords.length;t++)Du({value:i.deletedRecords[t],action:"delete"},this.parent,this.isSelfReference,h,a,void 0,p);this.parent.parentData=[];for(var w=0;w<n.length;w++)n[w].index=w,l("uniqueIDCollection."+n[w].uniqueID+".index",w,this.parent),n[w].level||this.parent.parentData.push(n[w])}this.batchAddRowRecord=this.batchAddedRecords=this.batchRecords=this.batchDeletedRecords=this.currentViewRecords=[]},e.prototype.getActualRowObjectIndex=function(e){var t=this.parent.grid.getDataRows();if(("Below"===this.parent.editSettings.newRowPosition||"Child"===this.parent.editSettings.newRowPosition)&&this.selectedIndex>-1){if(!g(this.batchRecords[this.addRowIndex])&&this.batchRecords[this.addRowIndex].expanded)if(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length){if(e+=Ph(this.batchRecords[this.addRowIndex]).length,"Child"!==this.parent.editSettings.newRowPosition)e+=this.getBatchChildCount()}else e+=Ph(this.batchRecords[this.addRowIndex]).length;e>=t.length&&(e=t.length-1),this.updateChildCount(this.parent.grid.getCurrentViewRecords()),this.batchChildCount&&(e+=this.batchChildCount),this.batchChildCount=0}return e},e}(),Lu=function(){function e(e){this.addedRecords="addedRecords",this.deletedRecords="deletedRecords",this.prevAriaRowIndex="-1",Pa.Inject(Tu),this.parent=e,this.isSelfReference=!g(e.parentIdMapping),this.previousNewRowPosition=null,this.internalProperties={},this.batchEditModule=new Mu(this.parent),this.addEventListener()}return e.prototype.getModuleName=function(){return"edit"},e.prototype.addEventListener=function(){this.parent.on("crudAction",this.crudAction,this),this.parent.on("beginEdit",this.beginEdit,this),this.parent.on("beginAdd",this.beginAdd,this),this.parent.on("recordDoubleClick",this.recordDoubleClick,this),this.parent.on("cellSave",this.cellSave,this),this.parent.on("batchCancel",this.batchCancel,this),this.parent.grid.on("key-pressed",this.keyPressed,this),this.parent.grid.on("batchedit-form",this.lastCellTab,this),this.parent.grid.on("content-ready",this.contentready,this),this.parent.on("cellEdit",this.cellEdit,this),this.parent.on("actionBegin",this.editActionEvents,this),this.parent.on("actionComplete",this.editActionEvents,this),this.parent.grid.on("double-tap",this.recordDoubleClick,this),this.parent.grid.on("click",this.gridDblClick,this),this.parent.on("savePreviousRowPosition",this.savePreviousRowPosition,this),this.parent.grid.on("edit-form",this.beforeStartEdit,this),this.parent.grid.on("before-batch-cancel",this.beforeBatchCancel,this),this.parent.grid.on("reset-edit-props",this.resetIsOnBatch,this),this.parent.grid.on("get-row-position",this.getRowPosition,this)},e.prototype.gridDblClick=function(e){this.doubleClickTarget=e.target},e.prototype.getRowPosition=function(e){e.newRowPosition=this.parent.editSettings.newRowPosition,e.addRowIndex=this.addRowIndex,e.ariaRowIndex=+this.prevAriaRowIndex},e.prototype.beforeStartEdit=function(e){this.parent.trigger("actionBegin",e)},e.prototype.beforeBatchCancel=function(e){"Cell"===this.parent.editSettings.mode&&this.parent.trigger("actionComplete",e)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("crudAction",this.crudAction),this.parent.off("beginEdit",this.beginEdit),this.parent.off("beginAdd",this.beginAdd),this.parent.off("recordDoubleClick",this.recordDoubleClick),this.parent.off("batchCancel",this.batchCancel),this.parent.grid.off("key-pressed",this.keyPressed),this.parent.grid.off("batchedit-form",this.lastCellTab),this.parent.grid.off("content-ready",this.contentready),this.parent.off("cellEdit",this.cellEdit),this.parent.off("actionBegin",this.editActionEvents),this.parent.off("actionComplete",this.editActionEvents),this.parent.grid.off("double-tap",this.recordDoubleClick),this.parent.off("savePreviousRowPosition",this.savePreviousRowPosition),this.parent.grid.off("edit-form",this.beforeStartEdit),this.parent.grid.off("before-batch-cancel",this.beforeBatchCancel),this.parent.grid.off("click",this.gridDblClick),this.parent.grid.off("reset-edit-props",this.resetIsOnBatch),this.parent.grid.off("get-row-position",this.getRowPosition))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.applyFormValidation=function(e){this.parent.grid.editModule.applyFormValidation(e)},e.prototype.editActionEvents=function(e){var t=xl("editAction",e),i=xl("name",t),n=this.parent,r=n.dataSource.adaptor;if((Dh(n)||r instanceof fn)&&"save"===t.requestType&&"add"===t.action&&("Child"===n.editSettings.newRowPosition||"Below"===n.editSettings.newRowPosition||"Above"===n.editSettings.newRowPosition))if("actionBegin"===i){var o=g(t.row)||!Object.keys(t.row).length?this.selectedIndex:t.row.rowIndex-1,s=g(o)||-1===o?-1:n.getCurrentViewRecords()[o][n.getPrimaryKeyFieldNames()[0]];n.grid.query.addParams("relationalKey",s)}else if("actionComplete"===i)for(var a=n.grid.query.params.length,l=0;l<a;l++)"relationalKey"===n.grid.query.params[l].key&&n.grid.query.params.splice(l);"Batch"===this.parent.editSettings.mode&&"paging"===t.requestType&&this.parent.notify("batchPageAction",{})},e.prototype.recordDoubleClick=function(e){var t=e.target;if(!g(t.closest("td.e-rowcell"))){var i=this.parent.grid.getColumnByIndex(+t.closest("td.e-rowcell").getAttribute("aria-colindex"));if("Cell"===this.parent.editSettings.mode&&!this.isOnBatch&&i&&!i.isPrimaryKey&&i.allowEditing&&!t.classList.contains("e-treegridexpand")&&!t.classList.contains("e-treegridcollapse")&&this.parent.editSettings.allowEditOnDblClick){if(this.isOnBatch=!0,this.parent.grid.setProperties({selectedRowIndex:e.rowIndex},!0),this.parent.enableVirtualization){var n=Ka(e.target,"e-row");this.prevAriaRowIndex=n.getAttribute("aria-rowindex"),n.setAttribute("aria-rowindex",n.rowIndex+"")}this.updateGridEditMode("Batch")}}},e.prototype.updateGridEditMode=function(e){this.parent.grid.setProperties({editSettings:{mode:e}},!0),xl("updateEditObj",this.parent.grid.editModule).apply(this.parent.grid.editModule),this.parent.grid.isEdit=!1},e.prototype.resetIsOnBatch=function(){this.parent.enableVirtualization&&"Cell"===this.parent.editSettings.mode&&(this.isOnBatch=!1,this.updateGridEditMode("Normal"))},e.prototype.keyPressed=function(e){(this.isOnBatch||"Cell"===this.parent.editSettings.mode&&S()&&this.parent.isServerRendered)&&(this.keyPress=e.action),"f2"===e.action&&this.recordDoubleClick(e)},e.prototype.deleteUniqueID=function(e){delete this.parent.uniqueIDFilterCollection[e];delete this.parent.uniqueIDCollection[e]},e.prototype.cellEdit=function(e){var t=this,i=e.promise;if(delete e.promise,this.parent.enableVirtualization&&!g(this.prevAriaRowIndex)&&(e.row.setAttribute("aria-rowindex",this.prevAriaRowIndex),this.prevAriaRowIndex=void 0),"enter"!==this.keyPress&&this.parent.trigger("cellEdit",e,(function(e){e.cancel||"Cell"!==t.parent.editSettings.mode?e.cancel&&"Cell"===t.parent.editSettings.mode&&(t.isOnBatch=!1,t.updateGridEditMode("Normal")):t.enableToolbarItems("edit"),g(i)||i.resolve(e)})),this.doubleClickTarget&&(this.doubleClickTarget.classList.contains("e-treegridexpand")||this.doubleClickTarget.classList.contains("e-treegridcollapse")))return e.cancel=!0,void(this.doubleClickTarget=null);"Cell"===this.parent.editSettings.mode&&("tab"===this.keyPress||"shiftTab"===this.keyPress?this.keyPress=null:"enter"===this.keyPress&&(e.cancel=!0,this.keyPress=null))},e.prototype.enableToolbarItems=function(e){if(!g(this.parent.grid.toolbarModule)){var t=this.parent.element.id+"_gridcontrol_";this.parent.grid.toolbarModule.enableItems([t+"add",t+"edit",t+"delete"],"save"===e),this.parent.grid.toolbarModule.enableItems([t+"update",t+"cancel"],"edit"===e)}},e.prototype.batchCancel=function(e){if("Cell"===this.parent.editSettings.mode){var t=a("editModule.cellDetails",this.parent.grid.editModule),i=t.rowIndex,n=void 0;n=!0!==this.parent.allowRowDragAndDrop||this.parent.rowDropSettings.targetID?this.parent.getRows()[i].cells[this.parent.treeColumnIndex]:this.parent.getRows()[i].cells[this.parent.treeColumnIndex+1],this.parent.renderModule.cellRender({data:t.rowData,cell:n,column:this.parent.grid.getColumns()[this.parent.treeColumnIndex]}),this.updateGridEditMode("Normal"),this.isOnBatch=!1}"Batch"===this.parent.editSettings.mode&&this.parent.notify("batchCancelAction",{})},e.prototype.cellSave=function(e){if("Cell"===this.parent.editSettings.mode&&this.parent.element.querySelector("form")){e.cancel=!0;l("isEdit",!1,this.parent.grid),l("isEditCollapse",!0,this.parent),e.rowData[e.columnName]=e.value;var t,i=void 0,n=void 0;i=g(e.cell)?this.parent.grid.editModule.editModule.form.parentElement.parentNode:e.cell.parentNode;var r=this.parent.getPrimaryKeyFieldNames();g(i)?this.parent.grid.getCurrentViewRecords().filter((function(i,n){i[r[0]]!==e.rowData[r[0]]||(t=n)})):t=-1===this.parent.getRows().indexOf(i)&&this.parent.frozenColumns>0?this.parent.grid.getMovableRows().indexOf(i):this.parent.getRows().indexOf(i);var o={};if(u(o,e),o.cancel=!1,o.type="save",i=this.parent.grid.getRows()[i.rowIndex],this.parent.trigger("actionBegin",o),o.cancel)this.parent.grid.isEdit=!0;else{i.rowIndex===this.parent.getCurrentViewRecords().length-1&&"tab"===this.keyPress&&(this.isTabLastRow=!0),this.blazorTemplates(e),this.updateCell(e,t),this.parent.grid.aggregateModule&&this.parent.grid.aggregateModule.refresh(e.rowData),this.parent.grid.editModule.destroyWidgets([this.parent.grid.getColumnByField(e.columnName)]),this.parent.grid.editModule.formObj.destroy(),"tab"!==this.keyPress&&"shiftTab"!==this.keyPress&&(this.updateGridEditMode("Normal"),this.isOnBatch=!1),this.enableToolbarItems("save"),this.parent.frozenColumns>0&&(gt([n=this.parent.grid.getMovableRows()[t]],["e-editedrow","e-batchrow"]),gt(n.querySelectorAll(".e-rowcell"),["e-editedbatchcell","e-updatedtd"])),gt([i],["e-editedrow","e-batchrow"]),gt(i.querySelectorAll(".e-rowcell"),["e-editedbatchcell","e-updatedtd"]),this.parent.grid.focusModule.restoreFocus(),Du({value:e.rowData,action:"edit"},this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,e.columnName),i.rowIndex===this.parent.getCurrentViewRecords().length-1&&"enter"===this.keyPress&&(this.keyPress=null);var s={type:"save",column:this.parent.getColumnByField(e.columnName),data:e.rowData,previousData:e.previousValue,row:i,target:e.cell};this.parent.trigger("actionComplete",s)}}},e.prototype.lastCellTab=function(e){!this.parent.grid.isEdit&&this.isOnBatch&&"tab"===this.keyPress&&"Cell"===this.parent.editSettings.mode&&(this.updateGridEditMode("Normal"),this.isOnBatch=!1,this.keyPress=null)},e.prototype.blazorTemplates=function(e){if(S()&&this.parent.isServerRendered)for(var t=this.parent.grid.getColumns(),i=this.parent.grid.columnModel,n=0;n<t.length;n++){if(i[n].template){var r=this.parent.grid.element.id+t[n].uid;i[n].getColumnTemplate()(u({index:[n]},e.rowData),this.parent.grid,"template",r,this.parent.grid.isStringTemplate,null)}t[n].editTemplate&&Ue(this.parent.grid.element.id+t[n].uid+"editTemplate","EditTemplate",t[n]),t[n].template&&Ue(this.parent.grid.element.id+t[n].uid,"Template",t[n],!1)}},e.prototype.updateCell=function(e,t){this.parent.grid.editModule.updateRow(t,e.rowData),this.parent.grid.getRowsObject()[t].data=e.rowData},e.prototype.crudAction=function(e,t){Du(e,this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,t,this.addRowRecord),this.parent.parentData=[];for(var i=this.parent.grid.dataSource instanceof yn?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,n=0;n<i.length;n++){i[n].index=n;var r=this.parent.grid.getPrimaryKeyFieldNames()[0];e.value[r]===i[n][r]&&"add"===e.action&&(i[n].level=this.internalProperties.level,i[n].taskData=this.internalProperties.taskData,i[n].uniqueID=this.internalProperties.uniqueID,g(this.internalProperties.parentItem)||(i[n].parentItem=this.internalProperties.parentItem,i[n].parentUniqueID=this.internalProperties.parentUniqueID),i[n].childRecords=this.internalProperties.childRecords),l("uniqueIDCollection."+i[n].uniqueID+".index",n,this.parent),i[n].level||this.parent.parentData.push(i[n])}"add"===e.action&&null!=this.previousNewRowPosition&&(this.parent.setProperties({editSettings:{newRowPosition:this.previousNewRowPosition}},!0),this.previousNewRowPosition=null)},e.prototype.updateIndex=function(e,t,i){for(var n=0;n<this.parent.getDataRows().length;n++){var r=i[n],o=a("uniqueIDCollection."+r.uniqueID+".index",this.parent);if(r.index=o,!g(r.parentItem)){var s=a("uniqueIDCollection."+r.parentItem.uniqueID+".index",this.parent);r.parentItem.index=s}}for(var l=-1,h=0;h<this.parent.getRows().length;h++){t[h].classList.contains("e-detailrow")||l++;var p=i[l],d=(o=p.index,p.level),c=t[h];g(p.parentItem)||(o=a("uniqueIDCollection."+p.parentItem.uniqueID+".index",this.parent));var u=c.cells[this.parent.treeColumnIndex];if(!g(u)){for(var f=0;f<u.classList.length;f++){var m=u.classList[f],y=m.match(/e-gridrowindex/i),v=m.match(/e-griddetailrowindex/i);null!=y&&gt([u],m),null!=v&&gt([u],m)}t[h].classList.contains("e-detailrow")?ut([u],"e-griddetailrowindex"+o+"level"+d):ut([u],"e-gridrowindex"+o+"level"+d)}}},e.prototype.beginAdd=function(e){var t,i=this.addRowIndex,n=this.parent.grid.getCurrentViewRecords();"Batch"===this.parent.editSettings.mode&&(i=this.batchEditModule.getAddRowIndex(),this.selectedIndex=this.batchEditModule.getSelectedIndex(),(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)&&(n=this.batchEditModule.getBatchRecords()));var r=this.parent.grid.getDataRows(),o=r.length?+r[0].getAttribute("aria-rowindex"):0,s=r.length?+r[r.length-1].getAttribute("aria-rowindex"):0,a=this.selectedIndex>=o&&this.selectedIndex<=s,h=this.parent.enableVirtualization&&this.addRowIndex>-1&&"-1"!==this.prevAriaRowIndex;if("Dialog"!==this.parent.editSettings.mode){if("Above"===this.parent.editSettings.newRowPosition)t="before";else if(("Below"===this.parent.editSettings.newRowPosition||"Child"===this.parent.editSettings.newRowPosition)&&(this.selectedIndex>-1||h)&&a){if(t="after",!g(n[i])&&n[i].expanded)if("Batch"===this.parent.editSettings.mode&&(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)){if(i+=Ph(n[i]).length,"Child"!==this.parent.editSettings.newRowPosition)i+=this.batchEditModule.getBatchChildCount()}else i+=Ph(n[i]).length}if((this.selectedIndex>-1||h)&&a&&(i||"Child"===this.parent.editSettings.newRowPosition||"Below"===this.parent.editSettings.newRowPosition)){i>=r.length&&(i=r.length-2);var p="rows",d=this.parent.grid.contentModule[p][0],c=document.activeElement;r[i+1][t](r[0]),l("batchIndex",i+1,this.batchEditModule);var u="Above"===this.parent.editSettings.newRowPosition?i:i+1;if(this.parent.grid.contentModule[p].splice(0,1),this.parent.grid.contentModule[p].splice(u,0,d),this.parent.frozenRows||this.parent.getFrozenColumns()||this.parent.frozenColumns){var f=this.parent.getMovableDataRows(),m=this.parent.grid.getRowsObject()[0];f[i+1][t](f[0]),this.parent.grid.contentModule.freezeRows.splice(0,1),this.parent.grid.contentModule.freezeRows.splice(u,0,m),l("batchIndex",i+1,this.batchEditModule)}if("Row"===this.parent.editSettings.mode||"Cell"===this.parent.editSettings.mode){for(var y=this.parent.grid.getContentTable().querySelectorAll(".e-griderror"),v=0;v<y.length;v++)y[v].remove();l("errorRules",[],this.parent.grid.editModule.formObj)}h&&(this.prevAriaRowIndex="-1"),c.focus()}}},e.prototype.beginEdit=function(e){if("refresh"===e.requestType&&this.isOnBatch)e.cancel=!0;else if("Cell"!==this.parent.editSettings.mode||"beginEdit"!==e.requestType){if(this.doubleClickTarget&&(this.doubleClickTarget.classList.contains("e-treegridexpand")||this.doubleClickTarget.classList.contains("e-treegridcollapse")||this.doubleClickTarget.classList.contains("e-frame")))return e.cancel=!0,void(this.doubleClickTarget=null);if("delete"===e.requestType)for(var t=e.data,i=0;i<t.length;i++){this.deleteUniqueID(t[i].uniqueID);for(var n=Ph(t[i]),r=0;r<n.length;r++)this.deleteUniqueID(n[r].uniqueID);e.data=t.concat(n)}if("add"===e.requestType){if(this.selectedIndex=this.parent.grid.selectedRowIndex,this.parent.enableVirtualization){var o='.e-row[aria-rowindex="'+this.selectedIndex+'"]',s=void 0;this.selectedIndex>-1&&"Top"!==this.parent.editSettings.newRowPosition&&"Bottom"!==this.parent.editSettings.newRowPosition?(this.prevAriaRowIndex=this.selectedIndex.toString(),s=this.parent.getContent().querySelector(o),this.addRowIndex=s?s.rowIndex:0):this.prevAriaRowIndex&&"-1"!==this.prevAriaRowIndex?(o='.e-row[aria-rowindex="'+this.prevAriaRowIndex+'"]',s=this.parent.getContent().querySelector(o),this.addRowIndex=s?s.rowIndex:0):this.addRowIndex=0}else this.addRowIndex=this.parent.grid.selectedRowIndex>-1?this.parent.grid.selectedRowIndex:0;this.addRowRecord=this.parent.getSelectedRecords()[0]}e=this.beginAddEdit(e)}else e.cancel=!0},e.prototype.savePreviousRowPosition=function(e){null===this.previousNewRowPosition&&(this.previousNewRowPosition=this.parent.editSettings.newRowPosition)},e.prototype.beginAddEdit=function(e){var t=e.data;if("add"===e.action){var i=this.parent.grid.getPrimaryKeyFieldNames()[0],n=null;t.taskData=g(t.taskData)?u({},e.data):t.taskData;var r=this.parent.grid.getCurrentViewRecords(),o=this.addRowIndex;t.uniqueID=Za(this.parent.element.id+"_data_"),l("uniqueIDCollection."+t.uniqueID,t,this.parent);var s=0,a=void 0,h=void 0,p=void 0,d=void 0,c=this.parent.enableVirtualization&&this.addRowIndex>-1&&"-1"!==this.prevAriaRowIndex,f=this.parent.getRows(),m=f.length?+f[0].getAttribute("aria-rowindex"):0,y=f.length?+f[f.length-1].getAttribute("aria-rowindex"):0,v=this.selectedIndex>=m&&this.selectedIndex<=y;if(r.length&&(r[this.addRowIndex].index,a=r[this.addRowIndex][this.parent.idMapping],d=r[this.addRowIndex][this.parent.parentIdMapping],r[this.addRowIndex].parentItem&&(h=r[this.addRowIndex].parentItem.uniqueID),p=r[this.addRowIndex].parentItem),"Top"!==this.parent.editSettings.newRowPosition&&r.length){if(s=r[this.addRowIndex].level,"Above"===this.parent.editSettings.newRowPosition)n="before",o=r[this.addRowIndex].index;else if("Below"===this.parent.editSettings.newRowPosition){n="after";var b=Ph(r[this.addRowIndex]).length,w=r[this.addRowIndex].index;o=b>0?w+b:w}else if("Child"===this.parent.editSettings.newRowPosition){n="after",(this.selectedIndex>-1||c)&&v&&(t.parentItem=u({},r[this.addRowIndex]),t.parentUniqueID=t.parentItem.uniqueID,delete t.parentItem.childRecords,delete t.parentItem[this.parent.childMapping]);var C=Ph(r[this.addRowIndex]).length,S=r[this.addRowIndex].index;t.level=s+1,o=C>0?S+C:S,this.isSelfReference&&(t.taskData[this.parent.parentIdMapping]=t[this.parent.parentIdMapping]=a,g(t.parentItem)||Ru(i,t.parentItem,"add",this.parent,this.isSelfReference,t))}if("Above"!==this.parent.editSettings.newRowPosition&&"Below"!==this.parent.editSettings.newRowPosition||((this.selectedIndex>-1||c)&&s&&v&&(t.parentUniqueID=h,t.parentItem=u({},p),delete t.parentItem.childRecords,delete t.parentItem[this.parent.childMapping]),t.level=s,this.isSelfReference&&(t.taskData[this.parent.parentIdMapping]=t[this.parent.parentIdMapping]=d,g(t.parentItem)||Ru(i,t.parentItem,"add",this.parent,this.isSelfReference,t))),null!=n&&(this.selectedIndex>-1||c)&&v&&(e.index="before"===n?o:o+1),"Bottom"===this.parent.editSettings.newRowPosition){var x=this.parent.grid.dataSource instanceof yn?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource;e.index=x.length}}g(t.level)&&(t.level=s),t.hasChildRecords=!1,t.childRecords=[],t.index=0}if("add"===e.action&&(this.internalProperties={level:t.level,parentItem:t.parentItem,uniqueID:t.uniqueID,taskData:t.taskData,parentUniqueID:g(t.parentItem)?void 0:t.parentItem.uniqueID,childRecords:t.childRecords}),"delete"===e.requestType)for(var k=e.data,T=0;T<k.length;T++){if(k[T].parentItem)if(!g(p=Oh(this.parent,k[T].parentItem.uniqueID))&&p.hasChildRecords){var D=p.childRecords.indexOf(k[T]);p.childRecords.splice(D,1)}}return e},e.prototype.addRecord=function(e,t,i){this.previousNewRowPosition=this.parent.editSettings.newRowPosition,e?(t>-1?(this.selectedIndex=t,this.addRowIndex=t):(this.selectedIndex=this.parent.selectedRowIndex,this.addRowIndex=this.parent.selectedRowIndex),i&&this.parent.setProperties({editSettings:{newRowPosition:i}},!0),this.parent.grid.editModule.addRecord(e,t)):this.parent.grid.editModule.addRecord(e,t)},e.prototype.editFormValidate=function(){return this.parent.grid.editModule.editFormValidate()},e.prototype.destroyForm=function(){this.parent.grid.editModule.destroyForm()},e.prototype.contentready=function(e){g(e.args.requestType)||"delete"!==e.args.requestType.toString()&&"save"!==e.args.requestType.toString()&&("Batch"!==this.parent.editSettings.mode||"batchsave"!==e.args.requestType.toString())||(this.updateIndex(this.parent.grid.dataSource,this.parent.getRows(),this.parent.getCurrentViewRecords()),(this.parent.frozenRows||this.parent.getFrozenColumns()||this.parent.frozenColumns)&&this.parent.grid.dataSource.length===this.parent.getMovableDataRows().length&&this.updateIndex(this.parent.grid.dataSource,this.parent.getMovableDataRows(),this.parent.getCurrentViewRecords()))},e.prototype.editCell=function(e,t){"Cell"!==this.parent.editSettings.mode&&"Batch"!==this.parent.editSettings.mode||("Batch"!==this.parent.editSettings.mode&&(this.isOnBatch=!0,this.updateGridEditMode("Batch")),this.parent.grid.editModule.editCell(e,t))},e}(),Ou=function(){function e(e){this.isCellEdit=!1,this.parent=e,this.bindTreeGridProperties()}return e.prototype.bindTreeGridProperties=function(){this.parent.treeGrid.editSettings.allowEditing=this.parent.editSettings.allowEditing,this.parent.treeGrid.editSettings.mode="Cell",this.parent.treeGrid.cellEdit=this.ensureEditCell.bind(this),this.parent.editSettings.allowEditing&&hp.Inject(Lu)},e.prototype.ensureEditCell=function(e){var t=this,i=e.rowData,n=e.columnName;this.editedColumn=this.parent.getColumnByField(n,this.parent.ganttColumns);var r=this.parent.taskFields;if(this.parent.readOnly)e.cancel=!0;else if("Dialog"!==this.parent.editSettings.mode){if(!i.hasChildRecords||n!==r.endDate&&n!==r.duration&&n!==r.dependency&&n!==r.progress&&n!==r.work&&"taskType"!==n){var o=new vn;return this.parent.trigger("cellEdit",e,(function(e){S()&&(e.cell=x(e.cell),e.row=x(e.row)),0===i.level&&"ResourceView"===t.parent.viewType&&(e.cancel=!0),o.resolve(e),e.cancel||(e.columnName===t.parent.taskFields.notes?t.openNotesEditor(e):(t.isCellEdit=!0,g(t.parent.toolbarModule)||t.parent.toolbarModule.refreshToolbarItems()))})),o}e.cancel=!0}else e.cancel=!0},e.prototype.openNotesEditor=function(e){var t=this.parent.taskFields,i=e.rowData,n=e.columnName;if(n===t.notes&&!this.parent.showInlineNotes){e.cancel=!0;var r=this.parent.editModule.dialogModule.updatedEditFields.map((function(e){return e.type})).indexOf("Notes");if(-1!==r)this.parent.editModule.dialogModule.openEditDialog(i.ganttProperties.rowUniqueID),document.getElementById(this.parent.element.id+"_Tab").ej2_instances[0].selectedItem=r}n===t.notes&&!0===this.parent.showInlineNotes&&(this.isCellEdit=!0)},e.prototype.isValueChange=function(e,t){var i=a("data",e),n=i[t],r=a("previousData",e);if(g(n)&&!g(r)||!g(n)&&g(r))return!0;if(!g(n)&&!g(r)){if(n instanceof Date)return n.getTime()!==i.taskData[t].getTime();if(t===this.parent.taskFields.resourceInfo)return n!==r;if(n!==i.taskData[t])return!0}return!1},e.prototype.initiateCellEdit=function(e,t){var i=a("column",e),n=a("data",e),r={action:"CellEditing"};r.data=this.parent.getTaskByUniqueID(n.uniqueID);var o=a("previousData",e),s=this.parent.allowUnscheduledTasks||!g(n[i.field])&&""!==n[i.field]||this.parent.taskFields.duration!==i.field&&this.parent.taskFields.startDate!==i.field&&this.parent.taskFields.endDate!==i.field?n[i.field]:o;g(n)?this.parent.editModule.endEditAction(e):(n[i.field]=o,r.data[i.field]=o,this.parent.initiateEditAction(!0),this.parent.setRecordValue(i.field,s,r.data),i.field===this.parent.taskFields.name?this.taskNameEdited(r):i.field===this.parent.taskFields.startDate?this.startDateEdited(r):i.field===this.parent.taskFields.endDate?this.endDateEdited(r):i.field===this.parent.taskFields.duration?this.durationEdited(r):i.field===this.parent.taskFields.resourceInfo?this.resourceEdited(r,t,n):i.field===this.parent.taskFields.progress?this.progressEdited(r):i.field===this.parent.taskFields.baselineStartDate||i.field===this.parent.taskFields.baselineEndDate?this.baselineEdited(r):i.field===this.parent.taskFields.dependency?this.dependencyEdited(r,o):i.field===this.parent.taskFields.notes?this.notedEdited(r):i.field===this.parent.taskFields.work?this.workEdited(r):"taskType"!==i.field||g(this.parent.taskFields.work)?i.field===this.parent.taskFields.manual?this.taskmodeEdited(r):(this.parent.setRecordValue("taskData."+i.field,r.data[i.field],r.data),this.parent.editModule.initiateSaveAction(r)):this.typeEdited(r,t)),this.isCellEdit=!1,g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems()},e.prototype.taskNameEdited=function(e){this.parent.setRecordValue("taskData."+this.parent.taskFields.name,e.data[this.parent.taskFields.name],e.data),this.parent.setRecordValue("taskName",e.data[this.parent.taskFields.name],e.data.ganttProperties,!0),this.updateEditedRecord(e)},e.prototype.notedEdited=function(e){this.parent.setRecordValue("taskData."+this.parent.taskFields.notes,e.data[this.parent.taskFields.name],e.data),this.parent.setRecordValue("notes",e.data[this.parent.taskFields.notes],e.data.ganttProperties,!0),this.updateEditedRecord(e)},e.prototype.taskmodeEdited=function(e){this.parent.setRecordValue("isAutoSchedule",!e.data[this.parent.taskFields.manual],e.data.ganttProperties,!0),this.parent.editModule.updateTaskScheduleModes(e.data),this.updateEditedRecord(e)},e.prototype.startDateEdited=function(e){var t=e.data,i=e.data.ganttProperties,n=e.data[this.parent.taskFields.startDate];n=n?new Date(n.getTime()):null,g(n=this.parent.dateValidationModule.checkStartDate(n))?t.hasChildRecords||(this.parent.setRecordValue("startDate",null,i,!0),this.parent.setRecordValue("duration",null,i,!0),this.parent.setRecordValue("isMilestone",!1,i,!0),this.parent.allowUnscheduledTasks&&g(this.parent.taskFields.endDate)&&this.parent.setRecordValue("endDate",null,i,!0)):i.endDate||!g(i.duration)?(this.parent.setRecordValue("startDate",new Date(n.getTime()),i,!0),this.parent.dateValidationModule.calculateEndDate(t)):g(i.endDate)&&g(i.duration)&&this.parent.setRecordValue("startDate",new Date(n.getTime()),i,!0),this.parent.setRecordValue("isMilestone",0===i.duration,i,!0),this.parent.dataOperation.updateWidthLeft(e.data),this.parent.dataOperation.updateMappingData(t,"startDate"),this.parent.dataOperation.updateMappingData(t,"endDate"),this.parent.dataOperation.updateMappingData(t,"duration"),this.updateEditedRecord(e)},e.prototype.endDateEdited=function(e){var t=e.data.ganttProperties,i=e.data[this.parent.taskFields.endDate];g(i=i?new Date(i.getTime()):null)?(this.parent.setRecordValue("endDate",i,t,!0),this.parent.setRecordValue("duration",null,t,!0),this.parent.setRecordValue("isMilestone",!1,t,!0)):(0===i.getHours()&&86400!==this.parent.defaultEndTime&&this.parent.dateValidationModule.setTime(this.parent.defaultEndTime,i),i=this.parent.dateValidationModule.checkEndDate(i,t),this.parent.setRecordValue("endDate",i,t,!0),!g(t.startDate)&&g(t.duration)?-1===this.parent.dateValidationModule.compareDates(t.endDate,t.startDate)&&(this.parent.setRecordValue("endDate",new Date(t.startDate.getTime()),t,!0),this.parent.dateValidationModule.setTime(this.parent.defaultEndTime,t.endDate)):!g(t.duration)&&g(t.startDate)&&this.parent.setRecordValue("startDate",this.parent.dateValidationModule.getStartDate(t.endDate,t.duration,t.durationUnit,t),t,!0),-1===this.compareDatesFromRecord(t)?this.parent.dateValidationModule.calculateDuration(e.data):this.parent.editModule.revertCellEdit(e),this.parent.setRecordValue("isMilestone",0===t.duration,t,!0),t.isMilestone&&this.parent.setRecordValue("startDate",this.parent.dateValidationModule.checkStartDate(t.startDate,t),t,!0)),this.parent.dataOperation.updateWidthLeft(e.data),this.parent.dataOperation.updateMappingData(e.data,"startDate"),this.parent.dataOperation.updateMappingData(e.data,"endDate"),this.parent.dataOperation.updateMappingData(e.data,"duration"),this.parent.editModule.updateResourceRelatedFields(e.data,"endDate"),this.updateEditedRecord(e)},e.prototype.durationEdited=function(e){var t=e.data.ganttProperties,i=e.data[this.parent.taskFields.duration];this.parent.dataOperation.updateDurationValue(i,t),this.updateDates(e),this.parent.editModule.updateResourceRelatedFields(e.data,"duration"),this.updateEditedRecord(e)},e.prototype.updateDates=function(e){var t=e.data.ganttProperties,i=this.parent.dateValidationModule.getDateFromFormat(t.endDate),n=this.parent.dateValidationModule.getDateFromFormat(t.startDate),r=t.duration;g(r)?(this.parent.setRecordValue("isMilestone",!1,t,!0),this.parent.setRecordValue("endDate",null,t,!0)):(g(n)&&!g(i)&&this.parent.setRecordValue("startDate",this.parent.dateValidationModule.getStartDate(i,r,t.durationUnit,t),t,!0),0!==r&&t.isMilestone&&(this.parent.setRecordValue("isMilestone",!1,t,!0),this.parent.setRecordValue("startDate",this.parent.dateValidationModule.checkStartDate(t.startDate,t),t,!0)),this.parent.setRecordValue("isMilestone",0===t.duration,t,!0),this.parent.dateValidationModule.calculateEndDate(e.data)),this.parent.dataOperation.updateWidthLeft(e.data),this.parent.dataOperation.updateMappingData(e.data,"endDate"),this.parent.dataOperation.updateMappingData(e.data,"startDate"),this.parent.dataOperation.updateMappingData(e.data,"duration")},e.prototype.progressEdited=function(e){var t=e.data;if(this.parent.setRecordValue("progress",t[this.parent.taskFields.progress]>100?100:t[this.parent.taskFields.progress],t.ganttProperties,!0),this.parent.setRecordValue("taskData."+this.parent.taskFields.progress,t[this.parent.taskFields.progress]>100?100:t[this.parent.taskFields.progress],e.data),!e.data.hasChildRecords){var i=t.ganttProperties.isAutoSchedule?t.ganttProperties.width:t.ganttProperties.autoWidth;this.parent.setRecordValue("progressWidth",this.parent.dataOperation.getProgressWidth(i,t.ganttProperties.progress),t.ganttProperties,!0)}this.updateEditedRecord(e)},e.prototype.baselineEdited=function(e){var t=e.data.ganttProperties,i=e.data[this.parent.taskFields.baselineStartDate],n=e.data[this.parent.taskFields.baselineEndDate];n&&0===n.getHours()&&86400!==this.parent.defaultEndTime&&this.parent.dateValidationModule.setTime(this.parent.defaultEndTime,n),this.parent.setRecordValue("baselineStartDate",this.parent.dateValidationModule.checkBaselineStartDate(i),t,!0),this.parent.setRecordValue("baselineEndDate",this.parent.dateValidationModule.checkBaselineEndDate(n),t,!0),t.baselineStartDate&&t.baselineEndDate&&(this.parent.setRecordValue("baselineLeft",this.parent.dataOperation.calculateBaselineLeft(t),t,!0),this.parent.setRecordValue("baselineWidth",this.parent.dataOperation.calculateBaselineWidth(t),t,!0)),this.updateEditedRecord(e)},e.prototype.resourceEdited=function(e,t,i){var n=this.parent.resourceFields,r=t[this.parent.taskFields.resourceInfo];if(r){for(var o=this.parent.dataOperation.setResourceInfo(t).length,s=i.ganttProperties.resourceInfo,a=void 0,l=[],h=this.parent.resources,p=void 0,d=function(e){if(s){var t=s.length;for(p=0;p<t;p++){if(s[p][n.id]===r[e]){a=p;break}a=-1}}if(g(a)||-1===a){var i=u({},h.filter((function(t){return r[e]===t[n.id]}))[0]);i[n.unit]=100,l.push(i)}else l.push(s[a])},c=0;c<o;c++)d(c);e.data.ganttProperties.resourceInfo=l,this.parent.dataOperation.updateMappingData(e.data,"resourceInfo"),this.parent.editModule.updateResourceRelatedFields(e.data,"resource"),"ResourceView"===this.parent.viewType&&(this.parent.editModule.dialogModule.isResourceUpdate=!0,this.parent.editModule.dialogModule.previousResource=s),this.updateEditedRecord(e)}},e.prototype.dependencyEdited=function(e,t){this.parent.predecessorModule.updateUnscheduledDependency(e.data),this.parent.connectorLineEditModule.updatePredecessor(e.data,e.data[this.parent.taskFields.dependency],e)||this.parent.editModule.revertCellEdit(t)},e.prototype.workEdited=function(e){var t=e.data.ganttProperties,i=e.data[this.parent.taskFields.work];this.parent.setRecordValue("work",i,t,!0),this.parent.editModule.updateResourceRelatedFields(e.data,"work"),this.updateDates(e),this.updateEditedRecord(e)},e.prototype.typeEdited=function(e,t){var i=e.data.ganttProperties,n=t.taskType;this.parent.setRecordValue("taskType",n,i,!0),this.updateEditedRecord(e)},e.prototype.compareDatesFromRecord=function(e){var t=this.parent.dateValidationModule.getValidStartDate(e),i=this.parent.dateValidationModule.getValidEndDate(e);return this.parent.dateValidationModule.compareDates(t,i)},e.prototype.updateEditedRecord=function(e){this.parent.editModule.initiateUpdateAction(e)},e.prototype.destroy=function(){this.parent.editModule.cellEditModule=void 0},e}(),Au=function(){function e(e,t){this.parent=e,this.taskbarEdit=t}return e.prototype.createTooltip=function(e,t,i){var n=this;this.toolTipObj=new br({opensOn:e,content:this.getTooltipText(),position:"TopRight",mouseTrail:t,cssClass:"e-gantt-tooltip",target:i||null,animation:{open:{effect:"None"},close:{effect:"None"}}}),this.toolTipObj.beforeRender=function(e){var t={data:n.taskbarEdit.taskBarEditRecord,args:e,content:n.toolTipObj.content};n.parent.trigger("beforeTooltipRender",t)},this.toolTipObj.afterOpen=function(e){n.updateTooltipPosition(e)},this.toolTipObj.isStringTemplate=!0,this.toolTipObj.appendTo(this.parent.chartPane)},e.prototype.updateTooltipPosition=function(e){var t=this.parent.getOffsetRect(this.parent.chartPane).left+this.parent.chartPane.offsetWidth,i=e.element.offsetLeft;t<i+e.element.offsetWidth&&(i+=t-(i+e.element.offsetWidth)),e.element.style.left=i+"px"},e.prototype.showHideTaskbarEditTooltip=function(e){e&&this.parent.tooltipSettings.showTooltip?(this.createTooltip("Custom",!1),this.parent.tooltipModule.toolTipObj.close(),this.updateTooltip(),"ConnectorPointLeftDrag"===this.taskbarEdit.connectorSecondAction?this.toolTipObj.open(this.taskbarEdit.connectorSecondElement.querySelector("."+Jl)):"ConnectorPointRightDrag"===this.taskbarEdit.connectorSecondAction?this.toolTipObj.open(this.taskbarEdit.connectorSecondElement.querySelector(".e-connectorpoint-right")):this.toolTipObj.open(this.taskbarEdit.taskBarEditElement)):g(this.toolTipObj)||(this.toolTipObj.destroy(),this.toolTipObj=null)},e.prototype.updateTooltip=function(){g(this.toolTipObj)||("ConnectorPointLeftDrag"===this.taskbarEdit.taskBarEditAction||"ConnectorPointRightDrag"===this.taskbarEdit.taskBarEditAction?(this.toolTipObj.content=this.getTooltipText(),this.toolTipObj.offsetY=-3):(this.toolTipObj.content=this.getTooltipText(),this.toolTipObj.refresh(this.taskbarEdit.taskBarEditElement),"LeftResizing"===this.taskbarEdit.taskBarEditAction?this.toolTipObj.offsetX=-this.taskbarEdit.taskBarEditRecord.ganttProperties.width:"RightResizing"===this.taskbarEdit.taskBarEditAction||"ParentResizing"===this.taskbarEdit.taskBarEditAction?this.toolTipObj.offsetX=0:"ProgressResizing"===this.taskbarEdit.taskBarEditAction?this.toolTipObj.offsetX=-(this.taskbarEdit.taskBarEditRecord.ganttProperties.width-this.taskbarEdit.taskBarEditRecord.ganttProperties.progressWidth):"MilestoneDrag"===this.taskbarEdit.taskBarEditAction?this.toolTipObj.offsetX=-this.parent.chartRowsModule.milestoneHeight/2:this.taskbarEdit.taskBarEditRecord.ganttProperties.width>5&&(this.toolTipObj.offsetX=-(this.taskbarEdit.taskBarEditRecord.ganttProperties.width+this.taskbarEdit.taskBarEditRecord.ganttProperties.left-this.taskbarEdit.tooltipPositionX))))},e.prototype.getTooltipText=function(){var e="",t=this.parent.globalize,i=this.taskbarEdit.taskBarEditRecord.ganttProperties;if(this.parent.tooltipSettings.editing)e=this.parent.tooltipModule.templateCompiler(this.parent.tooltipSettings.editing,this.parent,i,"TooltipEditingTemplate")[0];else switch(this.taskbarEdit.taskBarEditAction){case"ProgressResizing":e=this.parent.localeObj.getConstant("progress")+" : "+i.progress;break;case"LeftResizing":e=this.parent.localeObj.getConstant("startDate")+" : ",e+=t.formatDate(i.startDate,{format:this.parent.getDateFormat()}),e+="<br/>"+this.parent.localeObj.getConstant("duration")+" : "+this.parent.getDurationString(i.duration,i.durationUnit);break;case"RightResizing":case"ParentResizing":e=this.parent.localeObj.getConstant("endDate")+" : ",e+=t.formatDate(i.endDate,{format:this.parent.getDateFormat()}),e+="<br/>"+this.parent.localeObj.getConstant("duration")+" : "+this.parent.getDurationString(i.duration,i.durationUnit);break;case"ChildDrag":case"ParentDrag":case"MilestoneDrag":case"ManualParentDrag":g(this.taskbarEdit.taskBarEditRecord.ganttProperties.startDate)||(e=this.parent.localeObj.getConstant("startDate")+" : ",e+=t.formatDate(i.startDate,{format:this.parent.getDateFormat()})),g(this.taskbarEdit.taskBarEditRecord.ganttProperties.endDate)||(e+=""===e?"":"<br/>",e+=this.parent.localeObj.getConstant("endDate")+" : "+t.formatDate(i.endDate,{format:this.parent.getDateFormat()}));break;case"ConnectorPointLeftDrag":case"ConnectorPointRightDrag":e=this.parent.connectorLineModule.tooltipTable,g(this.toolTipObj)&&(this.parent.connectorLineModule.tooltipTable.innerHTML=this.parent.connectorLineModule.getConnectorLineTooltipInnerTd(this.parent.editModule.taskbarEditModule.taskBarEditRecord.ganttProperties.taskName,this.parent.editModule.taskbarEditModule.fromPredecessorText,"",""))}return e},e}(),Bu=function(){function e(e){this.isMouseDragged=!1,this.dependencyCancel=!1,this.editElement=null,this.parent=e,this.initPublicProp(),this.wireEvents(),this.editTooltip=new Au(this.parent,this)}return e.prototype.wireEvents=function(){this.parent.on("chartMouseDown",this.mouseDownHandler,this),this.parent.on("chartMouseUp",this.mouseUpHandler,this),this.parent.on("chartMouseLeave",this.mouseLeaveHandler,this),this.parent.on("chartMouseMove",this.mouseMoveAction,this),this.parent.on("chartMouseClick",this.mouseClickHandler,this)},e.prototype.initPublicProp=function(){this.taskBarEditElement=null,this.taskBarEditRecord=null,this.taskBarEditAction=null,this.connectorSecondElement=null,this.connectorSecondRecord=null,this.connectorSecondAction=null,this.highlightedSecondElement=null,this.fromPredecessorText=null,this.toPredecessorText=null,this.finalPredecessor=null,this.drawPredecessor=!1,this.roundOffDuration=!0,this.dragMouseLeave=!1,this.isMouseDragged=!1,this.previousItemProperty=["left","progress","duration","isMilestone","startDate","endDate","width","progressWidth","autoLeft","autoDuration","autoStartDate","autoEndDate","autoWidth"],this.tapPointOnFocus=!1,this.touchEdit=!1},e.prototype.mouseDownHandler=function(e){if(this.parent.editSettings.allowTaskbarEditing)if(this.canDrag=!1,this.parent.isAdaptive&&this.taskBarEditElement){var t=this.getElementByPosition(e),i=Bl(t,"e-taskbar-main-container");!i||i.innerHTML!==this.taskBarEditElement.innerHTML||t.classList.contains(Jl)||t.classList.contains("e-connectorpoint-right")||this.tapPointOnFocus||(this.updateTaskBarEditElement(e),this.canDrag=!0,e.preventDefault())}else this.parent.isAdaptive||this.updateTaskBarEditElement(e)},e.prototype.mouseClickHandler=function(e){var t=this.getElementByPosition(e),i=Bl(t,"e-taskbar-main-container");this.parent.selectionModule&&this.parent.selectionModule.enableSelectMultiTouch?this.tapPointOnFocus&&this.updateTaskBarEditElement(e):this.tapPointOnFocus&&i&&i.innerHTML!==this.taskBarEditElement.innerHTML?(this.connectorSecondRecord=this.parent.ganttChartModule.getRecordByTaskBar(i),this.connectorSecondAction="ConnectorPointLeftDrag",this.connectorSecondElement=i,this.fromPredecessorText="Finish",this.validateConnectorPoint()&&this.taskBarEditingAction(e,!0),this.showHideActivePredecessors(!1),this.initPublicProp()):t.classList.contains("e-connectorpoint-left-hover")||t.classList.contains("e-connectorpoint-right-hover")?(this.canDrag=!1,this.multipleSelectionEnabled(),this.showHideTaskBarEditingElements(t,this.taskBarEditElement),this.tapPointOnFocus=!0,this.taskBarEditAction="ConnectorPointRightDrag",this.connectorSecondRecord=this.taskBarEditRecord,this.taskBarEditingAction(e,!1)):(this.tapPointOnFocus&&(this.showHideActivePredecessors(!1),this.showHideTaskBarEditingElements(i,this.taskBarEditElement)),this.updateTaskBarEditElement(e))},e.prototype.showHideActivePredecessors=function(e){var t=this.taskBarEditRecord.ganttProperties,i=t.predecessor,n="ResourceView"===this.parent.viewType?t.taskId:t.rowUniqueID;if(i)for(var r=0;r<i.length;r++){var o=i[r];(n.toString()===o.from||n.toString()===o.to)&&this.applyActiveColor(o.from,o.to,e)}var s=this.parent.ganttChartModule.chartBodyContainer;e?(ut([this.taskBarEditElement],["e-active-child-task"]),ut([s],["e-predecessor-touch-mode"])):(gt([this.taskBarEditElement],["e-active-child-task"]),gt([s],["e-predecessor-touch-mode"])),this.touchEdit=e,g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems()},e.prototype.applyActiveColor=function(e,t,i){var n=("ProjectView"===this.parent.viewType?this.taskBarEditRecord.ganttProperties.taskId.toString():this.taskBarEditRecord.ganttProperties.rowUniqueID.toString())===e?this.parent.connectorLineModule.getRecordByID(t):this.parent.connectorLineModule.getRecordByID(e),r=this.parent.ganttChartModule.getChartRows()[this.parent.currentViewData.indexOf(n)];if(!g(r)){var o=r.querySelector(".e-taskbar-main-container"),s=this.parent.element.querySelector("#ConnectorLineparent"+e+"child"+t);i?(ut([o],["e-active-connected-task"]),s&&ut([s],["e-active-connected-task"])):(gt([o],["e-active-connected-task"]),s&&gt([s],["e-active-connected-task"]))}},e.prototype.validateConnectorPoint=function(){var e=this.taskBarEditRecord.ganttProperties,t=this.connectorSecondRecord.ganttProperties,i=!0,n="ResourceView"===this.parent.viewType?e.taskId:e.rowUniqueID,r="ResourceView"===this.parent.viewType?t.taskId:t.rowUniqueID;if(this.connectorSecondRecord.hasChildRecords)i=!1;else if(t.predecessor)for(var o=0;o<t.predecessor.length;o++){var s=t.predecessor[o];if(s.from===n.toString()&&s.to===r.toString()){this.parent.connectorLineEditModule.childRecord=this.connectorSecondRecord,this.parent.connectorLineEditModule.predecessorIndex=o,this.parent.connectorLineEditModule.renderPredecessorDeleteConfirmDialog(),i=!1;break}if(s.from===r.toString()&&s.to===n.toString()){this.parent.connectorLineEditModule.childRecord=this.taskBarEditRecord,this.parent.connectorLineEditModule.predecessorIndex=o,this.parent.connectorLineEditModule.renderPredecessorDeleteConfirmDialog(),i=!1;break}}return i},e.prototype.mouseLeaveHandler=function(e){this.dragMouseLeave=!0},e.prototype.updateTaskBarEditElement=function(e){var t,i=this.getElementByPosition(e);if(t=i.classList.contains("e-gantt-manualparenttaskbar-right")||i.classList.contains("e-manualparent-main-container")||i.classList.contains(Ql)?Bl(i,"e-manualparent-main-container"):i.classList.contains("e-manualparent-milestone-top")||i.classList.contains("e-manualparent-milestone-bottom")||i.classList.contains("e-gantt-manualparent-milestone")?Bl(i,"e-gantt-manualparent-milestone"):Bl(i,"e-taskbar-main-container"),this.parent.editSettings.allowTaskbarEditing&&t){if(this.showHideTaskBarEditingElements(t,this.taskBarEditElement),this.editElement=t,this.taskBarEditElement=t,this.taskBarEditRecord=this.parent.ganttChartModule.getRecordByTaskBar(this.taskBarEditElement),("mousedown"===e.type||"touchstart"===e.type||"click"===e.type)&&(this.roundOffDuration=!0,this.taskBarEditAction=this.getTaskBarAction(e),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||!g(this.parent.taskFields.dependency)||(this.taskBarEditAction=null),this.updateMouseDownProperties(e),"ResourceView"===this.parent.viewType)){if(0===this.taskBarEditRecord.level)return;if(this.parent.enableMultiTaskbar){var n=this.parent.getTaskByUniqueID(this.taskBarEditRecord.parentItem.uniqueID);g(n)||n.expanded||(this.prevZIndex=this.taskBarEditElement.style.zIndex,this.taskBarEditElement.style.zIndex="1000",ut([this.taskBarEditElement.querySelector(".e-gantt-child-taskbar")],"e-collapsed-taskbar-drag"))}}}else this.parent.isAdaptive?(this.taskBarEditElement&&this.showHideTaskBarEditingElements(t,this.taskBarEditElement),this.initPublicProp()):this.showHideTaskBarEditingElements(t,this.taskBarEditElement)},e.prototype.showHideTaskBarEditingElements=function(e,t,i){t=t||this.editElement;var n=!0;if(!this.parent.readOnly){if("ResourceView"===this.parent.viewType&&this.parent.enableMultiTaskbar&&e){var r=this.parent.ganttChartModule.getRecordByTaskBar(e),o=this.parent.getParentTask(r.parentItem);g(o)||o.expanded||(n=!1)}if(e){if(e.querySelector(".e-taskbar-left-resizer"))ut([e.querySelector(".e-taskbar-left-resizer")],["e-left-resize-gripper"]),ut([e.querySelector(".e-taskbar-right-resizer")],["e-right-resize-gripper"]),n&&ut([e.querySelector(".e-child-progress-resizer")],["e-progress-resize-gripper"]);else if(this.parent.isAdaptive&&n){(r=this.parent.ganttChartModule.getRecordByTaskBar(e)).hasChildRecords&&ut([e],["e-active-parent-task"])}n&&ut(this.parent.ganttChartModule.scrollElement.querySelectorAll(".e-connector-line-container"),["e-connector-line-z-index"]),!g(this.parent.taskFields.dependency)&&e.querySelector("."+Jl)&&n&&(ut([e.querySelector("."+Jl)],["e-connectorpoint-left-hover"]),ut([e.querySelector(".e-connectorpoint-right")],["e-connectorpoint-right-hover"]))}else i||gt(this.parent.ganttChartModule.scrollElement.querySelectorAll(".e-connector-line-container"),["e-connector-line-z-index"]);if(t&&e!==t){if(t.querySelector(".e-taskbar-left-resizer")&&(gt([t.querySelector(".e-taskbar-left-resizer")],["e-left-resize-gripper"]),gt([t.querySelector(".e-taskbar-right-resizer")],["e-right-resize-gripper"]),t.querySelector(".e-child-progress-resizer")&&gt([t.querySelector(".e-child-progress-resizer")],["e-progress-resize-gripper"])),!g(this.parent.taskFields.dependency)&&t.querySelector("."+Jl))gt([t.querySelector("."+Jl)],["e-connectorpoint-left-hover"]),gt([t.querySelector(".e-connectorpoint-right")],["e-connectorpoint-right-hover"]);else if(this.parent.isAdaptive){(r=this.parent.ganttChartModule.getRecordByTaskBar(t))&&r.hasChildRecords&&gt([t],["e-active-parent-task"])}this.editElement=null}}},e.prototype.getTaskBarAction=function(e){var t=this.getElementByPosition(e),i=this.taskBarEditRecord,n="";return t.classList.contains("e-taskbar-left-resizer")?n="LeftResizing":t.classList.contains("e-taskbar-right-resizer")?n="RightResizing":t.classList.contains("e-child-progress-resizer")||Tt(t,".e-child-progress-resizer")?n="ProgressResizing":t.classList.contains(Jl)?n="ConnectorPointLeftDrag":t.classList.contains("e-connectorpoint-right")?n="ConnectorPointRightDrag":t.classList.contains("e-gantt-manualparenttaskbar-right")?n="ParentResizing":t.classList.contains(Ql)||t.classList.contains("e-manualparent-main-container")||t.classList.contains("e-gantt-manualparent-milestone")||t.classList.contains("e-manualparent-milestone-top")||t.classList.contains("e-manualparent-milestone-bottom")||t.classList.contains("e-gantt-manualparent-milestone")?n="ManualParentDrag":i&&(n=i.hasChildRecords?"Auto"===this.parent.taskMode?"ParentDrag":"":i.ganttProperties.isMilestone?"MilestoneDrag":"ChildDrag"),n},e.prototype.updateMouseDownProperties=function(e){var t=this.getCoordinate(e);if(t.pageX||t.pageY){var i=this.parent.getOffsetRect(this.parent.ganttChartModule.chartBodyContainer);this.mouseDownX=t.pageX-i.left+this.parent.ganttChartModule.scrollObject.previousScroll.left,this.tooltipPositionX=this.mouseDownX,this.mouseDownY=t.pageY-i.top+this.parent.ganttChartModule.scrollObject.previousScroll.top}"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||(this.fromPredecessorText="ConnectorPointLeftDrag"===this.taskBarEditAction?"start":"finish",this.parent.connectorLineModule.tooltipTable.innerHTML=this.parent.connectorLineModule.getConnectorLineTooltipInnerTd(this.taskBarEditRecord.ganttProperties.taskName,this.fromPredecessorText,"",""))},e.prototype.isMouseDragCheck=function(){if(!this.isMouseDragged&&this.taskBarEditAction&&(this.mouseDownX!==this.mouseMoveX&&(this.mouseDownX+3<this.mouseMoveX||this.mouseDownX-3>this.mouseMoveX)||this.mouseDownY!==this.mouseMoveY&&(this.mouseDownY+3<this.mouseMoveY||this.mouseDownY-3>this.mouseMoveY))){this.isMouseDragged=!0,this.parent.initiateEditAction(!0);var e=this.taskBarEditRecord.ganttProperties;this.previousItem=this.parent.timelineModule.extendFunction(e,this.previousItemProperty),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&this.editTooltip.showHideTaskbarEditTooltip(!0),this.taskBarEditElement.setAttribute("aria-grabbed","true")}},e.prototype.mouseMoveAction=function(e){if(this.parent.isAdaptive){if(!this.canDrag)return;this.multipleSelectionEnabled()}var t=this.parent.getOffsetRect(this.parent.ganttChartModule.chartBodyContainer),i=this.getCoordinate(e);this.mouseMoveX=i.pageX-t.left+this.parent.ganttChartModule.scrollObject.previousScroll.left,this.mouseMoveY=i.pageY-t.top+this.parent.ganttChartModule.scrollObject.previousScroll.top,this.dragMouseLeave=!1,this.isMouseDragCheck(),this.isMouseDragged&&this.taskBarEditAction?this.taskBarEditingAction(e,!1):this.parent.isAdaptive||this.taskBarEditAction||this.updateTaskBarEditElement(e)},e.prototype.taskBarEditingAction=function(e,t){var i=this,n={},r=this.parent.ganttChartModule.getIndexByTaskBar(this.taskBarEditElement);if(null!==this.taskBarEditRecord){if(n.editingFields=this.taskBarEditRecord.ganttProperties,n.data=this.taskBarEditRecord,"ResourceView"===this.parent.viewType&&0===n.data.level)return;n.recordIndex=r,n.taskBarEditAction=this.taskBarEditAction,n.roundOffDuration=this.roundOffDuration,n.cancel=!1,n.previousData=this.previousItem,this.roundOffDuration=n.roundOffDuration,this.updateMouseMoveProperties(e),"ProgressResizing"===this.taskBarEditAction?this.performProgressResize(e):"LeftResizing"===this.taskBarEditAction?this.enableLeftResizing(e):"RightResizing"===this.taskBarEditAction||"ParentResizing"===this.taskBarEditAction?this.enableRightResizing(e):"ParentDrag"===this.taskBarEditAction||"ChildDrag"===this.taskBarEditAction||"MilestoneDrag"===this.taskBarEditAction||"ManualParentDrag"===this.taskBarEditAction?this.enableDragging(e):"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||(this.updateConnectorLineSecondProperties(e),this.triggerDependencyEvent(e),this.parent.isAdaptive||this.drawFalseLine()),this.setItemPosition(),this.updateEditedItem(),this.editTooltip.updateTooltip(),t&&this.taskBarEditedAction(e),this.parent.trigger("taskbarEditing",n,(function(e){e.cancel&&null!==i.taskBarEditRecord&&(i.tapPointOnFocus=!1,c(i.taskBarEditRecord.ganttProperties,e.previousData))}))}},e.prototype.updateMouseMoveProperties=function(e){var t=this.parent.getOffsetRect(this.parent.ganttChartModule.chartBodyContainer),i=this.getCoordinate(e);(i.pageX||i.pageY)&&(this.mouseMoveX=i.pageX-t.left+this.parent.ganttChartModule.scrollObject.previousScroll.left,this.tooltipPositionX=this.mouseMoveX,this.mouseMoveY=i.pageY-t.top+this.parent.ganttChartModule.scrollObject.previousScroll.top);var n="ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction;if(this.taskBarEditRecord.ganttProperties.width>3&&("ProgressResizing"!==this.taskBarEditAction||0!==this.taskBarEditRecord.ganttProperties.progress&&100!==this.taskBarEditRecord.ganttProperties.progress)||n){var r=this.mouseMoveX-this.parent.ganttChartModule.scrollObject.previousScroll.left+t.left,o=this.mouseMoveY-this.parent.ganttChartModule.scrollObject.previousScroll.top+t.top;r+20>t.left+this.parent.ganttChartModule.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.ganttChartModule.scrollObject.previousScroll.left,this.startScrollTimer("right")):r-20<t.left?(this.timerCount=this.parent.ganttChartModule.scrollObject.previousScroll.left,this.startScrollTimer("left")):n&&o+20>t.top+this.parent.ganttChartModule.chartBodyContainer.offsetHeight?(this.timerCount=this.parent.ganttChartModule.scrollObject.previousScroll.top,this.startScrollTimer("bottom")):n&&o-20<t.top?(this.timerCount=this.parent.ganttChartModule.scrollObject.previousScroll.top,this.startScrollTimer("top")):this.stopScrollTimer()}else this.stopScrollTimer()},e.prototype.startScrollTimer=function(e){var t=this;this.stopScrollTimer(),this.scrollTimer=window.setInterval((function(){t.timerCount="right"===e||"bottom"===e?t.timerCount+1>=t.parent.timelineModule.totalTimelineWidth?t.parent.timelineModule.totalTimelineWidth:t.timerCount+1:t.timerCount-1<0?0:t.timerCount-1,"bottom"===e||"top"===e?t.parent.ganttChartModule.scrollObject.setScrollTop(t.timerCount):t.parent.ganttChartModule.scrollObject.setScrollLeft(t.timerCount),"ConnectorPointLeftDrag"!==t.taskBarEditAction&&"ConnectorPointRightDrag"!==t.taskBarEditAction||t.drawFalseLine()}),0)},e.prototype.stopScrollTimer=function(){window.clearInterval(this.scrollTimer),this.scrollTimer=null},e.prototype.enableDragging=function(e){var t=this.taskBarEditRecord.ganttProperties,i=0;this.mouseDownX>this.mouseMoveX?(i=this.mouseDownX-this.mouseMoveX)>0&&this.parent.setRecordValue("left",this.previousItem.left-i,t,!0):(i=this.mouseMoveX-this.mouseDownX,this.parent.setRecordValue("left",this.previousItem.left+i,t,!0));var n=t.left<0?0:t.left+t.width>=this.parent.timelineModule.totalTimelineWidth?this.parent.timelineModule.totalTimelineWidth-t.width:t.left;this.parent.setRecordValue("left",n,t,!0)},e.prototype.performProgressResize=function(e){var t=this.taskBarEditRecord.ganttProperties,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width&&t.left>0?(i=this.mouseMoveX-t.left,this.parent.setRecordValue("progressWidth",i,t,!0)):this.mouseMoveX>=t.left+t.width?this.parent.setRecordValue("progressWidth",t.width,t,!0):this.parent.setRecordValue("progressWidth",0,t,!0):this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-t.left,this.parent.setRecordValue("progressWidth",i,t,!0)):this.mouseMoveX<=t.left?this.parent.setRecordValue("progressWidth",0,t,!0):this.parent.setRecordValue("progressWidth",t.width,t,!0);var n=t.progressWidth>t.width?t.width:t.progressWidth;n=t.progressWidth<0?0:t.progressWidth,this.parent.setRecordValue("progressWidth",n,t,!0);var r=t.width-t.progressWidth;this.progressBorderRadius=r<=4?4-r:0},e.prototype.enableLeftResizing=function(e){var t=this.taskBarEditRecord.ganttProperties,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX<t.left+t.width?(i=this.mouseDownX-this.mouseMoveX,t.left>0&&(this.parent.setRecordValue("left",this.previousItem.left-i,t,!0),this.parent.setRecordValue("width",this.previousItem.width+i,t,!0))):this.mouseMoveX>t.left+t.width&&(i=this.mouseDownX-this.mouseMoveX,this.parent.setRecordValue("left",this.previousItem.left-i,t,!0),this.parent.setRecordValue("width",3,t,!0)):this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-this.mouseDownX,t.left<t.left+t.width&&this.previousItem.left+i<=this.previousItem.left+this.previousItem.width&&(this.parent.setRecordValue("left",this.previousItem.left+i,t,!0),this.parent.setRecordValue("width",this.previousItem.width-i,t,!0))):(i=this.mouseMoveX-this.mouseDownX,this.parent.setRecordValue("left",this.previousItem.left+i,t,!0),this.parent.setRecordValue("width",3,t,!0)),this.updateEditPosition(e,t),this.parent.setRecordValue("left",this.previousItem.left+this.previousItem.width-t.width,t,!0)},e.prototype.updateEditPosition=function(e,t){this.updateIsMilestone(t),this.parent.setRecordValue("progressWidth",this.parent.dataOperation.getProgressWidth(t.width,t.progress),t,!0)},e.prototype.updateIsMilestone=function(e){e.width<=3?(this.parent.setRecordValue("width",3,e,!0),this.parent.setRecordValue("isMilestone",!0,e,!0)):(this.parent.setRecordValue("width",e.width,e,!0),this.parent.setRecordValue("isMilestone",!1,e,!0))},e.prototype.enableRightResizing=function(e){var t=this.taskBarEditRecord.ganttProperties,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseDownX-this.mouseMoveX>3?(i=this.mouseDownX-this.mouseMoveX,this.parent.setRecordValue("width",this.previousItem.width-i,t,!0)):this.mouseMoveX<t.left&&this.parent.setRecordValue("width",3,t,!0):this.mouseMoveX>t.left&&(i=this.mouseMoveX-this.mouseDownX,this.parent.setRecordValue("width",this.previousItem.width+i,t,!0)),this.updateEditPosition(e,t)},e.prototype.updateEditedItem=function(){var e,t,i,n,r=this.taskBarEditRecord.ganttProperties;switch(this.taskBarEditAction){case"ProgressResizing":this.parent.setRecordValue("progress",this.getProgressPercent(r.width,r.progressWidth),r,!0);break;case"LeftResizing":e=this.getRoundOffStartLeft(r,this.roundOffDuration),t=this.getDateByLeft(e),g(r.endDate)&&(i=this.parent.dateValidationModule.getValidEndDate(r),this.parent.setRecordValue("endDate",i,r,!0)),n=this.parent.dateValidationModule.checkStartDate(t,r,null),this.parent.setRecordValue("startDate",new Date(n.getTime()),r,!0),0===this.parent.dateValidationModule.compareDates(r.startDate,r.endDate)&&g(r.isMilestone)&&!1===r.isMilestone&&0===r.duration&&this.parent.setRecordValue("duration",1,r,!0),r.isMilestone&&this.parent.setRecordValue("endDate",new Date(n.getTime()),r,!0),this.parent.dateValidationModule.calculateDuration(this.taskBarEditRecord),this.parent.editModule.updateResourceRelatedFields(this.taskBarEditRecord,"duration");break;case"RightResizing":case"ParentResizing":e=this.getRoundOffEndLeft(r,this.roundOffDuration);var o=this.getDateByLeft(e);g(r.startDate)&&(n=this.parent.dateValidationModule.getValidStartDate(r),this.parent.setRecordValue("startDate",n,r,!0));var s=g(r.startDate)?n:r.startDate;i=r.isMilestone?s:this.parent.dateValidationModule.checkEndDate(o,this.taskBarEditRecord.ganttProperties),this.parent.setRecordValue("endDate",new Date(i.getTime()),r,!0),this.parent.dateValidationModule.calculateDuration(this.taskBarEditRecord),this.parent.editModule.updateResourceRelatedFields(this.taskBarEditRecord,"duration");break;case"ParentDrag":case"ChildDrag":case"MilestoneDrag":case"ManualParentDrag":e=this.getRoundOffStartLeft(r,this.roundOffDuration),t=this.getDateByLeft(e),!g(r.endDate)&&g(r.startDate)?(i=this.parent.dateValidationModule.checkStartDate(t,r,null),i=this.parent.dateValidationModule.checkEndDate(i,this.taskBarEditRecord.ganttProperties),this.parent.setRecordValue("endDate",i,r,!0)):(this.parent.setRecordValue("startDate",this.parent.dateValidationModule.checkStartDate(t,r,null),r,!0),g(r.duration)||this.parent.dateValidationModule.calculateEndDate(this.taskBarEditRecord))}},e.prototype.getRoundOffEndLeft=function(e,t){var i="None"!==this.parent.timelineModule.bottomTier?this.parent.timelineModule.bottomTier:this.parent.timelineModule.topTier,n=e.width+e.left,r=1/(this.parent.timelineModule.getIncrement(this.getDateByLeft(n),1,"Day")/864e5),o=this.parent.perDayWidth-this.parent.perDayWidth/r,s=o/this.parent.perDayWidth;if(void 0===t&&(t=!1),t){if(t)if("Hour"===i){var a=this.parent.perDayWidth/24;r=1/(this.parent.timelineModule.getIncrement(this.getDateByLeft(n),1,"Hour")/36e5),0!==(o=this.parent.perDayWidth/24-this.parent.perDayWidth/24/r)&&(n=n-o+a)}else if("Minutes"===i){var l=this.parent.perDayWidth/1440;r=1/(this.parent.timelineModule.getIncrement(this.getDateByLeft(n),1,"Minutes")/6e4),0!==(o=this.parent.perDayWidth/1440-this.parent.perDayWidth/1440/r)&&(n=n-o+l)}else 0!==o&&(n=n-o+this.parent.perDayWidth)}else"Hour"!==i&&"Minutes"!==i&&(0===s?n=n:s>.5?n=n-o+this.parent.perDayWidth:s<.5&&(n=n-o+this.parent.perDayWidth/2));return n},e.prototype.getRoundOffStartLeft=function(e,t){var i=e.left,n="None"!==this.parent.timelineModule.bottomTier?this.parent.timelineModule.bottomTier:this.parent.timelineModule.topTier,r=1/(this.parent.timelineModule.getIncrement(this.getDateByLeft(i),1,"Day")/864e5),o=this.parent.perDayWidth-this.parent.perDayWidth/r,s=o/this.parent.perDayWidth;return void 0===t&&(t=!1),t?t&&("Hour"===n?(r=1/(this.parent.timelineModule.getIncrement(this.getDateByLeft(i),1,"Hour")/36e5),i-=o=this.parent.perDayWidth/24-this.parent.perDayWidth/24/r):"Minutes"===n?(r=1/(this.parent.timelineModule.getIncrement(this.getDateByLeft(i),1,"Minutes")/6e4),i-=o=this.parent.perDayWidth/1440-this.parent.perDayWidth/1440/r):i-=o):"Hour"!==n&&"Minutes"!==n&&(s<=.5?i-=o:s>.5&&(i=i-o+this.parent.perDayWidth/2)),i},e.prototype.getDateByLeft=function(e){var t=new Date(this.parent.timelineModule.timelineStartDate.toString()),i=864e5/this.parent.perDayWidth;t.setTime(t.getTime()+e*i);var n="None"!==this.parent.timelineModule.bottomTier?this.parent.timelineModule.topTier:this.parent.timelineModule.bottomTier;return"Hour"!==n&&"Minutes"!==n&&(this.isInDst(new Date(this.parent.timelineModule.timelineStartDate.toString()))&&!this.isInDst(t)?t.setTime(t.getTime()+36e5):!this.isInDst(new Date(this.parent.timelineModule.timelineStartDate.toString()))&&this.isInDst(t)&&t.setTime(t.getTime()-36e5)),t},e.prototype.getDefaultTZOffset=function(){var e=new Date((new Date).getFullYear(),0,1),t=new Date((new Date).getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())},e.prototype.isInDst=function(e){return e.getTimezoneOffset()<this.getDefaultTZOffset()},e.prototype.setItemPosition=function(){var e=this.taskBarEditRecord.ganttProperties,t="MilestoneDrag"===this.taskBarEditAction||e.isMilestone?this.parent.chartRowsModule.milestoneHeight:e.width,i=this.parent.isAdaptive?t-2:t-10,n=this.taskBarEditElement.classList.contains("e-taskbar-main-container")?this.taskBarEditElement:Tt(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-taskbar-main-container"),r=Tt(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-left-label-container"),o=Tt(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-right-label-container"),s=this.taskBarEditElement.querySelector(".e-gantt-child-progressbar"),a=this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"),l=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),h=this.taskBarEditElement.querySelector(".e-taskbar-right-resizer"),p=this.taskBarEditElement.querySelector(".e-gantt-parent-taskbar"),d=this.taskBarEditElement.querySelector(".e-gantt-parent-progressbar"),c=this.taskBarEditElement.querySelector(".e-right-connectorpoint-outer-div"),u=this.taskBarEditElement,f=this.taskBarEditElement.querySelector("."+Ql),m=this.taskBarEditElement.querySelector(".e-gantt-manualparenttaskbar-right"),y=this.taskBarEditElement.querySelector(".e-gantt-manualparenttaskbar-left");"ConnectorPointRightDrag"!==this.taskBarEditAction&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&("ParentResizing"!==this.taskBarEditAction&&"ManualParentDrag"!==this.taskBarEditAction&&(n.style.width=t+"px",n.style.left=e.left+"px",r.style.width=e.left+"px",g(o)||(o.style.left=e.left+t+"px")),c&&(c.style.left=(this.parent.isAdaptive?t+10:t+2)+"px"),"MilestoneDrag"===this.taskBarEditAction||e.isMilestone?(n.style.left=e.left-t/2+"px",r.style.width=e.left-t/2+"px",g(o)||(o.style.left=e.left+t/2+"px")):"ProgressResizing"===this.taskBarEditAction?(a.style.left=e.left+e.progressWidth-10+"px",g(s)||(s.style.width=e.progressWidth+"px",s.style.borderBottomRightRadius=this.progressBorderRadius+"px",s.style.borderTopRightRadius=this.progressBorderRadius+"px",l.style.left=e.progressWidth-8+"px")):"RightResizing"===this.taskBarEditAction?(a.style.width=t+"px",g(s)||(s.style.width=e.progressWidth+"px",h.style.left=i+"px",l.style.left=e.progressWidth-10+"px")):"ParentDrag"===this.taskBarEditAction?(g(p)||(p.style.width=t+"px"),g(s)||(d.style.width=e.progressWidth+"px")):"ParentResizing"===this.taskBarEditAction?(u.style.width=f.style.width=e.width+"px",m.style.left=e.width-y.offsetLeft+"px"):"ManualParentDrag"===this.taskBarEditAction?u.style.left=e.left-e.autoLeft+"px":(g(a)||(a.style.width=t+"px"),g(s)||(h.style.left=i+"px",s.style.width=e.progressWidth+"px",l.style.left=e.progressWidth-10+"px")))},e.prototype.mouseUpHandler=function(e){var t=this.isMouseDragged;this.editTooltip.showHideTaskbarEditTooltip(!1),this.taskBarEditAction&&this.isMouseDragged&&(!this.dragMouseLeave&&this.taskBarEditedAction?(this.taskBarEditedAction(e),this.isMouseDragged=!1):this.cancelTaskbarEditActionInMouseLeave()),"ResourceView"===this.parent.viewType&&this.parent.enableMultiTaskbar&&!g(this.taskBarEditElement)&&(g(this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"))||this.taskBarEditElement.querySelector(".e-gantt-child-taskbar").classList.contains("e-collapsed-taskbar-drag")&&(gt([this.taskBarEditElement.querySelector(".e-gantt-child-taskbar")],"e-collapsed-taskbar-drag"),this.taskBarEditElement.style.zIndex=this.prevZIndex,this.prevZIndex="")),this.parent.isAdaptive&&!t||this.initPublicProp(),this.stopScrollTimer()},e.prototype.taskBarEditedAction=function(e){var t,i,n={},r=this.mouseDownX,o=this.mouseDownY,s=this.taskBarEditRecord,a=this.parent.ganttChartModule.getIndexByTaskBar(this.taskBarEditElement),l=this.getCoordinate(e);t=this.mouseMoveX,this.mouseMoveY,i=l.pageY-this.parent.ganttChartModule.chartBodyContainer.offsetTop,"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||this.drawPredecessor||(this.dependencyCancel=!0),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||!this.drawPredecessor?(r!==t||Math.abs(o-i)>=(this.parent.rowHeight-this.parent.taskbarHeight)/2)&&null!==s&&(n.editingFields=s.ganttProperties,n.data=s,n.recordIndex=a,n.previousData=this.previousItem,n.taskBarEditAction=this.taskBarEditAction,n.action="TaskbarEditing",n.roundOffDuration=this.roundOffDuration,this.taskbarEditedArgs=n,this.taskbarEdited(n)):this.parent.connectorLineEditModule.updatePredecessor(this.connectorSecondRecord,this.finalPredecessor)},e.prototype.cancelTaskbarEditActionInMouseLeave=function(){this.parent.editModule.reUpdatePreviousRecords(!0)},e.prototype.taskbarEdited=function(e){var t=u({},e),i=t.data,n=i.ganttProperties;"ProgressResizing"===t.taskBarEditAction?t.previousData.progress!==n.progress&&(this.parent.setRecordValue("progress",this.getProgressPercent(n.width,n.progressWidth),n,!0),i.parentItem&&this.parent.editModule.updateParentProgress(i.parentItem)):this.parent.dataOperation.updateWidthLeft(t.data),this.parent.dataOperation.updateTaskData(i),this.parent.editModule.initiateUpdateAction(t)},e.prototype.getProgressPercent=function(e,t){return Math.ceil(t/e*100)},e.prototype.drawFalseLine=function(){var e,t,i=this.mouseDownX,n=this.mouseDownY,r=this.mouseMoveX,o=this.mouseMoveY,s=Math.sqrt((i-r)*(i-r)+(n-o)*(n-o)),a="rotate("+180*Math.atan2(o-n,r-i)/Math.PI+"deg)";"ConnectorPointLeftDrag"===this.taskBarEditAction&&(e=this.taskBarEditElement.offsetLeft-this.parent.chartRowsModule.connectorPointWidth/2-this.parent.ganttChartModule.scrollObject.previousScroll.left),"ConnectorPointRightDrag"===this.taskBarEditAction&&(e=this.taskBarEditElement.offsetLeft+this.taskBarEditElement.offsetWidth+this.parent.chartRowsModule.connectorPointWidth/2-this.parent.ganttChartModule.scrollObject.previousScroll.left),t=this.taskBarEditElement.offsetTop+this.taskBarEditElement.offsetHeight/2+this.parent.ganttChartModule.chartBodyContainer.offsetTop-this.parent.ganttChartModule.scrollObject.previousScroll.top,this.removeFalseLine(!1),this.falseLine=ct("div",{className:"e-gantt-false-line",id:"ganttfalseline"+this.parent.element.id,styles:"transform-origin: 0% 100%;right: auto;position: absolute;transform:"+a+";border-top-width: 1px;border-top-style: dashed;z-index: 5;width:"+(s-3)+"px;left:"+e+"px;top:"+t+"px;"}),this.parent.ganttChartModule.chartBodyContainer.appendChild(this.falseLine)},e.prototype.removeFalseLine=function(e){this.falseLine&&(Ct(this.falseLine),this.falseLine=null,e&&gt(this.parent.ganttChartModule.scrollElement.querySelectorAll(".e-connector-line-container"),["e-connector-line-z-index"]))},e.prototype.updateConnectorLineSecondProperties=function(e){var t=this.getElementByPosition(e),i=Bl(t,"e-taskbar-main-container");this.connectorSecondAction=null,Bl(t,Jl)?(this.connectorSecondAction="ConnectorPointLeftDrag",this.toPredecessorText="Start"):Bl(t,"e-connectorpoint-right")?(this.connectorSecondAction="ConnectorPointRightDrag",this.toPredecessorText="Finish"):(this.connectorSecondAction=null,this.toPredecessorText=null),this.taskBarEditElement!==i&&this.taskBarEditElement!==this.highlightedSecondElement&&this.showHideTaskBarEditingElements(i,this.highlightedSecondElement,!0),g(this.connectorSecondAction)&&!g(this.connectorSecondElement)&&(this.editTooltip.showHideTaskbarEditTooltip(!1),gt([this.connectorSecondElement.querySelector("."+Jl)],["e-connectorpoint-allow-block"]),gt([this.connectorSecondElement.querySelector(".e-connectorpoint-right")],["e-connectorpoint-allow-block"])),this.connectorSecondElement=this.connectorSecondAction?i:null,this.highlightedSecondElement=i,this.connectorSecondRecord=g(this.connectorSecondElement)?null:this.parent.ganttChartModule.getRecordByTaskBar(this.connectorSecondElement)},e.prototype.triggerDependencyEvent=function(e,t){var i,n,r=this.taskBarEditRecord.ganttProperties,o=this.connectorSecondRecord?this.connectorSecondRecord.ganttProperties:null,s=this.getElementByPosition(e),a=s,l="ResourceView"===this.parent.viewType?r.taskId:r.rowUniqueID;if("ConnectorPointLeftDrag"===this.taskBarEditAction?i=l+"S":"ConnectorPointRightDrag"===this.taskBarEditAction&&(i=l+"F"),this.connectorSecondAction&&("ConnectorPointLeftDrag"===this.connectorSecondAction?(i+="S",n="Start"):"ConnectorPointRightDrag"===this.connectorSecondAction&&(i+="F",n="Finish")),g(o))this.drawPredecessor=!1;else{o.predecessorsName?this.finalPredecessor=o.predecessorsName+","+i:this.finalPredecessor=i;var h=this.parent.connectorLineEditModule.validatePredecessorRelation(this.connectorSecondRecord,this.finalPredecessor),p=this.parent.predecessorModule.calculatePredecessor(i,this.connectorSecondRecord),d={};if(d.fromItem=r,d.toItem=o,d.newPredecessorString=this.finalPredecessor,d.predecessor=p&&p[0],d.isValidLink=h,d.requestType="ValidateDependency",this.parent.trigger("actionBegin",d),d.isValidLink=!(!h&&d.isValidLink)&&d.isValidLink,d.isValidLink){if(this.editTooltip.toolTipObj||this.parent.isAdaptive||this.editTooltip.showHideTaskbarEditTooltip(!0),this.editTooltip.toolTipObj){this.parent.connectorLineModule.tooltipTable.innerHTML=this.parent.connectorLineModule.getConnectorLineTooltipInnerTd(this.parent.editModule.taskbarEditModule.taskBarEditRecord.ganttProperties.taskName,this.parent.editModule.taskbarEditModule.fromPredecessorText,"","");var c=this.parent.connectorLineModule.tooltipTable.querySelector("#toPredecessor").querySelectorAll("td");c[1].innerText=o.taskName,c[2].innerText=n;var u=this.parent.connectorLineModule.tooltipTable.parentElement.parentElement;u.offsetTop+u.offsetHeight>e.pageY&&(u.style.top=e.pageY-u.offsetHeight-20+"px")}this.drawPredecessor=!0}else this.parent.isAdaptive?(s.classList.contains(Jl)||s.classList.contains("e-connectorpoint-right"))&&this.showHideActivePredecessors(!0):ut([a],["e-connectorpoint-allow-block"]),this.drawPredecessor=!1}},e.prototype.getCoordinate=function(e){var t={};if(this.parent.isAdaptive&&e&&"click"!==e.type)"touchmove"!==(i=e).type&&"touchstart"!==i.type&&"touchend"!==i.type||(t.pageX=i.changedTouches[0].pageX,t.pageY=i.changedTouches[0].pageY);else if(e){var i=e;t.pageX=i.pageX,t.pageY=i.pageY}return t},e.prototype.getElementByPosition=function(e){if(this.parent.isAdaptive){var t=this.getCoordinate(e);return document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset)}return e.target},e.prototype.multipleSelectionEnabled=function(){this.parent.selectionModule&&"Cell"!==this.parent.selectionSettings.mode&&"Multiple"===this.parent.selectionSettings.type&&this.parent.selectionModule.hidePopUp()},e.prototype.unWireEvents=function(){this.parent.isDestroyed||(this.parent.off("chartMouseDown",this.mouseDownHandler),this.parent.off("chartMouseUp",this.mouseUpHandler),this.parent.off("chartMouseLeave",this.mouseLeaveHandler),this.parent.off("chartMouseMove",this.mouseMoveAction),this.parent.off("chartMouseClick",this.mouseClickHandler))},e.prototype.destroy=function(){this.unWireEvents(),this.stopScrollTimer(),this.parent.editModule.taskbarEditModule=void 0},e}(),Fu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nu=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Hu=function(e){function t(t,i){return e.call(this,t,i)||this}return Fu(t,e),t.prototype.preRender=function(){this.browser=me.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=me.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=m("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Pi(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ye.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){g(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var i=kt(".e-"+t.id+"_nav.e-scroll-nav",t),n=kt(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){wt(e)}));for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var s=o[r];t.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),wt(this.scrollEle),i.length>0&&(wt(i[0]),g(i[1])||wt(i[1])),ye.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=kt(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:t.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(o);var s=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(s,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:i});n.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),s=this.createElement("div",{id:t.concat("_left"),className:o+" e-overlay"});s.setAttribute("aria-disabled","true");var a=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});s.appendChild(a),n.appendChild(r),e.appendChild(n),e.insertBefore(s,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([n,s])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new Pi(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),ye.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.scrollEle,r=this.element,o=t.classList;o.contains("e-scroll-nav")&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(r,"e-rtl")&&this.browserCheck&&(e=-e);n.scrollLeft;!this.contains(r,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5,r=function(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),n-=.5,window.requestAnimationFrame(r))};r()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(kt(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetWidth}));var r=function(){var i,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(i=-e,o=-10):(i=e,o=10),i<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(r))};r()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(g(e)?t:e).querySelector(".e-nav-arrow");g(e)?Et(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):Et(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=this.element,r=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),s=this.element.querySelector(".e-scroll-left-overlay"),a=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(s=this.element.querySelector(".e-scroll-right-overlay"),a=this.element.querySelector(".e-scroll-left-overlay")),s.style.width=l<40?l+"px":"40px",t.scrollWidth-Math.ceil(i+l)<40?a.style.width=t.scrollWidth-Math.ceil(i+l)+"px":a.style.width="40px"),0===l)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else{var h=this.element.querySelector(".e-scroll-nav.e-overlay");h&&(h.classList.remove("e-overlay"),h.setAttribute("aria-disabled","false"),h.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},Nu([zt(null)],t.prototype,"scrollStep",void 0),t=Nu([Gt],t)}(pi),Vu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ju=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},zu=function(e){function t(t,i){return e.call(this,t,i)||this}return Vu(t,e),t.prototype.preRender=function(){this.browser=me.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=me.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=m("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new Pi(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ye.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),ye.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){g(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=ct("div",{className:"e-vscroll-content"}),t=ct("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",gt([this.element],["e-vscroll","e-scroll-device"]);var i=kt(".e-"+t.id+"_nav.e-scroll-nav",t),n=kt(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){wt(e)}));for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++){var s=o[r];t.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),wt(this.scrollEle),i.length>0&&(wt(i[0]),g(i[1])||wt(i[1])),ye.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=kt(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=ct("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),r=ct("div",{id:t.concat("down"),className:n}),o=ct("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});r.appendChild(o);var s=ct("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(s,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=ct("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var r=ct("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),s=ct("div",{id:t.concat("_up"),className:o+" e-overlay"});s.setAttribute("aria-disabled","true");var a=ct("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});s.appendChild(a),n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(s,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([n,s])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new Pi(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),ye.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){this.element;var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5,r=function(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),n-=.02,window.requestAnimationFrame(r))};r()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(kt(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight}));var r=function(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(r))};r()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(g(e)?t:e).querySelector(".e-nav-arrow");g(e)?Et(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):Et(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=(this.element,this.element.querySelector(".e-scroll-up-nav")),r=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),s=this.element.querySelector(".e-scroll-down-overlay"),a=t.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",t.scrollHeight-Math.ceil(i+a)<40?s.style.height=t.scrollHeight-Math.ceil(i+a)+"px":s.style.height="40px"),0===a)this.arrowDisabling(n,r);else if(Math.ceil(i+a+.1)>=t.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},ju([zt(null)],t.prototype,"scrollStep",void 0),t=ju([Gt],t)}(pi),qu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wu=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},_u="e-toolbar-items",Gu="e-blazor-toolbar-items",Uu="e-toolbar-item",Ku="e-toolbar-popup",Yu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qu(t,e),Wu([zt("")],t.prototype,"id",void 0),Wu([zt("")],t.prototype,"text",void 0),Wu([zt("auto")],t.prototype,"width",void 0),Wu([zt("")],t.prototype,"cssClass",void 0),Wu([zt(!1)],t.prototype,"showAlwaysInPopup",void 0),Wu([zt(!1)],t.prototype,"disabled",void 0),Wu([zt("")],t.prototype,"prefixIcon",void 0),Wu([zt("")],t.prototype,"suffixIcon",void 0),Wu([zt(!0)],t.prototype,"visible",void 0),Wu([zt("None")],t.prototype,"overflow",void 0),Wu([zt("")],t.prototype,"template",void 0),Wu([zt("Button")],t.prototype,"type",void 0),Wu([zt("Both")],t.prototype,"showTextOn",void 0),Wu([zt(null)],t.prototype,"htmlAttributes",void 0),Wu([zt("")],t.prototype,"tooltipText",void 0),Wu([zt("Left")],t.prototype,"align",void 0),Wu([_t()],t.prototype,"click",void 0),t}(oi),Xu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return qu(t,e),t.prototype.destroy=function(){var t=this;for(this.isReact&&this.clearTemplate(),e.prototype.destroy.call(this),this.unwireEvents(),this.tempId.forEach((function(e){g(t.element.querySelector(e))||(document.body.appendChild(t.element.querySelector(e)).style.display="none")})),S()&&this.isServerRendered&&this.resetServerItems();this.element.lastElementChild&&!this.element.lastElementChild.classList.contains(Gu);)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&this.element.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&gt([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach((function(e){return t.element.removeAttribute(e)}))},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains("e-vertical"),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,"e-rtl")},t.prototype.wireEvents=function(){ye.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new xi(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),ye.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(ye.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!g(this.popObj)&&mt(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){ye.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),ye.remove(document,"scroll",this.docEvent),ye.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var t=Tt(e.target,".e-popup");this.popObj&&mt(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){[].slice.call(this.element.querySelectorAll("."+Uu)).forEach((function(e){wt(e)}));var e=this.element.querySelector("."+_u);this.tbarAlign&&([].slice.call(e.children).forEach((function(e){wt(e)})),this.tbarAlign=!1,this.remove(e,"e-tbar-pos")),this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,"e-rtl"),this.destroyScroll()),this.remove(this.element,"e-tbar-extended"),this.remove(this.element,"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,t){return e&&this.popObj&&mt(this.popObj.element)?this.popObj.element.querySelector("."+Uu):this.element===t||e?this.element.querySelector("."+Uu+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):Tt(t,"."+Uu)},t.prototype.keyHandling=function(e,t,i,n,r){var o=this.popObj,s=this.element,a={name:"FadeOut",duration:100};switch(t.action){case"moveRight":if(this.isVertical)return;s===i?this.elementFocus(e):n||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(e,"previous");break;case"home":case"end":var l=void 0,h=void 0;if(e){var p=Tt(e,".e-popup");p?mt(this.popObj.element)&&(h=[].slice.call(p.children),l="home"===t.action?h[0]:h[h.length-1]):(h=this.element.querySelectorAll("."+_u+" ."+Uu),l="home"===t.action?h[0]:h[h.length-1]),l&&this.elementFocus(l)}break;case"moveUp":case"moveDown":var d="moveUp"===t.action?"previous":"next";if(this.isVertical)"moveUp"===t.action?this.eleFocus(e,"previous"):this.eleFocus(e,"next");else if(o&&Tt(i,".e-popup")){var c=o.element,u=c.firstElementChild;if("previous"===d&&u===e||"next"===d&&c.lastElementChild===e)return;this.eleFocus(e,d)}else"moveDown"===t.action&&o&&mt(o.element)&&this.elementFocus(e);break;case"tab":if(!r&&!n){var g=e.firstElementChild;s===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(g),g.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(a);break;case"popupOpen":if(!n)return;o&&!mt(o.element)?(o.element.style.top=s.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(a)}},t.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){var i;e.preventDefault();var n=t.classList.contains("e-hor-nav"),r=t.classList.contains("e-scroll-nav");((i=this.clstElement(n,t))||r)&&this.keyHandling(i,e,t,n,r)}},t.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(mt(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!mt(e)},t.prototype.eleFocus=function(e,t){var i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){var n=Object(e.parentElement)[t+"ElementSibling"];if(g(n)||0!==n.children.length||(n=Object(n)[t+"ElementSibling"]),!g(n)&&n.children.length>0)if("next"===t){var r=n.querySelector("."+Uu);this.eleContains(r)?this.eleFocus(r,t):(r.firstElementChild.focus(),this.activeEleSwitch(r))}else{r=n.lastElementChild;this.eleContains(r)?this.eleFocus(r,t):this.elementFocus(r)}}},t.prototype.clickHandler=function(e){var t,i=this,n=e.target,r=n.classList,o=this.element,s=!g(Tt(n,".e-toolbar-pop")),a=Tt(n,".e-hor-nav");a||(a=n),o.children[0].classList.contains("e-hscroll")||o.children[0].classList.contains("e-vscroll")||!r.contains("e-hor-nav")||(r=n.querySelector(".e-icons").classList),(r.contains("e-popup-up-icon")||r.contains("e-popup-down-icon"))&&this.popupClickHandler(o,a,"e-rtl");var l=Tt(e.target,"."+Uu);if(!g(l)&&!l.classList.contains("e-overlay")||a.classList.contains("e-hor-nav")){if(l){var h=this.items[this.tbarEle.indexOf(l)];t=h&&S()&&this.isServerRendered?{id:h.id,text:h.text,width:h.width,cssClass:h.cssClass,showAlwaysInPopup:h.showAlwaysInPopup,disabled:h.disabled,prefixIcon:h.prefixIcon,suffixIcon:h.suffixIcon,visible:h.visible,overflow:h.overflow,template:h.template,type:h.type,showTextOn:h.showTextOn,htmlAttributes:h.htmlAttributes,tooltipText:h.tooltipText,align:h.align,click:h.click}:h}var p={originalEvent:e,item:t};t&&!g(t.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",p),p.cancel||this.trigger("clicked",p,(function(e){!g(i.popObj)&&s&&!e.cancel&&"Popup"===i.overflowMode&&e.item&&"Input"!==e.item.type&&i.popObj.hide({name:"FadeOut",duration:100})}))}},t.prototype.popupClickHandler=function(e,t,i){var n=this.popObj;mt(n.element)?(t.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(n.element.style.minHeight="0px"),t.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=C(this.width),t=C(this.height);"msie"===me.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||Dt(this.element,{height:t}),Dt(this.element,{width:e});var i={role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};St(this.element,i),this.cssClass&&ut([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0&&!S()&&!this.isServerRendered?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,t){var i,n;this.tbarEle||(this.tbarEle=[]);for(var r=0;r<e.length;r++){if(S()&&this.isServerRendered){if(this.isVertical=!!this.element.classList.contains("e-vertical"),!(i=this.element.querySelector("."+Gu).querySelector("."+Uu+'[data-index="'+r+'"]')))continue;"Show"!==e[r].overflow&&e[r].showAlwaysInPopup&&!i.classList.contains("e-separator")&&this.popupPriCount++,e[r].htmlAttributes&&this.setAttr(e[r].htmlAttributes,i),"Button"===e[r].type&&(ye.clearEvents(i),ye.add(i,"click",this.itemClick,this))}else i=this.renderSubComponent(e[r],r);-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[r],t,r),(n=t.querySelector(".e-toolbar-"+e[r].align.toLowerCase()))?(e[r].showAlwaysInPopup&&"Show"!==e[r].overflow||this.tbarAlgEle[(e[r].align+"s").toLowerCase()].push(i),n.appendChild(i)):t.appendChild(i)}if(this.isReact){this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates()}},t.prototype.serverItemsRerender=function(){this.destroyMode(),this.resetServerItems(),this.serverItemsRefresh()},t.prototype.serverItemsRefresh=function(){this.element.querySelector("."+Gu).children.length>0&&(this.itemsAlign(this.items,this.element.querySelector("."+_u)),this.renderLayout(),this.refreshOverflow())},t.prototype.resetServerItems=function(){var e=this.element.querySelector("."+Gu);vt([].slice.call(kt("."+_u+" ."+Uu,this.element)),e),this.clearProperty()},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove("e-vertical"),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add("e-vertical"),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Dt(this.element,{height:C(this.height),width:C(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+_u+" .e-toolbar-center").removeAttribute("style"),this.isVertical?this.scrollModule=new zu({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):this.scrollModule=new Hu({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,"e-tbar-pos"),Dt(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var t,i=this,n=0;return[].slice.call(kt("."+Uu,e)).forEach((function(e){mt(e)&&(t=window.getComputedStyle(e),n+=i.isVertical?e.offsetHeight:e.offsetWidth,n+=parseFloat(i.isVertical?t.marginTop:t.marginRight),n+=parseFloat(i.isVertical?t.marginBottom:t.marginLeft))})),n},t.prototype.getScrollCntEle=function(e){var t=this.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},t.prototype.checkOverflow=function(e,t){if(g(e)||g(t)||!mt(e))return!1;var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var r=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav"),s=0;return r?s=this.isVertical?r.offsetHeight:r.offsetWidth:o&&(s=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),n>i-s},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,"e-tbar-pos"),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,t=e.querySelector("."+_u),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===me.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":g(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(_u)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,"e-toolbar-multirow"),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,"e-multirow-pos")),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==me.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,"e-extended-toolbar"),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(kt("."+_u+" ."+Uu,e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")},t.prototype.separator=function(){var e,t=this.element,i=[].slice.call(t.querySelectorAll(".e-separator")),n=t.querySelector(".e-multirow-separator"),r=t.querySelector(".e-extended-separator");null!==(e="MultiRow"===this.overflowMode?n:r)&&("MultiRow"===this.overflowMode?e.classList.remove("e-multirow-separator"):"Extended"===this.overflowMode&&e.classList.remove("e-extended-separator"));for(var o=0;o<=i.length-1;o++)i[o].offsetLeft<30&&0!==i[o].offsetLeft&&("MultiRow"===this.overflowMode?i[o].classList.add("e-multirow-separator"):"Extended"===this.overflowMode&&i[o].classList.add("e-extended-separator"))},t.prototype.createPopupEle=function(e,t){var i=e.querySelector(".e-hor-nav"),n=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var r=n?i.offsetHeight:i.offsetWidth,o=(n?e.offsetHeight:e.offsetWidth)-r;this.element.classList.remove("e-rtl"),Dt(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,t,i,n,r){var o=e.element,s=kt(".e-overflow-show",i),a=0,l=[].slice.call(kt("."+Ku,o.querySelector("."+_u))),h=0;l.forEach((function(o,l){s=kt(".e-overflow-show",i),o.classList.contains("e-overflow-show")&&s.length>0?e.tbResize&&s.length>l?(i.insertBefore(o,s[l]),++h):(i.insertBefore(o,i.children[s.length]),++h):o.classList.contains("e-overflow-show")||e.tbResize&&o.classList.contains("e-overflow-hide")&&i.children.length>0&&0===s.length?(i.insertBefore(o,i.firstChild),++h):o.classList.contains("e-overflow-hide")?t.push(o):e.tbResize?(i.insertBefore(o,i.childNodes[a+h]),++a):i.appendChild(o),o.classList.contains("e-separator")?Dt(o,{display:"",height:r+"px"}):Dt(o,{display:"",height:n+"px"})})),t.forEach((function(e){i.appendChild(e)}));for(var p=kt("."+Uu,o.querySelector("."+_u)),d=p.length-1;d>=0;d--){var c=p[d];if(!c.classList.contains("e-separator")||"Extended"===this.overflowMode)break;Dt(c,{display:"none"})}},t.prototype.createPopup=function(){var e,t,i,n,r,o=this.element;"Extended"===this.overflowMode&&(n=o.querySelector(".e-separator:not(."+Ku+")"),i="auto"===o.style.height||""===o.style.height?null:n.offsetHeight),t=o.querySelector("."+Uu+":not(.e-separator):not(."+Ku+")"),e="auto"===o.style.height||""===o.style.height?null:t&&t.offsetHeight;if(o.querySelector("#"+o.id+"_popup.e-toolbar-pop"))r=o.querySelector("#"+o.id+"_popup.e-toolbar-pop");else{var s=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),a=this.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop"});r="Extended"===this.overflowMode?s:a}this.pushingPoppedEle(this,[],r,e,i),this.popupInit(o,r)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;Dt(i,{maxHeight:"",display:"block"}),Dt(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),Dt(this.element,{overflow:""});var n=window.getComputedStyle(this.element),r=new lr(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(r.appendTo(t),"Extended"===this.overflowMode&&(r.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),r.offsetX=0),ye.add(document,"scroll",this.docEvent.bind(this)),ye.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector(".e-hor-nav");o.classList.add("e-nav-active"),Et(o.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else r.hide();this.popObj=r,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,"e-tbar-extended"):this.remove(this.element,"e-tbar-extended"))},t.prototype.popupOpen=function(e){var t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,r=n.querySelector(".e-hor-nav");Dt(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+Dn(n).top,s=r.firstElementChild;r.classList.add("e-nav-active"),Et(s,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var a=g(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-a+5);t.height=l+"px";for(var h=0;h<=i.childElementCount;h++){var p=i.children[h];if(p.offsetTop+p.offsetHeight>l){l=p.offsetTop;break}}Dt(t.element,{maxHeight:l+"px"})}else if(this.isVertical){var d=this.element.getBoundingClientRect();Dt(t.element,{maxHeight:d.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}t&&t.refreshPosition()},t.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove("e-nav-active"),Et(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,t,i,n){for(var r,o=this.popupPriCount>0,s=i,a=0,l=0,h=0,p=function(e,t){var i=!1;return t.forEach((function(t){e.classList.contains(t)&&(i=!0)})),i},d=t.length-1;d>=0;d--){var c=void 0,u=window.getComputedStyle(t[d]);this.isVertical?(c=parseFloat(u.marginTop),c+=parseFloat(u.marginBottom)):(c=parseFloat(u.marginRight),c+=parseFloat(u.marginLeft));var g=t[d]===this.tbarEle[0];g&&(this.tbarEleMrgn=c),r=this.isVertical?t[d].offsetHeight:t[d].offsetWidth;var f=g?r+c:r;if(p(t[d],["e-popup-alone"])&&o&&(t[d].classList.add(Ku),this.isVertical?Dt(t[d],{display:"none",minHeight:f+"px"}):Dt(t[d],{display:"none",minWidth:f+"px"}),h++),this.isVertical?t[d].offsetTop+t[d].offsetHeight+c>i:t[d].offsetLeft+t[d].offsetWidth+c>i){if(t[d].classList.contains("e-separator")){if("Extended"===this.overflowMode){if(l===h)p(m=t[d],["e-separator","e-ignore"])&&(t[d].classList.add(Ku),h++);l++}else if("Popup"===this.overflowMode){var m;if(a>0&&l===h)p(m=t[d+l+(a-1)],["e-separator","e-ignore"])&&Dt(m,{display:"none"});a++,l=0,h=0}}else l++;t[d].classList.contains("e-overflow-show")&&n||p(t[d],["e-separator","e-ignore"])?i-=(this.isVertical?t[d].offsetHeight:t[d].offsetWidth)+c:(t[d].classList.add(Ku),this.isVertical?Dt(t[d],{display:"none",minHeight:f+"px"}):Dt(t[d],{display:"none",minWidth:f+"px"}),h++)}}if(n){var y=kt("."+Uu+":not(."+Ku+")",this.element);this.checkPriority(e,y,s,!1)}},t.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;var n=this.createElement("div",{id:t,className:i});"msie"!==me.info.name&&"edge"!==me.info.name||n.classList.add("e-ie-align");var r=this.createElement("div",{className:"e-popup-down-icon e-icons"});n.appendChild(r),n.setAttribute("tabindex","0"),n.setAttribute("role","list"),e.appendChild(n)},t.prototype.tbarPriRef=function(e,t,i,n,r,o,s,a){var l=a,h=this.popObj.element,p=kt("."+Ku+":not(.e-overflow-show)",h).length,d=function(e,t){return e.classList.contains(t)};if(0===kt(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var c=e.children[t-(t-i)-1],u=!g(c)&&d(c,"e-ignore");if(!g(c)&&d(c,"e-separator")&&!mt(c)||u){c.style.display="inherit";var f=c.offsetWidth+2*parseFloat(window.getComputedStyle(c).marginRight),m=c.previousElementSibling;o+f<s||r?(e.insertBefore(n,e.children[t+l-(t-i)]),g(m)||(m.style.display="")):m.classList.contains("e-separator")&&(m.style.display="none"),c.style.display=""}else e.insertBefore(n,e.children[t+l-(t-i)])}else e.insertBefore(n,e.children[t+l-p])},t.prototype.popupRefresh=function(e,t){var i=this,n=this.element,r=this.isVertical,o=n.querySelector(".e-hor-nav"),s=n.querySelector("."+_u);if(!g(o)){var a;s.removeAttribute("style"),e.style.display="block",a=r?n.offsetHeight-(o.offsetHeight+s.offsetHeight):n.offsetWidth-(o.offsetWidth+s.offsetWidth);var l=0;[].slice.call(e.children).forEach((function(e){l+=i.popupEleWidth(e),Dt(e,{position:""})})),a+(r?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(a,e,t),e.style.display="",0===e.children.length&&o&&this.popObj&&(wt(o),o=null,this.popObj.destroy(),wt(this.popObj.element),this.popObj=null,n.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),n=[],r=0;return i.length>0?(i.forEach((function(e){n.push([].slice.call(t.children).indexOf(e))})),n.forEach((function(t){t<=e&&r++})),r):0},t.prototype.checkPopupRefresh=function(e,t){t.style.display="block";var i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");var n=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,r=e.querySelector("."+_u).offsetWidth;return t.style.removeProperty("display"),n>i+r},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var n=e.children[0];!g(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!g(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",g(i)||(i.style.display="")}return t},t.prototype.popupEleRefresh=function(e,t,i){for(var n,r,o=this.popupPriCount>0,s=this.tbarEle,a=this.element.querySelector("."+_u),l=0,h=function(t){if(t.classList.contains("e-popup-alone")&&o&&!i)return"continue";var h=p.popupEleWidth(t);if(t===p.tbarEle[0]&&(h+=p.tbarEleMrgn),t.style.position="",!(h<e||i))return"break";if(Dt(t,{minWidth:"",height:"",minHeight:""}),t.classList.contains("e-overflow-hide")||t.classList.remove(Ku),r=p.tbarEle.indexOf(t),p.tbarAlign){var d=p.items[r].align;r=p.tbarAlgEle[(d+"s").toLowerCase()].indexOf(t),s=p.tbarAlgEle[(d+"s").toLowerCase()],a=p.element.querySelector("."+_u+" .e-toolbar-"+d.toLowerCase())}var c=0;"Extended"!==p.overflowMode&&s.slice(0,r).forEach((function(t){(t.classList.contains("e-overflow-show")||t.classList.contains("e-separator"))&&(t.classList.contains("e-separator")&&(t.style.display="",e-=t.offsetWidth),c++)})),l=p.ignoreEleFetch(r,a),t.classList.contains("e-overflow-show")?(p.tbarPriRef(a,r,c,t,i,h,e,l),e-=t.offsetWidth):0===r?(a.insertBefore(t,a.firstChild),e-=t.offsetWidth):(n=kt(".e-overflow-show",p.popObj.element).length,a.insertBefore(t,a.children[r+l-n]),e-=t.offsetWidth),t.style.height=""},p=this,d=0,c=[].slice.call(t.children);d<c.length;d++){if("break"===h(c[d]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(_u)[0])&&!i&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+_u);if(!g(e)&&e.classList.contains("e-tbar-pos")){this.remove(e,"e-tbar-pos");var t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+_u);this.add(e,"e-tbar-pos"),this.itemPositioning()},t.prototype.itemPositioning=function(){var e,t=this.element.querySelector("."+_u);if(!g(t)&&t.classList.contains("e-tbar-pos")){var i,n=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var r=this.isVertical?"e-vscroll-content":"e-hscroll-content";i=[].slice.call(t.querySelector("."+r).children)}else i=[].slice.call(t.childNodes);e=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var o=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){o-=this.isVertical?n.offsetHeight:n.offsetWidth;var s=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=s:i[2].style.bottom=s:this.enableRtl?i[2].style.left=s:i[2].style.right=s}if(!(o<=e)){var a=(o-e-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var l=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+a+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=l:i[1].style.marginTop=l:this.enableRtl?i[1].style.marginRight=l:i[1].style.marginLeft=l}}},t.prototype.tbarItemAlign=function(e,t,i){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var r=[];if(r.push(this.createElement("div",{className:"e-toolbar-left"})),r.push(this.createElement("div",{className:"e-toolbar-center"})),r.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)r.forEach((function(e){t.appendChild(e)})),this.tbarAlign=!0,this.add(t,"e-tbar-pos");else if("Left"!==e.align){var o=t.childNodes,s=r[0];[].slice.call(o).forEach((function(e){n.tbarAlgEle.lefts.push(e),s.appendChild(e)})),t.appendChild(s),t.appendChild(r[1]),t.appendChild(r[2]),this.tbarAlign=!0,this.add(t,"e-tbar-pos")}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,_u),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach((function(t){"DIV"===t.tagName&&(e.tbarEle.push(t),t.setAttribute("aria-disabled","false"),e.add(t,Uu))}))},t.prototype.renderItems=function(){var e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){var i=void 0;e&&e.children.length>0&&(i=e.querySelector("."+_u)),i||(i=this.createElement("div",{className:_u})),this.itemsAlign(t,i),e.appendChild(i)}},t.prototype.setAttr=function(e,t){for(var i,n=Object.keys(e),r=0;r<n.length;r++)"class"===(i=n[r])?this.add(t,e[i]):t.setAttribute(i,e[i])},t.prototype.enableItems=function(e,t){var i,n=e,r=n.length;g(t)&&(t=!0);var o=function(e,t){e?(t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false")):(t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"))};if(!g(r)&&r>=1){for(var s=0,a=[].slice.call(n);s<r;s++){var l=a[s];if("number"==typeof l){if(g(i=this.getElementByIndex(l)))return;n[s]=i}else i=l;o(t,i)}t?gt(n,"e-overlay"):ut(n,"e-overlay")}else{if("number"==typeof n){if(g(i=this.getElementByIndex(n)))return}else i=e;o(t,i)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[e]?this.tbarEle[e]:null},t.prototype.addItems=function(e,t){var i;this.extendedOpen();var n=this.element.querySelector("."+_u);if(g(n))this.itemsRerender(e);else{var r,o="Left";g(t)&&(t=0),e.forEach((function(e){g(e.align)||"Left"===e.align||"Left"!==o||(o=e.align)}));for(var s=0,a=e;s<a.length;s++){var l=a[s];if(g(l.type)&&(l.type="Button"),i=kt("."+Uu,this.element),l.align=o,r=this.renderSubComponent(l,t),this.tbarEle.length>=t&&i.length>=0){g(this.scrollModule)&&this.destroyMode();var h="L"===l.align[0]?0:"C"===l.align[0]?1:2,p=void 0;this.tbarAlign||"Left"===o?this.tbarAlign?((p=Tt(i[0],"."+_u).children[h]).insertBefore(r,p.children[t]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(t,0,r),this.refreshPositioning()):0===i.length?(i=kt("."+_u,this.element))[0].appendChild(r):i[0].parentNode.insertBefore(r,i[t]):(this.tbarItemAlign(l,n,1),this.tbarAlign=!0,(p=Tt(i[0],"."+_u).children[h]).appendChild(r),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(r),this.refreshPositioning()),this.items.splice(t,0,l),this.tbarEle.splice(t,0,r),t++,this.offsetWid=n.offsetWidth}}n.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var t,i=e,n=[].slice.call(kt("."+Uu,this.element));if("number"==typeof i)t=parseInt(e.toString(),10),this.removeItemByIndex(t,n);else if(i&&i.length>1)for(var r=0,o=[].slice.call(i);r<o.length;r++){var s=o[r];t=this.tbarEle.indexOf(s),this.removeItemByIndex(t,n),n=kt("."+Uu,this.element)}else{s=i&&i.length&&1===i.length?i[0]:e;t=n.indexOf(s),this.removeItemByIndex(t,n)}this.resize()},t.prototype.removeItemByIndex=function(e,t){if(this.tbarEle[e]&&t[e]){var i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){var n;n=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]),this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(n,1)}this.isReact&&this.clearTemplate(),wt(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}},t.prototype.templateRender=function(e,t,i,n){var r,o=i.type,s=e;if("object"==typeof e&&(r="function"==typeof s.appendTo),"string"!=typeof e&&r){if("Input"===o){h=this.createElement("input");i.id?h.id=i.id:h.id=m("tbr-ipt"),t.appendChild(h),s.appendTo(h)}}else{var a,l=void 0;a="string"==typeof e?e.trim():e;try{if("object"!=typeof e||g(e.tagName)){if(document.querySelectorAll(a).length){var h,p=(h=document.querySelector(a)).outerHTML.trim();t.appendChild(h),h.style.display="",g(p)||this.tempId.push(a)}}else t.appendChild(e)}catch(e){l=Ge(a)}var d=void 0;if(!g(l))d=l({},this,"template",this.element.id+n+"_template",this.isStringTemplate);!g(d)&&d.length>0&&[].slice.call(d).forEach((function(e){g(e.tagName)||(e.style.display=""),t.appendChild(e)}))}this.add(t,"e-template"),this.tbarEle.push(t)},t.prototype.buttonRendering=function(e,t){var i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");var n,r,o=e.text;e.id?i.id=e.id:i.id=m("e-tbr-btn");var s=this.createElement("span",{className:"e-tbar-btn-text"});o?(s.innerHTML=this.enableHtmlSanitizer?Oi.sanitize(o):o,i.appendChild(s),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(n=e.prefixIcon+" e-icons",r="Left"):(n=e.suffixIcon+" e-icons",r="Right"));var a=new Zr({iconCss:n,iconPosition:r});return a.createElement=this.createElement,a.appendTo(i),e.width&&Dt(i,{width:C(e.width)}),i},t.prototype.renderSubComponent=function(e,t){var i,n;(i=this.createElement("div",{className:Uu})).setAttribute("aria-disabled","false");var r=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?Oi.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,i),e.tooltipText&&i.setAttribute("title",r.textContent),e.cssClass&&(i.className=i.className+" "+e.cssClass),e.template)this.templateRender(e.template,i,e,t);else switch(e.type){case"Button":(n=this.buttonRendering(e,i)).setAttribute("tabindex","-1"),n.setAttribute("aria-label",e.text||e.tooltipText),i.appendChild(n),i.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(i,"e-separator")}if(e.showTextOn){var o=e.showTextOn;"Toolbar"===o?(this.add(i,"e-toolbar-text"),this.add(i,"e-tbtn-align")):"Overflow"===o&&this.add(i,"e-popup-text")}if(e.overflow){var s=e.overflow;"Show"===s?this.add(i,"e-overflow-show"):"Hide"===s&&(i.classList.contains("e-separator")||this.add(i,"e-overflow-hide"))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!i.classList.contains("e-separator")&&(this.add(i,"e-popup-alone"),this.popupPriCount++),e.disabled&&this.add(i,"e-overlay"),!1===e.visible&&this.add(i,"e-hidden"),i},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){g(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,g(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,this.isReact&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var t=this.checkOverflow(e,e.getElementsByClassName(_u)[0]);if(!t){this.destroyScroll();var i=e.querySelector("."+_u);g(i)||(this.remove(i,"e-multirow-pos"),this.tbarAlign&&this.add(i,"e-tbar-pos"))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector(".e-hscroll-bar")&&(this.scrollStep=this.element.querySelector(".e-hscroll-bar").offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.extendedOpen=function(){var e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))},t.prototype.onPropertyChanged=function(e,t){var i=this.element;this.extendedOpen();for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"items":if(e.items instanceof Array&&t.items instanceof Array||this.isServerRendered)S()&&this.isServerRendered?(this.serverItemsRerender(),this.notify("onItemsChanged",{})):this.itemsRerender(e.items);else for(var o=Object.keys(e.items),s=0;s<o.length;s++){var a=parseInt(Object.keys(e.items)[s],10),l=Object.keys(e.items[a])[0],h=Object(e.items[a])[l];if(this.tbarAlign||"align"===l){this.refresh(),this.trigger("created");break}var p="showAlwaysInPopup"===l&&!h,d="overflow"===l&&0!==this.popupPriCount;(p||this.items[a].showAlwaysInPopup&&d)&&--this.popupPriCount,g(this.scrollModule)&&this.destroyMode();var c=[].slice.call(kt("."+_u+" ."+Uu,i));this.isReact&&this.clearTemplate(),wt(c[a]),this.tbarEle.splice(a,1),this.addItems([this.items[a]],a),this.items.splice(a,1),this.items[a].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":var u=i.offsetWidth;Dt(i,{width:C(e.width)}),this.renderOverflowMode(),this.popObj&&u<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":Dt(this.element,{height:C(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,"e-rtl"),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl"),g(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,"e-rtl"):this.remove(this.scrollModule.element,"e-rtl")),g(this.popObj)||(e.enableRtl?this.add(this.popObj.element,"e-rtl"):this.remove(this.popObj.element,"e-rtl")),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&gt([this.element],t.cssClass.split(" ")),e.cssClass&&ut([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}},t.prototype.hideItem=function(e,t){var i,n,r="object"==typeof e,o=e,s=[].slice.call(kt("."+Uu,this.element));if(r)n=e;else if(this.tbarEle[o]){n=[].slice.call(kt("."+Uu,this.element))[o]}if(n){if(t?n.classList.add("e-hidden"):n.classList.remove("e-hidden"),t&&g(this.element.getAttribute("tabindex"))&&!n.classList.contains("e-separator")){if(g(n.firstElementChild.getAttribute("tabindex"))){n.firstElementChild.setAttribute("tabindex","-1");var a=[].slice.call(kt("."+Uu,this.element));r&&(o=a.indexOf(n));for(var l=a[++o];l;){if(!this.eleContains(l)){l.firstElementChild.removeAttribute("tabindex");break}l=a[++o]}}}else if(g(this.element.getAttribute("tabindex"))&&!n.classList.contains("e-separator"))for(var h=!1,p=!1,d=s[i=0];d;)if(d.classList.contains("e-separator"))d=s[++i];else if(g(d.firstElementChild.getAttribute("tabindex")))d.firstElementChild.setAttribute("tabindex","-1"),h=!0;else{if(h&&p)break;this.eleContains(d)||(d.firstElementChild.removeAttribute("tabindex"),p=!0),d=s[++i]}this.refreshOverflow()}},Wu([Wt([],Yu)],t.prototype,"items",void 0),Wu([zt("auto")],t.prototype,"width",void 0),Wu([zt("auto")],t.prototype,"height",void 0),Wu([zt("")],t.prototype,"cssClass",void 0),Wu([zt("Scrollable")],t.prototype,"overflowMode",void 0),Wu([zt()],t.prototype,"scrollStep",void 0),Wu([zt(!0)],t.prototype,"enableCollision",void 0),Wu([zt(!0)],t.prototype,"enableHtmlSanitizer",void 0),Wu([zt(!0)],t.prototype,"allowKeyboard",void 0),Wu([_t()],t.prototype,"clicked",void 0),Wu([_t()],t.prototype,"created",void 0),Wu([_t()],t.prototype,"destroyed",void 0),Wu([_t()],t.prototype,"beforeCreate",void 0),t=Wu([Gt],t)}(pi),Qu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ju=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Zu="e-tab-header",$u="e-toolbar-items",eg="e-toolbar-item",tg="e-toolbar-popup",ig="e-vertical-tab",ng=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),Ju([zt("SlideLeftIn")],t.prototype,"effect",void 0),Ju([zt(600)],t.prototype,"duration",void 0),Ju([zt("ease")],t.prototype,"easing",void 0),t}(oi),rg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),Ju([qt({effect:"SlideLeftIn",duration:600,easing:"ease"},ng)],t.prototype,"previous",void 0),Ju([qt({effect:"SlideRightIn",duration:600,easing:"ease"},ng)],t.prototype,"next",void 0),t}(oi),og=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),Ju([zt("")],t.prototype,"text",void 0),Ju([zt("")],t.prototype,"iconCss",void 0),Ju([zt("left")],t.prototype,"iconPosition",void 0),t}(oi),sg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),Ju([qt({},og)],t.prototype,"header",void 0),Ju([zt(null)],t.prototype,"headerTemplate",void 0),Ju([zt("")],t.prototype,"content",void 0),Ju([zt("")],t.prototype,"cssClass",void 0),Ju([zt(!1)],t.prototype,"disabled",void 0),Ju([zt(!0)],t.prototype,"visible",void 0),t}(oi),ag=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.show={},n.hide={},n.maxHeight=0,n.title="Close",n.lastIndex=0,n.isAdd=!1,n.isIconAlone=!1,n.resizeContext=n.refreshActElePosition.bind(n),n.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},n}return Qu(t,e),t.prototype.destroy=function(){var t=this;if(this.isReact&&this.clearTemplate(),g(this.tbObj)||this.tbObj.destroy(),this.unWireEvents(),["role","aria-disabled","aria-activedescendant","tabindex","aria-orientation"].forEach((function(e){t.element.removeAttribute(e)})),this.expTemplateContent(),this.isTemplate){var i=xt(".e-tab > .e-content",this.element);this.element.classList.remove("e-template"),g(i)||(i.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)Ct(this.element.firstElementChild);e.prototype.destroy.call(this),this.trigger("destroyed")},t.prototype.refresh=function(){this.isReact&&this.clearTemplate(),this.isServerRendered?this.isServerRendered&&"Dynamic"!==this.loadOn&&this.setActiveBorder():e.prototype.refresh.call(this),this.isReact&&this.renderReactTemplates()},t.prototype.preRender=function(){var e=Tt(this.element,".e-content");this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],g(e)||(e.parentElement.classList.add("e-nested"),this.isNested=!0);var t=me.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";Dt(this.element,{width:C(this.width),height:C(this.height)}),this.setCssClass(this.element,this.cssClass,!0),St(this.element,{role:"tablist","aria-disabled":"false","aria-activedescendant":""}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig()},t.prototype.render=function(){this.btnCls=this.createElement("span",{className:"e-icons e-close-icon",attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:_e(),this.renderContainer(),this.wireEvents(),this.initRender=!1},t.prototype.renderContainer=function(){if(this.isServerRendered)this.isTemplate=!1;else{var e=this.element;if(this.items.length>0&&0===e.children.length)e.appendChild(this.createElement("div",{className:"e-content"})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:Zu})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,e.classList.add("e-template");var t=e.querySelector("."+Zu);t&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,t)}if(!g(xt("."+Zu,this.element))&&!g(xt(".e-content",this.element))){if(this.renderHeader(),this.tbItems=xt("."+Zu+" ."+$u,this.element),g(this.tbItems)||Jt(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),kt("."+eg,this.element).length>0){var i=void 0;this.tbItems=xt("."+Zu+" ."+$u,this.element),this.bdrLine=this.createElement("div",{className:"e-indicator e-hidden e-ignore"}),g(i=xt("."+this.scrCntClass,this.tbItems))?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):i.insertBefore(this.bdrLine,i.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}this.setRTL(this.enableRtl)}}},t.prototype.serverItemsChanged=function(){if(this.enableAnimation=!1,this.setActive(this.selectedItem,!0),"Dynamic"!==this.loadOn&&!g(this.cntEle)){var e=[].slice.call(this.cntEle.children),t="e-content"+this.tabId+"_"+this.selectedItem;e.forEach((function(e){e.classList.contains("e-active")&&e.id!==t&&e.classList.remove("e-active"),e.id===t&&e.classList.add("e-active")})),this.prevIndex=this.selectedItem,this.triggerAnimation("e-item"+this.tabId+"_"+this.selectedItem,!1)}this.enableAnimation=!0},t.prototype.headerReady=function(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.headerPlacement,this.hdrEle),g(this.hdrEle)||(this.tbObj=this.hdrEle&&this.hdrEle.ej2_instances[0]),this.tbObj.clicked=this.clickHandler.bind(this),this.tbObj.on("onItemsChanged",this.serverItemsChanged.bind(this)),this.tbItems=xt("."+Zu+" ."+$u,this.element),g(this.tbItems)||Jt(this.tbItems,{selector:".e-tab-wrap"}),kt("."+eg,this.element).length>0){var e=void 0;this.bdrLine=xt(".e-indicator.e-ignore",this.element),g(e=xt("."+this.scrCntClass,this.tbItems))?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):e.insertBefore(this.bdrLine,e.firstElementChild),this.select(this.selectedItem)}if(this.cntEle=xt(".e-tab > .e-content",this.element),g(this.cntEle)||(this.touchModule=new Pi(this.cntEle,{swipe:this.swipeHandler.bind(this)})),"Demand"===this.loadOn){var t=this.setActiveContent();this.triggerAnimation(t,!1)}this.initRender=!1,this.renderComplete()},t.prototype.setActiveContent=function(){var e="e-item"+this.tabId+"_"+this.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(e));return g(t)||t.classList.add("e-active"),e},t.prototype.renderHeader=function(){var e=this,t=this.headerPlacement,i=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains(Zu)&&this.setProperties({headerPlacement:"Bottom"},!0);for(var n=this.hdrEle.children.length,r=[],o=0;o<n;o++)r.push(this.hdrEle.children.item(o).innerHTML);if(n>0){for(;this.hdrEle.firstElementChild;)wt(this.hdrEle.firstElementChild);var s=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(s),r.forEach((function(t,i){e.lastIndex=i;var n={className:"e-item",id:"e-item"+e.tabId+"_"+i,attrs:{role:"tab","aria-controls":"e-content"+e.tabId+"_"+i,"aria-selected":"false"}},r=e.createElement("span",{className:"e-tab-text",innerHTML:t,attrs:{role:"presentation"}}).outerHTML,o=e.createElement("div",{className:"e-text-wrap",innerHTML:r+e.btnCls.outerHTML}).outerHTML,a=e.createElement("div",{className:"e-tab-wrap",innerHTML:o,attrs:{tabIndex:"-1"}});s.appendChild(e.createElement("div",n)),kt(".e-item",s)[i].appendChild(a)}))}}else i=this.parseObject(this.items,0);this.tbObj=new Xu({width:"Left"===t||"Right"===t?"auto":"100%",height:"Left"===t||"Right"===t?"100%":"auto",overflowMode:this.overflowMode,items:0!==i.length?i:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),St(this.hdrEle,{"aria-label":"tab-header"}),this.updateOrientationAttribute(),this.setCloseButton(this.showCloseButton)},t.prototype.renderContent=function(){this.cntEle=xt(".e-content",this.element);var e=kt("."+eg,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";for(var t=this.cntEle.children,i=0;i<e.length;i++)t.length-1>=i&&(t.item(i).className+="e-item",St(t.item(i),{role:"tabpanel","aria-labelledby":"e-item"+this.tabId+"_"+i}),t.item(i).id="e-content"+this.tabId+"_"+i)}},t.prototype.reRenderItems=function(){this.renderContainer(),g(this.cntEle)||(this.touchModule=new Pi(this.cntEle,{swipe:this.swipeHandler.bind(this)}))},t.prototype.parseObject=function(e,t){var i,n=this,r=kt("."+eg,this.element).length,o=[],s=[];return e.forEach((function(e,a){var l=g(e.header)||g(e.header.iconPosition)?"":e.header.iconPosition,h=g(e.header)||g(e.header.iconCss)?"":e.header.iconCss;if(g(e.headerTemplate)&&(g(e.header)||g(e.header.text)||0===e.header.text.length&&""===h))s.push(a);else{var p=e.headerTemplate||e.header.text;"string"==typeof p&&n.enableHtmlSanitizer&&(p=Oi.sanitize(p)),n.lastIndex=0===r?a:n.isReplace?t+a:n.lastIndex+1;var d=e.disabled?" e-disable e-overlay":"",c=!1===e.visible?" e-hidden":"";i=n.createElement("div",{className:"e-tab-text",attrs:{role:"presentation"}});var u=p instanceof Object?p.outerHTML:p,f=!g(u)&&""!==u;g(p.tagName)?n.headerTextCompile(i,p,a):i.appendChild(p);var m=n.createElement("span",{className:"e-icons e-tab-icon e-icon-"+l+" "+h}),y=n.createElement("div",{className:"e-text-wrap"});y.appendChild(i),""!==p&&void 0!==p&&""!==h?("left"===l||"top"===l?y.insertBefore(m,y.firstElementChild):y.appendChild(m),i,n.isIconAlone=!1):(""===h?i:m)===m&&(wt(i),y.appendChild(m),n.isIconAlone=!0);var v=e.disabled?{}:{tabIndex:"-1"};y.appendChild(n.btnCls.cloneNode(!0));var b=n.createElement("div",{className:"e-tab-wrap",attrs:v});b.appendChild(y),n.itemIndexArray===[]?n.itemIndexArray.push("e-item"+n.tabId+"_"+n.lastIndex):n.itemIndexArray.splice(t+a,0,"e-item"+n.tabId+"_"+n.lastIndex);var w={htmlAttributes:{id:"e-item"+n.tabId+"_"+n.lastIndex,role:"tab","aria-selected":"false"},template:b};w.cssClass=(void 0!==e.cssClass?e.cssClass:" ")+" "+d+" "+c+(""!==h?"e-i"+l:"")+" "+(f?"":"e-icon"),"top"!==l&&"bottom"!==l||n.element.classList.add("e-vertical-icon"),o.push(w),a++}})),this.isAdd||s.forEach((function(e){n.items.splice(e,1)})),this.isIconAlone?this.element.classList.add("e-icon-tab"):this.element.classList.remove("e-icon-tab"),o},t.prototype.removeActiveClass=function(){var e=this.getTabHeader();if(e){var t=kt("."+eg+".e-active",e);[].slice.call(t).forEach((function(e){return e.classList.remove("e-active")}))}},t.prototype.checkPopupOverflow=function(e){this.tbPop=xt(".e-toolbar-pop",this.element);var t=xt(".e-hor-nav",this.element),i=xt("."+$u,this.element),n=i.lastChild,r=!1;return(!this.isVertical()&&(this.enableRtl&&t.offsetLeft+t.offsetWidth>i.offsetLeft||!this.enableRtl&&t.offsetLeft<i.offsetWidth)||this.isVertical()&&t.offsetTop<n.offsetTop+n.offsetHeight)&&(r=!0),r&&(e.classList.add(tg),this.tbPop.insertBefore(e,kt("."+tg,this.tbPop)[0])),!0},t.prototype.popupHandler=function(e){var t=e.querySelector(".e-ripple-element");g(t)||(t.outerHTML="",e.querySelector(".e-tab-wrap").classList.remove("e-ripple")),this.tbItem=kt("."+$u+" ."+eg,this.hdrEle);var i=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(e.classList.remove(tg),e.removeAttribute("style"),this.tbItems.appendChild(e),this.actEleId=e.id,this.checkPopupOverflow(i)){var n=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(n)}this.isPopup=!0}return kt("."+eg,this.tbItems).length-1},t.prototype.updateOrientationAttribute=function(){St(this.element,{"aria-orientation":this.isVertical()?"vertical":"horizontal"})},t.prototype.setCloseButton=function(e){var t=xt("."+Zu,this.element);!0===e?t.classList.add("e-close-show"):t.classList.remove("e-close-show"),this.tbObj.refreshOverflow(),this.refreshActElePosition()},t.prototype.prevCtnAnimation=function(e,t){this.enableRtl||this.element.classList.contains("e-rtl");return this.isPopup||e<=t?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null},t.prototype.triggerPrevAnimation=function(e,t){var i=this,n=this.prevCtnAnimation(t,this.selectedItem);g(n)?e.classList.remove("e-active"):(n.begin=function(){Dt(e,{position:"absolute"}),e.classList.add("e-progress"),e.classList.add("e-view")},n.end=function(){e.style.display="none",e.classList.remove("e-active"),e.classList.remove("e-progress"),e.classList.remove("e-view"),Dt(e,{display:"",position:""}),0!==e.childNodes.length||i.isTemplate||wt(e)},new Qt(n).animate(e))},t.prototype.triggerAnimation=function(e,t){var i,n,r=this,o=this.prevIndex;if(!this.isServerRendered||this.isServerRendered&&"Dynamic"!==this.loadOn){[].slice.call(this.element.querySelector(".e-content").children).forEach((function(e){e.id===r.prevActiveEle&&(i=e)}));var s=this.tbItem[o];if(n=this.getTrgContent(this.cntEle,this.extIndex(e)),g(i)&&!g(s)){var a=this.extIndex(s.id);i=this.getTrgContent(this.cntEle,a)}}else n=this.cntEle.firstElementChild;if(g(n)||(this.prevActiveEle=n.id),this.initRender||!1===t||this.animation==={}||g(this.animation))i&&i!==n&&i.classList.remove("e-active");else{var l,h=xt(".e-content",this.element);if(this.prevIndex>this.selectedItem&&!this.isPopup){var p=this.animation.previous.effect;l={name:"None"===p?"":"SlideLeftIn"!==p?p:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){var d=this.animation.next.effect;l={name:"None"===d?"":"SlideRightIn"!==d?d:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}l.progress=function(){h.classList.add("e-progress"),r.setActiveBorder()},l.end=function(){h.classList.remove("e-progress"),n.classList.add("e-active")},this.initRender||g(i)||this.triggerPrevAnimation(i,o),this.isPopup=!1,""===l.name?n.classList.add("e-active"):new Qt(l).animate(n)}},t.prototype.keyPressed=function(e){var t=Tt(e,"."+Zu+" ."+eg),i=this.getEleIndex(t);!g(this.popEle)&&e.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):e.classList.contains("e-scroll-nav")?e.click():g(t)||!1!==t.classList.contains("e-active")||(this.select(i),g(this.popEle)||this.popObj.hide(this.hide))},t.prototype.getTabHeader=function(){var e=[].slice.call(this.element.children).filter((function(e){return e.classList.contains(Zu)}));if(e.length>0)return e[0];var t=[].slice.call(this.element.children).filter((function(e){return!e.classList.contains("blazor-template")}))[0];return t?[].slice.call(t.children).filter((function(e){return e.classList.contains(Zu)}))[0]:void 0},t.prototype.getEleIndex=function(e){return Array.prototype.indexOf.call(kt("."+eg,this.getTabHeader()),e)},t.prototype.extIndex=function(e){return e.replace("e-item"+this.tabId+"_","")},t.prototype.expTemplateContent=function(){var e=this;this.templateEle.forEach((function(t){g(e.element.querySelector(t))||(document.body.appendChild(e.element.querySelector(t)).style.display="none")}))},t.prototype.templateCompile=function(e,t,i){var n=this.createElement("div");this.compileElement(n,t,"content",i),0!==n.childNodes.length&&e.appendChild(n),this.isReact&&this.renderReactTemplates()},t.prototype.compileElement=function(e,t,i,n){var r,o;"string"==typeof t&&S()&&0!==t.indexOf("<div>Blazor")?(t=t.trim(),e.innerHTML=Oi.sanitize(t)):r=Ge(t),g(r)||(o=S()&&!this.isStringTemplate&&0===t.indexOf("<div>Blazor")?r({},this,i,this.element.id+n+"_"+i,this.isStringTemplate):r({},this,i)),!g(r)&&o.length>0&&[].slice.call(o).forEach((function(t){e.appendChild(t)}))},t.prototype.headerTextCompile=function(e,t,i){this.compileElement(e,t,"headerTemplate",i)},t.prototype.getContent=function(e,t,i,n){var r;if("string"==typeof t||g(t.innerHTML))if("string"==typeof t&&this.enableHtmlSanitizer&&(t=Oi.sanitize(t)),"."===t[0]||"#"===t[0])if(document.querySelectorAll(t).length){var o=document.querySelector(t);r=o.outerHTML.trim(),"clone"===i?e.appendChild(o.cloneNode(!0)):(e.appendChild(o),o.style.display="")}else this.templateCompile(e,t,n);else this.templateCompile(e,t,n);else e.appendChild(t);g(r)||-1===this.templateEle.indexOf(t.toString())&&this.templateEle.push(t.toString())},t.prototype.getTrgContent=function(e,t){return this.element.classList.contains("e-nested")?xt(".e-nested> .e-content > #e-content"+this.tabId+"_"+t,this.element):this.findEle(e.children,"e-content"+this.tabId+"_"+t)},t.prototype.findEle=function(e,t){for(var i,n=0;n<e.length;n++)if(e[n].id===t){i=e[n];break}return i},t.prototype.isVertical=function(){var e="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e},t.prototype.addVerticalClass=function(){if(this.isVertical()){var e="Left"===this.headerPlacement?"e-vertical-left":"e-vertical-right";ut([this.hdrEle],["e-vertical",e]),this.element.classList.contains("e-nested")?ut([this.hdrEle],[ig,e]):ut([this.element],[ig,e])}"Bottom"===this.headerPlacement&&ut([this.hdrEle],["e-horizontal-bottom"])},t.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},t.prototype.changeOrientation=function(e){this.setOrientation(e,this.hdrEle);var t=!!this.hdrEle.classList.contains("e-vertical");gt([this.element],[ig]),gt([this.hdrEle],["e-vertical","e-vertical-left","e-vertical-right"]),t!==this.isVertical()&&this.changeToolbarOrientation(),this.addVerticalClass(),this.updateOrientationAttribute(),this.setActiveBorder(),this.focusItem()},t.prototype.focusItem=function(){var e=xt(" #e-item"+this.tabId+"_"+this.selectedItem,this.hdrEle);g(e)||e.firstElementChild.focus()},t.prototype.serverChangeOrientation=function(e,t){this.setOrientation(e,this.hdrEle),gt([this.element],[ig]),("Left"===e||"Right"===e)!==("Left"===t||"Right"===t)&&this.changeToolbarOrientation(),this.isVertical()&&ut([this.element],[ig]),this.updateOrientationAttribute(),this.setActiveBorder(),this.focusItem()},t.prototype.changeToolbarOrientation=function(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()},t.prototype.setOrientation=function(e,t){var i=Array.prototype.indexOf.call(this.element.children,t),n=Array.prototype.indexOf.call(this.element.children,this.element.querySelector(".e-content"));"Bottom"===e&&n>i?this.element.appendChild(t):(gt([t],["e-horizontal-bottom"]),this.element.insertBefore(t,xt(".e-content",this.element)))},t.prototype.setCssClass=function(e,t,i){if(""!==t)for(var n=t.split(" "),r=0;r<n.length;r++)i?e.classList.add(n[r]):e.classList.remove(n[r])},t.prototype.setContentHeight=function(e){if(this.element.classList.contains("e-fill-mode")&&gt([this.element],["e-fill-mode"]),!g(this.cntEle)){var t=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||Dt(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)ut([this.element],["e-fill-mode"]),Dt(this.element,{height:"100%"}),Dt(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"});else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate)for(var i=kt(".e-content > .e-item",this.element),n=0;n<i.length;n++)i[n].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i[n])),i[n].style.removeProperty("display"),i[n].style.removeProperty("visibility");else{this.cntEle=xt(".e-content",this.element),!0===e&&this.cntEle.appendChild(this.createElement("div",{id:"e-content"+this.tabId+"_0",className:"e-item e-active",attrs:{role:"tabpanel","aria-labelledby":"e-item"+this.tabId+"_0"}}));var r=this.cntEle.children.item(0);for(n=0;n<this.items.length;n++)for(this.getContent(r,this.items[n].content,"clone",n),this.maxHeight=Math.max(this.maxHeight,this.getHeight(r));r.firstChild;)r.removeChild(r.firstChild);this.clearTemplate(["content"]),this.templateEle=[],this.getContent(r,this.items[0].content,"render",0),r.classList.remove("e-active")}Dt(this.cntEle,{height:this.maxHeight+"px"})}else Dt(this.cntEle,{height:"auto"})}},t.prototype.getHeight=function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))},t.prototype.setActiveBorder=function(){var e,t,i=this.getTabHeader(),n=xt("."+eg+".e-active",i);if(null!==n){this.isServerRendered&&n.classList.contains(tg)&&this.popupHandler(n);var r=Tt(n,".e-tab");if(this.element===r){if(this.tbItems=xt("."+$u,i),e=xt(".e-indicator",i),t=xt("."+$u+" ."+this.scrCntClass,i),this.isVertical()){Dt(e,{left:"",right:""}),Dt(e,0!==(g(t)?this.tbItems.offsetHeight:t.offsetHeight)?{top:n.offsetTop+"px",height:n.offsetHeight+"px"}:{top:0,height:0})}else{Dt(e,{top:"",height:""});var o=g(t)?this.tbItems.offsetWidth:t.offsetWidth;Dt(e,0!==o?{left:n.offsetLeft+"px",right:o-(n.offsetLeft+n.offsetWidth)+"px"}:{left:"auto",right:"auto"})}g(this.bdrLine)||this.bdrLine.classList.remove("e-hidden")}}},t.prototype.setActive=function(e,t){void 0===t&&(t=!1),this.tbItem=kt("."+eg,this.getTabHeader());var i=this.tbItem[e];if(this.isServerRendered&&i&&(e=parseInt(i.getAttribute("data-index"),10)),!(e<0||isNaN(e)||0===this.tbItem.length))if(e>=0&&!t&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:e},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),i.classList.contains("e-active"))this.setActiveBorder();else{if(!this.isTemplate){var n=this.tbItem[this.prevIndex];g(n)||n.removeAttribute("aria-controls"),St(i,{"aria-controls":"e-content"+this.tabId+"_"+e})}var r=i.id;this.removeActiveClass(),i.classList.add("e-active"),i.setAttribute("aria-selected","true");var o=Number(this.extIndex(r));if(g(this.prevActiveEle)&&(this.prevActiveEle="e-content"+this.tabId+"_"+o),St(this.element,{"aria-activedescendant":r}),this.isTemplate){if(xt(".e-content",this.element).children.length>0){var s=this.findEle(xt(".e-content",this.element).children,"e-content"+this.tabId+"_"+o);g(s)||s.classList.add("e-active"),this.triggerAnimation(r,this.enableAnimation)}}else if(!this.isServerRendered||this.isServerRendered&&"Init"===this.loadOn){this.cntEle=xt(".e-tab > .e-content",this.element);var a=this.getTrgContent(this.cntEle,this.extIndex(r));if(g(a)){this.cntEle.appendChild(this.createElement("div",{id:"e-content"+this.tabId+"_"+this.extIndex(r),className:"e-item e-active",attrs:{role:"tabpanel","aria-labelledby":"e-item"+this.tabId+"_"+this.extIndex(r)}}));var l=this.getTrgContent(this.cntEle,this.extIndex(r)),h=Array.prototype.indexOf.call(this.itemIndexArray,r);this.getContent(l,this.items[h].content,"render",h)}else a.classList.add("e-active");this.triggerAnimation(r,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(i),!this.initRender&&!t){i.firstElementChild.focus();var p={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:i,selectedIndex:e,selectedContent:xt("#e-content"+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed};this.trigger("selected",p)}}},t.prototype.contentReady=function(){var e=this.setActiveContent();this.triggerAnimation(e,this.enableAnimation)},t.prototype.setItems=function(e){this.isReplace=!0,this.tbItems=xt("."+$u,this.getTabHeader()),this.tbObj.items=this.parseObject(e,0),this.tbObj.dataBind(),this.isReplace=!1},t.prototype.setRTL=function(e){this.tbObj.enableRtl=e,this.tbObj.dataBind(),this.setCssClass(this.element,"e-rtl",e),this.refreshActiveBorder()},t.prototype.refreshActiveBorder=function(){g(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.setActiveBorder()},t.prototype.showPopup=function(e){var t=xt(".e-popup.e-toolbar-pop",this.hdrEle);if(t.classList.contains("e-popup-close")){var i=t&&t.ej2_instances[0];i.position.X="Left"===this.headerPlacement?"left":"right",i.dataBind(),i.show(e)}},t.prototype.wireEvents=function(){window.addEventListener("resize",this.resizeContext),ye.add(this.element,"mouseover",this.hoverHandler,this),ye.add(this.element,"keydown",this.spaceKeyDown,this),g(this.cntEle)||(this.touchModule=new Pi(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new xi(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new xi(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},t.prototype.unWireEvents=function(){this.keyModule.destroy(),this.tabKeyModule.destroy(),g(this.cntEle)||this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),ye.remove(this.element,"mouseover",this.hoverHandler),ye.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove("e-rtl"),this.element.classList.remove("e-focused")},t.prototype.clickHandler=function(e){this.element.classList.remove("e-focused");var t=e.originalEvent.target,i=Tt(t,"."+eg),n=this.getEleIndex(i);t.classList.contains("e-close-icon")?this.removeTab(n):this.isVertical()&&Tt(t,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,this.isServerRendered&&!g(i)?parseInt(i.getAttribute("data-index"),10)!==this.selectedItem&&this.select(n):g(i)||n===this.selectedItem&&n===this.prevIndex||this.select(n))},t.prototype.swipeHandler=function(e){if(!(e.velocity<3&&g(e.originalEvent.changedTouches))){if(e.originalEvent&&e.originalEvent.stopPropagation(),this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.selectedItem){for(var t=this.selectedItem-1;t>=0;t--)if(!this.tbItem[t].classList.contains("e-hidden")){this.select(t);break}}else if("Left"===e.swipeDirection&&this.selectedItem!==kt("."+eg,this.element).length-1)for(var i=this.selectedItem+1;i<this.tbItem.length;i++)if(!this.tbItem[i].classList.contains("e-hidden")){this.select(i);break}this.isSwipeed=!1}},t.prototype.spaceKeyDown=function(e){(32===e.keyCode&&32===e.which||35===e.keyCode&&35===e.which)&&(g(Tt(e.target,"."+Zu))||e.preventDefault())},t.prototype.keyHandler=function(e){if(!this.element.classList.contains("e-disable")){this.element.classList.add("e-focused");var t=e.target,i=this.getTabHeader(),n=xt(".e-active",i);switch(this.popEle=xt(".e-toolbar-pop",i),g(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]),e.action){case"space":case"enter":if(t.parentElement.classList.contains("e-disable"))return;if("enter"===e.action&&t.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(t);break;case"tab":case"shiftTab":t.classList.contains("e-tab-wrap")&&!1===Tt(t,"."+eg).classList.contains("e-active")&&t.setAttribute("tabindex","-1"),this.popObj&&mt(this.popObj.element)&&this.popObj.hide(this.hide),n.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":var r=Tt(document.activeElement,"."+eg);g(r)||this.refreshItemVisibility(r);break;case"openPopup":e.preventDefault(),!g(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":var o=Tt(t,"."+eg);if(!0===this.showCloseButton&&!g(o)){var s=o.nextSibling;!g(s)&&s.classList.contains(eg)&&s.firstElementChild.focus(),this.removeTab(this.getEleIndex(o))}this.setActiveBorder()}}},t.prototype.refreshActElePosition=function(){var e=xt("."+eg+"."+tg+".e-active",this.element);g(e)||this.select(this.getEleIndex(e)),this.refreshActiveBorder()},t.prototype.refreshItemVisibility=function(e){var t=xt("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!g(t)){var i=xt(".e-hscroll-bar",this.tbItems),n=i.scrollLeft,r=n+i.offsetWidth,o=e.offsetLeft,s=e.offsetWidth,a=e.offsetLeft+e.offsetWidth;if(n<o&&r<a){var l=r-o;i.scrollLeft=n+(s-l)}else if(n>o&&r>a){l=a-n;i.scrollLeft=n-(s-l)}}},t.prototype.hoverHandler=function(e){var t=e.target;!g(t.classList)&&t.classList.contains("e-close-icon")&&t.setAttribute("title",new ki("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))},t.prototype.evalOnPropertyChangeItems=function(e,t){if(e.items instanceof Array&&t.items instanceof Array)if(this.lastIndex=0,g(this.tbObj))this.reRenderItems();else{this.isRect&&this.clearTemplate(),this.setItems(e.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];for(var i=xt(".e-tab > .e-content",this.element);i.firstElementChild&&!S();)wt(i.firstElementChild);this.select(this.selectedItem)}else for(var n=Object.keys(e.items),r=0;r<n.length;r++){var o=parseInt(Object.keys(e.items)[r],10),s=Object.keys(e.items[o])[0],a=Object(t.items[o])[s],l=Object(e.items[o])[s],h=xt("."+$u+" #e-item"+this.tabId+"_"+o,this.element),p=xt(".e-content #e-content"+this.tabId+"_"+o,this.element);if("header"===s||"headerTemplate"===s){var d=g(this.items[o].header)||g(this.items[o].header.iconCss)?"":this.items[o].header.iconCss;if(""===(this.items[o].headerTemplate||this.items[o].header.text)&&""===d)this.removeTab(o);else{var c=[];c.push(this.items[o]),this.items.splice(o,1),this.itemIndexArray.splice(o,1),this.tbObj.items.splice(o,1);var u=h.classList.contains("e-hidden");wt(h),this.isReplace=!0,this.addTab(c,o),u&&this.hideTab(o),this.isReplace=!1}}if("content"===s&&!g(p))if(("string"==typeof l||g(l.innerHTML))&&("."===l[0]||"#"===l[0])&&l.length){var f=document.querySelector(l);p.appendChild(f),f.style.display=""}else""===l&&"#"===a[0]?(document.body.appendChild(this.element.querySelector(a)).style.display="none",p.innerHTML=l):p.innerHTML=l;"cssClass"===s&&(g(h)||(h.classList.remove(a),h.classList.add(l)),g(p)||(p.classList.remove(a),p.classList.add(l))),"disabled"===s&&this.enableTab(o,!0!==l),"visible"===s&&this.hideTab(o,!0!==l)}},t.prototype.enableTab=function(e,t){var i=kt("."+eg,this.element)[e];g(i)||(!0===t?(i.classList.remove("e-disable","e-overlay"),i.firstElementChild.setAttribute("tabindex","-1")):(i.classList.add("e-disable","e-overlay"),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains("e-active")&&this.select(e+1)),g(this.items[e])||(this.items[e].disabled=!t,this.dataBind()),i.setAttribute("aria-disabled",!0===t?"false":"true"))},t.prototype.addTab=function(e,t){var i=this,n={addedItems:e,cancel:!1};this.isReplace?this.addingTabContent(e,t):this.trigger("adding",n,(function(n){n.cancel||i.addingTabContent(e,t)})),this.isReact&&this.renderReactTemplates()},t.prototype.addingTabContent=function(e,t){var i=this,n=0;if(this.hdrEle=xt("."+Zu,this.element),g(this.hdrEle))this.items=e,this.reRenderItems();else{var r=kt("."+eg,this.element).length;if(0!==r&&(n=this.lastIndex+1),g(t)&&(t=r-1),r<t||t<0||isNaN(t))return;0!==r||g(this.hdrEle)||(this.hdrEle.style.display=""),g(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.tbItems=xt("."+$u,this.getTabHeader()),this.isAdd=!0;var o=this.parseObject(e,t);this.isAdd=!1;var s,a=0;e.forEach((function(e,r){if(s=e.headerTemplate||e.header.text,g(e.headerTemplate||e.header)||g(s)||0===s.length&&g(e.header.iconCss)||(i.items.splice(t+a,0,e),a++),i.isTemplate&&!g(e.header)&&!g(e.header.text)){var o=n+r,l=i.createElement("div",{id:"e-content"+i.tabId+"_"+o,className:"e-item",attrs:{role:"tabpanel","aria-labelledby":"e-item_"+o}});i.cntEle.insertBefore(l,i.cntEle.children[t+r]);var h=i.getTrgContent(i.cntEle,o.toString());i.getContent(h,e.content,"render",t)}})),this.tbObj.addItems(o,t),this.isReplace||this.trigger("added",{addedItems:e}),this.selectedItem===t?this.select(t):this.setActiveBorder()}},t.prototype.removeTab=function(e){var t=this,i=kt("."+eg,this.element)[e];if(!g(i)){var n={removedItem:i,removedIndex:e,cancel:!1};this.trigger("removing",n,(function(n){if(!n.cancel){if(S()&&t.isServerRendered)return void t.interopAdaptor.invokeMethodAsync("OnRemoveItem",e);t.isRect&&t.clearTemplate([],e),t.tbObj.removeItems(e),t.items.splice(e,1),t.itemIndexArray.splice(e,1),t.refreshActiveBorder();var r=xt("#e-content"+t.tabId+"_"+t.extIndex(i.id),xt(".e-content",t.element));g(r)||(t.isReact&&t.clearTemplate(),wt(r)),t.trigger("removed",n),i.classList.contains("e-active")&&(e=e>kt("."+eg+":not(."+tg+")",t.element).length-1?e-1:e,t.enableAnimation=!1,t.selectedItem=e,t.select(e)),0===kt("."+eg,t.element).length&&(t.hdrEle.style.display="none"),t.enableAnimation=!0}}))}},t.prototype.hideTab=function(e,t){var i,n=kt("."+eg,this.element)[e];if(!g(n)){if(g(t)&&(t=!0),this.bdrLine.classList.add("e-hidden"),!0===t)if(n.classList.add("e-hidden"),0!==(i=kt("."+eg+":not(.e-hidden)",this.tbItems)).length&&n.classList.contains("e-active")){if(0!==e)for(var r=e-1;r>=0;r--){if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}if(0===r)for(var o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}}else for(o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}}else 0===i.length&&this.element.classList.add("e-hidden");else this.element.classList.remove("e-hidden"),i=kt("."+eg+":not(.e-hidden)",this.tbItems),n.classList.remove("e-hidden"),0===i.length&&this.select(e);this.setActiveBorder(),n.setAttribute("aria-hidden",""+t),!this.isServerRendered&&"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}},t.prototype.select=function(e){var t=this,i=this.getTabHeader();this.tbItems=xt("."+$u,i),this.tbItem=kt("."+eg,i),this.content=xt(".e-content",this.element),this.prevItem=this.tbItem[this.prevIndex],g(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);var n=this.tbItem[e];g(n)?this.selectedID="0":this.selectingID=this.extIndex(n.id),g(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex","-1");var r={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:g(this.content)?null:xt("#e-content"+this.tabId+"_"+this.selectedID,this.content),selectingItem:n,selectingIndex:e,selectingContent:g(this.content)?null:xt("#e-content"+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,cancel:!1};this.initRender?this.selectingContent(e):this.trigger("selecting",r,(function(i){i.cancel||t.selectingContent(e)}))},t.prototype.selectingContent=function(e){if("number"==typeof e){if(!g(this.tbItem[e])&&(this.tbItem[e].classList.contains("e-disable")||this.tbItem[e].classList.contains("e-hidden")))for(var t=e+1;t<this.items.length;t++){if(!1===this.items[t].disabled&&!0===this.items[t].visible){e=t;break}e=0}this.tbItem.length>e&&e>=0&&!isNaN(e)?(this.prevIndex=this.selectedItem,this.tbItem[e].classList.contains(tg)?this.setActive(this.popupHandler(this.tbItem[e])):this.setActive(e)):this.setActive(0)}else e instanceof HTMLElement&&this.setActive(this.getEleIndex(e))},t.prototype.disable=function(e){this.setCssClass(this.element,"e-disable",e),this.element.setAttribute("aria-disabled",""+e)},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedItem","actEleId"])},t.prototype.getModuleName=function(){return"tab"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":Dt(this.element,{width:C(e.width)});break;case"height":Dt(this.element,{height:C(e.height)}),this.isServerRendered||this.setContentHeight(!1);break;case"cssClass":""!==t.cssClass?(this.setCssClass(this.element,t.cssClass,!1),this.setCssClass(this.element,e.cssClass,!0)):this.setCssClass(this.element,e.cssClass,!0);break;case"items":this.isServerRendered||this.evalOnPropertyChangeItems(e,t);break;case"showCloseButton":this.setCloseButton(e.showCloseButton);break;case"selectedItem":this.isServerRendered||(this.selectedItem=t.selectedItem,this.select(e.selectedItem));break;case"headerPlacement":this.isServerRendered?this.serverChangeOrientation(e.headerPlacement,t.headerPlacement):this.changeOrientation(e.headerPlacement);break;case"enableRtl":this.setRTL(e.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=e.overflowMode,this.tbObj.dataBind(),this.refreshActElePosition();break;case"heightAdjustMode":this.isServerRendered||(this.setContentHeight(!1),this.select(this.selectedItem));break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep)}}},Ju([Wt([],sg)],t.prototype,"items",void 0),Ju([zt("100%")],t.prototype,"width",void 0),Ju([zt("auto")],t.prototype,"height",void 0),Ju([zt("")],t.prototype,"cssClass",void 0),Ju([zt(0)],t.prototype,"selectedItem",void 0),Ju([zt("Top")],t.prototype,"headerPlacement",void 0),Ju([zt("Content")],t.prototype,"heightAdjustMode",void 0),Ju([zt("Scrollable")],t.prototype,"overflowMode",void 0),Ju([zt("Dynamic")],t.prototype,"loadOn",void 0),Ju([zt(!1)],t.prototype,"enablePersistence",void 0),Ju([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ju([zt(!1)],t.prototype,"showCloseButton",void 0),Ju([zt()],t.prototype,"scrollStep",void 0),Ju([qt({},rg)],t.prototype,"animation",void 0),Ju([_t()],t.prototype,"created",void 0),Ju([_t()],t.prototype,"adding",void 0),Ju([_t()],t.prototype,"added",void 0),Ju([_t()],t.prototype,"selecting",void 0),Ju([_t()],t.prototype,"selected",void 0),Ju([_t()],t.prototype,"removing",void 0),Ju([_t()],t.prototype,"removed",void 0),Ju([_t()],t.prototype,"destroyed",void 0),t=Ju([Gt],t)}(pi),lg=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},e.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.updateStyles()},e.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),n=document.createDocumentFragment();i.innerHTML="";for(var r=1;r<=t.pageCount;r++)e=ct("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Goto Page "+r,href:"javascript:void(0);",name:"Goto page"+r}}),t.currentPage===r&&Et(e,["e-currentitem","e-active"],["e-pager-default"]),n.appendChild(e);i.appendChild(n),this.links=[].slice.call(i.childNodes)},e.prototype.wireEvents=function(){ye.add(this.pagerElement,"click",this.clickHandler,this)},e.prototype.unwireEvents=function(){ye.remove(this.pagerModule.element,"click",this.clickHandler)},e.prototype.destroy=function(){this.unwireEvents()},e.prototype.renderNumericContainer=function(){this.element=ct("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(ct("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},e.prototype.renderFirstNPrev=function(e){this.first=ct("div",{className:"e-first e-icons e-icon-first",attrs:{title:S()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":S()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=ct("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:S()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":S()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),vt([this.first,this.prev],e)},e.prototype.renderPrevPagerSet=function(e){var t=ct("div");this.PP=ct("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:S()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":S()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:S()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)},e.prototype.renderNextPagerSet=function(e){var t=ct("div");this.NP=ct("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:S()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":S()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:S()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)},e.prototype.renderNextNLast=function(e){this.next=ct("div",{className:"e-next e-icons e-icon-next",attrs:{title:S()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":S()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=ct("div",{className:"e-last e-icons e-icon-last",attrs:{title:S()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":S()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),vt([this.next,this.last],e)},e.prototype.clickHandler=function(e){var t=this.pagerModule,i=e.target;return t.previousPageNo=t.currentPage,i.classList.contains("e-disable")||g(i.getAttribute("index"))||(t.currentPage=parseInt(i.getAttribute("index"),10),t.dataBind()),!1},e.prototype.updateLinksHtml=function(){var e,t,i=this.pagerModule;i.currentPage=1===i.totalPages?1:i.currentPage,i.currentPage>i.totalPages&&i.totalPages&&(i.currentPage=i.totalPages),e=parseInt((i.currentPage/i.pageCount).toString(),10),i.currentPage%i.pageCount==0&&e>0&&(e-=1);for(var n=0;n<i.pageCount;n++)(t=e*i.pageCount+1+n)<=i.totalPages?(this.links[n].style.display="",this.links[n].setAttribute("index",t.toString()),this.links[n].innerHTML=i.customText?i.customText+t:t.toString(),i.currentPage!==t?this.links[n].classList.add("e-pager-default"):this.links[n].classList.remove("e-pager-default")):(this.links[n].innerHTML=i.customText?i.customText+t:t.toString(),this.links[n].style.display="none"),Et(this.links[n],[],["e-currentitem","e-active"]);this.first.setAttribute("index","1"),this.last.setAttribute("index",i.totalPages.toString()),this.prev.setAttribute("index",(i.currentPage-1).toString()),this.next.setAttribute("index",(i.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",i.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(i.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(i.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-i.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())},e.prototype.updateStyles=function(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&Et(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[])},e.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],n=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(Et(this.prev,i,n),Et(this.first,e,t),Et(this.pagerElement.querySelector(".e-mfirst"),e,t),Et(this.pagerElement.querySelector(".e-mprev"),i,n)):(Et(this.prev,n,i),Et(this.first,t,e),Et(this.pagerElement.querySelector(".e-mprev"),n,i),Et(this.pagerElement.querySelector(".e-mfirst"),t,e))},e.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount?Et(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):Et(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},e.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?Et(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):Et(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},e.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],n=["e-nextpagedisabled","e-disable"],r=this.pagerModule;r.currentPage===r.totalPages||0===r.totalRecordsCount?(Et(this.last,t,e),Et(this.next,n,i),Et(this.pagerElement.querySelector(".e-mlast"),t,e),Et(this.pagerElement.querySelector(".e-mnext"),n,i)):(Et(this.last,e,t),Et(this.next,i,n),Et(this.pagerElement.querySelector(".e-mlast"),e,t),Et(this.pagerElement.querySelector(".e-mnext"),i,n))},e}(),hg=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){var e=ct("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=ct("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=ct("span",{className:"e-pagecountmsg",styles:"textalign:right"}),vt([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},e.prototype.refresh=function(){var e=this.pagerModule;S()?(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("CurrentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel("TotalItemsInfo"),[e.totalRecordsCount||0])):(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0])),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)},e.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},e.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},e.prototype.destroy=function(){},e.prototype.format=function(e,t){for(var i,n=0;n<t.length;n++)i=new RegExp("\\{"+n+"\\}","gm"),e=e.replace(i,t[n].toString());return e},e}(),pg=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dg=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},cg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.hasParent=!1,n}return pg(t,e),t.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e},t.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager",PreviousPagerTooltip:"Go to previous pager",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All"},this.containerModule=new lg(this),this.pagerMessageModule=new hg(this)},t.prototype.render=function(){this.template?this.isReactTemplate()?(this.on("pager-refresh",this.pagerTemplate,this),this.notify("pager-refresh",{})):this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}))},t.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},t.prototype.destroy=function(){this.isReactTemplate()&&(this.off("pager-refresh",this.pagerTemplate),this.hasParent||this.destroyTemplate(["template"])),e.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML="")},t.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},t.prototype.getModuleName=function(){return"pager"},t.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed){e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged(e,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==t.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,t)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}}},t.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},t.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())},t.prototype.setPageSize=function(e){this.pageSize=e,this.dataBind()},t.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},t.prototype.checkGoToPage=function(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),g(t)||(this.previousPageNo=t),this.previousPageNo!==e&&e>=1&&e<=this.totalPages},t.prototype.currentPageChanged=function(e,t){if(this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage!==t.currentPage||e.pageSize!==t.pageSize){var i={currentPage:this.currentPage,newProp:e,oldProp:t,cancel:!1};this.trigger("click",i),i.cancel||this.refresh()}},t.prototype.pagerTemplate=function(){if(!this.isReactTemplate()||!this.hasParent){var e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},i=this.element.parentElement.id+"_template";this.isReactTemplate()?(this.getPagerTemplate()(t,this,"template",i,null,null,this.element),this.renderReactTemplates()):(e=S()?this.getPagerTemplate()(t,this,"template",i,this.isStringTemplate):this.getPagerTemplate()(t),$a(this.element,e))}},t.prototype.updateTotalPages=function(){this.totalPages=this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},t.prototype.getPagerTemplate=function(){return this.templateFn},t.prototype.compile=function(e){if(e){try{document.querySelectorAll(e).length&&(this.templateFn=Ge(document.querySelector(e).innerHTML.trim()))}catch(t){this.templateFn=Ge(e)}}},t.prototype.refresh=function(){this.template?this.isReactTemplate()?(this.updateTotalPages(),this.notify("pager-refresh",{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),this.containerModule.refresh(),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh())},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.initLocalization=function(){this.localeObj=new ki(this.getModuleName(),this.defaultConstants,this.locale)},t.prototype.updateQueryString=function(e){var t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)},t.prototype.getUpdatedURL=function(e,t,i){var n=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(n))return e.replace(n,"$1"+t+"="+i+"$2");var r="";return-1!==e.indexOf("#")&&(r=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+i+r},t.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(ct("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:S()?this.getLocalizedLabel("FirstPageTooltip"):this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(ct("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:S()?this.getLocalizedLabel("PreviousPageTooltip"):this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},t.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(ct("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:S()?this.getLocalizedLabel("NextPageTooltip"):this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(ct("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:S()?this.getLocalizedLabel("LastPageTooltip"):this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},t.prototype.addAriaLabel=function(){var e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!me.isDevice)for(var t=0;t<e.length;t++){var i=this.element.querySelector(e[t]);i.setAttribute("aria-label",i.getAttribute("title"))}},t.prototype.isReactTemplate=function(){return this.isReact&&this.template&&"string"!=typeof this.template},dg([zt(!1)],t.prototype,"enableQueryString",void 0),dg([zt(!1)],t.prototype,"enableExternalMessage",void 0),dg([zt(!0)],t.prototype,"enablePagerMessage",void 0),dg([zt(12)],t.prototype,"pageSize",void 0),dg([zt(10)],t.prototype,"pageCount",void 0),dg([zt(1)],t.prototype,"currentPage",void 0),dg([zt()],t.prototype,"totalRecordsCount",void 0),dg([zt()],t.prototype,"externalMessage",void 0),dg([zt(!1)],t.prototype,"pageSizes",void 0),dg([zt()],t.prototype,"template",void 0),dg([zt("")],t.prototype,"customText",void 0),dg([_t()],t.prototype,"click",void 0),dg([_t()],t.prototype,"dropDownChanged",void 0),dg([_t()],t.prototype,"created",void 0),t=dg([Gt],t)}(pi),ug=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"pagerdropdown"},e.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=ct("div",{className:"e-pagesizes"});var t=ct("div",{className:"e-pagerdropdown"}),i=ct("div",{className:"e-pagerconstant"}),n=ct("input",{attrs:{type:"text",tabindex:"1"}});this.pagerCons=ct("span",{className:"e-constant",innerHTML:S()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(n),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var r=this.pagerModule.pageSizes,o=r.length?this.convertValue(r):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],s=this.pagerModule.pageSize;this.dropDownListObject=new Cc({dataSource:o,value:s.toString(),change:this.onChange.bind(this),cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(n),r.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=s,e.dataBind(),e.trigger("dropDownChanged",{pageSize:s}),this.addEventListener()},e.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.trigger("dropDownChanged",{pageSize:parseInt(this.dropDownListObject.value,10)})},e.prototype.refresh=function(){this.pagerModule.pageSize===this.pagerModule.totalRecordsCount?this.pagerCons.innerHTML=S()?this.pagerModule.getLocalizedLabel("PagerAllDropDown"):this.pagerModule.getLocalizedLabel("pagerAllDropDown"):this.pagerCons.innerHTML=S()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown")},e.prototype.beforeValueChange=function(e){if("number"==typeof e.newProp.value){var t=e.newProp.value.toString();e.newProp.value=t}},e.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[i]="number"==typeof t[i]?t[i].toString():t[i];return t},e.prototype.setDropDownValue=function(e,t){this.dropDownListObject&&(this.dropDownListObject[e]=t)},e.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},e.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},e.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),Ct(this.pagerDropDownDiv))},e}(),gg=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"externalMessage"},e.prototype.render=function(){this.element=ct("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":"Pager external message"}}),this.pagerModule.element.appendChild(this.element),this.refresh()},e.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},e.prototype.hideMessage=function(){g(this.element)||(this.element.style.display="none")},e.prototype.showMessage=function(){this.element.style.display=""},e.prototype.destroy=function(){Ct(this.element)},e}(),fg=function(){function e(e,t){this.isInitialRender=!0,cg.Inject(gg,ug),this.parent=e,this.pageSettings=t,this.addEventListener()}return e.prototype.getModuleName=function(){return"pager"},e.prototype.render=function(){var e,t=this.parent;this.pagerDestroy(),g(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"}),e=qa({},u({},Ua(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:t.enableRtl,locale:t.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]),this.pagerObj=new cg(e),this.pagerObj.hasParent=!0,this.pagerObj.on("pager-refresh",this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1},e.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},e.prototype.addAriaAttr=function(){if(!this.pageSettings.template){for(var e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),i=document.createDocumentFragment(),n=this.element.querySelector(".e-numericcontainer"),r=n.querySelectorAll("a"),o=0;o<r.length;o++){this.parent.getContentTable()?r[o].setAttribute("aria-owns",this.parent.getContentTable().id):r[o].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table");var s=this.parent.createElement("div");s.appendChild(r[o]),i.appendChild(s)}e.appendChild(i),t.replaceChild(e,n);for(var a=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"],l=0;l<a.length;l++){var h=this.element.querySelector(a[l]);this.parent.getContentTable()&&h.setAttribute("aria-owns",this.parent.getContentTable().id)}}},e.prototype.dataReady=function(e){this.updateModel(e)},e.prototype.refresh=function(){this.pagerObj.refresh()},e.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},e.prototype.setPageSize=function(e){this.pagerObj.setPageSize(e)},e.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count,this.parent.dataBind()},e.prototype.onActionComplete=function(e){S()&&!this.parent.isJsComponent&&(e.rows=null),this.parent.trigger("actionComplete",u(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:"actionComplete"}))},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];this.pagerObj[r]=t[r]}this.pagerObj.dataBind()}},e.prototype.clickHandler=function(e){var t=this.parent;if(this.isForceCancel||hl(t)&&!t.prevPageMoving)return this.isForceCancel?this.isForceCancel=!1:(g(e.newProp)||g(e.newProp.pageSize)?e.currentPage&&(t.notify(Or,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage):(t.notify(Or,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.pageSize=e.oldProp.pageSize,t.pageSettings.pageSize=e.newProp.pageSize),this.isForceCancel=!0,this.pagerObj.dataBind()),void(e.cancel=!0);t.pageSettings.pageSize=this.pagerObj.pageSize,t.prevPageMoving=!1;var i=this.pageSettings.currentPage;this.pageSettings.currentPage=e.currentPage;var n={cancel:!1,requestType:"paging",previousPage:i,currentPage:e.currentPage,type:wr};this.parent.notify(Er,n),n.cancel&&(e.cancel=!0),this.parent.requestTypeAction="paging"},e.prototype.keyPressHandler=function(e){e.action in mg&&(e.preventDefault(),this.element.querySelector(mg[e.action]).click())},e.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},e.prototype.appendToElement=function(e){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))},e.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},this.parent.isDestroyed||(this.parent.addEventListener("created",this.handlers.created.bind(this)),this.parent.on("initial-load",this.handlers.load,this),this.parent.on(Sr,this.handlers.end,this),this.parent.on("data-ready",this.handlers.ready,this),this.parent.on("paging-complete",this.handlers.complete,this),this.parent.on(kr,this.handlers.updateLayout,this),this.parent.on(Dr,this.handlers.inboundChange,this),this.parent.on(Pr,this.handlers.keyPress,this))},e.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},e.prototype.isReactTemplate=function(){return this.parent.isReact&&this.pagerObj.template&&"string"!=typeof this.pagerObj.template},e.prototype.renderReactPagerTemplate=function(){if(!this.isInitialRender&&this.isReactTemplate()){this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template);var e=this.parent.pageSettings,t={currentPage:e.currentPage,pageSize:e.pageSize,pageCount:e.pageCount,totalRecordsCount:e.totalRecordsCount,totalPages:this.pagerObj.totalPages},i=this.parent.id+"_pagertemplate";this.pagerObj.templateFn(t,this.parent,"pagerTemplate",i,null,null,this.pagerObj.element),this.parent.renderTemplates()}},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.removeEventListener("created",this.handlers.created),this.parent.off("pager-refresh",this.renderReactPagerTemplate),this.parent.off("initial-load",this.handlers.load),this.parent.off(Sr,this.handlers.end),this.parent.off("data-ready",this.handlers.ready),this.parent.off("paging-complete",this.handlers.complete),this.parent.off(kr,this.handlers.updateLayout),this.parent.off(Dr,this.handlers.inboundChange),this.parent.off(Pr,this.handlers.keyPress))},e.prototype.destroy=function(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()},e.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),Ct(this.element))},e}(),mg={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},yg=function(){function e(e,t){this.predefinedItems={},this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=0,t=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];e<t.length;e++){var i=t[e],n=i.toLowerCase(),r=n[0].toUpperCase()+n.slice(1);this.predefinedItems[i]={id:this.gridID+"_"+n,prefixIcon:"e-"+n,text:this.l10n.getConstant(r),tooltipText:this.l10n.getConstant(r)}}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},this.createToolbar()},e.prototype.getToolbar=function(){return this.toolbar.element},e.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),Ct(this.element))},e.prototype.bindSearchEvents=function(){this.searchElement=this.element.querySelector("#"+this.gridID+"_searchbar"),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},e.prototype.toolbarCreated=function(){this.element.querySelector(".e-search-wrapper")&&(this.element.querySelector(".e-search-wrapper").innerHTML='<div class="e-input-group e-search" role="search">        <input id="'+this.gridID+'_searchbar" class="e-input" name="input" type="search"         placeholder= "'+this.l10n.getConstant("Search")+'"/>        <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"         tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>         </div>'),this.bindSearchEvents()},e.prototype.createToolbar=function(){var e=this.getItems();this.toolbar=new Xu({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this)}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this);this.toolbar.isStringTemplate=!0;var t="viewContainerRef";if(this.parent[t]&&(this.toolbar.registeredTemplate={},this.toolbar[t]=this.parent[t]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.toolbarTemplate)if(S()||"string"!=typeof this.parent.toolbarTemplate)if(S()){var i=this.parent.element.id+"toolbarTemplate",n=$a(this.element,ja(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",i)),r=this.getItem(n);this.toolbar.items.push(r),this.toolbar.appendTo(this.element),Ue(this.parent.element.id+"toolbarTemplate","ToolbarTemplate",this.parent)}else{var o=this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate,s=this.parent.element.id+"toolbarTemplate";o?(ja(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",s,null,null,this.element),this.parent.renderTemplates()):$a(this.element,ja(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"))}else this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent())},e.prototype.addReactToolbarPortals=function(e){this.parent.isReact&&e&&(this.parent.portals=this.parent.portals.concat(e),this.parent.renderTemplates())},e.prototype.refreshToolbarItems=function(e){var t=this.parent,i=[],n=[],r=t.editSettings,o=t.currentViewData&&t.currentViewData.length;r.allowAdding?i.push(this.gridID+"_add"):n.push(this.gridID+"_add"),r.allowEditing&&o?i.push(this.gridID+"_edit"):n.push(this.gridID+"_edit"),r.allowDeleting&&o?i.push(this.gridID+"_delete"):n.push(this.gridID+"_delete"),"Batch"===t.editSettings.mode?t.element.querySelectorAll(".e-updatedtd").length&&(r.allowAdding||r.allowEditing)?(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")):t.isEdit&&(r.allowAdding||r.allowEditing)?(i=[this.gridID+"_update",this.gridID+"_cancel"],n=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(n,!1)},e.prototype.getItems=function(){var e=[],t=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];for(var i=0,n=t;i<n.length;i++){var r=n[i];switch(typeof r){case"number":e.push(this.getItemObject(this.items[r]));break;case"string":e.push(this.getItemObject(r));break;default:e.push(this.getItem(r))}}return e},e.prototype.getItem=function(e){var t=this.predefinedItems[e.text];return t?u(t,t,e):e},e.prototype.getItemObject=function(e){return this.predefinedItems[e]||{text:e,id:this.gridID+"_"+e}},e.prototype.enableItems=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i],o=this.element.querySelector("#"+r);o&&this.toolbar.enableItems(o.parentElement,t)}},e.prototype.toolbarClickHandler=function(e){var t=this,i=this.parent,n=this.gridID;u(e,{cancel:!1});var r=!S()||this.parent.isJsComponent?e:{item:e.item,cancel:e.cancel,name:e.name},o=e.originalEvent;i.trigger("toolbarClick",r,(function(e){if(e.originalEvent=e.originalEvent?e.originalEvent:o,!e.cancel)switch(!g(e.item)&&e.item.id){case n+"_print":i.print();break;case n+"_edit":i.startEdit();break;case n+"_update":i.endEdit();break;case n+"_cancel":i.closeEdit();break;case n+"_add":i.addRecord();break;case n+"_delete":i.deleteRecord();break;case n+"_search":e.originalEvent.target.id===n+"_searchbutton"&&t.search();break;case n+"_columnchooser":var r=t.parent.element.querySelector(".e-ccdiv"),s=r.getBoundingClientRect().top,a=r.getBoundingClientRect().left,l=e.originalEvent.target;s=r.getBoundingClientRect().top+r.offsetTop,i.createColumnchooser(a,s,l);break;case"copy":S()&&i.copy();break;case"copyheader":case"copyHeader":S()&&i.copy(!0)}}))},e.prototype.modelChanged=function(e){"edit"===e.module&&this.refreshToolbarItems()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&Ct(this.element),this.render())},e.prototype.keyUpHandler=function(e){13===e.keyCode&&this.search()},e.prototype.search=function(){this.parent.search(this.searchElement.value)},e.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},e.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new Js(this.searchElement),ye.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent())},e.prototype.unWireEvent=function(){this.searchElement&&(ye.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent())},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Sr,this.render,this),this.parent.on(kr,this.onPropertyChanged,this),this.parent.on(Dr,this.updateSearchBox.bind(this)),this.parent.on(Er,this.refreshToolbarItems,this),this.parent.on(Mr,this.refreshToolbarItems,this),this.parent.on(Dr,this.modelChanged,this),this.parent.on(Cr,this.refreshToolbarItems,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Sr,this.render),this.parent.off(kr,this.onPropertyChanged),this.parent.off(Dr,this.updateSearchBox),this.parent.off(Er,this.refreshToolbarItems),this.parent.off(Mr,this.refreshToolbarItems),this.parent.off(Dr,this.modelChanged),this.parent.off(Cr,this.refreshToolbarItems))},e.prototype.getModuleName=function(){return"toolbar"},e}(),vg=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.parent=t,n.serviceLocator=i,n.initEvent(),n}return vg(t,e),t.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on("initForeignKeyColumn",this.initForeignKeyColumns,this),this.parent.on("getForeignKeyData",this.getForeignKeyData,this),this.parent.on("generateQuery",this.generateQueryFormData,this))},t.prototype.initForeignKeyColumns=function(e){for(var t=0;t<e.length;t++)e[t].dataSource=e[t].dataSource instanceof yn?e[t].dataSource:g(e[t].dataSource)?new yn:"result"in e[t].dataSource?e[t].dataSource:new yn(e[t].dataSource)},t.prototype.eventfPromise=function(e,t,i,n){var r=this.getStateEventArgument(t),o=new vn,s=new vn;r.action=e.action;var a=this.parent.getDataModule();return!g(e.action)&&e.action.requestType&&!1!==a.foreignKeyDataState.isDataChanged?(a.setForeignKeyDataState({isPending:!0,resolver:s.resolve}),s.promise.then((function(){o.resolve(n.dataSource)})),r.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger("columnDataStateChange",r)):(a.setForeignKeyDataState({}),o.resolve(i)),o},t.prototype.getForeignKeyData=function(e){for(var t=this,i=e.column?[e.column]:this.parent.getForeignKeyColumns(),n=[],r=function(t){var r=void 0,s=e.isComplex?o.genarateColumnQuery(i[t]):o.genarateQuery(i[t],e.result.result,!1,!0);s.params=o.parent.query.params;var a=i[t].dataSource;a&&"result"in a?r=o.eventfPromise(e,s,a,i[t]).promise:r=!a.ready||a.dataSource.offline?a.executeQuery(s):a.ready.then((function(){return a.executeQuery(s)}));n.push(r)},o=this,s=0;s<i.length;s++)r(s);Promise.all(n).then((function(t){for(var n=0;n<t.length;n++)i[n].columnData=t[n].result,"dropdownedit"===i[n].editType&&"result"in i[n].dataSource&&(i[n].edit.params=u(i[n].edit.params,{dataSource:t[n].result,query:new on,fields:{value:i[n].foreignKeyField||i[n].field,text:i[n].foreignKeyValue}}));e.promise.resolve(e.result)})).catch((function(i){return t.parent.log(["actionfailure","foreign_key_failure"]),e.promise&&e.promise.reject&&e.promise.reject(i),i}))},t.prototype.generateQueryFormData=function(e){e.predicate.predicate=this.genarateQuery(e.column,e.column.columnData,!0)},t.prototype.genarateQuery=function(e,t,i,n){var r=this.parent,o=[],s=new on,a=i?e.foreignKeyField:e.field;if(r.allowPaging||r.enableVirtualization||i){t=new yn(r.allowGrouping&&r.groupSettings.columns.length&&!i?t.records:t).executeLocal((new on).select(a));var l=wn.distinct(t,a,!1);a=i?e.field:e.foreignKeyField;for(var h=0;h<l.length;h++)l[h]&&l[h].getDay?o.push(Cl({field:a,operator:"equal",value:l[h],matchCase:!1})):o.push(new sn(a,"equal",l[h],!1))}return n?o.length?s.where(sn.or(o)):s:o.length?sn.or(o):{predicates:[]}},t.prototype.genarateColumnQuery=function(e){var t=this.parent,i=new on,n=this.isFiltered(e);if(n.isTrue&&(i=this.filterQuery(i,n.column,!0)),t.searchSettings.key.length){var r=t.searchSettings;e.dataSource instanceof yn&&e.dataSource.adaptor.getModuleName&&"ODataV4Adaptor"===e.dataSource.adaptor.getModuleName()?i=this.searchQuery(i,e,!0):i.search(r.key,e.foreignKeyValue,r.operator,r.ignoreCase)}return i},t.prototype.isFiltered=function(e){var t=this.parent.filterSettings.columns.filter((function(t){return t.field===e.foreignKeyValue&&t.uid===e.uid}));return{column:t,isTrue:!!t.length}},t.prototype.getModuleName=function(){return"foreignKey"},t.prototype.destroy=function(){this.destroyEvent()},t.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off("initForeignKeyColumn",this.initForeignKeyColumns),this.parent.off("getForeignKeyData",this.getForeignKeyData),this.parent.off("generateQuery",this.generateQueryFormData))},t}(es),wg="keyDown",Cg="paste-content",Sg="rtl-mode",xg="e-rte-quick-toolbar",kg="e-rte-dropdown-popup",Tg="e-rte-dropdown-btn";!function(e){e[e.Toolbar=0]="Toolbar",e[e.Content=1]="Content",e[e.Popup=2]="Popup",e[e.LinkToolbar=3]="LinkToolbar",e[e.TextToolbar=4]="TextToolbar",e[e.ImageToolbar=5]="ImageToolbar",e[e.InlineToolbar=6]="InlineToolbar",e[e.TableToolbar=7]="TableToolbar"}(Pu||(Pu={})),function(e){e.Expand="Expand",e.MultiRow="MultiRow",e.Scrollable="Scrollable"}(Iu||(Iu={}));var Dg=function(){function e(e,t){this.parent=e,this.locator=t,this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.render=function(){this.parent;this.contentRenderer=this.renderer.getRenderer(Pu.Content),this.contentRenderer.renderPanel()},e.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.parent.notify(e.requestType+"-begin",e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("model-changed",this.refresh,this),this.parent.on("keyUp",this.keyUp,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("model-changed",this.refresh),this.parent.off("keyUp",this.keyUp))},e.prototype.keyUp=function(e){if("HTML"===this.parent.editorMode)switch(e.args.which){case 46:case 8:var t=this.parent.contentModule.getEditPanel().childNodes;if(0===t.length||1===t.length&&("BR"===t[0].tagName||"P"===t[0].tagName&&(0===t[0].childNodes.length||""===t[0].textContent))){var i=this.parent.contentModule.getEditPanel();i.innerHTML="<p><br/></p>",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),i.childNodes[0],0)}}},e}(),Eg=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rg=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Pg={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},Ig=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,s=e.which,a=0,l=Object.keys(r.keyConfigs);a<l.length;a++)for(var h=l[a],p=0,d=r.keyConfigs[h].split(",");p<d.length;p++){var c=d[p],u=i.getKeyConfigData(c.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&s===u.keyCode&&(e.action=h)}r.keyAction&&r.keyAction(e)},r.bind(),r}var i;return Eg(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=n,n},t.getKeyCode=function(e){return Pg[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Rg([zt({})],t.prototype,"keyConfigs",void 0),Rg([zt("keyup")],t.prototype,"eventName",void 0),Rg([_t()],t.prototype,"keyAction",void 0),t=i=Rg([Gt],t)}(It),Mg=function(){function e(e,t){this.parent=e;var i=t;this.rendererFactory=i.getService("rendererFactory"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("sourceCode",this.sourceCode,this),this.parent.on("initial-end",this.onInitialEnd,this),this.parent.on("updateSource",this.updateSourceCode,this),this.parent.on("destroy",this.destroy,this)},e.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.off("sourceCode",this.sourceCode),this.parent.off("updateSource",this.updateSourceCode),this.parent.off("initial-end",this.onInitialEnd),this.parent.off("destroy",this.destroy),this.parent.formatter.editorManager.observer.off("keydown-handler",this.onKeyDown)},e.prototype.getSourceCode=function(){return this.parent.createElement("textarea",{className:"e-rte-srctextarea"})},e.prototype.wireEvent=function(e){this.keyboardModule=new Ig(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),ye.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},e.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&ye.remove(this.previewElement,"mousedown",this.mouseDownHandler)},e.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new Ig(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},e.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},e.prototype.mouseDownHandler=function(e){this.parent.notify("sourceCodeMouseDown",{args:e})},e.prototype.previewKeyDown=function(e){switch(e.action){case"html-source":this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable){this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}}},e.prototype.onKeyDown=function(e){switch(e.event.action){case"html-source":e.event.preventDefault(),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event})}},e.prototype.sourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger("actionBegin",{requestType:"SourceCode",targetItem:"SourceCode",args:e});var t=kt(".e-toolbar-item",this.parent.element);if(this.contentModule=this.rendererFactory.getRenderer(Pu.Content),this.parent.notify("updateToolbarItem",{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),g(this.previewElement)&&(this.previewElement=this.getSourceCode()),this.parent.updateValueData(),this.parent.iframeSettings.enable){var i=void 0;(i=g(this.parent.element.querySelector("#"+this.parent.element.id+"_source-view"))?this.parent.createElement("div",{className:"e-source-content",id:this.parent.element.id+"_source-view"}):this.parent.element.querySelector("#"+this.parent.element.id+"_source-view")).appendChild(this.previewElement),this.parent.element.appendChild(i),i.style.height=this.contentModule.getPanel().style.height,i.style.marginTop=this.contentModule.getPanel().style.marginTop,this.getPanel().value=this.getTextAreaValue(),this.contentModule.getPanel().style.display="none",i.style.display="block"}else this.contentModule.getPanel().appendChild(this.previewElement),this.getPanel().value=this.getTextAreaValue(),this.contentModule.getEditPanel().style.display="none",this.previewElement.style.display="block";(this.parent.isBlur=!1,this.parent.disableToolbarItem(this.parent.toolbarSettings.items),this.parent.enableToolbarItem("SourceCode"),this.parent.getToolbar()&&gt([this.parent.getToolbar()],["e-expand-open"]),gt(t,["e-active"]),this.parent.setContentHeight("sourceCode",!0),this.wireEvent(this.previewElement),this.unWireBaseKeyDown(),this.previewElement.focus(),this.parent.updateValue(),g(this.parent.placeholder)||this.parent.iframeSettings.enable)||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="none");this.parent.trigger("actionComplete",{requestType:"SourceCode",targetItem:"SourceCode",args:e}),this.parent.invokeChangeEvent()},e.prototype.updateSourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger("actionBegin",{requestType:"Preview",targetItem:"Preview",args:e});var t=this.getPanel();this.parent.notify("updateToolbarItem",{targetItem:"Preview",updateItem:"SourceCode",baseToolbar:this.parent.getBaseToolbarObject()});var i=this.parent.serializeValue(t.value),n=null===i||""===i?"<p><br/></p>":i;(this.parent.iframeSettings.enable?(t.parentElement.style.display="none",this.contentModule.getPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=n):(t.style.display="none",this.contentModule.getEditPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=n),this.parent.isBlur=!1,this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.parent.getToolbar()&&gt([this.parent.getToolbar()],["e-expand-open"]),this.parent.setContentHeight("preview",!0),this.unWireEvent(),this.wireBaseKeyDown(),this.contentModule.getEditPanel().focus(),this.parent.updateValue(),g(this.parent.placeholder)||0!==this.contentModule.getEditPanel().innerText.length)||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="block");this.parent.trigger("actionComplete",{requestType:"Preview",targetItem:"Preview",args:e}),this.parent.formatter.enableUndo(this.parent),this.parent.invokeChangeEvent()},e.prototype.getTextAreaValue=function(){return"<p><br></p>"===this.contentModule.getEditPanel().innerHTML||12===this.contentModule.getEditPanel().innerHTML.length||1===this.contentModule.getEditPanel().childNodes.length&&"P"===this.contentModule.getEditPanel().childNodes[0].tagName&&7===this.contentModule.getEditPanel().innerHTML.length?"":this.parent.value},e.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},e.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},e.prototype.destroy=function(){this.removeEventListener()},e}(),Lg={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}},Og=function(){function e(){this.services={}}return e.prototype.register=function(e,t){g(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(g(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),Ag=function(){function e(){this.rendererMap={}}return e.prototype.addRenderer=function(e,t){var i=d(Pu,e);g(this.rendererMap[i])&&(this.rendererMap[i]=t)},e.prototype.getRenderer=function(e){var t=d(Pu,e);if(g(this.rendererMap[t]))throw"The renderer "+t+" is not found";return this.rendererMap[t]},e}(),Bg=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("execCommandCallBack",this.commandCallBack,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.commandCallBack=function(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.notify("toolbar-refresh",{args:e}),this.parent.notify("count",{})},e.prototype.removeEventListener=function(){this.parent.off("execCommandCallBack",this.commandCallBack),this.parent.off("destroy",this.removeEventListener)},e}(),Fg=["alignments","formats","fontname","fontsize","fontcolor","backgroundcolor","align","display","tablerows","tablecolumns","tablecellhorizontalalign","tablecellverticalalign","styles"],Ng={alignments:{id:"Alignments",icon:"e-alignments",tooltip:"Alignments",command:"Alignments",subCommand:"Alignments"},justifyleft:{id:"JustifyLeft",icon:"e-justify-left",tooltip:"JustifyLeft",command:"Alignments",subCommand:"JustifyLeft"},justifycenter:{id:"JustifyCenter",icon:"e-justify-center",tooltip:"JustifyCenter",command:"Alignments",subCommand:"JustifyCenter"},justifyright:{id:"JustifyRight",icon:"e-justify-right",tooltip:"JustifyRight",command:"Alignments",subCommand:"JustifyRight"},justifyfull:{id:"JustifyFull",icon:"e-justify-full",tooltip:"JustifyFull",command:"Alignments",subCommand:"JustifyFull"},fontname:{id:"FontName",icon:"e-font-name",tooltip:"Font Name",command:"Font",subCommand:"FontName"},fontsize:{id:"FontSize",icon:"e-font-size",tooltip:"Font Size",command:"Font",subCommand:"FontSize"},fontcolor:{id:"FontColor",icon:"e-font-color",tooltip:"Font Color",command:"Font",subCommand:"FontColor",value:"#ff0000ff"},backgroundcolor:{id:"BackgroundColor",icon:"e-background-color",tooltip:"Background Color",command:"Font",subCommand:"BackgroundColor",value:"#ffff00ff"},bold:{id:"Bold",icon:"e-bold",tooltip:"Bold",command:"Style",subCommand:"Bold"},italic:{id:"Italic",icon:"e-italic",tooltip:"Italic",command:"Style",subCommand:"Italic"},underline:{id:"Underline",icon:"e-underline",tooltip:"Underline",command:"Style",subCommand:"Underline"},strikethrough:{id:"StrikeThrough",icon:"e-strike-through",tooltip:"StrikeThrough",command:"Style",subCommand:"StrikeThrough"},clearformat:{id:"ClearFormat",icon:"e-clear-format",tooltip:"Clear Format",command:"Clear",subCommand:"ClearFormat"},clearall:{id:"ClearAll",icon:"e-clear-all",tooltip:"Clear All",command:"Clear",subCommand:"ClearAll"},cut:{id:"Cut",icon:"e-cut",tooltip:"Cut",command:"ClipBoard",subCommand:"Cut"},copy:{id:"Copy",icon:"e-copy",tooltip:"Copy",command:"ClipBoard",subCommand:"Copy"},paste:{id:"Paste",icon:"e-paste",tooltip:"Paste",command:"ClipBoard",subCommand:"Paste"},unorderedlist:{id:"UnorderedList",icon:"e-unorder-list",tooltip:"Bulleted List",command:"Lists",subCommand:"UL"},orderedlist:{id:"OrderedList",icon:"e-order-list",tooltip:"Numbered List",command:"Lists",subCommand:"OL"},indent:{id:"Indent",icon:"e-indent",tooltip:"Increase Indent",command:"Indents",subCommand:"Indent"},outdent:{id:"Outdent",icon:"e-outdent",tooltip:"Decrease Indent",command:"Indents",subCommand:"Outdent"},undo:{id:"Undo",icon:"e-undo",tooltip:"Undo",command:"Actions",subCommand:"Undo"},redo:{id:"Redo",icon:"e-redo",tooltip:"Redo",command:"Actions",subCommand:"Redo"},superscript:{id:"SuperScript",icon:"e-super-script",tooltip:"Superscript",command:"Effects",subCommand:"SuperScript"},subscript:{id:"SubScript",icon:"e-sub-script",tooltip:"Subscript",command:"Effects",subCommand:"SubScript"},createlink:{id:"CreateLink",icon:"e-create-link",tooltip:"Insert Hyperlink",command:"Links",subCommand:"CreateLink"},openlink:{id:"OpenLink",icon:"e-open-link",tooltip:"Open Link",command:"Links",subCommand:"OpenLink"},editlink:{id:"EditLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Links",subCommand:"EditLink"},removelink:{id:"RemoveLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Links",subCommand:"RemoveLink"},image:{id:"Image",icon:"e-image",tooltip:"Insert Image",command:"Images",subCommand:"Image"},createtable:{id:"CreateTable",icon:"e-create-table",tooltip:"Create Table",command:"Table",subCommand:"CreateTable"},removetable:{id:"removeTable",icon:"e-remove-table",tooltip:"Remove Table",command:"removeTable",subCommand:"removeTable"},replace:{id:"Replace",icon:"e-replace",tooltip:"Replace",command:"Images",subCommand:"Replace"},align:{id:"Align",icon:"e-align",tooltip:"Align",command:"Images",subCommand:"Align"},caption:{id:"Caption",icon:"e-caption",tooltip:"Image Caption",command:"Images",subCommand:"Caption"},remove:{id:"Remove",icon:"e-remove",tooltip:"Remove",command:"Images",subCommand:"Remove"},openimagelink:{id:"OpenImageLink",icon:"e-open-link",tooltip:"Open Link",command:"Images",subCommand:"OpenImageLink"},editimagelink:{id:"EditImageLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Images",subCommand:"EditImageLink"},removeimagelink:{id:"RemoveImageLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Images",subCommand:"RemoveImageLink"},insertlink:{id:"InsertLink",icon:"e-insert-link",tooltip:"Insert Link",command:"Images",subCommand:"InsertLink"},display:{id:"Display",icon:"e-display",tooltip:"Display",command:"Images",subCommand:"Display"},alttext:{id:"AltText",icon:"e-alt-text",tooltip:"Alternative Text",command:"Images",subCommand:"AltText"},dimension:{id:"Dimension",icon:"e-dimension",tooltip:"Change Size",command:"Images",subCommand:"Dimension"},fullscreen:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"View",subCommand:"Maximize"},maximize:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"FullScreen",subCommand:"Maximize"},minimize:{id:"Minimize",icon:"e-minimize",tooltip:"Minimize",command:"FullScreen",subCommand:"Minimize"},lowercase:{id:"LowerCase",icon:"e-lower-case",tooltip:"Lower Case",command:"Casing",subCommand:"LowerCase"},uppercase:{id:"UpperCase",icon:"e-upper-case",tooltip:"Upper Case",command:"Casing",subCommand:"UpperCase"},print:{id:"Print",icon:"e-print",tooltip:"Print",command:"Print",subCommand:"Print"},formats:{id:"Formats",icon:"e-formats",tooltip:"Formats",command:"Formats",subCommand:"Formats"},sourcecode:{id:"SourceCode",icon:"e-source-code",tooltip:"Source Code",command:"SourceCode",subCommand:"SourceCode"},preview:{id:"Preview",icon:"e-preview",tooltip:"Preview",command:"Preview",subCommand:"Preview"},viewside:{id:"ViewSide",icon:"e-view-side",tooltip:"ViewSide",command:"ViewSide",subCommand:"ViewSide"},insertcode:{id:"InsertCode",icon:"e-insert-code",tooltip:"Insert Code",command:"Formats",subCommand:"Pre"},tableheader:{id:"TableHeader",icon:"e-table-header",tooltip:"Table Header",command:"Table",subCommand:"TableHeader"},tableremove:{id:"TableRemove",icon:"e-table-remove",tooltip:"Table Remove",command:"Table",subCommand:"TableRemove"},tablerows:{id:"TableRows",icon:"e-table-rows",tooltip:"Table Rows",command:"Table",subCommand:"TableRows"},tablecolumns:{id:"TableColumns",icon:"e-table-columns",tooltip:"Table Columns",command:"Table",subCommand:"TableColumns"},tablecellbackground:{id:"TableCellBackground",icon:"e-table-cell-background",tooltip:"Table Cell Background",command:"Table",subCommand:"TableCellBackground"},tablecellhorizontalalign:{id:"TableCellHorizontalAlign",icon:"e-table-cell-horizontalAlign",tooltip:"Table Cell HorizontalAlign",command:"Table",subCommand:"TableCellHorizontalAlign"},tablecellverticalalign:{id:"TableCellVerticalAlign",icon:"e-table-cell-verticalAlign",tooltip:"Table Cell VerticalAlign",command:"Table",subCommand:"TableCellVerticalAlign"},tableeditproperties:{id:"TableEditProperties",icon:"e-table-edit-properties",tooltip:"Table Edit Properties",command:"Table",subCommand:"TableEditProperties"},styles:{id:"Styles",icon:"e-table-styles",tooltip:"Styles",command:"Table",subCommand:"Styles"}},Hg=[{locale:"alignmentsDropDownLeft",value:"JustifyLeft"},{locale:"alignmentsDropDownCenter",value:"JustifyCenter"},{locale:"alignmentsDropDownRight",value:"JustifyRight"},{locale:"alignmentsDropDownJustify",value:"JustifyFull"}],Vg=[{iconCss:"e-icons e-justify-left",text:"Align Left",command:"Alignments",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",text:"Align Center",command:"Alignments",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",text:"Align Right",command:"Alignments",subCommand:"JustifyRight"},{iconCss:"e-icons e-justify-full",text:"Align Justify",command:"Alignments",subCommand:"JustifyFull"}],jg=[{iconCss:"e-icons e-justify-left",command:"Images",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",command:"Images",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",command:"Images",subCommand:"JustifyRight"}],zg=[{locale:"imageDisplayDropDownInline",value:"Inline"},{locale:"imageDisplayDropDownBreak",value:"Break"}],qg=[{text:"Inline",cssClass:"e-inline",command:"Images",subCommand:"Inline"},{text:"Break",cssClass:"e-break",command:"Images",subCommand:"Break"}],Wg=[{locale:"tableInsertRowDropDownBefore",value:"InsertRowBefore"},{locale:"tableInsertRowDropDownAfter",value:"InsertRowAfter"},{locale:"tableInsertRowDropDownDelete",value:"DeleteRow"}],_g=[{iconCss:"e-icons e-insert-row-before",text:"Insert row before",command:"Table",subCommand:"InsertRowBefore"},{iconCss:"e-icons e-insert-row-after",text:"Insert row after",command:"Table",subCommand:"InsertRowAfter"},{iconCss:"e-icons e-delete-row",text:"Delete row",command:"Table",subCommand:"DeleteRow"}],Gg=[{locale:"tableInsertColumnDropDownLeft",value:"InsertColumnLeft"},{locale:"tableInsertColumnDropDownRight",value:"InsertColumnRight"},{locale:"tableInsertColumnDropDownDelete",value:"DeleteColumn"}],Ug=[{iconCss:"e-icons e-insert-column-left",text:"Insert column left",command:"Table",subCommand:"InsertColumnLeft"},{iconCss:"e-icons e-insert-column-right",text:"Insert column right",command:"Table",subCommand:"InsertColumnRight"},{iconCss:"e-icons e-delete-column",text:"Delete column",command:"Table",subCommand:"DeleteColumn"}],Kg=[{locale:"tableVerticalAlignDropDownTop",value:"AlignTop"},{locale:"tableVerticalAlignDropDownMiddle",value:"AlignMiddle"},{locale:"tableVerticalAlignDropDownBottom",value:"AlignBottom"}],Yg=[{iconCss:"e-icons e-align-top",text:"Align Top",command:"Table",subCommand:"AlignTop"},{iconCss:"e-icons e-align-middle",text:"Align Middle",command:"Table",subCommand:"AlignMiddle"},{iconCss:"e-icons e-align-bottom",text:"Align Bottom",command:"Table",subCommand:"AlignBottom"}],Xg=[{locale:"tableStylesDropDownDashedBorder",value:"Dashed"},{locale:"tableStylesDropDownAlternateRows",value:"Alternate"}],Qg=[{text:"Dashed Borders",cssClass:"e-dashed-borders",command:"Table",subCommand:"Dashed"},{text:"Alternate Rows",cssClass:"e-alternate-rows",command:"Table",subCommand:"Alternate"}];function Jg(e,t,i){for(var n=0;t.length>n;n++)if(t[n].value===i.subCommand)return e.localeObj.getConstant(t[n].locale);return i.text}var Zg=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$g=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},ef=["Bold","Italic","Underline","|","Formats","Alignments","OrderedList","UnorderedList","|","CreateLink","Image","|","SourceCode","Undo","Redo"],tf=[{text:"Segoe UI",value:"Segoe UI",cssClass:"e-segoe-ui"},{text:"Arial",value:"Arial,Helvetica,sans-serif",cssClass:"e-arial"},{text:"Georgia",value:"Georgia,serif",cssClass:"e-georgia"},{text:"Impact",value:"Impact,Charcoal,sans-serif",cssClass:"e-impact"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif",cssClass:"e-tahoma"},{text:"Times New Roman",value:"Times New Roman,Times,serif",cssClass:"e-times-new-roman"},{text:"Verdana",value:"Verdana,Geneva,sans-serif",cssClass:"e-verdana"}],nf=[{text:"8 pt",value:"8pt"},{text:"10 pt",value:"10pt"},{text:"12 pt",value:"12pt"},{text:"14 pt",value:"14pt"},{text:"18 pt",value:"18pt"},{text:"24 pt",value:"24pt"},{text:"36 pt",value:"36pt"}],rf=[{text:"Paragraph",value:"P",cssClass:"e-paragraph"},{text:"Code",value:"Pre",cssClass:"e-code"},{text:"Quotation",value:"BlockQuote",cssClass:"e-quote"},{text:"Heading 1",value:"H1",cssClass:"e-h1"},{text:"Heading 2",value:"H2",cssClass:"e-h2"},{text:"Heading 3",value:"H3",cssClass:"e-h3"},{text:"Heading 4",value:"H4",cssClass:"e-h4"}],of={Custom:["","#000000","#e7e6e6","#44546a","#4472c4","#ed7d31","#a5a5a5","#ffc000","#70ad47","#ff0000","#f2f2f2","#808080","#cfcdcd","#d5dce4","#d9e2f3","#fbe4d5","#ededed","#fff2cc","#e2efd9","#ffcccc","#d9d9d9","#595959","#aeaaaa","#acb9ca","#b4c6e7","#f7caac","#dbdbdb","#ffe599","#c5e0b3","#ff8080","#bfbfbf","#404040","#747070","#8496b0","#8eaadb","#f4b083","#c9c9c9","#ffd966","#a8d08d","#ff3333","#a6a6a6","#262626","#3b3838","#323e4f","#2f5496","#c45911","#7b7b7b","#bf8f00","#538135","#b30000","#7f7f7f","#0d0d0d","#161616","#212934","#1f3763","#823b0b","#525252","#7f5f00","#375623","#660000"]},sf={Custom:["","#000000","#ffff00","#00ff00","#00ffff","#0000ff","#ff0000","#000080","#800080","#996633","#f2f2f2","#808080","#ffffcc","#b3ffb3","#ccffff","#ccccff","#ffcccc","#ccccff","#ff80ff","#f2e6d9","#d9d9d9","#595959","#ffff80","#80ff80","#b3ffff","#8080ff","#ff8080","#8080ff","#ff00ff","#dfbf9f","#bfbfbf","#404040","#ffff33","#33ff33","#33ffff","#3333ff","#ff3333","#0000b3","#b300b3","#c68c53","#a6a6a6","#262626","#e6e600","#00b300","#009999","#000099","#b30000","#000066","#660066","#86592d","#7f7f7f","#0d0d0d","#999900","#006600","#006666","#000066","#660000","#00004d","#4d004d","#734d26"]},af=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt(!0)],t.prototype,"enable",void 0),$g([zt(!0)],t.prototype,"enableFloating",void 0),$g([zt(Iu.Expand)],t.prototype,"type",void 0),$g([zt(ef)],t.prototype,"items",void 0),$g([zt({})],t.prototype,"itemConfigs",void 0),t}(oi),lf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt([".jpeg",".jpg",".png"])],t.prototype,"allowedTypes",void 0),$g([zt("inline")],t.prototype,"display",void 0),$g([zt("Blob")],t.prototype,"saveFormat",void 0),$g([zt("auto")],t.prototype,"width",void 0),$g([zt("auto")],t.prototype,"height",void 0),$g([zt(null)],t.prototype,"saveUrl",void 0),$g([zt(null)],t.prototype,"path",void 0),$g([zt(!0)],t.prototype,"resize",void 0),$g([zt(0)],t.prototype,"minWidth",void 0),$g([zt(null)],t.prototype,"maxWidth",void 0),$g([zt(0)],t.prototype,"minHeight",void 0),$g([zt(null)],t.prototype,"maxHeight",void 0),$g([zt(!1)],t.prototype,"resizeByPercent",void 0),t}(oi),hf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt("100%")],t.prototype,"width",void 0),$g([zt(Qg)],t.prototype,"styles",void 0),$g([zt(!0)],t.prototype,"resize",void 0),$g([zt(0)],t.prototype,"minWidth",void 0),$g([zt(null)],t.prototype,"maxWidth",void 0),t}(oi),pf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt(!0)],t.prototype,"enable",void 0),$g([zt(!1)],t.prototype,"showOnRightClick",void 0),$g([zt("hide")],t.prototype,"actionOnScroll",void 0),$g([zt(["Open","Edit","UnLink"])],t.prototype,"link",void 0),$g([zt(["Replace","Align","Caption","Remove","-","InsertLink","OpenImageLink","EditImageLink","RemoveImageLink","Display","AltText","Dimension"])],t.prototype,"image",void 0),$g([zt(["Cut","Copy","Paste"])],t.prototype,"text",void 0),$g([zt(["TableHeader","TableRows","TableColumns","BackgroundColor","-","TableRemove","Alignments","TableCellVerticalAlign","Styles"])],t.prototype,"table",void 0),t}(oi),df=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt(!1)],t.prototype,"prompt",void 0),$g([zt(null)],t.prototype,"deniedAttrs",void 0),$g([zt(["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-family","font-size","font-weight","font-style","height","left","line-height","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","position","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"])],t.prototype,"allowedStyleProps",void 0),$g([zt(null)],t.prototype,"deniedTags",void 0),$g([zt(!0)],t.prototype,"keepFormat",void 0),$g([zt(!1)],t.prototype,"plainText",void 0),t}(oi),cf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt(null)],t.prototype,"default",void 0),$g([zt("65px")],t.prototype,"width",void 0),$g([zt(tf)],t.prototype,"items",void 0),t}(oi),uf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt(null)],t.prototype,"default",void 0),$g([zt("35px")],t.prototype,"width",void 0),$g([zt(nf)],t.prototype,"items",void 0),t}(oi),gf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt(null)],t.prototype,"default",void 0),$g([zt("65px")],t.prototype,"width",void 0),$g([zt(rf)],t.prototype,"types",void 0),t}(oi),ff=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt("#ff0000")],t.prototype,"default",void 0),$g([zt("Palette")],t.prototype,"mode",void 0),$g([zt(10)],t.prototype,"columns",void 0),$g([zt(of)],t.prototype,"colorCode",void 0),$g([zt(!1)],t.prototype,"modeSwitcher",void 0),t}(oi),mf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),$g([zt("#ffff00")],t.prototype,"default",void 0),$g([zt("Palette")],t.prototype,"mode",void 0),$g([zt(10)],t.prototype,"columns",void 0),$g([zt(sf)],t.prototype,"colorCode",void 0),$g([zt(!1)],t.prototype,"modeSwitcher",void 0),t}(oi),yf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vf=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},bf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yf(t,e),vf([zt([])],t.prototype,"styles",void 0),vf([zt([])],t.prototype,"scripts",void 0),t}(oi),wf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yf(t,e),vf([zt(!1)],t.prototype,"enable",void 0),vf([zt(null)],t.prototype,"attributes",void 0),vf([qt({},bf)],t.prototype,"resources",void 0),t}(oi),Cf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sf=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},xf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cf(t,e),Sf([zt(!1)],t.prototype,"enable",void 0),Sf([zt(!0)],t.prototype,"onSelection",void 0),t}(oi),kf={alignments:"Alignments",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",fontName:"Font Name",fontSize:"Font Size",fontColor:"Font Color",backgroundColor:"Background Color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",clearFormat:"Clear Format",clearAll:"Clear All",cut:"Cut",copy:"Copy",paste:"Paste",unorderedList:"Bulleted List",orderedList:"Numbered List",indent:"Increase Indent",outdent:"Decrease Indent",undo:"Undo",redo:"Redo",superscript:"Superscript",subscript:"Subscript",createLink:"Insert Link",openLink:"Open Link",editLink:"Edit Link",removeLink:"Remove Link",image:"Insert Image",replace:"Replace",align:"Align",caption:"Image Caption",remove:"Remove",insertLink:"Insert Link",display:"Display",altText:"Alternative Text",dimension:"Change Size",fullscreen:"Maximize",maximize:"Maximize",minimize:"Minimize",lowerCase:"Lower Case",upperCase:"Upper Case",print:"Print",formats:"Formats",sourcecode:"Code View",preview:"Preview",viewside:"ViewSide",insertCode:"Insert Code",linkText:"Display Text",linkTooltipLabel:"Title",linkWebUrl:"Web Address",linkTitle:"Enter a title",linkurl:"http://example.com",linkOpenInNewWindow:"Open Link in New Window",linkHeader:"Insert Link",dialogInsert:"Insert",dialogCancel:"Cancel",dialogUpdate:"Update",imageHeader:"Insert Image",imageLinkHeader:"You can also provide a link from the web",mdimageLink:"Please provide a URL for your image",imageUploadMessage:"Drop image here or browse to upload",imageDeviceUploadMessage:"Click here to upload",imageAlternateText:"Alternate Text",alternateHeader:"Alternative Text",browse:"Browse",imageUrl:"http://example.com/image.png",imageCaption:"Caption",imageSizeHeader:"Image Size",imageHeight:"Height",imageWidth:"Width",textPlaceholder:"Enter Text",inserttablebtn:"Insert Table",tabledialogHeader:"Insert Table",tableWidth:"Width",cellpadding:"Cell Padding",cellspacing:"Cell Spacing",columns:"Number of columns",rows:"Number of rows",tableRows:"Table Rows",tableColumns:"Table Columns",tableCellHorizontalAlign:"Table Cell Horizontal Align",tableCellVerticalAlign:"Table Cell Vertical Align",createTable:"Create Table",removeTable:"Remove Table",tableHeader:"Table Header",tableRemove:"Table Remove",tableCellBackground:"Table Cell Background",tableEditProperties:"Table Edit Properties",styles:"Styles",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteColumn:"Delete Column",insertRowBefore:"Insert Row Before",insertRowAfter:"Insert Row After",deleteRow:"Delete Row",tableEditHeader:"Edit Table",TableHeadingText:"Heading",TableColText:"Col",imageInsertLinkHeader:"Insert Link",editImageHeader:"Edit Image",alignmentsDropDownLeft:"Align Left",alignmentsDropDownCenter:"Align Center",alignmentsDropDownRight:"Align Right",alignmentsDropDownJustify:"Align Justify",imageDisplayDropDownInline:"Inline",imageDisplayDropDownBreak:"Break",tableInsertRowDropDownBefore:"Insert row before",tableInsertRowDropDownAfter:"Insert row after",tableInsertRowDropDownDelete:"Delete row",tableInsertColumnDropDownLeft:"Insert column left",tableInsertColumnDropDownRight:"Insert column right",tableInsertColumnDropDownDelete:"Delete column",tableVerticalAlignDropDownTop:"Align Top",tableVerticalAlignDropDownMiddle:"Align Middle",tableVerticalAlignDropDownBottom:"Align Bottom",tableStylesDropDownDashedBorder:"Dashed Borders",tableStylesDropDownAlternateRows:"Alternate Rows",pasteFormat:"Paste Format",pasteFormatContent:"Choose the formatting action",plainText:"Plain Text",cleanFormat:"Clean",keepFormat:"Keep",pasteDialogOk:"OK",pasteDialogCancel:"Cancel"},Tf={alignments:"alignments",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",justifyfull:"justifyFull",fontname:"fontName",fontsize:"fontSize",fontcolor:"fontColor",backgroundcolor:"backgroundColor",bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",clearformat:"clearFormat",clearall:"clearAll",cut:"cut",copy:"copy",paste:"paste",unorderedlist:"unorderedList",orderedlist:"orderedList",indent:"indent",outdent:"outdent",undo:"undo",redo:"redo",superscript:"superscript",subscript:"subscript",createlink:"createLink",openlink:"openLink",editlink:"editLink",removelink:"removeLink",openimagelink:"openLink",editimagelink:"editLink",removeimagelink:"removeLink",image:"image",replace:"replace",align:"align",caption:"caption",remove:"remove",insertlink:"insertLink",display:"display",alttext:"altText",dimension:"dimension",fullscreen:"fullscreen",maximize:"maximize",minimize:"minimize",lowercase:"lowerCase",uppercase:"upperCase",print:"print",formats:"formats",sourcecode:"sourcecode",preview:"preview",viewside:"viewside",insertcode:"insertCode",tablerows:"tableRows",tablecolumns:"tableColumns",tablecellhorizontalalign:"tableCellHorizontalAlign",tablecellverticalalign:"tableCellVerticalAlign",createtable:"createTable",removetable:"removeTable",tableheader:"tableHeader",tableremove:"tableRemove",tablecellbackground:"tableCellBackground",tableeditproperties:"tableEditProperties",styles:"styles",insertcolumnleft:"insertColumnLeft",insertcolumnright:"insertColumnRight",deletecolumn:"deleteColumn",aligntop:"AlignTop",alignmiddle:"AlignMiddle",alignbottom:"AlignBottom",insertrowbefore:"insertRowBefore",insertrowafter:"insertRowAfter",deleterow:"deleteRow"};function Df(e,t,i,n){var r;i?r=t.contentModule.getDocument().querySelector("body"):r=t.element;if(Object.keys(e).length)for(var o=0,s=Object.keys(e);o<s.length;o++){var a=s[o];if("class"===a)r.classList.add(e[a]);else if("disabled"===a&&"disabled"===e[a])t.enabled=!1,t.setEnable();else if("readonly"===a&&"readonly"===e[a])t.readonly=!0,t.setReadOnly(n);else if("style"===a)r.setAttribute("style",e[a]);else if("tabindex"===a)t.inputElement.setAttribute("tabindex",e[a]);else if("placeholder"===a)t.placeholder=e[a],t.setPlaceHolder();else{["name","required"].indexOf(a)>-1?t.valueContainer.setAttribute(a,e[a]):r.setAttribute(a,e[a])}}}var Ef=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showFullScreen=function(e){!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),this.scrollableParent=hr(this.parent.element),this.parent.element.classList.contains("e-rte-full-screen")||(this.parent.trigger("actionBegin",{requestType:"Maximize",targetItem:"Maximize",args:e}),this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable&&this.parent.toolbarSettings.enable&&(this.parent.getToolbarElement().style.width="100%",this.parent.getToolbarElement().style.top="0px"),this.parent.element.classList.add("e-rte-full-screen"),this.toggleParentOverflow(!0),this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),me.isDevice&&this.parent.toolbarModule.removeFixedTBarClass(),this.parent.toolbarModule.updateItem({targetItem:"Maximize",updateItem:"Minimize",baseToolbar:this.parent.getBaseToolbarObject()})),this.parent.trigger("actionComplete",{requestType:"Maximize",targetItem:"Maximize",args:e}))},e.prototype.hideFullScreen=function(e){if(!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.element.classList.contains("e-rte-full-screen")){this.parent.element.classList.remove("e-rte-full-screen");for(var t=document.querySelectorAll(".e-rte-overflow"),i=0;i<t.length;i++)gt([t[i]],["e-rte-overflow"]);this.parent.trigger("actionBegin",{requestType:"Minimize",targetItem:"Minimize",args:e}),this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),this.parent.toolbarModule.updateItem({targetItem:"Minimize",updateItem:"Maximize",baseToolbar:this.parent.getBaseToolbarObject()}),me.isDevice&&this.parent.inlineMode.enable&&this.parent.toolbarModule.addFixedTBarClass()),this.parent.trigger("actionComplete",{requestType:"Minimize",targetItem:"Minimize",args:e})}},e.prototype.toggleParentOverflow=function(e){if(!g(this.scrollableParent))for(var t=0;t<this.scrollableParent.length;t++){if("#document"===this.scrollableParent[t].nodeName)ut([document.querySelector("body")],["e-rte-overflow"]);else ut([this.scrollableParent[t]],["e-rte-overflow"])}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"full-screen":this.showFullScreen(e.args),t.preventDefault();break;case"escape":this.hideFullScreen(e.args),t.preventDefault()}},e.prototype.addEventListener=function(){this.parent.on(wg,this.onKeyDown,this),this.parent.on("destroy",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off(wg,this.onKeyDown),this.parent.off("destroy",this.destroy)},e.prototype.destroy=function(){this.parent.element.classList.contains("e-rte-full-screen")&&this.toggleParentOverflow(!1);for(var e=document.querySelectorAll(".e-rte-overflow"),t=0;t<e.length;t++)gt([e[t]],["e-rte-overflow"]);this.removeEventListener()},e}(),Rf=["Undo","Redo"],Pf=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function If(e,t){var i=-1;return t.some((function(t,n){return"string"==typeof t&&e===t.toLocaleLowerCase()&&(i=n,!0)})),i}function Mf(e,t){var i=!1;return e.classList.contains(t)&&(i=!0),i}function Lf(e,t,i,n){for(var r,o,s=0;s<e.length;s++){if("value"===i&&e[s].value.toLocaleLowerCase()===t.toLocaleLowerCase()){r=e[s];break}if("text"===i&&e[s].text.toLocaleLowerCase()===t.toLocaleLowerCase()){r=e[s];break}if("subCommand"===i&&e[s].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){r=e[s];break}}if(!g(r))switch(n){case"text":o=r.text;break;case"value":o=r.value;break;case"iconCss":o=r.iconCss}return o}function Of(){var e=!1;return me.isDevice&&me.isIos&&(e=!0),e}function Af(e){return g(e)?"":e}function Bf(e,t){var i=t.getService("rteLocale"),n=Tf[e];return i.getConstant(n)}function Ff(e,t){for(var i=e.dropDownModule,n=e.args,r=0,o=Object.keys(e.args);r<o.length;r++)for(var s=o[r],a=0;a<e.tbItems.length;a++){var l=e.tbItems[a].subCommand,h=l&&l.toLocaleLowerCase();if(l&&h===s||"UL"===l&&"unorderedlist"===s||"OL"===l&&"orderedlist"===s||"pre"===h&&"insertcode"===s)if("boolean"==typeof n[s])!0===n[s]?ut([e.tbElements[a]],["e-active"]):gt([e.tbElements[a]],["e-active"]);else if(("string"==typeof n[s]||null===n[s])&&If(s,e.parent.toolbarSettings.items)>-1){var p=n[s]?n[s]:"",d="";switch(s){case"formats":if(g(i.formatDropDown)||t||!g(i.formatDropDown)&&i.formatDropDown.isDestroyed)break;var c=e.parent.format.types;d=Lf(c,p,"subCommand","text");var u=g(e.parent.format.default)?c[0].text:e.parent.format.default;i.formatDropDown.content='<span style="display: inline-flex;width:'+e.parent.format.width+'" ><span class="e-rte-dropdown-btn-text">'+(g(d)?u:d)+"</span></span>",i.formatDropDown.dataBind();break;case"alignments":if(g(i.alignDropDown)||!g(i.alignDropDown)&&i.alignDropDown.isDestroyed)break;d=Lf(Vg,p,"subCommand","iconCss"),i.alignDropDown.iconCss=g(d)?"e-icons e-justify-left":d,i.alignDropDown.dataBind();break;case"fontname":if(g(i.fontNameDropDown)||t||!g(i.fontNameDropDown)&&i.fontNameDropDown.isDestroyed)break;var f=e.parent.fontFamily.items;d=Lf(f,p,"value","text");var m=g(e.parent.fontFamily.default)?f[0].text:e.parent.fontFamily.default,y=g(d)?m:d;e.tbElements[a].title=y,i.fontNameDropDown.content='<span style="display: inline-flex;width:'+e.parent.fontFamily.width+'" ><span class="e-rte-dropdown-btn-text">'+y+"</span></span>",i.fontNameDropDown.dataBind();break;case"fontsize":if(g(i.fontSizeDropDown)||!g(i.fontSizeDropDown)&&i.fontSizeDropDown.isDestroyed)break;var v=e.parent.fontSize.items,b=g(e.parent.fontSize.default)?v[1].text:e.parent.fontSize.default;d=Lf(v,""===p?b.replace(/\s/g,""):p,"value","text"),i.fontSizeDropDown.content='<span style="display: inline-flex;width:'+e.parent.fontSize.width+'" ><span class="e-rte-dropdown-btn-text">'+Af(d)+"</span></span>",i.fontSizeDropDown.dataBind()}}}}function Nf(e){return"object"==typeof e?e:[e]}function Hf(e,t){for(var i=[],n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if("Separator"!==t[r].type){if("OrderedList"===e[n]&&"OL"===t[r].subCommand){i.push(r);break}if("UnorderedList"===e[n]&&"UL"===t[r].subCommand){i.push(r);break}if("InsertCode"===e[n]&&"Pre"===t[r].subCommand){i.push(r);break}if(e[n]===t[r].subCommand){i.push(r);break}}return i}function Vf(e,t){for(var i=0,n=Hf(Nf(Rf),e.toolbarObj.items),r=kt(".e-toolbar-item",e.toolbarObj.element),o=0,s=Object.keys(t);o<s.length;o++){var a=s[o],l=r[n[i]];l&&e.toolbarObj.enableItems(l,t[a]),i++}}function jf(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}function zf(e){for(var t={},i=Object.keys(e),n=0;n<Object.keys(e).length;n++)t[i[n].toLocaleLowerCase()]=e[i[n]];return t}function qf(e,t){var i;return null!==e&&""!==e?(i=t.enableHtmlEncode?Wf(Gf(e)):Wf(e),t.setProperties({value:i},!0)):i=t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",i}function Wf(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var i=document.createElement("div");if(t.childNodes.length>0){for(var n=void 0,r=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||Pf.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(n?r.appendChild(t.firstChild):(o=ct("p"),i.appendChild(o),o.appendChild(t.firstChild)),r=o,n=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?wt(t.firstChild):(i.appendChild(t.firstChild),n=!1);for(var s=i.querySelectorAll("img"),a=0;a<s.length;a++)s[a].classList.contains("e-rte-image")||s[a].classList.add("e-rte-image"),s[a].classList.contains("e-imginline")||s[a].classList.contains("e-imgbreak")||s[a].classList.add("e-imginline")}return i.innerHTML}function _f(e){return"<p><br></p>"===e||"&lt;p&gt;&lt;br&gt;&lt;/p&gt;"===e||""===e}function Gf(e){return e.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}var Uf=function(){function e(e){this.parent=e}return e.prototype.render=function(e){var t;return e.beforeOpen=this.beforeOpen.bind(this),e.open=this.open.bind(this),g(e.close)&&(e.close=this.close.bind(this)),e.beforeClose=this.beforeClose.bind(this),(t=new Fo(e)).isStringTemplate=!0,t},e.prototype.beforeOpen=function(e){this.parent.trigger("beforeDialogOpen",e)},e.prototype.open=function(e){this.parent.trigger("dialogOpen",e)},e.prototype.beforeClose=function(e){this.parent.trigger("beforeDialogClose",e)},e.prototype.close=function(e){this.parent.trigger("dialogClose",e)},e}(),Kf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yf=function(){return(Yf=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Xf=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Qf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.defaultResetValue=null,n.isResizeInitialized=!1,n.isFocusOut=!1,n.isRTE=!1,n.isBlur=!0,n.needsID=!0,n}return Kf(t,e),t.prototype.requiredModules=function(){var e=[];return this.toolbarSettings.enable&&(e.push({member:"toolbar",args:[this,this.serviceLocator]}),e.push({member:"link",args:[this,this.serviceLocator]}),e.push({member:"table",args:[this,this.serviceLocator]}),e.push({member:"image",args:[this,this.serviceLocator]}),this.quickToolbarSettings.enable&&e.push({member:"quickToolbar",args:[this,this.serviceLocator]})),this.showCharCount&&e.push({member:"count",args:[this,this.serviceLocator]}),"Markdown"===this.editorMode&&e.push({member:"markdownEditor",args:[this,this.serviceLocator]}),"HTML"===this.editorMode&&(e.push({member:"htmlEditor",args:[this,this.serviceLocator]}),e.push({member:"pasteCleanup",args:[this,this.serviceLocator]})),this.enableResize&&e.push({member:"resize",args:[this]}),e},t.prototype.updateEnable=function(){this.enabled?(gt([this.element],"e-disabled"),this.element.setAttribute("aria-disabled","false"),g(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(gt(this.getToolbar().querySelectorAll(".e-active"),"e-active"),gt([this.getToolbar()],["e-rte-tb-float","e-rte-tb-abs-float"])),ut([this.element],"e-disabled"),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()},t.prototype.preRender=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new Og,this.initializeServices(),this.setContainer(),this.persistData(),Dt(this.element,{width:C(this.width)}),St(this.element,{role:"application"})},t.prototype.persistData=function(){if(this.enablePersistence&&"TEXTAREA"===this.originalElement.tagName){this.element.id=this.originalElement.id+"_wrapper";var e=window.localStorage.getItem(this.getModuleName()+this.element.id);g(e)||""===e||this.setProperties(JSON.parse(e),!0)}},t.prototype.setContainer=function(){this.originalElement=this.element.cloneNode(!0),null!==this.value&&null===this.valueTemplate||this.setValue(),this.element.hasAttribute("tabindex")&&(this.htmlAttributes={tabindex:this.element.getAttribute("tabindex")},this.element.removeAttribute("tabindex")),this.isBlazor()||(this.element.innerHTML="");for(var e=["class","style","id","ejs-for"],t={},i=0;i<this.element.attributes.length;i++)-1!==e.indexOf(this.element.attributes[i].name)||/^data-val/.test(this.element.attributes[i].name)||(t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name));if(u(t,this.htmlAttributes,t),this.setProperties({htmlAttributes:t},!0),g(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),"TEXTAREA"===this.element.tagName){var n=this.createElement("div",{className:this.element.getAttribute("class")});this.isBlazor()||(this.element.innerHTML=""),this.element.parentElement.insertBefore(n,this.element),S()?(n.appendChild(this.element),this.valueContainer=this.createElement("textarea",{id:this.element.id+"-value"})):this.valueContainer=this.element,gt([this.valueContainer],this.element.getAttribute("class").split(" ")),this.isBlazor()&&ut([this.element],"e-rte-hidden"),this.element=n}else this.valueContainer=this.createElement("textarea",{id:this.getID()+"-value"});this.valueContainer.name=this.getID(),ut([this.valueContainer],"e-rte-hidden"),this.element.appendChild(this.valueContainer)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.selectAll=function(){this.notify("selectAll",{})},t.prototype.selectRange=function(e){this.notify("selectRange",{range:e})},t.prototype.getSelection=function(){var e="";return this.notify("getSelectedHtml",{callBack:function(t){e=t}}),e},t.prototype.executeCommand=function(e,t,i){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){var n=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!(!this.iframeSettings.enable||n.startContainer!==this.inputElement)||!this.inputElement.contains(n.startContainer))&&this.focusIn()}var r=Lg[e];i&&i.undo&&i.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(r.command,r.subCommand?r.subCommand:t||r.value,null,null,t||r.value,t||r.value),i&&i.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.notify("content-changed",{})},t.prototype.htmlPurifier=function(e,t){if("HTML"===this.editorMode)switch(e){case"insertHTML":this.enableHtmlSanitizer&&(t="string"==typeof t?this.htmlEditorModule.sanitizeHelper(t):this.htmlEditorModule.sanitizeHelper(t.outerHTML));break;case"insertTable":g(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case"insertImage":var i=this.createElement("img",{attrs:{src:t.url}}),n=i.outerHTML;this.enableHtmlSanitizer&&(n=this.htmlEditorModule.sanitizeHelper(i.outerHTML));var r=""!==n&&this.createElement("div",{innerHTML:n}).firstElementChild.getAttribute("src")||null;r=g(r)?"":r,t.url=r,g(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),g(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break;case"createLink":var o=this.createElement("a",{attrs:{href:t.url}}),s=o.outerHTML;this.enableHtmlSanitizer&&(s=this.htmlEditorModule.sanitizeHelper(o.outerHTML));var a=""!==s&&this.createElement("div",{innerHTML:s}).firstElementChild.getAttribute("href")||null;a=g(a)?"":a,t.url=a}return t},t.prototype.encode=function(e){var t=this.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.render=function(){this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new Dg(this,this.serviceLocator),this.sourceCodeModule=new Mg(this,this.serviceLocator),this.notify("initial-load",{}),this.trigger("load"),this.RTERender();new Bg(this);this.notify("initial-end",{}),this.toolbarSettings.enable&&"Expand"===this.toolbarSettings.type&&!g(this.getToolbar())&&this.toolbarSettings.items.indexOf("Undo")>-1&&this.toolbarSettings.items.indexOf("Redo")>-1&&this.disableToolbarItem(["Undo","Redo"]),this.setContentHeight(),null!==this.value&&(this.isBlazor()?this.defaultResetValue=this.value:this.valueContainer.defaultValue=this.value),this.enabled?this.eventInitializer():this.unWireEvents(),this.renderComplete()},t.prototype.eventInitializer=function(){this.wireEvents()},t.prototype.keyDown=function(e){if(this.notify(wg,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var t=this.getRange();if(Tt("#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var i=new RegExp(String.fromCharCode(8203),"g"),n=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(i,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,n)}else if("Backspace"===e.code&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){var r=t.startContainer.parentElement,o=void 0,s=void 0;for(s=0;s<r.childNodes.length;s++)r.childNodes[s]===t.startContainer&&(o=s);var a=!0,l=[];for(s=o;s>=0;s--)3===r.childNodes[s].nodeType&&8203===r.childNodes[s].textContent.charCodeAt(0)&&a?l.push(s):a=!1;if(l.length>0)for(s=l.length-1;s>0;s--)r.childNodes[l[s]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,t.startOffset)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(e.action&&"paste"!==e.action||9===e.which||"Backspace"===e.code&&8===e.which))switch(this.formatter.process(this,null,e),e.action){case"toolbar-focus":if(this.toolbarSettings.enable){this.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}break;case"escape":this.contentModule.getEditPanel().focus()}g(this.placeholder)||(g(this.placeHolderWrapper)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderWrapper.style.display="none"),this.autoResize()},t.prototype.keyUp=function(e){this.notify("keyUp",{member:"keyup",args:e}),"KeyX"!==e.code||88!==e.which||88!==e.keyCode||!e.ctrlKey||""!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||(this.inputElement.innerHTML=qf("<p><br></p>",this));var t=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),this.inputElement&&0!==this.inputElement.textContent.length&&this.notify("toolbar-refresh",{args:e}),g(this.placeholder)||this.setPlaceHolder()},t.prototype.serializeValue=function(e){return"HTML"!==this.editorMode||g(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(Gf(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.updateValue=function(e){if(g(e)){var t=this.inputElement.innerHTML;this.setProperties({value:_f(t)?null:t})}else this.setProperties({value:e})},t.prototype.triggerEditArea=function(e){if(Of()){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.notify("editAreaClick",{member:"editAreaClick",args:e})}else this.notify("editAreaClick",{member:"editAreaClick",args:e})},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.notify("toolbar-refresh",{args:e}),this.triggerEditArea(e)},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&me.isDevice){var t=e.target,i=Tt(t,"table");if(t&&"A"===t.nodeName||"IMG"===t.nodeName||"TD"===t.nodeName||"TH"===t.nodeName||"TABLE"===t.nodeName||i&&this.contentModule.getEditPanel().contains(i))return}this.notifyMouseUp(e)},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.onCopy=function(){this.contentModule.getDocument().execCommand("copy",!1,null)},t.prototype.onCut=function(){this.contentModule.getDocument().execCommand("cut",!1,null)},t.prototype.onPaste=function(e){var t=this,i={originalEvent:e,cancel:!1,requestType:"Paste"};this.trigger("actionBegin",i,(function(i){var n=t.getText().length-t.getSelection().length+(g(e)||g(e.clipboardData)?0:e.clipboardData.getData("text/plain").length);if("Markdown"!==t.editorMode)if(!i.cancel&&"true"===t.inputElement.contentEditable&&(-1===t.maxLength||n<t.maxLength))if(g(t.pasteCleanupModule)){var r={requestType:"Paste",editorMode:t.editorMode,event:e},o=null;e&&!g(e.clipboardData)&&(o=e.clipboardData.getData("text/plain"));var s=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;null!==o&&t.notify(Cg,{file:s,args:e,text:o}),setTimeout((function(){t.formatter.onSuccess(t,r)}),0)}else t.notify("pasteClean",{args:e});else e.preventDefault();else-1===t.maxLength||n<t.maxLength||e.preventDefault()}))},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},t.prototype.destroy=function(){if(!this.isDestroyed&&this.isRendered)if(null!==this.element.offsetParent){if(this.notify("destroy",{}),this.destroyDependentModules(),g(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),this.unWireEvents(),"TEXTAREA"===this.originalElement.tagName){S()&&(wt(this.valueContainer),this.valueContainer=this.element.querySelector(".e-blazor-hidden.e-control.e-richtexteditor")),this.element.parentElement.insertBefore(this.valueContainer,this.element),this.valueContainer.id=this.getID(),this.valueContainer.removeAttribute("name"),wt(this.element),""!==this.originalElement.innerHTML.trim()?S()||(this.valueContainer.value=this.originalElement.innerHTML.trim(),this.setProperties({value:g(this.initialValue)?null:this.initialValue},!0)):this.valueContainer.value=this.isBlazor()?this.defaultResetValue:this.valueContainer.defaultValue,this.element=this.valueContainer;for(var t=0;t<this.originalElement.classList.length;t++)ut([this.element],this.originalElement.classList[t]);gt([this.element],"e-rte-hidden")}else""!==this.originalElement.innerHTML.trim()?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:g(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML="";this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),g(this.cssClass)||gt([this.element],this.cssClass),this.removeHtmlAttributes(),this.removeAttributes(),e.prototype.destroy.call(this),this.isRendered=!1,this.enablePersistence&&window.localStorage.removeItem(this.getModuleName()+this.element.id)}else this.toolbarModule.destroy()},t.prototype.removeHtmlAttributes=function(){if(this.htmlAttributes)for(var e=Object.keys(this.htmlAttributes),t=0;t<e.length&&this.element.hasAttribute(e[t]);t++)this.element.removeAttribute(e[t])},t.prototype.removeAttributes=function(){this.enabled||gt([this.element],"e-disabled"),this.enableRtl&&gt([this.element],"e-rtl"),this.readonly&&gt([this.element],"e-rte-readonly"),""!==this.element.style.width&&""===this.originalElement.style.width&&this.element.style.removeProperty("width"),""!==this.element.style.height&&""===this.originalElement.style.height&&this.element.style.removeProperty("height"),this.element.removeAttribute("aria-disabled"),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex")},t.prototype.destroyDependentModules=function(){this.renderModule.destroy(),this.formatter.editorManager.undoRedoManager.destroy(),this.sourceCodeModule.destroy()},t.prototype.getContent=function(){return this.iframeSettings.enable&&S()?this.inputElement:this.contentModule.getPanel()},t.prototype.getText=function(){return this.contentModule.getText()},t.prototype.getSelectedHtml=function(){var e=this.createElement("div"),t=this.contentModule.getDocument().getSelection();if(t.rangeCount>0){var i=t.getRangeAt(0).cloneContents();e.appendChild(i)}return e.innerHTML},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange(),t="#text"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,i=e.getClientRects()[0].left,n=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(i,n,t)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.getModuleName=function(){return"richtexteditor"},t.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"value":var s,a=t[o];s="HTML"===this.editorMode?qf(a,this):a,g(a)||""===a||(this.value=this.serializeValue(this.enableHtmlEncode?this.encode(Gf(s)):s)),this.updatePanelValue(),this.setPlaceHolder(),this.notify("xhtmlValidation",{module:"XhtmlValidation",newProp:t,oldProp:i}),this.showCharCount&&this.countModule.refresh();break;case"valueTemplate":this.setValue(),this.showCharCount&&this.countModule.refresh();break;case"width":this.setWidth(t[o]),this.toolbarSettings.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case"height":this.setHeight(t[o]),this.setContentHeight(),this.autoResize();break;case"readonly":this.setReadOnly(!1);break;case"cssClass":this.element.classList.remove(i[o]),this.setCssClass(t[o]);break;case"enabled":this.setEnable();break;case"enableRtl":this.updateRTL();break;case"placeholder":this.placeholder=t[o],this.setPlaceHolder();break;case"htmlAttributes":Df(this.htmlAttributes,this,!1,!1);break;case"iframeSettings":var l=i[o];if(l.resources){var h=this.contentModule.getDocument().querySelector("head"),p=void 0;l.resources.scripts&&(p=h.querySelectorAll(".rte-iframe-script-sheet"),this.removeSheets(p)),l.resources.styles&&(p=h.querySelectorAll(".rte-iframe-style-sheet"),this.removeSheets(p))}this.setIframeSettings();break;case"locale":e.prototype.refresh.call(this);break;case"inlineMode":this.notify("model-changed",{module:"quickToolbar",newProp:t,oldProp:i}),this.setContentHeight();break;case"toolbarSettings":this.notify("model-changed",{module:"toolbar",newProp:t,oldProp:i}),this.setContentHeight();break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"showCharCount":t[o]&&this.countModule?this.countModule.renderCount():!1===t[o]&&this.countModule&&this.countModule.destroy();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify("model_changed",{newProp:t,oldProp:i});break;case"enableXhtml":this.notify("xhtmlValidation",{module:"XhtmlValidation",newProp:t,oldProp:i});break;case"quickToolbarSettings":t.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent(),this.notify("model-changed",{newProp:t,oldProp:i});break;default:this.notify("model-changed",{newProp:t,oldProp:i})}}},t.prototype.updateValueData=function(){this.enableHtmlEncode?this.setProperties({value:this.encode(Gf(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:Gf(this.inputElement.innerHTML)})},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)wt(e[t])},t.prototype.updatePanelValue=function(){var e=this.value;e=this.enableHtmlEncode&&this.value?Gf(e):e;var t=this.element.querySelector(".e-rte-srctextarea");e?(t&&"block"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.trim()!==e.trim()?this.inputElement.innerHTML=e:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(t&&"block"===t.style.display&&(t.value=""),"HTML"===this.editorMode?this.inputElement.innerHTML="<p><br/></p>":this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule.refresh()},t.prototype.setHeight=function(e){this.element.style.height="auto"!==e?C(e):"auto","Expand"===this.toolbarSettings.type&&("string"==typeof this.height&&this.height.indexOf("px")>-1||"number"==typeof this.height)?this.element.classList.add("e-rte-fixed-tb-expand"):this.element.classList.remove("e-rte-fixed-tb-expand")},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement("span",{className:"rte-placeholder e-rte-placeholder"}),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement),St(this.placeHolderWrapper,{style:"font-size: 14px; padding: 16px; margin-left: 0px; margin-right: 0px;"})),this.placeHolderWrapper.innerHTML=this.placeholder,0!==this.inputElement.textContent.length||g(this.inputElement.firstChild)||"P"!==this.inputElement.firstChild.nodeName||g(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName||"<p><br></p><p><br></p>"===this.inputElement.innerHTML?this.placeHolderWrapper.style.display="none":this.placeHolderWrapper.style.display="block"):this.inputElement.setAttribute("placeholder",this.placeholder))},t.prototype.setWidth=function(e){"auto"!==e?Dt(this.element,{width:C(this.width)}):this.element.style.width="auto"},t.prototype.setCssClass=function(e){g(e)||this.element.classList.add(e)},t.prototype.updateRTL=function(){this.notify(Sg,{enableRtl:this.enableRtl}),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.updateReadOnly=function(){this.notify("readOnlyMode",{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unbindEvents():this.enabled&&this.bindEvents())},t.prototype.print=function(){var e,t=this,i={element:this.inputElement,requestType:"print",cancel:!1};this.trigger("actionBegin",i,(function(i){if(e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===me.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=w(t.inputElement,e),!i.cancel){t.trigger("actionComplete",{requestType:"print"})}}))},t.prototype.refreshUI=function(){this.renderModule.refresh()},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.enableToolbarItem=function(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!0,t)},t.prototype.disableToolbarItem=function(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!1,t)},t.prototype.removeToolbarItem=function(e){this.toolbarModule.removeTBarItems(e)},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())},t.prototype.initializeServices=function(){this.serviceLocator.register("rendererFactory",new Ag),this.serviceLocator.register("rteLocale",this.localeObj=new ki(this.getModuleName(),kf,this.locale)),this.serviceLocator.register("dialogRenderObject",new Uf(this))},t.prototype.RTERender=function(){var e=this.serviceLocator.getService("rendererFactory");this.contentModule=e.getRenderer(Pu.Content),this.fullScreenModule=new Ef(this),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),Df(this.htmlAttributes,this,!1,!0),this.iframeSettings&&this.setIframeSettings(),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!g(this.value)&&this.setProperties({value:this.encode(Gf(this.value))})},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t),this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e)}this.iframeSettings.attributes&&Df(this.iframeSettings.attributes,this,!0,!1)},t.prototype.InjectSheet=function(e,t){try{if(t&&t.length>0)for(var i=this.contentModule.getDocument().querySelector("head"),n=0;n<t.length;n++)if(e){var r=this.createScriptElement();r.src=t[n],i.appendChild(r)}else{var o=this.createStyleElement();o.href=t[n],i.appendChild(o)}}catch(e){return}},t.prototype.createScriptElement=function(){var e=this.createElement("script",{className:"rte-iframe-script-sheet"});return e.type="text/javascript",e},t.prototype.createStyleElement=function(){var e=this.createElement("link",{className:"rte-iframe-style-sheet"});return e.rel="stylesheet",e},t.prototype.isBlazor=function(){return!!S()},t.prototype.setValue=function(){if(this.valueTemplate)if("string"==typeof this.valueTemplate)this.setProperties({value:this.valueTemplate});else{for(var e=Ge(this.valueTemplate)({}),t=0;t<e.length;t++){vt([e[t]],this.element)}this.setProperties({value:this.element.innerHTML.trim()})}else{var i=!g(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim();""!==i&&("TEXTAREA"===this.element.tagName?this.setProperties({value:Gf(i)}):this.setProperties({value:i}))}},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.setContentHeight=function(e,t){var i,n,r,o=0,s=this.sourceCodeModule.getPanel()&&"block"===this.sourceCodeModule.getPanel().parentElement.style.display?this.sourceCodeModule.getPanel().parentElement:this.contentModule.getPanel(),a=this.element.offsetHeight;0!==this.element.offsetHeight||"auto"===this.height||this.getToolbar()||(a=parseInt(this.height,10),(r="string"==typeof this.height&&this.height.indexOf("%")>-1)&&(n=this.height));var l=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,h=this.element.querySelector(".e-resize-handle"),p=this.enableResize?g(h)?0:h.offsetHeight+8:0,d=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;(this.toolbarSettings.type===Iu.Expand&&t&&"preview"!==e?(i="auto"===this.height&&0===p?"auto":a-(l+d+p)+"px",o=this.toolbarSettings.enableFloating?0:d):i="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?r?n:a-(l+p)+"px":"auto",Dt(s,{height:i,marginTop:o+"px"}),this.iframeSettings.enable&&"sourceCode"===e)&&Dt(xt(".e-rte-content",this.element),{height:i,marginTop:o+"px"});if(this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){var c=(t?l+d:l)+"px";Dt(this.getToolbar().parentElement,{height:c})}0===p&&this.autoResize()},t.prototype.getHtml=function(){return this.value},t.prototype.getXhtml=function(){var e=this.value;return this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.showSourceCode=function(){this.readonly||this.notify("sourceCode",{})},t.prototype.getCharCount=function(){return("Markdown"===this.editorMode?this.inputElement.value.trim():this.inputElement.textContent.trim()).length},t.prototype.getBaseToolbarObject=function(){return!this.inlineMode.enable||me.isDevice&&!Of()?this.toolbarModule&&this.toolbarModule.getBaseToolbar():this.quickToolbarModule&&this.quickToolbarModule.getInlineBaseToolbar()},t.prototype.getToolbar=function(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null},t.prototype.getToolbarElement=function(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()},t.prototype.getID=function(){return"TEXTAREA"===this.originalElement.tagName?this.valueContainer.id:this.element.id},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;ut([this.element],["e-focused"]),this.preventDefaultResize(e),this.notify("mouseDown",{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.preventDefaultResize=function(e){"msie"===me.info.name?this.contentModule.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize):"mozilla"===me.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!1,"false"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!1,"false"))},t.prototype.defaultResize=function(e){"msie"===me.info.name?this.contentModule.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):"mozilla"===me.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!0,"true"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!0,"true"))},t.prototype.resizeHandler=function(){var e=!1;this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),e=this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains("e-expand-open")),this.setContentHeight("",e)},t.prototype.scrollHandler=function(e){this.notify("scroll",{args:e})},t.prototype.contentScrollHandler=function(e){this.notify("contentscroll",{args:e})},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,ut([this.element],["e-focused"]),"HTML"===this.editorMode?this.cloneValue="<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(Gf(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=""===this.inputElement.value?null:this.inputElement.value;var t=document.activeElement;if((t===this.element||t===this.getToolbarElement()||t===this.contentModule.getEditPanel()||this.iframeSettings.enable&&t===this.contentModule.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||Tt(t,".e-rte-toolbar")===this.getToolbarElement())&&(this.contentModule.getEditPanel().focus(),!g(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");for(var i=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),n=0;n<i.length;n++)i[n].setAttribute("tabindex","-1")}this.preventDefaultResize(e),this.trigger("focus",{event:e,isInteracted:0!==Object.keys(e).length}),!g(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),ye.add(document,"mousedown",this.onDocumentClick,this)}if(!g(this.getToolbarElement())){var r=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]");for(n=0;n<r.length;n++)r[n].classList.contains("e-rte-dropdown-btn")||r[n].classList.contains("e-insert-table-btn")||r[n].hasAttribute("tabindex")&&"-1"===r[n].getAttribute("tabindex")||r[n].setAttribute("tabindex","-1")}},t.prototype.getUpdatedValue=function(){var e,t=this.element.querySelector(".e-rte-srctextarea");return"HTML"===this.editorMode?(e="<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(Gf(this.inputElement.innerHTML)):this.inputElement.innerHTML,t&&"block"===t.style.display&&(e=t.value)):e=""===this.inputElement.value?null:this.inputElement.value,e},t.prototype.updateValueOnIdle=function(){this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.invokeChangeEvent()},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.onDocumentClick=function(e){var t=e.target,i=Tt(t,".e-richtexteditor");this.element.contains(e.target)||document===e.target||i===this.element||Tt(t,'[aria-owns="'+this.getID()+'"]')||(this.isBlur=!0,this.isRTE=!1),this.notify("docClick",{args:e})},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var i=Tt(t,".e-richtexteditor");i&&i===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):Tt(t,'[aria-owns="'+this.getID()+'"]')?this.isBlur=!1:(this.isBlur=!0,t=null)}if(this.isBlur&&g(t)){gt([this.element],["e-focused"]),this.notify("focusChange",{});var n=this.getUpdatedValue();this.setProperties({value:n}),this.notify("toolbar-refresh",{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,jf(this.valueContainer,"focusout"),this.defaultResize(e),this.trigger("blur",{event:e,isInteracted:0!==Object.keys(e).length}),g(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),ye.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&(g(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.invokeChangeEvent=function(){var e={value:this.value};this.value!==this.cloneValue&&(this.trigger("change",e),this.cloneValue=this.value)},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=hr(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];ye.add(i,"scroll",this.scrollHandler,this)}this.iframeSettings.enable||ye.add(this.contentModule.getPanel(),"scroll",this.contentScrollHandler,this)},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(ye.add(this.inputElement,"contextmenu",this.contextHandler,this),me.isDevice&&(this.touchModule=new Pi(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.unWireContextEvent=function(){ye.remove(this.inputElement,"contextmenu",this.contextHandler),me.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=hr(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];ye.remove(i,"scroll",this.scrollHandler)}this.iframeSettings.enable||ye.remove(this.contentModule.getPanel(),"scroll",this.contentScrollHandler)},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.contextHandler=function(e){var t=Tt(e.target,"a, table, img");!1!==this.inlineMode.onSelection&&(g(t)||!this.inputElement.contains(t)||"IMG"!==t.tagName&&"TABLE"!==t.tagName&&"A"!==t.tagName)||e.preventDefault()},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim();this.setProperties({value:""===e?null:this.isBlazor()?this.defaultResetValue:e})},t.prototype.autoResize=function(){var e=this;if("auto"===this.height){if("Markdown"===this.editorMode)setTimeout((function(){e.setAutoHeight(e.inputElement)}),0);else if(this.iframeSettings.enable){var t=this.element.querySelector("#"+this.getID()+"_rte-view");setTimeout((function(){e.setAutoHeight(t)}),100),this.inputElement.style.overflow="hidden"}}else this.inputElement.style.overflow=null},t.prototype.setAutoHeight=function(e){g(e)||(e.style.height="",e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.on("content-changed",this.contentChanged,this),this.on("resizeInitialized",this.updateResizeFlag,this),this.readonly&&this.enabled||this.bindEvents()},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t="Markdown"===this.editorMode?this.contentModule.getText():e.currentTarget.textContent.trim(),i=[8,16,17,37,38,39,40,46,65],n=void 0,r=0;r<=i.length-1;r++)if(e.which===i[r]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(n=i[r])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==n&&e.preventDefault()}},t.prototype.bindEvents=function(){this.keyboardModule=new Ig(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:Yf({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=Tt(this.valueContainer,"form");e&&ye.add(e,"reset",this.resetHandler,this),ye.add(this.inputElement,"keyup",this.keyUp,this),ye.add(this.inputElement,"paste",this.onPaste,this),ye.add(this.inputElement,me.touchEndEvent,y(this.mouseUp,30),this),ye.add(this.inputElement,me.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on("keydown-handler",this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(ye.add(this.inputElement,"focusin",this.focusHandler,this),ye.add(this.inputElement,"focusout",this.blurHandler,this),ye.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),ye.add(this.inputElement.ownerDocument,me.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.notify("iframe-click",e)},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}!e.callBack||"copy"!==e.event.action&&"cut"!==e.event.action&&"delete"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.off("content-changed",this.contentChanged),this.off("resizeInitialized",this.updateResizeFlag),this.readonly&&this.enabled||this.unbindEvents()},t.prototype.unbindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=Tt(this.valueContainer,"form");e&&ye.remove(e,"reset",this.resetHandler),ye.remove(this.inputElement,"keyup",this.keyUp),ye.remove(this.inputElement,"paste",this.onPaste),ye.remove(this.inputElement,me.touchEndEvent,y(this.mouseUp,30)),ye.remove(this.inputElement,me.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off("keydown-handler",this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(ye.remove(this.inputElement,"focusin",this.focusHandler),ye.remove(this.inputElement,"focusout",this.blurHandler),ye.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),ye.remove(this.inputElement.ownerDocument,me.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()},Xf([qt({},af)],t.prototype,"toolbarSettings",void 0),Xf([qt({},pf)],t.prototype,"quickToolbarSettings",void 0),Xf([qt({},df)],t.prototype,"pasteCleanupSettings",void 0),Xf([qt({},wf)],t.prototype,"iframeSettings",void 0),Xf([qt({},lf)],t.prototype,"insertImageSettings",void 0),Xf([qt({},hf)],t.prototype,"tableSettings",void 0),Xf([zt(0)],t.prototype,"floatingToolbarOffset",void 0),Xf([qt({},xf)],t.prototype,"inlineMode",void 0),Xf([zt("100%")],t.prototype,"width",void 0),Xf([zt(!1)],t.prototype,"enablePersistence",void 0),Xf([zt(!1)],t.prototype,"enableResize",void 0),Xf([zt({})],t.prototype,"htmlAttributes",void 0),Xf([zt(null)],t.prototype,"placeholder",void 0),Xf([zt(!1)],t.prototype,"autoSaveOnIdle",void 0),Xf([zt(!1)],t.prototype,"readonly",void 0),Xf([zt(!0)],t.prototype,"enabled",void 0),Xf([zt(!0)],t.prototype,"enableHtmlSanitizer",void 0),Xf([zt(!1)],t.prototype,"enableHtmlEncode",void 0),Xf([zt(!1)],t.prototype,"enableXhtml",void 0),Xf([zt("auto")],t.prototype,"height",void 0),Xf([zt(null)],t.prototype,"cssClass",void 0),Xf([zt(null)],t.prototype,"value",void 0),Xf([zt(30)],t.prototype,"undoRedoSteps",void 0),Xf([zt(300)],t.prototype,"undoRedoTimer",void 0),Xf([zt("HTML")],t.prototype,"editorMode",void 0),Xf([zt(null)],t.prototype,"keyConfig",void 0),Xf([zt(!1)],t.prototype,"showCharCount",void 0),Xf([zt(!1)],t.prototype,"enableTabKey",void 0),Xf([zt(!1)],t.prototype,"enableAutoUrl",void 0),Xf([zt(-1)],t.prototype,"maxLength",void 0),Xf([qt({},gf)],t.prototype,"format",void 0),Xf([qt({},cf)],t.prototype,"fontFamily",void 0),Xf([qt({},uf)],t.prototype,"fontSize",void 0),Xf([qt({},ff)],t.prototype,"fontColor",void 0),Xf([qt({},mf)],t.prototype,"backgroundColor",void 0),Xf([zt(null)],t.prototype,"valueTemplate",void 0),Xf([zt(1e4)],t.prototype,"saveInterval",void 0),Xf([_t()],t.prototype,"actionBegin",void 0),Xf([_t()],t.prototype,"actionComplete",void 0),Xf([_t()],t.prototype,"beforeDialogOpen",void 0),Xf([_t()],t.prototype,"dialogOpen",void 0),Xf([_t()],t.prototype,"beforeDialogClose",void 0),Xf([_t()],t.prototype,"dialogClose",void 0),Xf([_t()],t.prototype,"beforeQuickToolbarOpen",void 0),Xf([_t()],t.prototype,"quickToolbarOpen",void 0),Xf([_t()],t.prototype,"quickToolbarClose",void 0),Xf([_t()],t.prototype,"toolbarStatusUpdate",void 0),Xf([_t()],t.prototype,"imageSelected",void 0),Xf([_t()],t.prototype,"beforeImageUpload",void 0),Xf([_t()],t.prototype,"imageUploading",void 0),Xf([_t()],t.prototype,"imageUploadSuccess",void 0),Xf([_t()],t.prototype,"imageUploadFailed",void 0),Xf([_t()],t.prototype,"imageRemoving",void 0),Xf([_t()],t.prototype,"afterImageDelete",void 0),Xf([_t()],t.prototype,"created",void 0),Xf([_t()],t.prototype,"destroyed",void 0),Xf([_t()],t.prototype,"beforeSanitizeHtml",void 0),Xf([_t()],t.prototype,"blur",void 0),Xf([_t()],t.prototype,"toolbarClick",void 0),Xf([_t()],t.prototype,"focus",void 0),Xf([_t()],t.prototype,"change",void 0),Xf([_t()],t.prototype,"resizing",void 0),Xf([_t()],t.prototype,"resizeStart",void 0),Xf([_t()],t.prototype,"resizeStop",void 0),Xf([zt(null)],t.prototype,"formatter",void 0),t=Xf([Gt],t)}(pi),Jf=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zf=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};function $f(e,t){for(var i=u({},e),n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];t.indexOf(o)<0&&h(i,o)}return i}function em(e,t){var i=40===t?0:e.childElementCount-1,n=i,r=e.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(var o=0,s=e.children.length;o<s;o++)e.children[o].classList.contains("e-focused")&&(n=o,e.children[o].classList.remove("e-focused"),40===t?n++:n--,n===(40===t?e.childElementCount:-1)&&(n=i));-1!==(n=function e(t,i,n,r,o){void 0===o&&(o=0);(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(n===(40===r?t.childElementCount-1:0)?n=40===r?0:t.childElementCount-1:40===r?n++:n--);if((i=t.children[n]).classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++o===t.childElementCount)return n=-1;n=e(t,i,n,r,o)}return n}(e,e.children[n],n,t))&&(ut([e.children[n]],"e-focused"),e.children[n].focus())}var tm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jf(t,e),Zf([zt("")],t.prototype,"iconCss",void 0),Zf([zt("")],t.prototype,"id",void 0),Zf([zt(!1)],t.prototype,"separator",void 0),Zf([zt("")],t.prototype,"text",void 0),Zf([zt("")],t.prototype,"url",void 0),t}(oi),im=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nm=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},rm="e-menu-icon",om="e-item",sm="e-dropdown-popup",am="e-separator",lm="e-vertical",hm=function(e){function t(t,i){return e.call(this,t,i)||this}return im(t,e),t.prototype.preRender=function(){},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.closePopup()},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,t){for(var i,n=this.items.length,r=0,o=this.items.length;r<o;r++)if(t===this.items[r].text){n=r;break}for(var s=e.length-1;s>=0;s--)i=new tm(this,"items",e[s],!0),this.items.splice(n,0,i);this.canOpen()||this.createItems()},t.prototype.removeItems=function(e){for(var t=0,i=e.length;t<i;t++)for(var n=0,r=this.items.length;n<r;n++)if(e[t]===this.items[n].text){this.items.splice(n,1);break}this.canOpen()||this.createItems()},t.prototype.createPopup=function(){var e,t=this.createElement("div",{className:sm,id:this.element.id+"-popup"});document.body.appendChild(t),this.dropDown=new lr(t,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),St(this.element,((e={})["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e["aria-owns"]=this.getPopUpElement().id,e.type="button",e["aria-label"]=this.element.textContent+" dropdownbutton",e)),this.cssClass&&ut([t],this.cssClass.split(" "))},t.prototype.getTargetElement=function(){return"string"==typeof this.target?xt(this.target):this.target},t.prototype.createItems=function(e){var t,i,n,r,o=this.items,s=this.hasIcon(this.items,"iconCss"),a=this.getULElement();a?a.innerHTML="":a=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var l=0;l<o.length;l++){i=o[l];var h=this.enableHtmlSanitizer?Oi.sanitize(i.text):i.text;n=this.createElement("li",{innerHTML:i.url?"":h,className:i.separator?om+" "+am:om,attrs:{role:"menuItem",tabindex:"-1"},id:i.id?i.id:m("e-"+this.getModuleName()+"-item")}),i.url&&(n.appendChild(this.createAnchor(i)),n.classList.add("e-url")),i.iconCss?(t=this.createElement("span",{className:rm+" "+i.iconCss}),i.url?n.childNodes[0].appendChild(t):n.insertBefore(t,n.childNodes[0])):s&&!i.separator&&n.classList.add("e-blank-icon"),r={item:i,element:n},this.trigger("beforeItemRender",r),a.appendChild(n)}e&&this.getPopUpElement().appendChild(a),s&&function(e){var t=[].slice.call(e.getElementsByClassName("e-blank-icon"));if(t.length){var i=e.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");i.classList.contains("e-url")&&(i=i.querySelector(".e-menu-url"));var n,r=i.querySelector(".e-menu-icon"),o=e.classList.contains("e-rtl");n=o?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var s=parseInt(getComputedStyle(r).fontSize,10)+parseInt(getComputedStyle(r)[n.margin],10)+parseInt(getComputedStyle(i).paddingLeft,10)+"px";t.forEach((function(e){e.classList.contains("e-url")?e.querySelector(".e-menu-url").style[n.padding]=s:e.style[n.padding]=s}))}}(this.getPopUpElement())},t.prototype.hasIcon=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i][t])return!0;return!1},t.prototype.createAnchor=function(e){var t=this.enableHtmlSanitizer?Oi.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:t,attrs:{href:e.url}})},t.prototype.initialize=function(){this.button=new Zr({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=m("e-"+this.getModuleName())),this.appendArrowSpan(),this.createPopup(),this.setActiveElem([this.element])},t.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(lm)>-1?"bottom":"right")+" e-caret"}))},t.prototype.setActiveElem=function(e){this.activeElem=e},t.prototype.getModuleName=function(){return"dropdown-btn"},t.prototype.canOpen=function(){return this.getPopUpElement().classList.contains("e-popup-close")},t.prototype.destroy=function(){var t=this;if(e.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName()){var i;this.element.querySelector("span.e-caret")&&wt(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&gt([this.element],i),gt(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach((function(e){t.element.removeAttribute(e)})),this.dropDown.destroy();var n=document.getElementById(this.getPopUpElement().id);n&&(gt([n],["e-popup-open","e-popup-close"]),wt(n)),this.disabled||this.unWireEvents()}},t.prototype.getPopUpElement=function(){return this.dropDown.element},t.prototype.getULElement=function(){return this.getPopUpElement().children[0]},t.prototype.wireEvents=function(){var e=this.getPopUpElement();this.delegateMousedownHandler=this.mousedownHandler.bind(this),ye.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),ye.add(this.element,"click",this.clickHandler,this),ye.add(e,"click",this.clickHandler,this),ye.add(this.element,"keydown",this.keyBoardHandler,this),ye.add(e,"keydown",this.keyBoardHandler,this),this.rippleFn=Jt(e,{selector:"."+om})},t.prototype.keyBoardHandler=function(e){if(e.target!==this.element||9!==e.keyCode&&(e.altKey||40!==e.keyCode)&&38!==e.keyCode)switch(e.keyCode){case 38:case 40:!e.altKey||38!==e.keyCode&&40!==e.keyCode?this.upDownKeyHandler(e):this.keyEventHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e)}},t.prototype.upDownKeyHandler=function(e){(!this.target||38!==e.keyCode&&40!==e.keyCode)&&(e.preventDefault(),em(this.getULElement(),e.keyCode))},t.prototype.keyEventHandler=function(e){(!this.target||13!==e.keyCode&&9!==e.keyCode)&&(9!==e.keyCode&&e.preventDefault(),27===e.keyCode||38===e.keyCode||9===e.keyCode?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))},t.prototype.getLI=function(e){return"LI"===e.tagName?e:Tt(e,"li")},t.prototype.mousedownHandler=function(e){var t=e.target;this.canOpen()||Tt(t,"#"+this.getPopUpElement().id)||Tt(t,"#"+this.element.id)||this.closePopup(e)},t.prototype.clickHandler=function(e){var t=e.target,i=this.canOpen();if(Tt(t,"#"+this.element.id))i?this.openPopUp(e):this.closePopup(e,this.activeElem[0]);else if(Tt(t,"#"+this.getPopUpElement().id)){var n=void 0,r=void 0,o=void 0,s=this.getLI(t);s&&(r=Array.prototype.indexOf.call(this.getULElement().children,s),(o=this.items[r])&&(n={element:s,item:o},this.trigger("select",n)),this.closePopup(e,this.activeElem[0]))}},t.prototype.openPopUp=function(e){var t=this;void 0===e&&(e=null),this.target||this.createItems(!0);var i={element:this.getULElement(),items:this.items,event:e,cancel:!1};this.trigger("beforeOpen",i,(function(e){if(!e.cancel){var i=t.getULElement();t.dropDown.show(null,t.element),ut([t.element],"e-active"),t.element.setAttribute("aria-expanded","true"),i.focus();var n={element:i,items:t.items};t.trigger("open",n)}}))},t.prototype.closePopup=function(e,t){var i=this;void 0===e&&(e=null);var n={element:this.getULElement(),items:this.items,event:e,cancel:!1};this.trigger("beforeClose",n,(function(e){if(!e.cancel){var n=i.getULElement(),r=n.querySelector(".e-selected");r&&r.classList.remove("e-selected"),i.dropDown.hide(),gt(i.activeElem,"e-active"),i.element.setAttribute("aria-expanded","false"),t&&t.focus();var o={element:n,items:i.items};i.trigger("close",o),!i.target&&n&&wt(n)}}))},t.prototype.unWireEvents=function(){ye.remove(document,"mousedown touchstart",this.delegateMousedownHandler),ye.remove(this.element,"click",this.clickHandler),ye.remove(this.getPopUpElement(),"click",this.clickHandler),ye.remove(this.element,"keydown",this.keyBoardHandler),ye.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.rippleFn()},t.prototype.onPropertyChanged=function(e,t){this.button.setProperties($f(e,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.dropDown.setProperties($f(e,["enableRtl"]));for(var i=this.getPopUpElement(),n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.canOpen()||this.closePopup()):this.wireEvents();break;case"cssClass":if(e.cssClass.indexOf(lm)>-1)Et(this.element.querySelector("span.e-caret"),["e-icon-bottom"],["e-icon-right"]);t.cssClass&&gt([i],t.cssClass.split(" ")),e.cssClass&&ut([i],e.cssClass.split(" "));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.canOpen()||this.createItems()}}},t.prototype.focusIn=function(){this.element.focus()},nm([zt("")],t.prototype,"content",void 0),nm([zt("")],t.prototype,"cssClass",void 0),nm([zt(!1)],t.prototype,"disabled",void 0),nm([zt("")],t.prototype,"iconCss",void 0),nm([zt("Left")],t.prototype,"iconPosition",void 0),nm([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),nm([Wt([],tm)],t.prototype,"items",void 0),nm([zt("")],t.prototype,"target",void 0),nm([_t()],t.prototype,"beforeItemRender",void 0),nm([_t()],t.prototype,"beforeOpen",void 0),nm([_t()],t.prototype,"beforeClose",void 0),nm([_t()],t.prototype,"close",void 0),nm([_t()],t.prototype,"open",void 0),nm([_t()],t.prototype,"select",void 0),nm([_t()],t.prototype,"created",void 0),t=nm([Gt],t)}(pi),pm=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dm=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},cm="EJS-SPLITBUTTON",um=function(e){function t(t,i){return e.call(this,t,i)||this}return pm(t,e),t.prototype.preRender=function(){var e=this.element;if(e.tagName===cm){for(var t=a("ej2_instances",e),i=this.createElement("button",{attrs:{type:"button"}}),n=this.createElement(cm,{className:"e-"+this.getModuleName()+"-wrapper"}),r=0,o=e.attributes.length;r<o;r++)i.setAttribute(e.attributes[r].nodeName,e.attributes[r].nodeValue);e.parentNode.insertBefore(n,e),wt(e),e=i,n.appendChild(e),l("ej2_instances",t,e),this.wrapper=n,this.element=e}this.element.id||(this.element.id=m("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},t.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(t,i){e.prototype.addItems.call(this,t,i),this.secondaryBtnObj.items=this.items},t.prototype.removeItems=function(t){e.prototype.removeItems.call(this,t),this.secondaryBtnObj.items=this.items},t.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add("e-rtl"),this.cssClass&&ut([this.wrapper],this.cssClass.split(" "))},t.prototype.createPrimaryButton=function(){var e={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new Zr(e),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},t.prototype.createSecondaryButton=function(){var e,t,i=this;t=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"}),this.wrapper.appendChild(t),(e={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target}).beforeItemRender=function(e){i.trigger("beforeItemRender",e)},e.open=function(e){i.trigger("open",e)},e.close=function(e){i.trigger("close",e)},e.select=function(e){i.trigger("select",e)},e.beforeOpen=function(e){var t=new gm;return i.trigger("beforeOpen",e,(function(e){t.resolve(e)})),t},e.beforeClose=function(e){var t=new gm;return i.trigger("beforeClose",e,(function(e){t.resolve(e)})),t},this.secondaryBtnObj=new hm(e),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(t),this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],ye.remove(this.getPopUpElement(),"keydown",this.secondaryBtnObj.keyBoardHandler),this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")},t.prototype.setAria=function(){St(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.secondaryBtnObj.dropDown.element.id})},t.prototype.getModuleName=function(){return"split-btn"},t.prototype.toggle=function(){this.secondaryBtnObj.toggle()},t.prototype.destroy=function(){var t=this,i=["e-rtl"],n=document.getElementById(this.element.id);this.cssClass&&(i=i.concat(this.cssClass.split(" "))),n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===cm?(this.wrapper.innerHTML="",gt([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),gt([this.wrapper],this.cssClass.split(" "))):(gt([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach((function(e){t.element.removeAttribute(e)})),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),Ct(this.wrapper)),this.unWireEvents()),this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),e.prototype.destroy.call(this),this.element.getAttribute("class")||this.element.removeAttribute("class")},t.prototype.wireEvents=function(){ye.add(this.element,"click",this.primaryBtnClickHandler,this),ye.add(this.getPopUpElement(),"keydown",this.keyBoardHandler,this),new xi(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow"}})},t.prototype.unWireEvents=function(){ye.remove(this.element,"click",this.primaryBtnClickHandler),k(this.element,xi).destroy()},t.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},t.prototype.btnKeyBoardHandler=function(e){switch(e.action){case"altdownarrow":this.clickHandler(e)}},t.prototype.onPropertyChanged=function(e,t){var i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties($f(e,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties($f(e,i));for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"cssClass":t.cssClass&&gt([this.wrapper],t.cssClass.split(" ")),ut([this.wrapper],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?ut([this.wrapper],"e-rtl"):gt([this.wrapper],"e-rtl")}}},t.prototype.focusIn=function(){this.element.focus()},dm([zt("")],t.prototype,"content",void 0),dm([zt("")],t.prototype,"cssClass",void 0),dm([zt(!1)],t.prototype,"disabled",void 0),dm([zt("")],t.prototype,"iconCss",void 0),dm([zt("Left")],t.prototype,"iconPosition",void 0),dm([Wt([],tm)],t.prototype,"items",void 0),dm([zt("")],t.prototype,"target",void 0),dm([_t()],t.prototype,"beforeItemRender",void 0),dm([_t()],t.prototype,"beforeOpen",void 0),dm([_t()],t.prototype,"beforeClose",void 0),dm([_t()],t.prototype,"click",void 0),dm([_t()],t.prototype,"close",void 0),dm([_t()],t.prototype,"open",void 0),dm([_t()],t.prototype,"select",void 0),dm([_t()],t.prototype,"created",void 0),t=dm([Gt],t)}(hm),gm=function(){var e=this;this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)},fm=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mm=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},ym=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fm(t,e),mm([zt("None")],t.prototype,"placement",void 0),mm([zt(10)],t.prototype,"largeStep",void 0),mm([zt(1)],t.prototype,"smallStep",void 0),mm([zt(!1)],t.prototype,"showSmallTicks",void 0),mm([zt(null)],t.prototype,"format",void 0),t}(oi),vm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fm(t,e),mm([zt(null)],t.prototype,"color",void 0),mm([zt(null)],t.prototype,"start",void 0),mm([zt(null)],t.prototype,"end",void 0),t}(oi),bm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fm(t,e),mm([zt(!1)],t.prototype,"enabled",void 0),mm([zt(null)],t.prototype,"minStart",void 0),mm([zt(null)],t.prototype,"minEnd",void 0),mm([zt(null)],t.prototype,"maxStart",void 0),mm([zt(null)],t.prototype,"maxEnd",void 0),mm([zt(!1)],t.prototype,"startHandleFixed",void 0),mm([zt(!1)],t.prototype,"endHandleFixed",void 0),t}(oi),wm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fm(t,e),mm([zt("")],t.prototype,"cssClass",void 0),mm([zt("Before")],t.prototype,"placement",void 0),mm([zt("Focus")],t.prototype,"showOn",void 0),mm([zt(!1)],t.prototype,"isVisible",void 0),mm([zt(null)],t.prototype,"format",void 0),t}(oi),Cm="e-slider",Sm="e-rtl",xm="e-slider-input",km="e-control-wrapper",Tm="e-handle",Dm="e-range",Em="e-slider-button",Rm="e-first-button",Pm="e-second-button",Im="e-scale",Mm="e-tick",Lm="e-large",Om="e-tick-value",Am="e-slider-tooltip",Bm="e-slider-hover",Fm="e-handle-first",Nm="e-handle-second",Hm="e-disabled",Vm="e-slider-container",jm="e-slider-horizontal-before",zm="e-slider-horizontal-after",qm="e-slider-vertical-before",Wm="e-slider-vertical-after",_m="e-material-tooltip-open",Gm="e-tooltip-active",Um="e-material-slider",Km="e-slider-track",Ym="e-slider-horizantal-color",Xm="e-slider-vertical-color",Qm="e-handle-focused",Jm="e-vertical",Zm="e-horizontal",$m="e-handle-start",ey="e-material-tooltip-start",ty="e-tab-handle",iy="e-button-icon",ny="e-small-size",ry="e-tick-pos",oy="e-first-tick",sy="e-last-tick",ay="e-slider-btn",ly="e-tab-track",hy="e-tab-range",py="e-handle-active",dy="e-material-handle",cy="e-material-range",uy="e-material-default",gy="e-material-tooltip-show",fy="e-material-tooltip-hide",my="e-read-only",yy="e-limits",vy="e-limit-bar",by="e-limit-first",wy="e-limit-second",Cy="e-drag-horizontal",Sy="e-drag-vertical",xy=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n.initialTooltip=!0,n}return fm(t,e),t.prototype.preRender=function(){this.l10n=new ki("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},t.prototype.formChecker=function(){var e=Tt(this.element,"form");e?(this.isForm=!0,g(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!g(this.formResetValue)&&"object"==typeof this.formResetValue?g(this.formResetValue)&&(this.formResetValue=parseFloat(C(this.min))):this.formResetValue=[parseFloat(C(this.min)),parseFloat(C(this.max))],this.formElement=e):this.isForm=!1},t.prototype.initCultureFunc=function(){this.internationalization=new ee(this.locale)},t.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=g(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=g(this.ticks.format)?null:this.ticks.format},t.prototype.formatString=function(e,t){var i=null,n=null;if(e||0===e){i=this.formatNumber(e);var r=this.numberOfDecimals(e);n=this.internationalization.getNumberFormat(t)(this.makeRoundNumber(e,r))}return{elementVal:i,formatString:n}},t.prototype.formatNumber=function(e){var t=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)},t.prototype.numberOfDecimals=function(e){var t=e.toString().split(".")[1];return t&&t.length?t.length:0},t.prototype.makeRoundNumber=function(e,t){var i=t||0;return Number(e.toFixed(i))},t.prototype.fractionalToInteger=function(e){e=0===this.numberOfDecimals(e)?Number(e).toFixed(this.noOfDecimals):e;for(var t=1,i=0;i<this.noOfDecimals;i++)t*=10;return e=Number((e*t).toFixed(0))},t.prototype.render=function(){S()&&this.isServerRendered||this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete()},t.prototype.initialize=function(){ut([this.element],Cm),this.setCSSClass()},t.prototype.setElementWidth=function(e){g(e)||("number"==typeof e?this.sliderContainer.style.width=C(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:C(e)))},t.prototype.setCSSClass=function(e){e&&gt([this.element],e.split(" ")),this.cssClass&&ut([this.element],this.cssClass.split(" "))},t.prototype.setEnabled=function(){this.enabled?(gt([this.sliderContainer],[Hm]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove(Hm),this.wireEvents()):(ut([this.sliderContainer],[Hm]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add(Hm),this.unwireEvents())},t.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},t.prototype.initRender=function(){S()&&this.isServerRendered?(this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input")):(this.sliderContainer=this.createElement("div",{className:Vm+" "+km}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:Km}),this.element.appendChild(this.sliderTrack)),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),S()&&this.isServerRendered||(this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:g(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:xm}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput)),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=g(this.value)?parseFloat(C(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(C(this.value.toString()))):[this.checkHandleValue(parseFloat(C(this.value[0].toString()))),this.checkHandleValue(parseFloat(C(this.value[1].toString())))],this.previousChanged=this.previousVal,g(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),S()&&this.isServerRendered||(this.enabled?gt([this.sliderContainer],[Hm]):ut([this.sliderContainer],[Hm]),this.readonly?ut([this.sliderContainer],[my]):gt([this.sliderContainer],[my]))},t.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible},t.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:Dm}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&("Horizontal"===this.orientation?this.rangeBar.classList.add(Cy):this.rangeBar.classList.add(Sy)))},t.prototype.createLimitBar=function(){if(S()&&this.isServerRendered)this.limitBarFirst=this.element.querySelectorAll(".e-limits")[0],"Range"===this.type&&(this.limitBarSecond=this.element.querySelectorAll(".e-limit-second")[0]);else{var e="Range"!==this.type?vy:by;e+=" "+yy,this.limitBarFirst=this.createElement("div",{attrs:{class:e}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:wy+" "+yy}}),this.element.appendChild(this.limitBarSecond))}},t.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove(Jm),this.sliderContainer.classList.add(Zm),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(Zm),this.sliderContainer.classList.add(Jm),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},t.prototype.setAriaAttributes=function(e){var t=this,i=this.min,n=this.max;(!g(this.customValues)&&this.customValues.length>0&&(i=this.customValues[0],n=this.customValues[this.customValues.length-1]),"Range"!==this.type)?St(e,{"aria-valuemin":i.toString(),"aria-valuemax":n.toString()}):(!g(this.customValues)&&this.customValues.length>0?[[i.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),n.toString()]]:[[i.toString(),this.value[1].toString()],[this.value[0].toString(),n.toString()]]).forEach((function(e,i){var n=0===i?t.firstHandle:t.secondHandle;n&&St(n,{"aria-valuemin":e[0],"aria-valuemax":e[1]})}))},t.prototype.createSecondHandle=function(){S()&&this.isServerRendered?this.secondHandle=this.element.querySelector(".e-handle-second"):(this.secondHandle=this.createElement("div",{attrs:{class:Tm,role:"slider",tabIndex:"0"}}),this.secondHandle.classList.add(Nm),this.element.appendChild(this.secondHandle))},t.prototype.createFirstHandle=function(){S()&&this.isServerRendered?this.firstHandle=this.element.querySelector(".e-handle-first"):(this.firstHandle=this.createElement("div",{attrs:{class:Tm,role:"slider",tabIndex:"0"}}),this.firstHandle.classList.add(Fm),this.element.appendChild(this.firstHandle)),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:Tm+" "+dy}}),this.element.appendChild(this.materialHandle))},t.prototype.wireFirstHandleEvt=function(e){e?(ye.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),ye.remove(this.firstHandle,"transitionend",this.transitionEnd),ye.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),ye.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(ye.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),ye.add(this.firstHandle,"transitionend",this.transitionEnd,this),ye.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),ye.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.wireSecondHandleEvt=function(e){e?(ye.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),ye.remove(this.secondHandle,"transitionend",this.transitionEnd),ye.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),ye.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(ye.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),ye.add(this.secondHandle,"transitionend",this.transitionEnd,this),ye.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),ye.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"]($m),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"]($m),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"](ey)))},t.prototype.transitionEnd=function(e){"transform"!==e.propertyName&&(this.handleStart(),this.getHandle().style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},t.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(Qm)&&this.firstHandle.classList.remove(Qm),"Range"===this.type&&this.secondHandle.classList.contains(Qm)&&this.secondHandle.classList.remove(Qm)},t.prototype.handleFocus=function(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?this.firstHandle.classList.add(Qm):this.secondHandle.classList.add(Qm),ye.add(document,"mousemove touchmove",this.sliderBarMove,this),ye.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.handleOver=function(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(e.currentTarget)},t.prototype.handleLeave=function(e){!this.tooltip.isVisible||"Hover"!==this.tooltip.showOn||e.currentTarget.classList.contains(Qm)||e.currentTarget.classList.contains(ty)||this.closeTooltip()},t.prototype.setHandler=function(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},t.prototype.setEnableRTL=function(){if(!S()||!this.isServerRendered){this.enableRtl&&"Vertical"!==this.orientation?ut([this.sliderContainer],Sm):gt([this.sliderContainer],Sm);var e="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),e!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(Dt(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&Dt(this.secondHandle,{top:"",left:"auto"}))}this.setBarColor()},t.prototype.tooltipValue=function(){var e,t=this,i={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,S()&&this.isServerRendered?i.text=this.formatContent(this.tooltipFormatInfo,!1):(this.setTooltipContent(),i.text=e=this.tooltipObj.content),this.trigger("tooltipChange",i,(function(i){t.addTooltipClass(i.text),e!==i.text&&(t.customAriaText=i.text,t.tooltipObj.content=i.text,t.setAriaAttrValue(t.firstHandle),"Range"===t.type&&t.setAriaAttrValue(t.secondHandle))})),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},t.prototype.setTooltipContent=function(){var e;e=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=e},t.prototype.formatContent=function(e,t){var i="",n=this.handleVal1,r=this.handleVal2;return!g(this.customValues)&&this.customValues.length>0&&(n=this.customValues[this.handleVal1],r=this.customValues[this.handleVal2]),t?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?g(this.tooltip)||g(this.tooltip.format)?r.toString()+" - "+n.toString():this.formatString(r,e).elementVal+" - "+this.formatString(n,e).elementVal:g(this.tooltip)||g(this.tooltip.format)?n.toString()+" - "+r.toString():this.formatString(n,e).elementVal+" - "+this.formatString(r,e).elementVal:g(n)||(i=g(this.tooltip)||g(this.tooltip.format)?n.toString():this.formatString(n,e).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?g(e.format)?r.toString()+" - "+n.toString():this.formatString(r,e).formatString+" - "+this.formatString(n,e).formatString:g(e.format)?n.toString()+" - "+r.toString():this.formatString(n,e).formatString+" - "+this.formatString(r,e).formatString:g(n)||(i=g(e.format)?n.toString():this.formatString(n,e).formatString),i)},t.prototype.addTooltipClass=function(e){if(this.isMaterialTooltip){var t=e.toString().length;if(this.tooltipElement){i=t>4?{oldCss:uy,newCss:cy}:{oldCss:cy,newCss:uy};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=t>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var i=t>4?cy:uy;this.tooltipObj.cssClass=Am+" "+i}}},t.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},t.prototype.tooltipBeforeOpen=function(e){this.tooltipElement=e.element,this.tooltip.cssClass&&ut([this.tooltipElement],this.tooltip.cssClass.split(" ").filter((function(e){return e}))),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add(fy),this.handleStart(),this.setTooltipTransform())},t.prototype.tooltipCollision=function(e){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){var t=this.isBootstrap4?3:6;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-t},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:t},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-t},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:t},!1)}}},t.prototype.materialTooltipEventCallBack=function(e){this.sliderBarClick(e),ye.add(document,"mousemove touchmove",this.sliderBarMove,this),ye.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.wireMaterialTooltipEvent=function(e){this.isMaterialTooltip&&(e?ye.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):ye.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},t.prototype.tooltipPositionCalculation=function(e){var t;switch(e){case"TopCenter":t=jm;break;case"BottomCenter":t=zm;break;case"LeftCenter":t=qm;break;case"RightCenter":t=Wm}return t},t.prototype.getTooltipTransformProperties=function(e){var t;if(this.tooltipElement){var i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;t="Horizontal"===this.orientation?e===jm?{rotate:"rotate(45deg)",translate:"translateY("+i+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-i+"px)"}:e===qm?{rotate:"rotate(-45deg)",translate:"translateX("+i+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-i+"px)"}}return t},t.prototype.openMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var t=this.tooltipElement.firstElementChild;t.classList.remove(fy),t.classList.add(gy),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(_m),this.materialHandle.style.transform="scale(0)",t.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout((function(){e.tooltipElement.style.transition=e.transition.handle}),2500):setTimeout((function(){e.tooltipElement.style.transition="none"}),2500)}},t.prototype.closeMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){var t=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,t.classList.remove(gy),t.classList.add(fy),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(_m),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout((function(){e.tooltipElement.style.transition="none"}),2500)}},t.prototype.checkTooltipPosition=function(e){if(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==e.collidedPosition){if(this.isMaterialTooltip){var t=this.tooltipPositionCalculation(e.collidedPosition);void 0!==t&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(t),this.previousTooltipClass=t),e.element.style.transform&&e.element.classList.contains(_m)&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}this.tooltipCollidedPosition=e.collidedPosition}this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},t.prototype.setTooltipTransform=function(){var e=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=e.translate+" scale(0.01)":this.tooltipElement.style.transform=e.translate+" "+e.rotate+" scale(0.01)"},t.prototype.renderTooltip=function(){this.tooltipObj=new br({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4,cssClass:Am,height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},t.prototype.initializeTooltipProps=function(){var e=this.isMaterialTooltip?"Always":"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:e}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach((function(e){g(e)||(e.style.transition="none")})),this.isMaterialTooltip&&(this.sliderContainer.classList.add(Um),S()||this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},t.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},t.prototype.setButtons=function(){S()&&this.isServerRendered?(this.firstBtn=this.element.parentElement.querySelector(".e-slider-button.e-first-button"),this.secondBtn=this.element.parentElement.querySelector(".e-slider-button.e-second-button")):(this.firstBtn=this.createElement("div",{className:Em+" "+Rm}),this.firstBtn.appendChild(this.createElement("span",{className:iy})),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:Em+" "+Pm}),this.secondBtn.appendChild(this.createElement("span",{className:iy})),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(ay),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle())},t.prototype.buttonTitle=function(){var e=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");St(e?this.secondBtn:this.firstBtn,{"aria-label":t,title:t}),St(e?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})},t.prototype.buttonFocusOut=function(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")},t.prototype.repeatButton=function(e){var t,i=this.handleValueUpdate(),n=this.enableRtl&&"Vertical"!==this.orientation;e.target.parentElement.classList.contains(Rm)||e.target.classList.contains(Rm)?t=n?this.add(i,parseFloat(this.step.toString()),!0):this.add(i,parseFloat(this.step.toString()),!1):(e.target.parentElement.classList.contains(Pm)||e.target.classList.contains(Pm))&&(t=n?this.add(i,parseFloat(this.step.toString()),!1):this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),t>=this.min&&t<=this.max&&(this.changeHandleValue(t),this.tooltipToggle(this.getHandle()))},t.prototype.repeatHandlerMouse=function(e){e.preventDefault(),"mousedown"!==e.type&&"touchstart"!==e.type||(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))},t.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},t.prototype.repeatHandlerUp=function(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},t.prototype.customTickCounter=function(e){var t=4;return!g(this.customValues)&&this.customValues.length>0&&(e>4&&(t=3),e>7&&(t=2),e>14&&(t=1),e>28&&(t=0)),t},t.prototype.renderScale=function(){var e=0,t="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),S()&&this.isServerRendered?this.ul=this.element.querySelector("ul"):this.ul=this.createElement("ul",{className:Im+" e-"+t+"-scale "+Mm+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",me.isAndroid&&"h"===t&&this.ul.classList.add(ry);var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat(C(this.step))):i=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(C(this.max))-parseFloat(C(this.min));var n,r=this.fractionalToInteger(this.min),o=this.fractionalToInteger(this.max),s=this.fractionalToInteger(i),a=!g(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,l=this.customTickCounter(a),h=!g(this.customValues)&&this.customValues.length>0?a*l+a:Math.abs((o-r)/s);S()&&this.isServerRendered||this.element.appendChild(this.ul);var p=parseFloat(this.min.toString());"v"===t&&(p=parseFloat(this.max.toString()));var d,c=0,u=100/h;u===1/0&&(u=5);for(var f=0,m=!g(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,y=0;f<=h;f++){if(n=this.createElement("li",{attrs:{class:Mm,role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!g(this.customValues)&&this.customValues.length>0)(d=f%(l+1)==0)&&("h"===t?(p=this.customValues[y],y++):(p=this.customValues[m],m--),n.setAttribute("title",p.toString()));else if(n.setAttribute("title",p.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))d="h"===t?(p-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(p-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{var v=this.fractionalToInteger(this.ticks.largeStep),b=this.fractionalToInteger(p);d="h"===t?(b-r)%v==0:Math.abs(b-parseFloat(o.toString()))%v==0}d&&n.classList.add(Lm),"h"===t?n.style.width=u+"%":n.style.height=u+"%";var w=d?"Both"===this.ticks.placement?2:1:0;if(d){for(var x=0;x<w;x++)this.createTick(n,p,u);S()&&this.isServerRendered&&g(this.customValues)&&(this.updateTicksValues(p,this.ul.children[e]),e++)}else g(this.customValues)&&(this.formatTicksValue(n,p),S()&&this.isServerRendered&&g(this.customValues)&&(this.updateTicksValues(p,this.ul.children[e]),e++));S()&&this.isServerRendered||this.ul.appendChild(n),this.tickElementCollection.push(n);var k=void 0;g(this.customValues)&&(k=this.numberOfDecimals(i)>this.numberOfDecimals(p)?this.numberOfDecimals(i):this.numberOfDecimals(p),p="h"===t?this.makeRoundNumber(p+i,k):this.makeRoundNumber(p-i,k),c=this.makeRoundNumber(c+i,k))}this.ticksAlignment(t,u)},t.prototype.updateTicksValues=function(e,t){if(t.childElementCount>0)for(var i=0;i<t.childElementCount;i++)this.blazortTicksValue(t,e,t.children[i]);else this.blazortTicksValue(t,e,null)},t.prototype.blazortTicksValue=function(e,t,i){var n=this,r=this.formatNumber(t),o={value:t,text:g(this.ticks)||g(this.ticks.format)?r:this.formatString(t,this.ticksFormatInfo).formatString,tickElement:e};this.trigger("renderingTicks",o,(function(t){e.setAttribute("title",t.text.toString()),i&&(n.enableHtmlSanitizer?i.innerHTML=Oi.sanitize(t.text.toString()):i.innerHTML=t.text.toString())}))},t.prototype.ticksAlignment=function(e,t,i){void 0===i&&(i=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add(oy),this.lastChild.classList.add(sy),this.sliderContainer.classList.add(Im+"-"+this.ticks.placement.toLowerCase()),"h"===e?(this.firstChild.style.width=t/2+"%",this.lastChild.style.width=t/2+"%"):(this.firstChild.style.height=t/2+"%",this.lastChild.style.height=t/2+"%");var n={ticksWrapper:this.ul,tickElements:this.tickElementCollection};i&&this.trigger("renderedTicks",n),this.scaleAlignment()},t.prototype.createTick=function(e,t,i){var n=this.createElement("span",{className:Om+" "+Mm+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(n),g(this.customValues)?this.formatTicksValue(e,t,n,i):this.enableHtmlSanitizer?n.innerHTML=Oi.sanitize(t.toString()):n.innerHTML=t.toString()},t.prototype.formatTicksValue=function(e,t,i,n){var r=this,o=this.formatNumber(t),s={value:t,text:g(this.ticks)||g(this.ticks.format)?o:this.formatString(t,this.ticksFormatInfo).formatString,tickElement:e};this.trigger("renderingTicks",s,(function(t){if(e.setAttribute("title",t.text.toString()),i&&(r.enableHtmlSanitizer?i.innerHTML=Oi.sanitize(t.text.toString()):i.innerHTML=t.text.toString()),!g(r.renderingTicks)&&S()){var o="Horizontal"===r.orientation?"h":"v";r.ticksAlignment(o,n,!1)}}))},t.prototype.scaleAlignment=function(){this.tickValuePosition();this.orientation;"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(ny):this.sliderContainer.classList.remove(ny):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(ny):this.sliderContainer.classList.remove(ny)},t.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e,t,i=this.firstChild.getBoundingClientRect(),n=this.ticks.smallStep,r=Math.abs(parseFloat(C(this.max))-parseFloat(C(this.min)))/n;this.firstChild.children.length>0&&(e=this.firstChild.children[0].getBoundingClientRect());var o,s=[this.sliderContainer.querySelectorAll("."+Mm+"."+Lm+" ."+Om)];o="Both"===this.ticks.placement?[].slice.call(s[0],2):[].slice.call(s[0],1);for(var a="Vertical"===this.orientation?2*i.height:2*i.width,l=0;l<this.firstChild.children.length;l++)"Vertical"===this.orientation?S()&&this.isServerRendered||(this.firstChild.children[l].style.top=-e.height/2+"px"):this.enableRtl?this.firstChild.children[l].style.left=(a-this.firstChild.children[l].getBoundingClientRect().width)/2+"px":this.firstChild.children[l].style.left=-e.width/2+"px";for(l=0;l<o.length;l++)t=o[l].getBoundingClientRect(),"Vertical"===this.orientation?S()&&this.isServerRendered||Dt(o[l],{top:(a-t.height)/2+"px"}):Dt(o[l],{left:(a-t.width)/2+"px"});if(this.enableRtl&&this.lastChild.children.length&&0!==r&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(S()||(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px"))),0===r&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove(sy),this.firstChild.style.right=this.firstHandle.style.right,S()||(this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px"))):(this.firstChild.classList.remove(sy),S()||(this.firstChild.style.left=this.firstHandle.style.left))),S()&&this.isServerRendered||"Vertical"===this.orientation&&this.firstChild.classList.remove(sy)),S()&&this.isServerRendered){var h=void 0;null!=this.firstChild&&(h="Horizontal"===this.orientation?{firstTickPostion:this.firstChild.children[0].style.left}:{firstTickPostion:-e.height/2+"px"}),null!=o[0]&&(h="Horizontal"===this.orientation?{otherTicksPosition:o[0].style.left}:{otherTicksPosition:(a-t.height)/2+"px"}),null!=this.firstChild&&null!=o[0]&&(h="Horizontal"===this.orientation?{firstTickPostion:this.firstChild.children[0].style.left,otherTicksPosition:o[0].style.left}:{firstTickPostion:-e.height/2+"px",otherTicksPosition:(a-t.height)/2+"px"}),this.interopAdaptor.invokeMethodAsync("SliderTicksData",h)}},t.prototype.setAriaAttrValue=function(e){var t,i=!g(this.ticks)&&!g(this.ticks.format),n=i?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),r=i?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);t=2===(n=this.customAriaText?this.customAriaText:n).split(" - ").length?n.split(" - "):[n,n],this.setAriaAttributes(e),"Range"!==this.type?St(e,{"aria-valuenow":r,"aria-valuetext":n}):this.enableRtl?e===this.firstHandle?St(e,{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":t[1]}):St(e,{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":t[0]}):e===this.firstHandle?St(e,{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":t[0]}):St(e,{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":t[1]})},t.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},t.prototype.getLimitCorrectedValues=function(e){return e="MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0]},t.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},t.prototype.buttonClick=function(e){var t;this.focusSliderElement();var i=this.enableRtl&&"Vertical"!==this.orientation,n=this.handleValueUpdate();40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains(Rm)?t=i?this.add(n,parseFloat(this.step.toString()),!0):this.add(n,parseFloat(this.step.toString()),!1):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains(Pm)?t=i?this.add(n,parseFloat(this.step.toString()),!1):this.add(n,parseFloat(this.step.toString()),!0):33===e.keyCode||e.currentTarget.classList.contains(Rm)?t=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):34===e.keyCode||e.currentTarget.classList.contains(Pm)?t=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):36===e.keyCode?t=parseFloat(this.min.toString()):35===e.keyCode&&(t=parseFloat(this.max.toString())),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),this.changeHandleValue(t),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(ty)||this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),e.currentTarget.classList.contains(Rm)&&ye.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains(Pm)&&ye.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},t.prototype.tooltipToggle=function(e){this.isMaterialTooltip?this.tooltipElement.classList.contains(_m)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)},t.prototype.buttonUp=function(e){e.currentTarget.classList.contains(Rm)&&ye.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains(Pm)&&ye.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},t.prototype.setRangeBar=function(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Dt(this.rangeBar,{width:g(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",Dt(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",Dt(this.rangeBar,{height:g(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",Dt(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))},t.prototype.checkValidValueAndPos=function(e){return e=this.checkHandleValue(e),e=this.checkHandlePosition(e)},t.prototype.setLimitBarPositions=function(e,t,i,n){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.bottom=e+"px",this.limitBarFirst.style.height=t-e+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.bottom=i+"px",this.limitBarSecond.style.height=n-i+"px"))},t.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);var t=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t),this.setLimitBarPositions(e,t)}else if("Range"===this.type){var i=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i);var n=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var r=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];r=this.checkValidValueAndPos(r);var o=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o),this.setLimitBarPositions(i,n,r,o)}},t.prototype.getLimitValueAndPosition=function(e,t,i,n){return g(t)&&(t=this.min,g(e)&&n&&(e=t)),g(i)&&(i=this.max,g(e)&&n&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]},t.prototype.setValue=function(){if(!g(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=g(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,g(this.activeHandle)?"Range"===this.type?this.activeHandle=2:this.activeHandle=1:this.activeHandle=this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},t.prototype.rangeValueUpdate=function(){null!==this.value&&"object"==typeof this.value||(this.value=[parseFloat(C(this.min)),parseFloat(C(this.max))])},t.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},t.prototype.modifyZindex=function(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=pr(this.element)+"")},t.prototype.setHandlePosition=function(e){var t,i=this,n=1===this.activeHandle?this.handlePos1:this.handlePos2;t=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),t.forEach((function(e){"Horizontal"===i.orientation?i.enableRtl?e.style.right=n+"px":e.style.left=n+"px":e.style.bottom=n+"px",S()&&i.isServerRendered&&e.style.removeProperty("visibility")})),this.changeEvent("change",e)},t.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},t.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},t.prototype.changeEvent=function(e,t){var i="change"===e?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i===this.value||this.isMaterialTooltip&&this.initialTooltip||(this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{var n=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:n},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},t.prototype.changeEventArgs=function(e,t){var i;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(S()&&this.isServerRendered||this.tooltipValue(),i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:this.tooltipObj.content,isInteracted:!g(t)}):i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:g(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!g(t)},i},t.prototype.setPreviousVal=function(e,t){"change"===e?this.previousVal=t:this.previousChanged=t},t.prototype.updateRangeValue=function(){var e=this.value.toString().split(",").map(Number);if(this.enableRtl&&"Vertical"!==this.orientation||this.rtl?this.value=[e[1],e[0]]:this.value=[e[0],e[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,t=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=t[0],this.handlePos2=t[1],this.preHandlePos2=this.handlePos2}},t.prototype.checkHandlePosition=function(e){var t;return e=100*(e-parseFloat(C(this.min)))/(parseFloat(C(this.max))-parseFloat(C(this.min))),t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(e/100):this.element.getBoundingClientRect().height*(e/100),parseFloat(C(this.max))===parseFloat(C(this.min))&&(t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),t},t.prototype.checkHandleValue=function(e){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat(C(this.max));var t=this.tempStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},t.prototype.reposition=function(){var e=this;this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Dt(this.rangeBar,{width:g(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",Dt(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",Dt(this.rangeBar,{height:g(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.handlePos1+"px",Dt(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(S()||(this.removeElement(this.ul),this.ul=void 0),this.renderScale(),S()&&this.tickValuePosition()),this.handleStart(),this.tooltip.isVisible||setTimeout((function(){e.firstHandle.style.transition=e.scaleTransform,"Range"===e.type&&(e.secondHandle.style.transition=e.scaleTransform)})),S()&&this.isServerRendered||this.refreshTooltip(this.tooltipTarget),this.setBarColor()},t.prototype.changeHandleValue=function(e){var t=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(t=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(t=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==t&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},t.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},t.prototype.xyToPosition=function(e){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var t=e.x-this.element.getBoundingClientRect().left,i=this.element.offsetWidth/100;this.val=t/i}else{var n=e.y-this.element.getBoundingClientRect().top;i=this.element.offsetHeight/100;this.val=100-n/i}var r=this.stepValueCalculation(this.val);return r<0?r=0:r>100&&(r=100),this.enableRtl&&"Vertical"!==this.orientation&&(r=100-r),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(r/100):this.element.getBoundingClientRect().height*(r/100)},t.prototype.stepValueCalculation=function(e){0===this.step&&(this.step=1);var t=parseFloat(C(this.step))/((parseFloat(C(this.max))-parseFloat(C(this.min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},t.prototype.add=function(e,t,i){var n=Math.pow(10,3);return i?(Math.round(e*n)+Math.round(t*n))/n:(Math.round(e*n)-Math.round(t*n))/n},t.prototype.positionToValue=function(e){var t,i=parseFloat(C(this.max))-parseFloat(C(this.min));return t="Horizontal"===this.orientation?e/this.element.getBoundingClientRect().width*i:e/this.element.getBoundingClientRect().height*i,this.add(t,parseFloat(this.min.toString()),!0)},t.prototype.sliderBarClick=function(e){var t;e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:"touchend"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var i=this.xyToPosition(t),n=this.positionToValue(i);if("Range"===this.type&&this.handlePos2-i<i-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled)n=(r=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=r[1];this.secondHandle.classList.add(py),this.handlePos2=this.preHandlePos2=i,this.handleVal2=n}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){var r;if(this.limits.enabled)n=(r=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=r[1];this.firstHandle.classList.add(py),this.handlePos1=this.preHandlePos1=i,this.handleVal1=n}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(Gm);var o=this.element.querySelector("."+ty);o&&this.getHandle()!==o&&o.classList.remove(ty);var s=1===this.activeHandle?this.firstHandle:this.secondHandle;if(e.target===s)return!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(ty)||this.materialChange(),this.sliderBarUp(e),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(n)){var a=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=a.handle,"Default"!==this.type&&(this.rangeBar.style.transition=a.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",e),"Default"!==this.type&&this.setRangeBar()}},t.prototype.handleValueAdjust=function(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},t.prototype.dragRangeBarMove=function(e){var t,i,n,r,o;if("touchmove"!==e.type&&e.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(r=(t=[e.clientX,e.clientY])[0],o=t[1]):(r=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=i[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(n=this.enableRtl?{x:r+this.secondPartRemain,y:o+this.secondPartRemain}:{x:r-this.firstPartRemain,y:o+this.secondPartRemain},this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1),n=this.enableRtl?{x:r-this.firstPartRemain,y:o-this.firstPartRemain}:{x:r+this.secondPartRemain,y:o-this.firstPartRemain},this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){var s=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=s[0],this.handlePos1=s[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),s=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=s[0],this.handlePos2=s[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()},t.prototype.sliderBarUp=function(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove(py),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove(py)),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(Gm)),ye.remove(document,"mousemove touchmove",this.sliderBarMove),ye.remove(document,"mouseup touchend",this.sliderBarUp)},t.prototype.sliderBarMove=function(e){var t;"touchmove"!==e.type&&e.preventDefault(),t="mousemove"===e.type?{x:e.clientX,y:e.clientY}:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};var i=this.xyToPosition(t),n=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var r=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);i=r[1],n=r[0]}this.handlePos1=i,this.handleVal1=n}this.firstHandle.classList.add(py)}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add(py),!(this.limits.enabled&&this.limits.startHandleFixed||(i>this.handlePos2&&(i=this.handlePos2,n=this.handleVal2),i===this.preHandlePos1))){if(this.limits.enabled)n=(o=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=o[1];this.handlePos1=this.preHandlePos1=i,this.handleVal1=n,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add(py),!(this.limits.enabled&&this.limits.endHandleFixed||(i<this.handlePos1&&(i=this.handlePos1,n=this.handleVal1),i===this.preHandlePos2)))){var o;if(this.limits.enabled)n=(o=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=o[1];this.handlePos2=this.preHandlePos2=i,this.handleVal2=n,this.activeHandle=2}this.checkRepeatedValue(n)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(ty)||this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},t.prototype.dragRangeBarUp=function(e){this.rangeBarDragged||(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),ye.remove(document,"mousemove touchmove",this.dragRangeBarMove),ye.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},t.prototype.checkRepeatedValue=function(e){if("Range"===this.type){if(e===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(e===this.previousVal)return 0;return 1},t.prototype.refreshTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))},t.prototype.openTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)},t.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},t.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e)}},t.prototype.wireButtonEvt=function(e){e?(ye.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),ye.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),ye.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),ye.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),ye.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),ye.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),ye.remove(this.firstBtn,"focusout",this.sliderFocusOut),ye.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(ye.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),ye.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),ye.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),ye.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),ye.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),ye.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),ye.add(this.firstBtn,"focusout",this.sliderFocusOut,this),ye.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},t.prototype.rangeBarMousedown=function(e){var t,i;if(e.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&e.target===this.rangeBar){var n=void 0,r=void 0;"mousedown"===e.type?(n=(t=[e.clientX,e.clientY])[0],r=t[1]):"touchstart"===e.type&&(n=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],r=i[1]),"Horizontal"===this.orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=r-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-r),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var o=this.element.querySelector("."+ty);o&&o.classList.remove(ty),ye.add(document,"mousemove touchmove",this.dragRangeBarMove,this),ye.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},t.prototype.elementClick=function(e){e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e)},t.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(ye.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&ye.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),ye.add(this.sliderContainer,"keydown",this.keyDown,this),ye.add(this.sliderContainer,"keyup",this.keyUp,this),ye.add(this.element,"focusout",this.sliderFocusOut,this),ye.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&ye.add(this.formElement,"reset",this.formResetHandler,this))},t.prototype.unwireEvents=function(){ye.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&ye.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),ye.remove(this.sliderContainer,"keydown",this.keyDown),ye.remove(this.sliderContainer,"keyup",this.keyUp),ye.remove(this.element,"focusout",this.sliderFocusOut),ye.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),ye.remove(this.element,"reset",this.formResetHandler)},t.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},t.prototype.keyUp=function(e){if(9===e.keyCode&&e.target.classList.contains(Tm)&&(this.focusSliderElement(),!e.target.classList.contains(ty))){this.element.querySelector("."+ty)&&this.element.querySelector("."+ty).classList.remove(ty),e.target.classList.add(ty);var t=e.target.parentElement;t===this.element&&(t.querySelector("."+Km).classList.add(ly),"Range"!==this.type&&"MinRange"!==this.type||t.querySelector("."+Dm).classList.add(hy)),"Range"===this.type&&(e.target.previousSibling.classList.contains(Tm)?this.activeHandle=2:this.activeHandle=1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)},t.prototype.hover=function(e){g(e)||("mouseover"===e.type||"touchmove"===e.type||"mousemove"===e.type||"pointermove"===e.type||"touchstart"===e.type?this.sliderContainer.classList.add(Bm):this.sliderContainer.classList.remove(Bm))},t.prototype.sliderFocusOut=function(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.element.querySelector("."+ty)&&this.element.querySelector("."+ty).classList.remove(ty),this.element.querySelector("."+ly)&&(this.element.querySelector("."+ly).classList.remove(ly),"Range"!==this.type&&"MinRange"!==this.type||!this.element.querySelector("."+hy)||this.element.querySelector("."+hy).classList.remove(hy)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},t.prototype.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prototype.changeSliderType=function(e,t){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(Um),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==e&&("Range"===e&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!g(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===e||"Default"===e?g(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):g(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),(S()||this.isServerRendered)&&"tooltip"===t||this.updateConfig()},t.prototype.changeRtl=function(){if(this.enableRtl||"Range"!==this.type||(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var e=this.enableRtl&&"Vertical"!==this.orientation;St(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),St(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},t.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},t.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&(S()||this.refreshTooltip(this.tooltipTarget)),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},t.prototype.limitsPropertyChange=function(){this.limits.enabled?(g(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),g(this.limitBarFirst)&&g(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(g(this.limitBarFirst)||wt(this.limitBarFirst),g(this.limitBarSecond)||wt(this.limitBarSecond))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),gt([this.sliderContainer],[Hm]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),S()||this.isServerRendered||(this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),wt(this.sliderContainer)),this.tooltip.isVisible&&this.tooltipObj.destroy(),S()||this.isServerRendered||(this.element.innerHTML="")},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];switch(o){case"cssClass":this.setCSSClass(t.cssClass);break;case"value":if(e&&t){var s=g(e.value)?"Range"===this.type?[this.min,this.max]:this.min:e.value;this.setProperties({value:s},!0),g(t.value)||t.value.toString()===s.toString()||(this.setValue(),S()&&this.isServerRendered||this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(g(e.value)||t.value[1]===s[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":S()&&this.isServerRendered&&(this.isServerRendered=!1),this.setMinMaxValue(),S()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"tooltip":S()&&this.isServerRendered&&(this.isServerRendered=!1),g(e.tooltip)||g(t.tooltip)||this.setTooltip(o),S()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"type":S()&&this.isServerRendered&&(this.isServerRendered=!1),g(t)||!Object.keys(t).length||g(t.type)||(this.changeSliderType(t.type,o),this.setZindex()),S()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"enableRtl":S()&&this.isServerRendered&&(this.isMaterialTooltip&&this.sliderContainer.classList.add(Um),this.isServerRendered=!1),t.enableRtl!==e.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=t.enableRtl,this.changeRtl()),S()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"limits":this.limitsPropertyChange();break;case"orientation":S()&&this.isServerRendered&&(this.isServerRendered=!1),this.changeOrientation(),S()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"ticks":g(this.sliderContainer.querySelector("."+Im))||(S()&&this.isServerRendered||wt(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,(function(e){e.match(/e-scale-/)&&i.sliderContainer.classList.remove(e)}))),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):S()&&this.isServerRendered||this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(ay),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition()),S()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(Um);break;case"enabled":this.setEnabled(),S()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(Um);break;case"readonly":this.setReadOnly(),S()&&this.isServerRendered&&this.isMaterialTooltip&&this.sliderContainer.classList.add(Um);break;case"customValues":S()&&this.isServerRendered&&(this.isServerRendered=!1),this.setValue(),this.reposition(),S()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"colorRange":S()&&this.isServerRendered&&(this.isServerRendered=!1),this.reposition(),S()&&!this.isServerRendered&&(this.isServerRendered=!0);break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},t.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(my)):(this.wireEvents(),this.sliderContainer.classList.remove(my))},t.prototype.setMinMaxValue=function(){var e=this;this.setValue(),S()||this.refreshTooltip(this.tooltipTarget),g(this.sliderContainer.querySelector("."+Im))||this.ul&&(wt(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,(function(t){t.match(/e-scale-/)&&e.sliderContainer.classList.remove(t)}))),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},t.prototype.setZindex=function(){this.zIndex=6,g(this.ticks)||"None"===this.ticks.placement||(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),this.isMaterial||g(this.ticks)||"Both"!==this.ticks.placement||(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setTooltip=function(e){this.changeSliderType(this.type,e)},t.prototype.setBarColor=function(){for(var e,t,i=this.sliderTrack.lastElementChild;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(var n=0;n<this.colorRange.length;n++)if(!g(this.colorRange[n].start)&&!g(this.colorRange[n].end)&&this.colorRange[n].end>this.colorRange[n].start){this.colorRange[n].start<this.min&&(this.colorRange[n].start=this.min),this.colorRange[n].end>this.max&&(this.colorRange[n].end=this.max);var r=this.checkHandlePosition(this.colorRange[n].start),o=this.checkHandlePosition(this.colorRange[n].end),s=this.createElement("div");s.style.backgroundColor=this.colorRange[n].color,s.style.border="1px solid "+this.colorRange[n].color,"Horizontal"===this.orientation?(t=Ym,e=this.enableRtl?g(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[n].end):this.checkHandlePosition(this.customValues.length-this.colorRange[n].end-1):this.checkHandlePosition(this.colorRange[n].start),s.style.width=o-r+"px",s.style.left=e+"px"):(t=Xm,e=this.checkHandlePosition(this.colorRange[n].start),s.style.height=o-r+"px",s.style.bottom=e+"px"),s.classList.add(t),this.sliderTrack.appendChild(s)}},t.prototype.getModuleName=function(){return"slider"},mm([zt(null)],t.prototype,"value",void 0),mm([zt(null)],t.prototype,"customValues",void 0),mm([zt(1)],t.prototype,"step",void 0),mm([zt(null)],t.prototype,"width",void 0),mm([zt(0)],t.prototype,"min",void 0),mm([zt(100)],t.prototype,"max",void 0),mm([zt(!1)],t.prototype,"readonly",void 0),mm([zt("Default")],t.prototype,"type",void 0),mm([Wt([{}],vm)],t.prototype,"colorRange",void 0),mm([qt({},ym)],t.prototype,"ticks",void 0),mm([qt({},bm)],t.prototype,"limits",void 0),mm([zt(!0)],t.prototype,"enabled",void 0),mm([qt({},wm)],t.prototype,"tooltip",void 0),mm([zt(!1)],t.prototype,"showButtons",void 0),mm([zt(!0)],t.prototype,"enableAnimation",void 0),mm([zt("Horizontal")],t.prototype,"orientation",void 0),mm([zt("")],t.prototype,"cssClass",void 0),mm([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),mm([_t()],t.prototype,"created",void 0),mm([_t()],t.prototype,"change",void 0),mm([_t()],t.prototype,"changed",void 0),mm([_t()],t.prototype,"renderingTicks",void 0),mm([_t()],t.prototype,"renderedTicks",void 0),mm([_t()],t.prototype,"tooltipChange",void 0),t=mm([Gt],t)}(pi),ky=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ty=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Dy="e-switch-ctrl-btn",Ey="e-hide-hex-value",Ry="e-hide-switchable-value",Py="e-hide-value",Iy="e-hsv-color",My="e-mode-switch-btn",Ly="e-nocolor-item",Oy="e-opacity-value",Ay="e-preview-container",By="e-show-value",Fy="e-selected",Ny="e-tile",Hy=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],Vy=function(e){function t(t,i){return e.call(this,t,i)||this}return ky(t,e),t.prototype.preRender=function(){var e=this.element;this.formElement=Tt(this.element,"form"),this.formElement&&ye.add(this.formElement,"reset",this.formResetHandler,this);this.l10n=new ki("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)},t.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||ut([this.container.parentElement],"e-hide-opacity"),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),St(this.element,{tabindex:"-1",spellcheck:"false"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var t=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(t="");var i=t.slice(0,7);g(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:i},!0),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&ut([e],this.cssClass.split(" ")),this.tileRipple=Jt(this.container,{selector:"."+Ny}),this.ctrlBtnRipple=Jt(this.container,{selector:".e-btn"})},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),me.isDevice&&this.refreshPopupPos()},t.prototype.createSplitBtn=function(){var e=this,t=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(t),this.splitBtn=new um({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,open:this.onOpen.bind(this),click:function(t){e.trigger("change",{currentValue:{hex:e.value.slice(0,7),rgba:e.convertToRgbString(e.hexToRgb(e.value))},previousValue:{hex:null,rgba:null},value:e.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(t);var i=this.createElement("span",{className:"e-split-preview"});xt(".e-selected-color",t).appendChild(i),i.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if(ut([n],"e-colorpicker-popup"),this.cssClass&&ut([n],this.cssClass.split(" ")),me.isDevice){var r=this.getPopupInst();r.relateTo=document.body,r.position={X:"center",Y:"center"},r.targetType="container",r.collision={X:"fit",Y:"fit"},r.offsetY=4,n.style.zIndex=pr(this.splitBtn.element).toString()}this.bindCallBackEvent()},t.prototype.onOpen=function(e){this.trigger("open",{element:this.container})},t.prototype.getPopupInst=function(){return k(this.getPopupEle(),lr)},t.prototype.bindCallBackEvent=function(){var e=this;this.splitBtn.beforeOpen=function(t){var i=new gm;return e.trigger("beforeOpen",t,(function(n){if(!n.cancel){var r=e.getPopupEle();r.style.top=C(0+pageYOffset),r.style.left=C(0+pageXOffset),r.style.display="block",e.createWidget(),r.style.display="",me.isDevice&&(e.modal=e.createElement("div"),e.modal.className="e-"+e.getModuleName()+" e-modal",e.modal.style.display="none",document.body.insertBefore(e.modal,r),document.body.className+=" e-colorpicker-overflow",e.modal.style.display="block",e.modal.style.zIndex=(Number(r.style.zIndex)-1).toString())}t.cancel=n.cancel,i.resolve(n)})),i},this.splitBtn.beforeClose=function(t){var i=new gm;if(g(t.event))i.resolve(t);else{var n={element:e.container,event:t.event,cancel:!1};e.trigger("beforeClose",n,(function(n){me.isDevice&&t.event.target===e.modal&&(n.cancel=!0),n.cancel||e.onPopupClose(),t.cancel=n.cancel,i.resolve(n)}))}return i}},t.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",xt(".e-split-preview",this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",gt([this.container],["e-color-picker","e-color-palette"]),me.isDevice&&this.modal&&(gt([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.createPalette=function(){if(Et(this.container,["e-color-palette"],["e-color-picker"]),this.presetColors){var e=this.createElement("div",{className:"e-custom-palette"});this.appendElement(e);var t=Object.keys(this.presetColors);if(1===t.length)this.appendPalette(this.presetColors[t[0]],t[0],e);else for(var i=0,n=t.length;i<n;i++)this.appendPalette(this.presetColors[t[i]],t[i],e);kt(".e-row",e).length>10&&ut([e],"e-palette-group")}else this.appendPalette(Hy,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var r=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=C(this.container.children[0].offsetWidth+r+r),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},t.prototype.firstPaletteFocus=function(){xt("."+Fy,this.container.children[0])||kt(".e-palette",this.container)[0].focus()},t.prototype.appendPalette=function(e,t,i){var n,r,o,s=this.createElement("div",{className:"e-palette",attrs:{tabindex:"0"}});i?i.appendChild(s):this.appendElement(s);for(var a=0,l=e.length;a<l;a++)0!==a&&a%this.columns!=0||(n=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),s.appendChild(n)),o=this.roundValue(e[a]).toLowerCase(),r=this.createElement("span",{className:Ny,attrs:{role:"gridcell","aria-label":o,"aria-selected":"false"}}),this.trigger("beforeTileRender",{element:r,presetName:t,value:e[a]}),n.appendChild(r),this.value===o&&(this.addTileSelection(r),s.focus()),r.style.backgroundColor=this.convertToRgbString(this.hexToRgb(o))},t.prototype.setNoColor=function(){var e=this.container.querySelector(".e-row").children[0];e.classList.add(Ly),this.value||(e.classList.add(Fy),Tt(e,".e-palette").focus()),["aria-selected","aria-label"].forEach((function(t){e.removeAttribute(t)})),e.style.backgroundColor=""},t.prototype.appendElement=function(e,t){void 0===t&&(t=0);var i=this.container.children[t];i?this.container.insertBefore(e,i):this.container.appendChild(e)},t.prototype.addTileSelection=function(e){e.classList.add(Fy),e.setAttribute("aria-selected","true")},t.prototype.createPicker=function(){Et(this.container,["e-color-picker"],["e-color-palette"]);var e=this.createElement("div",{className:"e-hsv-container"});this.appendElement(e),e.appendChild(this.createElement("div",{className:Iy}));var t=this.createElement("span",{className:"e-handler",attrs:{tabindex:"0"}});e.appendChild(t),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},t.prototype.setHsvContainerBg=function(e){void 0===e&&(e=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))},t.prototype.getHsvContainer=function(){return xt(".e-hsv-container",this.container)},t.prototype.setHandlerPosition=function(){var e=this.getDragHandler(),t=xt("."+Iy,this.container);this.enableRtl?e.style.left=C(t.offsetWidth*Math.abs(100-this.hsv[1])/100):e.style.left=C(t.offsetWidth*this.hsv[1]/100),e.style.top=C(t.offsetHeight*(100-this.hsv[2])/100)},t.prototype.createSlider=function(){var e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);var t=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(t,e.children[0]);var i=this.createElement("div",{className:"e-hue-slider"});t.appendChild(i),this.hueSlider=new xy({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),t.appendChild(i),this.createOpacitySlider(i))},t.prototype.createOpacitySlider=function(e){this.opacitySlider=new xy({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);var t=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(t),this.updateOpacitySliderBg()},t.prototype.updateOpacitySliderBg=function(){var e=this.enableRtl?"to left":"to right";xt(".e-slider-track",this.opacitySlider.element).style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)"},t.prototype.hueChange=function(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()},t.prototype.opacityChange=function(e){var t=e.value,i=this.rgbToHex(this.rgb);this.hsv[3]=t/100,this.rgb[3]=t/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(t);var r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(n,i,r)},t.prototype.updateOpacityInput=function(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(Py)){var t=k(xt("."+Oy,this.container),Pc);t.value=e,t.dataBind()}},t.prototype.createPreview=function(e){var t=this.createElement("div",{className:Ay});e.appendChild(t);var i=this.createElement("span",{className:"e-preview e-current"});t.appendChild(i);var n=this.convertToRgbString(this.rgb);i.style.backgroundColor=n,i=this.createElement("span",{className:"e-preview e-previous"}),t.appendChild(i),i.style.backgroundColor=n},t.prototype.isPicker=function(){return!this.container.classList.contains("e-color-palette")},t.prototype.getPopupEle=function(){return this.container.parentElement},t.prototype.createNumericInput=function(e,t,i,n){var r=this,o=new Pc({value:t,placeholder:i,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(e){e.event&&r.inputHandler(e.event)}});o.createElement=this.createElement,o.appendTo(e)},t.prototype.createInput=function(){var e=this.isPicker(),t=this.getWrapper();if(e&&!t.classList.contains(Py)||!e&&t.classList.contains(By)){var i=this.createElement("div",{className:"e-selected-value"});e?this.appendElement(i,2):this.appendElement(i,1);var n=this.createElement("div",{className:"e-input-container"});if(i.appendChild(n),t.classList.contains("e-hide-valueswitcher")||this.appendValueSwitchBtn(i),!t.classList.contains(Ey)){var r=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false"}});n.appendChild(r),No.createInput({element:r,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),No.setValue(this.value.slice(0,7),r),r.addEventListener("input",this.inputHandler.bind(this))}if(!t.classList.contains(Ry)){var o=void 0,s=void 0;this.isRgb?(o="RGB",s=this.rgb):(o="HSV",s=this.hsv);for(var a=["rh","gs","bv"],l=0;l<3;l++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+a[l]+"-value"})),s[l],o[l],255);this.enableOpacity&&this.appendOpacityValue(n)}}},t.prototype.appendOpacityValue=function(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:Oy})),100*this.rgb[3],"A",100)},t.prototype.appendValueSwitchBtn=function(e){var t=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn e-value-switch-btn"});e.appendChild(t),this.isPicker()&&!this.getWrapper().classList.contains(Ry)&&t.addEventListener("click",this.formatSwitchHandler.bind(this))},t.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var e=this.createElement("div",{className:Dy});if(this.container.appendChild(e),this.showButtons){var t=this.createElement("div",{className:"e-ctrl-btn"});e.appendChild(t);var i=this.l10n.getConstant("Apply");t.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small e-apply",attrs:{title:i}}));var n=this.l10n.getConstant("Cancel");t.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small e-cancel",attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},t.prototype.appendModeSwitchBtn=function(){var e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+My,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});xt("."+Dy,this.container).insertBefore(e,xt(".e-ctrl-btn",this.container))},t.prototype.createDragTooltip=function(){var e=this,t=new br({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:function(t){e.tooltipEle=t.element},animation:{open:{effect:"None"},close:{effect:"None"}}});t.createElement=this.createElement,t.appendTo(this.container),t.open(this.container),this.tooltipEle.style.zIndex=pr(this.tooltipEle).toString(),xt(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},t.prototype.getTooltipInst=function(){return k(this.container,br)},t.prototype.setTooltipOffset=function(e){this.getTooltipInst().offsetY=e},t.prototype.toggleDisabled=function(e){e?this.getWrapper().classList.add("e-disabled"):this.getWrapper().classList.remove("e-disabled"),this.showButtons&&[].slice.call(kt(".e-btn",this.container)).forEach((function(t){e?St(t,{disabled:""}):t.removeAttribute("disabled")}))},t.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},t.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},t.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},t.prototype.convertToOtherFormat=function(e){void 0===e&&(e=!1);var t=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var i=this.rgbToHex(this.rgb),n=this.convertToRgbString(this.rgb);this.updatePreview(n),this.updateInput(i),this.triggerEvent(i,t,n,e)},t.prototype.updateInput=function(e){var t=this.getWrapper();t.classList.contains(Py)||(t.classList.contains(Ey)||No.setValue(e.substr(0,7),xt(".e-hex",this.container)),t.classList.contains(Ry)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},t.prototype.updatePreview=function(e){this.enableOpacity&&this.updateOpacitySliderBg(),xt(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,xt("."+Ay+" .e-current",this.container).style.backgroundColor=e,xt("."+Ay+" .e-previous",this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},t.prototype.getDragHandler=function(){return xt(".e-handler",this.container)},t.prototype.removeTileSelection=function(){[].slice.call(kt("."+Fy,this.container.children[0])).forEach((function(e){e.classList.remove(Fy),e.setAttribute("aria-selected","false")}))},t.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((function(e,t){return 3!==t?parseInt(e,10):parseFloat(e)}))},t.prototype.getValue=function(e,t){if(e||(e=this.value),t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}e=this.roundValue(e);var r=this.hexToRgb(e);return"rgb"!==t&&"hsv"!==t||(r=r.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(r):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,r)):"hex"===t?e.slice(0,7):"a"===t?r[3].toString():"null"},t.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},t.prototype.getModuleName=function(){return"colorpicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.wireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();ye.add(e,"keydown",this.pickerKeyDown,this),ye.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),ye.add(xt(".e-previous",this.container),"click",this.previewHandler,this)}else ye.add(this.container,"click",this.paletteClickHandler,this),ye.add(this.container,"keydown",this.paletteKeyDown,this)},t.prototype.formResetHandler=function(){this.value=this.initialInputValue,St(this.element,{value:this.initialInputValue})},t.prototype.addCtrlSwitchEvent=function(){var e=xt("."+Dy,this.container);e&&ye.add(e,"click",this.btnClickHandler,this)},t.prototype.pickerKeyDown=function(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:e.preventDefault();var t=this.rgbToHex(this.rgb);this.enterKeyHandler(t,e)}},t.prototype.enterKeyHandler=function(e,t){this.triggerChangeEvent(e),this.inline||(this.closePopup(t),this.splitBtn.element.focus())},t.prototype.closePopup=function(e){var t=this,i={element:this.container,event:e,cancel:!1};this.trigger("beforeClose",i,(function(e){e.cancel||(t.splitBtn.toggle(),t.onPopupClose())}))},t.prototype.triggerChangeEvent=function(e){var t=e.slice(0,7);this.trigger("change",{currentValue:{hex:t,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:t}),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:t},!0),this.element.value=t||"#000000"},t.prototype.handlerDragPosition=function(e,t,i){i.preventDefault(),this.hsv[e]+=t*(i.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0)},t.prototype.handlerDown=function(e){e.preventDefault(),"mousedown"===e.type?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),ye.add(document,"mousemove touchmove",this.handlerMove,this),ye.add(document,"mouseup touchend",this.handlerEnd,this)},t.prototype.handlerMove=function(e){var t,i;"touchmove"!==e.type&&e.preventDefault(),"mousemove"===e.type?(t=Math.abs(e.pageX-pageXOffset),i=Math.abs(e.pageY-pageYOffset)):(t=Math.abs(e.changedTouches[0].pageX-pageXOffset),i=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(t,i);var n=this.getDragHandler();parseInt(n.style.left,10),parseInt(n.style.top,10);this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-t)>8||Math.abs(this.clientY-i)>8)&&(xt("."+Iy,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},t.prototype.setHsv=function(e,t){var i=xt("."+Iy,this.container),n=i.getBoundingClientRect();e=this.enableRtl?e>n.right?0:Math.abs(e-n.right):e>n.left?Math.abs(e-n.left):0,t=t>n.top?Math.abs(t-n.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,t-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,e-i.offsetLeft))/i.offsetWidth))/10},t.prototype.handlerEnd=function(e){"touchend"!==e.type&&e.preventDefault(),ye.remove(document,"mousemove touchmove",this.handlerMove),ye.remove(document,"mouseup touchend",this.handlerEnd);var t=this.getDragHandler();xt("."+Iy,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",t.classList.remove("e-hide-handler")),this.inline||this.showButtons||this.closePopup(e)},t.prototype.btnClickHandler=function(e){var t=e.target;Tt(t,"."+My)?(e.stopPropagation(),this.switchToPalette()):(t.classList.contains("e-apply")||t.classList.contains("e-cancel"))&&this.ctrlBtnClick(t,e)},t.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),wt(xt(".e-slider-preview",this.container)),this.getWrapper().classList.contains(Py)||Ct(xt(".e-selected-value",this.container)),wt(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},t.prototype.refreshPopupPos=function(){if(!this.inline){var e=this.getPopupEle();e.style.left=C(0+pageXOffset),e.style.top=C(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},t.prototype.formatSwitchHandler=function(e){e.target.parentElement;this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},t.prototype.updateValue=function(e,t,i,n){for(var r,o=["e-rh-value","e-gs-value","e-bv-value"],s=0,a=o.length;s<a;s++)(r=k(xt("."+o[s],this.container),Pc)).value=Math.round(e[s]),t&&(r.placeholder=o[s].substr(i,1).toUpperCase(),r.max=n?n[s]:255),r.dataBind()},t.prototype.previewHandler=function(e){var t=e.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(t.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),r=this.rgbToHsv.apply(this,this.rgb);r[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:r[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(r[0]),this.enableOpacity&&r[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*r[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=r,this.setHandlerPosition(),this.updateInput(n),xt("."+Ay+" .e-current",this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,i,this.convertToRgbString(this.rgb))},t.prototype.paletteClickHandler=function(e){e.preventDefault();var t=e.target;if(t.classList.contains(Ny)){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(Ly))this.noColorTile();else{var i=t.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(By)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb))}this.inline||this.showButtons||this.closePopup(e)}else Tt(t,"."+My)?this.switchToPicker():t.classList.contains("e-apply")||t.classList.contains("e-cancel")?this.ctrlBtnClick(t,e):this.getWrapper().classList.contains(By)&&Tt(t,".e-value-switch-btn")&&this.formatSwitchHandler(e)},t.prototype.noColorTile=function(e){void 0===e&&(e=!1);var t=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",t,"",e)},t.prototype.switchToPicker=function(){var e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(kt(".e-palette",this.container)).forEach((function(e){wt(e)})),e.classList.contains(By)&&wt(xt(".e-selected-value",this.container)),this.container.style.width="";var t=xt(".e-custom-palette",this.container);this.presetColors&&Ct(t),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},t.prototype.ctrlBtnClick=function(e,t){if(e.classList.contains("e-apply")){var i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i)}this.inline||(this.closePopup(t),this.splitBtn.element.focus())},t.prototype.paletteKeyDown=function(e){var t=e.target;if(t.classList.contains("e-palette")){var i,n,r=[].slice.call(kt("."+Ny,t)),o=r.filter((function(e){return e.classList.contains("e-selected")})).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?-1:1)]:r[this.enableRtl?r.length-1:0],this.keySelectionChanges(i);break;case 37:e.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?1:-1)]:r[this.enableRtl?0:r.length-1],this.keySelectionChanges(i);break;case 38:e.preventDefault(),i=r[n=o?this.tilePosition(r,o,-this.columns):0]?r[n]:r[n-this.columns],this.keySelectionChanges(i);break;case 40:e.preventDefault(),r[n=o?this.tilePosition(r,o,this.columns):r.length-1]?i=r[n]:(n%=r.length,i=r[n+=r[r.length-1].parentElement.childElementCount]),this.keySelectionChanges(i);break;case 13:if(e.preventDefault(),o){var s=o.getAttribute("aria-label");this.enterKeyHandler(s||"",e)}}}},t.prototype.keySelectionChanges=function(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(Ly))this.noColorTile(!0);else{var t=e.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(By)&&this.updateInput(t),this.triggerEvent(t,i,this.convertToRgbString(this.rgb),!0)}},t.prototype.tilePosition=function(e,t,i){var n=(e=Array.prototype.slice.call(e)).length,r=this.columns-e[n-1].parentElement.childElementCount,o=e.indexOf(t);return(o+=i)<0?o+=n+r:o%=n+r,o},t.prototype.inputHandler=function(e){var t,i,n=e.target;if(n.value.length)switch(xt(".e-float-text",n.parentElement).textContent){case"HEX":var r="";if(("#"===n.value[0]&&5!==n.value.length||"#"!==n.value[0]&&4!==n.value.length)&&(r=this.roundValue(n.value)),9!==r.length)return;i=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(r+r.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),i,n.value);break;case"R":this.rgb[0]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[0]=Number(n.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"G":this.rgb[1]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[1]=Number(n.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"B":this.rgb[2]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[2]=Number(n.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"H":this.hueSlider.value=Number(n.value);break;case"S":this.hsv[1]!==Number(n.value)&&(this.hsv[1]=Number(n.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(n.value)&&(this.hsv[2]=Number(n.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(n.value)}},t.prototype.inputValueChange=function(e,t,i){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;var n=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||n);var r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(n,t,r)},t.prototype.triggerEvent=function(e,t,i,n){void 0===n&&(n=!1);var r=e.slice(0,7);this.showButtons||n?this.trigger("select",{currentValue:{hex:r,rgba:i},previousValue:{hex:t.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(t))}}):(this.trigger("change",{currentValue:{hex:r,rgba:i},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.setProperties({value:e},!0),this.element.value=r||"#000000")},t.prototype.destroy=function(){var t=this,i=this.getWrapper();e.prototype.destroy.call(this),["tabindex","spellcheck"].forEach((function(e){t.element.removeAttribute(e)})),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&wt(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),wt(i)),this.container=null,this.formElement&&ye.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.destroyOtherComp=function(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var e=this.getTooltipInst();e.close(),e.destroy(),this.tooltipEle=null}},t.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},t.prototype.unWireEvents=function(){if(this.isPicker()){this.getWrapper();var e=this.getDragHandler();ye.remove(e,"keydown",this.pickerKeyDown),ye.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&ye.remove(xt("."+Dy,this.container),"click",this.btnClickHandler),ye.remove(xt(".e-previous",this.container),"click",this.previewHandler)}else ye.remove(this.container,"click",this.paletteClickHandler),ye.remove(this.container,"keydown",this.paletteKeyDown)},t.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,r=e.length;n<r;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},t.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},t.prototype.rgbToHsv=function(e,t,i,n){if(this.rgb&&!this.rgb.length)return[];e/=255,t/=255,i/=255;var r,o,s=Math.max(e,t,i),a=Math.min(e,t,i),l=s,h=s-a;if(o=0===s?0:h/s,s===a)r=0;else{switch(s){case e:r=(t-i)/h+(t<i?6:0);break;case t:r=(i-e)/h+2;break;case i:r=(e-t)/h+4}r/=6}var p=[Math.round(360*r),Math.round(1e3*o)/10,Math.round(1e3*l)/10];return g(n)||p.push(n),p},t.prototype.hsvToRgb=function(e,t,i,n){var r,o,s,a,l,h,p,d;if(i/=100,0===(t/=100))return r=o=s=i,[Math.round(255*r),Math.round(255*o),Math.round(255*s),n];switch(h=i*(1-t),p=i*(1-t*(l=(e/=60)-(a=Math.floor(e)))),d=i*(1-t*(1-l)),a){case 0:r=i,o=d,s=h;break;case 1:r=p,o=i,s=h;break;case 2:r=h,o=i,s=d;break;case 3:r=h,o=p,s=i;break;case 4:r=d,o=h,s=i;break;default:r=i,o=h,s=p}var c=[Math.round(255*r),Math.round(255*o),Math.round(255*s)];return g(n)||c.push(n),c},t.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(g(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},t.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype.changeModeSwitcherProp=function(e){var t=xt("."+Dy,this.container);e?t?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):t&&(this.showButtons?wt(xt("."+My,t)):Ct(t))},t.prototype.changeShowBtnProps=function(e){var t=xt("."+Dy,this.container);e?(t&&Ct(t),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?wt(xt(".e-ctrl-btn",t)):Ct(t)},t.prototype.changeValueProp=function(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),wt(Tt(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var t=xt('span[aria-label="'+this.roundValue(e)+'"]',this.container);t&&this.addTileSelection(t)}},t.prototype.setInputEleProps=function(e){Ct(xt(".e-selected-value",this.container)),this.createInput()},t.prototype.changeDisabledProp=function(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps(e)),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},t.prototype.changeCssClassProps=function(e,t){var i=this.getWrapper(),n=this.getPopupEle();t&&gt([i,n],t.split(" ")),e&&ut([i,n],e.split(" "))},t.prototype.changeRtlProps=function(e){e?ut([this.getWrapper()],"e-rtl"):gt([this.getWrapper()],"e-rtl")},t.prototype.changePaletteProps=function(){wt(this.container.children[0]),this.container.style.width="",this.createPalette()},t.prototype.changeOpacityProps=function(e){var t=this.getWrapper();e?(gt([this.container.parentElement],"e-hide-opacity"),this.createOpacitySlider(xt(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),t.classList.contains(Py)||t.classList.contains(Ry)||this.appendOpacityValue(xt(".e-input-container",this.container))):(ut([this.container.parentElement],"e-hide-opacity"),this.opacitySlider.destroy(),Ct(this.opacitySlider.element),this.opacitySlider=null,t.classList.contains(Py)||t.classList.contains(Ry)||Ct(xt("."+Oy,this.container).parentElement))},t.prototype.onPropertyChanged=function(e,t){var i=this;if(!g(e.value)){var n=this.roundValue(e.value);if(9===n.length){this.element.value=this.roundValue(n).slice(0,7);var r=this.splitBtn&&xt(".e-split-preview",this.splitBtn.element);r&&(r.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)))}else this.value=t.value}if(!this.inline&&g(e.inline)){if(this.splitBtn.setProperties($f(e,["disabled","enableRtl"])),!this.isPopupOpen())return this.changeCssClassProps(e.cssClass,t.cssClass),void this.changeRtlProps(e.enableRtl)}for(var o=function(n){switch(n){case"inline":e.inline?(s.getWrapper().appendChild(s.container),s.splitBtn.destroy(),wt(s.element.nextElementSibling),s.container.children.length||s.createWidget()):(s.destroyOtherComp(),s.unWireEvents(),s.container.innerHTML="",s.createSplitBtn());break;case"cssClass":s.changeCssClassProps(e.cssClass,t.cssClass);var r=e.cssClass.split(" ").concat(t.cssClass.split(" "));r=r.reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]);var o=0;r.forEach((function(e){0!==o||e!==Py&&"e-hide-valueswitcher"!==e&&e!==By&&e!==Ey&&e!==Ry||(xt(".e-selected-value",i.container)&&Ct(xt(".e-selected-value",i.container)),i.createInput(),o++)}));break;case"enableRtl":s.isPicker()&&(s.hueSlider.enableRtl=e.enableRtl,s.enableOpacity&&(s.opacitySlider.enableRtl=e.enableRtl),s.setInputEleProps(e.enableRtl)),s.changeRtlProps(e.enableRtl);break;case"disabled":s.changeDisabledProp(e.disabled);break;case"value":s.value!==t.value&&s.changeValueProp(e.value);break;case"showButtons":s.changeShowBtnProps(e.showButtons);break;case"mode":"Picker"===e.mode?s.switchToPicker():s.switchToPalette();break;case"modeSwitcher":s.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":s.isPicker()||s.changePaletteProps();break;case"noColor":e.noColor?"Palette"!==s.mode||s.modeSwitcher||s.setNoColor():s.changePaletteProps();break;case"enableOpacity":s.changeOpacityProps(e.enableOpacity)}},s=this,a=0,l=Object.keys(e);a<l.length;a++){o(l[a])}},t.prototype.focusIn=function(){this.element.parentElement.focus()},Ty([zt("#008000ff")],t.prototype,"value",void 0),Ty([zt("")],t.prototype,"cssClass",void 0),Ty([zt(!1)],t.prototype,"disabled",void 0),Ty([zt("Picker")],t.prototype,"mode",void 0),Ty([zt(!0)],t.prototype,"modeSwitcher",void 0),Ty([zt(null)],t.prototype,"presetColors",void 0),Ty([zt(!0)],t.prototype,"showButtons",void 0),Ty([zt(10)],t.prototype,"columns",void 0),Ty([zt(!1)],t.prototype,"inline",void 0),Ty([zt(!1)],t.prototype,"noColor",void 0),Ty([zt(!1)],t.prototype,"enablePersistence",void 0),Ty([zt(!0)],t.prototype,"enableOpacity",void 0),Ty([_t()],t.prototype,"select",void 0),Ty([_t()],t.prototype,"change",void 0),Ty([_t()],t.prototype,"beforeTileRender",void 0),Ty([_t()],t.prototype,"beforeOpen",void 0),Ty([_t()],t.prototype,"open",void 0),Ty([_t()],t.prototype,"beforeClose",void 0),Ty([_t()],t.prototype,"beforeModeSwitch",void 0),Ty([_t()],t.prototype,"onModeSwitch",void 0),Ty([_t()],t.prototype,"created",void 0),t=Ty([Gt],t)}(pi),jy=function(){function e(e){this.parent=e,this.wireEvent()}return e.prototype.wireEvent=function(){this.parent.on("destroy",this.unWireEvent,this)},e.prototype.unWireEvent=function(){this.parent.off("destroy",this.unWireEvent),this.popupOverlay&&ye.remove(this.popupOverlay,"click touchmove",this.onPopupOverlay),this.removePopupContainer()},e.prototype.toolbarBeforeCreate=function(e){"Extended"===this.mode&&(e.enableCollision=!1)},e.prototype.toolbarCreated=function(){this.parent.notify("toolbarCreated",this)},e.prototype.toolbarClicked=function(e){this.parent.enabled&&(this.parent.readonly||this.parent.notify("toolbarClick",e),this.parent.trigger("toolbarClick",e))},e.prototype.dropDownSelected=function(e){this.parent.notify("dropDownSelect",e),this.onPopupOverlay()},e.prototype.beforeDropDownItemRender=function(e){!this.parent.readonly&&this.parent.enabled&&this.parent.notify("beforeDropDownItemRender",e)},e.prototype.dropDownOpen=function(e){me.isDevice&&!e.element.parentElement.classList.contains("e-quick-dropdown")&&this.popupModal(e.element.parentElement),this.parent.notify("selection-save",e)},e.prototype.dropDownClose=function(e){this.removePopupContainer(),this.parent.notify("selection-restore",e)},e.prototype.removePopupContainer=function(){if(me.isDevice&&!g(this.popupContainer)){var e=this.popupContainer.querySelector(".e-dropdown-popup.e-tbar-btn.e-control");e&&(this.popupContainer.parentNode.insertBefore(e,this.popupContainer.nextSibling),e.style.removeProperty("position"),gt([e],"e-popup-modal")),wt(this.popupContainer),this.popupContainer=void 0}},e.prototype.renderToolbar=function(e){this.setPanel(e.target),this.renderPanel(),this.mode=e.overflowMode,e.rteToolbarObj.toolbarObj=new Xu({items:e.items,width:"100%",overflowMode:e.overflowMode,beforeCreate:this.toolbarBeforeCreate.bind(this),created:this.toolbarCreated.bind(this),clicked:this.toolbarClicked.bind(this),enablePersistence:e.enablePersistence,enableRtl:e.enableRtl}),e.rteToolbarObj.toolbarObj.isStringTemplate=!0,e.rteToolbarObj.toolbarObj.createElement=this.parent.createElement,e.rteToolbarObj.toolbarObj.appendTo(e.target)},e.prototype.renderDropDownButton=function(e){var t,i=this;e.element.classList.add(Tg),t=e.cssClass+" e-rte-elements e-tbar-btn",this.parent.inlineMode.enable&&me.isDevice&&(t+=" e-rte-inline-dropdown");var n=this,r=new hm({items:e.items,iconCss:e.iconCss,cssClass:t,content:e.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:function(e){if(!n.parent.readonly&&n.parent.enabled){for(var t=0;t<e.element.childNodes.length;t++){var o=i.parent.createElement("div");o.innerHTML=r.content.trim(),""!==o.textContent.trim()&&e.element.childNodes[t].textContent.trim()===o.textContent.trim()?e.element.childNodes[t].classList.contains("e-active")||ut([e.element.childNodes[t]],"e-active"):gt([e.element.childNodes[t]],"e-active")}n.parent.notify("beforeDropDownOpen",e)}else e.cancel=!0},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});return r.isStringTemplate=!0,r.createElement=n.parent.createElement,r.appendTo(e.element),e.element.tabIndex=-1,document.getElementById(r.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),r},e.prototype.onPopupOverlay=function(e){g(this.popupOverlay)||(Tt(this.popupOverlay,".e-popup-container").style.display="none",this.popupOverlay.style.display="none",gt([this.popupOverlay],"e-popup-overlay"))},e.prototype.setIsModel=function(e){Tt(e,".e-popup-container")?(e.parentElement.style.display="flex",this.popupOverlay=e.nextElementSibling,this.popupOverlay.style.display="block",ut([this.popupOverlay],"e-popup-overlay")):(this.popupContainer=this.parent.createElement("div",{className:"e-rte-modal-popup e-popup-container e-center"}),e.parentNode.insertBefore(this.popupContainer,e),this.popupContainer.appendChild(e),this.popupContainer.style.zIndex=e.style.zIndex,this.popupContainer.style.display="flex",e.style.position="relative",ut([e],"e-popup-modal"),this.popupOverlay=this.parent.createElement("div",{className:"e-popup-overlay"}),this.popupOverlay.style.zIndex=(parseInt(e.style.zIndex,null)-1).toString(),this.popupOverlay.style.display="block",this.popupContainer.appendChild(this.popupOverlay),ye.add(this.popupOverlay,"click touchmove",this.onPopupOverlay,this))},e.prototype.paletteSelection=function(e,t){var i=e.element.querySelector(".e-control.e-colorpicker"),n=[].slice.call(kt(".e-tile",i.parentElement));gt(n,"e-selected");var r=t.querySelector(".e-rte-elements").style.borderBottomColor;n.filter((function(e){e.style.backgroundColor===r&&ut([e],"e-selected")}))},e.prototype.renderColorPickerDropDown=function(e,t,i){var n=this,r=this,o="e-rte-elements e-tbar-btn"+(this.parent.inlineMode?" e-rte-inline-dropdown":"");o+=" "+("backgroundcolor"===t?"e-rte-backgroundcolor-dropdown":"e-rte-fontcolor-dropdown");var s,a=r.parent.createElement("span",{className:"e-rte-color-content"}),l=r.parent.createElement("span",{className:e.cssClass});l.style.borderBottomColor="backgroundcolor"===t?r.parent.backgroundColor.default:r.parent.fontColor.default,a.appendChild(l);var h=new hm({target:i.element.parentElement,cssClass:o,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,beforeOpen:function(t){if(!r.parent.readonly&&r.parent.enabled){var i=t.event?t.event.target:null;if(r.currentElement=h.element,r.currentDropdown=h,r.paletteSelection(t,r.currentElement),t.event&&"click"===t.event.type&&(i.classList.contains("e-rte-color-content")||i.parentElement.classList.contains("e-rte-color-content"))){t.cancel=!0;var n=i.classList.contains("e-rte-elements")?i.style.borderBottomColor:i.querySelector(".e-rte-elements").style.borderBottomColor;r.parent.notify("selection-restore",{});var o=(s=r.parent.formatter.editorManager.nodeSelection.getRange(r.parent.contentModule.getDocument())).startContainer.parentNode;("TD"===s.startContainer.nodeName||"TH"===s.startContainer.nodeName||Tt(s.startContainer.parentNode,"td,th")||r.parent.iframeSettings.enable&&!Mf(o.ownerDocument.querySelector("body"),"e-lib"))&&s.collapsed&&"BackgroundColor"===e.subCommand?r.parent.notify("tableColorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:n}}):r.parent.notify("colorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:n}})}else{var a=k(t.element.querySelector(".e-control.e-colorpicker"),Vy);a.showButtons=!t.element.querySelector(".e-color-palette"),a.dataBind(),t.element.onclick=function(e){e.target.classList.contains("e-cancel")&&h.toggle()}}}else t.cancel=!0},open:function(e){var t;n.setColorPickerContentWidth(i);var r=e.element.querySelector(".e-control.e-colorpicker");(t=e.element.querySelector(".e-color-palette")?r.parentElement.querySelector(".e-palette"):r.parentElement.querySelector("e-handler"))&&t.focus(),me.isDevice&&n.popupModal(e.element.parentElement),n.pickerRefresh(e)},beforeClose:function(t){var i=t.event?t.event.target:null;if(t.event&&"click"===t.event.type&&(i.classList.contains("e-rte-color-content")||i.parentElement.classList.contains("e-rte-color-content"))){var n=i.classList.contains("e-rte-elements")?i.style.borderBottomColor:i.querySelector(".e-rte-elements").style.borderBottomColor;("TD"===(s=r.parent.formatter.editorManager.nodeSelection.getRange(r.parent.contentModule.getDocument())).startContainer.nodeName||"TH"===s.startContainer.nodeName||Tt(s.startContainer.parentNode,"td,th"))&&s.collapsed?r.parent.notify("tableColorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:n}}):r.parent.notify("colorPickerChanged",{item:{command:e.command,subCommand:e.subCommand,value:n}})}else;},close:function(e){r.parent.notify("selection-restore",{});var t=Tt(e.element.parentElement,".e-popup-container");if(t&&(t.style.display="none",t.lastElementChild.style.display="none",gt([t.lastElementChild],"e-popup-overlay")),me.isDevice&&!g(t)){var i=t.querySelector(".e-dropdown-popup.e-tbar-btn.e-control");i&&(t.parentNode.insertBefore(i,t.nextSibling),i.style.removeProperty("position"),gt([i],"e-popup-modal")),wt(t),r.popupContainer=void 0}}});return h.isStringTemplate=!0,h.createElement=r.parent.createElement,h.appendTo(e.element),document.getElementById(h.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),h.element.insertBefore(a,h.element.querySelector(".e-caret")),e.element.tabIndex=-1,h.element.removeAttribute("type"),h.element.onmousedown=function(){r.parent.notify("selection-save",{})},h.element.onkeydown=function(){r.parent.notify("selection-save",{})},h},e.prototype.pickerRefresh=function(e){if("Picker"===this.parent.backgroundColor.mode){var t=e.element.parentElement;t.style.width=(t.offsetWidth+5).toString()+"px",k(t,lr).refreshPosition(t),t.style.width=(t.offsetWidth-5).toString()+"px"}},e.prototype.popupModal=function(e){var t=k(e,lr);t.relateTo=document.body,t.position={X:0,Y:0},t.targetType="container",t.collision={X:"fit",Y:"fit"},t.offsetY=4,t.dataBind(),this.setIsModel(e)},e.prototype.setColorPickerContentWidth=function(e){var t=e.element.nextSibling;if("0px"===t.style.width){t.style.width="";var i=parseInt(getComputedStyle(t).borderBottomWidth,10);t.style.width=C(t.children[0].offsetWidth+i+i)}},e.prototype.renderColorPicker=function(e,t){var i=this,n=new Vy({enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,inline:!0,created:function(){var e="backgroundcolor"===t?i.parent.backgroundColor.default:i.parent.fontColor.default;n.setProperties({value:e})},mode:"backgroundcolor"===t?i.parent.backgroundColor.mode:i.parent.fontColor.mode,modeSwitcher:"backgroundcolor"===t?i.parent.backgroundColor.modeSwitcher:i.parent.fontColor.modeSwitcher,beforeTileRender:function(e){e.element.classList.add("e-rte-square-palette"),e.element.classList.add("e-custom-tile"),""===e.value&&e.element.classList.add("e-nocolor-item")},change:function(t){var n=t.currentValue.rgba;t.item={command:e.command,subCommand:e.subCommand,value:n},i.parent.notify("selection-restore",{}),i.currentElement.querySelector(".e-rte-elements").style.borderBottomColor=n;var r=i.parent.formatter.editorManager.nodeSelection.getRange(i.parent.contentModule.getDocument());("TD"===r.startContainer.nodeName||"TH"===r.startContainer.nodeName||Tt(r.startContainer.parentNode,"td,th"))&&r.collapsed&&"BackgroundColor"===e.subCommand?i.parent.notify("tableColorPickerChanged",t):i.parent.notify("colorPickerChanged",t),i.currentDropdown.toggle()},beforeModeSwitch:function(e){""===n.value&&n.setProperties({value:"Picker"===e.mode?"#008000ff":""},!0),n.showButtons="Palette"!==e.mode}});return n.isStringTemplate=!0,n.columns="backgroundcolor"===t?this.parent.backgroundColor.columns:this.parent.fontColor.columns,n.presetColors="backgroundcolor"===t?this.parent.backgroundColor.colorCode:this.parent.fontColor.colorCode,n.cssClass="backgroundcolor"===t?"e-rte-backgroundcolor-colorpicker":"e-rte-fontcolor-colorpicker",n.createElement=this.parent.createElement,n.appendTo(document.body.querySelector(e.target)),n},e.prototype.renderPanel=function(){this.getPanel().classList.add("e-rte-toolbar")},e.prototype.getPanel=function(){return this.toolbarPanel},e.prototype.setPanel=function(e){this.toolbarPanel=e},e}(),zy=function(){function e(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?u(this.tools,Ng,zf(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Ng}return e.prototype.addEventListener=function(){this.parent.on(Sg,this.setRtl,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off(Sg,this.setRtl),this.parent.off("destroy",this.removeEventListener)},e.prototype.setRtl=function(e){g(this.toolbarObj)||this.toolbarObj.setProperties({enableRtl:e.enableRtl})},e.prototype.getTemplateObject=function(e,t){var i;switch(e){case"fontcolor":case"backgroundcolor":i="span";break;default:i="button"}return{command:this.tools[e.toLocaleLowerCase()].command,subCommand:this.tools[e.toLocaleLowerCase()].subCommand,template:this.parent.createElement(i,{id:this.parent.getID()+"_"+t+"_"+this.tools[e.toLocaleLowerCase()].id}).outerHTML,tooltipText:Bf(e,this.locator)}},e.prototype.getObject=function(e,t){var i=e.toLowerCase();if(-1!==Fg.indexOf(i))return this.getTemplateObject(i,t);switch(i){case"|":return{type:"Separator"};case"-":return{type:"Separator",cssClass:"e-rte-horizontal-separator"};default:return{id:this.parent.getID()+"_"+t+"_"+this.tools[i.toLocaleLowerCase()].id,prefixIcon:this.tools[i.toLocaleLowerCase()].icon,tooltipText:Bf(i,this.locator),command:this.tools[i.toLocaleLowerCase()].command,subCommand:this.tools[i.toLocaleLowerCase()].subCommand}}},e.prototype.getItems=function(e,t){var i=this;if(this.parent.toolbarSettings.items.length<1)return[];for(var n=[],r=function(e){switch(typeof e){case"string":n.push(o.getObject(e,t));break;default:if(!g(e.click)){var r=e,s=r.click;r.click=function(){r.undo&&0===i.parent.formatter.getUndoRedoStack().length&&i.parent.formatter.saveData(),s.call(i),i.parent.formatter.getUndoRedoStack()[i.parent.formatter.getUndoRedoStack().length-1].text.trim()!==i.parent.inputElement.innerHTML.trim()&&r.undo&&i.parent.formatter.saveData()}}n.push(e)}},o=this,s=0,a=e;s<a.length;s++){r(a[s])}return n},e.prototype.getToolbarOptions=function(e){return{target:e.target,rteToolbarObj:this,items:this.getItems(e.items,e.container),overflowMode:e.mode,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl}},e.prototype.render=function(e){this.toolbarRenderer=this.renderFactory.getRenderer(Pu.Toolbar),this.toolbarRenderer.renderToolbar(this.getToolbarOptions(e))},e}(),qy=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(Pu.Toolbar)},e.prototype.beforeRender=function(e){var t=e.item;t.cssClass&&ut([e.element],t.cssClass),"Alignments"!==t.command&&"JustifyLeft"!==t.subCommand&&"JustifyRight"!==t.subCommand&&"JustifyCenter"!==t.subCommand||e.element.setAttribute("title",Bf(t.subCommand.toLocaleLowerCase(),this.locator))},e.prototype.dropdownContent=function(e,t,i){return'<span style="display: inline-flex;width:'+("quick"===t?"auto":e)+'" ><span class="e-rte-dropdown-btn-text">'+i+"</span></span>"},e.prototype.renderDropDowns=function(e){var t=this;this.initializeInstance();var i=e.containerType,n=e.container;Fg.forEach((function(r){var o=void 0;if(-1!==If(r,e.items))switch(r){case"formats":if(g(o=xt("#"+t.parent.getID()+"_"+i+"_Formats",n))||o.classList.contains(Tg))return;var s=t.parent.format.types.slice();s.forEach((function(e){Object.defineProperties(e,{command:{value:"Formats",enumerable:!0},subCommand:{value:e.value,enumerable:!0}})}));var a=g(t.parent.format.default)?s[0].text:t.parent.format.default;t.formatDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:"quick"===i?"e-formats e-icons":"",content:t.dropdownContent(t.parent.format.width,i,"quick"===i?"":Lf(s,a,"text","text")),cssClass:kg+" e-rte-dropdown-items e-formats-tbar-btn",itemName:"Formats",items:s,element:o});break;case"fontname":if(g(o=xt("#"+t.parent.getID()+"_"+i+"_FontName",n))||o.classList.contains(Tg))return;var l=t.parent.fontFamily.items.slice();l.forEach((function(e){Object.defineProperties(e,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontName",enumerable:!0}})}));var h=g(t.parent.fontFamily.default)?l[0].text:t.parent.fontFamily.default;t.fontNameDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:"quick"===i?"e-font-name e-icons":"",content:t.dropdownContent(t.parent.fontFamily.width,i,"quick"===i?"":Lf(l,h,"text","text")),cssClass:kg+" e-rte-dropdown-items e-font-name-tbar-btn",itemName:"FontName",items:l,element:o}),g(t.parent.fontFamily.default)||(t.getEditNode().style.fontFamily=t.parent.fontFamily.default);break;case"fontsize":if(g(o=xt("#"+t.parent.getID()+"_"+i+"_FontSize",n))||o.classList.contains(Tg))return;var p=t.parent.fontSize.items.slice();p.forEach((function(e){Object.defineProperties(e,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontSize",enumerable:!0}})}));var d=g(t.parent.fontSize.default)?p[1].text:t.parent.fontSize.default;t.fontSizeDropDown=t.toolbarRenderer.renderDropDownButton({content:t.dropdownContent(t.parent.fontSize.width,i,Af(Lf(p,d.replace(/\s/g,""),"value","text"))),cssClass:kg+" e-rte-dropdown-items e-font-size-tbar-btn",itemName:"FontSize",items:p,element:o}),g(t.parent.fontSize.default)||(t.getEditNode().style.fontSize=t.parent.fontSize.default);break;case"alignments":if(g(o=xt("#"+t.parent.getID()+"_"+i+"_Alignments",n))||o.classList.contains(Tg))return;t.alignDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:kg+" e-rte-dropdown-items",itemName:"Alignments",items:Vg,element:o});break;case"align":t.imageAlignmentDropDown(i,n,o);break;case"display":t.imageDisplayDropDown(i,n,o);break;case"tablerows":t.rowDropDown(i,n,o);break;case"tablecolumns":t.columnDropDown(i,n,o);break;case"tablecellverticalalign":t.verticalAlignDropDown(i,n,o);break;case"styles":t.tableStylesDropDown(i,n,o)}}))},e.prototype.getUpdateItems=function(e,t){var i=e.slice();return i.forEach((function(e){Object.defineProperties(e,{command:{value:"Format"===t?"Formats":"Font",enumerable:!0},subCommand:{value:"Format"===t?e.value:t,enumerable:!0}})})),i},e.prototype.onPropertyChanged=function(e){for(var t,i,n=e.newProp,r=0,o=Object.keys(n);r<o.length;r++){switch(o[r]){case"fontFamily":if(this.fontNameDropDown)for(var s=0,a=Object.keys(n.fontFamily);s<a.length;s++){switch(a[s]){case"default":case"width":var l=this.fontNameDropDown.items;t=g(Tt(this.fontNameDropDown.element,"."+xg))?"toolbar":"quick";var h=g(this.parent.fontFamily.default)?l[0].text:this.parent.fontFamily.default;i=this.dropdownContent(this.parent.fontFamily.width,t,"quick"===t?"":Lf(l,h,"text","text")),this.fontNameDropDown.setProperties({content:i}),g(this.parent.fontFamily.default)?this.getEditNode().style.removeProperty("font-family"):this.getEditNode().style.fontFamily=this.parent.fontFamily.default;break;case"items":this.fontNameDropDown.setProperties({items:this.getUpdateItems(n.fontFamily.items,"FontName")})}}break;case"fontSize":if(this.fontSizeDropDown)for(var p=0,d=Object.keys(n.fontSize);p<d.length;p++){switch(d[p]){case"default":case"width":var c=this.fontSizeDropDown.items;t=g(Tt(this.fontSizeDropDown.element,"."+xg))?"toolbar":"quick";var u=g(this.parent.fontSize.default)?c[1].text:this.parent.fontSize.default;i=this.dropdownContent(this.parent.fontSize.width,t,Af(Lf(c,u.replace(/\s/g,""),"value","text"))),this.fontSizeDropDown.setProperties({content:i}),g(this.parent.fontSize.default)?this.getEditNode().style.removeProperty("font-size"):this.getEditNode().style.fontSize=this.parent.fontSize.default;break;case"items":this.fontSizeDropDown.setProperties({items:this.getUpdateItems(n.fontSize.items,"FontSize")})}}break;case"format":if(this.formatDropDown)for(var f=0,m=Object.keys(n.format);f<m.length;f++){switch(m[f]){case"default":case"width":var y=this.formatDropDown.items;t=g(Tt(this.formatDropDown.element,"."+xg))?"toolbar":"quick";var v=g(this.parent.format.default)?y[0].text:this.parent.format.default;i=this.dropdownContent(this.parent.format.width,t,"quick"===t?"":Lf(y,v,"text","text")),this.formatDropDown.setProperties({content:i});break;case"types":this.formatDropDown.setProperties({items:this.getUpdateItems(n.format.types,"Format")})}}}}},e.prototype.getEditNode=function(){return this.parent.contentModule.getEditPanel()},e.prototype.rowDropDown=function(e,t,i){(i=xt("#"+this.parent.getID()+"_"+e+"_TableRows",t)).classList.contains(Tg)||(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-rows e-icons",cssClass:kg+" e-rte-dropdown-items e-quick-dropdown",itemName:"TableRows",items:_g,element:i}))},e.prototype.columnDropDown=function(e,t,i){(i=xt("#"+this.parent.getID()+"_"+e+"_TableColumns",t)).classList.contains(Tg)||(this.tableColumnsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-columns e-icons",cssClass:kg+" e-rte-dropdown-items e-quick-dropdown",itemName:"TableColumns",items:Ug,element:i}))},e.prototype.verticalAlignDropDown=function(e,t,i){(i=xt("#"+this.parent.getID()+"_"+e+"_TableCellVerticalAlign",t)).classList.contains(Tg)||(this.tableCellVerticalAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell-ver-align e-icons",cssClass:kg+" e-rte-dropdown-items e-quick-dropdown",itemName:"TableCellVerticalAlign",items:Yg,element:i}))},e.prototype.imageDisplayDropDown=function(e,t,i){(i=xt("#"+this.parent.getID()+"_"+e+"_Display",t)).classList.contains(Tg)||(this.displayDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-display e-icons",cssClass:kg+" e-rte-dropdown-items e-quick-dropdown",itemName:"Display",items:qg,element:i}))},e.prototype.imageAlignmentDropDown=function(e,t,i){(i=xt("#"+this.parent.getID()+"_"+e+"_Align",t)).classList.contains(Tg)||(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:kg+" e-rte-dropdown-icons e-quick-dropdown",itemName:"Align",items:jg,element:i}))},e.prototype.tableStylesDropDown=function(e,t,i){(i=xt("#"+this.parent.getID()+"_"+e+"_Styles",t)).classList.contains(Tg)||(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-style e-icons",cssClass:kg+" e-rte-dropdown-icons e-quick-dropdown",itemName:"Styles",items:this.parent.tableSettings.styles,element:i}))},e.prototype.removeDropDownClasses=function(e){gt([e],[Tg,kg,"e-rte-dropdown-icons","e-rte-dropdown-items"])},e.prototype.destroyDropDowns=function(){this.formatDropDown&&(this.removeDropDownClasses(this.formatDropDown.element),this.formatDropDown.destroy()),this.fontNameDropDown&&(this.removeDropDownClasses(this.fontNameDropDown.element),this.fontNameDropDown.destroy()),this.fontSizeDropDown&&(this.removeDropDownClasses(this.fontSizeDropDown.element),this.fontSizeDropDown.destroy()),this.alignDropDown&&(this.removeDropDownClasses(this.alignDropDown.element),this.alignDropDown.destroy()),this.imageAlignDropDown&&(this.removeDropDownClasses(this.imageAlignDropDown.element),this.imageAlignDropDown.destroy()),this.displayDropDown&&(this.removeDropDownClasses(this.displayDropDown.element),this.displayDropDown.destroy()),this.tableRowsDropDown&&(this.removeDropDownClasses(this.tableRowsDropDown.element),this.tableRowsDropDown.destroy()),this.tableColumnsDropDown&&(this.removeDropDownClasses(this.tableColumnsDropDown.element),this.tableColumnsDropDown.destroy()),this.tableCellVerticalAlignDropDown&&(this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element),this.tableCellVerticalAlignDropDown.destroy())},e.prototype.setRtl=function(e){this.formatDropDown&&this.formatDropDown.setProperties({enableRtl:e.enableRtl}),this.fontNameDropDown&&this.fontNameDropDown.setProperties({enableRtl:e.enableRtl}),this.fontSizeDropDown&&this.fontSizeDropDown.setProperties({enableRtl:e.enableRtl}),this.alignDropDown&&this.alignDropDown.setProperties({enableRtl:e.enableRtl}),this.imageAlignDropDown&&this.imageAlignDropDown.setProperties({enableRtl:e.enableRtl}),this.displayDropDown&&this.displayDropDown.setProperties({enableRtl:e.enableRtl})},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("beforeDropDownItemRender",this.beforeRender,this),this.parent.on("iframe-click",this.onIframeMouseDown,this),this.parent.on(Sg,this.setRtl,this),this.parent.on("destroy",this.removeEventListener,this),this.parent.on("model-changed",this.onPropertyChanged,this))},e.prototype.onIframeMouseDown=function(){jf(document,"mousedown")},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("iframe-click",this.onIframeMouseDown),this.parent.off(Sg,this.setRtl),this.parent.off("beforeDropDownItemRender",this.beforeRender),this.parent.off("destroy",this.removeEventListener),this.parent.off("model-changed",this.onPropertyChanged))},e}(),Wy=function(){function e(e){this.parent=e,this.addEventListener(),this.serviceLocator=new Og,this.serviceLocator.register("rendererFactory",new Ag)}return e.prototype.addEventListener=function(){this.parent.on("toolbarClick",this.toolbarClick,this),this.parent.on("dropDownSelect",this.dropDownSelect,this),this.parent.on("colorPickerChanged",this.renderSelection,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.toolbarClick=function(e){if(!g(e.item)){if(!g(e.item.controlParent)){var t=e.item.controlParent.activeEle;t&&(t.tabIndex=-1)}this.parent.notify("html-toolbar-click",e),this.parent.notify("markdown-toolbar-click",e)}},e.prototype.dropDownSelect=function(e){if(this.parent.notify("selection-restore",{}),!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!e.item||"Images"!==e.item.command&&"Display"!==e.item.command&&"Table"!==e.item.command){var t=e.item.controlParent&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar&&this.parent.quickToolbarModule.tableQTBar.element.contains(e.item.controlParent.element)?"Table":null;this.parent.formatter.process(this.parent,e,e.originalEvent,t)}this.parent.notify("selection-save",{})},e.prototype.renderSelection=function(e){this.parent.notify("selection-restore",{}),this.parent.formatter.process(this.parent,e,e.originalEvent,null),this.parent.notify("selection-save",{})},e.prototype.removeEventListener=function(){this.parent.off("toolbarClick",this.toolbarClick),this.parent.off("dropDownSelect",this.dropDownSelect),this.parent.off("colorPickerChanged",this.renderSelection),this.parent.off("destroy",this.removeEventListener)},e}(),_y=function(){function e(e,t){this.parent=e,this.isToolbar=!1,this.locator=t,this.isTransformChild=!1,this.renderFactory=this.locator.getService("rendererFactory"),function(e){Vg.forEach((function(t,i){Vg[i].text=Jg(e,Hg,Vg[i])})),qg.forEach((function(t,i){qg[i].text=Jg(e,zg,qg[i])})),_g.forEach((function(t,i){_g[i].text=Jg(e,Wg,_g[i])})),Ug.forEach((function(t,i){Ug[i].text=Jg(e,Gg,Ug[i])})),Yg.forEach((function(t,i){Yg[i].text=Jg(e,Kg,Yg[i])})),Qg.forEach((function(t,i){Qg[i].text=Jg(e,Xg,Qg[i])}))}(this.parent),this.renderFactory.addRenderer(Pu.Toolbar,new jy(this.parent)),this.toolbarRenderer=this.renderFactory.getRenderer(Pu.Toolbar),this.baseToolbar=new zy(this.parent,this.locator),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?u(this.tools,Ng,zf(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Ng}return e.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(Pu.Content),this.editableElement=this.contentRenderer.getEditPanel(),this.editPanel=this.contentRenderer.getPanel()},e.prototype.toolbarBindEvent=function(){this.parent.inlineMode.enable||(this.keyBoardModule=new xi(this.getToolbarElement(),{keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}))},e.prototype.toolBarKeyDown=function(e){switch(e.action){case"escape":this.parent.contentModule.getEditPanel().focus()}},e.prototype.createToolbarElement=function(){this.tbElement=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar"}),!me.isDevice&&this.parent.inlineMode.enable&&Of()||(this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable?(this.tbWrapper=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar_wrapper",innerHTML:this.tbElement.outerHTML,className:"e-toolbar-wrapper"}),this.tbElement=this.tbWrapper.firstElementChild,this.parent.element.insertBefore(this.tbWrapper,this.editPanel)):this.parent.element.insertBefore(this.tbElement,this.editPanel))},e.prototype.getToolbarMode=function(){var e;switch(this.parent.toolbarSettings.type){case Iu.Expand:e="Extended";break;case Iu.Scrollable:e="Scrollable";break;default:e="MultiRow"}return Of()&&this.parent.toolbarSettings.type===Iu.Expand&&(e=Iu.Scrollable),e},e.prototype.checkToolbarResponsive=function(e){return!(!me.isDevice||Of())&&(t=this.parent.toolbarSettings.type===Iu.Expand?Iu.MultiRow:this.parent.toolbarSettings.type,this.baseToolbar.render({container:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items,mode:t,target:e}),this.parent.toolbarSettings.type===Iu.Expand&&(ut([e],["e-rte-tb-mobile"]),this.parent.inlineMode.enable?this.addFixedTBarClass():ut([e],["e-tb-static"])),this.wireEvents(),this.dropDownModule.renderDropDowns({container:e,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify("render-color-picker",{container:this.tbElement,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),!0);var t},e.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var e=kt('[style*="transform"]',document),t=0;t<e.length;t++)if(!g(e[t].contains)&&e[t].contains(this.parent.element)){this.isTransformChild=!0;break}},e.prototype.toggleFloatClass=function(e){var t,i,n=!1,r=!1,o=this.parent.floatingToolbarOffset;e&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===e.target?i=e.target.body:e&&e.target!==document?i=e.target:(n=!0,i=document.body);var s=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){t=0;var a=0,l=this.parent.element.offsetHeight;if(n){var h=window.getComputedStyle(i);a=parseFloat(h.marginTop.split("px")[0])+parseFloat(h.paddingTop.split("px")[0])}var p=this.parent.element.getBoundingClientRect().top,d=me.isMSPointer&&n?window.pageYOffset:i.parentElement.scrollTop,c=i.getBoundingClientRect(),u=n?c.top+d:c.top;p>u+o||p<-l||p<0&&!(p-(n?0:u)+l>s+o)?(r=!1,gt([this.tbElement],["e-rte-tb-abs-float"])):p<u+o&&(t=p<0?-p+u:u-p,t=n?t-a:t,ut([this.tbElement],["e-rte-tb-abs-float"]),r=!0)}else{var g=this.parent.element.getBoundingClientRect();if(window.innerHeight<g.top)return;t=e&&e.target!==document?i.getBoundingClientRect().top:0,g.bottom<o+s+t||g.bottom<0||g.top>o+t?r=!1:g.top<o&&(r=!0)}r?(ut([this.tbElement],["e-rte-tb-float"]),Dt(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:o+t+"px"})):(gt([this.tbElement],["e-rte-tb-float"]),Dt(this.tbElement,{top:"0px",width:"100%"}))},e.prototype.renderToolbar=function(){if(this.initializeInstance(),this.createToolbarElement(),!this.checkToolbarResponsive(this.tbElement)){this.parent.inlineMode.enable?this.parent.notify("renderInlineToolbar",{}):(this.baseToolbar.render({container:"toolbar",items:this.parent.toolbarSettings.items,mode:this.getToolbarMode(),target:this.tbElement}),this.parent.inlineMode.enable||(this.parent.toolbarSettings.enableFloating&&(this.checkIsTransformChild(),this.toggleFloatClass()),this.parent.toolbarSettings.type===Iu.Expand&&ut([this.parent.element],["e-rte-tb-expand"]))),this.wireEvents(),this.parent.inlineMode.enable&&!Of()&&this.addFixedTBarClass(),this.parent.inlineMode.enable||(this.dropDownModule.renderDropDowns({container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify("render-color-picker",{container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.refreshToolbarOverflow());var e=this.parent.element.querySelector(".e-rte-srctextarea"),t=this.parent.element.querySelector(".e-source-content");(!this.parent.iframeSettings.enable&&!g(e)&&"block"===e.style.display||this.parent.iframeSettings.enable&&!g(t)&&"block"===t.style.display)&&(this.parent.notify("updateToolbarItem",{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),this.parent.disableToolbarItem(this.parent.toolbarSettings.items))}},e.prototype.addFixedTBarClass=function(){ut([this.tbElement],["e-rte-tb-fixed"])},e.prototype.removeFixedTBarClass=function(){gt([this.tbElement],["e-rte-tb-fixed"])},e.prototype.showFixedTBar=function(){ut([this.tbElement],["e-show"]),me.isIos&&ut([this.tbElement],["e-tbar-ios-fixed"])},e.prototype.hideFixedTBar=function(){this.isToolbar?this.isToolbar=!1:gt([this.tbElement],["e-show","e-tbar-ios-fixed"])},e.prototype.updateItem=function(e){var t=this.tools[e.updateItem.toLocaleLowerCase()],i=Hf(Nf(this.tools[e.targetItem.toLocaleLowerCase()].subCommand),e.baseToolbar.toolbarObj.items)[0];if(g(i))this.addTBarItem(e,0);else{var n=this.parent.inlineMode.enable?"_quick_":"_toolbar_";e.baseToolbar.toolbarObj.items[i].id=this.parent.getID()+n+t.id,e.baseToolbar.toolbarObj.items[i].prefixIcon=t.icon,e.baseToolbar.toolbarObj.items[i].tooltipText=t.tooltip,e.baseToolbar.toolbarObj.items[i].subCommand=t.subCommand,e.baseToolbar.toolbarObj.dataBind()}},e.prototype.updateToolbarStatus=function(e){this.tbElement&&(!this.parent.inlineMode.enable||!Of()&&me.isDevice)&&Ff({args:e,dropDownModule:this.dropDownModule,parent:this.parent,tbElements:kt(".e-toolbar-item",this.tbElement),tbItems:this.baseToolbar.toolbarObj.items},!!this.parent.inlineMode.enable)},e.prototype.fullScreen=function(e){this.parent.fullScreenModule.showFullScreen(e)},e.prototype.hideScreen=function(e){this.parent.fullScreenModule.hideFullScreen(e)},e.prototype.getBaseToolbar=function(){return this.baseToolbar},e.prototype.addTBarItem=function(e,t){e.baseToolbar.toolbarObj.addItems([e.baseToolbar.getObject(e.updateItem,"toolbar")],t)},e.prototype.enableTBarItems=function(e,t,i,n){var r=Hf(Nf(t),e.toolbarObj.items);this.tbItems=kt(".e-toolbar-item",e.toolbarObj.element);for(var o=0;o<r.length;o++){var s=this.tbItems[r[o]];s&&e.toolbarObj.enableItems(s,i)}xt(".e-rte-srctextarea",this.parent.element)||n||Vf(e,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},e.prototype.removeTBarItems=function(e){g(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var t=Hf(Nf(e),this.baseToolbar.toolbarObj.items);this.tbItems=this.parent.inlineMode.enable?kt(".e-toolbar-item",this.baseToolbar.toolbarObj.element):kt(".e-toolbar-item",this.parent.element);for(var i=0;i<t.length;i++)this.baseToolbar.toolbarObj.removeItems(this.tbItems[t[i]])},e.prototype.getExpandTBarPopHeight=function(){var e=0;if(this.parent.toolbarSettings.type===Iu.Expand&&this.tbElement.classList.contains("e-extended-toolbar")){var t=xt(".e-toolbar-extended",this.tbElement);t&&this.tbElement.classList.contains("e-expand-open")||t&&t.classList.contains("e-popup-open")?(ut([t],["e-visible"]),e+=t.offsetHeight,gt([t],["e-visible"])):gt([this.tbElement],["e-expand-open"])}return e},e.prototype.getToolbarHeight=function(){return this.tbElement.offsetHeight},e.prototype.getToolbarElement=function(){return xt(".e-rte-toolbar",this.parent.element)},e.prototype.refreshToolbarOverflow=function(){this.baseToolbar.toolbarObj.refreshOverflow()},e.prototype.isToolbarDestroyed=function(){return this.baseToolbar.toolbarObj&&!this.baseToolbar.toolbarObj.isDestroyed},e.prototype.destroyToolbar=function(){if(this.isToolbarDestroyed()){this.parent.unWireScrollElementsEvents(),this.unWireEvents(),this.parent.notify("destroy-color-picker",{}),this.dropDownModule.destroyDropDowns(),this.baseToolbar.toolbarObj.destroy(),this.removeEventListener(),gt([this.parent.element],["e-rte-tb-expand"]);var e=xt(".e-toolbar-wrapper",this.parent.element),t=xt(".e-rte-toolbar",this.parent.element);g(e)?g(t)||wt(t):wt(e)}},e.prototype.destroy=function(){this.isToolbarDestroyed()&&(this.destroyToolbar(),this.keyBoardModule&&this.keyBoardModule.destroy())},e.prototype.scrollHandler=function(e){this.parent.inlineMode.enable||this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(e.args)},e.prototype.getDOMVisibility=function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight)},e.prototype.mouseDownHandler=function(){me.isDevice&&this.parent.inlineMode.enable&&!Of()&&this.showFixedTBar()},e.prototype.focusChangeHandler=function(){me.isDevice&&this.parent.inlineMode.enable&&!Of()&&(this.isToolbar=!1,this.hideFixedTBar())},e.prototype.dropDownBeforeOpenHandler=function(){this.isToolbar=!0},e.prototype.tbFocusHandler=function(e){var t=document.activeElement,i=Tt(t,".e-rte-toolbar");if(t===this.parent.getToolbarElement()||i===this.parent.getToolbarElement())for(var n=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),r=0;r<n.length;r++)g(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?n[r].setAttribute("tabindex","0"):n[r].setAttribute("tabindex","1")},e.prototype.tbKeydownHandler=function(e){(e.target.classList.contains("e-dropdown-btn")||e.target.getAttribute("id")===this.parent.getID()+"_toolbar_CreateTable")&&e.target.setAttribute("tabindex","0")},e.prototype.toolbarClickHandler=function(e){var t=Tt(e.originalEvent.target,".e-hor-nav");t&&this.parent.toolbarSettings.type===Iu.Expand&&!g(t)?t.classList.contains("e-nav-active")?(ut([this.tbElement],["e-expand-open"]),this.parent.setContentHeight("toolbar",!0)):(gt([this.tbElement],["e-expand-open"]),this.parent.setContentHeight("toolbar",!1)):(me.isDevice||this.parent.inlineMode.enable)&&(this.isToolbar=!0),g(t)&&this.parent.toolbarSettings.type===Iu.Expand&&gt([this.tbElement],["e-expand-open"])},e.prototype.wireEvents=function(){this.parent.inlineMode.enable&&Of()||(ye.add(this.tbElement,"focusin",this.tbFocusHandler,this),ye.add(this.tbElement,"keydown",this.tbKeydownHandler,this))},e.prototype.unWireEvents=function(){ye.remove(this.tbElement,"focusin",this.tbFocusHandler),ye.remove(this.tbElement,"keydown",this.tbKeydownHandler)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.dropDownModule=new qy(this.parent,this.locator),this.toolbarActionModule=new Wy(this.parent),this.parent.on("initial-end",this.renderToolbar,this),this.parent.on("scroll",this.scrollHandler,this),this.parent.on("bind-on-end",this.toolbarBindEvent,this),this.parent.on("toolbar-updated",this.updateToolbarStatus,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.on("refresh-begin",this.onRefresh,this),this.parent.on("destroy",this.destroy,this),this.parent.on("enableFullScreen",this.fullScreen,this),this.parent.on("disableFullScreen",this.hideScreen,this),this.parent.on("updateToolbarItem",this.updateItem,this),this.parent.on("beforeDropDownOpen",this.dropDownBeforeOpenHandler,this),this.parent.on("expandPopupClick",this.parent.setContentHeight,this.parent),this.parent.on("focusChange",this.focusChangeHandler,this),this.parent.on("mouseDown",this.mouseDownHandler,this),this.parent.on("sourceCodeMouseDown",this.mouseDownHandler,this),this.parent.inlineMode.enable||Of()||this.parent.on("toolbarClick",this.toolbarClickHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.renderToolbar),this.parent.off("scroll",this.scrollHandler),this.parent.off("bind-on-end",this.toolbarBindEvent),this.parent.off("toolbar-updated",this.updateToolbarStatus),this.parent.off("model-changed",this.onPropertyChanged),this.parent.off("refresh-begin",this.onRefresh),this.parent.off("destroy",this.destroy),this.parent.off("enableFullScreen",this.parent.fullScreenModule.showFullScreen),this.parent.off("disableFullScreen",this.parent.fullScreenModule.hideFullScreen),this.parent.off("updateToolbarItem",this.updateItem),this.parent.off("beforeDropDownOpen",this.dropDownBeforeOpenHandler),this.parent.off("expandPopupClick",this.parent.setContentHeight),this.parent.off("focusChange",this.focusChangeHandler),this.parent.off("mouseDown",this.mouseDownHandler),this.parent.off("sourceCodeMouseDown",this.mouseDownHandler),this.parent.inlineMode.enable||Of()||this.parent.off("toolbarClick",this.toolbarClickHandler))},e.prototype.onRefresh=function(){this.refreshToolbarOverflow(),this.parent.setContentHeight("",!0)},e.prototype.onPropertyChanged=function(e){if(!g(e.newProp.inlineMode))for(var t=0,i=Object.keys(e.newProp.inlineMode);t<i.length;t++){switch(i[t]){case"enable":this.refreshToolbar()}}e.module===this.getModuleName()&&this.refreshToolbar()},e.prototype.refreshToolbar=function(){g(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var e=xt(".e-toolbar-wrapper",this.parent.element);(xt(".e-rte-toolbar",this.parent.element)||e)&&this.destroyToolbar(),this.parent.toolbarSettings.enable&&(this.addEventListener(),this.renderToolbar(),this.parent.wireScrollElementsEvents(),xt(".e-rte-srctextarea",this.parent.element)||Vf(this.baseToolbar,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus()))},e.prototype.getModuleName=function(){return"toolbar"},e}(),Gy=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Uy(){var e=!1;return me.isDevice&&me.isIos&&(e=!0),e}function Ky(e,t){if("BODY"===e.nodeName&&!g(t)){var i=top.window.document.querySelector(t);g(i)||i.contentWindow.focus()}}var Yy=function(){function e(e,t){this.parent=e,this.rteID=e.element.id,this.i10n=t.getService("rteLocale"),this.addEventListener(),this.serviceLocator=t,this.rendererFactory=t.getService("rendererFactory"),this.dialogRenderObj=t.getService("dialogRenderObject")}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("insertLink",this.linkDialog,this),this.parent.on(wg,this.onKeyDown,this),this.parent.on("insertCompleted",this.showLinkQuickToolbar,this),this.parent.on("link-toolbar-action",this.onToolbarAction,this),this.parent.on("iframe-click",this.onIframeMouseDown,this),this.parent.on("unLink",this.removeLink,this),this.parent.on("editLink",this.editLink,this),this.parent.on("openLink",this.openLink,this),this.parent.on("editAreaClick",this.editAreaClickHandler,this),this.parent.on("destroy",this.destroy,this))},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"OpenLink":this.parent.notify("openLink",e);break;case"EditLink":this.parent.notify("editLink",e);break;case"RemoveLink":this.parent.notify("unLink",e)}},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("insertLink",this.linkDialog),this.parent.off(wg,this.onKeyDown),this.parent.off("insertCompleted",this.showLinkQuickToolbar),this.parent.off("link-toolbar-action",this.onToolbarAction),this.parent.off("unLink",this.removeLink),this.parent.off("iframe-click",this.onIframeMouseDown),this.parent.off("editLink",this.editLink),this.parent.off("openLink",this.openLink),this.parent.off("editAreaClick",this.editAreaClickHandler),this.parent.off("destroy",this.destroy))},e.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},e.prototype.showLinkQuickToolbar=function(e){if("enter"!==e.args.action&&"space"!==e.args.action){var t=void 0,i=void 0;if("Links"!==e.type||g(this.parent.quickToolbarModule)||g(this.parent.quickToolbarModule.linkQTBar))return;this.quickToolObj=this.parent.quickToolbarModule;var n,r=this.parent.element.getBoundingClientRect().top,o=this.parent.element.getBoundingClientRect().left,s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if([].forEach.call(e.elements,(function(e,t){0===t&&(n="#text"===e.nodeName?e.parentNode:e)})),e.isNotify){var a=this.parent.toolbarModule.getToolbarElement(),l=n.getBoundingClientRect().top,h=n.getBoundingClientRect().left,p=l-r,d=a?a.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;t=this.parent.iframeSettings.enable?o+h:n.getBoundingClientRect().left,i=window.pageYOffset+(this.parent.iframeSettings.enable?r+d+l:r+p)}else{var c=void 0;c=e.args.touches?e.args.changedTouches[0]:c=e.args,t=this.parent.iframeSettings.enable?window.pageXOffset+o+c.clientX:c.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+r+c.clientY:c.pageY}this.quickToolObj.linkQTBar&&this.quickToolObj.linkQTBar.showPopup(t,i,s.endContainer)}},e.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.linkQTBar&&document.body.contains(this.quickToolObj.linkQTBar.element)&&this.quickToolObj.linkQTBar.hidePopup()},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideLinkQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.linkQTBar){this.quickToolObj=this.parent.quickToolbarModule;var n=t.target;n=this.getAnchorNode(n),this.contentModule=this.rendererFactory.getRenderer(Pu.Content);var r=this.quickToolObj.linkQTBar.element.classList.contains("e-rte-pop");if("A"===n.nodeName&&n.childNodes.length>0&&"IMG"!==n.childNodes[0].nodeName&&"IMG"!==e.args.target.nodeName){if(r)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:"Links",elements:[t.target]})}else this.hideLinkQuickToolbar()}}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"escape":g(this.dialogObj)||this.dialogObj.close();break;case"insert-link":if("HTML"===this.parent.editorMode){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),s={args:e.args,selectNode:r,selection:n,selectParent:o};this.linkDialog(s)}else{var a=this.parent.contentModule.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(a.selectionStart,a.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:t},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertLink"})}t.preventDefault()}},e.prototype.linkDialog=function(e,t){var i=this;if(this.dialogObj)this.dialogObj.hide({returnValue:!0});else if("HTML"===this.parent.editorMode&&e.selectParent.length>0&&!g(e.selectParent[0].classList)&&e.selectParent[0].classList.contains("e-rte-anchor")&&g(t))this.editLink(e);else{var n,r=this.i10n.getConstant("linkWebUrl"),o=this.i10n.getConstant("linkText"),s=this.i10n.getConstant("linkTooltipLabel"),a=this.i10n.getConstant("linkurl"),l=this.i10n.getConstant("textPlaceholder"),h=this.i10n.getConstant("linkTitle"),p=this.parent.createElement("div",{className:"e-rte-link-dialog",id:this.rteID+"_rtelink"});this.parent.element.appendChild(p);var d,c,u=this.parent.createElement("div",{className:"e-rte-linkcontent",id:this.rteID+"_linkContent"}),f="HTML"===this.parent.editorMode?"<label>"+s+'</label></div><div class="e-rte-field"><input type="text" data-role ="none" spellcheck="false" placeholder = "'+h+'" class="e-input e-rte-linkTitle"></div><div class="e-rte-label"></div><div class="e-rte-field"><input type="checkbox" class="e-rte-linkTarget"  data-role ="none"></div>':"",m=(d='<div class="e-rte-label"><label>'+r+'</label></div><div class="e-rte-field"><input type="text" data-role ="none" spellcheck="false" placeholder="'+a+'" class="e-input e-rte-linkurl"/></div><div class="e-rte-label"><label>'+o+'</label></div><div class="e-rte-field"> <input type="text" data-role ="none" spellcheck="false" class="e-input e-rte-linkText" placeholder="'+l+'"></div><div class="e-rte-label">'+f,(c=ct("template")).innerHTML=d,c.content instanceof DocumentFragment?c.content:document.createRange().createContextualFragment(d));u.appendChild(m);var y=u.querySelector(".e-rte-linkTarget"),v=u.querySelector(".e-rte-linkurl"),b=u.querySelector(".e-rte-linkText"),w=u.querySelector(".e-rte-linkTitle"),C=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new _d({label:C,checked:!0,enableRtl:this.parent.enableRtl}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(y),n="HTML"===this.parent.editorMode?e.selection.getRange(this.parent.contentModule.getDocument()).toString():e.text;var x=this.i10n.getConstant("dialogInsert"),k=this.i10n.getConstant("dialogCancel"),T=e.selection,D={selfLink:this,selection:e.selection,selectParent:e.selectParent,args:e.args},E={header:this.i10n.getConstant("linkHeader"),content:u,cssClass:"e-rte-elements",enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:me.isDevice?"290px":"310px",height:"inherit",isModal:me.isDevice,buttons:[{click:this.insertlink.bind(D),buttonModel:{content:x,cssClass:"e-flat e-insertLink",isPrimary:!0}},{click:this.cancelDialog.bind(D),buttonModel:{cssClass:"e-flat",content:k}}],target:me.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(e){i.parent.isBlur=!1,e&&e.event.returnValue&&("HTML"===i.parent.editorMode?T.restore():i.parent.formatter.editorManager.markdownSelection.restore(i.parent.contentModule.getEditPanel())),i.dialogObj.destroy(),wt(i.dialogObj.element);var t=S()?null:i.dialogObj;i.dialogRenderObj.close(t),i.dialogObj=null}};this.dialogObj=this.dialogRenderObj.render(E),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(p),p.style.maxHeight="inherit",g(t)||(v.value=t.url,b.value=t.text,w.value=t.title,t.target?this.checkBoxObj.checked=!0:this.checkBoxObj.checked=!1,this.dialogObj.header=t.header,this.dialogObj.element.querySelector(".e-insertLink").textContent=t.btnText),this.checkUrl(!1),("HTML"===this.parent.editorMode&&g(t)&&(!g(n)&&""!==n&&0===e.selection.range.startOffset||e.selection.range.startOffset!==e.selection.range.endOffset)||"Markdown"===e.module)&&(b.value=n),ye.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup())}},e.prototype.insertlink=function(e){var t,i=this.selfLink.dialogObj.element,n=i.querySelector(".e-rte-linkurl").value,r=i.querySelector(".e-rte-linkText").value;"HTML"===this.selfLink.parent.editorMode&&(t=i.querySelector(".e-rte-linkTitle").value);var o=this.selfLink.checkBoxObj.checked?"_blank":null;if(""!==n){this.selfLink.isUrl(n)?this.selfLink.checkUrl(!1):(r=""===r?n:r,n=this.selfLink.parent.enableAutoUrl||n.indexOf("http")>-1?n:"http://"+n);var s=this.selfLink;if("HTML"===s.parent.editorMode&&g(Tt(this.selection.range.startContainer.parentNode,"#"+s.parent.contentModule.getPanel().id))){s.parent.contentModule.getEditPanel().focus(),me.isIE&&s.parent.iframeSettings.enable&&this.selection.restore();var a=s.parent.formatter.editorManager.nodeSelection.getRange(s.parent.contentModule.getDocument());this.selection=s.parent.formatter.editorManager.nodeSelection.save(a,s.parent.contentModule.getDocument()),this.selectParent=s.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(a)}var l,h={url:n,text:r,title:t,target:o,selection:this.selection,selectParent:this.selectParent};if(document.body.contains(s.dialogObj.element)&&this.selfLink.dialogObj.hide({returnValue:!1}),Uy()&&s.parent.iframeSettings.enable&&xt("iframe",s.parent.element).contentWindow.focus(),"HTML"===s.parent.editorMode&&this.selection.restore(),0===s.parent.formatter.getUndoRedoStack().length&&s.parent.formatter.saveData(),"KeyK"===this.args.code){var p=this.args;u(this.args,{item:{command:"Links",subCommand:"CreateLink"},originalEvent:p},!0),l={item:{command:"Links",subCommand:"CreateLink"},originalEvent:p}}else l=this.args;this.selfLink.parent.formatter.process(this.selfLink.parent,l,this.args.originalEvent,h),this.selfLink.parent.contentModule.getEditPanel().focus()}else this.selfLink.checkUrl(!0)},e.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},e.prototype.checkUrl=function(e){var t=this.dialogObj.element.querySelector(".e-rte-linkurl");e?(ut([t],"e-error"),t.setSelectionRange(0,t.value.length),t.focus()):gt([t],"e-error")},e.prototype.removeLink=function(e){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,selectParent:e.selectParent,selection:e.selection,subCommand:e.args.item.subCommand}),Uy()&&this.parent.iframeSettings.enable?xt("iframe",this.parent.element).contentWindow.focus():this.parent.contentModule.getEditPanel().focus(),this.hideLinkQuickToolbar()},e.prototype.openLink=function(e){var t=this.getAnchorNode(e.selectParent[0]);(t.classList.contains("e-rte-anchor")||"A"===t.tagName)&&this.parent.formatter.process(this.parent,e.args,e.args,{url:t.href,target:""===t.target?"_self":"_blank",selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.getAnchorNode=function(e){var t=Tt(e,"a");return t||e},e.prototype.editLink=function(e){var t=this.getAnchorNode(e.selectNode[0]),i=this.getAnchorNode(e.selectParent[0]);if((i="A"===t.nodeName?t:i).classList.contains("e-rte-anchor")||"A"===i.tagName){var n=this.i10n.getConstant("dialogUpdate"),r={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target,header:this.i10n.getConstant("editLink"),btnText:n};this.linkDialog(e,r)}},e.prototype.cancelDialog=function(e){this.selfLink.parent.isBlur=!1,this.selfLink.dialogObj.hide({returnValue:!0}),Uy()?this.selection.restore():this.selfLink.parent.contentModule.getEditPanel().focus()},e.prototype.onDocumentClick=function(e){var t=e.target;!g(this.dialogObj)&&(!Tt(t,"#"+this.dialogObj.element.id)&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||(this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)||this.parent.inlineMode.enable&&!Tt(t,"#"+this.dialogObj.element.id))&&!Tt(t,"#"+this.parent.getID()+"_toolbar_CreateLink")&&!t.querySelector("#"+this.parent.getID()+"_toolbar_CreateLink"))&&(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,jf(this.parent.element,"focusout"))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return"link"},e}(),Xy=function(){function e(){}return e.prototype.process=function(e,t,i,n){var r,o=this,s=e.contentModule.getDocument().getSelection(),a=s.rangeCount>0?s.getRangeAt(s.rangeCount-1):null;if("HTML"===e.editorMode&&(r=this.editorManager.nodeSelection.save(a,e.contentModule.getDocument())),g(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||!a||e.contentModule.getEditPanel().contains(this.getAncestorNode(a.commonAncestorContainer))||e.contentModule.getEditPanel()===a.commonAncestorContainer||e.contentModule.getPanel()===a.commonAncestorContainer){if(g(t)){var l=i.action;if("tab"!==l&&"enter"!==l&&"space"!==l&&"escape"!==l){t={},"Markdown"===e.editorMode&&"insert-table"===l&&(n={headingText:e.localeObj.getConstant("TableHeadingText"),colText:e.localeObj.getConstant("TableColText")});var h={originalEvent:i,cancel:!1,requestType:l||i.key+"Key",itemCollection:n};u(t,t,h,!0),S()&&(delete t.item,delete t.itemCollection),e.trigger("actionBegin",t,(function(e){e.cancel&&("paste"!==l&&"cut"!==l&&"copy"!==l||i.preventDefault())}))}var p=!!g(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===i.which&&p||9!==i.which)&&this.editorManager.observer.notify("keydown"===i.type?"keydown":"keyup",{event:i,callBack:this.onSuccess.bind(this,e),value:n})}else!g(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(u(t,t,{requestType:t.item.subCommand,cancel:!1,itemCollection:n},!0),e.trigger("actionBegin",t,(function(s){if(!s.cancel){0===o.getUndoRedoStack().length&&"Links"!==s.item.command&&"Images"!==s.item.command&&o.saveData(),e.isBlur=!1,e.contentModule.getEditPanel().focus(),"HTML"===e.editorMode&&r.restore();var a=s.item.subCommand.toLocaleLowerCase();"paste"===a||"cut"===a||"copy"===a?e.clipboardAction(a,i):(o.editorManager.observer.notify("checkUndoStack",{subCommand:s.item.subCommand}),o.editorManager.execCommand(s.item.command,s.item.subCommand,i,o.onSuccess.bind(o,e),s.item.value,"Pre"===s.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:n,"#"+e.getID()+" iframe"))}})));(g(i)||i&&"copy"!==i.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return e=3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var i=this;this.editorManager.observer.notify("keyup",{event:t,callBack:function(){e.notify("content-changed",{}),i.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){e.notify("content-changed",{}),t&&(g(t.event)||"copy"!==t.event.action)&&(this.enableUndo(e),e.notify("execCommandCallBack",t)),e.trigger("actionComplete",t,(function(t){if(e.setPlaceHolder(),"Images"===t.requestType||"Links"===t.requestType&&"HTML"===e.editorMode){var i=t;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;e.notify("insertCompleted",{args:i.event,type:t.requestType,isNotify:!0,elements:i.elements})}e.autoResize()}))},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){var t=this.getUndoStatus();!e.inlineMode.enable||me.isDevice&&!Of()?e.toolbarModule&&(Vf(e.toolbarModule.baseToolbar,t),e.trigger("toolbarStatusUpdate",t)):(Vf(e.quickToolbarModule.inlineQTBar.quickTBarObj,t),e.trigger("toolbarStatusUpdate",t))},e}(),Qy=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],Jy=["td","th"],Zy=["table","tbody","td","tfoot","th","thead","tr"],$y=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),i=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return i.startContainer!==e||i.endContainer!==e||i.startOffset||i.endOffset||(i.setStart(e.body,0),i.collapse(!0)),i},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var i=0;i<t.childNodes.length;i++)if(e.indexOf(t.childNodes[i])>-1)return!0;return!1},e.prototype.getNode=function(e,t,i){return t!==e||3!==e.nodeType&&e.firstChild&&-1===i.indexOf(e.firstChild)&&!this.isChildNode(i,e)?-1===i.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(i,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,i=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if(t===i&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];var n=[];do{-1===n.indexOf(t)&&n.push(t),t=this.getNode(t,i,n)}while(t);return n},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var i=0;i<e.length;i++)-1!==e.indexOf(e[i].parentNode)||3===e[i].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(i,1),i--):3===e[i].nodeType&&(e[i]=e[i].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)"BR"!==e[i].nodeName&&(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,i){var n=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(i||this.rootNode)&&!g(e);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),n.push(this.getIndex(e)),e=e.parentNode;return n},e.prototype.setRangePoint=function(e,t,i,n){for(var r=this.rootNode,o=i.length,s=n;o--;null)r=r&&r.childNodes[i[o]];return r&&s>=0&&e[t?"setStart":"setEnd"](r,s),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var i=this.get(e);i.removeAllRanges(),i.addRange(t)},e.prototype.setSelectionText=function(e,t,i,n,r){var o=e.createRange();o.setStart(t,n),o.setEnd(i,r),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var i=e.createRange();i.selectNode(t),this.setRange(e,i)},e.prototype.setSelectionNode=function(e,t){var i=e.createRange();i.selectNodeContents(t),this.setRange(e,i)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,i){i.surroundContents(t),this.selectRange(e,i)},e.prototype.setCursorPoint=function(e,t,i){var n=e.createRange(),r=e.defaultView.getSelection();n.setStart(t,i),n.collapse(!0),r.removeAllRanges(),r.addRange(n)},e}(),ev={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46"},tv=["BR","IMG"],iv="e-editor-select-start",nv="e-editor-select-end",rv=function(){function e(e,t){this.parent=e,this.nodeSelection=new $y,this.currentDocument=t}return e.prototype.contents=function(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&Qy.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},i=e.attributes;if(i.length>0)for(var n=0;n<i.length;n++){var r=i[n];t[r.nodeName]=r.value}return t},e.prototype.attributes=function(e){if(!e)return"";for(var t="",i=this.rawAttributes(e),n=Object.keys(i).sort(),r=0;r<n.length;r++){var o=n[r],s=i[o];s.indexOf("'")<0&&s.indexOf('"')>=0?t+=" "+o+"='"+s+"'":s.indexOf('"')>=0&&s.indexOf("'")>=0?t+=" "+o+'="'+(s=s.replace(/"/g,"&quot;"))+'"':t+=" "+o+'="'+s+'"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,i=t.length-1;i>=0;i--){var n=t[i];e.removeAttribute(n.nodeName)}},e.prototype.openTagString=function(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"},e.prototype.closeTagString=function(e){return"</"+e.tagName.toLowerCase()+">"},e.prototype.createTagString=function(e,t,i){return"<"+e.toLowerCase()+this.attributes(t)+">"+i+"</"+e.toLowerCase()+">"},e.prototype.isList=function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),wt(e)},e.prototype.parseHTMLFragment=function(e){var t=ct("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;)i.push(e.firstChild),t.insertBefore(e.firstChild,e);return i=i.length>0?i:[e.parentNode],t.removeChild(e),i},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(iv)||e.childNodes[t-1].classList.contains(nv))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var i=[],n=0;n<t.length;n++)e.contains(t[n])&&e!==t[n]&&i.push(t[n]);return i},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),i=[];if(t&&t.getRangeAt&&t.rangeCount){i=[];for(var n=0;n<t.rangeCount;n++)i.push(t.getRangeAt(n))}else i=[this.currentDocument.createRange()];return void 0!==e?i[e]:i},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},e.prototype.saveMarker=function(e,t){var i,n,r=this.parent.querySelector("."+iv),o=this.parent.querySelector("."+nv);if(""===r.textContent&&g(o)&&"tab"!==t&&(1===r.childNodes.length&&"BR"===r.childNodes[0].nodeName?r.innerHTML="&#65279;&#65279;<br>":r.innerHTML="&#65279;&#65279;"),this.hasClass(r,iv)&&r.classList.length>1){var s=this.createTagString("p",r,this.encode(r.textContent));this.replaceWith(r,s),(r=this.parent.querySelector("."+iv)).classList.remove(iv),i=r.childNodes[0]}else i=this.unWrap(r)[0];if(this.hasClass(o,nv)&&o.classList.length>1){s=this.createTagString("p",o,this.encode(o.textContent));this.replaceWith(o,s),(o=this.parent.querySelector("."+nv)).classList.remove(nv),n=o.childNodes[0]}else n=o?this.unWrap(o)[0]:i;return e.startContainer=e.getNodeArray(i,!0),e.endContainer=e.getNodeArray(n,!1),e},e.prototype.marker=function(e,t){return'<span class="'+e+'">'+t+"</span>"},e.prototype.setMarker=function(e){var t=e.range,i=t.startContainer.childNodes[t.startOffset]||t.startContainer,n=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(i.nodeType===Node.ELEMENT_NODE&&n.nodeType===Node.ELEMENT_NODE&&(i.contains(n)||n.contains(i))){var r=i.contains(n)?i:n;if(r.nodeType!==Node.TEXT_NODE){for(var o=[],s=[],a=r;r.contains(a);null)o.indexOf(a)<0&&a.childNodes&&a.childNodes.length?(o.push(a),a=a.childNodes[0]):a.nextSibling?a=a.nextSibling:a.parentNode&&(a=a.parentNode,o.push(a)),s.indexOf(a)<0&&(a.nodeType===Node.TEXT_NODE||Jy.indexOf(a.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===a.tagName||"IMG"===a.tagName))&&s.push(a);s.length&&(i=i.contains(n)?s[0]:i,n=s[s.length-1])}}if(i!==n){if(i.nodeType!==Node.TEXT_NODE&&("BR"===i.tagName&&Jy.indexOf(i.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===i.tagName))this.replaceWith(i,this.marker(iv,this.encode(i.textContent))),t.startContainer.querySelector("."+iv).appendChild(i);else this.replaceWith(i,this.marker(iv,this.encode(i.textContent)));if(n.nodeType!==Node.TEXT_NODE&&"BR"===n.tagName&&Jy.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0)this.replaceWith(n,this.marker(nv,this.encode(n.textContent))),t.endContainer.querySelector("."+nv).appendChild(n);else this.ensureSelfClosingTag(n,nv,t)}else this.ensureSelfClosingTag(i,iv,t)},e.prototype.ensureSelfClosingTag=function(e,t,i){var n=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName){this.replaceWith(e,this.marker(iv,this.encode(e.textContent))),i.startContainer.querySelector("."+iv).appendChild(e)}else{if("IMG"===e.tagName){var r=document.createElement("p");e.parentElement.insertBefore(r,e),r.appendChild(e),e=r.children[0]}if("TABLE"===e.tagName)if(n=!0,""===e.textContent){var o=e.querySelectorAll("td");e=g((e=o[o.length-1]).childNodes[0])?e:e.childNodes[0]}else{for(var s=e.lastChild;3!==s.nodeType&&"#text"!==s.nodeName&&"BR"!==s.nodeName;)s=s.lastChild;e=s}for(var a=0;a<tv.length;a++)e=e.tagName!==tv[a]||n?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName){this.replaceWith(e,this.marker(nv,this.encode(e.textContent))),i.endContainer.querySelector("."+nv).appendChild(e)}else{var l=this.marker(t,"");vt([this.parseHTMLFragment(l)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if("BR"===e.tagName){var i="<p></p>",n=e.parentNode;Jy.indexOf(n.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(i)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(iv)||e.classList.contains(nv))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){i="<p></p>";var r=e;e=this.wrap(e,this.parseHTMLFragment(i)),!(r.nodeType===Node.ELEMENT_NODE&&r.firstChild&&"BR"===r.firstChild.nodeName&&(r.classList.contains(iv)||r.classList.contains(nv)))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var i=this.getRangePoint(),n=0;n<i.length;n++){var r=void 0,o=i[n],s=this.getSelectedNode(o.startContainer,o.startOffset),a=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(s)&&e.indexOf(s)<0&&e.push(s),(r=this.blockParentNode(s))&&e.indexOf(r)<0)if(Jy.indexOf(r.tagName.toLocaleLowerCase())>=0&&("BR"===s.tagName||s.nodeType===Node.TEXT_NODE||s.classList.contains(iv)||s.classList.contains(nv))){var l=s.previousSibling&&s.previousSibling.nodeType===Node.TEXT_NODE?s.previousSibling:s;s.nextSibling||s.previousSibling||"BR"!==s.tagName?e.push(this.createTempNode(l)):e.push(l)}else e.push(r);for(var h=[],p=s;p!==a&&p!==this.parent;null)h.indexOf(p)<0&&p.childNodes&&p.childNodes.length?(h.push(p),p=p.childNodes[0]):p&&8!==p.nodeType&&("BR"===p.tagName||p.nodeType===Node.TEXT_NODE&&""!==p.textContent.trim()||p.nodeType!==Node.TEXT_NODE&&(p.classList.contains(iv)||p.classList.contains(nv)))&&Jy.indexOf(p.parentNode.tagName.toLocaleLowerCase())>=0?p=this.createTempNode(p):p.nextSibling&&8!==p.nextSibling.nodeType&&("BR"===p.nextSibling.tagName||p.nextSibling.nodeType===Node.TEXT_NODE||p.nextSibling.classList.contains(iv)||p.nextSibling.classList.contains(nv))&&Jy.indexOf(p.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?p=this.createTempNode(p.nextSibling):p.nextSibling?p=p.nextSibling:p.parentNode&&(p=p.parentNode,h.push(p)),e.indexOf(p)<0&&p.nodeType===Node.ELEMENT_NODE&&Jy.indexOf(p.parentNode.tagName.toLocaleLowerCase())>=0&&(p.classList.contains(iv)||p.classList.contains(nv))&&e.push(this.createTempNode(p)),this.isBlockNode(p)&&this.ignoreTableTag(p)&&h.indexOf(p)<0&&e.indexOf(p)<0&&(p!==a||o.endOffset>0)&&e.push(p),"IMG"===p.nodeName&&"true"===p.parentElement.contentEditable&&e.push(p);(r=this.blockParentNode(a))&&this.ignoreTableTag(r)&&e.indexOf(r)<0&&!g(r.previousElementSibling)&&"IMG"!==r.previousElementSibling.tagName&&e.push(r)}for(var d=e.length-1;d>0;d--){if((h=this.nodeFinds(e[d],e)).length){var c=e[d].querySelectorAll("ul, ol");if("LI"===e[d].tagName&&c.length>0)continue;e.splice(d,1)}}return e},e.prototype.ignoreTableTag=function(e){return!(Zy.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),ov=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("list-type",this.applyListsHandler,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.testList=function(e){var t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=g(e)?null:e.innerText.trim().split(".")[0]+".";if(!g(i))for(var n=0;n<t.length;n++)if(t[n].test(i))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!g(e.startContainer.textContent.slice(0,e.startOffset)))for(var i=0;i<t.length;i++)if(t[i].test(e.startContainer.textContent.slice(0,e.startOffset)))return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),n=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),i.previousElementSibling),r=i.nextElementSibling,o=g(n)?null:n.innerText.trim().substring(0,1),s=g(r)?null:r.innerText.trim().substring(0,1),a=this.testCurrentList(t),l=this.testList(n),h=this.testList(r);l||h||"*"===o||"*"===s||(a?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):"*"===t.startContainer.textContent.slice(0,t.startOffset)&&(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);i===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&"LI"===i.tagName&&""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)&&(i.textContent="")},e.prototype.backspaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),n=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);if((i="BR"===i.nodeName?i.parentElement:i)!==(n="BR"===n.nodeName?n.parentElement:n)||g(Tt(i,"li"))||""!==i.textContent.trim()||65279!==i.textContent.charCodeAt(0)||(i.textContent=""),i===n&&""===i.textContent){if((i.closest("ul")||i.closest("ol"))&&(r=g(i.closest("ul"))?i.closest("ol"):i.closest("ul")).firstElementChild===i&&!g(r.children[1])&&("OL"===r.children[1].tagName||"UL"===r.children[1].tagName))if(r.tagName===r.children[1].tagName){for(;r.children[1].lastChild;)this.parent.domNode.insertAfter(r.children[1].lastChild,r.children[1]);wt(r.children[1])}else r.parentElement.insertBefore(r.children[1],r)}else if(!g(i.firstChild)&&"BR"===i.firstChild.nodeName&&("UL"===i.childNodes[1].nodeName||"OL"===i.childNodes[1].nodeName)){var r;if((r=g(i.closest("ul"))?i.closest("ol"):i.closest("ul")).tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);wt(i.childNodes[1])}else r.parentElement.insertBefore(i.children[1],r)}},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),8===e.event.which&&this.backspaceList(e),46===e.event.which&&"delete"===e.event.action){var t=(s=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,i=s.startContainer,n=s.endContainer,r=3===i.nodeType?i.parentElement:i,o=3===n.nodeType?n.parentElement:n;"UL"!==t.nodeName&&"OL"!==t.nodeName||r===o||g(Tt(r,"ul"))&&g(Tt(r,"ol"))||g(Tt(o,"ul"))&&g(Tt(o,"ol"))||t.lastElementChild!==Tt(o,"li")||s.collapsed||wt(t)}if(9===e.event.which){var s=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(s,this.parent.currentDocument));var a=void 0,l=s.startOffset,h=s.endOffset;if((r=this.parent.domNode.getSelectedNode(s.startContainer,s.startOffset))===(o=this.parent.domNode.getSelectedNode(s.endContainer,s.endOffset))&&("BR"===r.nodeName||"#text"===r.nodeName)&&Jy.indexOf(r.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),a=this.domNode.blockNodes();for(var p=[],d=!0,c=0;c<a.length;c++)"LI"===a[c].parentNode.tagName?p.push(a[c].parentNode):"LI"===a[c].tagName&&"P"!==a[c].childNodes[0].tagName&&"OL"!==a[c].childNodes[0].tagName&&"UL"!==a[c].childNodes[0].tagName&&p.push(a[c]);p.length>1||p.length&&(0===l&&0===h||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(p[0]),e.event.shiftKey?(this.revertList(p),this.revertClean()):d=this.nestedList(p),d&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getAction=function(e){return"OL"===e.parentNode.nodeName?"OL":"UL"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll("ul, ol"),t=0;t<e.length;t++){var i=e[t].querySelectorAll("ul, ol");if(i.length>0)for(var n=0;n<i.length;n++){var r=i[n].previousSibling;r&&"LI"===r.tagName&&r.appendChild(i[n])}}},e.prototype.noPreviousElement=function(e){var t,i,n=e.querySelectorAll("ol, ul"),r=e.querySelectorAll("li"),o=this.domNode.contents(r[0])[0];if(r.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=r[0]:i=n[0],t)for(var s=this.domNode.contents(e)[0];s&&!this.domNode.isList(s);null){var a=s.nextSibling;yt([s],t),Dt(e,{"list-style-type":"none"}),Dt(t,{"list-style-type":""}),s=a}else if(i){yt([h=ct("li")],i);for(s=this.domNode.contents(e)[0];s&&!this.domNode.isList(s);null){a=s.nextSibling;h.appendChild(s),s=a}yt([i],e.parentNode),wt(e),yt([l=ct("li",{styles:"list-style-type: none;"})],i.parentNode),vt([i],l)}else{var l,h;yt([l=ct("li",{styles:"list-style-type: none;"})],e.parentNode),yt([h=ct(e.parentNode.tagName)],l),vt([e],h)}},e.prototype.nestedList=function(e){for(var t=!1,i=0;i<e.length;i++){var n=this.domNode.getPreviousNode(e[i]);if(n){t=!0;var r=void 0,o=void 0,s=e[i].querySelectorAll("ol, ul"),a=e[i].querySelectorAll("li"),l=this.domNode.contents(a[0])[0];if(a.length>0&&("OL"===l.nodeName||"UL"===l.nodeName)?o=a[0]:r=s[0],r){yt([d=ct("li")],r);for(var h=this.domNode.contents(e[i])[0];h&&!this.domNode.isList(h);null){var p=h.nextSibling;d.appendChild(h),h=p}vt([r],n),wt(e[i])}else if(o){if("LI"===n.tagName){for(h=this.domNode.contents(e[i])[0];h&&!this.domNode.isList(h);null){p=h.nextSibling;yt([h],o),Dt(e[i],{"list-style-type":"none"}),Dt(o,{"list-style-type":""}),h=p}vt([o.parentNode],n),wt(e[i])}}else{var d;if("LI"===n.tagName)vt([d=ct(e[i].parentNode.tagName)],n),vt([e[i]],d)}}else{var c=e[i];t=!0,this.noPreviousElement(c)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.domNode.setMarker(this.saveSelection);for(var i=this.domNode.blockNodes(),n=0;n<i.length;n++)"TABLE"!==i[n].tagName||t.collapsed||i.splice(n,1),i.length>0&&"LI"!==i[n].tagName&&"LI"===i[n].parentNode.tagName&&(i[n]=i[n].parentNode);this.applyLists(i,this.currentAction,e.selector),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.applyLists=function(e,t,i){if(this.isRevert(e,t))this.revertList(e),this.removeEmptyListElements();else{this.checkLists(e,t);for(var n=0;n<e.length;n++)if("true"===e[n].getAttribute("contenteditable")&&1===e[n].childNodes.length&&"TABLE"===e[n].childNodes[0].nodeName){var r=document.createElement(t);r.innerHTML="<li><br/></li>",e[n].appendChild(r)}else if("LI"!==e[n].tagName){!1;var o="<"+t+">",s="</"+t+">",a="li"+("IMG"===e[n].tagName?"":this.domNode.attributes(e[n])),l="p"===e[n].tagName.toLowerCase()?e[n].innerHTML:e[n].outerHTML,h=o+this.domNode.createTagString(a,null,l)+s;this.domNode.replaceWith(e[n],h)}}this.cleanNode(),this.parent.editableElement.focus(),Uy()&&Ky(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&wt(e[t])},e.prototype.isRevert=function(e,t){for(var i=!0,n=0;n<e.length;n++){if("LI"!==e[n].tagName)return!1;e[n].parentNode.tagName!==t&&(i=!1)}return i},e.prototype.checkLists=function(e,t){for(var i=[],n=0;n<e.length;n++){var r=e[n].parentNode;"LI"===e[n].tagName&&r.tagName!==t&&i.indexOf(r)<0&&i.push(r)}for(var o=i.length-1;o>=0;o--){var s=i[o],a="<"+t.toLowerCase()+" "+this.domNode.attributes(s)+">"+s.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(i[o],a)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var i=e[t];if(this.domNode.isList(i.previousElementSibling)&&this.domNode.openTagString(i)===this.domNode.openTagString(i.previousElementSibling)){for(var n=this.domNode.contents(i),r=0;r<n.length;r++)i.previousElementSibling.appendChild(n[r]);i.parentNode.removeChild(i)}}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var i=[],n=[],r=[],o=[];r=t[t.length-1].childNodes;for(var s=0;s<r.length;s++)if("OL"===r[s].tagName||"UL"===r[s].tagName){var a=r[s].querySelectorAll("li");if(a.length>0)for(var l=0;l<a.length;l++)o.push(a[l])}for(var h=0;h<o.length;h++){for(var p=0,d=0;d<e.length;d++)o[h].contains(e[d])||(p+=1);p===e.length&&n.push(o[h])}if(n.length>0)for(var c=0;c<n.length;c++)"OL"!==this.domNode.contents(n[c])[0].nodeName&&"UL"!==this.domNode.contents(n[c])[0].nodeName&&i.push(n[c]);i.length>0&&this.nestedList(i)}},e.prototype.revertList=function(e){for(var t=[],i=e.length-1;i>=0;i--)for(var n=i-1;n>=0;n--)if(e[n].contains(e[i])||e[n]===e[i]){t.push(e[i]),e.splice(i,1);break}this.findUnSelected(t,e);var r=[];for(i=0;i<e.length;i++){var o=e[i];3===this.domNode.contents(o)[0].nodeType&&0===this.domNode.contents(o)[0].textContent.trim().length&&wt(this.domNode.contents(o)[0]);var s=e[i].parentNode,a=o.getAttribute("class");if(0===t.length){var l=e[i].querySelectorAll("ul, ol")[0];if(l)if(l.querySelectorAll("li")){var h=ct(l.tagName);vt([h],l.parentNode);var p=ct("li",{styles:"list-style-type: none;"});vt([p],h),vt([l],p)}}if(o.parentNode.insertBefore(this.closeTag(s.tagName),o),"LI"===s.parentNode.tagName)o.parentNode.insertBefore(this.closeTag("LI"),o);else{if(a&&' class="'+a+'"',0===o.querySelectorAll(Qy.join(", ")).length){var d="<p"+(g(a)?' class="e-rte-wrap-inner"':' class="'+a+' e-rte-wrap-inner"')+this.domNode.attributes(s)+"></p>";this.domNode.wrapInner(o,this.domNode.parseHTMLFragment(d))}else if(3===this.domNode.contents(o)[0].nodeType){var c=this.domNode.createTagString("p",s,this.parent.domNode.encode(this.domNode.contents(o)[0].textContent));this.domNode.replaceWith(this.domNode.contents(o)[0],c)}else if(this.domNode.contents(o)[0].classList.contains(iv)||this.domNode.contents(o)[0].classList.contains(nv)){c=this.domNode.createTagString("p",s,this.domNode.contents(o)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(o)[0],c)}else{var u=o.firstChild;a=u.getAttribute("class"),St(u,this.domNode.rawAttributes(s)),a&&u.getAttribute("class")&&St(u,{class:a+" "+u.getAttribute("class")})}vt([this.openTag("LI")],o),yt([this.closeTag("LI")],o)}this.domNode.insertAfter(this.openTag(s.tagName),o),"LI"===s.parentNode.tagName&&(s=s.parentNode.parentNode),r.indexOf(s)<0&&r.push(s)}for(i=0;i<r.length;i++){var f=r[i],m=f.innerHTML;m=(m=m.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(f)+">"),this.domNode.replaceWith(f,this.domNode.openTagString(f)+m.trim()+this.domNode.closeTagString(f))}var y=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(i=0;i<y.length;i++)wt(y[i]);var v=this.parent.editableElement.querySelectorAll("li:empty");for(i=0;i<v.length;i++)wt(v[i])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')},e}(),sv=function(){function e(){}return e.WrapBefore=function(e,t,i){return t.innerText=e.textContent,i?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;null)i.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),i},e.AppendBefore=function(e,t,i){return t.parentNode?i?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),av=function(){function e(){this.position=-1,this.nodeSelection=new $y}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),t=this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,i){if(t){var n=e.cloneRange(),r=t.parentNode,o=this.nodeSelection.getIndex(t);n.collapse(i),i?n.setStartBefore(t):n.setEndAfter(t);var s,a=n.extractContents();if(i){if(t=r.childNodes[o],(a=this.spliceEmptyNode(a,!1))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isImgElm(a)||""!==a.textContent))if(t)sv.AppendBefore(a,t);else r.appendChild(a),(s=document.createElement("div")).innerHTML="&#65279;&#65279;",t=s.firstChild,r.appendChild(t)}else if(t=r.childNodes.length>1?r.childNodes[o]:r.childNodes[0],(a=this.spliceEmptyNode(a,!0))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isImgElm(a)||""!==a.textContent))if(t)sv.AppendBefore(a,t,!0);else r.appendChild(a),(s=document.createElement("div")).innerHTML="&#65279;&#65279;",r.insertBefore(s.firstChild,r.firstChild),t=r.firstChild;return t}return null},e.prototype.isImgElm=function(e){var t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName)for(var i=e.childNodes[0],n=0;!g(i.childNodes)&&n<i.childNodes.length;n++)"IMG"===i.childNodes[n].nodeName&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var i;return(i=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[i],t):i>-1?this.spliceEmptyNode(e.childNodes[0],t):3!==e.nodeType&&11!==e.nodeType&&e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,i){for(var n=(e=i?e:e.reverse())[0],r=0;r<e.length&&(i?e[r]<t:e[r]>=t);r++)n=e[r];return n},e.prototype.GetCursorRange=function(e,t,i){var n=e.createRange(),r=[];r.push(0);for(var o=this.TrimLineBreak(i.data),s=o.indexOf(" ",0);-1!==s;)r.indexOf(s)<0&&r.push(s),new RegExp("\\s").test(o[s-1])&&r.indexOf(s-1)<0&&r.push(s-1),new RegExp("\\s").test(o[s+1])&&r.push(s+1),s=o.indexOf(" ",s+1);if(r.push(o.length),r.indexOf(t.startOffset)>=0||r.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||r[r.length-1]-1===t.startOffset)n=t,this.position=1;else{var a=this.GetCursorStart(r,t.startOffset,!0);this.position=t.startOffset-a,n.setStart(t.startContainer,a),n.setEnd(t.startContainer,this.GetCursorStart(r,t.startOffset,!1))}return n},e.prototype.GetCursorNode=function(e,t,i){return this.GetSpliceNode(this.GetCursorRange(e,t,i),i)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")},e}(),lv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyUp=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=t.endContainer,n=i.lastChild;if(13===e.event.which&&t.startContainer===i&&3!==i.nodeType){var r=ct("p");if(r.innerHTML="<br>","BR"===n.nodeName&&n.previousSibling&&"TABLE"===n.previousSibling.nodeName)i.replaceChild(r,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0);else{var o=this.parent.nodeSelection.getSelectionNodeCollectionBr(t)[0];"BR"===o.nodeName&&o.previousSibling&&"TABLE"===o.previousSibling.nodeName&&(i.replaceChild(r,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0))}}},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,n=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,r=Tt(i,"pre"),o=Tt(n,"pre");if(!g(r)&&!g(r.parentElement)&&"LI"===r.parentElement.tagName)return;if((g(r)&&!g(o)||!g(r)&&g(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0)),13===e.event.which&&!g(r)&&!g(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var s=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],a=t.startContainer.childNodes[t.endOffset-1],l=t.startContainer;if(g(s)||g(a)||!g(s.nextSibling)||"BR"!==s.nodeName||"BR"!==a.nodeName)if(8203===l.textContent.charCodeAt(0)&&1===l.textContent.length||0===l.textContent.length){for(;"PRE"!==l.parentElement.nodeName&&(1===l.textContent.length||0===l.textContent.length);)l=l.parentElement;!g(l.previousSibling)&&"BR"===l.previousSibling.nodeName&&g(l.nextSibling)?this.paraFocus(l.parentElement):this.isNotEndCursor(r,t)}else this.isNotEndCursor(r,t);else this.paraFocus(t.startContainer)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),"g");if(!g(e.endContainer.textContent.match(t))){var i=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,i)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e){var t=ct("p");t.innerHTML="<br>",this.parent.domNode.insertAfter(t,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0),wt(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var i=new av,n=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);var r=ct("br");e.childNodes[t.endOffset].parentElement.insertBefore(r,e.childNodes[t.endOffset])}else{var o=i.SplitNode(t,e,!0);this.insertMarker(e,t);var s=e.previousElementSibling;"PRE"===s.tagName&&(s.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),wt(e))}this.setCursorPosition(n,e)},e.prototype.setCursorPosition=function(e,t){var i=!1,n=this.parent.editableElement.querySelector(".tempSpan"),r=n.parentElement;if(""===n.parentNode.textContent?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),e)if(i)r===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),wt(n)):this.focusSelectionParent(n,r);else{var o=ct("br");this.parent.domNode.insertAfter(o,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),wt(n)}else i?this.focusSelectionParent(n,r):wt(n)},e.prototype.focusSelectionParent=function(e,t){wt(e),t.innerHTML="â€‹",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var i=ct("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(i,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=!1;this.parent.editableElement!==t.endContainer||g(this.parent.editableElement.children[t.endOffset-1])||"TABLE"!==this.parent.editableElement.children[t.endOffset-1].tagName||t.collapsed||(i=!0);var n=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(n);for(var r=this.parent.domNode.blockNodes(),o=0;o<r.length;o++){var s=void 0,a=void 0;if("blockquote"===e.subCommand.toLowerCase()?(s=this.getParentNode(r[o]),a=this.parent.domNode.isList(s)||"TABLE"===s.tagName?s.outerHTML:s.innerHTML):a=(s=r[o]).innerHTML,!(e.subCommand.toLowerCase()===s.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!g(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||g(s.parentNode)||"LI"===s.tagName&&"pre"!==e.subCommand.toLowerCase()||"TABLE"===s.tagName&&"pre"===e.subCommand.toLowerCase())){this.cleanFormats(s,e.subCommand);var l="pre"===e.subCommand.toLowerCase()&&"pre"===s.tagName.toLowerCase()?"p":e.subCommand,h=this.parent.domNode.createTagString(l,s,a.replace(/>\s+</g,"><"));"LI"===s.tagName?(s.innerHTML="",s.insertAdjacentHTML("beforeend",h)):this.parent.domNode.replaceWith(s,h)}}this.preFormatMerge();var p=this.parent.editableElement.querySelector("."+iv),d=this.parent.editableElement.querySelector("."+nv);g(p)||g(d)||(p=p.lastChild,d=d.lastChild),n=this.parent.domNode.saveMarker(n,null),Uy()&&Ky(this.parent.editableElement,e.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,p,d,0,d.textContent.length):n.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll("PRE");if(!g(e))for(var t=0;t<e.length;t++){var i=e[t].previousElementSibling;g(i)||"PRE"!==i.tagName||(i.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),wt(e[t]))}},e.prototype.cleanFormats=function(e,t){var i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(var n=0;n<i.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;n++)e.style.removeProperty(i[n])},e}(),hv=function(){function e(){}return e.Insert=function(e,t,i,n){var r,o;"string"==typeof t?((o=document.createElement("div")).innerHTML=t,r=n?o:o.firstChild):n&&(g(t)||g(t.classList)||!t.classList.contains("pasteContent"))?((o=document.createElement("div")).appendChild(t),r=o):r=t;var s=new $y,a=new av,l=s.getRange(e),h=l.startOffset===l.endOffset&&0===l.startOffset&&l.startContainer===l.endContainer,p=l.collapsed,d=this.getNodeCollection(l,s),c="table"===r.nodeName.toLowerCase()?this.closestEle(d[0].parentNode,i):d[0];if(n||!g(r)&&!g(r.classList)&&r.classList.contains("pasteContent"))this.pasteInsertHTML(d,r,l,s,a,e,p,c,i);else if(i!==l.startContainer&&(!p&&(c.nodeType!==Node.ELEMENT_NODE||-1===Zy.indexOf(c.tagName.toLocaleLowerCase()))||"table"===r.nodeName.toLowerCase()&&c&&-1===Zy.indexOf(c.tagName.toLocaleLowerCase()))){var u=a.GetSpliceNode(l,c),f=u.previousSibling,m=u.parentNode;if(1===d.length)s.setSelectionContents(e,u),l=s.getRange(e);else{var y=a.GetSpliceNode(l,d[d.length-1].parentElement);y=g(y)?u:y,s.setSelectionText(e,u,y,0,3===y.nodeType?y.textContent.length:y.childNodes.length),l=s.getRange(e)}l.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(i);for(var v=0;v<d.length;v++)if(3!==d[v].nodeType&&null!=d[v].parentNode){if("IMG"===d[v].nodeName)continue;d[v].parentNode.removeChild(d[v])}if(f)sv.AppendBefore(r,f,!0);else{for(var b=null;m!==i&&m.firstChild&&""===m.textContent.trim();){b=m,m=m.parentNode}null!==b&&(m=b),m.firstChild&&(m!==i||"TABLE"===r.nodeName&&h&&m===l.startContainer&&m===l.endContainer)?""===m.textContent.trim()&&m!==i?(sv.AppendBefore(r,m,!1),wt(m)):sv.AppendBefore(r,m.firstChild,!1):m.appendChild(r)}"IMG"===r.nodeName?this.imageFocus(r,s,e):3!==r.nodeType?s.setSelectionText(e,r,r,0,r.childNodes.length):s.setSelectionText(e,r,r,0,r.textContent.length)}else{if(l.deleteContents(),h&&""===l.startContainer.textContent&&(l.startContainer.innerHTML=""),me.isIE){var w=e.createDocumentFragment();w.appendChild(r),l.insertNode(w)}else l.insertNode(r);3!==r.nodeType&&r.childNodes.length>0?s.setSelectionText(e,r,r,1,1):"IMG"===r.nodeName?this.imageFocus(r,s,e):3!==r.nodeType?s.setSelectionContents(e,r):s.setSelectionText(e,r,r,r.textContent.length,r.textContent.length)}},e.pasteInsertHTML=function(e,t,i,n,r,o,s,a,l){var h,p,d,c,u=i.startOffset===i.endOffset&&i.startContainer===i.endContainer;if(u&&i.startContainer===l&&""===l.textContent){var f=this.getImmediateBlockNode(e[e.length-1],l);n.setSelectionText(o,f,f,0,0),i=n.getRange(o)}l!==i.startContainer&&(!s&&(a.nodeType!==Node.ELEMENT_NODE||-1===Zy.indexOf(a.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&a&&-1===Zy.indexOf(a.tagName.toLocaleLowerCase()))&&(p=g((c=r.GetSpliceNode(i,a)).previousSibling)?c.parentNode.previousSibling:c.previousSibling,1===e.length?(n.setSelectionContents(o,c),i=n.getRange(o),d=!0):(h=g(h=r.GetSpliceNode(i,e[e.length-1].parentElement))?c:h,n.setSelectionText(o,c,h,0,3===h.nodeType?h.textContent.length:h.childNodes.length),i=n.getRange(o),d=!1));var m=!1;this.removingComments(t);for(var y,v=t.childNodes,b=0;b<v.length;b++)if(Qy.indexOf(v[b].nodeName.toLocaleLowerCase())>=0){m=!0;break}var w=document.createDocumentFragment();if(m){this.insertTempNode(i,t,e,r,l);var C=!0,S=void 0,x=void 0,k=void 0;for(i.deleteContents();t.firstChild;)if("#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim())if("#text"===t.firstChild.nodeName&&C||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&C){if(y=t.firstChild,g(t.previousElementSibling)){var T=ct("p");t.parentElement.insertBefore(T,t)}t.previousElementSibling.appendChild(t.firstChild)}else y=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(S?(k.appendChild(t.firstChild),w.appendChild(k)):((x=ct("p")).appendChild(t.firstChild),w.appendChild(x)),k=x,S=!0):(w.appendChild(t.firstChild),S=!1),C=!1;else wt(t.firstChild);t.parentNode.replaceChild(w,t)}else if(u){var D=ct("span",{className:"tempSpan"});for(i.insertNode(D);t.firstChild;)y=t.firstChild,w.appendChild(t.firstChild);D.parentNode.replaceChild(w,D)}else{for(;t.firstChild;)y=t.firstChild,w.appendChild(t.firstChild);d?c.parentNode.replaceChild(w,c):(i.deleteContents(),wt(h),g(p)?l.appendChild(w):p.parentNode.appendChild(w))}"#text"===y.nodeName?this.placeCursorEnd(y,t,n,o,l):this.cursorPos(y,t,n,o,l)},e.placeCursorEnd=function(e,t,i,n,r){for(e="BR"===e.nodeName?e.previousSibling:e;!g(e)&&"#text"!==e.nodeName&&"IMG"!==e.nodeName&&"BR"!==e.nodeName;)e=e.lastChild;"IMG"===(e=g(e)?t:e).nodeName?this.imageFocus(e,i,n):i.setSelectionText(n,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(r)},e.getNodeCollection=function(e,t){var i=[];return e.startOffset===e.endOffset&&e.startContainer===e.endContainer&&"TD"===e.startContainer.nodeName?i.push(e.startContainer.childNodes[e.endOffset]):i=t.getInsertNodeCollection(e),i},e.insertTempNode=function(e,t,i,n,r){if(e.startContainer!==r||g(e.startContainer.childNodes[e.endOffset-1])||"TABLE"!==e.startContainer.childNodes[e.endOffset-1].nodeName)if(e.startContainer!==r||g(e.startContainer.childNodes[e.endOffset])||"TABLE"!==e.startContainer.childNodes[e.endOffset].nodeName){var o=this.getImmediateBlockNode(i[i.length-1],r);if("TD"===o.nodeName||"TH"===o.nodeName){var s=ct("span",{className:"tempSpan"});e.insertNode(s),s.parentNode.replaceChild(t,s)}else{var a=n.GetSpliceNode(e,o);a.parentNode.replaceChild(t,a)}}else e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset]);else g(e.startContainer.childNodes[e.endOffset-1].nextSibling)?e.startContainer.appendChild(t):e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset-1].nextSibling)},e.cursorPos=function(e,t,i,n,r){e.classList.add("lastNode"),r.innerHTML=function(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var i=document.createElement("div");if(t.childNodes.length>0){for(var n=void 0,r=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||Gy.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(n?r.appendChild(t.firstChild):(o=ct("p"),i.appendChild(o),o.appendChild(t.firstChild)),r=o,n=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?wt(t.firstChild):(i.appendChild(t.firstChild),n=!1);for(var s=i.querySelectorAll("table"),a=0;a<s.length;a++){"0"===s[a].getAttribute("border")&&s[a].removeAttribute("border");for(var l=s[a].querySelectorAll("td"),h=0;h<l.length;h++)l[h].style.removeProperty("border");s[a].classList.contains("e-rte-table")||s[a].classList.add("e-rte-table")}var p=i.querySelectorAll("img");for(a=0;a<p.length;a++)p[a].classList.contains("e-rte-image")||p[a].classList.add("e-rte-image"),p[a].classList.contains("e-imginline")||p[a].classList.contains("e-imgbreak")||p[a].classList.add("e-imginline")}return i.innerHTML}(r.innerHTML),e=r.querySelector(".lastNode"),this.placeCursorEnd(e,t,i,n,r),e.classList.remove("lastNode"),0===e.classList.length&&e.removeAttribute("class")},e.imageFocus=function(e,t,i){var n=document.createTextNode(" ");e.parentNode.insertBefore(n,e.nextSibling),t.setSelectionText(i,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(Qy.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.findDetachEmptyElem=function(e){return g(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"true"!==e.parentElement.contentEditable?this.findDetachEmptyElem(e.parentElement):e},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName&&"SOURCE"!==t[i].tagName){var n=this.findDetachEmptyElem(t[i]);g(n)||wt(n)}},e.closestEle=function(e,t){for(var i=e;i&&1===i.nodeType;){if(i.parentNode===t||!g(i.parentNode.tagName)&&-1!==Jy.indexOf(i.parentNode.tagName.toLocaleLowerCase()))return i;i=i.parentNode}return null},e.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],e}(),pv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-LINK",this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!g(e.item.selectParent)&&e.item.selectParent.length>0&&Tt(e.item.selectParent[0],"a");if(t=g(t)?!g(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,g(t)||"A"!==t.tagName){var i=(new $y).getRange(this.parent.currentDocument),n=!!g(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(i.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||i.collapsed||n){var r=this.createAchorNode(e);if(r.innerText=""===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),hv.Insert(this.parent.currentDocument,r,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode){l="Paste"===e.item.action?r.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,r.childNodes[0],r.childNodes[0],l,r.childNodes[0].textContent.length)}else{var o=e.item.selection.range.startContainer;o.textContent=this.removeText(o.textContent,e.item.text)}}else this.createLinkNode(e)}else{var s=t,a="";if(g(e.item.url)||s.setAttribute("href",e.item.url),g(e.item.title)||s.setAttribute("title",e.item.title),g(e.item.text)||""===e.item.text||(a=s.innerText,s.innerText=e.item.text),g(e.item.target)?s.removeAttribute("target"):s.setAttribute("target",e.item.target),a===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,s,s,1,1),e.item.selection.restore();else{var l="Paste"===e.item.action?s.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,s.childNodes[0],s.childNodes[0],l,s.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,i,n=new $y,r=new av,o=n.getRange(this.parent.currentDocument),s=this.getSelectionNodes(n.getNodeCollection(o)),a=n.save(o,this.parent.currentDocument),l=[],h=[],p=[],d=[],c=[],u=0;u<s.length;u++)s[u]=r.GetSpliceNode(o,s[u]),l[u]=s[u];for(var g=0;g<l.length;g++){var f=!0;for(t=l[g];!0===f;){if("A"===t.parentElement.nodeName){var m=t.parentElement;t.parentElement.parentElement.insertBefore(m.firstChild,m),t.parentElement.removeChild(m)}this.isBlockNode(t.parentElement)||0===l.length||0===g||g===l.length-1?(h[g]=t,f=!1):t=t.parentElement}}g=0;for(var y=0;g<h.length;g++)if(0===g&&(c[y]=h[g]),h.length>1&&g<h.length-1){if(h[g].parentElement===h[g+1].parentElement&&h[g]===h[g+1])continue;c[y+1]=h[g+1],y++}var v=0;d[v]=this.createAchorNode(e);for(g=0;g<c.length;g++)if(0===g&&(i=c[g].cloneNode(!0),d[g].appendChild(i)),g<c.length-1)if(c[g].parentNode===c[g+1].parentNode){var b=c[g+1].cloneNode(!0);d[v].appendChild(b)}else d[v+=1]=this.createAchorNode(e),i=c[g+1].cloneNode(!0),d[v].appendChild(i);this.parent.nodeSelection.setRange(document,a.range);g=0;for(var w=0,C=0;g<=c.length;g++)0===g&&(c[g].parentNode.insertBefore(d[w],c[g].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,d[w]),p[C]=c[g],C++),g<c.length-1&&(c[g].parentNode===c[g+1].parentNode?(p[C]=c[g+1],C++):(w+=1,c[g+1].parentNode.insertBefore(d[w],c[g+1]),p[C]=c[g+1],C++));for(g=0;g<p.length;g++)p[g].parentNode&&p[g].parentNode.removeChild(p[g])},e.prototype.createAchorNode=function(e){var t=ct("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:g(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return g(e.item.target)||t.setAttribute("target",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&""!==e[t].textContent.trim()||"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&Qy.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]===t&&(i.splice(n,1),n--);return i.join(" ")+" "},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var i=Tt(e.item.selectParent[0],"a"),n=i||e.item.selectParent[0],r=n.parentNode,o=[];n.firstChild;null)o.push(r.insertBefore(n.firstChild,n));r.removeChild(n),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var s=0;s<t.length;s++)for(var a=t[s].querySelectorAll("a"),l=0;l<a.length;l++)document.getSelection().containsNode(a[l],!0)&&(a[l].outerHTML=a[l].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),dv=function(){function e(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("alignment-type",this.applyAlignment,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){return[Tt(e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode,"td,th")]},e.prototype.applyAlignment=function(e){var t="Table"===e.value,i=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(t)Dt(this.getTableNode(i)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(n);for(var r=this.parent.domNode.blockNodes(),o=0;o<r.length;o++){Dt(r[o],{"text-align":this.alignments[e.subCommand]})}var s=this.parent.domNode.getImageTagInSelection();for(o=0;o<s.length;o++){var a=[];a.push(s[o]),this.parent.imgObj.imageCommand({item:{selectNode:a},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),n=this.parent.domNode.saveMarker(n),Uy()&&Ky(this.parent.editableElement,e.selector),n.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(i):this.parent.domNode.blockNodes()})},e}(),cv=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("indent-type",this.applyIndents,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(i);for(var n=this.parent.domNode.blockNodes(),r=n.slice(),o=[],s=0;s<r.length;s++)"LI"!==r[s].tagName&&"LI"===r[s].parentNode.tagName?(n.splice(n.indexOf(r[s]),1),o.push(r[s].parentNode)):"LI"===r[s].tagName&&(n.splice(n.indexOf(r[s]),1),o.push(r[s]));o.length>0&&this.parent.observer.notify("keydown-handler",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0});for(s=0;s<n.length;s++){var a=n[s],l=a.style.marginLeft,h=void 0;"Indent"===e.subCommand?(h=""===l?this.indentValue+"px":parseInt(l,null)+this.indentValue+"px",a.style.marginLeft=h):(h=""===l||"0px"===l?"":parseInt(l,null)-this.indentValue+"px",a.style.marginLeft=h)}this.parent.editableElement.focus(),Uy()&&Ky(this.parent.editableElement,e.selector),(i=this.parent.domNode.saveMarker(i)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),uv="e-img-caption",gv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-IMAGE",this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}},e.prototype.createImage=function(e){var t=this;if(e.item.url=g(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,g(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){var i=ct("img");this.setStyle(i,e),g(e.item.selection)||e.item.selection.restore(),g(e.selector)||"pasteCleanupModule"!==e.selector?hv.Insert(this.parent.currentDocument,i,this.parent.editableElement):e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[i]})}else{var n=e.item.selectParent[0];this.setStyle(n,e)}if(e.callBack&&(g(e.selector)||!g(e.selector)&&"pasteCleanupModule"!==e.selector)){var r="Replace"===e.value?e.item.selectParent[0]:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0].previousElementSibling;r.addEventListener("load",(function(){e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[r]})}))}},e.prototype.setStyle=function(e,t){g(t.item.url)||e.setAttribute("src",t.item.url),e.setAttribute("class","e-rte-image"+(g(t.item.cssClass)?"":" "+t.item.cssClass)),g(t.item.altText)||e.setAttribute("alt",t.item.altText),g(t.item.width)||g(t.item.width.width)||e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),g(t.item.height)||g(t.item.height.height)||e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),g(t.item.width)||g(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),g(t.item.width)||g(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),g(t.item.height)||g(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),g(t.item.height)||g(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.insertImageLink=function(e){var t=ct("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),g(e.item.target)||t.setAttribute("target",e.item.target),hv.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){var i=xt(".e-img-wrap",t),n=xt(".e-img-inner",t),r=n.cloneNode(!0);wt(xt("a",t)),wt(n),i.appendChild(e.item.insertElement),i.appendChild(r)}else wt(t),me.isIE&&e.item.selection.restore(),hv.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,g(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute("target"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)},e.prototype.removeImage=function(e){Tt(e.item.selectNode[0],"a")?"A"!==e.item.selectNode[0].parentElement.nodeName||g(e.item.selectNode[0].parentElement.innerText)?wt(Tt(e.item.selectNode[0],"a")):wt(e.item.selectNode[0]):g(Tt(e.item.selectNode[0],"."+uv))?wt(e.item.selectNode[0]):wt(Tt(e.item.selectNode[0],"."+uv)),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height="",t.style.width="",t.width=e.item.width,t.height=e.item.height,this.callBack(e)},e.prototype.imageCaption=function(e){hv.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ut([t],"e-rte-image"),g(Tt(t,"."+uv))||(gt([Tt(t,"."+uv)],"e-imgright"),ut([Tt(t,"."+uv)],"e-imgleft")),"A"===t.parentElement.nodeName?(gt([t.parentElement],"e-imgright"),ut([t.parentElement],"e-imgleft")):ut([t],"e-imgleft"),this.callBack(e)},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ut([t],"e-rte-image"),g(Tt(t,"."+uv))||(gt([Tt(t,"."+uv)],"e-imgleft"),gt([Tt(t,"."+uv)],"e-imgright"),ut([Tt(t,"."+uv)],"e-imgcenter")),"A"===t.parentElement.nodeName?(gt([t.parentElement],"e-imgleft"),gt([t.parentElement],"e-imgright"),ut([t.parentElement],"e-imgcenter"),ut([t],"e-imgcenter")):ut([t],"e-imgcenter"),this.callBack(e)},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ut([t],"e-rte-image"),g(Tt(t,"."+uv))||(gt([Tt(t,"."+uv)],"e-imgleft"),ut([Tt(t,"."+uv)],"e-imgright")),"A"===t.parentElement.nodeName?(gt([t.parentElement],"e-imgleft"),ut([t.parentElement],"e-imgright")):ut([t],"e-imgright"),this.callBack(e)},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ut([t],"e-rte-image"),ut([t],"e-imginline"),g(Tt(t,"."+uv))||(gt([Tt(t,"."+uv)],"e-imgbreak"),gt([Tt(t,"."+uv)],"e-imgcenter"),gt([Tt(t,"."+uv)],"e-imgleft"),gt([Tt(t,"."+uv)],"e-imgright"),ut([Tt(t,"."+uv)],"e-caption-inline")),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),ut([t],"e-imgbreak"),ut([t],"e-rte-image"),g(Tt(t,"."+uv))||(gt([Tt(t,"."+uv)],"e-caption-inline"),gt([Tt(t,"."+uv)],"e-imgcenter"),gt([Tt(t,"."+uv)],"e-imgleft"),gt([Tt(t,"."+uv)],"e-imgright"),ut([Tt(t,"."+uv)],"e-imgbreak")),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),fv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-TABLE",this.createTable,this),this.parent.observer.on("INSERT-ROW",this.insertRow,this),this.parent.observer.on("INSERT-COLUMN",this.insertColumn,this),this.parent.observer.on("DELETE-ROW",this.deleteRow,this),this.parent.observer.on("DELETE-COLUMN",this.deleteColumn,this),this.parent.observer.on("REMOVE-TABLE",this.removeTable,this),this.parent.observer.on("TABLE-HEADER",this.tableHeader,this),this.parent.observer.on("TABLE_VERTICAL_ALIGN",this.tableVerticalAlign,this)},e.prototype.createTable=function(e){var t=ct("table",{className:"e-rte-table"}),i=ct("tbody");g(e.item.width.width)||(t.style.width=this.calculateStyleValue(e.item.width.width)),g(e.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),g(e.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth));for(var n=parseInt(e.item.width.width,10)/e.item.columns,r=0;r<e.item.row;r++){for(var o=ct("tr"),s=0;s<e.item.columns;s++){var a=ct("td");a.appendChild(ct("br")),a.style.width=n+"%",o.appendChild(a)}i.appendChild(o)}return t.appendChild(i),e.item.selection.restore(),hv.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),e.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector("td"),t.querySelector("td"),0,0),t.querySelector("td").classList.add("e-cell-select"),e.callBack&&e.callBack({requestType:"Table",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.removeEmptyNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),t=0;t<e.length;t++)wt(e[t]);var i=this.parent.editableElement.querySelectorAll("li *:empty");for(t=0;t<i.length;t++)wt(i[t]),i.length===t+1&&(i=this.parent.editableElement.querySelectorAll("li *:empty"),t=-1);var n=this.parent.editableElement.querySelectorAll("li:empty");for(t=0;t<n.length;t++)wt(n[t])},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.insertRow=function(e){var t=e.item.selection.range.startContainer;if("th"!==(t=3===t.nodeType?t.parentNode:t).nodeName.toLowerCase()||"InsertRowBefore"!==e.item.subCommand){var i,n=Tt(t,"tr");if("th"!==t.nodeName.toLowerCase()){i=Tt(t,"tr").cloneNode(!0);var r=Array.prototype.slice.call(i.querySelectorAll("td"));Array.prototype.forEach.call(r,(function(e){e.innerHTML="",e.appendChild(ct("br")),e.removeAttribute("class")}))}else{var o=n.childNodes;i=ct("tr");for(var s=0;s<o.length;s++){var a=ct("td");a.appendChild(ct("br")),i.appendChild(a)}}"InsertRowBefore"===e.item.subCommand?n.parentElement.insertBefore(i,n):this.insertAfter(i,n),e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.insertColumn=function(e){var t=e.item.selection.range.startContainer;t="TD"!==(t=3===t.nodeType?t.parentNode:t).nodeName?Tt(t,"td,th"):t;for(var i,n=Tt(t,"tr"),r=Tt(n,"table").rows,o=Array.prototype.slice.call(n.querySelectorAll("th,td")).indexOf(t),s=parseInt(e.item.width,10)/(n.querySelectorAll("td,th").length+1),a=0;a<Tt(n,"table").querySelectorAll("th,td").length;a++)Tt(n,"table").querySelectorAll("th,td")[a].style.width=s+"%";for(var l=0;l<r.length;l++){var h=(i=r[l].querySelectorAll("th,td")[o]).cloneNode(!0);h.innerHTML="",h.appendChild(ct("br")),h.removeAttribute("class"),"InsertColumnLeft"===e.item.subCommand?i.parentElement.insertBefore(h,i):this.insertAfter(h,i)}e.item.selection.setSelectionText(this.parent.currentDocument,t,t,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.deleteColumn=function(e){var t=e.item.selection.range.startContainer,i=(t=3===t.nodeType?t.parentNode:t).cellIndex,n=Tt(t,"table"),r=Tt(t,"tr"),o=Tt(r,"table").rows;if(1===r.querySelectorAll("th,td").length)e.item.selection.restore(),wt(Tt(t.parentElement,"table"));else for(var s=0;s<o.length;s++)o[s].deleteCell(i),me.isIE&&(e.item.selection.setSelectionText(this.parent.currentDocument,n.querySelector("td"),n.querySelector("td"),0,0),n.querySelector("td, th").classList.add("e-cell-select"));if(e.callBack){var a=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if("TD"!==a.nodeName){var l=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,h=a.children[l];this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,h,0)}e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.deleteRow=function(e){var t=e.item.selection.range.startContainer,i=(t=3===t.nodeType?t.parentNode:t).parentNode.rowIndex,n=Tt(t,"table");1===n.rows.length?(e.item.selection.restore(),wt(Tt(t.parentElement,"table"))):("TH"===t.tagName?wt(n.querySelector("thead")):n.deleteRow(i),e.item.selection.setSelectionText(this.parent.currentDocument,n.querySelector("td"),n.querySelector("td"),0,0),n.querySelector("td, th").classList.add("e-cell-select")),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.removeTable=function(e){var t=e.item.selection.range.startContainer,i=Tt((t=3===t.nodeType?t.parentNode:t).parentElement,"table");i&&(e.item.selection.restore(),wt(i)),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableHeader=function(e){var t=!1,i=e.item.selection.range.startContainer,n=Tt((i=3===i.nodeType?i.parentNode:i).parentElement,"table");if([].slice.call(n.childNodes).forEach((function(e){"THEAD"===e.nodeName&&(t=!0)})),n&&!t)for(var r=n.querySelector("tr").childElementCount,o=n.createTHead().insertRow(0),s=0;s<r;s++){var a=ct("th");a.appendChild(ct("br")),o.appendChild(a)}else n.deleteTHead();e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableVerticalAlign=function(e){"AlignTop"===e.item.subCommand?e.item.tableCell.style.verticalAlign="top":"AlignMiddle"===e.item.subCommand?e.item.tableCell.style.verticalAlign="middle":e.item.tableCell.style.verticalAlign="bottom",e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),mv=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,i){var n=this.getFormatParent(e,t,i);return null!==n&&n!==i?n:null},e.prototype.getFormatParent=function(e,t,i){do{e=e.parentNode}while(e&&e!==i&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,i){switch(i){case"bold":return e.isBold(t);case"italic":return e.isItalic(t);case"underline":return e.isUnderline(t);case"strikethrough":return e.isStrikethrough(t);case"superscript":return e.isSuperscript(t);case"subscript":return e.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==["strong","b"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"bold"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==["em","i"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"italic"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==["u"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"underline"!==e.style.textDecoration)},e.isStrikethrough=function(e){return-1!==["del","strike"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"line-through"!==e.style.textDecoration)},e.isSuperscript=function(e){return-1!==["sup"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==["sub"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var i=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isBackgroundColor=function(t){var i=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontSize=function(t){var i=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontName=function(t){var i=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var"],e}(),yv=function(){function e(){}return e.applyFormat=function(e,t,i,n,r){if(["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1){"backgroundcolor"===t&&""===n&&(n="transparent");var o,s=new $y,a=new av,l=new mv,h=s.getRange(e),p=s.save(h,e),d=h.collapsed?s.getSelectionNodeCollection(h):s.getSelectionNodeCollectionBr(h),c=!1,u=!1,g=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;if(h.collapsed)if(d.length>0)c=!0,h=a.GetCursorRange(e,h,d[0]);else if("td"!==h.startContainer.nodeName.toLowerCase()){var f=this.insertCursorNode(e,s,h,l,a,t,n,i);s.endContainer=s.startContainer=s.getNodeArray(f,!0),s.endOffset=s.startOffset=1}o=h.collapsed;for(var m=0;m<d.length;m++){var y=l.getFormattedNode(d[m],t,i);0===m&&null===y&&(u=!0),d[m]=null===y||u&&!g?this.insertFormat(e,d,m,y,o,u,g,h,a,t,n):this.removeFormat(d,m,y,o,u,g,h,a,t,n,s),s=this.applySelection(d,s,a,m,c)}Uy()&&Ky(i,r),p.restore()}},e.insertCursorNode=function(e,t,i,n,r,o,s,a){var l=t.getNodeCollection(i),h=l.length>0?n.getFormattedNode(l[0],o,a):null,p=null;return h?(p=l[0],sv.unwrap(h)):p=this.getInsertNode(e,i,o,s).firstChild,p},e.removeFormat=function(e,t,i,n,r,o,s,a,l,h,p){var d,c,u=null;if(s.startContainer!==s.endContainer||0!==s.startOffset||s.endOffset!==s.startContainer.length){var f=[],m=e[t];do{f.push(p.getIndex(m)),m=m.parentNode}while(m&&m!==i);if("BR"!==e[t].nodeName&&(m=u=n&&i.textContent.length-1===s.startOffset?a.SplitNode(s,i,!0):a.GetSpliceNode(s,i)),n){for(var y=u;null!==y.firstChild&&3!==y.firstChild.nodeType;null)y=y.firstChild;y.innerHTML="&#8203;",e[t]=y.firstChild}else{for(;m&&m.childNodes.length>0&&f.length-1>=0&&m.childNodes.length>f[f.length-1];)m=m.childNodes[f[f.length-1]],f.pop();if("BR"!==e[t].nodeName)if(3!==m.nodeType||n&&""===m.nodeValue){var v=document.createElement("div");v.innerHTML="&#8203;",3!==m.nodeType?(m.insertBefore(v.firstChild,m.firstChild),e[t]=m.firstChild):(m.parentNode.insertBefore(v.firstChild,m),e[t]=m.previousSibling,m.parentNode.removeChild(m))}else e[t]=m}}if("backgroundcolor"===l&&(d=i.style.fontSize),"fontsize"===l){var b=Tt(e[t].parentElement,"span[style*=background-color]");g(b)||(c=b.style.backgroundColor)}var w=i.getAttribute("style"),C=i.tagName,S=sv.unwrap(i);if(S.length>0&&o){for(var x=0;x<S.length;x++)S[x]=sv.Wrap(S[x],this.GetFormatNode(l,h,C,w));var k=e[t].parentElement;if(g(d)||""===d||(k.style.fontSize=d),g(c)||""===c||(k.style.backgroundColor=c),"backgroundcolor"===l&&!g(d)&&""!==d&&k.parentElement.innerHTML===k.outerHTML){var T=k.parentElement;T.parentElement.insertBefore(k,T),wt(T)}if("fontsize"===l){for(var D=e[t].parentElement,E=e[t].parentElement;!g(E)&&"li"!==E.tagName.toLowerCase();)D=E=E.parentElement;g(D)||"li"!==D.tagName.toLowerCase()||D.textContent.trim()!==e[t].textContent.trim()||(D.style.fontSize=h)}}return e[t]},e.insertFormat=function(e,t,i,n,r,o,s,a,l,h,p){if(r)if("uppercase"!==h&&"lowercase"!==h){d=this.getInsertNode(e,a,h,p);t[i]=d.firstChild,l.position=1}else l.position=a.startOffset;else if(null===n&&o||s){if("BR"!==t[i].nodeName&&(t[i]=l.GetSpliceNode(a,t[i]),t[i].textContent=l.TrimLineBreak(t[i].textContent)),"uppercase"===h||"lowercase"===h)t[i].textContent="uppercase"===h?t[i].textContent.toLocaleUpperCase():t[i].textContent.toLocaleLowerCase();else if(!0!==s||""!==p){var d=this.GetFormatNode(h,p);if("fontsize"===h){for(var c=t[i].parentElement,u=t[i].parentElement;!g(u)&&"li"!==u.tagName.toLowerCase();)c=u=u.parentElement;g(c)||"li"!==c.tagName.toLowerCase()||c.textContent.trim()!==t[i].textContent.trim()||(c.style.fontSize=p),t[i]=this.applyStyles(t,i,d);var f=Tt(t[i].parentElement,"span[style*=background-color]");g(f)||(t[i].parentElement.style.backgroundColor=f.style.backgroundColor)}else t[i]=this.applyStyles(t,i,d)}}else t[i]=l.GetSpliceNode(a,t[i]);return t[i]},e.applyStyles=function(e,t,i){return e[t]=t===e.length-1||"BR"===e[t].nodeName?sv.Wrap(e[t],i):sv.WrapBefore(e[t],i,!0),e[t]=this.getChildNode(e[t],i),e[t]},e.getInsertNode=function(e,t,i,n){var r=this.GetFormatNode(i,n);if(r.innerHTML="&#8203;",me.isIE){var o=e.createDocumentFragment();o.appendChild(r),t.insertNode(o)}else t.insertNode(r);return r},e.getChildNode=function(e,t){return null==e&&(t.innerHTML="&#8203;",e=t.firstChild),e},e.applySelection=function(e,t,i,n,r){return 1!==e.length||r?1===e.length&&r?(t.startContainer=t.getNodeArray(e[n],!0),t.endContainer=t.startContainer,t.startOffset=i.position,t.endOffset=i.position):0===n?(t.startContainer=t.getNodeArray(e[n],!0),t.startOffset=0):n===e.length-1&&(t.endContainer=t.getNodeArray(e[n],!1),t.endOffset=e[n].textContent.length):(t.startContainer=t.getNodeArray(e[n],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[n].textContent.length),t},e.GetFormatNode=function(e,t,i,n){var r;switch(e){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.textDecoration="underline",r;case"strikethrough":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.textDecoration="line-through",r;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.color=t,r.style.textDecoration="inherit",r;case"fontname":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.fontFamily=t,r;case"fontsize":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.fontSize=t,r;default:return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.backgroundColor=t,r}},e.updateStyles=function(e,t,i){null!==i&&"SPAN"===t&&e.setAttribute("style",i)},e}(),vv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("selection-type",this.applySelection,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){e.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),yv.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){yv.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),bv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("inserthtml-type",this.applyHtml,this)},e.prototype.applyHtml=function(e){if(hv.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0),"pasteCleanup"===e.subCommand){var t=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(t),n=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),r=[].slice.call(n);e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:i,imgElem:r})}else e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),wv=function(){function e(){}return e.clear=function(e,t,i){var n=new $y,r=new av,o=n.getRange(e),s=o.collapsed,a=n.getInsertNodeCollection(o),l=n.save(o,e);if(!s){var h=r.GetSpliceNode(o,a[0]);if(1===a.length)n.setSelectionContents(e,h),o=n.getRange(e);else{for(var p=1,d=a[a.length-p];"BR"===a[a.length-p].nodeName;)p++,d=a[a.length-p];var c=r.GetSpliceNode(o,d);n.setSelectionText(e,h,c,0,3===c.nodeType?c.textContent.length:c.childNodes.length),o=n.getRange(e)}var u=n.getNodeCollection(o),g=u.slice();this.clearInlines(n.getSelectionNodes(g),g,n.getRange(e),r,t),this.reSelection(e,l,u),o=n.getRange(e);var f=(u=n.getNodeCollection(o)).slice();this.clearBlocks(e,f,t,r,n),Uy()&&Ky(t,i),this.reSelection(e,l,u)}},e.reSelection=function(e,t,i){var n=t.getInsertNodes(i);t.startContainer=t.getNodeArray(n[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(n[n.length-1],!1,e);var r=n[n.length-1];t.endOffset=3===r.nodeType?r.textContent.length:r.childNodes.length,t.restore()},e.clearBlocks=function(e,t,i,n,r){for(var o=[],s=0;s<t.length;s++)this.BLOCK_TAGS.indexOf(t[s].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[s])?o.push(t[s]):this.BLOCK_TAGS.indexOf(t[s].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[s].parentNode)&&i!==t[s].parentNode&&o.push(t[s].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,n,r)},e.spliceParent=function(e,t){for(var i=0;i<e.length;i++)for(var n=e[i].childNodes.length,r=0;r<n;r++)if(t.indexOf(e[i].childNodes[r])>0&&e[i].childNodes[r].childNodes.length>0&&(t=this.spliceParent([e[i].childNodes[r]],t)[1]),t.indexOf(e[i].childNodes[r])<=-1&&""!==e[i].childNodes[r].textContent.trim()){for(var o=0;o<n;o++)t.indexOf(e[i].childNodes[o])>-1&&t.splice(t.indexOf(e[i].childNodes[o]),1);r=e[i].childNodes.length;var s=e.indexOf(e[i].parentNode),a=t.indexOf(e[i].parentNode);s>-1&&e.splice(s,1),a>-1&&t.splice(a,1);var l=t.indexOf(e[i]);l>-1&&t.splice(l,1),e.splice(i,1),i--}return[e,t]},e.removeChild=function(e,t){var i=t.childNodes.length;if(i>0)for(var n=0;n<i;n++)e.indexOf(t.childNodes[n])>-1&&(e=this.removeChild(e,t.childNodes[n])).splice(e.indexOf(t.childNodes[n]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,i,n){for(var r=0;r<t.length;r++)if(this.NONVALID_TAGS.indexOf(t[r].nodeName.toLowerCase())>-1&&t[r].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[r].parentNode.nodeName.toLowerCase())>-1&&(n.setSelectionText(e,t[r],t[r],0,t[r].childNodes.length),sv.unwrap(i.GetSpliceNode(n.getRange(e),t[r].parentNode))),"p"!==t[r].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[r].nodeName.toLowerCase())<0&&"p"!==t[r].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[r].nodeName.toLocaleLowerCase()||"li"===t[r].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[r].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[r].childNodes.length&&"p"===t[r].childNodes[0].nodeName.toLocaleLowerCase()||sv.Wrap(t[r],e.createElement("p"));var o=sv.unwrap(t[r]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(sv.Wrap(t[r],e.createElement("p")),sv.unwrap(t[r]));for(var s=0;s<o.length;s++)if(this.NONVALID_TAGS.indexOf(o[s].nodeName.toLowerCase())>-1)this.unWrap(e,[o[s]],i,n);else if(this.BLOCK_TAGS.indexOf(o[s].nodeName.toLocaleLowerCase())>-1&&"p"!==o[s].nodeName.toLocaleLowerCase()){var a=this.removeParent([o[s]]);this.unWrap(e,a,i,n)}else this.BLOCK_TAGS.indexOf(o[s].nodeName.toLocaleLowerCase())>-1&&o[s].parentNode.nodeName.toLocaleLowerCase()===o[s].nodeName.toLocaleLowerCase()?sv.unwrap(o[s]):this.BLOCK_TAGS.indexOf(o[s].nodeName.toLocaleLowerCase())>-1&&"p"===o[s].nodeName.toLocaleLowerCase()&&(sv.Wrap(o[s],e.createElement("p")),sv.unwrap(o[s]))}else sv.Wrap(t[r],e.createElement("p")),sv.unwrap(t[r])},e.clearInlines=function(e,t,i,n,r){for(var o=0;o<e.length;o++)e[o].parentNode&&mv.inlineTags.indexOf(e[o].parentNode.nodeName.toLocaleLowerCase())>-1&&(n.GetSpliceNode(i,e[o].parentNode),this.removeInlineParent(e[o].parentNode))},e.removeInlineParent=function(e){for(var t=sv.unwrap(e),i=0;i<t.length;i++)1===t[i].parentNode.childNodes.length&&mv.inlineTags.indexOf(t[i].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[i].parentNode):mv.inlineTags.indexOf(t[i].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[i])},e.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],e.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],e.IGNORE_PARENT_TAGS=["ul","ol","table"],e.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],e}(),Cv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-type",this.applyClear,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyClear=function(e){"ClearFormat"===e.subCommand&&(wv.clear(this.parent.currentDocument,this.parent.editableElement,e.selector),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),Sv=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=g(t)?30:t.undoRedoSteps,this.undoRedoTimer=g(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=y(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){this.parent.observer.off("keyup-handler",this.keyUp),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction)},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=(new $y).getRange(this.parent.currentDocument),i=(new $y).save(t,this.parent.currentDocument),n={text:this.parent.editableElement.innerHTML,range:i};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===i.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===i.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===i.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===n.text.trim()||(this.undoRedoStack.push(n),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=i,this.parent.editableElement.focus(),Uy()&&Ky(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),Uy()&&Ky(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),xv=function(){function e(e){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.removableElements=["o:p","style"],this.listContents=[],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("ms_word_cleanup_plugin",this.wordCleanup,this)},e.prototype.wordCleanup=function(e){var t=e.allowedStylePropertiesArray,i=[],n=e.args.clipboardData.getData("text/HTML"),r=e.args.clipboardData.getData("text/rtf"),o=ct("p");o.setAttribute("id","MSWord-Content"),o.innerHTML=n;/class='?Mso|style='[^ ]*\bmso-/i.test(n)||/class="?Mso|style="[^ ]*\bmso-/i.test(n)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(n)?(this.imageConversion(o,r),n=n.replace(/<img[^>]+>/i,""),g((i=this.cleanUp(o,i))[0])||"UL"===i[0].parentElement.tagName||"OL"===i[0].parentElement.tagName||this.listConverter(i),this.styleCorrection(o,t),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.breakLineAddition(o),this.removeClassName(o),e.callBack(o.innerHTML)):e.callBack(o.innerHTML)},e.prototype.imageConversion=function(e,t){this.checkVShape(e);var i=e.querySelectorAll("img"),n=[],r=[],o=[];if(i.length>0){for(var s=0;s<i.length;s++)n.push(i[s].getAttribute("src")),o.push(i[s].getAttribute("src").split("/")[i[s].getAttribute("src").split("/").length-1].split(".")[0]);var a=this.hexConversion(t);for(s=0;s<a.length;s++)r.push(this.convertToBase64(a[s]));for(s=0;s<i.length;s++)i[s].setAttribute("src",r[s]),i[s].setAttribute("id","msWordImg-"+o[s])}},e.prototype.checkVShape=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)switch(t[i].nodeName){case"V:SHAPETYPE":wt(t[i]);break;case"V:SHAPE":if("V:IMAGEDATA"===t[i].firstElementChild.nodeName){var n=t[i].firstElementChild.getAttribute("src"),r=ct("img");r.setAttribute("src",n),t[i].parentElement.insertBefore(r,t[i]),wt(t[i])}}},e.prototype.convertToBase64=function(e){var t=this.conHexStringToBytes(e.hex),i=this.conBytesToBase64(t);return e.type?"data:"+e.type+";base64,"+i:null},e.prototype.conBytesToBase64=function(e){for(var t="",i=e.length,n=0;n<i;n+=3){var r=e.slice(n,n+3),o=r.length,s=[];if(o<3)for(var a=o;a<3;a++)r[a]=0;s[0]=(252&r[0])>>2,s[1]=(3&r[0])<<4|r[1]>>4,s[2]=(15&r[1])<<2|(192&r[2])>>6,s[3]=63&r[2];for(a=0;a<4;a++)t+=a<=o?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s[a]):"="}return t},e.prototype.conHexStringToBytes=function(e){for(var t=[],i=e.length/2,n=0;n<i;n++)t.push(parseInt(e.substr(2*n,2),16));return t},e.prototype.hexConversion=function(e){for(var t,i=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,n=new RegExp("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g"),r=e.match(n),o=[],s=0;s<r.length;s++)if(i.test(r[s])){if(-1!==r[s].indexOf("\\pngblip"))t="image/png";else{if(-1===r[s].indexOf("\\jpegblip"))continue;t="image/jpeg"}o.push({hex:t?r[s].replace(i,"").replace(/[^\da-fA-F]/g,""):null,type:t})}return o},e.prototype.removeClassName=function(e){for(var t=e.querySelectorAll("*[class]"),i=0;i<t.length;i++)t[i].removeAttribute("class")},e.prototype.breakLineAddition=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)if(0===t[i].children.length&&"&nbsp;"===t[i].innerHTML&&"&nbsp;"===t[i].innerHTML&&!t[i].closest("li")){var n=this.findDetachElem(t[i]),r=ct("br");g(n.parentElement)||(n.parentElement.insertBefore(r,n),wt(n))}},e.prototype.findDetachElem=function(e){return g(e.parentElement)||""!==e.parentElement.textContent.trim()||"TD"===e.parentElement.tagName?e:this.findDetachElem(e.parentElement)},e.prototype.removeUnwantedElements=function(e){for(var t=e.innerHTML,i=0;i<this.removableElements.length;i++){var n=new RegExp("<"+this.removableElements[i]+">","g"),r=new RegExp("</"+this.removableElements[i]+">","g");t=(t=t.replace(n,"")).replace(r,"")}e.innerHTML=t,e.querySelectorAll(":empty")},e.prototype.findDetachEmptyElem=function(e){return g(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"MSWord-Content"!==e.parentElement.getAttribute("id")&&g(e.parentElement.querySelector("img"))?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName){var n=this.findDetachEmptyElem(t[i]);g(n)||wt(n)}},e.prototype.styleCorrection=function(e,t){var i=e.querySelectorAll("style");if(i.length>0){var n=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),r=g(n)?null:this.findStyleObject(n),o=Object.keys(r),s=o.map((function(e){return r[e]}));s=this.removeUnwantedStyle(s,t),this.filterStyles(e,t);for(var a=void 0,l=0;l<o.length;l++){if(""===o[l].split(".")[0])a=e.getElementsByClassName(o[l].split(".")[1]);else{if(1===o[l].split(".").length&&o[l].split(".")[0].indexOf("@")>=0)continue;a=1===o[l].split(".").length&&o[l].split(".")[0].indexOf("@")<0?e.getElementsByTagName(o[l]):e.querySelectorAll(o[l])}for(var h=0;h<a.length;h++){var p=a[h].getAttribute("style");if(g(p)||""===p.trim())a[h].setAttribute("style",s[l]);else{for(var d=s[l].split(";"),c=0;c<d.length;c++)p.indexOf(d[c].split(":")[0])>=0&&(d.splice(c,1),c--);s[l]=d.join(";")+";";var u=s[l]+p;a[h].setAttribute("style",u)}}}}},e.prototype.filterStyles=function(e,t){for(var i=e.querySelectorAll("*[style]"),n=0;n<i.length;n++){for(var r=i[n].getAttribute("style").split(";"),o="",s=0;s<r.length;s++)t.indexOf(r[s].split(":")[0].trim())>=0&&(o+=r[s]+";");i[n].setAttribute("style",o)}},e.prototype.removeUnwantedStyle=function(e,t){for(var i=0;i<e.length;i++){var n=e[i].split(";");e[i]="";for(var r=0;r<n.length;r++)t.indexOf(n[r].split(":")[0])>=0&&(e[i]+=n[r]+";")}return e},e.prototype.findStyleObject=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i],r=n.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=n.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");r=r.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),r=r.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(var s=r.split(", "),a=0;a<s.length;a++)t[s[a]]=o}return t},e.prototype.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.prototype.cleanUp=function(e,t){for(var i,n=[],r=e.querySelectorAll("*"),o=0;o<r.length;o++)-1===this.ignorableNodes.indexOf(r[o].nodeName)||3===r[o].nodeType&&""===r[o].textContent.trim()?n.push(r[o]):(r[o].className&&-1!==r[o].className.toLowerCase().indexOf("msolistparagraph")&&1!==r[o].childElementCount&&t.push(r[o]),!i||-1===this.blockNode.indexOf(r[o].nodeName.toLowerCase())||r[o].className&&-1!==r[o].className.toLowerCase().indexOf("msolistparagraph")||t.push(null),-1!==this.blockNode.indexOf(r[o].nodeName.toLowerCase())&&(i=!(!r[o].className||-1===r[o].className.toLowerCase().indexOf("msolistparagraph"))));return t.length&&null!==t[t.length-1]&&t.push(null),t},e.prototype.listConverter=function(e){for(var t,i,n=[],r=[],o="",s=0;s<e.length;s++)if(null!==e[s]){t=(o=e[s].getAttribute("style"))&&-1!==o.indexOf("level")?parseInt(o.charAt(o.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(e[s]);var a=void 0;if(!g(this.listContents[0])){a=this.listContents[0].trim().length>1?"ol":"ul";for(var l=[],h=1;h<this.listContents.length;h++)l.push(this.listContents[h]);r.push({listType:a,content:l,nestedLevel:t})}}else n.push({content:this.makeConversion(r),node:e[s-1]}),r=[];for(i=e.shift();i;){for(var p=[],d=0;d<n.length;d++)if(n[d].node===i){for(var c=0;c<n[d].content.childNodes.length;c++)p.push(n[d].content.childNodes[c]);for(c=0;c<p.length;c++)i.parentElement.insertBefore(p[c],i);break}i.remove(),(i=e.shift())||(i=e.shift())}},e.prototype.makeConversion=function(e){for(var t,i,n,r=ct("div"),o=1,s=0,a=0;a<e.length;a++){var l=ct("p");if(l.innerHTML=e[a].content.join(" "),1===e[a].nestedLevel&&0===s&&e[a].content)r.appendChild(t=ct(e[a].listType)),(i=ct("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);else if(e[a].nestedLevel===o)i.parentElement.tagName.toLowerCase()===e[a].listType?(i.parentElement.appendChild(i=ct("li")),i.appendChild(l)):(t=ct(e[a].listType),i.parentElement.parentElement.appendChild(t),(i=ct("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()));else if(e[a].nestedLevel>o)if(g(i))r.appendChild(t=ct(e[a].listType)),(i=ct("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);else{for(var h=0;h<e[a].nestedLevel-o;h++)i.appendChild(t=ct(e[a].listType)),i=ct("li",{styles:"list-style-type: none;"}),t.appendChild(i);i.appendChild(l),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel),t.childNodes[0].style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel)}else if(1===e[a].nestedLevel)r.lastChild.tagName.toLowerCase()===e[a].listType?t=r.lastChild:r.appendChild(t=ct(e[a].listType)),(i=ct("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);else for(n=i;n.parentElement;)if((n=n.parentElement).attributes.getNamedItem("level")){if(parseInt(n.attributes.getNamedItem("level").textContent,null)===e[a].nestedLevel){(i=ct("li")).appendChild(l),n.appendChild(i);break}if(e[a].nestedLevel>parseInt(n.attributes.getNamedItem("level").textContent,null)){n.appendChild(t=ct(e[a].listType)),(i=ct("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[a].listType,e[a].nestedLevel);break}}o=e[a].nestedLevel,s++}return r},e.prototype.getListStyle=function(e,t){return t=t>0?t-1:t,"ol"===e?t<this.olData.length?this.olData[t]:this.olData[0]:t<this.ulData.length?this.ulData[t]:this.ulData[0]},e.prototype.getListContent=function(e){var t="";""!==e.firstElementChild.textContent.trim()||g(e.firstElementChild.firstElementChild)||"IMG"!==e.firstElementChild.firstElementChild.nodeName?(t=e.firstElementChild.textContent.trim(),this.listContents.push(t)):(t=e.innerHTML.trim(),this.listContents.push(""),this.listContents.push(t)),wt(e.firstElementChild),this.listContents.push(e.innerHTML)},e}(),kv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text-type",this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);hv.Insert(this.parent.currentDocument,t),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Tv=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new $y,this.domNode=new rv(this.editableElement,this.currentDocument),this.observer=new U(this),this.listObj=new ov(this),this.formatObj=new lv(this),this.alignmentObj=new dv(this),this.indentsObj=new cv(this),this.linkObj=new pv(this),this.imgObj=new gv(this),this.selectionObj=new vv(this),this.inserthtmlObj=new bv(this),this.insertTextObj=new kv(this),this.clearObj=new Cv(this),this.tableObj=new fv(this),this.undoRedoManager=new Sv(this,e.options),this.msWordPaste=new xv(this),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this)},e.prototype.onWordPaste=function(e){this.observer.notify("ms_word_cleanup_plugin",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.execCommand=function(e,t,i,n,r,o,s){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:i,callBack:n,selector:s});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:n,selector:s,exeValue:o});break;case"alignments":this.observer.notify("alignment-type",{subCommand:t,event:i,callBack:n,selector:s,value:o});break;case"indents":this.observer.notify("indent-type",{subCommand:t,event:i,callBack:n,selector:s});break;case"links":this.observer.notify("INSERT-LINK",{command:e,value:t,item:o,event:i,callBack:n});break;case"images":this.observer.notify("INSERT-IMAGE",{command:e,value:t,item:o,event:i,callBack:n,selector:s});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("INSERT-TABLE",{item:o,event:i,callBack:n});break;case"insertrowbefore":case"insertrowafter":this.observer.notify("INSERT-ROW",{item:o,event:i,callBack:n});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify("INSERT-COLUMN",{item:o,event:i,callBack:n});break;case"deleterow":this.observer.notify("DELETE-ROW",{item:o,event:i,callBack:n});break;case"deletecolumn":this.observer.notify("DELETE-COLUMN",{item:o,event:i,callBack:n});break;case"tableremove":this.observer.notify("REMOVE-TABLE",{item:o,event:i,callBack:n});break;case"tableheader":this.observer.notify("TABLE-HEADER",{item:o,event:i,callBack:n});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify("TABLE_VERTICAL_ALIGN",{item:o,event:i,callBack:n})}break;case"font":case"style":case"effects":case"casing":this.observer.notify("selection-type",{subCommand:t,event:i,callBack:n,value:r,selector:s});break;case"inserthtml":this.observer.notify("inserthtml-type",{subCommand:t,callBack:n,value:r});break;case"inserttext":this.observer.notify("insert-text-type",{subCommand:t,callBack:n,value:r});break;case"clear":this.observer.notify("clear-type",{subCommand:t,event:i,callBack:n,selector:s});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:n,selector:s})}},e}(),Dv=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ev=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),u(i,i,t,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,t.options),i}return Dv(t,e),t.prototype.initialize=function(){this.keyConfig=ev},t.prototype.updateFormatter=function(e,t,i){e&&t&&(this.editorManager=new Tv({document:t,editableElement:e,options:i}))},t}(Xy),Rv={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},Pv=function(){function e(){}return e.get=function(e,t,i,n,r,o){for(var s=JSON.parse(JSON.stringify(Rv)),a=JSON.parse(JSON.stringify(Rv)),l=new $y,h=o?[o]:l.getNodeCollection(l.getRange(e)),p=h.length,d=0;d<h.length;d++)("BR"!==h[d].nodeName&&3!==h[d].nodeType||p>1&&3===h[d].nodeType&&""===h[d].textContent.trim())&&(h.splice(d,1),d--);for(d=0;d<h.length;d++)s=this.getFormatParent(e,s,h[d],t,i,n,r),(0===d&&s.bold||!s.bold)&&(a.bold=s.bold),(0===d&&s.insertcode||!s.insertcode)&&(a.insertcode=s.insertcode),(0===d&&s.italic||!s.italic)&&(a.italic=s.italic),(0===d&&s.underline||!s.underline)&&(a.underline=s.underline),(0===d&&s.strikethrough||!s.strikethrough)&&(a.strikethrough=s.strikethrough),(0===d&&s.superscript||!s.superscript)&&(a.superscript=s.superscript),(0===d&&s.subscript||!s.subscript)&&(a.subscript=s.subscript),(0===d&&s.fontcolor||!s.fontcolor)&&(a.fontcolor=s.fontcolor),(0===d&&s.fontname||!s.fontname)&&(a.fontname=s.fontname),(0===d&&s.fontsize||!s.fontsize)&&(a.fontsize=s.fontsize),(0===d&&s.backgroundcolor||!s.backgroundcolor)&&(a.backgroundcolor=s.backgroundcolor),(0===d&&s.orderedlist||!s.orderedlist)&&(a.orderedlist=s.orderedlist),(0===d&&s.unorderedlist||!s.unorderedlist)&&(a.unorderedlist=s.unorderedlist),(0===d&&s.alignments||!s.alignments)&&(a.alignments=s.alignments),(0===d&&s.formats||!s.formats)&&(a.formats=s.formats),(0===d&&s.createlink||!s.createlink)&&(a.createlink=s.createlink),s=JSON.parse(JSON.stringify(Rv));return a},e.getFormatParent=function(e,t,i,n,r,o,s){if(n.contains(i)||3===i.nodeType&&3!==n.nodeType&&n.contains(i.parentNode))do{t=this.isFormattedNode(e,t,i,r,o,s),i=i.parentNode}while(i&&i!==n);return t},e.isFormattedNode=function(e,t,i,n,r,o){return t.bold||(t.bold=mv.isBold(i)),t.italic||(t.italic=mv.isItalic(i)),t.underline||(t.underline=mv.isUnderline(i)),t.strikethrough||(t.strikethrough=mv.isStrikethrough(i)),t.superscript||(t.superscript=mv.isSuperscript(i)),t.subscript||(t.subscript=mv.isSubscript(i)),t.fontcolor||(t.fontcolor=this.isFontColor(e,i)),t.fontname||(t.fontname=this.isFontName(e,i,o)),t.fontsize||(t.fontsize=this.isFontSize(i,r)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(i)),t.orderedlist||(t.orderedlist=this.isOrderedList(i)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(i)),t.alignments||(t.alignments=this.isAlignment(i)),t.formats||(t.formats=this.isFormats(i,n),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(i)),t},e.isFontColor=function(e,t){var i=t.style&&t.style.color;return null!=i&&""!==i||3===t.nodeType||(i=this.getComputedStyle(e,t,"color")),null!==i&&""!==i&&void 0!==i?i:null},e.isLink=function(e){return"a"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},e.isFontSize=function(e,t){var i=e.style&&e.style.fontSize;return null!==i&&""!==i&&void 0!==i&&(null==t||t.indexOf(i)>-1)?i:null},e.isFontName=function(e,t,i){var n=t.style&&t.style.fontFamily;null!=n&&""!==n||3===t.nodeType||(n=this.getComputedStyle(e,t,"font-family"));var r=null;return null!==n&&""!==n&&void 0!==n&&(null==i||i.filter((function(e,t){var i=new RegExp(n,"i");(e.replace(/"/g,"").replace(/ /g,"")===n.replace(/"/g,"").replace(/ /g,"")||e.search(i)>-1)&&(r=t)}))&&null!==r)?null!==r?i[r]:n.replace(/"/g,""):null},e.isOrderedList=function(e){return"ol"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return"ul"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},e.isFormats=function(e,t){return null==t&&Qy.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,i){return e.defaultView.getComputedStyle(t,null).getPropertyValue(i)},e}(),Iv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off("toolbar-refresh",this.onRefreshHandler),this.parent.off("destroy",this.removeEventListener)},e.prototype.onRefreshHandler=function(e){if(!this.parent.readonly){var t=[],i=[],n=[];this.parent.fontSize.items.forEach((function(e){t.push(e.value)})),this.parent.fontFamily.items.forEach((function(e){i.push(e.value)})),this.parent.format.types.forEach((function(e){n.push(e.value.toLocaleLowerCase())})),this.toolbarStatus=Pv.get(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel(),n,t,i,e.documentNode),this.parent.notify("toolbar-updated",this.toolbarStatus)}},e}(),Mv=function(){function e(e,t){this.parent=e,this.serviceLocator=t}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement("div",{className:"e-rte-content",id:this.parent.getID()+"rte-view"}),i=qf(e.value,e);this.editableElement=this.parent.createElement("div",{className:"e-content",id:this.parent.getID()+"_rte-edit-view",attrs:{contenteditable:"true"},innerHTML:i}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getEditPanel=function(){return this.editableElement},e.prototype.getText=function(){return this.getEditPanel().innerText},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},e}(),Lv=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ov=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lv(t,e),t.prototype.renderPanel=function(){var e=this.parent,t="\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset='utf-8' /> \n            <style>\n                @charset \"UTF-8\";\n                body {\n                    font-family: \"Roboto\", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft {float: left;margin: 0 5px 0 0;text-align: left;}\n                .e-imgright {float: right;margin: 0 0 0 5px;text-align: right;}\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                table { border-collapse: collapse; empty-cells: show;}\n                table td,table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;}\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n            </style>\n        </head>"+('<body spellcheck="false" autocorrect="off" contenteditable="true">'+qf(e.value,e)+"</body></html>"),i=this.parent.createElement("iframe",{innerHTML:t,id:this.parent.getID()+"_rte-view",className:"e-rte-content",styles:"display:block;"});this.setPanel(i),e.element.appendChild(i),i.contentDocument.body.id=this.parent.getID()+"_rte-edit-view",i.contentDocument.body.setAttribute("aria-owns",this.parent.getID()),i.contentDocument.open(),t=this.setThemeColor(t,{color:"#333"}),i.contentDocument.write(t),i.contentDocument.close(),e.enableRtl&&this.contentPanel.contentDocument.body.setAttribute("class","e-rtl")},t.prototype.setThemeColor=function(e,t){var i=getComputedStyle(this.parent.element,".e-richtexteditor").getPropertyValue("color");return e.replace(t.color,i)},t.prototype.getEditPanel=function(){return g(this.contentPanel.contentDocument)?this.parent.inputElement:this.contentPanel.contentDocument.body},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t}(Mv),Av=function(){function e(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?u(this.tools,Ng,zf(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Ng}return e.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(Pu.Toolbar)},e.prototype.renderColorPickerInput=function(e){var t=this;this.initializeInstance();var i,n,r=e.containerType,o=e.container;Fg.forEach((function(s){if(-1!==If(s,e.items))switch(s){case"fontcolor":i=t.parent.getID()+"_"+r+"_FontColor_Target";var a=t.parent.createElement("input");a.id=i,a.classList.add("e-rte-fontcolor-element"),document.body.appendChild(a),n={cssClass:t.tools[s.toLocaleLowerCase()].icon+" e-rte-elements e-icons",value:t.tools[s.toLocaleLowerCase()].value,command:t.tools[s.toLocaleLowerCase()].command,subCommand:t.tools[s.toLocaleLowerCase()].subCommand,element:xt("#"+t.parent.getID()+"_"+r+"_FontColor",o),target:"#"+i},t.fontColorPicker=t.toolbarRenderer.renderColorPicker(n,"fontcolor"),t.fontColorDropDown=t.toolbarRenderer.renderColorPickerDropDown(n,"fontcolor",t.fontColorPicker);break;case"backgroundcolor":i=t.parent.getID()+"_"+r+"_BackgroundColor_Target";var l=t.parent.createElement("input");l.id=i,l.classList.add("e-rte-backgroundcolor-element"),document.body.appendChild(l),n={cssClass:t.tools[s.toLocaleLowerCase()].icon+" e-rte-elements e-icons",value:t.tools[s.toLocaleLowerCase()].value,command:t.tools[s.toLocaleLowerCase()].command,subCommand:t.tools[s.toLocaleLowerCase()].subCommand,element:xt("#"+t.parent.getID()+"_"+r+"_BackgroundColor",o),target:"#"+i},t.backgroundColorPicker=t.toolbarRenderer.renderColorPicker(n,"backgroundcolor"),t.backgroundColorDropDown=t.toolbarRenderer.renderColorPickerDropDown(n,"backgroundcolor",t.backgroundColorPicker)}}))},e.prototype.destroy=function(){this.removeEventListener(),this.destroyColorPicker()},e.prototype.destroyColorPicker=function(){var e;(this.fontColorPicker&&!this.fontColorPicker.isDestroyed&&this.fontColorPicker.destroy(),this.backgroundColorPicker&&!this.backgroundColorPicker.isDestroyed&&this.backgroundColorPicker.destroy(),this.fontColorDropDown&&!this.fontColorDropDown.isDestroyed)&&((e=this.fontColorDropDown.element.querySelector(".e-rte-color-content"))&&wt(e),this.fontColorDropDown.destroy());this.backgroundColorDropDown&&!this.backgroundColorDropDown.isDestroyed&&((e=this.backgroundColorDropDown.element.querySelector(".e-rte-color-content"))&&wt(e),this.backgroundColorDropDown.destroy())},e.prototype.setRtl=function(e){this.fontColorPicker&&(this.fontColorPicker.setProperties({enableRtl:e.enableRtl}),this.fontColorDropDown.setProperties({enableRtl:e.enableRtl})),this.backgroundColorPicker&&(this.backgroundColorPicker.setProperties({enableRtl:e.enableRtl}),this.backgroundColorDropDown.setProperties({enableRtl:e.enableRtl}))},e.prototype.addEventListener=function(){this.parent.on("toolbarRenderComplete",this.renderColorPickerInput,this),this.parent.on(Sg,this.setRtl,this),this.parent.on("destroy",this.destroy,this),this.parent.on("destroy-color-picker",this.destroyColorPicker,this),this.parent.on("model-changed",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=e.newProp,i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"fontColor":if(this.fontColorPicker)for(var r=0,o=Object.keys(t.fontColor);r<o.length;r++){switch(o[r]){case"default":this.fontColorPicker.setProperties({value:t.fontColor.default}),this.fontColorDropDown.element.querySelector("."+this.tools.fontcolor.icon).style.borderBottomColor=t.fontColor.default;break;case"mode":this.fontColorPicker.setProperties({mode:t.fontColor.mode});break;case"columns":this.fontColorPicker.setProperties({columns:t.fontColor.columns});break;case"colorCode":this.fontColorPicker.setProperties({presetColors:t.fontColor.colorCode});break;case"modeSwitcher":this.fontColorPicker.setProperties({modeSwitcher:t.fontColor.modeSwitcher})}}break;case"backgroundColor":if(this.backgroundColorPicker)for(var s=0,a=Object.keys(t.backgroundColor);s<a.length;s++){switch(a[s]){case"default":this.backgroundColorPicker.setProperties({value:t.backgroundColor.default}),this.backgroundColorDropDown.element.querySelector("."+this.tools.backgroundcolor.icon).style.borderBottomColor=t.backgroundColor.default;break;case"mode":this.backgroundColorPicker.setProperties({mode:t.backgroundColor.mode});break;case"columns":this.backgroundColorPicker.setProperties({columns:t.backgroundColor.columns});break;case"colorCode":this.backgroundColorPicker.setProperties({presetColors:t.backgroundColor.colorCode});break;case"modeSwitcher":this.backgroundColorPicker.setProperties({modeSwitcher:t.backgroundColor.modeSwitcher})}}}}},e.prototype.removeEventListener=function(){this.parent.off("toolbarRenderComplete",this.renderColorPickerInput),this.parent.off("destroy",this.destroy),this.parent.off(Sg,this.setRtl),this.parent.off("destroy-color-picker",this.destroyColorPicker),this.parent.off("model-changed",this.onPropertyChanged)},e}(),Bv=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("xhtmlValidation",this.enableXhtmlValidation,this),this.parent.on("destroy",this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off("xhtmlValidation",this.enableXhtmlValidation),this.parent.off("destroy",this.removeEventListener)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(this.clean(this.parent.inputElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.parent.inputElement.innerHTML=this.selfEncloseValidation(this.parent.inputElement.innerHTML),this.parent.setProperties({value:this.parent.inputElement.innerHTML},!0))},e.prototype.selfEncloseValidation=function(e){var t;e=e.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/&nbsp;/gi," ").replace(/ /g," ");for(var i=[],n=[],r=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],o=0;o<r.length;o++){for(t=r[o].exec(e);null!==t;)i.push(t[0].toString()),t=r[o].exec(e);n=i.slice(0);for(var s=0;s<i.length;s++)-1!==i[s].indexOf("/")&&i[s].lastIndexOf("/")===i[s].length-2||(i[s]=i[s].substr(0,i[s].length-1)+" /"+i[s].substr(i[s].length-1,i[s].length));for(var a=0;a<=i.length-1;a++)e=e.replace(n[a],i[a])}return e},e.prototype.AddRootElement=function(){if(1===this.parent.inputElement.childNodes.length&&"DIV"!==this.parent.inputElement.firstChild.nodeName||this.parent.inputElement.childNodes.length>1){for(var e=this.parent.createElement("div");this.parent.inputElement.childNodes.length>0;)e.appendChild(this.parent.inputElement.childNodes[0]);this.parent.inputElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];8===i.nodeType||"V:IMAGE"===i.nodeName?(e.removeChild(i),t--):1===i.nodeType&&this.clean(i)}return this.parent.inputElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.parent.inputElement.querySelectorAll("IMG"),t=e.length-1;t>=0;t--){if(!e[t].hasAttribute("alt"))e[t].setAttribute("alt","")}},e.prototype.removeTags=function(){for(var e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var i=this.parent.inputElement.querySelectorAll(t),n=0;n<i.length;n++)for(var r=i[n].querySelectorAll(e),o=r.length;o>0;o--)wt(r[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.parent.inputElement.querySelectorAll("u"),t=e.length-1;t>=0;t--){var i=this.parent.createElement("span");i.style.textDecoration="underline",i.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(i,e[t]),wt(e[t])}var n=this.parent.inputElement.querySelectorAll("strong");for(t=n.length-1;t>=0;t--){var r=this.parent.createElement("b");r.innerHTML=n[t].innerHTML,n[t].parentNode.insertBefore(r,n[t]),wt(n[t])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.parent.inputElement.firstChild&&3!==this.parent.inputElement.firstChild.nodeType)for(var t=0;t<this.parent.inputElement.childNodes.length;t++){var i=this.parent.inputElement.childNodes[t];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes()))for(var n=0;n<i.childNodes.length;n++){var r=i.childNodes[n];if(3!==r.nodeType&&"TABLE"!==r.nodeName&&"TBODY"!==r.nodeName&&"THEAD"!==r.nodeName&&"TH"!==r.nodeName&&"TR"!==r.nodeName&&"TD"!==r.nodeName&&r.hasAttribute(e)&&r.removeAttribute(e),r.hasChildNodes())for(var o=0;o<r.childNodes.length;o++)3!==r.childNodes[o].nodeType&&"TABLE"!==r.childNodes[o].nodeName&&"TBODY"!==r.childNodes[o].nodeName&&"THEAD"!==r.childNodes[o].nodeName&&"TH"!==r.childNodes[o].nodeName&&"TR"!==r.childNodes[o].nodeName&&"TD"!==r.childNodes[o].nodeName&&r.childNodes[o].hasAttribute(e)&&r.childNodes[o].removeAttribute(e)}}},e}(),Fv=function(){function e(e,t){this.rangeCollection=[],this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.xhtmlValidation=new Bv(e),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener()},e.prototype.sanitizeHelper=function(e){return e=function(e,t){if(t.enableHtmlSanitizer){var i=Oi.beforeSanitize();u(i,i,{cancel:!1,helper:null}),t.trigger("beforeSanitizeHtml",i),i.cancel&&!g(i.helper)?e=i.helper(e):i.cancel||(e=Oi.serializeValue(i,e))}return e}(e,this.parent)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.nodeSelectionObj=new $y,this.colorPickerModule=new Av(this.parent,this.locator),this.parent.on("initial-load",this.instantiateRenderer,this),this.parent.on("html-toolbar-click",this.onToolbarClick,this),this.parent.on(wg,this.onKeyDown,this),this.parent.on("render-color-picker",this.renderColorPicker,this),this.parent.on("initial-end",this.render,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.on("destroy",this.destroy,this),this.parent.on("selectAll",this.selectAll,this),this.parent.on("selectRange",this.selectRange,this),this.parent.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.on("selection-save",this.onSelectionSave,this),this.parent.on("selection-restore",this.onSelectionRestore,this),this.parent.on("readOnlyMode",this.updateReadOnly,this),this.parent.on(Cg,this.onPaste,this))},e.prototype.updateReadOnly=function(){this.parent.readonly?(St(this.parent.contentModule.getEditPanel(),{contenteditable:"false"}),ut([this.parent.element],"e-rte-readonly")):(St(this.parent.contentModule.getEditPanel(),{contenteditable:"true"}),gt([this.parent.element],"e-rte-readonly"))},e.prototype.onSelectionSave=function(){var e=this.contentRenderer.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},e.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.contentRenderer.getEditPanel().focus(),(g(e.items)||e.items)&&this.saveSelection.restore()},e.prototype.onKeyDown=function(e){if(9===e.args.keyCode&&this.parent.enableTabKey){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t);if("LI"!==i[0].nodeName&&!Tt(i[0],"li")&&!Tt(i[0],"table")||0!==t.startOffset)if(e.args.preventDefault(),e.args.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var n=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),n,n,0,n.textContent.length),hv.Insert(this.contentRenderer.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else hv.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()))}"space"!==e.args.action&&"enter"!==e.args.action||this.spaceLink(e.args)},e.prototype.onPaste=function(e){var t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=(this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),r=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=e.text.split("\n"),s="",a=0;a<o.length;a++)if(""===o[a].trim())s+="<p><br></p>";else{for(var l="",h=!0,p=o[a].split(" "),d=0;d<p.length;d++)""===p[d].trim()?l+=h?"&nbsp;":" ":(h=!1,l+=p[d]+" ");s+="<p>"+l.trim()+"</p>"}var c=this.parent.createElement("div");c.innerHTML=s;var u=c.querySelectorAll("p");for(a=0;a<u.length;a++){var f=u[a].innerHTML.split(" "),m="";for(d=0;d<f.length;d++)f[d].match(n)||f[d].match(r)?m+='<a className="e-rte-anchor" href="'+f[d]+'" title="'+f[d]+'">'+f[d]+" </a>":m+=f[d]+" ";u[a].innerHTML=m.trim()}g(this.parent.pasteCleanupModule)?this.parent.executeCommand("insertHTML",c):e.callBack(c.innerHTML)}},e.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t),n=t.startContainer.textContent.substr(0,t.endOffset),r=n.split(" "),o=r[r.length-1],s=t.startOffset-(n.length-r[r.length-1].length);o=o.slice(0,s);var a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==i[0].nodeName&&o.match(a)){var l=this.nodeSelectionObj.save(t,this.parent.contentModule.getDocument()),h={url:o.indexOf("http")>-1?o:"http://"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,h)}},e.prototype.onToolbarClick=function(e){var t,i,n,r=e.item,o=Tt(e.originalEvent.target,".e-rte-quick-popup");if(o&&!o.classList.contains("e-rte-inline-popup")){if("SourceCode"!==r.subCommand&&"Preview"!==r.subCommand&&"FontColor"!==r.subCommand&&"BackgroundColor"!==r.subCommand){Uy()&&"Images"===r.command&&this.nodeSelectionObj.restore();var s=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());t=this.nodeSelectionObj.save(s,this.parent.contentModule.getDocument()),i=this.nodeSelectionObj.getNodeCollection(s),n=this.nodeSelectionObj.getParentNodeCollection(s)}"Images"===r.command&&this.parent.notify("image-toolbar-action",{member:"image",args:e,selectNode:i,selection:t,selectParent:n}),"Links"===r.command&&this.parent.notify("link-toolbar-action",{member:"link",args:e,selectNode:i,selection:t,selectParent:n}),"Table"===r.command&&this.parent.notify("table-toolbar-action",{member:"table",args:e,selectNode:i,selection:t,selectParent:n})}else{var a=this.parent.element.querySelector("#"+this.parent.getID()+"_rtelink"),l=this.parent.element.querySelector("#"+this.parent.getID()+"_image");if("SourceCode"!==r.subCommand&&"Preview"!==r.subCommand&&"FontColor"!==r.subCommand&&"BackgroundColor"!==r.subCommand){s=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());g(a)&&g(l)&&(t=this.nodeSelectionObj.save(s,this.parent.contentModule.getDocument())),i=this.nodeSelectionObj.getNodeCollection(s),n=this.nodeSelectionObj.getParentNodeCollection(s)}switch(r.subCommand){case"Maximize":this.parent.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.notify("insertLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:n});break;case"RemoveLink":this.parent.notify("unLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:n});break;case"Print":this.parent.print();break;case"Image":this.parent.notify("insertImage",{member:"image",args:e,selectNode:i,selection:t,selectParent:n});break;case"CreateTable":this.parent.notify("createTable",{member:"table",args:e,selection:t});break;case"SourceCode":this.parent.notify("sourceCode",{member:"viewSource",args:e});break;case"Preview":this.parent.notify("updateSource",{member:"updateSource",args:e});break;case"FontColor":case"BackgroundColor":break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}}},e.prototype.renderColorPicker=function(e){this.colorPickerModule.renderColorPickerInput(e)},e.prototype.instantiateRenderer=function(){this.parent.iframeSettings.enable?this.renderFactory.addRenderer(Pu.Content,new Ov(this.parent,this.locator)):this.renderFactory.addRenderer(Pu.Content,new Mv(this.parent,this.locator))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.render),this.parent.off("model-changed",this.onPropertyChanged),this.parent.off("html-toolbar-click",this.onToolbarClick),this.parent.off("render-color-picker",this.renderColorPicker),this.parent.off("destroy",this.destroy),this.parent.off(wg,this.onKeyDown),this.parent.off("initial-load",this.instantiateRenderer),this.parent.off("selectAll",this.selectAll),this.parent.off("selectRange",this.selectRange),this.parent.off("getSelectedHtml",this.getSelectedHtml),this.parent.off("selection-save",this.onSelectionSave),this.parent.off("selection-restore",this.onSelectionRestore),this.parent.off("readOnlyMode",this.updateReadOnly),this.parent.off(Cg,this.onPaste))},e.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(Pu.Content);var e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if(g(this.parent.formatter)){var i=new Ev({currentDocument:this.contentRenderer.getDocument(),element:e,options:t});this.parent.setProperties({formatter:i},!0)}else this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t);this.parent.enableXhtml&&this.parent.notify("xhtmlValidation",{}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new Iv(this.parent)),this.parent.notify("bind-on-end",{})},e.prototype.onPropertyChanged=function(e){if(!g(e.newProp.formatter)){var t=this.contentRenderer.getEditPanel(),i={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),i)}},e.prototype.getModuleName=function(){return"htmlEditor"},e.prototype.selectAll=function(){var e=function e(t,i){var n=[];for(i=i.firstChild;i;i=i.nextSibling)3===i.nodeType?n.push(i):n=n.concat(e(t,i));return n}(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},e.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),e.range)},e.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())},e}(),Nv=function(){function e(e,t){this.parent=e,this.locator=t,this.isDOMElement=!1,this.renderFactory=this.locator.getService("rendererFactory"),this.contentRenderer=this.renderFactory.getRenderer(Pu.Content),this.popupRenderer=this.renderFactory.getRenderer(Pu.Popup),this.dropDownButtons=new qy(this.parent,this.locator),this.colorPickerObj=new Av(this.parent,this.locator)}return e.prototype.appendPopupContent=function(){this.toolbarElement=this.parent.createElement("div",{className:xg}),this.element.appendChild(this.toolbarElement)},e.prototype.render=function(e){var t;t="Image"===e.popupType?"e-rte-image-popup":"Inline"===e.popupType?"e-rte-inline-popup":"";var i=m(e.popupType+"_Quick_Popup");this.stringItems=e.toolbarItems,this.element=this.parent.createElement("div",{id:i,className:t+" e-rte-elements"}),this.element.setAttribute("aria-owns",this.parent.getID()),this.appendPopupContent(),this.createToolbar(e.toolbarItems,e.mode),this.popupRenderer.renderPopup(this),this.addEventListener()},e.prototype.createToolbar=function(e,t){this.quickTBarObj=new zy(this.parent,this.locator),this.quickTBarObj.render({container:"quick",target:this.toolbarElement,items:e,mode:t}),this.quickTBarObj.toolbarObj.refresh()},e.prototype.setPosition=function(e){var t,i,n=Tt(e.target,".e-img-caption"),r=g(n)?e.target:n;ut([this.toolbarElement],["e-remove-white-space"]);var o=r.offsetTop,s=window.pageYOffset+e.parentData.top;i=o-e.editTop>e.popHeight?s+e.tBarElementHeight+(o-e.editTop)-e.popHeight-5:e.editTop+e.editHeight-(o+r.offsetHeight)>e.popHeight?s+e.tBarElementHeight+(o-e.editTop)+r.offsetHeight+5:e.y,t=r.offsetWidth>e.popWidth?r.offsetWidth/2-e.popWidth/2+e.parentData.left+r.offsetLeft:e.parentData.left+r.offsetLeft,this.popupObj.position.X=t+e.popWidth>e.parentData.right?e.parentData.right-e.popWidth:t,this.popupObj.position.Y=i>=0?i:e.y+5,this.popupObj.dataBind(),gt([this.toolbarElement],["e-remove-white-space"])},e.prototype.checkCollision=function(e,t,i){var n,r,o=e.parentData.top,s=e.windowY+o+e.tBarElementHeight,a=[];a="document"===t?Hn(e.popup):Hn(e.popup,e.parentElement);for(var l=0;l<a.length;l++)switch(a[l]){case"top":r="document"===t?e.windowY:window.pageYOffset+o+e.tBarElementHeight;break;case"bottom":r="document"===t?"inline"===i?e.y-e.popHeight-10:e.windowHeight-(o+e.tBarElementHeight)>e.popHeight?s-e.windowHeight>e.popHeight?s+(e.windowHeight-o)-e.popHeight:s:e.windowY+(o+e.tBarElementHeight):"IMG"!==e.target.tagName?e.parentData.bottom+window.pageYOffset-e.popHeight-10:e.parentData.bottom+window.pageYOffset-e.popHeight-5;break;case"right":n="inline"===i?e.windowWidth-(e.popWidth+e.bodyRightSpace+10):e.x-e.popWidth;break;case"left":n="inline"===i?0:e.parentData.left}this.popupObj.position.X=n||this.popupObj.position.X,this.popupObj.position.Y=r||this.popupObj.position.Y,this.popupObj.dataBind()},e.prototype.showPopup=function(e,t,i){var n=this,r=S()?{cancel:!1,targetElement:i}:{popup:this.popupObj,cancel:!1,targetElement:i};this.parent.trigger("beforeQuickToolbarOpen",r,(function(r){if(!r.cancel){var o,s=void 0,a=void 0,l=window.getComputedStyle(document.body),h=parseFloat(l.marginRight.split("px")[0])+parseFloat(l.paddingRight.split("px")[0]),p=window.innerHeight,d=window.innerWidth,c=n.parent.element,u=!g(n.parent.getToolbar()),f=u&&n.parent.toolbarModule.getToolbarHeight(),m=u&&n.parent.toolbarModule.getExpandTBarPopHeight(),y=u?f+m:0;if(ut([n.element],["e-hide"]),me.isDevice&&!Of()&&ut([n.parent.getToolbar()],["e-hide"]),n.parent.iframeSettings.enable)s=(o=n.contentRenderer.getPanel().contentWindow).pageYOffset,a=o.innerHeight;else s=(o=Tt(i,".e-rte-content"))?o.scrollTop:0,a=o?o.offsetHeight:0;n.parent.inlineMode.enable||Tt(i,"table")||(n.parent.disableToolbarItem(n.parent.toolbarSettings.items),n.parent.enableToolbarItem(["Undo","Redo"])),vt([n.element],document.body),n.popupObj.position.X=e+20,n.popupObj.position.Y=t+(n.parent.iframeSettings.enable?35:20),n.popupObj.dataBind(),n.popupObj.element.classList.add("e-popup-open"),n.dropDownButtons.renderDropDowns({container:n.toolbarElement,containerType:"quick",items:n.stringItems}),n.colorPickerObj.renderColorPickerInput({container:n.toolbarElement,containerType:"quick",items:n.stringItems});var v={x:e,y:t,target:i,editTop:s,editHeight:a,popup:n.popupObj.element,popHeight:n.popupObj.element.offsetHeight,popWidth:n.popupObj.element.offsetWidth,parentElement:c,bodyRightSpace:h,windowY:window.pageYOffset,windowHeight:p,windowWidth:d,parentData:c.getBoundingClientRect(),tBarElementHeight:y};"IMG"===i.tagName&&n.setPosition(v),n.parent.inlineMode.enable||n.checkCollision(v,"parent",""),n.checkCollision(v,"document",n.parent.inlineMode.enable?"inline":""),n.popupObj.element.classList.remove("e-popup-open"),gt([n.element],["e-hide"]),n.popupObj.show({name:"ZoomIn",duration:me.isIE?250:400}),Dt(n.element,{maxWidth:n.parent.element.offsetWidth+"px"}),ut([n.element],["e-rte-pop"]),n.isDOMElement=!0}}))},e.prototype.hidePopup=function(){var e=this.parent.sourceCodeModule.getViewPanel();me.isDevice&&!Of()&&gt([this.parent.getToolbar()],["e-hide"]),g(this.parent.getToolbar())||this.parent.inlineMode.enable||(g(e)||"none"===e.style.display)&&this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.removeEleFromDOM(),this.isDOMElement=!1},e.prototype.addQTBarItem=function(e,t){this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(e,"toolbar"),t)},e.prototype.removeQTBarItem=function(e){this.quickTBarObj.toolbarObj.removeItems(e)},e.prototype.removeEleFromDOM=function(){var e=this.popupObj.element;if(this.isDOMElement){this.dropDownButtons.destroyDropDowns(),this.colorPickerObj.destroyColorPicker(),gt([this.element],["e-rte-pop"]),wt(e);var t=S()?{element:this.popupObj.element}:this.popupObj;this.parent.trigger("quickToolbarClose",t)}},e.prototype.updateStatus=function(e){Ff({args:e,dropDownModule:this.dropDownButtons,parent:this.parent,tbElements:kt(".e-toolbar-item",this.element),tbItems:this.quickTBarObj.toolbarObj.items},!0),xt(".e-rte-srctextarea",this.parent.element)||Vf(this.parent.getBaseToolbarObject(),this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},e.prototype.destroy=function(){this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.removeEleFromDOM()),this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("destroy",this.destroy,this),this.parent.on("model-changed",this.onPropertyChanged,this),this.parent.inlineMode.enable&&this.parent.on("toolbar-updated",this.updateStatus,this))},e.prototype.onPropertyChanged=function(e){if(!g(e.newProp.inlineMode))for(var t=0,i=Object.keys(e.newProp.inlineMode);t<i.length;t++){switch(i[t]){case"enable":e.newProp.inlineMode.enable?this.parent.on("toolbar-updated",this.updateStatus,this):this.parent.off("toolbar-updated",this.updateStatus)}}},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("destroy",this.destroy),this.parent.off("model-changed",this.onPropertyChanged),this.parent.inlineMode.enable&&this.parent.off("toolbar-updated",this.updateStatus))},e}(),Hv=function(){function e(e){this.parent=e}return e.prototype.quickToolbarOpen=function(){var e=S()?{element:this.popupObj.element}:this.popupObj;this.parent.trigger("quickToolbarOpen",e)},e.prototype.renderPopup=function(e){this.setPanel(e.element),this.renderPanel(),e.popupObj=new lr(e.element,{targetType:"relative",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)}),this.popupObj=e.popupObj,e.popupObj.hide()},e.prototype.renderPanel=function(){this.getPanel().classList.add("e-rte-quick-popup")},e.prototype.getPanel=function(){return this.popupPanel},e.prototype.setPanel=function(e){this.popupPanel=e},e}(),Vv=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.renderFactory.addRenderer(Pu.Popup,new Hv(this.parent)),this.addEventListener()}return e.prototype.formatItems=function(e){var t=[];return e.forEach((function(e){if("string"==typeof e)switch(e.toLocaleLowerCase()){case"open":t.push("openLink");break;case"edit":t.push("editLink");break;case"unlink":t.push("removeLink");break;default:t.push(e)}else t.push(e)})),t},e.prototype.getQTBarOptions=function(e,t,i,n){return{popupType:e,toolbarItems:i,mode:t,renderType:n}},e.prototype.createQTBar=function(e,t,i,n){if(i.length<1)return null;var r=new Nv(this.parent,this.locator);return r.render(this.getQTBarOptions(e,t,this.formatItems(i),n)),r},e.prototype.initializeQuickToolbars=function(){this.parent.quickToolbarModule=this,this.contentRenderer=this.renderFactory.getRenderer(Pu.Content),this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&Of()&&ye.add(this.contentRenderer.getDocument(),"selectionchange",this.selectionChangeHandler,this)},e.prototype.onMouseDown=function(e){this.parent.isBlur=!1,this.parent.isRTE=!0},e.prototype.renderQuickToolbars=function(){this.linkQTBar||this.imageQTBar||this.textQTBar||this.tableQTBar||(this.linkQTBar=this.createQTBar("Link","Scrollable",this.parent.quickToolbarSettings.link,Pu.LinkToolbar),this.renderFactory.addRenderer(Pu.LinkToolbar,this.linkQTBar),this.textQTBar=this.createQTBar("Text","Scrollable",this.parent.quickToolbarSettings.text,Pu.TextToolbar),this.renderFactory.addRenderer(Pu.TextToolbar,this.textQTBar),this.imageQTBar=this.createQTBar("Image","MultiRow",this.parent.quickToolbarSettings.image,Pu.ImageToolbar),this.renderFactory.addRenderer(Pu.ImageToolbar,this.imageQTBar),this.tableQTBar=this.createQTBar("Table","MultiRow",this.parent.quickToolbarSettings.table,Pu.TableToolbar),this.renderFactory.addRenderer(Pu.TableToolbar,this.tableQTBar),this.linkQTBar&&ye.add(this.linkQTBar.element,"mousedown",this.onMouseDown,this),this.imageQTBar&&ye.add(this.imageQTBar.element,"mousedown",this.onMouseDown,this),this.textQTBar&&ye.add(this.textQTBar.element,"mousedown",this.onMouseDown,this),this.tableQTBar&&ye.add(this.tableQTBar.element,"mousedown",this.onMouseDown,this))},e.prototype.renderInlineQuickToolbar=function(){!this.parent.inlineMode.enable||me.isDevice&&!Of()||(ut([this.parent.element],["e-rte-inline"]),this.inlineQTBar=this.createQTBar("Inline","MultiRow",this.parent.toolbarSettings.items,Pu.InlineToolbar),this.renderFactory.addRenderer(Pu.InlineToolbar,this.inlineQTBar),ye.add(this.inlineQTBar.element,"mousedown",this.onMouseDown,this))},e.prototype.showInlineQTBar=function(e,t,i){this.parent.readonly||this.inlineQTBar.showPopup(e,t,i)},e.prototype.hideInlineQTBar=function(){this.inlineQTBar&&!Mf(this.inlineQTBar.element,"e-popup-close")&&this.inlineQTBar.hidePopup()},e.prototype.hideQuickToolbars=function(){this.linkQTBar&&!Mf(this.linkQTBar.element,"e-popup-close")&&document.body.contains(this.linkQTBar.element)&&this.linkQTBar.hidePopup(),this.textQTBar&&!Mf(this.textQTBar.element,"e-popup-close")&&document.body.contains(this.textQTBar.element)&&this.textQTBar.hidePopup(),this.imageQTBar&&!Mf(this.imageQTBar.element,"e-popup-close")&&document.body.contains(this.imageQTBar.element)&&this.imageQTBar.hidePopup(),this.tableQTBar&&!Mf(this.tableQTBar.element,"e-popup-close")&&document.body.contains(this.tableQTBar.element)&&this.tableQTBar.hidePopup(),!this.parent.inlineMode.enable||me.isDevice&&!Of()||this.hideInlineQTBar()},e.prototype.deBounce=function(e,t,i){var n=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){n.showInlineQTBar(e,t,i)}),1e3)},e.prototype.mouseUpHandler=function(e){if(this.parent.inlineMode.enable&&(!me.isDevice||Of())){var t;t=e.args.touches?e.args.changedTouches[0]:e.args;var i=this.parent.getRange(),n=e.args.target;if(g(xt(".e-rte-inline-popup",document.body))){if(Of()&&e.touchData&&e.touchData.prevClientX!==e.touchData.clientX&&e.touchData.prevClientY!==e.touchData.clientY)return;if(this.hideInlineQTBar(),this.offsetX=t.pageX,this.offsetY=function(e,t,i){return i?window.pageYOffset+t.getBoundingClientRect().top+e.clientY:e.pageY}(t,this.parent.element,this.parent.iframeSettings.enable),"TEXTAREA"===n.nodeName)this.showInlineQTBar(this.offsetX,this.offsetY,n);else{var r=Tt(n,"a");if(!("IMG"===(n=r||n).tagName||"A"===n.tagName||Tt(n,"td,th")&&i.collapsed)){if(this.parent.inlineMode.onSelection&&i.collapsed)return;this.target=n,this.showInlineQTBar(this.offsetX,this.offsetY,n)}}}}},e.prototype.keyDownHandler=function(){!this.parent.inlineMode.enable||me.isDevice&&!Of()||g(xt(".e-rte-inline-popup",document))||this.hideInlineQTBar()},e.prototype.inlineQTBarMouseDownHandler=function(){!this.parent.inlineMode.enable||me.isDevice&&!Of()||g(xt(".e-rte-inline-popup",document))||this.hideInlineQTBar()},e.prototype.keyUpHandler=function(e){if(this.parent.inlineMode.enable&&!me.isDevice){if(this.parent.inlineMode.onSelection)return;var t=e.args;this.deBounce(this.offsetX,this.offsetY,t.target)}},e.prototype.selectionChangeHandler=function(e){var t=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){t.onSelectionChange(e)}),1e3)},e.prototype.onSelectionChange=function(e){g(xt(".e-rte-inline-popup",document.body))&&(this.contentRenderer.getDocument().getSelection().isCollapsed||this.mouseUpHandler({args:e}))},e.prototype.getInlineBaseToolbar=function(){return this.inlineQTBar&&this.inlineQTBar.quickTBarObj},e.prototype.destroy=function(){this.linkQTBar&&(ye.remove(this.linkQTBar.element,"mousedown",this.onMouseDown),this.linkQTBar.destroy()),this.textQTBar&&(ye.remove(this.textQTBar.element,"mousedown",this.onMouseDown),this.textQTBar.destroy()),this.imageQTBar&&(ye.remove(this.imageQTBar.element,"mousedown",this.onMouseDown),this.imageQTBar.destroy()),this.tableQTBar&&(ye.remove(this.tableQTBar.element,"mousedown",this.onMouseDown),this.tableQTBar.destroy()),this.inlineQTBar&&(ye.remove(this.inlineQTBar.element,"mousedown",this.onMouseDown),Of()&&ye.remove(document,"selectionchange",this.selectionChangeHandler),this.inlineQTBar.destroy()),this.removeEventListener()},e.prototype.wireInlineQTBarEvents=function(){this.parent.on("mouseUp",this.mouseUpHandler,this),this.parent.on("mouseDown",this.inlineQTBarMouseDownHandler,this),this.parent.on(wg,this.keyDownHandler,this),this.parent.on("keyUp",this.keyUpHandler,this),this.parent.on("sourceCodeMouseDown",this.mouseUpHandler,this),this.parent.on("renderInlineToolbar",this.renderInlineQuickToolbar,this)},e.prototype.unWireInlineQTBarEvents=function(){this.parent.off("mouseUp",this.mouseUpHandler),this.parent.off("mouseDown",this.inlineQTBarMouseDownHandler),this.parent.off(wg,this.keyDownHandler),this.parent.off("keyUp",this.keyUpHandler),this.parent.off("sourceCodeMouseDown",this.mouseUpHandler),this.parent.off("renderInlineToolbar",this.renderInlineQuickToolbar)},e.prototype.toolbarUpdated=function(e){this.linkQTBar&&!Mf(this.linkQTBar.element,"e-popup-close")&&this.linkQTBar.hidePopup(),this.imageQTBar&&!Mf(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup(),this.tableQTBar&&!Mf(this.tableQTBar.element,"e-popup-close")&&this.tableQTBar.hidePopup()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("initial-end",this.initializeQuickToolbars,this),this.parent.on("mouseDown",this.renderQuickToolbars,this),this.parent.on("toolbar-updated",this.toolbarUpdated,this),this.parent.on("drop",this.renderQuickToolbars,this),this.wireInlineQTBarEvents(),this.parent.on("model-changed",this.onPropertyChanged,this),"hide"===this.parent.quickToolbarSettings.actionOnScroll&&(this.parent.on("scroll",this.hideQuickToolbars,this),this.parent.on("contentscroll",this.hideQuickToolbars,this)),this.parent.on("focusChange",this.hideQuickToolbars,this),this.parent.on("iframe-click",this.onIframeMouseDown,this),this.parent.on("destroy",this.destroy,this),this.parent.on(wg,this.onKeyDown,this),this.parent.on(Sg,this.setRtl,this))},e.prototype.onKeyDown=function(e){var t=e.args;8!==t.which&&46!==t.which||this.imageQTBar&&!Mf(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup()},e.prototype.onIframeMouseDown=function(){this.hideQuickToolbars(),this.hideInlineQTBar()},e.prototype.setRtl=function(e){this.inlineQTBar&&this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl}),this.imageQTBar&&this.imageQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl}),this.linkQTBar&&this.imageQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl})},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.initializeQuickToolbars),this.parent.off("mouseDown",this.renderQuickToolbars),this.parent.off("toolbar-updated",this.toolbarUpdated),this.parent.off("drop",this.renderQuickToolbars),this.unWireInlineQTBarEvents(),this.parent.off("model-changed",this.onPropertyChanged),"hide"===this.parent.quickToolbarSettings.actionOnScroll&&(this.parent.off("scroll",this.hideQuickToolbars),this.parent.off("contentscroll",this.hideQuickToolbars)),this.parent.off("focusChange",this.hideQuickToolbars),this.parent.off("destroy",this.destroy),this.parent.off("iframe-click",this.onIframeMouseDown),this.parent.off(wg,this.onKeyDown),this.parent.off(Sg,this.setRtl))},e.prototype.onPropertyChanged=function(e){if(!g(e.newProp.quickToolbarSettings))for(var t=0,i=Object.keys(e.newProp.quickToolbarSettings);t<i.length;t++){switch(i[t]){case"actionOnScroll":"none"===e.newProp.quickToolbarSettings.actionOnScroll?(this.parent.off("scroll",this.hideQuickToolbars),this.parent.off("contentscroll",this.hideQuickToolbars)):(this.parent.on("scroll",this.hideQuickToolbars,this),this.parent.on("contentscroll",this.hideQuickToolbars,this))}}e.module===this.getModuleName()&&(this.inlineQTBar&&(gt([this.parent.element],["e-rte-inline"]),this.unWireInlineQTBarEvents(),this.hideInlineQTBar()),!this.parent.inlineMode.enable||me.isDevice&&!Of()||(ut([this.parent.element],["e-rte-inline"]),this.wireInlineQTBarEvents()))},e.prototype.getModuleName=function(){return"quickToolbar"},e}(),jv=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(Pu.Content),this.editPanel=this.contentRenderer.getEditPanel(),this.addEventListener()},e.prototype.renderCount=function(){this.initializeInstance(),this.element=this.parent.createElement("span",{className:"e-rte-character-count"}),this.contentRenderer.getPanel().parentElement.appendChild(this.element),this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength)},e.prototype.appendCount=function(){var e="Markdown"===this.parent.editorMode?this.editPanel.value.trim():this.editPanel.textContent.trim();this.htmlLength=e.length;var t=-1===this.parent.maxLength?this.htmlLength:this.htmlLength+" / "+this.parent.maxLength;this.element.innerHTML=t},e.prototype.charCountBackground=function(e){var t=e/this.parent.maxLength*100;t<85?(this.element.classList.remove("e-warning"),this.element.classList.remove("e-error")):t>85&&t<=90?(this.element.classList.remove("e-error"),this.element.classList.add("e-warning")):t>90&&(this.element.classList.remove("e-warning"),this.element.classList.add("e-error"))},e.prototype.refresh=function(){g(this.editPanel)||(this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.destroy=function(){this.element&&!g(this.parent.element.querySelector(".e-rte-character-count"))&&wt(this.element),this.removeEventListener()},e.prototype.toggle=function(e){this.element.style.display="viewSource"===e.member?"none":"block"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("initial-end",this.renderCount,this),this.parent.on("keyUp",this.refresh,this),this.parent.on("count",this.refresh,this),this.parent.on("refresh-begin",this.refresh,this),this.parent.on("mouseDown",this.refresh,this),this.parent.on("destroy",this.destroy,this),this.parent.on("sourceCode",this.toggle,this),this.parent.on("updateSource",this.toggle,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-end",this.renderCount),this.parent.off("keyUp",this.refresh),this.parent.off("refresh-begin",this.refresh),this.parent.off("count",this.refresh),this.parent.off("mouseDown",this.refresh),this.parent.off("destroy",this.destroy),this.parent.off("sourceCode",this.toggle),this.parent.off("updateSource",this.toggle))},e.prototype.getModuleName=function(){return"count"},e}(),zv={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^ ]+",C:"[^]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function qv(){if(St(this.element,{role:"textbox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive","aria-valuenow":""}),this.mask){for(var e=this.mask.split("]"),t=0;t<e.length;t++)if("\\"===e[t][e[t].length-1]){e[t]=e[t]+"]";for(var i=e[t].split("["),n=0;n<i.length;n++)"\\"===i[n][i[n].length-1]&&(i[n]=i[n]+"["),Zv.call(this,i[n])}else{if((i=e[t].split("[")).length>1){var r=!1;for(n=0;n<i.length;n++)"\\"===i[n]?(this.customRegExpCollec.push("["),this.hiddenMask+=i[n]+"["):""===i[n]?r=!0:""!==i[n]&&r||n===i.length-1?(this.customRegExpCollec.push("["+i[n]+"]"),this.hiddenMask+=this.promptChar,r=!1):Zv.call(this,i[n])}else Zv.call(this,i[0])}if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!g(this.customCharacters))for(t=0;t<this.promptMask.length;t++)g(this.customCharacters[this.promptMask[t]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[t],"g"),this.promptChar));var o=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(t=0;t<this.hiddenMask.length;t++){n=0;t>=1&&(n=t),n-=o=this.hiddenMask.length-this.promptMask.length,t>0&&"\\"!==this.hiddenMask[t-1]&&(">"===this.hiddenMask[t]||"<"===this.hiddenMask[t]||"|"===this.hiddenMask[t])&&(this.promptMask=this.promptMask.substring(0,n)+this.promptMask.substring(t+1-o,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue.substring(t+1-o,this.escapeMaskValue.length)),"\\"===this.hiddenMask[t]&&(this.promptMask=this.promptMask.substring(0,n)+this.hiddenMask[t+1]+this.promptMask.substring(t+2-o,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue[t+1]+this.escapeMaskValue.substring(t+2-o,this.escapeMaskValue.length))}else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");St(this.element,{"aria-invalid":"false"})}}function Wv(){Cb.call(this,this.promptMask),wb.call(this,this.value)}function _v(){ye.add(this.element,"keydown",ob,this),ye.add(this.element,"keypress",hb,this),ye.add(this.element,"keyup",db,this),ye.add(this.element,"input",rb,this),ye.add(this.element,"focus",$v,this),ye.add(this.element,"blur",eb,this),ye.add(this.element,"paste",tb,this),ye.add(this.element,"cut",ib,this),ye.add(this.element,"drop",nb,this),this.enabled&&(Uv.call(this),this.formElement&&ye.add(this.formElement,"reset",Xv,this))}function Gv(){ye.remove(this.element,"keydown",ob),ye.remove(this.element,"keypress",hb),ye.remove(this.element,"keyup",db),ye.remove(this.element,"input",rb),ye.remove(this.element,"focus",$v),ye.remove(this.element,"blur",eb),ye.remove(this.element,"paste",tb),ye.remove(this.element,"cut",ib),this.formElement&&ye.remove(this.formElement,"reset",Xv)}function Uv(){this.showClearButton&&ye.add(this.inputObj.clearButton,"mousedown touchstart",Kv,this)}function Kv(e){e.preventDefault(),this.inputObj.clearButton.classList.contains("e-clear-icon-hide")||(Yv.call(this,e),this.value="")}function Yv(e){var t=this.element.value;Cb.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),pb.call(this,e,t),this.element.setSelectionRange(0,0)}function Xv(){"EJS-MASKEDTEXTBOX"===this.element.tagName?Cb.call(this,this.promptMask):this.value=this.initInputValue}function Qv(e){return e.value}function Jv(e,t){var i="",n=0,r=!1,o=g(t)?g(e)||g(this)?t:e.value:t;if(o!==this.promptMask)for(var s=0;s<this.customRegExpCollec.length;s++)r&&(r=!1),">"!==this.customRegExpCollec[n]&&"<"!==this.customRegExpCollec[n]&&"|"!==this.customRegExpCollec[n]&&"\\"!==this.customRegExpCollec[n]||(--s,r=!0),r||o[s]!==this.promptChar&&!g(this.customRegExpCollec[n])&&(this._callPasteHandler||!g(this.regExpCollec[this.customRegExpCollec[n]])||this.customRegExpCollec[n].length>2&&"["===this.customRegExpCollec[n][0]&&"]"===this.customRegExpCollec[n][this.customRegExpCollec[n].length-1]||!g(this.customCharacters)&&!g(this.customCharacters[this.customRegExpCollec[n]]))&&""!==o&&(i+=o[s]),++n;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(i=o),i}function Zv(e){for(var t=0;t<e.length;t++)this.hiddenMask+=e[t],"\\"!==e[t]&&this.customRegExpCollec.push(e[t])}function $v(e){var t=this,i={selectionStart:0,event:e,value:this.value,maskedValue:this.element.value,container:this.inputObj.container,selectionEnd:this.promptMask.length>0?this.promptMask.length:this.element.value.length};this.trigger("focus",i,(function(e){if(t.mask)if(t.isFocus=!0,""===t.element.value?Cb.call(t,t.promptMask):Cb.call(t,t.element.value),me.isDevice||"11.0"!==me.info.version){var i=me.isDevice&&me.isIos?450:0;setTimeout((function(){t.element.setSelectionRange(e.selectionStart,e.selectionEnd)}),i)}else t.element.setSelectionRange(e.selectionStart,e.selectionEnd)}))}function eb(e){if(this.blurEventArgs={event:e,value:this.value,maskedValue:this.element.value,container:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){Cb.call(this,"");var t=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!g(t)&&t.classList.contains("e-label-top")&&gt([t],"e-label-top")}}function tb(e){var t=this;if(this.mask&&!this.readonly){var i=this.element.selectionStart,n=this.element.selectionEnd,r=this.element.value;Cb.call(this,""),this._callPasteHandler=!0,setTimeout((function(){var o=t.element.value.replace(/ /g,"");t.redoCollec.length>0&&t.redoCollec[0].value===t.element.value&&(o=Jv.call(t,t.element)),Cb.call(t,r),t.element.selectionStart=i,t.element.selectionEnd=n;var s=0;t.maskKeyPress=!0;do{gb.call(t,o[s],!1,null),++s}while(s<o.length);if(t.maskKeyPress=!1,t._callPasteHandler=!1,t.element.value===r){var a=0;t.maskKeyPress=!0;do{gb.call(t,o[a],!1,null),++a}while(a<o.length);t.maskKeyPress=!1}else pb.call(t,e,r)}),1)}}function ib(e){var t=this;if(this.mask&&!this.readonly){var i=this.element.value,n=this.element.selectionStart,r=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});var o=this.element.value.substring(0,n)+this.promptMask.substring(n,r)+this.element.value.substring(r);setTimeout((function(){Cb.call(t,o),t.element.selectionStart=t.element.selectionEnd=n,t.element.value!==i&&pb.call(t,e,null)}),0)}}function nb(e){e.preventDefault()}function rb(e){if(!0!==me.isIE||""!==this.element.value||"Never"!==this.floatLabelType){if(u(e,{ctrlKey:!1,keyCode:229}),this.mask){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||lb.call(this,e),this.element.value.length>this.promptMask.length){var t=this.element.selectionStart,i=this.element.value.length-this.promptMask.length,n=this.element.value.substring(t-i,t);this.maskKeyPress=!1;var r=0;do{gb.call(this,n[r],e.ctrlKey,e),++r}while(r<n.length);this.element.value!==this.preEleVal&&pb.call(this,e,null)}var o=Jv.call(this,this.element);this.prevValue=o,this.value=o,""===o&&(Cb.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}}function ob(e){if(this.mask&&!this.readonly){229!==e.keyCode&&(!e.ctrlKey||89!==e.keyCode&&90!==e.keyCode||e.preventDefault(),lb.call(this,e));var t=this.element.value;if(e.ctrlKey&&(89===e.keyCode||90===e.keyCode)){var i=void 0;90===e.keyCode&&this.undoCollec.length>0&&t!==this.undoCollec[this.undoCollec.length-1].value?(i=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Cb.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===e.keyCode&&this.redoCollec.length>0&&t!==this.redoCollec[0].value&&(i=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Cb.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.redoCollec.splice(0,1))}}}function sb(){var e,t=this.element.selectionStart,i=this.element.selectionEnd;this.redoCollec.length>0?(e=this.redoCollec[0],Cb.call(this,e.value),e.startIndex-t==1?(this.element.selectionStart=e.startIndex,this.element.selectionEnd=e.endIndex):(this.element.selectionStart=t+1,this.element.selectionEnd=i+1)):(Cb.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=t)}function ab(e,t,i){return"input"===i.type&&(e=!1,t=this.element.value,Cb.call(this,this.promptMask),wb.call(this,t)),e}function lb(e){var t,i=!1,n=!1;this.element.value.length<this.promptMask.length&&(i=!0,t=this.element.value,i=ab.call(this,i,t,e),sb.call(this)),this.element.value.length>=this.promptMask.length&&"input"===e.type&&(i=ab.call(this,i,t,e));var r=this.element.selectionStart,o=this.element.selectionEnd,s=this.element.selectionStart,a=this.element.selectionEnd,l=this.hiddenMask.replace(/[>|\\<]/g,""),h=l[s-1];this.element.parentNode;if(i||8===e.keyCode||46===e.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:a});var p=!1,d=this.element.value;if(s>0||(8===e.keyCode||46===e.keyCode)&&s<this.element.value.length&&this.element.selectionEnd-s!==this.element.value.length){var c=s;s!==a?(s=a,46===e.keyCode&&(p=!0)):46===e.keyCode?++c:--c;for(var u=s;8===e.keyCode||i||p?u>c:u<c;8===e.keyCode||i||p?u--:u++)for(var f=s;8===e.keyCode||i||p?f>0:f<this.element.value.length;8===e.keyCode||i||p?f--:f++){var m=void 0;(8===e.keyCode||p)&&(r!==o&&r!==s||r===o)||i?(h=l[f-1],m=s-1):(h=l[f],m=s,++s);var y=this.element.value[m];if(g(this.regExpCollec[h])&&!g(this.customCharacters)&&g(this.customCharacters[h])&&this.hiddenMask[m]!==this.promptChar&&"["!==this.customRegExpCollec[m][0]&&"]"!==this.customRegExpCollec[m][this.customRegExpCollec[m].length-1]||this.promptMask[m]!==this.promptChar&&g(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=m,e.preventDefault(),46!==e.keyCode||p||++this.element.selectionStart;else{var v=this.element.value,b=this.promptChar,w=v.substring(0,m)+b+v.substring(s,v.length);Cb.call(this,w),e.preventDefault(),this.element.selectionStart=this.element.selectionEnd=m,n=!0}if(s=this.element.selectionStart,!n&&8===e.keyCode||p||!n&&46!==e.keyCode?m=s-1:(m=s,n=!1),y=this.element.value[m],r!==o&&this.element.selectionStart===r||this.promptMask[m]===this.promptChar||y!==this.promptMask[m]&&this.promptMask[m]!==this.promptChar&&!g(this.customCharacters))break}}0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(Cb.call(this,this.promptMask),e.preventDefault(),this.element.selectionStart=this.element.selectionEnd=s),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==d&&pb.call(this,e,t)}}function hb(e){if(this.mask&&!this.readonly){var t=this.element.value;if(!e.ctrlKey||e.ctrlKey&&"KeyA"!==e.code&&"KeyY"!==e.code&&"KeyZ"!==e.code&&"KeyX"!==e.code&&"KeyC"!==e.code&&"KeyV"!==e.code){this.maskKeyPress=!0;var i=e.key;"Spacebar"===i&&(i=String.fromCharCode(e.keyCode)),i?i&&1===i.length&&(gb.call(this,i,e.ctrlKey,e),e.preventDefault()):(this.isIosInvalid=!0,gb.call(this,String.fromCharCode(e.keyCode),e.ctrlKey,e),e.preventDefault(),this.isIosInvalid=!1),32===e.keyCode&&" "===i&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-i.length)}this.element.value!==t&&pb.call(this,e,t)}}function pb(e,t){var i=this.isProtectedOnChange;if(!g(this.changeEventArgs)&&!this.isInitial){var n={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=Jv.call(this,this.element)),g(e)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=e),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=i,c(n,this.changeEventArgs),this.trigger("change",n)}this.preEleVal=this.element.value,this.prevValue=Jv.call(this,this.element),St(this.element,{"aria-valuenow":this.element.value})}function db(e){if(this.mask&&!this.readonly){var t=void 0;if(this.maskKeyPress||229!==e.keyCode)vb.call(this);else{var i=void 0;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){var n=this.element.selectionStart,r=this.element.value.length-this.promptMask.length,o=this.element.value.substring(n-r,n);if(this.undoCollec.length>0){t=this.undoCollec[this.undoCollec.length-1];var s=this.element.selectionStart;i=t.value;var a=t.value.substring(s-r,s);t=this.redoCollec[0],o=o.trim();var l=me.isAndroid&&""===o;l||a===o||t.value.substring(s-r,s)===o?l&&mb.call(this,e,s-1,this.element.selectionEnd-1,o,e.ctrlKey,!1):gb.call(this,o,e.ctrlKey,e)}else i=this.promptMask,gb.call(this,o,e.ctrlKey,e);this.maskKeyPress=!1,pb.call(this,e,i)}}var h=Jv.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==h||""===h&&this.value!==h)&&(this.prevValue=h,this.value=h)}else pb.call(this,e);if(0===this.element.selectionStart&&0===this.element.selectionEnd){var p=this.element;setTimeout((function(){p.setSelectionRange(0,0)}),0)}}function cb(e){if(e.length>1&&this.promptMask.length+e.length<this.element.value.length){var t=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+e+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);Cb.call(this,t),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+e.length}this.element.selectionStart=this.element.selectionStart-e.length,this.element.selectionEnd=this.element.selectionEnd-e.length}function ub(e){this.maskKeyPress||cb.call(this,e)}function gb(e,t,i){if(ub.call(this,e),!g(this)&&!g(e))for(var n,r,o=this.element.selectionStart,s=o,a=(this.element.selectionEnd,!1),l=this.element.value,h=!1,p=!1,d=0;d<e.length;d++){var c=e[d];if(o=this.element.selectionStart,this.element.selectionEnd,this.maskKeyPress||s!==o||(o+=d),!this.maskKeyPress||o<this.promptMask.length){for(var u=o;u<this.promptMask.length;u++){n=this.escapeMaskValue[o],"\\"===this.hiddenMask[o]&&this.hiddenMask[o+1]===e&&(p=!0),(g(this.regExpCollec[n])&&(g(this.customCharacters)||!g(this.customCharacters)&&g(this.customCharacters[n]))&&this.hiddenMask[o]!==this.promptChar&&"["!==this.customRegExpCollec[o][0]&&"]"!==this.customRegExpCollec[o][this.customRegExpCollec[o].length-1]||this.promptMask[o]!==this.promptChar&&g(this.customCharacters)||this.promptChar===n&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=o+1,o=this.element.selectionStart,n=this.hiddenMask[o])}if(g(this.customCharacters)||g(this.customCharacters[n]))(!g(this.regExpCollec[n])&&c.match(new RegExp(this.regExpCollec[n]))&&this.promptMask[o]===this.promptChar||this.promptMask[o]===this.promptChar&&"["===this.customRegExpCollec[o][0]&&"]"===this.customRegExpCollec[o][this.customRegExpCollec[o].length-1]&&c.match(new RegExp(this.customRegExpCollec[o])))&&(a=!0);else{var f=this.customCharacters[n].split(",");for(u=0;u<f.length;u++)if(c.match(new RegExp("["+f[u]+"]"))){a=!0;break}}if((!this.maskKeyPress||o<this.hiddenMask.length)&&a){if(0===d)if(this.maskKeyPress)this.undoCollec.push({value:l,startIndex:o,endIndex:o});else{var m=this.element.selectionStart,y=this.element.selectionEnd;this.redoCollec.length>0?(r=this.redoCollec[0].value,Cb.call(this,r),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:o,endIndex:o}),r=this.promptMask,Cb.call(this,r)),this.element.selectionStart=m,this.element.selectionEnd=y}o=this.element.selectionStart,fb.call(this,i,o,c,r,p),h=!0,d===e.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),a=!1}else o=this.element.selectionStart,mb.call(this,i,o,s,e,t,h);d!==e.length-1||a||(!me.isAndroid||me.isAndroid&&o<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1!==e.length||t||g(i)||yb.call(this)}}function fb(e,t,i,n,r){if(this.hiddenMask.length>this.promptMask.length&&(i=bb.call(this,i,this.element.value)),!r){var o=this.element.value,s=o.substring(0,t)+i+o.substring(t+1,o.length);Cb.call(this,s),this.element.selectionStart=this.element.selectionEnd=t+1}}function mb(e,t,i,n,r,o){if(!this.maskKeyPress){var s=this.element.value;t>=this.promptMask.length?Cb.call(this,s.substring(0,t)):(i===t?Cb.call(this,s.substring(0,t)+s.substring(t+1,s.length)):this.promptMask.length===this.element.value.length?Cb.call(this,s.substring(0,t)+s.substring(t,s.length)):Cb.call(this,s.substring(0,i)+s.substring(i+1,s.length)),this.element.selectionStart=this.element.selectionEnd=o||this.element.value[i]!==this.promptChar?t:i),this.element.value,yb.call(this)}1!==n.length||r||g(e)||yb.call(this)}function yb(){var e=this,t=this.element.parentNode,i=200;t.classList.contains("e-input-group")||t.classList.contains("e-float-input")?ut([t],"e-error"):ut([this.element],"e-error"),!0===this.isIosInvalid&&(i=400),St(this.element,{"aria-invalid":"true"}),setTimeout((function(){e.maskKeyPress||vb.call(e)}),i)}function vb(){var e=this.element.parentNode;g(e)||gt([e],"e-error"),gt([this.element],"e-error"),St(this.element,{"aria-invalid":"false"})}function bb(e,t){var i,n,r=t,o=0;for(n=0;n<this.hiddenMask.length;n++)if("\\"===this.hiddenMask[n]&&(i=r.substring(0,n)+"\\"+r.substring(n,r.length)),">"!==this.hiddenMask[n]&&"<"!==this.hiddenMask[n]&&"|"!==this.hiddenMask[n]||(this.hiddenMask[n]!==r[n]&&(i=r.substring(0,n)+this.hiddenMask[n]+r.substring(n,r.length)),++o),i){if(i[n]===this.promptChar&&n>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+o===n){o=0;break}r=i}for(;n>=0&&i;){if(0===n||"\\"!==i[n-1]){this.element.value;if(">"===i[n]){e=e.toUpperCase();break}if("<"===i[n]){e=e.toLowerCase();break}if("|"===i[n])break}--n}return e}function wb(e){if(this.mask&&void 0!==e&&(void 0===this.prevValue||this.prevValue!==e)){if(this.maskKeyPress=!0,Cb.call(this,this.promptMask),""===e||null===e&&"Never"===this.floatLabelType&&this.placeholder||(this.element.selectionStart=0,this.element.selectionEnd=0),null!==e)for(var t=0;t<e.length;t++)gb.call(this,e[t],!1,null);var i=Jv.call(this,this.element);this.prevValue=i,this.value=i,pb.call(this,null,null),this.maskKeyPress=!1;var n=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!g(n)&&n.classList.contains("e-label-top")&&!this.isFocus&&(gt([n],"e-label-top"),ut([n],"e-label-bottom"),Cb.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&Cb.call(this,this.value)}function Cb(e,t){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&g(this.value)&&(e="");var i=Jv.call(this,t||this.element,e);null===i||""===i?(No.setValue(e,t||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):No.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)}new function(){};var Sb=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xb=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},kb=["title","style","class"],Tb=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.initInputValue="",n.maskOptions=t,n}return Sb(t,e),t.prototype.getModuleName=function(){return"maskedtextbox"},t.prototype.preRender=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=zv,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;var e=a("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),gt([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=Tt(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var t=this.createElement("input"),i=0;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(t),this.element=t,l("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&ut([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,me.isDevice||"11.0"!==me.info.version&&"edge"!==me.info.name||this.element.blur(),me.isDevice&&me.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),this.renderComplete())},t.prototype.updateHTMLAttrToElement=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];kb.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}},t.prototype.updateCssClass=function(e,t){No.setCssClass(this.getValidClassList(e),[this.inputObj.container],this.getValidClassList(t))},t.prototype.getValidClassList=function(e){var t=e;return g(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.updateHTMLAttrToWrapper=function(){if(!g(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(kb.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&ut([this.inputObj.container],n.split(" "))}else if("style"===i){var r=this.inputObj.container.getAttribute(i);r=g(r)?this.htmlAttributes[i]:r+this.htmlAttributes[i],this.inputObj.container.setAttribute(i,r)}else this.inputObj.container.setAttribute(i,this.htmlAttributes[i])}},t.prototype.resetMaskedTextBox=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),qv.call(this),Wv.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&Cb.call(this,this.value);var e=Jv.call(this,this.element);this.prevValue=e,this.value=e,this.isInitial||Gv.call(this),_v.call(this)},t.prototype.setMaskPlaceholder=function(e,t){(t||this.placeholder)&&(No.setPlaceholder(this.placeholder,this.element),this.element.value===this.promptMask&&e&&"Always"!==this.floatLabelType&&Cb.call(this,""),"Never"===this.floatLabelType&&eb.call(this))},t.prototype.setWidth=function(e){if(!g(e))if("number"==typeof e)this.inputObj.container.style.width=C(e),this.element.style.width=C(e);else if("string"==typeof e){var t=e.match(/px|%|em/)?e:C(e);this.inputObj.container.style.width=t,this.element.style.width=t}},t.prototype.checkHtmlAttributes=function(e){for(var t=0,i=e?g(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];t<i.length;t++){var n=i[t];if(!g(this.element.getAttribute(n)))switch(n){case"placeholder":(g(this.maskOptions)||void 0===this.maskOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"disabled":if(g(this.maskOptions)||void 0===this.maskOptions.enabled||e){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!e)}break;case"value":(g(this.maskOptions)||void 0===this.maskOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"readonly":if(g(this.maskOptions)||void 0===this.maskOptions.readonly||e){var o="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:o},!e)}}}},t.prototype.createWrapper=function(){var e=this.cssClass;g(this.cssClass)||""===this.cssClass||(e=this.getValidClassList(this.cssClass)),this.inputObj=No.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:e,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"value":wb.call(this,this.value),this.placeholder&&this.setMaskPlaceholder(!1,!1);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":No.setEnabled(e.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":No.setReadonly(e.readonly,this.element);break;case"enableRtl":No.setEnableRtl(e.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=e.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":No.setClearButton(e.showClearButton,this.element,this.inputObj,void 0,this.createElement),Uv.call(this);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,No.removeFloating(this.inputObj),No.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":var r=this.value;this.mask=e.mask,this.updateValue(r);break;case"promptChar":e.promptChar.length>1&&(e.promptChar=e.promptChar[0]),e.promptChar?this.promptChar=e.promptChar:this.promptChar="_";var o=this.element.value.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(o=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],Cb.call(this,o)}}},t.prototype.updateValue=function(e){this.resetMaskedTextBox(),wb.call(this,e)},t.prototype.getMaskedValue=function(){return Qv.call(this,this.element)},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),ut([this.inputObj.container],["e-input-focus"]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),gt([this.inputObj.container],["e-input-focus"]))},t.prototype.destroy=function(){Gv.call(this);for(var t=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-valuenow","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.inputObj.container.insertAdjacentElement("afterend",this.element),wt(this.inputObj.container),e.prototype.destroy.call(this)},xb([zt(null)],t.prototype,"cssClass",void 0),xb([zt(null)],t.prototype,"width",void 0),xb([zt(null)],t.prototype,"placeholder",void 0),xb([zt("Never")],t.prototype,"floatLabelType",void 0),xb([zt({})],t.prototype,"htmlAttributes",void 0),xb([zt(!0)],t.prototype,"enabled",void 0),xb([zt(!1)],t.prototype,"readonly",void 0),xb([zt(!1)],t.prototype,"showClearButton",void 0),xb([zt(!1)],t.prototype,"enablePersistence",void 0),xb([zt(null)],t.prototype,"mask",void 0),xb([zt("_")],t.prototype,"promptChar",void 0),xb([zt(null)],t.prototype,"value",void 0),xb([zt(null)],t.prototype,"customCharacters",void 0),xb([_t()],t.prototype,"created",void 0),xb([_t()],t.prototype,"destroyed",void 0),xb([_t()],t.prototype,"change",void 0),xb([_t()],t.prototype,"focus",void 0),xb([_t()],t.prototype,"blur",void 0),t=xb([Gt],t)}(pi),Db=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Eb=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};bc.root="e-combobox";var Rb={container:null,buttons:[]},Pb=function(e){function t(t,i){return e.call(this,t,i)||this}return Db(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(ye.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),ye.add(this.inputWrapper.container,"blur",this.onBlur,this)),g(this.inputWrapper.buttons[0])||ye.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),ye.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(ye.add(this.inputElement,"input",this.onInput,this),ye.add(this.inputElement,"keyup",this.onFilterUp,this),ye.add(this.inputElement,"keydown",this.onFilterDown,this),ye.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(bc.input)||!me.isDevice)&&me.isDevice||e.preventDefault()},t.prototype.onBlur=function(t){var i=""===this.inputElement.value?null:this.inputElement.value;g(this.listData)||g(i)||i===this.text||this.customValue(t),e.prototype.onBlur.call(this,t)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){No.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var t=g(e)?null:e.toString();No.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var i=this.fields,n={};n[i.text]=g(e)?null:e.toString(),n[i.value]=g(e)?null:e.toString(),this.itemData=n,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){if(g(this.value))if(this.text&&g(this.value)){var e;(e=this.getElementByText(this.text))?this.setSelection(e,null):(No.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null);this.setHiddenValue(),No.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?ut([this.inputWrapper.clearButton],bc.clearIconHide):gt([this.inputWrapper.clearButton],bc.clearIconHide))},t.prototype.getAriaAttributes=function(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(e.prototype.searchLists.call(this,t),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+bc.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+bc.li)),this.incrementalSearch(t))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:Rb},t.prototype.onActionComplete=function(t,i,n,r){this.isServerBlazor||e.prototype.onActionComplete.call(this,t,i,n),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&this.inlineSearch()},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),t=this.list.querySelector("."+bc.selected);if(e.text===this.inputElement.value&&!g(t))return t;if((me.isDevice&&!this.isDropDownClick||!me.isDevice)&&!g(this.liCollections)&&this.liCollections.length>0){var i=Qd(this.inputElement.value,this.liCollections,"StartsWith",!0).item;if(g(i))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var n=this.getIndexByValue(i.getAttribute("data-value"))-1,r=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(r)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var o=this.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=n*r+o,ut([i],bc.focus)}}return i}return null},t.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):e.prototype.setValue.call(this,t)},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&g(e.value)&&g(e.text)||this.setProperties({value:e.value,text:e.text},!this.allowCustom)},t.prototype.showSpinner=function(){g(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||No.appendSpan("e-input-group-icon e-atc-spinner-icon",this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,ut([this.spinnerElement],bc.disableIcon),Ni({target:this.spinnerElement,width:me.isDevice?"16px":"14px"},this.createElement),Xi(this.spinnerElement))},t.prototype.hideSpinner=function(){g(this.spinnerElement)||(Ji(this.spinnerElement),gt([this.spinnerElement],bc.disableIcon),this.spinnerElement.classList.contains("e-atc-spinner-icon")?wt(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),n=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===n?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}},t.prototype.isAndroidAutoFill=function(e){if(me.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,n=t.end,r=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&r===e.length||r>o&&i>n||i===n&&r===o)}return!1},t.prototype.clearAll=function(t,i){(g(i)||!g(i)&&g(i.dataSource)||g(this.itemData)&&this.allowFiltering)&&(e.prototype.clearAll.call(this,t),this.isServerBlazor&&this.isFiltering()&&this.isPopupOpen&&t&&this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!0))},t.prototype.isSelectFocusItem=function(e){return!g(e)},t.prototype.inlineSearch=function(e){var t=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),i=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(g(i))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var n=this.list.querySelector("."+bc.li);this.setHoverList(n)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length<0&&this.removeFocus();else{if(!t){var r=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(r),this.activeIndex=g(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,t)}},t.prototype.incrementalSearch=function(e){this.showPopup(),g(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var n=i+e.substr(i.length,e.length);No.setValue(n,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)}else No.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)},t.prototype.getValueByText=function(t){return e.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},t.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(ye.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),ye.remove(this.inputWrapper.container,"blur",this.onBlur)),g(this.inputWrapper.buttons[0])||ye.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),ye.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(ye.remove(this.inputElement,"input",this.onInput),ye.remove(this.inputElement,"keyup",this.onFilterUp),ye.remove(this.inputElement,"keydown",this.onFilterDown),ye.remove(this.inputElement,"paste",this.pasteHandler)),this.unBindCommonEvent()},t.prototype.setSelection=function(t,i){e.prototype.setSelection.call(this,t,i),g(t)||this.autofill||this.isDropDownClick||this.removeFocus()},t.prototype.selectCurrentItem=function(e){var t;this.isPopupOpen&&((t=this.isSelected?this.list.querySelector("."+bc.selected):this.list.querySelector("."+bc.focus))&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&g(t)&&this.customValue(e),this.hidePopup()},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(bc.selected)&&(this.removeFocus(),e.classList.add(bc.focus))},t.prototype.targetFocus=function(e){me.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e)},t.prototype.dropDownClick=function(t){t.preventDefault(),me.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.dropDownClick.call(this,t)},t.prototype.customValue=function(e){var t=this,i=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var n=this.value;if(g(i)){var r,o=""===this.inputElement.value?null:this.inputElement.value;r={text:o,item:{}},this.initial?this.updateCustomValueCallback(o,r,n):this.trigger("customValueSpecifier",r,(function(i){t.updateCustomValueCallback(o,i,n,e)}))}else this.isSelectCustom=!1,this.setProperties({value:i}),n!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{var s=this.previousValue,a=this.value;this.setProperties({value:i}),g(this.value)&&No.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&s===this.value&&a!==this.value&&this.onChangeEvent(null)}},t.prototype.updateCustomValueCallback=function(e,t,i,n){var r=this.fields,o=t.item,s={};o&&a(r.text,o)&&a(r.value,o)?s=o:(l(r.text,e,s),l(r.value,e,s)),this.itemData=s;var h={text:a(r.text,this.itemData),value:a(r.value,this.itemData),index:null};this.setProperties(h,!0),this.setSelection(null,null),this.isSelectCustom=!0,i!==this.value&&this.onChangeEvent(n)},t.prototype.onPropertyChanged=function(t,i){"combobox"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"readonly":No.setReadonly(this.readonly,this.inputElement),this.readonly?(ye.remove(this.inputElement,"input",this.onInput),ye.remove(this.inputElement,"keyup",this.onFilterUp),ye.remove(this.inputElement,"keydown",this.onFilterDown)):(ye.add(this.inputElement,"input",this.onInput,this),ye.add(this.inputElement,"keyup",this.onFilterUp,this),ye.add(this.inputElement,"keydown",this.onFilterDown,this));break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&g(this.list)&&e.prototype.renderList.call(this);break;case"allowCustom":break;default:var s;s=this.getPropObject(o,t,i),e.prototype.onPropertyChanged.call(this,s.newProperty,s.oldProperty)}}},t.prototype.render=function(){e.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&g(this.list)&&e.prototype.renderList.call(this),this.renderComplete()},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.filter=function(t,i,n){e.prototype.filter.call(this,t,i,n)},t.prototype.showPopup=function(){e.prototype.showPopup.call(this)},t.prototype.hidePopup=function(t){var i=""===this.inputElement.value?null:this.inputElement.value;if(!g(this.listData)){var n=this.isEscapeKey;this.isEscapeKey&&(No.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var r=this.isSelectCustom?{text:""}:this.getItemData(),o=this.list.querySelector("."+bc.selected);if(r.text===this.inputElement.value&&!g(o))return this.isSelected&&(this.onChangeEvent(t),this.isSelectCustom=!1),void e.prototype.hidePopup.call(this,t);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var s=Qd(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=s.item,g(s.index)&&(s.index=Qd(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=s.index,g(this.selectedLI)?n&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue(t)}g(this.listData)&&this.allowCustom&&!g(i)&&i!==this.value&&this.customValue(),e.prototype.hidePopup.call(this,t)},t.prototype.focusIn=function(){this.enabled&&(me.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(t){e.prototype.focusOut.call(this,t)},t.prototype.getItems=function(){return e.prototype.getItems.call(this)},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.renderHightSearch=function(){},Eb([zt(!1)],t.prototype,"autofill",void 0),Eb([zt(!0)],t.prototype,"allowCustom",void 0),Eb([zt({})],t.prototype,"htmlAttributes",void 0),Eb([zt(!1)],t.prototype,"allowFiltering",void 0),Eb([zt(null)],t.prototype,"query",void 0),Eb([zt(null)],t.prototype,"index",void 0),Eb([zt(!0)],t.prototype,"showClearButton",void 0),Eb([zt(!1)],t.prototype,"enableRtl",void 0),Eb([_t()],t.prototype,"customValueSpecifier",void 0),Eb([_t()],t.prototype,"filtering",void 0),Eb([zt(null)],t.prototype,"valueTemplate",void 0),Eb([zt("Never")],t.prototype,"floatLabelType",void 0),Eb([zt(null)],t.prototype,"filterBarPlaceholder",void 0),Eb([zt(null)],t.prototype,"cssClass",void 0),Eb([zt(null)],t.prototype,"headerTemplate",void 0),Eb([zt(null)],t.prototype,"footerTemplate",void 0),Eb([zt(null)],t.prototype,"placeholder",void 0),Eb([zt("100%")],t.prototype,"width",void 0),Eb([zt("300px")],t.prototype,"popupHeight",void 0),Eb([zt("100%")],t.prototype,"popupWidth",void 0),Eb([zt(!1)],t.prototype,"readonly",void 0),Eb([zt(null)],t.prototype,"text",void 0),Eb([zt(null)],t.prototype,"value",void 0),t=Eb([Gt],t)}(Cc),Ib=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-filterbarcell"}),t}return Ib(t,e),t.prototype.getGui=function(){return this.parent.createElement("div")},t.prototype.render=function(e,t){var i,n=this.parent.element.querySelector(".e-filterbar"),r=this.element.cloneNode(),o=this.getGui(),s=e.column;if(n.appendChild(r),r.setAttribute("e-mappinguid",s.uid),s.filterTemplate){var l={};t&&(l[s.field]=t[s.field]);if(l.column=s,s.visible){var h=this.parent.isReact&&"string"!=typeof s.filterTemplate,p=this.parent.element.id+s.uid+"filterTemplate";if(h)s.getFilterTemplate()(l,this.parent,"filterTemplate",p,null,null,r),this.parent.renderTemplates();else $a(r,s.getFilterTemplate()(l,this.parent,"filterTemplate",p))}else r.classList.add("e-hide")}else if("checkbox"!==s.type){if(!g(s.allowFiltering)&&!s.allowFiltering||g(s.filterBarTemplate)){St(o,{class:"e-filterdiv e-fltrinputdiv"}),i=this.parent.createElement("input",{id:s.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:s.headerText+e.attributes.title,value:t[e.column.field]?t[e.column.field]:"",role:"search"}}),o.appendChild(i);d={element:i,floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0}};No.createInput(d,this.parent.createElement)}else if(r.classList.add("e-fltrtemp"),St(o,{class:"e-fltrtempdiv"}),g(s.filterBarTemplate.create))i=this.parent.createElement("input",{id:s.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:s.headerText}}),o.appendChild(i);else{var d={column:s,node:Element},c=s.filterBarTemplate.create;if("string"==typeof c&&(c=a(c,window)),"string"==typeof(i=c(d))){var u=this.parent.createElement("div");u.innerHTML=i,i=u.firstChild}St(o,{class:"e-filterUi_input e-filtertext e-fltrTemp",title:s.headerText,id:s.field+"_filterBarcell"}),o.appendChild(i)}if((!1===s.allowFiltering||""===s.field||g(s.field))&&(i.setAttribute("disabled","true"),i.classList.add("e-disable")),s.visible||r.classList.add("e-hide"),this.appendHtml(r,o),this.parent.filterSettings.showFilterBarOperator&&"FilterBar"===this.parent.filterSettings.type&&!this.parent.isPrinting&&g(s.filterTemplate)&&this.operatorIconRender(o,s,e),(g(s.allowFiltering)||s.allowFiltering)&&!g(s.filterBarTemplate)){var f=s.filterBarTemplate.write;d={element:i,column:s};"string"==typeof f&&(f=a(f,window)),f.call(this,d)}}return r},t.prototype.appendHtml=function(e,t){return e.appendChild(t),e},t.prototype.operatorIconRender=function(e,t,i){var n=this.parent,r=this.parent.createElement("input",{className:" e-filterbaroperator e-icons e-icon-filter",id:i.column.uid});e.querySelector("span").appendChild(r);var o=t.filter&&t.filter.operator?t.filter.operator:"equal";g(n.filterModule.operators[t.field])||(o=n.filterModule.operators[t.field]),this.dropOptr=new Cc({fields:{text:"text",value:"value"},popupHeight:"auto",value:o,width:"0px",enabled:t.allowFiltering,popupWidth:"auto",enableRtl:this.parent.enableRtl,change:this.internalEvent.bind(this),beforeOpen:function(){var e=n.filterModule.customOperators;this.dataSource=e[n.getColumnByUid(this.element.id).type+"Operator"];for(var i=0;i<this.dataSource.length;i++)t.filter&&t.filter.operator&&g(n.filterModule.operators[t.field])&&this.dataSource[i].value===t.filter.operator&&(this.value=t.filter.operator)}}),this.dropOptr.appendTo(r);var s=Tt(this.dropOptr.element,"span");s.classList.add("e-filterbardropdown"),s.removeAttribute("tabindex")},t.prototype.internalEvent=function(e){var t=this.parent,i=t.getColumnByUid(e.element.getAttribute("id"));e.column=i,t.filterModule.operators[i.field]=e.value,t.notify("get-filterbar-operator",e)},t}(gs),Lb=function(){function e(e,t,i,n){this.parent=e,this.serviceLocator=i,this.filterSettings=n,this.customFilterOperators=t}return e.prototype.renderOperatorUI=function(e,t,i,n){this.dialogObj=n;var r=i.type+"Operator";this.optrData=this.customOptr=g(this.parent.filterSettings.operators)||g(this.parent.filterSettings.operators[r])?this.customFilterOperators[r]:this.parent.filterSettings.operators[r];var o=this.customOptr,s=this.dropSelectedVal(i,r),a=this.parent.createElement("div",{className:"e-flm_optrdiv"});e.appendChild(a);var l=this.parent.createElement("input",{id:i.uid+"-floptr"});a.appendChild(l),this.dropOptr=new Cc({dataSource:o,fields:{text:"text",value:"value"},open:this.dropDownOpen.bind(this),cssClass:"e-popup-flmenu",text:s}),this.dropOptr.appendTo("#"+i.uid+"-floptr")},e.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e.prototype.dropSelectedVal=function(e,t){for(var i="",n=0,r=this.parent.filterSettings.columns;n<r.length;n++){var o=r[n];if(e.field===o.field||e.isForeignColumn()&&e.foreignKeyValue===o.field){var s=new yn(this.optrData).executeLocal((new on).where("value","equal",o.operator));i=g(s[0])?"":s[0].text}}if(""===i)if(e.filter.operator)for(var a=Object.keys(this.optrData).length,l=0;l<a;l++)this.optrData[l].value===e.filter.operator&&(i=this.optrData[l].text);else i=this.optrData[0].text;return i},e.prototype.getFlOperator=function(){return this.dropOptr.value},e}();function Ob(e,t,i,n,r){if(""!==t){var o=i?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),function e(t,i,n){for(var r=0;t.childNodes&&r<t.childNodes.length;r++){if(3===t.childNodes[r].nodeType&&""!==t.childNodes[r].textContent.trim()){t=n&&t.classList.contains("e-highlight")?t.parentElement:t,n&&t.getAttribute("data-value")?t.innerHTML=t.getAttribute("data-value").replace(i,'<span class="e-highlight">$1</span>'):t.innerHTML=t.innerHTML.replace(i,'<span class="e-highlight">$1</span>');break}e(t.childNodes[r],i,n)}}(e,new RegExp("StartsWith"===n?"^("+t+")":"EndsWith"===n?"("+t+")$":"("+t+")",o),r)}}function Ab(e){for(var t=e.querySelectorAll(".e-highlight"),i=t.length-1;i>=0;i--){var n=t[i].parentNode,r=document.createTextNode(t[i].textContent);n.replaceChild(r,t[i])}}var Bb=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fb=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};bc.root="e-autocomplete",bc.icon="e-input-group-icon e-ddl-icon e-search-icon";var Nb=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isFiltered=!1,n}return Bb(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"auto-complete"},t.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new on,i=""!==this.queryString||g(this.value)?this.filterType:"equal",n=""!==this.queryString||g(this.value)?this.queryString:this.value;if(this.isFiltered)return t;if(null!==this.queryString&&""!==this.queryString){var r=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof yn||"string"!==r)&&"number"!==r){var o=g(this.fields.value)?"":this.fields.value;t.where(o,i,n,this.ignoreCase,this.ignoreAccent)}else t.where("",i,n,this.ignoreCase,this.ignoreAccent)}if(!g(this.suggestionCount)){if(20!==this.suggestionCount)for(var s=0;s<t.queries.length;s++)"onTake"===t.queries[s].fn&&t.queries.splice(s,1);t.take(this.suggestionCount)}return t},t.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,this.isServerBlazor)this.beforePopupOpen=this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,this.queryString=this.filterInput.value,""!==this.queryString&&this.queryString.length>=this.minLength?this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value):this.hidePopup();else{if(g(this.list)&&e.prototype.renderList.call(this,!0),this.queryString=this.filterInput.value,40===t.keyCode||38===t.keyCode)return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,t,r){n.cancel||(i.isFiltered=!0,i.filterAction(e,t,r))},cancel:!1};this.trigger("filtering",n,(function(e){e.cancel||i.isFiltered||e.preventDefaultAction||i.filterAction(i.dataSource,null,i.fields)}))}},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.filterAction(e,t,i)},t.prototype.filterAction=function(e,t,i){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,i,t):this.hidePopup(),this.renderReactTemplates()},t.prototype.clearAll=function(t,i){(g(i)||!g(i)&&g(i.dataSource))&&e.prototype.clearAll.call(this,t),this.beforePopupOpen&&this.hidePopup()},t.prototype.onActionComplete=function(t,i,n,r){this.fixedHeaderElement=null,e.prototype.onActionComplete.call(this,t,i,n);var o=this.list.querySelector("."+bc.li);g(o)||gt([o],bc.focus),this.postBackAction()},t.prototype.postBackAction=function(){if(this.autofill&&!g(this.liCollections[0])){var t=[this.liCollections[0]];g(Qd(this.inputElement.value,t,"StartsWith",this.ignoreCase).item)||e.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},t.prototype.setSelection=function(t,i){if(this.isValidLI(t))if(!g(i)&&"keydown"===i.type&&"enter"!==i.action&&"tab"!==i.action&&this.isValidLI(t)){var n=this.getFormattedValue(t.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.isServerBlazor&&this.removeHover(),this.setHoverList(t),this.selectedLI=t,this.setScrollPosition(i),this.autofill&&this.isPopupOpen&&(this.preventAutoFill=!1,e.prototype.setAutoFill.call(this,t)),St(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else e.prototype.setSelection.call(this,t,i)},t.prototype.listOption=function(t,i){var n=this,r=e.prototype.listOption.call(this,t,i);if(g(r.itemCreated))r.itemCreated=function(e){n.highlight&&(n.element.tagName===n.getNgDirective()&&n.itemTemplate?setTimeout((function(){Ob(e.item,n.queryString,n.ignoreCase,n.filterType)}),0):Ob(e.item,n.queryString,n.ignoreCase,n.filterType))};else{var o=r.itemCreated;r.itemCreated=function(e){n.highlight&&Ob(e.item,n.queryString,n.ignoreCase,n.filterType),o.apply(n,[e])}}return r},t.prototype.isFiltering=function(){return!0},t.prototype.renderPopup=function(){this.list.scrollTop=0,e.prototype.renderPopup.call(this)},t.prototype.isEditTextBox=function(){return""!==this.inputElement.value.trim()},t.prototype.isPopupButton=function(){return this.showPopupButton},t.prototype.isSelectFocusItem=function(e){return!1},t.prototype.showPopup=function(){this.enabled&&(!this.beforePopupOpen||this.isServerBlazor?(this.beforePopupOpen=!0,this.preventAutoFill=!0,g(this.list)||this.isServerBlazor?this.renderList():this.resetList(this.dataSource,this.fields)):this.refreshPopup())},t.prototype.hidePopup=function(){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1),e.prototype.hidePopup.call(this),this.activeIndex=-1},t.prototype.onPropertyChanged=function(t,i){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t);for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"showPopupButton":if(this.showPopupButton){if(this.isServerBlazor){if(this.inputWrapper&&this.inputWrapper.container){s=this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon");this.inputWrapper.buttons[0]=s}}else{var s=No.appendSpan(bc.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=s}this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&ye.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else this.isServerBlazor||(wt(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null);break;default:var a;a=this.getPropObject(o,t,i),e.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty)}}},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++){this.ulElement.querySelector(".e-active")||(Ab(this.liCollections[e]),Ob(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType,this.isServerBlazor))}},t.prototype.getModuleName=function(){return"autocomplete"},t.prototype.render=function(){e.prototype.render.call(this)},Fb([qt({value:null,iconCss:null,groupBy:null},nc)],t.prototype,"fields",void 0),Fb([zt(!0)],t.prototype,"ignoreCase",void 0),Fb([zt(!1)],t.prototype,"showPopupButton",void 0),Fb([zt(!1)],t.prototype,"highlight",void 0),Fb([zt(20)],t.prototype,"suggestionCount",void 0),Fb([zt({})],t.prototype,"htmlAttributes",void 0),Fb([zt(null)],t.prototype,"query",void 0),Fb([zt(1)],t.prototype,"minLength",void 0),Fb([zt("Contains")],t.prototype,"filterType",void 0),Fb([_t()],t.prototype,"filtering",void 0),Fb([zt(null)],t.prototype,"index",void 0),Fb([zt("Never")],t.prototype,"floatLabelType",void 0),Fb([zt(null)],t.prototype,"valueTemplate",void 0),Fb([zt(null)],t.prototype,"filterBarPlaceholder",void 0),Fb([zt(!1)],t.prototype,"allowFiltering",void 0),Fb([zt(null)],t.prototype,"text",void 0),t=Fb([Gt],t)}(Pb),Hb=function(){function e(e,t,i){this.parent=e,this.serLocator=t,this.filterSettings=i}return e.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"strui-"+e.column.uid}),e.target.appendChild(this.instance),this.dialogObj=e.dialogObj,this.actObj=this.getAutoCompleteOptions(e),this.actObj.appendTo(this.instance)},e.prototype.getAutoCompleteOptions=function(e){var t=this,i=e.column.isForeignColumn(),n=i?e.column.dataSource:this.parent.dataSource,r={value:i?e.column.foreignKeyValue:e.column.field},o=new Nb(u({dataSource:n instanceof yn?n:new yn(n),fields:r,locale:this.parent.locale,enableRtl:this.parent.enableRtl,query:this.parent.query.clone(),sortOrder:"Ascending",open:this.openPopup.bind(this),cssClass:"e-popup-flmenu",focus:function(){t.actObj.filterType=e.getOptrInstance.getFlOperator()},autofill:!0,placeholder:e.localizeText.getConstant("EnterValue"),actionComplete:function(e){e.result=e.result.filter((function(e,i,n){return n.map((function(e){return a(t.actObj.fields.value,e)})).indexOf(a(t.actObj.fields.value,e))===i}))}},e.column.filter.params));if(n&&"result"in n){var s=Ll({requestType:"stringfilterrequest"},this.parent.getQuery?this.parent.getQuery().clone():new on);this.parent.trigger("dataStateChange",s.state),s.deffered.promise.then((function(e){o.dataSource=new yn(e)}))}return o},e.prototype.write=function(e){this.filterSettings.columns;""===e.filteredValue||g(e.filteredValue)||(document.querySelector("#strui-"+e.column.uid).ej2_instances[0].value=e.filteredValue)},e.prototype.read=function(e,t,i,n){var r=document.querySelector("#strui-"+t.uid).ej2_instances[0];me.isDevice&&(r.hidePopup(),r.focusOut());var o=r.value;(g(o)||""===o)&&(o=null),n.filterByColumn(t.field,i,o,"and",this.parent.filterSettings.enableCaseSensitivity)},e.prototype.openPopup=function(e){gl(e,this.dialogObj)},e}(),Vb=function(){function e(e,t,i){this.filterSettings=i,this.parent=e,this.serviceLocator=t}return e.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"numberui-"+e.column.uid}),e.target.appendChild(this.instance),this.numericTxtObj=new Pc(u({format:"string"==typeof e.column.format||f(e.column.format)?e.column.format:e.column.format.format,locale:this.parent.locale,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl},e.column.filter.params)),this.numericTxtObj.appendTo(this.instance)},e.prototype.write=function(e){document.querySelector("#numberui-"+e.column.uid).ej2_instances[0].value=e.filteredValue},e.prototype.read=function(e,t,i,n){var r=document.querySelector("#numberui-"+t.uid).ej2_instances[0].value;n.filterByColumn(t.field,i,r,"and",!0)},e}(),jb=function(){function e(e,t,i){this.parent=e,this.serviceLocator=t,this.filterSettings=i}return e.prototype.create=function(e){var t=e.column.isForeignColumn(),i=t?e.column.dataSource:this.parent.dataSource,n=t?e.column.foreignKeyValue:e.column.field;this.elem=this.parent.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+e.column.uid}),e.target.appendChild(this.elem),this.dialogObj=e.dialogObj,this.dropInstance=new Cc(u({dataSource:i instanceof yn?i:new yn(i),query:(new on).select(n),fields:{text:n,value:n},placeholder:e.localizeText.getConstant("SelectValue"),cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this),actionComplete:function(e){e.result=wn.distinct(e.result,n,!0)}},e.column.filter.params)),this.dropInstance.appendTo(this.elem)},e.prototype.write=function(e){var t=document.querySelector("#bool-ui-"+e.column.uid).ej2_instances[0];g(e.filteredValue)||(t.text=e.filteredValue)},e.prototype.read=function(e,t,i,n){var r=document.querySelector("#bool-ui-"+t.uid).ej2_instances[0].value;n.filterByColumn(t.field,i,r,"and",!1)},e.prototype.openPopup=function(e){gl(e,this.dialogObj)},e}(),zb=function(){function e(e,t,i){this.parent=e,this.locator=t,this.fltrSettings=i}return e.prototype.create=function(e){var t=kl(e.column.format,e.column.type);this.dialogObj=e.dialogObj,this.inputElem=this.parent.createElement("input",{className:"e-flmenu-input",id:"dateui-"+e.column.uid}),e.target.appendChild(this.inputElem),"date"===e.column.type?this.datePickerObj=new nu(u({format:t,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this)},e.column.filter.params)):"datetime"===e.column.type&&(this.datePickerObj=new Cu(u({format:t,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this)},e.column.filter.params))),this.datePickerObj.appendTo(this.inputElem)},e.prototype.write=function(e){this.fltrSettings.columns;document.querySelector("#dateui-"+e.column.uid).ej2_instances[0].value=g(e.filteredValue)?null:new Date(e.filteredValue)},e.prototype.read=function(e,t,i,n){var r=document.querySelector("#dateui-"+t.uid).ej2_instances[0].value;r=g(r)?null:r,n.filterByColumn(t.field,i,r,"and",!0)},e.prototype.openPopup=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e}(),qb=function(){function e(e,t,i,n,r){this.isDialogOpen=!1,this.colTypes={string:Hb,number:Vb,date:zb,boolean:jb,datetime:zb},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.customFilterOperators=n,this.filterObj=r,this.flMuiObj=new Lb(this.parent,this.customFilterOperators,this.serviceLocator),this.l10n=this.serviceLocator.getService("localization")}return e.prototype.openDialog=function(e){this.col=this.parent.getColumnByField(e.field),(g(this.col.filter)||g(this.col.filter.type)||"Menu"===this.col.filter.type)&&this.renderDlgContent(e.target,this.col)},e.prototype.closeDialog=function(e){if(this.dlgObj){if(S())for(var t=this.parent.getColumns(),i=0;i<t.length;i++){if(t[i].filterTemplate)Ue(this.parent.element.id+t[i].uid+"filterTemplate","FilterTemplate",t[i])}this.parent.isReact&&(this.parent.destroyTemplate(["filterTemplate"]),this.parent.renderTemplates());var n=document.getElementById(this.dlgObj.element.id);if(this.dlgObj&&!this.dlgObj.isDestroyed&&n){var r={cancel:!1,column:this.col,target:e,element:n};if(this.parent.notify("filter-menu-close",r),r.cancel)return;this.isDialogOpen=!1,this.dlgObj.destroy(),Ct(n)}}},e.prototype.renderDlgContent=function(e,t){var i={requestType:"filterbeforeopen",columnName:t.field,columnType:t.type};if(!S()||this.parent.isJsComponent){i.filterModel=this}this.parent.trigger(wr,i);var n=this.parent.createElement("div",{className:"e-flmenu-maindiv",id:t.uid+"-flmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-flmenu",id:t.uid+"-flmdlg"}),this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("FilterMenuDialogARIA")),this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new Fo({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,e,t),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:"e-flmenu-cancelbtn"}}],content:n,width:!g(Ka(e,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:"e-filter-popup"});this.dlgObj.isStringTemplate=!0,this.dlgObj.appendTo(this.dlgDiv)},e.prototype.dialogCreated=function(e,t){me.isDevice||ul(e,this.dlgObj,this.parent),this.renderFilterUI(e,t),this.parent.notify("filterDialogCreated",{}),this.dlgObj.element.style.maxHeight="350px",this.dlgObj.show(),t.filterTemplate||this.writeMethod(t,this.dlgObj.element.querySelector("#"+t.uid+"-flmenu"));var i={requestType:"filterafteropen",columnName:t.field,columnType:t.type};if(!S()||this.parent.isJsComponent){i.filterModel=this}this.isDialogOpen=!0,this.parent.trigger("actionComplete",i)},e.prototype.renderFilterUI=function(e,t){var i=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.parent.log("column_type_missing",{column:t}),this.renderOperatorUI(i,e,t),this.renderFlValueUI(i,e,t)},e.prototype.renderOperatorUI=function(e,t,i){this.flMuiObj.renderOperatorUI(e,t,i,this.dlgObj)},e.prototype.renderFlValueUI=function(e,t,i){var n=this.parent.createElement("div",{className:"e-flmenu-valuediv"}),r=this.filterObj;e.appendChild(n);this.flMuiObj,this.dlgObj;var o=new this.colTypes[i.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(i.filterTemplate){var s={};s[i.field]=s.value=r.values[i.field],i.foreignKeyValue&&(s[i.foreignKeyValue]=r.values[i.field],s[i.field]=void 0);s.column=i;var l=this.parent.isReact&&"string"!=typeof i.filterTemplate,h=this.parent.element.id+i.uid+"filterTemplate";if(l)i.getFilterTemplate()(s,this.parent,"filterTemplate",h,null,null,n),this.parent.renderTemplates();else{var p=i.getFilterTemplate()(s,this.parent,"filterTemplate",h);Ue(h,"FilterTemplate",i),$a(n,p)}}else if(g(i.filter)||g(i.filter.ui)||g(i.filter.ui.create))o.create({column:i,target:n,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj});else{var d=i.filter.ui.create;"string"==typeof d&&(d=a(d,window)),d({column:i,target:n,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj})}},e.prototype.writeMethod=function(e,t){for(var i,n=t.querySelector(".e-flmenu-valinput"),r=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings),o=0,s=this.filterSettings.columns;o<s.length;o++){var l=s[o];e.uid===l.uid&&(i=l.value)}if(g(e.filter)||g(e.filter.ui)||g(e.filter.ui.write))r.write({column:e,target:n,parent:this.parent,filteredValue:i});else{var h=e.filter.ui.write;"string"==typeof h&&(h=a(h,window)),h({column:e,target:n,parent:this.parent,filteredValue:i})}},e.prototype.filterBtnClick=function(e){var t,i=this.dlgObj.element.querySelector(".e-flmenu-valuediv input");t=this.flMuiObj.getFlOperator();var n=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(e.filterTemplate){var r=this.dlgDiv.querySelector(".e-flmenu-valuediv"),o=void 0;if(r.children[0].value)o=r.children[0].value;else if(S()||g(r.children[0].ej2_instances)){var s=r.querySelector(".e-control");o="boolean"===e.type?s.checked:g(s.ej2_instances)?s.value:s.ej2_instances[0].value}else o=r.children[0].ej2_instances[0].value;this.filterObj.filterByColumn(e.field,t,o)}else if(g(e.filter)||g(e.filter.ui)||g(e.filter.ui.read))n.read(i,e,t,this.filterObj);else{var l=e.filter.ui.read;"string"==typeof l&&(l=a(l,window)),l({element:i,column:e,operator:t,fltrObj:this.filterObj})}var h=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter",p=this.parent.element.querySelector('[e-mappinguid="'+e.uid+'"]').parentElement.querySelector(h);p&&p.classList.add("e-filtered"),this.closeDialog()},e.prototype.clearBtnClick=function(e){this.filterObj.removeFilteredColsByField(e.field),S()&&!this.parent.isJsComponent&&this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.closeDialog();var t=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter",i=this.parent.element.querySelector('[e-mappinguid="'+e.uid+'"]').parentElement.querySelector(t);i&&i.classList.remove("e-filtered")},e.prototype.destroy=function(){this.closeDialog()},e.prototype.getFilterUIInfo=function(){return{field:this.col.field,operator:this.flMuiObj.getFlOperator()}},e}(),Wb=function(){function e(e,t,i){this.parent=e,this.isresetFocus=!0,this.checkBoxBase=new $o(e),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener(),this.checkBoxBase.closeDialog()},e.prototype.openDialog=function(e){this.checkBoxBase.openDialog(e),this.parent.log("column_type_missing",{column:e.column})},e.prototype.closeDialog=function(){this.removeEventListener(),this.checkBoxBase.closeDialog(),this.isresetFocus&&this.parent.notify("restore-Focus",{})},e.prototype.getModuleName=function(){return"checkboxFilter"},e.prototype.actionBegin=function(e){this.parent.trigger(wr,e)},e.prototype.actionComplete=function(e){this.parent.trigger("actionComplete",e)},e.prototype.actionPrevent=function(e){hl(this.parent)&&(this.parent.notify(Or,e),e.cancel=!0)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("cbox-filter-begin",this.actionBegin,this),this.parent.on("cbox-filter-complete",this.actionComplete,this),this.parent.on("filter-Prevent",this.actionPrevent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("cbox-filter-begin",this.actionBegin),this.parent.off("cbox-filter-complete",this.actionComplete),this.parent.off("filter-Prevent",this.actionPrevent))},e}(),_b=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gb=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Ub=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isFocused=!1,n}var i;return _b(t,e),i=t,t.prototype.changeHandler=function(e){this.checked=!0,this.dataBind();var t={value:this.value,event:e};this.trigger("change",t),"EJS-RADIOBUTTON"===this.tagName&&e.stopPropagation()},t.prototype.updateChange=function(e){for(var t,n,r=this.getRadioGroup(),o=0;o<r.length;o++)(t=r[o])!==this.element&&((n=k(t,i)).checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(n.angularValue=this.value))},t.prototype.destroy=function(){var t=this,i=this.element.parentElement;e.prototype.destroy.call(this),this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(i.parentNode.insertBefore(this.element,i),wt(i),this.element.checked=!1,["name","value","disabled"].forEach((function(e){t.element.removeAttribute(e)}))):(["role","aria-checked","class"].forEach((function(e){i.removeAttribute(e)})),i.innerHTML="")},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){this.getLabel().classList.remove("e-focus")},t.prototype.getModuleName=function(){return"radio"},t.prototype.getSelectedValue=function(){for(var e,t=this.getRadioGroup(),i=0,n=t.length;i<n;i++)if((e=t[i]).checked)return e.value;return""},t.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getLabel=function(){return this.element.nextElementSibling},t.prototype.initialize=function(){g(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e,t=this.element.parentElement;t.classList.contains("e-radio-wrapper")||(t=this.createElement("div",{className:"e-radio-wrapper"}),this.element.parentNode.insertBefore(t,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),ii&&(e=this.createElement("span",{className:"e-ripple-container"}),i.appendChild(e),Jt(e,{duration:400,isCenterRipple:!0})),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add("e-rtl"),this.cssClass&&ut([i],this.cssClass.split(" ")),this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},t.prototype.labelRippleHandler=function(e){Nr(e,this.getLabel().getElementsByClassName("e-ripple-container")[0])},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&St(this.element,{checked:"true"})},t.prototype.onPropertyChanged=function(e,t){for(var i=this.getLabel(),n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"checked":e.checked&&this.updateChange(e.checked),this.element.checked=e.checked;break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":t.cssClass&&gt([i],t.cssClass.split(" ")),e.cssClass&&ut([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(e.label);break;case"labelPosition":"Before"===e.labelPosition?i.classList.add("e-right"):i.classList.remove("e-right");break;case"name":this.element.setAttribute("name",e.name);break;case"value":this.element.setAttribute("value",e.value)}}},t.prototype.preRender=function(){var e=this.element;if(this.formElement=Tt(this.element,"form"),this.tagName=this.element.tagName,e=Ar(this.createElement,"EJS-RADIOBUTTON","radio",e,"e-radio-wrapper","radio"),this.element=e,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=m("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){var t=this.element.getAttribute("formcontrolname");t&&(this.setProperties({name:t},!0),this.element.setAttribute("name",t))}},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.setDisabled=function(){this.element.disabled=!0},t.prototype.setText=function(e){var t=this.getLabel(),i=t.getElementsByClassName("e-label")[0];i?i.textContent=e:(e=this.enableHtmlSanitizer?Oi.sanitize(e):e,i=this.createElement("span",{className:"e-label",innerHTML:e}),t.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},t.prototype.unWireEvents=function(){var e=this.getLabel();ye.remove(this.element,"change",this.changeHandler),ye.remove(this.element,"focus",this.focusHandler),ye.remove(this.element,"focusout",this.focusOutHandler),ye.remove(this.element,"keyup",this.keyUpHandler);var t=e.getElementsByClassName("e-label")[0];t&&(ye.remove(t,"mousedown",this.labelRippleHandler),ye.remove(t,"mouseup",this.labelRippleHandler)),this.formElement&&ye.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.wireEvents=function(){var e=this.getLabel();ye.add(this.element,"change",this.changeHandler,this),ye.add(this.element,"keyup",this.keyUpHandler,this),ye.add(this.element,"focus",this.focusHandler,this),ye.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByClassName("e-label")[0];t&&(ye.add(t,"mousedown",this.labelRippleHandler,this),ye.add(t,"mouseup",this.labelRippleHandler,this)),this.formElement&&ye.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Gb([_t()],t.prototype,"change",void 0),Gb([_t()],t.prototype,"created",void 0),Gb([zt(!1)],t.prototype,"checked",void 0),Gb([zt("")],t.prototype,"cssClass",void 0),Gb([zt(!1)],t.prototype,"disabled",void 0),Gb([zt("")],t.prototype,"label",void 0),Gb([zt("After")],t.prototype,"labelPosition",void 0),Gb([zt("")],t.prototype,"name",void 0),Gb([zt("")],t.prototype,"value",void 0),Gb([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),t=i=Gb([Gt],t)}(pi);function Kb(e,t,i,n,r,o){var s,a;if("vscroll"===n?(s=o||t.offsetHeight,a=i.offsetHeight):(s=t.offsetWidth,a=i.offsetWidth),s<a){var l=e("div",{className:"e-menu-"+n});t.appendChild(l),l.appendChild(i),o?(l.style.overflow="hidden",l.style.height=o+"px"):(l.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden");return"vscroll"===n?new zu({enableRtl:r},l).scrollStep=xt(".e-"+n+"-bar",t).offsetHeight/2:new Hu({enableRtl:r},l).scrollStep=xt(".e-"+n+"-bar",t).offsetWidth,l}return i}function Yb(e,t,i){if(e){var n=xt(".e-menu-parent",t);n?i&&i!==n||(e.destroy(),t.parentElement.appendChild(n),wt(t)):(e.destroy(),wt(t))}}var Xb=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qb=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},Jb="e-focused",Zb="e-menu-item",$b="e-menu-hide",ew=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xb(t,e),Qb([zt("id")],t.prototype,"itemId",void 0),Qb([zt("parentId")],t.prototype,"parentId",void 0),Qb([zt("text")],t.prototype,"text",void 0),Qb([zt("iconCss")],t.prototype,"iconCss",void 0),Qb([zt("url")],t.prototype,"url",void 0),Qb([zt("separator")],t.prototype,"separator",void 0),Qb([zt("items")],t.prototype,"children",void 0),t}(oi),tw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xb(t,e),Qb([zt(null)],t.prototype,"iconCss",void 0),Qb([zt("")],t.prototype,"id",void 0),Qb([zt(!1)],t.prototype,"separator",void 0),Qb([Wt([],t)],t.prototype,"items",void 0),Qb([zt("")],t.prototype,"text",void 0),Qb([zt("")],t.prototype,"url",void 0),t}(oi),iw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xb(t,e),Qb([zt("SlideDown")],t.prototype,"effect",void 0),Qb([zt(400)],t.prototype,"duration",void 0),Qb([zt("ease")],t.prototype,"easing",void 0),t}(oi),nw=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.navIdx=[],n.animation=new Qt({}),n.isTapHold=!1,n.tempItem=[],n}return Xb(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:m(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=a("ej2_instances",this.element);gt([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,l("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:m(this.getModuleName())}),vt([].slice.call(this.element.cloneNode(!0).children),e);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(e,i):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var n=this.element,r=a("ej2_instances",n),o=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),s=0,h=n.attributes.length;s<h;s++)e.setAttribute(n.attributes[s].nodeName,n.attributes[s].nodeValue);n.parentNode.insertBefore(o,n),wt(n),n=e,o.appendChild(n),l("ej2_instances",r,n),this.clonedElement=o,this.element=n,this.element.id||(this.element.id=m(this.getModuleName()))}},t.prototype.render=function(){if(this.initialize(),this.renderItems(),this.isMenu&&this.template&&S()){var e=this.element.id+"Template";Ke(e),Object.keys(We).length&&u(this.tempItem,We[e],[],!0),Ue(e,"Template",this)}this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&ut([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e))},t.prototype.renderItems=function(){if(!this.items.length){var e=Jd.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),S()?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var t=this.createItems(this.items);if(vt(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&this.enableScrolling){var i=this.getWrapper();this.element.classList.contains("e-vertical")?Kb(this.createElement,i,this.element,"vscroll",this.enableRtl):Kb(this.createElement,i,this.element,"hscroll",this.enableRtl)}},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,i=kt(this.target),n=0,r=i.length;n<r;n++)t=i[n],this.isMenu?ye.add(t,"click",this.menuHeaderClickHandler,this):me.isIos?new Pi(t,{tapHold:this.touchHandler.bind(this)}):ye.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){ye.add(this.targetElement,"scroll",this.scrollHandler,this);for(var o=0,s=hr(this.targetElement);o<s.length;o++){var a=s[o];ye.add(a,"scroll",this.scrollHandler,this)}}}me.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),ye.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),ye.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),ye.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=Jt(e,{selector:"."+Zb})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:"downarrow",uparrow:"uparrow",enter:"enter",leftarrow:"leftarrow",rightarrow:"rightarrow",escape:"escape"};this.isMenu&&(t.home="home",t.end="end"),new xi(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){Tt(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||Tt(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",i=e.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Jb,"e-selected"],[Tt(i,".e-"+this.getModuleName()+"-wrapper")]),n)switch(e.action){case"rightarrow":t="rightarrow",e.action="downarrow";break;case"leftarrow":t="leftarrow",e.action="uparrow";break;case"downarrow":t="downarrow",e.action="rightarrow";break;case"uparrow":t="uparrow",e.action=""}else if(this.enableRtl)switch(e.action){case"leftarrow":n=!0,t="leftarrow",e.action="rightarrow";break;case"rightarrow":n=!0,t="rightarrow",e.action="leftarrow"}switch(e.action){case"downarrow":case"uparrow":case"end":case"home":this.upDownKeyHandler(e);break;case"rightarrow":this.rightEnterKeyHandler(e);break;case"leftarrow":this.leftEscKeyHandler(e);break;case"enter":this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case"escape":this.leftEscKeyHandler(e)}n&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),i="downarrow"===e.action||"home"===e.action?0:t.childElementCount-1,n=i,r=this.getLIByClass(t,Jb);r&&("end"!==e.action&&"home"!==e.action&&(n=this.getIdx(t,r)),r.classList.remove(Jb),"end"!==e.action&&"home"!==e.action&&("downarrow"===e.action?n++:n--,n===("downarrow"===e.action?t.childElementCount:-1)&&(n=i)));var o=t.children[n];n=this.isValidLI(o,n,e.action),t.children[n].classList.add(Jb),t.children[n].focus()},t.prototype.isValidLI=function(e,t,i){this.getWrapper();var n=this.getUlByNavIdx();return(e.classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains($b))&&("downarrow"===i||"rightarrow"===i?t++:t--),((e=n.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")||e.classList.contains($b))&&(t=this.isValidLI(e,t,i)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(kt(".e-menu-popup")))[e];return g(t)?null:xt(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t,i=this.getUlByNavIdx(),n=this.getLIByClass(i,Jb);if(n){var r=this.getIdx(i,n),o=this.navIdx.concat(r),s=this.getItem(o);s.items.length?(this.navIdx.push(r),this.keyType="right",this.action=e.action,this.openMenu(n,s,-1,-1,e)):"enter"===e.action&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass(["e-selected"],[this.getWrapper()]):n.classList.remove(Jb),n.classList.add("e-selected"),t={element:n,item:s,event:e},this.trigger("select",t),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):"escape"===e.action&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,t){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible()){var n,r,o,s=void 0,a=void 0,l=this.getWrapper(),h=this.getPopups(),p=!1,d=this.isMenu?h.length+1:l.childElementCount;if(n=this.isMenu&&1!==d?xt(".e-ul",h[d-2]):kt(".e-menu-parent",l)[d-1],this.isMenu&&n.classList.contains("e-menu")&&((s=this.getLIByClass(n,"e-selected"))&&s.classList.remove("e-selected"),p=!0),!p){var c=t&&t.target&&this.getLI(t.target);r=this.navIdx.length?this.getItem(this.navIdx):null,o=r?r.items:this.items,a={element:n,parentItem:this.isMenu&&S()?this.getMenuItemModel(r,e):r,items:o,event:t,cancel:!1},this.trigger("beforeClose",a,(function(s){var a,l,h,p,d,u,f="",m=!s.cancel;(m||i.isCMenu)&&(i.isMenu?(a=Tt(n,".e-menu-popup"),i.hamburgerMode&&(a.parentElement.style.minHeight="",Tt(n,".e-menu-item").setAttribute("aria-expanded","false")),i.unWireKeyboardEvent(a),Yb(k(a.children[0],zu),a.children[0]),(h=k(a,lr)).hide(),f=a.id,h.destroy(),wt(a)):i.toggleAnimation(n,!1),l={element:n,parentItem:r,items:o},i.trigger("onClose",l),i.navIdx.pop()),i.updateReactTemplate();var y=i.getWrapper()&&i.getUlByNavIdx();i.isCMenu&&(i.canOpen(t.target)&&i.openMenu(null,null,i.pageY,i.pageX,t),i.isCMenu=!1),i.isMenu&&y&&f.length&&(p=new RegExp("(.*)-ej2menu-"+i.element.id+"-popup").exec(f)[1],d=y.querySelector('[id="'+p+'"]'),u=c&&y.querySelector('[id="'+c.id+'"]'));var v=c&&c.querySelectorAll(".e-menu-item");if(m&&i.hamburgerMode&&e&&!v.length)i.afterCloseMenu(t);else if(m&&!i.hamburgerMode&&i.navIdx.length&&d&&!u)i.closeMenu(i.navIdx[i.navIdx.length-1],t);else if(m&&!e&&(i.hamburgerMode&&i.navIdx.length||1===i.navIdx.length))i.closeMenu(null,t);else if(m&&g(e)&&i.navIdx.length)i.closeMenu(null,t);else if(!m||i.isMenu||e||0!==i.navIdx.length||i.isMenusClosed)if(m&&i.isMenu&&t&&t.target&&0!==i.navIdx.length&&Tt(t.target,".e-menu-parent.e-control"))i.closeMenu(0,t);else if(!m||"right"!==i.keyType&&"click"!==i.keyType){var b=i.getUlByNavIdx(),w=i.getLIByClass(b,"e-selected");if(w&&(w.setAttribute("aria-expanded","false"),w.classList.remove("e-selected"),c&&(w.classList.add(Jb),w.focus())),!m&&i.hamburgerMode&&c&&"false"===c.getAttribute("aria-expanded")&&"true"===c.getAttribute("aria-haspopup")){Tt(c,".e-menu-parent.e-control")?i.navIdx=[]:i.navIdx.pop(),i.navIdx.push(i.cliIdx);var C=i.getItem(i.navIdx);c.setAttribute("aria-expanded","true"),i.openMenu(c,C,-1,-1,t)}}else i.afterCloseMenu(t);else i.isMenusClosed=!0,i.closeMenu(0,t);i.removeStateWrapper()}))}}},t.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var e=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}},t.prototype.getMenuItemModel=function(e,t){if(g(e))return null;g(t)&&(t=0);var i=this.getFields(t);return{text:e[i.text],id:e[i.id],items:e[i.child],separator:e[i.separator],iconCss:e[i.iconCss],url:e[i.url]}},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll(".e-menu-popup")).forEach((function(i){e.getIndex(i.querySelector("."+Zb).id,!0).length&&t.push(i)})),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&mt(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var i=this.filter.split(" "),n=0,r=i.length;n<r;n++)if(Tt(e,"."+i[n])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=this.targetElement);var s=this.getWrapper();this.lItem=e;var a=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,g(i)&&(i=-1),g(n)&&(n=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&me.isDevice){s.lastChild.style.display="none";var l={text:t[this.getField("text")].toString(),iconCss:"e-icons e-previous"},h=new tw(this.items[0],"items",l,!0),p=this.createItems([h]).children[0];p.classList.add("e-menu-header"),this.uList.insertBefore(p,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper e-menu-popup",id:e.id+"-ej2menu-"+a+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&ut([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.triggerBeforeOpen(e,this.uList,t,r,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,s.appendChild(this.uList),this.triggerBeforeOpen(e,this.uList,t,r,i,n,"none"))}else this.uList=this.element,this.uList.style.zIndex=pr(o||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,r,i,n,"none");if(this.isMenu&&this.template&&S()){var d=this.element.id+"Template";if(Object.keys(We).length){var c=We[d];this.tempItem=this.tempItem.concat(c),We[d]=this.tempItem}Ue(d,"Template",this)}},t.prototype.calculateIndentSize=function(e,t){var i=getComputedStyle(t),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?n*=2:n+=n/4,e.style.textIndent=n+"px";var r=e.querySelectorAll(".e-blankicon");if(r&&r.length)for(var o=e.querySelector(".e-menu-icon"),s=getComputedStyle(o),a=parseInt(s.marginRight,10)+o.offsetWidth+n,l=0;l<r.length;l++)r[l].style.textIndent=a+"px"},t.prototype.generatePopup=function(e,t,i,n){var r=this,o=new lr(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var e=xt(".e-menu-vscroll",o.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=xt(".e-ul",o.element);o.element.style.maxHeight="",t.focus(),r.triggerOpen(t)}});return o},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?Oi.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),r=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(n),t.appendChild(r),e.insertBefore(t,this.element)},t.prototype.openHamburgerMenu=function(e){if(this.hamburgerMode){this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")}},t.prototype.closeHamburgerMenu=function(e){var t=this;if(this.hamburgerMode){var i;i={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},this.trigger("beforeClose",i,(function(i){i.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))}))}},t.prototype.callFit=function(e,t,i,n,r){return Nn(e,null,{X:t,Y:i},{top:n,left:r})},t.prototype.triggerBeforeOpen=function(e,t,i,n,r,o,s){var a,l=this,h=(this.getIndex(e?e.id:null,!0),e?i[this.getField("children",this.navIdx.length-1)]:this.items),p={element:t,items:h,parentItem:this.isMenu&&S()?this.getMenuItemModel(i,this.navIdx.length-1):i,event:n,cancel:!1,top:r,left:o},d=s;this.trigger("beforeOpen",p,(function(r){switch(d){case"menu":if(l.hamburgerMode||(l.top=r.top,l.left=r.left),l.popupWrapper.style.display="block",l.hamburgerMode||(l.popupWrapper.style.maxHeight=l.popupWrapper.getBoundingClientRect().height+"px",l.enableScrolling&&Kb(l.createElement,l.popupWrapper,l.uList,"vscroll",l.enableRtl),l.checkScrollOffset(n)),l.hamburgerMode||l.left||l.top)l.popupObj.collision={X:"none",Y:"none"};else{if(l.popupObj.refreshPosition(l.lItem,!0),l.left=parseInt(l.popupWrapper.style.left,10),l.top=parseInt(l.popupWrapper.style.top,10),l.enableRtl&&(l.left=l.isNestedOrVertical?l.left-l.popupWrapper.offsetWidth-l.lItem.parentElement.offsetWidth+2:l.left-l.popupWrapper.offsetWidth+l.lItem.offsetWidth),a=Hn(l.popupWrapper,null,l.left,l.top),(l.isNestedOrVertical||l.enableRtl)&&(a.indexOf("right")>-1||a.indexOf("left")>-1)){l.popupObj.collision.X="none";var o=Tt(l.lItem,".e-"+l.getModuleName()+"-wrapper").offsetWidth;l.left=l.enableRtl?Dn(l.lItem,l.isNestedOrVertical?"right":"left","top").left:l.left-l.popupWrapper.offsetWidth-o+2}((a=Hn(l.popupWrapper,null,l.left,l.top)).indexOf("left")>-1||a.indexOf("right")>-1)&&(l.left=l.callFit(l.popupWrapper,!0,!1,l.top,l.left).left),l.popupWrapper.style.left=l.left+"px"}l.popupWrapper.style.display="";break;case"none":l.top=r.top,l.left=r.left;break;case"hamburger":r.cancel||(l.element.classList.remove("e-hide-menu"),l.triggerOpen(l.element))}if("hamburger"!==d)if(r.cancel)l.isMenu?(l.popupObj.destroy(),wt(l.popupWrapper)):t.className.indexOf("e-ul")>-1&&wt(t),l.navIdx.pop();else if(l.isMenu)if(l.hamburgerMode)l.popupWrapper.style.top=l.top+"px",l.popupWrapper.style.left="0px",l.toggleAnimation(l.popupWrapper);else{l.wireKeyboardEvent(l.popupWrapper),Jt(l.popupWrapper,{selector:"."+Zb}),l.popupWrapper.style.left=l.left+"px",l.popupWrapper.style.top=l.top+"px";var s="None"!==l.animationSettings.effect?{name:l.animationSettings.effect,duration:l.animationSettings.duration,timingFunction:l.animationSettings.easing}:null;l.popupObj.show(s,l.lItem)}else l.setPosition(l.lItem,l.uList,l.top,l.left),l.toggleAnimation(l.uList);if("right"===l.keyType){var h=l.getUlByNavIdx();e.classList.remove(Jb);var p;if(l.isMenu&&1===l.navIdx.length&&l.removeLIStateByClass(["e-selected"],[l.getWrapper()]),e.classList.add("e-selected"),"enter"===l.action){var c={element:e,item:i,event:n};l.trigger("select",c)}e.focus(),h=l.getUlByNavIdx(),p=l.isValidLI(h.children[0],0,l.action),h.children[p].classList.add(Jb),h.children[p].focus()}}))},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i,n,r=g(e)?this.element:Tt(e.target,"."+Zb),o=xt(".e-hscroll-bar",t);o.scrollLeft>r.offsetLeft&&(o.scrollLeft-=o.scrollLeft-r.offsetLeft),(i=o.scrollLeft+o.offsetWidth)<(n=r.offsetLeft+r.offsetWidth)&&(o.scrollLeft+=n-i)}},t.prototype.setPosition=function(e,t,i,n){if(this.toggleVisiblity(t),t===this.element||n>-1&&i>-1){if((o=Hn(t,null,n,i)).indexOf("right")>-1&&(n-=t.offsetWidth),o.indexOf("bottom")>-1)i=(r=this.callFit(t,!1,!0,i,n)).top-20;if((o=Hn(t,null,n,i)).indexOf("left")>-1)n=(r=this.callFit(t,!0,!1,i,n)).left}else if(me.isDevice)i=Number(this.element.style.top.replace("px","")),n=Number(this.element.style.left.replace("px",""));else{var r;i=(r=Dn(e,this.enableRtl?"left":"right","top")).top,n=r.left;var o,s=(o=Hn(t,null,this.enableRtl?n-t.offsetWidth:n,i)).indexOf("left")>-1||o.indexOf("right")>-1;s&&(n=(r=Dn(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||s)&&(n=this.enableRtl&&s?n:n-t.offsetWidth),o.indexOf("bottom")>-1&&(i=(r=this.callFit(t,!1,!0,i,n)).top)}this.toggleVisiblity(t,!1),t.style.top=i+"px",t.style.left=n+"px"},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,i=this.navIdx?this.navIdx.length:0,n=this.getFields(i);if(S()&&this.template&&e.length&&e[0].properties){var r=[];e.forEach((function(e,t){r.push({}),r[t][n.text]=e[n.text],e[n.id]||(e[n.id]=m("menuitem")),r[t][n.id]=e[n.id],r[t][n.iconCss]=e[n.iconCss],r[t][n.url]=e[n.url],r[t][n.child]=e[n.child],r[t][n.separator]=e[n.separator]})),e=r}var o=this.hasField(e,this.getField("iconCss",i)),s={showIcon:o,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(e){e.curData[e.fields[n.id]]||(e.curData[e.fields[n.id]]=m("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",i)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]),""===e.curData[e.fields[n.iconCss]]&&(e.curData[e.fields[n.iconCss]]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",i)]&&(e.item.classList.add("e-separator"),e.item.removeAttribute("role")),!o||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",i)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var n=t.createElement("span",{className:"e-icons e-caret"});e.item.appendChild(n),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),t.isMenu||e.item.removeAttribute("role"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid"),e.item.classList.contains("e-level-1")&&e.item.classList.remove("e-level-1"),e.item.classList.contains("e-has-child")&&e.item.classList.remove("e-has-child"));var r={item:e.curData,element:e.item};t.trigger("beforeItemRender",r)}};this.setProperties({items:this.items},!0),this.isMenu&&(s.templateID=this.element.id+"Template");var a=Jd.createList(this.createElement,e,s,!this.template,this);return a.setAttribute("tabindex","0"),this.isMenu&&a.setAttribute("role","menu"),a},t.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t;var i=this.getLI(t),n=i?Tt(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),r=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),s=!1;if(n){if((""!==n.id?o.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Jb,"e-selected"],[this.getWrapper()]),!this.navIdx.length)return;s=!0}i&&Tt(i,".e-"+this.getModuleName()+"-wrapper")&&!s?(this.removeLIStateByClass([Jb],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Jb],this.isMenu?[r].concat(this.getPopups()):[r]),i.classList.add(Jb),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!s&&this.removeLIStateByClass([Jb],[n].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===n||Tt(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)?s&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Jb],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=Tt(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Jb,"e-selected"],[e])}},t.prototype.removeLIStateByClass=function(e,t){for(var i,n=function(n){e.forEach((function(e){(i=xt("."+e,t[n]))&&i.classList.remove(e)}))},r=0;r<t.length;r++)n(r)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var i=this.fields[e];return"string"==typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i][t])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){Tt(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),i=e.target,n=this.cli=this.getLI(i),r=new RegExp("-ej2menu-(.*)-popup"),o=n?Tt(n,".e-"+this.getModuleName()+"-wrapper"):null,s=n&&o&&(this.isMenu?this.getIndex(n.id,!0).length>0:t.firstElementChild.id===o.firstElementChild.id);if(me.isDevice&&this.isMenu&&(this.removeLIStateByClass([Jb],[t].concat(this.getPopups())),this.mouseDownHandler(e)),n&&o&&this.isMenu){var a=o.id?r.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==a)return}if(s&&"click"===e.type&&!n.classList.contains("e-menu-header")){this.setLISelected(n);var l=this.getIndex(n.id,!0),h={element:n,item:this.getItem(l),event:e};this.trigger("select",h)}if(s&&("mouseover"===e.type||me.isDevice||this.showItemOnClick)){var p=void 0;if(n.classList.contains("e-menu-header"))p=t.children[this.navIdx.length-1],this.toggleAnimation(p),(c=this.getLIByClass(p,"e-selected"))&&c.classList.remove("e-selected"),wt(n.parentNode),this.navIdx.pop();else if(!n.classList.contains("e-separator")){this.showSubMenu=!0;var d=n.parentNode;if(this.cliIdx=this.getIdx(d,n),this.isMenu||!me.isDevice){var c,u=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),Tt(d,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,d);if(this.navIdx[u]===this.cliIdx&&(this.showSubMenu=!1),u!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu))(c=this.getLIByClass(d,"e-selected"))&&c.classList.remove("e-selected"),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(n),this.closeMenu(u+1,e),this.showItemOnClick&&this.setLISelected(n)}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&Tt(i,".e-menu-vscroll")){var g=Tt(i,".e-menu-popup"),f=Array.prototype.indexOf.call(this.getPopups(),g)+1;f<this.navIdx.length&&(this.closeMenu(f+1,e),this.removeLIStateByClass([Jb,"e-selected"],[g]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector("."+Zb).id,!0).length:i.parentElement===t)||(n||this.removeLIStateByClass(["e-selected"],[t]),n&&n.querySelector(".e-caret")||this.closeMenu(null,e))}},t.prototype.afterCloseMenu=function(e){var t;if(this.showSubMenu){t=this.showItemOnClick&&0===this.navIdx.length?Tt(e.target,".e-menu-parent.e-control"):Tt(this.element,".e-menu-parent.e-control");var i=this.navIdx.concat(this.cliIdx),n=this.getItem(i);if(n&&n[this.getField("children",i.length-1)]&&n[this.getField("children",i.length-1)].length?(("mouseover"===e.type||me.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){var r=this.getUlByNavIdx(),o=this.getLIByClass(r,"e-selected");o&&(o.setAttribute("aria-expanded","false"),o.classList.remove("e-selected"))}}this.keyType=""},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,"e-selected");t&&t.classList.remove("e-selected"),this.isMenu||e.classList.remove(Jb),e.classList.add("e-selected")},t.prototype.getLIByClass=function(e,t){for(var i=0,n=e.children.length;i<n;i++)if(e.children[i].classList.contains(t))return e.children[i];return null},t.prototype.getItemIndex=function(e,t){var i;i="string"==typeof e?e:e.id;var n=!1!==t;return this.getIndex(i,n)},t.prototype.setItem=function(e,t,i){var n=t||e.id,r=!1!==i,o=this.getIndex(n,r),s=this.getItem(o);s.iconCss=e.iconCss,s.id=e.id,s.text=e.text,s.url=e.url,s.separator=e.separator,s.items=e.items},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t},t.prototype.setItems=function(e,t){var i=this.getItems(t);i.splice(0,i.length);for(var n=0;n<e.length;n++)i.splice(n,0,e[n])},t.prototype.getIdx=function(e,t,i){void 0===i&&(i=!0);var n=Array.prototype.indexOf.call(e.querySelectorAll("li"),t);return n=this.isMenu&&this.template&&S()?Array.prototype.indexOf.call(e.querySelectorAll(t.tagName),t):Array.prototype.indexOf.call(e.children,t),i&&e.children[0].classList.contains("e-menu-header")&&n--,n},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:Tt(e,"li.e-menu-item")},t.prototype.updateItemsByNavIdx=function(){for(var e=this.items,t=0,i=0;i<this.navIdx.length&&(e=e[i].items);i++){t++;var n=this.getUlByNavIdx(t);if(!n)break;this.updateItem(n,e)}},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=this.getWrapper(),r=function(r){switch(r){case"cssClass":t.cssClass&&gt([n],t.cssClass.split(" ")),e.cssClass&&ut([n],e.cssClass.split(" "));break;case"enableRtl":n.classList.toggle("e-rtl");break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=e.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var s;o.element.classList.contains("e-vertical")?Kb(o.createElement,n,o.element,"vscroll",o.enableRtl):Kb(o.createElement,n,o.element,"hscroll",o.enableRtl),o.getPopups().forEach((function(e){s=xt(".e-ul",e),Kb(i.createElement,e,s,"vscroll",i.enableRtl)}))}else{var a=n.children[0];o.element.classList.contains("e-vertical")?Yb(k(a,zu),a):Yb(k(a,Hu),a),n.style.overflow="",n.appendChild(o.element),o.getPopups().forEach((function(e){Yb(k(a=e.children[0],zu),a),e.style.overflow=""}))}break;case"items":var l=void 0,h=void 0,p=void 0;if(Object.keys(t.items).length){var d=Object.keys(e.items);for(c=0;c<d.length;c++)(h=o.getChangedItemIndex(e,[],Number(d[c]))).length<=o.getWrapper().children.length&&(l=h.pop(),p=o.getItems(h),o.insertAfter([p[l]],p[l].text),o.removeItem(p,h,l),o.setItems(p,h)),h.length=0}else{o.updateItem(o.element,o.items);for(var c=1,u=n.childElementCount;c<u;c++)wt(n.lastElementChild);o.isMenu&&S()?o.updateItemsByNavIdx():o.navIdx=[]}}},o=this,s=0,a=Object.keys(e);s<a.length;s++){r(a[s])}},t.prototype.updateItem=function(e,t){S()?e=this.removeChildElement(e):e.innerHTML="",[].slice.call(this.createItems(t).children).forEach((function(t){e.appendChild(t)}))},t.prototype.getChangedItemIndex=function(e,t,i){t.push(i);var n=Object.keys(e.items[i]).pop();if("items"===n){var r=e.items[i],o=Object.keys(r.items).pop();o&&this.getChangedItemIndex(r,t,Number(o))}else"isParentArray"===n&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,i){e.splice(i,1);var n=this.getWrapper().children;t.length<n.length&&wt(n[t.length].children[i])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var i=void 0,n=void 0,r=kt(e),o=0,s=r.length;o<s;o++)i=r[o],this.isMenu?ye.remove(i,"click",this.menuHeaderClickHandler):me.isIos?(n=k(i,Pi))&&n.destroy():ye.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){ye.remove(this.targetElement,"scroll",this.scrollHandler);for(var a=0,l=hr(this.targetElement);a<l.length;a++){var h=l[a];ye.remove(h,"scroll",this.scrollHandler)}}}me.isDevice||(ye.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),ye.remove(document,"mousedown",this.delegateMouseDownHandler)),ye.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=k(e,xi);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var i,n,r=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){r.hamburgerMode?(n=e.element.parentElement,e.element.style.position="absolute",i=n.offsetHeight,e.element.style.maxHeight=e.element.offsetHeight+"px",n.style.maxHeight=""):(e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px")},progress:function(e){r.hamburgerMode&&(n.style.minHeight=i+e.element.offsetHeight+"px")},end:function(e){r.hamburgerMode?(e.element.style.position="",e.element.style.maxHeight="",n.style.minHeight="",e.element.style.top="0px",e.element.children[0].focus(),r.triggerOpen(e.element.children[0])):r.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null,i={element:e,parentItem:t,items:t?t.items:this.items};this.trigger("onOpen",i)},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Jb))e.querySelector("."+Jb).focus();else{var i=void 0;(i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1])?i.querySelector(".e-selected").focus():this.element.focus()}else if(e===this.element){var n=this.getLIByClass(this.element,Jb);n&&n.classList.remove(Jb);var r=this.getLIByClass(this.element,"e-selected");r&&r.classList.remove("e-selected"),e.style.display="none"}else wt(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return Tt(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,i,n,r,o){var s;void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===r&&(r=!1),void 0===o&&(o=0),o=r?o+1:0;for(var a=0,l=i.length;a<l;a++){if(s=i[a],(t?s[this.getField("itemId",o)]:s[this.getField("text",o)])===e){n.push(a);break}if(s[this.getField("children",o)]&&s[this.getField("children",o)].length){if(-1!==(n=this.getIndex(e,t,s[this.getField("children",o)],n,!0,o))[n.length-1]){n.unshift(a);break}a!==l-1&&n.pop()}else a===l-1&&n.push(-1)}return r||-1!==n[0]?n:[]},t.prototype.enableItems=function(e,t,i){var n,r,o;void 0===t&&(t=!0);for(var s,a="e-disabled",l=0;l<e.length;l++){if(o=this.getIndex(e[l],i),this.navIdx.length){if(1!==o.length){s=!1;for(var h=0,p=o.length-1;h<p;h++)if(o[h]!==this.navIdx[h]){s=!0;break}if(s)continue}}else if(1!==o.length)continue;r=o.pop(),(n=this.getUlByNavIdx(o.length))&&(t?this.isMenu?(n.children[r].classList.remove(a),n.children[r].removeAttribute("aria-disabled")):me.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove(a):n.children[r].classList.remove(a):this.isMenu?(n.children[r].classList.add(a),n.children[r].setAttribute("aria-disabled","true")):me.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add(a):n.children[r].classList.add(a))}},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,i){for(var n,r,o,s=0;s<e.length;s++)r=(o=this.getIndex(e[s],i)).pop(),(n=this.getUlByNavIdx(o.length))&&(t?me.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.add($b):n.children[r].classList.add($b):me.isDevice&&!n.classList.contains("e-contextmenu")?n.children[r+1].classList.remove($b):n.children[r].classList.remove($b))},t.prototype.removeItems=function(e,t){for(var i,n,r,o=0;o<e.length;o++)i=(n=this.getIndex(e[o],t)).pop(),r=this.getItems(n),this.removeItem(r,n,i)},t.prototype.insertAfter=function(e,t,i){this.insertItems(e,t,i)},t.prototype.insertBefore=function(e,t,i){this.insertItems(e,t,i,!1)},t.prototype.insertItems=function(e,t,i,n){var r,o,s,a,l;void 0===n&&(n=!0);for(var h=0;h<e.length;h++){o=(s=this.getIndex(t,i)).pop(),a=this.getItems(s),l=new tw(a[0],"items",e[h],!0),a.splice(n?o+1:o,0,l);var p=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(s.length<p.length){o=n?o+1:o,this.hasField(a,this.getField("iconCss",s.length-1)),r=this.createItems(a).children[o];var d=this.isMenu?xt(".e-menu-parent",p[s.length]):p[s.length];d.insertBefore(r,d.children[o])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach((function(t){e.element.style.removeProperty(t)})),["role","tabindex","class","style"].forEach((function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")}))},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),S()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)ut([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),S()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",vt([].slice.call(this.clonedElement.children),this.element),wt(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(wt(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):wt(t),e.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}},Qb([_t()],t.prototype,"beforeItemRender",void 0),Qb([_t()],t.prototype,"beforeOpen",void 0),Qb([_t()],t.prototype,"onOpen",void 0),Qb([_t()],t.prototype,"beforeClose",void 0),Qb([_t()],t.prototype,"onClose",void 0),Qb([_t()],t.prototype,"select",void 0),Qb([_t()],t.prototype,"created",void 0),Qb([zt("")],t.prototype,"cssClass",void 0),Qb([zt(!1)],t.prototype,"showItemOnClick",void 0),Qb([zt("")],t.prototype,"target",void 0),Qb([zt("")],t.prototype,"filter",void 0),Qb([zt(null)],t.prototype,"template",void 0),Qb([zt(!1)],t.prototype,"enableScrolling",void 0),Qb([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),Qb([qt({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},ew)],t.prototype,"fields",void 0),Qb([Wt([],tw)],t.prototype,"items",void 0),Qb([qt({duration:400,easing:"ease",effect:"SlideDown"},iw)],t.prototype,"animationSettings",void 0),t=Qb([Gt],t)}(pi),rw=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ow=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},sw=function(e){function t(t,i){return e.call(this,t,i)||this}return rw(t,e),t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||m("ej2-contextmenu"),e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),St(this.element,{role:"context menu",tabindex:"0"}),this.element.style.zIndex=pr(this.element).toString()},t.prototype.open=function(t,i,n){e.prototype.openMenu.call(this,null,null,t,i,null,n)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,i){e.prototype.onPropertyChanged.call(this,t,i);for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},t.prototype.getModuleName=function(){return"contextmenu"},ow([zt("")],t.prototype,"target",void 0),ow([zt("")],t.prototype,"filter",void 0),ow([Wt([],tw)],t.prototype,"items",void 0),t=ow([Gt],t)}(nw),aw=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lw=function(e){function t(t,i){var n=e.call(this,t)||this;return n.customFilterOperators=i,n.isExcel=!0,n}return aw(t,e),t.prototype.getCMenuDS=function(e,t){var i={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","","CustomFilter"]};i.date=i.number,i.datetime=i.number;for(var n=[],r=0;r<i[e].length;r++)i[e][r].length?t?n.push({text:this.getLocalizedLabel(i[e][r])+"...",iconCss:"e-icons e-icon-check "+(t===i[e][r].toLowerCase()?"":"e-emptyicon")}):n.push({text:this.getLocalizedLabel(i[e][r])+"..."}):n.push({separator:!0});return n},t.prototype.destroy=function(){this.dlg&&(this.unwireExEvents(),e.prototype.destroy.call(this)),this.cmenu&&this.cmenu.parentElement&&Ct(this.cmenu)},t.prototype.createMenu=function(e,t,i){this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl");var n=this.parent.createElement("ul"),r=t?"e-excl-filter-icon e-filtered":"e-excl-filter-icon";n.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),t?"":"e-disabled",r)),"boolean"!==e&&n.appendChild(this.createMenuElem(this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[e]),"e-submenu",i&&this.ensureTextFilter()?"e-icon-check":r+" e-emptyicon",!0)),this.menu.appendChild(n),this.parent.notify("before-filter-cmenu-open",{element:this.menu})},t.prototype.createMenuElem=function(e,t,i,n){var r=this.parent.createElement("li",{className:t+" e-menu-item"});return r.innerHTML=e,r.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+i}),r.firstChild),n&&r.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),r},t.prototype.wireExEvents=function(){ye.add(this.dlg,"mouseover",this.hoverHandler,this),ye.add(this.dlg,"click",this.clickExHandler,this)},t.prototype.unwireExEvents=function(){ye.remove(this.dlg,"mouseover",this.hoverHandler),ye.remove(this.dlg,"click",this.clickExHandler)},t.prototype.clickExHandler=function(e){var t=Ka(e.target,"e-menu-item");t&&this.getLocalizedLabel("ClearFilter")===t.innerText.trim()&&(this.clearFilter(),this.closeDialog())},t.prototype.destroyCMenu=function(){this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),Ct(this.cmenu))},t.prototype.hoverHandler=function(e){var t,i=e.target.querySelector(".e-contextmenu"),n=Ka(e.target,"e-menu-item"),r=this.menu.querySelector(".e-focused");if(r&&r.classList.remove("e-focused"),n&&(n.classList.add("e-focused"),t=n.classList.contains("e-submenu")),!i){if(!t){var o=this.menu.querySelector(".e-submenu");g(o)||o.classList.remove("e-selected"),this.isCMenuOpen=!1,this.destroyCMenu()}var s=this.ensureTextFilter();if(!this.isCMenuOpen&&t){n.classList.add("e-selected"),this.isCMenuOpen=!0;var a={items:this.getCMenuDS(this.options.type,s?s.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,beforeClose:this.preventClose};this.parent.element.appendChild(this.cmenu),this.menuObj=new sw(a,this.cmenu);var l=this.menu.querySelector(".e-submenu").getBoundingClientRect(),h={top:0,left:0};if(me.isDevice){var p=this.getContextBounds(this.menuObj);h.top=(window.innerHeight-p.height)/2,h.left=(window.innerWidth-p.width)/2,this.closeDialog()}else h.top=me.isIE?window.pageYOffset+l.top:window.scrollY+l.top,h.left=this.getCMenuYPosition(this.dlg,this.menuObj);this.menuObj.open(h.top,h.left,e.target),Il(this.parent.element,this.menuObj.element.parentElement)}}},t.prototype.ensureTextFilter=function(){var e,t=this.existingPredicate[this.options.field];return t&&2===t.length?e="greaterthanorequal"===t[0].operator&&"lessthanorequal"===t[1].operator?"between":"customfilter":t&&1===t.length&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],e=t[0].operator),e},t.prototype.preventClose=function(e){e.event instanceof MouseEvent&&e.event.target.classList.contains("e-submenu")&&(e.cancel=!0)},t.prototype.getContextBounds=function(e){this.menuObj.element.style.display;return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},t.prototype.getCMenuYPosition=function(e,t){var i=this.getContextBounds(t).width,n=e.getBoundingClientRect(),r=n.right+i-this.parent.element.clientWidth,o=e.offsetWidth-e.clientWidth;return o=o?o+1:0,r<1?n.right+1-o:n.left-i-1+o},t.prototype.openDialog=function(e){var t=this;this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e),this.dialogObj.dataBind();var i=this.existingPredicate[e.field]&&this.existingPredicate[e.field].length||this.options.filteredColumns.filter((function(e){return t.options.field===e.field})).length;this.createMenu(e.type,i>0,1===i||2===i),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"}),this.wireExEvents()},t.prototype.closeDialog=function(){e.prototype.closeDialog.call(this)},t.prototype.selectHandler=function(e){e.item&&(this.menuItem=e.item,this.renderDialogue(e))},t.prototype.renderDialogue=function(e){var t=this,i=e.element,n=this.options.field,r=!g(n)&&ol(n),o=!g(n)&&sl(n),s=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:r?o+"-xlflmenu":n+"-xlflmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:r?o+"-xlfldlg":n+"-xlfldlg"}),this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new Fo({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,closeOnEscape:!1,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:function(){var e=t.dlgObj.element.querySelector("table.e-xlfl-table>tr");t.options.column.filterTemplate?S()?e.querySelector(".e-xlfl-valuediv").children[0].focus():e.querySelector("#"+t.options.column.field+"-xlfl-frstvalue").focus():e.cells[1].querySelector("input:not([type=hidden])").focus()},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,i,n),buttons:[{click:this.filterBtnClick.bind(this,n),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:"e-xlfl-cancelbtn"}}],content:s,width:430,animationSettings:{effect:"None"}});this.dlgObj.isStringTemplate=!0,this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA")),this.dlgObj.appendTo(this.dlgDiv)},t.prototype.removeDialog=function(){if(S())for(var e=this.options.columns||[],t=0;t<e.length;t++){if(e[t].filterTemplate)Ue(this.parent.element.id+e[t].uid+"filterTemplate","FilterTemplate",e[t])}this.parent.isReact&&(this.parent.destroyTemplate(["filterTemplate"]),this.parent.renderTemplates()),this.removeObjects([this.dropOptr,this.datePicker,this.dateTimePicker,this.actObj,this.numericTxtObj,this.dlgObj]),Ct(this.dlgDiv)},t.prototype.createdDialog=function(e,t){this.renderCustomFilter(e,t),this.dlgObj.element.style.left="0px",this.dlgObj.element.style.top="0px",me.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify("beforeCustomFilterOpen",{column:t,dialog:this.dialogObj}),this.dlgObj.show(),Il(this.parent.element,this.dlgObj.element.parentElement)},t.prototype.renderCustomFilter=function(e,t){var i=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),n=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"});i.appendChild(n);var r=this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"});i.appendChild(r),this.renderFilterUI(t,i)},t.prototype.filterBtnClick=function(e){var t,i=!g(e)&&ol(e),n=!g(e)&&sl(e),r=i?n:e,o=this.options.column.filterTemplate&&S()?this.dlgDiv.querySelector(".-xlfl-frstvalue").children[0].querySelector(".e-control").ej2_instances[0]:this.dlgDiv.querySelector("#"+r+"-xlfl-frstvalue").ej2_instances[0],s=this.dlgDiv.querySelector("#"+r+"-xlfl-frstoptr").ej2_instances[0],a=this.options.column.filterTemplate&&S()?this.dlgDiv.querySelector(".-xlfl-secndvalue").children[0].querySelector(".e-control").ej2_instances[0]:this.dlgDiv.querySelector("#"+r+"-xlfl-secndvalue").ej2_instances[0],l=this.dlgDiv.querySelector("#"+r+"-xlfl-secndoptr").ej2_instances[0];"string"===this.options.type&&(t=this.dlgDiv.querySelector("#"+r+"-xlflmtcase").ej2_instances[0].checked);var h=this.dlgDiv.querySelector("#"+r+"e-xlfl-frstpredicate").ej2_instances[0],p=(this.dlgDiv.querySelector("#"+r+"e-xlfl-secndpredicate").ej2_instances[0],h.checked?"and":"or");null===a.value&&(p="or"),this.filterByColumn(this.options.field,s.value,o.value,p,t,this.options.ignoreAccent,l.value,a.value),this.removeDialog()},t.prototype.filterByColumn=function(e,t,i,n,r,o,s,a){var l,h=this.parent.getColumnByField?this.parent.getColumnByField(e):this.options.column,p=this.isForeignColumn(h)?h.foreignKeyValue:e,d=[];d.push({field:p,predicate:n,matchCase:r,ignoreAccent:o,operator:t,value:i,type:this.options.type});var c={instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:i,arg4:n,arg5:r,arg6:o,arg7:s,arg8:a,cancel:!1};if(this.parent.notify("filter-Prevent",c),!c.cancel){l=new sn(p,t.toLowerCase(),i,!r,o),g(a)||g(s)||(d.push({field:p,predicate:n,matchCase:r,ignoreAccent:o,operator:s,value:a,type:this.options.type}),l=l[n](p,s.toLowerCase(),a,!r,o));var u={action:"filtering",filterCollection:d,field:this.options.field,ejpredicate:l,actualPredicate:d};this.isForeignColumn(h)?this.foreignKeyFilter(u,d,l):this.options.handler(u)}},t.prototype.renderOperatorUI=function(e,t,i,n,r){var o=this.parent.createElement("tr",{className:"e-xlfl-fields"});t.appendChild(o);var s=this.parent.createElement("td",{className:"e-xlfl-optr"});o.appendChild(s);var a=this.parent.createElement("div",{className:"e-xlfl-optrdiv"}),l=!g(e)&&ol(e),h=!g(e)&&sl(e),p=this.parent.createElement("input",{id:l?h+i:e+i});a.appendChild(p),s.appendChild(a);var d=this.options.type+"Operator",c=this.customFilterOperators[d];this.optrData=c;var u=this.dropSelectedVal(this.options.column,n,r),f="";this.menuItem&&((f=this.menuItem.text.slice(0,-3))!==this.getLocalizedLabel("CustomFilter")&&(u=r?f:void 0),f===this.getLocalizedLabel("Between")&&(u=this.getLocalizedLabel(r?"GreaterThanOrEqual":"LessThanOrEqual")));var m=this.options.column;return this.dropOptr=new Cc(qa({dataSource:c,fields:{text:"text",value:"value"},text:u,open:this.dropDownOpen.bind(this),enableRtl:this.parent.enableRtl,change:this.dropDownValueChange.bind(this)},m.filter.params)),this.dropOptr.appendTo(p),{fieldElement:o,operator:this.getSelectedValue(u)}},t.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},t.prototype.dropDownValueChange=function(e){e.element.id.includes("-xlfl-frstoptr")?this.firstOperator=e.value.toString():this.secondOperator=e.value.toString()},t.prototype.getFilterUIInfo=function(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}},t.prototype.getSelectedValue=function(e){var t=new yn(this.optrData).executeLocal((new on).where("text","equal",e));return g(t[0])?"":t[0].value},t.prototype.dropSelectedVal=function(e,t,i){var n;return n=t&&t.length>0?2===t.length?i?t[0].operator:t[1].operator:i?t[0].operator:void 0:i&&"string"===e.type&&!e.filter.operator?"startswith":i?e.filter.operator||"equal":void 0,this.getSelectedText(n)},t.prototype.getSelectedText=function(e){var t=new yn(this.optrData).executeLocal((new on).where("value","equal",e));return g(t[0])?"":t[0].text},t.prototype.renderFilterUI=function(e,t){var i=this.existingPredicate[e],n=this.parent.createElement("table",{className:"e-xlfl-table"});t.appendChild(n);var r=this.parent.createElement("colGroup");r.innerHTML='<col style="width: 50%"></col><col style="width: 50%"></col>',n.appendChild(r);var o=this.renderOperatorUI(e,n,"-xlfl-frstoptr",i,!0);this.firstOperator=o.operator,this.renderFlValueUI(e,o,"-xlfl-frstvalue",i,!0);var s=this.parent.createElement("tr",{className:"e-xlfl-predicate"});n.appendChild(s),this.renderRadioButton(e,s,i),o=this.renderOperatorUI(e,n,"-xlfl-secndoptr",i,!1),this.secondOperator=o.operator,this.renderFlValueUI(e,o,"-xlfl-secndvalue",i,!1)},t.prototype.renderRadioButton=function(e,t,i){var n=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}});t.appendChild(n);var r=this.parent.createElement("div",{className:"e-xlfl-radiodiv",attrs:{style:"display: inline-block"}}),o=!g(e)&&ol(e),s=!g(e)&&sl(e),a=this.parent.createElement("input",{id:o?s+"e-xlfl-frstpredicate":e+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),l=this.parent.createElement("input",{id:o?s+"e-xlfl-secndpredicate":e+"e-xlfl-secndpredicate",attrs:{type:"radio"}});r.appendChild(a),r.appendChild(l),n.appendChild(r),"string"===this.options.type&&this.renderMatchCase(e,t,n,"-xlflmtcase",i);var h=new Ub({label:this.getLocalizedLabel("AND"),name:"default",cssClass:"e-xlfl-radio-and",checked:!0,enableRtl:this.parent.enableRtl}),p=new Ub({label:this.getLocalizedLabel("OR"),name:"default",cssClass:"e-xlfl-radio-or",enableRtl:this.parent.enableRtl});"and"===(i&&2===i.length?i[1].predicate:"and")?(h.checked=!0,p.checked=!1):(p.checked=!0,h.checked=!1),h.appendTo(a),p.appendTo(l)},t.prototype.removeObjects=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];n&&!n.isDestroyed&&n.destroy()}},t.prototype.renderFlValueUI=function(e,t,i,n,r){var o=this.parent.createElement("td",{className:"e-xlfl-value"});t.fieldElement.appendChild(o);var s=!g(e)&&ol(e),a=!g(e)&&sl(e),l=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),h=this.options.filteredColumns.some((function(t){return e===t.field})),p=this.options.filteredColumns.filter((function(t){return t.field===e}));if(this.options.column.filterTemplate){var d={},c=this.options.column;h&&i&&(d=this.getExcelFilterData(i,d,c,n,p));var u=this.parent.isReact&&"string"!=typeof this.options.column.filterTemplate,f=this.parent.element.id+c.uid+"filterTemplate";if(u)this.options.column.getFilterTemplate()(d,this.parent,"filterTemplate",f,null,null,l),this.parent.renderTemplates();else $a(l,this.options.column.getFilterTemplate()(d,this.parent,"filterTemplate",f));S()?(l.children[0].classList.add(i),this.dlgDiv.querySelectorAll(".e-xlfl-value").length>1&&Ue(f,"FilterTemplate",c)):l.children[0].id=s?a+i:e+i,o.appendChild(l)}else{var m=this.parent.createElement("input",{id:s?a+i:e+i});l.appendChild(m),o.appendChild(l);var y=void 0,v=void 0;n&&n.length>0&&(y=(v=2===n.length?r?n[0]:n[1]:r?n[0]:void 0)&&v.operator===t.operator?v.value:void 0),{string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)}[this.options.type](this.options,e,m,y,this.parent.enableRtl)}},t.prototype.getExcelFilterData=function(e,t,i,n,r){var o="-xlfl-frstvalue"===e?0:1;if("-xlfl-frstvalue"===e||r.length>1){t={column:n instanceof Array?n[o]:n};var s=this.options.column.columnData&&r.length>1?1===this.options.column.columnData.length?0:1:o;t[this.options.field]=i.foreignKeyValue?this.options.column.columnData[s][i.foreignKeyValue]:r[s].value,this.options.foreignKeyValue&&(t[this.options.foreignKeyValue]=this.options.column.columnData[s][i.foreignKeyValue])}return t},t.prototype.renderMatchCase=function(e,t,i,n,r){var o=this.parent.createElement("div",{className:"e-xlfl-matchcasediv",attrs:{style:"display: inline-block"}}),s=!g(e)&&ol(e),a=!g(e)&&sl(e),l=this.parent.createElement("input",{id:s?a+n:e+n,attrs:{type:"checkbox"}});o.appendChild(l),i.appendChild(o);var h=!!(r&&r.length>0)&&(r&&2===r.length?r[1].matchCase:r[0].matchCase);new _d({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:h}).appendTo(l)},t.prototype.renderDate=function(e,t,i,n,r){var o=kl(e.format,e.type);this.datePicker=new nu(qa({format:o,cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:r,value:new Date(n),locale:this.parent.locale},e.column.filter.params)),this.datePicker.appendTo(i)},t.prototype.renderDateTime=function(e,t,i,n,r){var o=kl(e.format,e.type);this.dateTimePicker=new Cu(qa({format:o,cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:r,value:new Date(n),locale:this.parent.locale},e.column.filter.params)),this.dateTimePicker.appendTo(i)},t.prototype.completeAction=function(e){e.result=function(e){for(var t={},i=[],n=0;n<e.length;n++)e[n]in t||(i.push(e[n].toString()),t[e[n]]=1);return i}(e.result)},t.prototype.renderNumericTextBox=function(e,t,i,n,r){this.numericTxtObj=new Pc(qa({format:e.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:r,value:n,locale:this.parent.locale},e.column.filter.params)),this.numericTxtObj.appendTo(i)},t.prototype.renderAutoComplete=function(e,t,i,n,r){var o=this,s=this.options.column,a=this.isForeignColumn(s),l=a?s.dataSource:e.dataSource,h={value:a?s.foreignKeyValue:t},p=new Nb(qa({dataSource:l instanceof yn?l:new yn(l),fields:h,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:"e-popup-flmenu",autofill:!0,focus:function(){var n=!g(t)&&ol(t),r=!g(t)&&sl(t),s=n?r:t;p.filterType=o.dlgDiv.querySelector("#"+s+(i.id===s+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,p.ignoreCase="string"!==e.type||!o.dlgDiv.querySelector("#"+s+"-xlflmtcase").ej2_instances[0].checked,p.filterType=g(p.filterType)?"equal":p.filterType},placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:r,actionComplete:function(e){var i=!g(t)&&ol(t);e.result=e.result.filter((function(e,t,n){return n.map((function(e){return i?o.performComplexDataOperation(p.fields.value,e):e[p.fields.value]})).indexOf(i?o.performComplexDataOperation(p.fields.value,e):e[o.actObj.fields.value])===t}))},text:n},s.filter.params));if(l&&"result"in l){var d=Ll({requestType:"stringfilterrequest"},this.getQuery());this.parent.trigger("dataStateChange",d.state),d.deffered.promise.then((function(e){p.dataSource=new yn(e)}))}p.appendTo(i),this.actObj=p},t.prototype.performComplexDataOperation=function(e,t){for(var i,n=e.split(".").length,r=e.split("."),o=t,s=0;s<n;s++)o=i=o[r[s]];return i},t}($o),hw=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pw=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n)||this;return o.parent=t,o.isresetFocus=!0,o.excelFilterBase=new lw(t,r),o}return hw(t,e),t.prototype.destroy=function(){this.excelFilterBase.closeDialog()},t.prototype.openDialog=function(e){this.excelFilterBase.openDialog(e)},t.prototype.closeDialog=function(){this.excelFilterBase.closeDialog(),this.isresetFocus&&this.parent.notify("restore-Focus",{})},t.prototype.filterByColumn=function(e,t,i,n,r,o,s,a){this.excelFilterBase.filterByColumn(e,t,i,n,r,o,s,a)},t.prototype.getFilterUIInfo=function(){return this.excelFilterBase.getFilterUIInfo()},t.prototype.getModuleName=function(){return"excelFilter"},t}(Wb),dw=function(){function e(e,t,i){this.predicate="and",this.contentRefresh=!0,this.filterByMethod=!0,this.refresh=!0,this.values={},this.operators={},this.cellText={},this.nextFlMenuOpen="",this.type={Menu:qb,CheckBox:Wb,Excel:pw},this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.fltrDlgDetails={field:"",isOpen:!1},this.skipNumberInput=["="," ","!"],this.skipStringInput=[">","<","="],this.actualPredicate={},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.addEventListener()}return e.prototype.render=function(e){if(!wn.getObject("args.isFrozen",e)){var t=this.parent;if(this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),"FilterBar"===this.parent.filterSettings.type&&t.columns.length){var i=this.parent.element.querySelector(".e-filterbar");i&&Ct(i);var n=new rs(this.serviceLocator,dr.Filter,t),r=void 0;this.serviceLocator.getService("cellRendererFactory").addCellRenderer(dr.Filter,new Mb(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),n.element=this.parent.createElement("tr",{className:"e-filterbar"}),(r=this.generateRow()).data=this.values,this.parent.getHeaderContent().querySelector("thead").appendChild(n.element);var o=this.parent.element.querySelector(".e-rowdragheader");this.element=n.render(r,t.getColumns(),null,null,n.element);var s=this.element.querySelector(".e-detailheadercell");s&&(s.className="e-filterbarcell e-mastercell"),o&&(o.className="e-dragheadercell e-mastercell");var a=[].slice.call(this.element.querySelectorAll(".e-grouptopleftcell"));a.length&&a[a.length-1].classList.add("e-lastgrouptopleftcell"),this.wireEvents(),this.parent.notify("freezerender",{case:"filter"})}}},e.prototype.destroy=function(){var e=this.parent.element;if(e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))){if(this.filterModule&&this.filterModule.destroy(),this.parent.refreshing||(this.filterSettings.columns=[]),this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator)for(var t=this.element.querySelectorAll(".e-filterbaroperator"),i=0;i<t.length;i++)t[i].ej2_instances[0].destroy();if(this.element){Ct(this.element);var n=this.parent.getHeaderContent().querySelector(".e-filterbar");this.parent.getFrozenColumns()&&n&&Ct(n)}}},e.prototype.generateRow=function(e){var t=new ts({});return t.cells=this.generateCells(),t},e.prototype.generateCells=function(){var e=[];if(this.parent.allowGrouping)for(var t=0,i=this.parent.groupSettings.columns.length;t<i;t++)e.push(this.generateCell({},dr.HeaderIndent));(this.parent.detailTemplate||this.parent.childGrid)&&e.push(this.generateCell({},dr.DetailHeader)),this.parent.isRowDragable()&&e.push(this.generateCell({},dr.RowDragHIcon));for(var n=0,r=this.parent.getColumns();n<r.length;n++){var o=r[n];e.push(this.generateCell(o))}return e},e.prototype.generateCell=function(e,t){var i={visible:e.visible,isDataCell:!1,rowId:"",column:e,cellType:t||dr.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new is(i)},e.prototype.updateModel=function(){for(var e=this.parent.getColumnByField(this.fieldName),t=Array.isArray(this.value)?this.value:[this.value],i=0,n=t.length;i<n;i++){var r=e.isForeignColumn()?e.foreignKeyValue:this.fieldName;this.currentFilterObject={field:r,uid:e.uid,isForeignKey:e.isForeignColumn(),operator:this.operator,value:t[i],predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}};var o=this.getFilteredColsIndexByField(e);o>-1&&!Array.isArray(this.value)?this.filterSettings.columns[o]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject)}this.filterSettings.columns=this.filterSettings.columns,this.parent.dataBind()},e.prototype.getFilteredColsIndexByField=function(e){for(var t=this.filterSettings.columns,i=0,n=t.length;i<n;i++)if(t[i].uid===e.uid||e.isForeignColumn()&&this.parent.getColumnByUid(e.uid).field===e.foreignKeyValue)return i;return-1},e.prototype.onActionComplete=function(e){S()&&!this.parent.isJsComponent&&(e.rows=null);var t=this.isRemove?{requestType:"filtering",type:"actionComplete"}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:g(this.column)?void 0:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:"actionComplete"};this.parent.trigger("actionComplete",u(e,t)),this.isRemove=!1},e.prototype.wireEvents=function(){ye.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate,this)},e.prototype.unWireEvents=function(){ye.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate)},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.parent.getHeaderTable().classList.add("e-sortfilter"),this.render())},e.prototype.initialEnd=function(){if(this.parent.off(xr,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.initialLoad=!0;for(var t=0,i=e.filterSettings.columns;t<i.length;t++){var n=i[t];this.filterByColumn(n.field,n.operator,n.value,n.predicate,n.matchCase,n.ignoreAccent,n.actualFilterValue,n.actualOperator)}this.initialLoad=!1,this.updateFilterMsg(),this.contentRefresh=!0}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(kr,this.enableAfterRender,this),this.parent.on("filtering-complete",this.onActionComplete,this),this.parent.on(Dr,this.onPropertyChanged,this),this.parent.on(Pr,this.keyUpHandler,this),this.parent.on("column-position-changed",this.columnPositionChanged,this),this.parent.on(Rr,this.render,this),this.parent.on(xr,this.initialEnd,this),this.parent.on("filter-menu-close",this.filterMenuClose,this),ye.add(document,"click",this.clickHandler,this),this.parent.on("filterOpen",this.columnMenuFilter,this),this.parent.on(Ir,this.filterIconClickHandler,this),this.parent.on("persist-data-changed",this.initialEnd,this),this.parent.on("close-filter-dialog",this.clickHandler,this))},e.prototype.removeEventListener=function(){ye.remove(document,"click",this.clickHandler),this.parent.isDestroyed||(this.parent.off(kr,this.enableAfterRender),this.parent.off("filtering-complete",this.onActionComplete),this.parent.off(Dr,this.onPropertyChanged),this.parent.off(Pr,this.keyUpHandler),this.parent.off("column-position-changed",this.columnPositionChanged),this.parent.off(Rr,this.render),this.parent.off("filterOpen",this.columnMenuFilter),this.parent.off("filter-menu-close",this.filterMenuClose),this.parent.off(Ir,this.filterIconClickHandler),this.parent.off("close-filter-dialog",this.clickHandler))},e.prototype.filterMenuClose=function(e){this.fltrDlgDetails.isOpen=!1},e.prototype.filterByColumn=function(e,t,i,n,r,o,s,a){var l,h=this,p=this.parent;if(this.column=p.grabColumnByFieldFromAllCols(e),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&(t=this.getOperatorName(e)),this.column)if("FilterBar"===this.filterSettings.type&&(l=p.getHeaderContent().querySelector("[id='"+this.column.field+"_filterBarcell']")),g(this.column.allowFiltering)||this.column.allowFiltering)if(hl(p))p.notify(Or,{instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:i,arg4:n,arg5:r,arg6:o,arg7:s,arg8:a});else{if(this.predicate=n||(Array.isArray(i)?"or":"and"),this.value=i,this.matchCase=r||!1,this.ignoreAccent=this.ignoreAccent=g(o)?this.parent.filterSettings.ignoreAccent:o,this.fieldName=e,this.operator=t,i=!g(i)&&i.toString(),"number"!==this.column.type&&"date"!==this.column.type||(this.matchCase=!0),p.getColumnHeaderByField(e).setAttribute("aria-filtered","true"),l&&"FilterBar"===this.filterSettings.type){if(i.length<1||!this.filterByMethod&&this.checkForSkipInput(this.column,i))return this.filterStatusMsg=i.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),void this.updateFilterMsg();l.value!==i&&(l.value=i)}g(this.column.format)?this.values[this.column.field]=i:(this.applyColumnFormat(i),this.initialLoad&&"FilterBar"===this.filterSettings.type&&(l.value=this.values[this.column.field]));var d={field:this.fieldName,predicate:n,matchCase:r,ignoreAccent:o,operator:this.operator,value:this.value,type:this.column.type};this.parent.filterSettings.columns.filter((function(e){return e.field===h.fieldName})).length>1&&!g(this.actualPredicate[this.fieldName])?this.actualPredicate[this.fieldName].push(d):this.actualPredicate[this.fieldName]=[d],this.addFilteredClass(this.fieldName),this.checkAlreadyColFiltered(this.column.field)||this.updateModel()}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:this.column.headerText})},e.prototype.applyColumnFormat=function(e){var t="date"===this.column.type||"datetime"===this.column.type?new Date(e):parseFloat(e);this.values[this.column.field]=this.setFormatForFlColumn(t,this.column)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){var n=i[t];switch(n){case"columns":this.contentRefresh&&(this.parent.notify(Er,{currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,action:"filter",columns:this.filterSettings.columns,requestType:"filtering",type:wr,cancel:!1}),this.refreshFilterSettings(),this.updateFilterMsg(),this.updateFilter());break;case"showFilterBarStatus":e.properties[n]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("");break;case"showFilterBarOperator":case"type":this.parent.refreshHeader(),this.refreshFilterSettings()}}},e.prototype.refreshFilterSettings=function(){if("FilterBar"===this.filterSettings.type){for(var e=0;e<this.filterSettings.columns.length;e++){this.column=this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[e].uid);var t=this.filterSettings.columns[e].value;if(t=!g(t)&&t.toString(),g(this.column.format)){var i=this.filterSettings.columns[e].field;this.values[i]=this.filterSettings.columns[e].value}else this.applyColumnFormat(t);(r=this.getFilterBarElement(this.column.field))&&(""===this.cellText[this.filterSettings.columns[e].field]||g(this.cellText[this.filterSettings.columns[e].field])?r.value=this.filterSettings.columns[e].value:r.value=this.cellText[this.column.field])}if(0===this.filterSettings.columns.length){var n=this.parent.getColumns();for(e=0;e<n.length;e++){var r;(r=this.getFilterBarElement(n[e].field))&&""!==r.value&&(r.value="",delete this.values[n[e].field])}}}},e.prototype.getFilterBarElement=function(e){var t,i="[id='"+e+"_filterBarcell']";return i&&!g(this.element)&&(t=this.element.querySelector(i)),t},e.prototype.refreshFilter=function(){this.refreshFilterSettings(),this.updateFilterMsg()},e.prototype.clearFiltering=function(e){var t=this,i=Ya(this.filterSettings.columns);if(!g(e))return this.refresh=!1,e.forEach((function(e){t.removeFilteredColsByField(e,!1)})),this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.parent.renderModule.refresh(),void(this.refresh=!0);if(hl(this.parent))this.parent.notify(Or,{instance:this,handler:this.clearFiltering});else{for(var n=0;n<i.length;n++)i[n].uid=i[n].uid||this.parent.getColumnByField(i[n].field).uid;var r=i.map((function(e){return e.uid})),o=r.filter((function(e,t){return r.indexOf(e)===t}));this.refresh=!1;n=0;for(var s=o.length;n<s;n++)this.removeFilteredColsByField(this.parent.getColumnByUid(o[n]).field,!1);if(S()&&!this.parent.isJsComponent&&this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.refresh=!0,o.length&&this.parent.renderModule.refresh(),0===this.parent.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered")){var a=[].slice.call(this.parent.element.querySelectorAll(".e-filtered"));for(n=0,s=a.length;n<s;n++)a[0].removeAttribute("aria-filtered"),a[0].classList.remove("e-filtered")}this.isRemove=!0,this.filterStatusMsg="",this.updateFilterMsg()}},e.prototype.checkAlreadyColFiltered=function(e){for(var t=0,i=this.filterSettings.columns;t<i.length;t++){var n=i[t];if(n.field===e&&n.value===this.value&&n.operator===this.operator&&n.predicate===this.predicate)return!0}return!1},e.prototype.columnMenuFilter=function(e){this.column=e.col;var t=Tt(e.target,"#"+e.id);e.isClose&&!t?this.filterModule.closeDialog():t&&this.filterDialogOpen(this.column,e.target)},e.prototype.filterDialogOpen=function(e,t,i,n){var r=this.parent;this.filterModule&&this.filterModule.closeDialog(),this.filterModule=new this.type[e.filter.type||this.parent.filterSettings.type](this.parent,r.filterSettings,this.serviceLocator,this.customOperators,this);var o=e.filter.dataSource||r.dataSource&&"result"in r.dataSource?r.dataSource:r.getDataModule().dataManager;this.filterModule.openDialog({type:e.type,field:e.field,displayName:e.headerText,dataSource:o,format:e.format,height:800,columns:r.getColumns(),filteredColumns:r.filterSettings.columns,target:t,dataManager:r.getDataModule().dataManager,formatFn:e.getFormatter(),ignoreAccent:r.filterSettings.ignoreAccent,parserFn:e.getParser(),query:r.query,template:e.getFilterItemTemplate(),hideSearchbox:!g(e.filter.hideSearchbox)&&e.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:r.getLocaleConstants(),position:{X:i,Y:n},column:e,foreignKeyValue:e.foreignKeyValue,actualPredicate:this.actualPredicate,localeObj:r.localeObj,isRemote:r.getDataModule().isRemote(),allowCaseSensitive:this.filterSettings.enableCaseSensitivity})},e.prototype.removeFilteredColsByField=function(e,t){var i,n=this.filterSettings.columns;if(hl(this.parent)){var r={instance:this,handler:this.removeFilteredColsByField,arg1:e,arg2:t};this.parent.notify(Or,r)}else{for(var o=n.map((function(e){return e.uid})),s=o.filter((function(e,t){return o.indexOf(e)===t})),a=function(r,o){n[r].uid=n[r].uid||l.parent.getColumnByField(n[r].field).uid;var a=n.length,h=l.parent.grabColumnByUidFromAllCols(s[r]);if(h.field===e||h.field===h.foreignKeyValue&&h.isForeignColumn()){var p=l.filterSettings.columns.filter((function(e){return e.uid===h.uid}))[0];if("FilterBar"===l.filterSettings.type&&!t){var d="[id='"+h.field+"_filterBarcell']";(i=l.parent.getHeaderContent().querySelector(d))&&(i.value="",delete l.values[e])}for(;a--;)n[a].uid===h.uid&&n.splice(a,1);var c=l.parent.getColumnHeaderByField(h.field);if(c.removeAttribute("aria-filtered"),"FilterBar"!==l.filterSettings.type){var u=l.parent.showColumnMenu?".e-columnmenu":".e-icon-filter";c.querySelector(u).classList.remove("e-filtered")}return l.isRemove=!0,l.actualPredicate[e]&&delete l.actualPredicate[e],l.values[e]&&delete l.values[e],l.refresh&&(S()&&!l.parent.isJsComponent?(l.parent.setProperties({filterSettings:{columns:l.filterSettings.columns}},!0),l.parent.notify(Er,{requestType:"filtering",type:wr,currentFilterObject:{field:h.field,operator:l.operator,value:l.value,predicate:l.predicate,matchCase:l.matchCase,ignoreAccent:l.ignoreAccent,actualFilterValue:{},actualOperator:{}},currentFilterColumn:h})):l.parent.notify(Er,{requestType:"filtering",type:wr,currentFilterObject:p,currentFilterColumn:h,action:"clearFilter"})),"break"}},l=this,h=0,p=s.length;h<p;h++){if("break"===a(h))break}this.updateFilterMsg()}},e.prototype.getModuleName=function(){return"filter"},e.prototype.keyUpHandlerImmediate=function(e){13!==e.keyCode&&this.keyUpHandler(e)},e.prototype.keyUpHandler=function(e){var t=this.parent,i=e.target;if(i&&Rt(i,".e-filterbar input")){var n=Tt(i,"th.e-filterbarcell");if(this.column=t.getColumnByUid(n.getAttribute("e-mappinguid")),!this.column)return;if("altDownArrow"===e.action&&this.parent.filterSettings.showFilterBarOperator){var r=Tt(i,"span").querySelector(".e-filterbaroperator");r.ej2_instances[0].showPopup(),r.focus()}"Immediate"!==this.filterSettings.mode&&(13!==e.keyCode||e.target.classList.contains("e-filterbaroperator"))||9===e.keyCode||(this.value=i.value.trim(),this.processFilter(e))}if("altDownArrow"===e.action&&"FilterBar"!==this.filterSettings.type){var o=t.focusModule.currentInfo.element;if(o&&o.classList.contains("e-headercell")){var s=t.getColumnByUid(o.firstElementChild.getAttribute("e-mappinguid"));this.openMenuByField(s.field),this.parent.focusModule.clearIndicator()}}"escape"===e.action&&"Menu"===this.filterSettings.type&&this.filterModule&&(this.filterModule.closeDialog(),t.notify("restore-Focus",{}))},e.prototype.updateCrossIcon=function(e){e.value.length&&e.nextElementSibling.classList.remove("e-hide")},e.prototype.updateFilterMsg=function(){if("FilterBar"===this.filterSettings.type){var e=this.parent,t=void 0,i=this.filterSettings.columns,n=(this.serviceLocator.getService("valueFormatter"),void 0);if(!this.filterSettings.showFilterBarStatus)return;if(i.length>0&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage")){this.filterStatusMsg="";for(var r=0;r<i.length;r++)if(n=e.grabColumnByUidFromAllCols(i[r].uid)||e.grabColumnByFieldFromAllCols(i[r].field),r&&(this.filterStatusMsg+=" && "),g(n.format))this.filterStatusMsg+=n.headerText+": "+this.values[n.field];else{var o="date"===n.type||"datetime"===n.type?this.valueFormatter.fromView(this.values[n.field],n.getParser(),n.type):this.values[n.field];if("date"!==n.type&&"datetime"!==n.type)t=this.serviceLocator.getService("valueFormatter").toView(o,n.getParser()).toString();else t=this.setFormatForFlColumn(o,n);this.filterStatusMsg+=n.headerText+": "+t}}e.allowPaging&&e.updateExternalMessage(this.filterStatusMsg),this.filterStatusMsg=""}},e.prototype.setFormatForFlColumn=function(e,t){return this.serviceLocator.getService("valueFormatter").toView(e,t.getFormatter()).toString()},e.prototype.checkForSkipInput=function(e,t){var i;if("number"===e.type)(wn.operatorSymbols[t]||this.skipNumberInput.indexOf(t)>-1)&&(i=!0);else if("string"===e.type)for(var n=0,r=t;n<r.length;n++){var o=r[n];this.skipStringInput.indexOf(o)>-1&&(i=!0)}return i},e.prototype.processFilter=function(e){this.stopTimer(),this.startTimer(e)},e.prototype.startTimer=function(e){var t=this;this.timer=window.setInterval((function(){t.onTimerTick()}),13===e.keyCode?0:this.filterSettings.immediateModeDelay)},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.onTimerTick=function(){var e,t="[id='"+this.column.field+"_filterBarcell']",i=this.element.querySelector(t);if(!i&&this.parent.getFrozenColumns()&&(i=this.parent.getHeaderContent().querySelector(t)),this.cellText[this.column.field]=i.value,this.stopTimer(),g(this.column.filterBarTemplate))e=JSON.parse(JSON.stringify(i.value));else{var n=this.column.filterBarTemplate.read;"string"==typeof n&&(n=a(n,window)),g(n)||(this.value=n.call(this,i))}g(this.value)||""===this.value?this.removeFilteredColsByField(this.column.field):(this.validateFilterValue(this.value),this.filterByMethod=!1,this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.filterSettings.enableCaseSensitivity,this.ignoreAccent),this.filterByMethod=!0,i.value=e,this.updateFilterMsg())},e.prototype.validateFilterValue=function(e){var t,i;this.parent;switch(this.matchCase=this.filterSettings.enableCaseSensitivity,this.column.type){case"number":this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal,t=[">","<","=","!"];for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1){i=n;break}this.getOperator(e.substring(i)),0!==i&&(this.value=e.substring(0,i)),""!==this.value&&e.length>=1&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type)),isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal,""===this.value||this.value instanceof Date||(this.getOperator(e),this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),g(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1,"*"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(e.length-1)?(this.value=this.value.slice(0,-1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.endsWith):this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.startsWith;break;case"boolean":"true"===e.toLowerCase()||"1"===e?this.value=!0:"false"===e.toLowerCase()||"0"===e?this.value=!1:e.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")),this.operator=this.filterOperators.equal;break;default:this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal}},e.prototype.getOperator=function(e){var t=e.charAt(0),i=e.slice(0,2),n=u({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},wn.operatorSymbols);(n.hasOwnProperty(t)||n.hasOwnProperty(i))&&(this.operator=n[t],this.value=e.substring(1),this.operator||(this.operator=n[i],this.value=e.substring(2))),this.operator!==this.filterOperators.lessThan&&this.operator!==this.filterOperators.greaterThan||"="===this.value.charAt(0)&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))},e.prototype.columnPositionChanged=function(e){this.parent.filterSettings.type},e.prototype.getLocalizedCustomOperators=function(){var e=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}];this.customOperators={stringOperator:[{value:"startswith",text:this.l10n.getConstant("StartsWith")},{value:"endswith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}],numberOperator:e,dateOperator:e,datetimeOperator:e,booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}]}},e.prototype.openMenuByField=function(e){var t=this.parent,i=t.getColumnByField(e),n=t.getColumnHeaderByField(e).querySelector(".e-filtermenudiv");if(n){var r=t.element.getBoundingClientRect(),o=n.getBoundingClientRect();this.filterDialogOpen(i,n,o.right-r.left,o.bottom-r.top)}},e.prototype.filterIconClickHandler=function(e){var t=e.target;if(t.classList.contains("e-filtermenudiv")&&("Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type)){var i=this.parent.getColumnByUid(Ka(t,"e-headercell").firstElementChild.getAttribute("e-mappinguid"));if(this.column=i,this.fltrDlgDetails.field===i.field&&this.fltrDlgDetails.isOpen)return;this.filterModule&&this.filterModule.closeDialog(),this.fltrDlgDetails={field:i.field,isOpen:!0},this.openMenuByField(i.field)}},e.prototype.clickHandler=function(e){if("FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&(Ka(e.target,"e-filterbarcell")&&e.target.classList.contains("e-input-group-icon")&&Tt(e.target,"div").querySelector(".e-filterbaroperator").focus(),e.target.classList.contains("e-list-item"))){var t=document.querySelector(".e-popup-open").getAttribute("id").replace("_popup","");-1!==t.indexOf("grid-column")&&Tt(document.getElementById(t),"div").querySelector(".e-filtertext").focus()}if("Immediate"===this.filterSettings.mode||"Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type){this.parent;var i=e.target,n=i.classList.contains("e-day"),r=Ka(this.parent.element,"e-dialog"),o=!1,s=Ka(i,"e-popup"),a=this.parent.element.querySelector(".e-filter-popup");if(r&&s&&(o=r.id===s.id),Ka(i,"e-filter-popup")||i.classList.contains("e-filtermenudiv"))return;if(!this.filterModule||Ka(i,"e-popup-wrapper")||Tt(i,".e-filter-item.e-menu-item")||n||(o&&!Ka(i,"e-filter-popup")&&!Ka(i,"e-popup-flmenu")||!s&&a)&&(this.filterModule.isresetFocus=Ka(i,"e-grid")&&Ka(i,"e-grid").id===this.parent.element.id,this.filterModule.closeDialog(i)),"Immediate"===this.filterSettings.mode&&i.classList.contains("e-clear-icon")){var l=i.previousElementSibling;this.removeFilteredColsByField(l.id.slice(0,-14))}}},e.prototype.filterHandler=function(e){var t;this.actualPredicate[e.field]=e.actualPredicate;for(var i=new yn(this.filterSettings.columns),n=(new on).where("field",this.filterOperators.equal,e.field),r=i.executeLocal(n),o=0;o<r.length;o++){for(var s=-1,a=0;a<this.filterSettings.columns.length;a++)if(r[o].field===this.filterSettings.columns[a].field){s=a;break}-1!==s&&this.filterSettings.columns.splice(s,1)}"clear-filter"===e.action&&S()&&!this.parent.isJsComponent&&this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.values[e.field]&&delete this.values[e.field];var l=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter";t=this.parent.getColumnHeaderByField(e.field).querySelector(l),"filtering"===e.action?(this.filterSettings.columns=this.filterSettings.columns.concat(e.filterCollection),this.filterSettings.columns.length&&t&&t.classList.add("e-filtered")):(t&&t.classList.remove("e-filtered"),e.requestType="filtering",this.parent.renderModule.refresh(e)),this.parent.dataBind()},e.prototype.updateFilter=function(){var e=this.filterSettings.columns;this.actualPredicate={};for(var t=0;t<e.length;t++){this.column=this.parent.getColumnByField(e[t].field)||wl(e[t].field,this.parent.getForeignKeyColumns());var i=e[t].field;this.parent.getColumnByField(e[t].field)||(i=wl(e[t].field,this.parent.getForeignKeyColumns()).field),this.refreshFilterIcon(i,e[t].operator,e[t].value,e[t].type,e[t].predicate,e[t].matchCase,e[t].ignoreAccent,e[t].uid)}},e.prototype.refreshFilterIcon=function(e,t,i,n,r,o,s,a){var l;l={field:e,predicate:r,matchCase:o,ignoreAccent:s,operator:t,value:i,type:n},this.actualPredicate[e]?this.actualPredicate[e].push(l):this.actualPredicate[e]=[l];var h=a?this.parent.grabColumnByUidFromAllCols(a).field:e;this.addFilteredClass(h)},e.prototype.addFilteredClass=function(e){var t;this.parent.showColumnMenu?t=this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu"):this.parent.getColumnByField(e)&&(t=this.parent.getColumnHeaderByField(e).querySelector(".e-icon-filter")),t&&t.classList.add("e-filtered")},e.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},e.prototype.getOperatorName=function(e){return document.getElementById(this.parent.getColumnByField(e).uid).ej2_instances[0].value},e}(),cw=function(){function e(e){Pa.Inject(dw),this.parent=e,this.isHierarchyFilter=!1,this.filteredResult=[],this.flatFilteredData=[],this.filteredParentRecs=[],this.addEventListener()}return e.prototype.getModuleName=function(){return"filter"},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("updateFilterRecs",this.updatedFilteredRecord,this),this.parent.on("clearFilters",this.clearFilterLevel,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updateFilterRecs",this.updatedFilteredRecord),this.parent.off("clearFilters",this.clearFilterLevel))},e.prototype.updatedFilteredRecord=function(e){l("uniqueIDFilterCollection",{},this.parent),this.flatFilteredData=e.data,this.filteredParentRecs=[],this.filteredResult=[],this.isHierarchyFilter=!1;for(var t=0;t<this.flatFilteredData.length;t++){var i=this.flatFilteredData[t];this.addParentRecord(i);var n=""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode;"Child"!==n&&"None"!==n||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key||(this.isHierarchyFilter=!0);var r=xl("childRecords",i);if(!g(r)&&r.length&&l("hasFilteredChildRecords",this.checkChildExsist(i),i),!g(xl("parentItem",i))){var o=Oh(this.parent,i.parentItem.uniqueID,!0);l("hasFilteredChildRecords",!0,o),o&&o.parentItem&&this.updateParentFilteredRecord(o)}}this.flatFilteredData.length>0&&this.isHierarchyFilter&&this.updateFilterLevel(),this.parent.notify("updateAction",{result:this.filteredResult})},e.prototype.updateParentFilteredRecord=function(e){var t=Oh(this.parent,e.parentItem.uniqueID,!0),i=a("uniqueIDFilterCollection",this.parent);t&&i.hasOwnProperty(t.uniqueID)&&l("hasFilteredChildRecords",!0,t),t&&t.parentItem&&this.updateParentFilteredRecord(t)},e.prototype.addParentRecord=function(e){var t=Oh(this.parent,e.parentUniqueID);if("None"!==(""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode)||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key){if(!g(t))("Child"!==(""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode)||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key||-1!==this.flatFilteredData.indexOf(t))&&this.addParentRecord(t);-1===this.filteredResult.indexOf(e)&&(this.filteredResult.push(e),l("uniqueIDFilterCollection."+e.uniqueID,e,this.parent))}else if(g(t)){if(-1!==this.flatFilteredData.indexOf(e))return void(-1===this.filteredResult.indexOf(e)&&(this.filteredResult.push(e),l("uniqueIDFilterCollection."+e.uniqueID,e,this.parent),e.hasFilteredChildRecords=!0))}else this.addParentRecord(t),-1!==this.flatFilteredData.indexOf(t)||-1!==this.filteredResult.indexOf(t)?-1===this.filteredResult.indexOf(e)&&(this.filteredResult.push(e),l("uniqueIDFilterCollection."+e.uniqueID,e,this.parent)):-1===this.filteredResult.indexOf(e)&&-1!==this.flatFilteredData.indexOf(e)&&(this.filteredResult.push(e),l("uniqueIDFilterCollection."+e.uniqueID,e,this.parent))},e.prototype.checkChildExsist=function(e){for(var t=xl("childRecords",e),i=!1,n=0;n<t.length;n++){var r=t[n].childRecords,o=""===this.parent.grid.searchSettings.key?this.parent.filterSettings.hierarchyMode:this.parent.searchSettings.hierarchyMode;if(!("Child"!==o&&"Both"!==o||0===this.parent.grid.filterSettings.columns.length&&""===this.parent.grid.searchSettings.key))a("uniqueIDFilterCollection",this.parent).hasOwnProperty(t[n].uniqueID)||(this.filteredResult.push(t[n]),l("uniqueIDFilterCollection."+t[n].uniqueID,t[n],this.parent),i=!0);if("None"===o&&(0!==this.parent.grid.filterSettings.columns.length||""!==this.parent.grid.searchSettings.key)&&-1!==this.flatFilteredData.indexOf(t[n])){i=!0;break}!g(r)&&r.length&&(i=this.checkChildExsist(t[n])),"Child"!==o&&"Both"!==o||!t.length||(i=!0)}return i},e.prototype.updateFilterLevel=function(){for(var e=this.filteredResult,t=this.filteredResult.length,i=0;i<t;i++){var n=Oh(this.parent,e[i].parentUniqueID);if(-1!==e.indexOf(n)){var r=Oh(this.parent,e[i].parentUniqueID,!0);e[i].filterLevel=r.filterLevel+1}else e[i].filterLevel=0,this.filteredParentRecs.push(e[i])}},e.prototype.clearFilterLevel=function(e){for(var t,i=0,n=e.flatData,r=n.length;i<r;i++){var o=(t=n[i]).filterLevel;!o&&0!==o&&g(t.hasFilteredChildRecords)||(t.hasFilteredChildRecords=null,t.filterLevel=null)}this.filteredResult=[],this.parent.notify("updateResults",{result:n,count:n.length})},e}(),uw=function(){function e(e){this.updatedEditFields=null,this.updatedAddFields=null,this.addedRecord=null,this.dialogEditValidationFlag=!1,this.ganttResources=[],this.previousResource=[],this.isResourceUpdate=!1,this.parent=e,this.localeObj=this.parent.localeObj,this.beforeOpenArgs={cancel:!1},this.types=this.getPredecessorType(),this.rowData={},this.editedRecord={},this.inputs={booleanedit:_d,dropdownedit:Cc,datepickeredit:nu,datetimepickeredit:Cu,maskededit:Tb,numericedit:Pc,stringedit:Ac},this.processDialogFields(),this.wireEvents()}return e.prototype.wireEvents=function(){this.parent.on("chartDblClick",this.dblClickHandler,this)},e.prototype.dblClickHandler=function(e){var t=this.parent.ganttChartModule.getRecordByTarget(e);g(t)||this.openEditDialog(t)},e.prototype.processDialogFields=function(){g(this.parent.editDialogFields)||this.parent.editDialogFields&&0===this.parent.editDialogFields.length?(this.updatedEditFields=this.getDefaultDialogFields(),this.updatedEditFields=this.validateDialogFields(this.updatedEditFields)):this.updatedEditFields=this.validateDialogFields(this.parent.editDialogFields),g(this.parent.addDialogFields)||this.parent.addDialogFields&&0===this.parent.addDialogFields.length?(this.updatedAddFields=this.getDefaultDialogFields(),this.updatedAddFields=this.validateDialogFields(this.updatedAddFields)):this.updatedAddFields=this.validateDialogFields(this.parent.addDialogFields)},e.prototype.validateDialogFields=function(e){for(var t=[],i=0,n=0;n<e.length;n++){var r=Ua(e[n]);"General"!==r.type||!g(r.fields)&&0!==r.fields.length||(r.fields=this.getGeneralColumnFields()),"Dependency"===r.type&&g(this.parent.taskFields.dependency)||"Resources"===r.type&&g(this.parent.taskFields.resourceInfo)||"Notes"===r.type&&g(this.parent.taskFields.notes)||("Custom"!==r.type||!g(r.fields)&&0!==r.fields.length||(i+=1,r.fields=this.getCustomColumnFields()),i>1||t.push(r))}return t},e.prototype.getGeneralColumnFields=function(){for(var e=[],t=0,i=Object.keys(this.parent.columnMapping);t<i.length;t++){var n=i[t];"dependency"!==n&&"resourceInfo"!==n&&"notes"!==n&&e.push(this.parent.columnMapping[n])}return e},e.prototype.getCustomColumnFields=function(){for(var e=[],t=0;t<this.parent.customColumns.length;t++)e.push(this.parent.customColumns[t]);return e},e.prototype.getDefaultDialogFields=function(){var e=[],t={},i=this.parent.columnMapping;return 0!==Object.keys(i).length&&(t.type="General",this.getGeneralColumnFields(),e.push(t)),g(a("dependency",i))||(t={},!1!==this.parent.columnByField[i.dependency.valueOf()].visible&&(t.type="Dependency"),e.push(t)),g(a("resourceInfo",i))||(t={},!1!==this.parent.columnByField[i.resourceInfo.valueOf()].visible&&(t.type="Resources"),e.push(t)),g(a("notes",i))||(t={},!1!==this.parent.columnByField[i.notes.valueOf()].visible&&(t.type="Notes"),e.push(t)),this.parent.customColumns.length>0&&((t={}).type="Custom",e.push(t)),e},e.prototype.openAddDialog=function(){this.isEdit=!1,this.editedRecord=this.composeAddRecord(),this.createDialog()},e.prototype.getMinimumStartDate=function(){var e=wn.aggregates.min(this.parent.flatData,"ganttProperties.startDate");return e=g(e)?new Date(this.parent.timelineModule.timelineStartDate.getTime()):new Date(e.getTime()),e=this.parent.dateValidationModule.checkStartDate(e),new Date(e.getTime())},e.prototype.composeAddRecord=function(){for(var e={ganttProperties:{}},t=this.parent.ganttColumns,i=this.parent.taskFields,n=this.parent.editModule.getNewTaskId(),r=0;r<t.length;r++){var o=t[r].field;o===i.id?(e[o]=n,e.ganttProperties.rowUniqueID=e[o]):t[r].field===i.startDate?(g(e[i.endDate])?e[o]=this.getMinimumStartDate():e[o]=new Date(e[i.endDate]),e.ganttProperties.startDate=new Date(e[o])):t[r].field===i.endDate?(g(e[i.startDate])?e[o]=this.getMinimumStartDate():e[o]=new Date(e[i.startDate]),e.ganttProperties.endDate=new Date(e[o])):t[r].field===i.duration?(e[o]=1,e.ganttProperties.duration=e[o],e.ganttProperties.durationUnit=this.parent.durationUnit.toLocaleLowerCase()):t[r].field===i.name?(e[o]="New Task "+n,e.ganttProperties.taskName=e[o]):t[r].field===i.progress?(e[o]=0,e.ganttProperties.progress=e[o]):t[r].field===i.work?(e[o]=0,e.ganttProperties.work=e[o]):"taskType"===t[r].field?(e[o]=this.parent.taskType,e.ganttProperties.taskType=e[o]):e[this.parent.ganttColumns[r].field]=""}return e},e.prototype.openToolbarEditDialog=function(){var e=this.parent;if(e.editModule&&e.editSettings.allowEditing){this.parent.ganttChartModule.focusedRowIndex>-1&&e.selectionModule&&e.selectionModule.selectRow(this.parent.ganttChartModule.focusedRowIndex,!1,!1);var t=e.selectionModule?"Row"!==e.selectionSettings.mode&&"Both"!==e.selectionSettings.mode||1!==e.selectionModule.selectedRowIndexes.length?"Cell"===e.selectionSettings.mode&&1===e.selectionModule.getSelectedRowCellIndexes().length?e.currentViewData[e.selectionModule.getSelectedRowCellIndexes()[0].rowIndex].ganttProperties.rowUniqueID:null:e.currentViewData[e.selectionModule.selectedRowIndexes[0]].ganttProperties.rowUniqueID:null;g(t)||this.openEditDialog(t)}},e.prototype.openEditDialog=function(e){var t=this.parent;"object"!=typeof e||g(e)?g(e)?t.selectedRowIndex>-1&&(this.rowData=t.currentViewData[t.selectedRowIndex],this.rowIndex=t.selectedRowIndex):(this.rowIndex=t.ids.indexOf(e.toString()),this.rowIndex>-1&&(this.rowData=t.flatData[this.rowIndex])):(this.rowIndex=this.parent.currentViewData.indexOf(e),this.rowIndex>-1&&(this.rowData=e)),this.isEdit=!0,"ResourceView"===this.parent.viewType&&0===this.rowData.level||0!==Object.keys(this.rowData).length&&(this.editedRecord=u({},{},this.rowData,!0),this.createDialog())},e.prototype.createDialog=function(){var e=this,t=this.parent,i={};this.beforeOpenArgs.dialogModel=i,this.beforeOpenArgs.rowData=this.editedRecord,this.beforeOpenArgs.rowIndex=this.rowIndex;var n=this.parent.isAdaptive?"":"600px",r=this.parent.createElement("div",{id:t.element.id+"_dialog",styles:"max-width:"+n});t.element.appendChild(r),i.animationSettings={effect:"None"},i.header=this.localeObj.getConstant(this.isEdit?"editDialogTitle":"addDialogTitle"),i.isModal=!0,i.cssClass="e-gantt-dialog",i.allowDragging=!this.parent.isAdaptive,i.showCloseIcon=!0;var o=this.parent.isAdaptive?{X:"top",Y:"left"}:{X:"center",Y:"center"};i.position=o,i.height=this.parent.isAdaptive?"100%":"auto",i.target=this.parent.element,i.close=this.dialogClose.bind(this),i.closeOnEscape=!0,i.open=function(t){var i=a("element",t),n=i.querySelector("#"+e.parent.element.id+"GeneralTabContainer");n&&n.scrollHeight>n.offsetHeight&&n.classList.add("e-scroll"),0===e.tabObj.selectedItem&&e.tabObj.select(0),e.parent.isAdaptive&&(i.style.maxHeight="none"),e.parent.focusModule&&e.parent.focusModule.setActiveElement(i)},i.locale=this.parent.locale,i.buttons=[{buttonModel:{content:this.localeObj.getConstant("saveButton"),cssClass:"e-primary"},click:this.buttonClick.bind(this)},{buttonModel:{cssClass:"e-flat",content:this.localeObj.getConstant("cancel")},click:this.buttonClick.bind(this)}],this.createTab(i,r)},e.prototype.buttonClick=function(e){var t=e.target;t.style.pointerEvents="none",this.localeObj.getConstant("cancel").toLowerCase()===e.target.innerText.trim().toLowerCase()?this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.hide(),this.dialogClose()):(this.initiateDialogSave(),t.style.pointerEvents="auto")},e.prototype.dialogClose=function(){this.dialog&&this.resetValues(),g(this.parent.focusModule)||g(this.parent.focusModule.getActiveElement(!0))||this.parent.focusModule.getActiveElement(!0).focus()},e.prototype.resetValues=function(){this.isEdit=!1,this.isAddNewResource=!1,this.editedRecord={},this.rowData={},this.rowIndex=-1,this.addedRecord=null,this.ganttResources=[],this.dialog&&!this.dialogObj.isDestroyed&&(this.destroyDialogInnerElements(),this.dialogObj.destroy(),Ct(this.dialog))},e.prototype.destroyDialogInnerElements=function(){for(var e=this.parent,t=this.beforeOpenArgs.tabModel.items,i=0;i<t.length;i++){var n=t[i].content,r=n.id;if(!g(r)||""!==r)if("General"===(r=(r=r.replace(e.element.id,"")).replace("TabContainer","")))this.destroyCustomField(n);else if("Dependency"===r){n.ej2_instances[0].destroy()}else if("Notes"===r){n.ej2_instances[0].destroy()}else if("Resources"===r){n.ej2_instances[0].destroy()}else-1!==r.indexOf("Custom")&&this.destroyCustomField(n)}},e.prototype.destroyCustomField=function(e){for(var t=e.childNodes,i=this.parent,n=0;n<t.length;n++){var r=t[n],o=r.querySelector('input[id^="'+i.element.id+'"]');if(o){var s=o.id.replace(i.element.id,""),a=r.querySelector("#"+i.element.id+s).ej2_instances[0];if(!g(a)){var l=i.columnByField[s];if(!g(l.edit)&&g(l.edit.params)){var h=l.edit.destroy;"string"==typeof h?(h=xl(h,window))():l.edit.destroy()}else a.destroy()}}}},e.prototype.destroy=function(){this.resetValues(),this.parent.isDestroyed||(this.parent.off("chartDblClick",this.dblClickHandler),this.parent.editModule.dialogModule=void 0)},e.prototype.getEditFields=function(){return this.isEdit?this.updatedEditFields:this.updatedAddFields},e.prototype.createTab=function(e,t){var i,n=this,r=this.parent,o={},s=[],a=this.getEditFields(),l=r.taskFields,h=a.length;o.items=s,o.locale=this.parent.locale,this.beforeOpenArgs.tabModel=o;var p=0;if(h>0)for(var d=0;d<h;d++){var c=a[d],u={};if("General"===c.type){if(0===Object.keys(r.columnMapping).length)continue;g(c.headerText)&&(c.headerText=this.localeObj.getConstant("generalTab")),u.content="General",this.beforeOpenArgs[u.content]=this.getFieldsModel(c.fields)}else if("Dependency"===c.type){if(g(l.dependency))continue;g(c.headerText)&&(c.headerText=this.localeObj.getConstant("dependency")),u.content="Dependency",this.beforeOpenArgs[u.content]=this.getPredecessorModel(c.fields)}else if("Resources"===c.type){if(g(l.resourceInfo))continue;g(c.headerText)&&(c.headerText=this.localeObj.getConstant("resourceName")),u.content="Resources",this.beforeOpenArgs[u.content]=this.getResourcesModel(c.fields)}else if("Notes"===c.type){if(g(l.notes))continue;g(c.headerText)&&(c.headerText=this.localeObj.getConstant("notes")),u.content="Notes",this.beforeOpenArgs[u.content]=this.getNotesModel(c.fields)}else{if(g(c.fields)||0===c.fields.length)continue;g(c.headerText)&&(c.headerText=this.localeObj.getConstant("customTab")),u.content="Custom"+p++,this.beforeOpenArgs[u.content]=this.getFieldsModel(c.fields)}u.header={text:c.headerText},s.push(u)}this.beforeOpenArgs.requestType=this.isEdit?"beforeOpenEditDialog":"beforeOpenAddDialog";var f={rowData:this.beforeOpenArgs.rowData,name:this.beforeOpenArgs.name,requestType:this.beforeOpenArgs.requestType,cancel:this.beforeOpenArgs.cancel};this.parent.trigger("actionBegin",S()?f:this.beforeOpenArgs,(function(s){if(n.renderTabItems(),!s.cancel){o.selected=n.tabSelectedEvent.bind(n),o.height=n.parent.isAdaptive?"100%":"auto",o.overflowMode="Scrollable",n.tabObj=new ag(o),n.tabObj.isStringTemplate=!0,i=n.parent.createElement("div",{id:r.element.id+"_Tab"}),n.tabObj.appendTo(i),e.content=i,n.dialog=t,n.dialogObj=new Fo(e),n.dialogObj.isStringTemplate=!0,n.dialogObj.appendTo(n.dialog);var a={action:"OpenDialog",requestType:n.isEdit?"openEditDialog":"openAddDialog",data:n.beforeOpenArgs.rowData,element:n.dialog,cancel:!1};S()&&n.parent.updateDataArgs(a),n.parent.trigger("actionComplete",a,(function(e){e.cancel&&n.resetValues()}))}}))},e.prototype.tabSelectedEvent=function(e){var t=this.parent,i=e.selectedContent.childNodes[0].id;if(this.parent.isAdaptive&&this.responsiveTabContent(i,t),i===t.element.id+"ResourcesTabContainer"){var n=t.element.querySelector("#"+i).ej2_instances[0],r=this.ganttResources,o=n.getCurrentViewRecords();r&&r.length>0&&o.forEach((function(e,i){for(var o=0;o<r.length;o++)e.taskData[t.resourceFields.id]!==r[o][t.resourceFields.id]||g(n.selectionModule)||-1!==n.getSelectedRowIndexes().indexOf(i)||n.selectRow(i)}))}else i===t.element.id+"NotesTabContainer"&&t.element.querySelector("#"+i).ej2_instances[0].refresh()},e.prototype.responsiveTabContent=function(e,t){var i=document.getElementById(t.element.id+"_dialog_dialog-content"),n=i.clientHeight;n-=i.querySelector(".e-tab-header").offsetHeight;var r=document.querySelector("#"+e);if(r.classList.contains("e-grid")){n-=r.ej2_instances[0].getHeaderContent().offsetHeight;var o=r.querySelector(".e-toolbar");o&&(n-=o.offsetHeight)}r.parentElement.style.height=n+"px"},e.prototype.getFieldsModel=function(e){for(var t={},i=this.parent.columnByField,n=0;n<e.length;n++)if(e[n]!==this.parent.taskFields.dependency&&e[n]!==this.parent.taskFields.resourceInfo&&e[n]!==this.parent.taskFields.notes&&!g(i[e[n]])){var r=e[n];this.createInputModel(i[r],t)}return t},e.prototype.createInputModel=function(e,t){var i=this,n=this.parent,r=this.parent.locale,o=this.parent.taskFields,s={placeholder:e.headerText,floatLabelType:"Auto"};switch(e.editType){case"booleanedit":var a={label:e.headerText,locale:r};t[e.field]=a;break;case"stringedit":var l=s;e.field!==n.columnMapping.duration&&e.field!==n.columnMapping.startDate&&e.field!==n.columnMapping.endDate||(l.change=function(t){i.validateScheduleFields(t,e,n)}),t[e.field]=s;break;case"numericedit":var h=s;o.progress===e.field&&(h.min=0,h.max=100),o.work===e.field&&(h.change=function(t){i.validateScheduleFields(t,e,n)}),t[e.field]=h;break;case"datepickeredit":var p=s;p.format=this.parent.getDateFormat(),p.strictMode=!0,p.firstDayOfWeek=n.timelineModule.customTimelineSettings.weekStartDay,e.field!==n.columnMapping.startDate&&e.field!==n.columnMapping.endDate||(p.renderDayCell=this.parent.renderWorkingDayCell.bind(this.parent),p.change=function(t){i.validateScheduleFields(t,e,n)}),t[e.field]=p;break;case"datetimepickeredit":var d=s;d.format=this.parent.getDateFormat(),d.strictMode=!0,d.firstDayOfWeek=n.timelineModule.customTimelineSettings.weekStartDay,e.field!==n.columnMapping.startDate&&e.field!==n.columnMapping.endDate||(d.renderDayCell=this.parent.renderWorkingDayCell.bind(this.parent),d.change=function(t){i.validateScheduleFields(t,e,n)}),t[e.field]=d;break;case"dropdownedit":if("taskType"===e.field||e.field===n.columnMapping.manual){s.dataSource=[{ID:1,Value:"FixedUnit"},{ID:2,Value:"FixedWork"},{ID:3,Value:"FixedDuration"}],s.fields={value:"Value"},s.change=function(t){e.field===o.manual&&(i.editedRecord.ganttProperties.isAutoSchedule=!t.value),i.validateScheduleFields(t,e,n)}}t[e.field]=s;break;case"maskededit":t[e.field]=s}return g(e.edit)||g(e.edit.params)||u(t[e.field],e.edit.params),t},e.prototype.validateScheduleFields=function(e,t,i){var n,r=i.editModule.dialogModule.dialog,o=null,s=i.editModule.dialogModule.editedRecord;g(e.element)?g(e.container)?g(e.event.path[1])||(o=(n=e.event.path[1]).querySelector("input").getAttribute("id"),n=n.querySelector("#"+o)):(o=(n=e.container).querySelector("input").getAttribute("id"),n=n.querySelector("#"+o)):o=(n=e.element).getAttribute("id");var a=n.value,l=o.replace(i.element.id,"");this.validateScheduleValuesByCurrentField(l,a,this.editedRecord);var h=s.ganttProperties,p=i.taskFields;return g(p.startDate)||this.updateScheduleFields(r,h,"startDate"),g(p.endDate)||this.updateScheduleFields(r,h,"endDate"),g(p.duration)||this.updateScheduleFields(r,h,"duration"),g(p.work)||this.updateScheduleFields(r,h,"work"),this.dialogEditValidationFlag=!1,!0},e.prototype.updateScheduleFields=function(e,t,i){var n,r=this.parent,o=r.element.id,s=a(i,r.columnMapping),l=r.columnByField[s],h=this.parent.taskFields;if("stringedit"===l.editType){var p=e.querySelector("#"+o+s).ej2_instances[0];n=g(l.edit)||g(l.edit.read)?g(l.valueAccessor)?this.parent.dataOperation.getDurationString(t.duration,t.durationUnit):l.valueAccessor(s,r.editModule.dialogModule.editedRecord,l):l.edit.read(),p.value!==n.toString()&&h.duration===s?(p.value=n,p.dataBind()):h.startDate!==s&&h.endDate!==s||(p.value=h.startDate===s?t.startDate.toString():t.endDate.toString(),p.dataBind())}else if("datepickeredit"===l.editType||"datetimepickeredit"===l.editType){var d=(l.editType,e.querySelector("#"+o+s).ej2_instances[0]);n=t[i],(g(d.value)&&!g(n)||g(n)&&!g(d.value)||d.value!==n&&!g(d.value)&&!g(n)&&d.value.toString()!==n.toString())&&(d.value=n,d.dataBind())}else if("numericedit"===l.editType){var c=e.querySelector("#"+o+s).ej2_instances[0];g(n=t[i])||(c.value=n,c.dataBind())}},e.prototype.validateDuration=function(e){var t=e.ganttProperties;if(!this.dialogEditValidationFlag){g(t.duration)?(this.parent.setRecordValue("endDate",null,t,!0),this.parent.setRecordValue("isMilestone",!1,t,!0)):Fl(t)||!g(t.startDate)?(e.ganttProperties.isMilestone&&0!==e.ganttProperties.duration&&this.parent.dateValidationModule.calculateStartDate(e),this.parent.dateValidationModule.calculateEndDate(e)):Fl(t)||g(t.endDate)||this.parent.dateValidationModule.calculateStartDate(e);var i=0===t.duration;this.parent.setRecordValue("isMilestone",i,t,!0),this.dialogEditValidationFlag=!0}},e.prototype.validateStartDate=function(e){var t=e.ganttProperties,i=this.parent.taskFields;this.dialogEditValidationFlag||(g(t.startDate)?(this.parent.setRecordValue("duration",null,t,!0),this.parent.setRecordValue("isMilestone",!1,t,!0),this.parent.allowUnscheduledTasks&&g(i.endDate)&&this.parent.setRecordValue("endDate",null,t,!0)):Fl(t)?g(i.duration)?this.parent.dateValidationModule.calculateDuration(e):(g(i.endDate),this.parent.dateValidationModule.calculateEndDate(e)):g(t.endDate)?g(t.duration)||this.parent.dateValidationModule.calculateEndDate(e):this.parent.dateValidationModule.calculateDuration(e),this.dialogEditValidationFlag=!0)},e.prototype.validateEndDate=function(e){var t=e.ganttProperties,i=this.parent.taskFields;this.dialogEditValidationFlag||(g(t.endDate)?(this.parent.setRecordValue("duration",null,t,!0),this.parent.setRecordValue("isMilestone",!1,t,!0)):Fl(t)?g(i.duration)?this.parent.dateValidationModule.calculateDuration(e):g(t.startDate)?this.parent.dateValidationModule.calculateStartDate(e):this.parent.dateValidationModule.calculateDuration(e):g(t.duration)?g(t.startDate)||this.parent.dateValidationModule.calculateDuration(e):this.parent.dateValidationModule.calculateStartDate(e),this.dialogEditValidationFlag=!0)},e.prototype.validateScheduleValuesByCurrentField=function(e,t,i){var n=this.parent,r=i.ganttProperties,o=n.taskFields;if(o.duration===e&&(g(t)||""===t?n.allowUnscheduledTasks&&this.parent.setRecordValue("duration",null,r,!0):n.dataOperation.updateDurationValue(t,r),this.validateDuration(i),this.parent.editModule.updateResourceRelatedFields(i,"duration")),o.startDate===e){if(""!==t){var s=this.parent.dateValidationModule.getDateFromFormat(t);s=this.parent.dateValidationModule.checkStartDate(s,r),this.parent.setRecordValue("startDate",s,r,!0)}else n.allowUnscheduledTasks&&!i.hasChildRecords&&this.parent.setRecordValue("startDate",null,r,!0);this.validateStartDate(i)}if(o.endDate===e){if(""!==t){var a=this.parent.dateValidationModule.getDateFromFormat(t);0===a.getHours()&&86400!==n.defaultEndTime&&this.parent.dateValidationModule.setTime(n.defaultEndTime,a),a=this.parent.dateValidationModule.checkEndDate(a,r),(g(r.startDate)||a.getTime()>r.startDate.getTime())&&this.parent.setRecordValue("endDate",a,r,!0)}else n.allowUnscheduledTasks&&this.parent.setRecordValue("endDate",null,r,!0);this.validateEndDate(i)}return o.work===e&&(g(t)||""===t||(this.parent.setRecordValue("work",t,r,!0),this.parent.editModule.updateResourceRelatedFields(i,"work"),this.validateDuration(i))),"taskType"===e&&this.parent.setRecordValue("taskType",t,r,!0),o.manual===e&&this.parent.editModule.updateTaskScheduleModes(i),!0},e.prototype.getPredecessorModel=function(e){(g(e)||0===e.length)&&(e=["ID","Name","Type","Offset","UniqueId"]);var t={editSettings:{allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"}};t.locale=this.parent.locale,t.dataSource=[],t.rowHeight=this.parent.isAdaptive?48:null,t.toolbar=[{id:this.parent.element.id+"DependencyTabContainer_add",prefixIcon:"e-add",tooltipText:this.localeObj.getConstant("add"),align:"Right",text:this.parent.isAdaptive?"":this.localeObj.getConstant("add")},{id:this.parent.element.id+"DependencyTabContainer_delete",prefixIcon:"e-delete",tooltipText:this.localeObj.getConstant("delete"),align:"Right",text:this.parent.isAdaptive?"":this.localeObj.getConstant("delete")}];for(var i=[],n=0;n<e.length;n++){var r={};"id"===e[n].toLowerCase()?(r={field:"id",headerText:this.localeObj.getConstant("id"),allowEditing:!1,width:"70px"},i.push(r)):"name"===e[n].toLowerCase()?(r={field:"name",headerText:this.localeObj.getConstant("name"),editType:"stringedit",width:"250px",validationRules:{required:!0}},i.push(r)):"type"===e[n].toLowerCase()?(r={field:"type",headerText:this.localeObj.getConstant("type"),editType:"dropdownedit",dataSource:this.types,foreignKeyField:"id",foreignKeyValue:"text",defaultValue:"FS",validationRules:{required:!0},width:"150px"},i.push(r)):"offset"===e[n].toLowerCase()?(r={field:"offset",headerText:this.localeObj.getConstant("offset"),editType:"stringedit",defaultValue:"0 days",validationRules:{required:!0},width:"100px"},i.push(r)):"uniqueid"===e[n].toLowerCase()&&(r={field:"uniqueId",isPrimaryKey:!0,visible:!1,defaultValue:Wl().toString()},i.push(r))}return t.columns=i,t.height=this.parent.isAdaptive?"100%":"153px",t},e.prototype.getResourcesModel=function(e){var t=this.parent.resourceFields;(g(e)||0===e.length)&&(e=[t.id,t.name,t.unit,t.group]);for(var i={allowFiltering:!0,treeColumnIndex:-1,editSettings:{allowEditing:!0,mode:"Cell"},locale:this.parent.locale,allowSelection:!0,rowHeight:this.parent.isAdaptive?48:null,filterSettings:{type:"Menu"},selectionSettings:{checkboxOnly:!0,checkboxMode:"Default",persistSelection:!0,type:"Multiple"}},n=[{type:"checkbox",allowEditing:!1,allowSorting:!1,allowFiltering:!1,width:60}],r=0;r<e.length;r++){var o={};e[r]===t.id?(o={field:t.id,headerText:this.localeObj.getConstant("id"),isPrimaryKey:!0,width:"100px",allowEditing:!1},n.push(o)):e[r]===t.name?(o={field:t.name,headerText:this.localeObj.getConstant("name"),allowEditing:!1},n.push(o)):e[r]===t.unit?(o={field:t.unit,headerText:this.localeObj.getConstant("unit"),editType:"numericedit",edit:{params:{min:0}}},n.push(o)):e[r]!==t.group||g(t.group)||(o={field:t.group,headerText:this.localeObj.getConstant("group"),allowEditing:!1},n.push(o))}return i.columns=n,i.height=this.parent.isAdaptive?"100%":"196px",i},e.prototype.getNotesModel=function(e){return(g(e)||0===e.length)&&(e=["Bold","Italic","Underline","StrikeThrough","FontName","FontSize","FontColor","BackgroundColor","LowerCase","UpperCase","|","Alignments","OrderedList","UnorderedList","Outdent","Indent","|","CreateTable","CreateLink","|","ClearFormat","Print","|","Undo","Redo"]),{placeholder:this.localeObj.getConstant("writeNotes"),toolbarSettings:{items:e},height:this.parent.isAdaptive?"100%":"auto",locale:this.parent.locale}},e.prototype.createDivElement=function(e,t){return ct("div",{className:e,id:t})},e.prototype.createInputElement=function(e,t,i,n){return ct(n||"input",{className:e,attrs:{type:"text",id:t,name:i,title:i}})},e.prototype.renderTabItems=function(){for(var e=this.beforeOpenArgs.tabModel.items,t=0,i=0;i<e.length;i++){var n=e[i];n.content instanceof HTMLElement||("General"===n.content?n.content=this.renderGeneralTab(n.content):"Dependency"===n.content?(this.editedRecord.hasChildRecords&&(n.disabled=!0),n.content=this.renderPredecessorTab(n.content)):"Resources"===n.content?n.content=this.renderResourceTab(n.content):n.content==="Custom"+t?(n.content=this.renderCustomTab(n.content),t++):"Notes"===n.content&&(n.content=this.renderNotesTab(n.content)))}},e.prototype.renderGeneralTab=function(e){for(var t=this.parent,i=this.beforeOpenArgs[e],n=this.createDivElement("e-edit-form-row",t.element.id+""+e+"TabContainer"),r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];if(!1!==this.parent.columnByField[s].visible){var a=this.parent.columnByField[s],l=i[s];n.appendChild(this.renderInputElements(l,a))}}return n},e.prototype.isCheckIsDisabled=function(e){var t=!1;return(!1===e.allowEditing||e.isPrimaryKey||this.parent.readOnly)&&(-1!==this.parent.customColumns.indexOf(e.field)||e.field===this.parent.taskFields.id||e.field===this.parent.taskFields.name||e.field===this.parent.taskFields.duration||e.field===this.parent.taskFields.progress||e.field===this.parent.taskFields.startDate||e.field===this.parent.taskFields.endDate||e.field===this.parent.taskFields.baselineStartDate||e.field===this.parent.taskFields.baselineEndDate||e.field===this.parent.taskFields.work||"taskType"===e.field)&&(t=!0),this.isEdit&&(e.field===this.parent.taskFields.id&&(t=!0),this.editedRecord.hasChildRecords&&(e.field===this.parent.taskFields.endDate||e.field===this.parent.taskFields.duration||e.field===this.parent.taskFields.progress||e.field===this.parent.taskFields.work||"taskType"===e.field)&&(t=!0)),t},e.prototype.renderPredecessorTab=function(e){var t=this,i=this.parent,n=this.beforeOpenArgs[e],r=this.parent.columnByField[this.parent.taskFields.dependency];(!1===r.allowEditing||r.isPrimaryKey||this.parent.readOnly)&&(n.editSettings.allowEditing=!1,n.editSettings.allowAdding=!1,n.editSettings.allowDeleting=!1);var o=this.beforeOpenArgs.rowData,s=[];this.taskNameCollection(),this.isEdit&&(s=this.predecessorEditCollection(o),this.updatePredecessorDropDownData(o)),n.dataSource=s,n.actionBegin=this.gridActionBegin.bind(this),n.columns[1].edit={write:function(e){"add"===a("requestType",e)&&l("rowData.uniqueId",Wl(),e);new Pb({dataSource:new yn(t.idCollection),popupHeight:"180px",allowCustom:!1,fields:{value:"text"},value:e.rowData.name,change:function(e){var i=Tt(e.element,"tr").querySelector("#"+t.parent.element.id+"DependencyTabContainerid");i&&(g(e.itemData)||g(e.item)?i.value="":i.value=e.itemData.id)},autofill:!0}).appendTo(e.element)},read:function(e){return e.ej2_instances[0].value}},Pa.Inject(Tu,fg,yg,bg);var h=new Pa(n),p=this.createDivElement("e-dependent-div",i.element.id+""+e+"TabContainer");return h.appendTo(p),p},e.prototype.gridActionBegin=function(e){var t=this,i=this.beforeOpenArgs.Dependency;if("add"===e.requestType||"beginEdit"===e.requestType){var n="add"!==e.requestType;this.idCollection=u([],[],this.preTableCollection,!0);for(var r=i.dataSource,o=function(i){s.idCollection.forEach((function(o,s){if(o.id===a("id",r[i])){var l=a("rowData",e);if(n&&a("id",l)===o.id)return;t.idCollection.splice(t.idCollection.indexOf(o),1)}}))},s=this,l=0;l<=r.length;l++)o(l)}},e.prototype.updateResourceCollection=function(e,t){if(!g(e.data)&&Object.keys(e.data).length){var i=this.parent.element.querySelector("#"+t).ej2_instances[0];if(!g(i)&&i.getSelectedRecords().length>0){var n=i.getSelectedRecords(),r=void 0,o=[];for(r=0;r<n.length;r++)o.push(n[r].taskData);this.ganttResources=u([],o)}else this.ganttResources=[]}else this.ganttResources=[]},e.prototype.renderResourceTab=function(e){var t=this,i=this.parent,n=i.resourceFields,r=this.beforeOpenArgs.rowData,o=r.ganttProperties.resourceInfo,s=this.beforeOpenArgs[e],a=i.element.id+""+e+"TabContainer",l=u([],[],i.resources,!0);if(this.parent.dataOperation.updateResourceUnit(l),!g(o)){var h=void 0,p=o.length,d=void 0,c=l.length;for(h=0;h<p;h++)for(d=0;d<c;d++)o[h][n.id]===l[d][n.id]&&(l[d][n.unit]=o[h][n.unit])}s.dataSource=l;var f=r.ganttProperties.resourceInfo;if(this.isEdit&&!g(f))for(var m=0;m<f.length;m++)this.ganttResources.push(f[m]);s.rowSelected=function(e){t.updateResourceCollection(e,a)},s.rowDeselected=function(e){t.updateResourceCollection(e,a)};var y=this.createDivElement("e-resource-div",a);hp.Inject(Nh,cw,Lu);var v=new hp(s),b=this.parent.columnByField[this.parent.taskFields.resourceInfo];return(!1===b.allowEditing||b.isPrimaryKey||this.parent.readOnly)&&(v.allowSelection=!1,v.allowFiltering=!1,v.editSettings.allowEditing=!1),v.appendTo(y),y},e.prototype.renderCustomTab=function(e){return this.renderGeneralTab(e)},e.prototype.renderNotesTab=function(e){var t=this.parent,i=this.beforeOpenArgs[e],n=this.editedRecord.ganttProperties,r=this.createDivElement("",t.element.id+""+e+"TabContainer");Qf.Inject(_y,Yy,Fv,Vv,jv),i.value=n.notes;var o=this.parent.columnByField[this.parent.taskFields.notes];return(!1===o.allowEditing||o.isPrimaryKey||this.parent.readOnly)&&(i.enabled=!1),new Qf(i).appendTo(r),r},e.prototype.renderInputElements=function(e,t){var i,n=this,r=this.parent.element.id,o=this.editedRecord,s=this.createDivElement("e-edit-form-column"),a={column:t,data:o};if(!g(t.edit)&&g(t.edit.params)){var l=t.edit.create;(i="string"==typeof l?(l=xl(l,window))(a):t.edit.create(a)).className="",i.setAttribute("type","text"),i.setAttribute("id",r+""+t.field),i.setAttribute("name",t.field),i.setAttribute("title",t.field),s.appendChild(i)}else i=this.createInputElement("",r+""+t.field,t.field),s.appendChild(i);if(e.enabled=!this.isCheckIsDisabled(t),t.field===this.parent.taskFields.duration)if(g(t.valueAccessor)){if(g(t.edit)){var h=o.ganttProperties;e.value=this.parent.dataOperation.getDurationString(h.duration,h.durationUnit)}}else e.value=t.valueAccessor(t.field,o,t);else"booleanedit"===t.editType?!0===o[t.field]?e.checked=!0:e.checked=!1:e.value=o[t.field];if(!g(t.edit)&&g(t.edit.params)){var p=t.edit.write,d=void 0;d="string"==typeof p?(p=xl(p,window))({column:t,rowData:o,element:i}):t.edit.write({column:t,rowData:o,element:i}),t.field===this.parent.taskFields.duration&&(d.change=function(e){n.validateScheduleFields(e,t,n.parent)})}else{(d=new this.inputs[t.editType](e)).appendTo(i)}return s},e.prototype.taskNameCollection=function(){var e=this.parent.flatData;this.preTaskIds=[],this.preTableCollection=[];for(var t=0;t<e.length;t++){var i=e[t];if(!i.hasChildRecords){var n="ResourceView"===this.parent.viewType?i.ganttProperties.taskId.toString():i.ganttProperties.rowUniqueID.toString(),r={id:n,text:n+"-"+i.ganttProperties.taskName,value:n};this.preTaskIds.push(r.id),this.preTableCollection.push(r)}}},e.prototype.predecessorEditCollection=function(e){var t=[],i=e.ganttProperties;if(this.isEdit&&!g(this.parent.taskFields.dependency)&&!g(e)&&!g(i.predecessor))for(var n=i.predecessor,r=this.preTableCollection,o=0;o<n.length;o++){var s=n[o].from.toString(),a={};if(("ResourceView"===this.parent.viewType?i.taskId:i.rowUniqueID).toString()!==s){a.id=s;for(var l=0;l<r.length;l++)if(r[l].value===s){a.name=r[l].text;break}a.type=n[o].type;var h=n[o].offset,p=n[o].offsetUnit;a.offset=this.parent.dataOperation.getDurationString(h,p),a.uniqueId=Wl(),t.push(a)}}return t},e.prototype.updatePredecessorDropDownData=function(e){var t,i="ResourceView"===this.parent.viewType?e.ganttProperties.taskId.toString():e.ganttProperties.rowUniqueID.toString();t=this.preTaskIds.indexOf(i),this.preTableCollection.splice(t,1),this.preTaskIds.splice(t,1),this.validSuccessorTasks(e,this.preTaskIds,this.preTableCollection)},e.prototype.validSuccessorTasks=function(e,t,i){var n=this,r=e.ganttProperties;if(r.predecessor&&r.predecessor.length>0){var o=r.predecessor,s="ResourceView"===this.parent.viewType?r.taskId.toString():r.rowUniqueID.toString();o.forEach((function(e){if(e.from.toString()===s){var r,o=e.to;(r=t.indexOf(o))>-1&&(t.splice(r,1),i.splice(r,1));var a=n.parent.connectorLineModule.getRecordByID(o);n.validSuccessorTasks(a,t,i)}}))}},e.prototype.getPredecessorType=function(){var e=[this.parent.getPredecessorTextValue("SS"),this.parent.getPredecessorTextValue("SF"),this.parent.getPredecessorTextValue("FS"),this.parent.getPredecessorTextValue("FF")];return[{id:"FS",text:e[2],value:e[2]},{id:"FF",text:e[3],value:e[3]},{id:"SS",text:e[0],value:e[0]},{id:"SF",text:e[1],value:e[1]}]},e.prototype.initiateDialogSave=function(){this.isEdit?this.parent.initiateEditAction(!0):this.addedRecord={};for(var e=this.parent,t=this.beforeOpenArgs.tabModel.items,i=0;i<t.length;i++){var n=t[i].content;g(s=n.id)&&""===s||("General"===(s=(s=s.replace(e.element.id,"")).replace("TabContainer",""))?this.updateGeneralTab(n,!1):"Dependency"===s?this.updatePredecessorTab(n):"Notes"===s?this.updateNotesTab(n):"Resources"===s?this.updateResourceTab(n):-1!==s.indexOf("Custom")&&this.updateCustomTab(n))}if(this.isEdit){this.parent.dataOperation.updateWidthLeft(this.rowData);var r={data:this.rowData,action:"DialogEditing"};this.parent.editModule.initiateUpdateAction(r)}else if("ResourceView"===this.parent.viewType){var o=u({},this.addedRecord,!0);if(o[this.parent.taskFields.resourceInfo].length)for(i=0;i<o[this.parent.taskFields.resourceInfo].length;i++){var s=o[this.parent.taskFields.resourceInfo][i].toString(),a=this.parent.getTaskIds().indexOf("R"+s.toString());if(-1!==a){this.parent.editModule.addRecord(this.addedRecord,"Child",a);break}}else this.parent.editModule.addRecord(this.addedRecord,"Bottom")}else this.parent.editModule.addRecord(this.addedRecord,this.parent.editSettings.newRowPosition);return!0},e.prototype.updateGeneralTab=function(e,t){var i=this.parent,n=e.childNodes,r={};this.isEdit||(r=this.addedRecord);for(var o=0;o<n.length;o++){var s=n[o],a=s.querySelector('input[id^="'+i.element.id+'"]');if(a){var l=a.id.replace(i.element.id,""),h=s.querySelector("#"+i.element.id+l).ej2_instances[0],p=i.columnByField[l];if(!g(p.edit)&&g(p.edit.params)){var d=p.edit.read;"string"==typeof d?(d=xl(d,window),r[l]=d(a,h.value)):r[l]=p.edit.read(a,h.value)}else t&&"booleanedit"===p.editType?!0===a.checked?r[l]=!0:r[l]=!1:r[l]=h.value}}this.isEdit&&(this.updateScheduleProperties(this.editedRecord,this.rowData),i.editModule.validateUpdateValues(r,this.rowData,!0))},e.prototype.updateScheduleProperties=function(e,t){this.parent.setRecordValue("startDate",e.ganttProperties.startDate,t.ganttProperties,!0),this.parent.setRecordValue("endDate",e.ganttProperties.endDate,t.ganttProperties,!0),this.parent.setRecordValue("duration",e.ganttProperties.duration,t.ganttProperties,!0),this.parent.setRecordValue("durationUnit",e.ganttProperties.durationUnit,t.ganttProperties,!0),this.parent.setRecordValue("work",e.ganttProperties.work,t.ganttProperties,!0),g(this.parent.taskFields.startDate)||this.parent.dataOperation.updateMappingData(this.rowData,this.parent.taskFields.startDate),g(this.parent.taskFields.endDate)||this.parent.dataOperation.updateMappingData(this.rowData,this.parent.taskFields.endDate),g(this.parent.taskFields.duration)||(this.parent.dataOperation.updateMappingData(this.rowData,this.parent.taskFields.duration),this.parent.setRecordValue("durationUnit",e.ganttProperties.durationUnit,this.rowData,!0),0===this.rowData.ganttProperties.duration?this.parent.setRecordValue("isMilestone",!0,this.rowData.ganttProperties,!0):this.parent.setRecordValue("isMilestone",!1,this.rowData.ganttProperties,!0)),g(this.parent.taskFields.work)||this.parent.dataOperation.updateMappingData(this.rowData,this.parent.taskFields.work),g(this.parent.taskFields.manual)||this.parent.dataOperation.updateMappingData(this.rowData,this.parent.taskFields.manual)},e.prototype.updatePredecessorTab=function(e){var t=e.ej2_instances[0];t.isEdit&&t.endEdit();for(var i=t.dataSource,n=[],r=[],o="",s=[],a=0;a<i.length;a++){var l=i[a],h=l.name.split("-")[0];if(l.id!==h&&(l.id=h),-1===s.indexOf(l.id)){var p=l.id+l.type;l.offset&&-1!==l.offset.indexOf("-")?p+=l.offset:p+="+"+l.offset,n.push(p),s.push(l.id)}}this.isEdit?(n.length>0?(r=this.parent.predecessorModule.calculatePredecessor(n.join(","),this.rowData),this.parent.setRecordValue("predecessor",r,this.rowData.ganttProperties,!0),o=this.parent.predecessorModule.getPredecessorStringValue(this.rowData)):(r=[],this.parent.setRecordValue("predecessor",r,this.rowData.ganttProperties,!0),o=""),this.parent.setRecordValue("predecessorsName",o,this.rowData.ganttProperties,!0),this.parent.setRecordValue("taskData."+this.parent.taskFields.dependency,o,this.rowData),this.parent.setRecordValue(this.parent.taskFields.dependency,o,this.rowData),this.parent.predecessorModule.updateUnscheduledDependency(this.rowData)):this.addedRecord[this.parent.taskFields.dependency]=n.length>0?n.join(","):""},e.prototype.updateResourceTab=function(e){var t=e.ej2_instances[0];t&&t.grid.endEdit();var i=this.ganttResources;"ResourceView"!==this.parent.viewType||g(this.rowData.ganttProperties)||(JSON.stringify(this.ganttResources)!==JSON.stringify(this.rowData.ganttProperties.resourceInfo)?(this.isResourceUpdate=!0,this.previousResource=g(this.rowData.ganttProperties.resourceInfo)?[]:this.rowData.ganttProperties.resourceInfo.slice()):this.isResourceUpdate=!1);var n=[];if(this.isEdit)this.parent.setRecordValue("resourceInfo",i,this.rowData.ganttProperties,!0),this.parent.dataOperation.updateMappingData(this.rowData,"resourceInfo"),this.parent.editModule.updateResourceRelatedFields(this.rowData,"resource"),this.validateDuration(this.rowData);else{for(var r=0;r<i.length;r++)n.push(i[r][this.parent.resourceFields.id]),this.isAddNewResource=!0;this.addedRecord[this.parent.taskFields.resourceInfo]=n}},e.prototype.updateNotesTab=function(e){var t=this.parent,i=e.ej2_instances[0];this.isEdit?(this.parent.setRecordValue("notes",i.getHtml(),this.rowData.ganttProperties,!0),t.dataOperation.updateMappingData(this.rowData,"notes")):this.addedRecord[this.parent.taskFields.notes]=i.getHtml()},e.prototype.updateCustomTab=function(e){this.updateGeneralTab(e,!0)},e}(),gw="e-label-top",fw="e-label-bottom";function mw(e,t,i,n,r,o,s){var a,l;a=ct("span",{className:"e-float-line"}),l=ct("label",{className:"e-float-text"}),g(i.id)||""===i.id||(l.id="label_"+i.id.replace(/ /g,"_"),St(i,{"aria-labelledby":l.id})),g(n.placeholder)||""===n.placeholder||(l.innerText=Oi.sanitize(n.placeholder),n.removeAttribute("placeholder")),l.innerText=Oi.sanitize(s),t.appendChild(a),t.appendChild(l),e.classList.add("e-float-input"),function(e,t){e&&e.length>0?(ut([t],gw),gt([t],fw)):(gt([t],gw),ut([t],fw))}(r,l),"Always"===o&&(l.classList.contains(fw)&&gt([l],fw),ut([l],gw))}function yw(e,t,i){e&&e.length?t.placeholder="":t.placeholder=i}var vw=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bw=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},ww="e-hide-listitem",Cw="e-chips",Sw=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.clearIconWidth=0,n.isValidKey=!1,n.selectAllEventData=[],n.selectAllEventEle=[],n.isDynamicDataChange=!1,n.scrollFocusStatus=!1,n.keyDownStatus=!1,n}return vw(t,e),t.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},t.prototype.requiredModules=function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},t.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&(ut([this.overAllWrapper],n.split(" ")),ut([this.popupWrapper],n.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:["id"].indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[i]):0===i.indexOf("data")||["name","required","aria-required","form"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","role","style","class"].indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[i]):this.inputElement.setAttribute(i,this.htmlAttributes[i])}}},t.prototype.updateReadonly=function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},t.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))},t.prototype.updateCssClass=function(){if(!g(this.cssClass)&&""!==this.cssClass){var e=this.cssClass;""!==(e=this.cssClass.replace(/\s+/g," ").trim())&&(ut([this.overAllWrapper],e.split(" ")),ut([this.popupWrapper],e.split(" ")))}},t.prototype.updateOldPropCssClass=function(e){g(e)||""===e||""!==(e=e.replace(/\s+/g," ").trim())&&(gt([this.overAllWrapper],e.split(" ")),gt([this.popupWrapper],e.split(" ")))},t.prototype.onPopupShown=function(){var e=this;if(me.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var t=this;window.onpopstate=function(){t.hidePopup(),t.inputElement.focus()},history.pushState({},"")}var i={popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}};this.trigger("open",i,(function(t){t.cancel||(e.focusAtFirstListItem(),document.body.appendChild(e.popupObj.element),"CheckBox"===e.mode&&e.enableGroupCheckBox&&!g(e.fields.groupBy)&&e.updateListItems(e.list.querySelectorAll("li.e-list-item"),e.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===e.mode||e.showDropDownIcon)&&ut([e.overAllWrapper],["e-icon-anim"]),e.refreshPopup(),e.renderReactTemplates(),e.popupObj.show(t.animation,1e3===e.zIndex?e.element:null),St(e.inputElement,{"aria-expanded":"true"}),e.isFirstClick&&e.loadTemplate())}))},t.prototype.updateListItems=function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()},t.prototype.loadTemplate=function(){var e=this;"CheckBox"===this.mode&&this.itemTemplate&&S()&&this.isServerRendered&&this.mainData&&this.mainData.length>0?setTimeout((function(){e.refreshListItems(null),"CheckBox"===e.mode&&e.removeFocus(),e.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,e:e})}),this.mainData.length<100?100:this.mainData.length):(this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))},t.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!g(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);g(e)||this.scrollBottom(e)}},t.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+cc)){var e=void 0;if("CheckBox"===this.mode)return void this.removeFocus();null!==(e=this.ulElement.querySelector("li."+cc+":not(."+ww+")"))&&(this.removeFocus(),this.addListFocus(e))}},t.prototype.focusAtLastListItem=function(e){var t;e?t=Qd(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?Qd(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}},t.prototype.updateListARIA=function(){St(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});var e=!!this.inputElement.disabled;St(this.inputElement,this.getAriaAttributes()),e&&St(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},t.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;u(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}},t.prototype.removelastSelection=function(e){var t,i=(t=this.chipCollectionWrapper.querySelectorAll("span."+Cw))[t.length-1].getAttribute("data-value");g(this.value)||(this.tempValues=this.value.slice()),this.removeValue(i,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.renderPopup(),this.onPopupShown()},t.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},t.prototype.getForQuery=function(e){for(var t,i=g(this.fields.value)?this.fields.text:this.fields.value,n=0;n<e.length;n++)t=0===n?new sn(i,"equal",e[n]):t.or(i,"equal",e[n]);return this.getQuery(this.query).where(t)},t.prototype.onActionComplete=function(t,i,n,r){e.prototype.onActionComplete.call(this,t,i,n),this.updateSelectElementData(this.allowFiltering);if(S()&&this.isServerRendered&&this.isDynamicDataChange&&null!==this.value&&this.value.length>0){for(var o=[],s=0;s<this.value.length;s++){var a=this.getDataByValue(this.value[s]);a&&o.push(a[this.fields.value])}0===o.length&&this.setProperties({value:null})}if(!g(this.value)&&!this.allowCustomValue)for(var l=0;l<this.value.length;l++){this.findListElement(this.allowFiltering&&!g(this.mainList)?this.mainList:t,"li","data-value",this.value[l])||(this.value.splice(l,1),l-=1)}this.updateActionList(t,i,n),S()&&this.isServerRendered&&this.allowFiltering&&"CheckBox"===this.mode&&this.removeFocus(),S()&&this.isServerRendered&&this.isDynamicDataChange&&this.value&&this.value.length>0&&(this.updateVal(this.value,null,"value"),this.addValidInputClass(),this.isDynamicDataChange=!1),!(this.dataSource instanceof yn&&"CheckBox"===this.mode&&this.allowFiltering)||S()&&this.isServerRendered||this.removeFocus()},t.prototype.updateActionList=function(e,t,i,n){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?g(this.mainData)||0!==this.mainData.length||(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value||"CheckBox"===this.mode)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),g(this.setInitialValue)||this.setInitialValue(),g(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(g(this.text)||!g(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))},t.prototype.refreshSelection=function(){var e,t,i=this.hideSelectedItem?ww:ac;if(!g(this.value))for(var n=0;!g(this.value[n]);n++)if(e=this.value[n],t=this.findListElement(this.list,"li","data-value",e)){if(ut([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(uc)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(uc))&&ut([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(ww)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(dc)){gt([t],dc);var r=t.parentElement.querySelectorAll("."+cc+":not(."+ww+")");r.length>0?ut([r[0]],dc):(this.ulElement=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement,this.l10nUpdate(),ut([this.list],hc))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){var o=t.firstElementChild.getAttribute("aria-checked");if(g(o)||"false"===o){var s={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null};this.notify("updatelist",s)}}}this.checkSelectAll(),this.checkMaxSelection()},t.prototype.hideGroupItem=function(e){var t,i,n=this.hideSelectedItem?ww:ac;i=t=this.findListElement(this.ulElement,"li","data-value",e);var r=0,o=0,s=!0,a=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(ww)&&t.previousElementSibling.classList.contains(cc)&&(s=!1),!s||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(uc)?r=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(ww)&&i.nextElementSibling.classList.contains(cc)&&(a=!1),!a||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(uc)?o=10:i=i.nextElementSibling}while(r<10||o<10);s&&a&&!t.previousElementSibling.classList.contains(ww)?ut([t.previousElementSibling],n):s&&a&&t.previousElementSibling.classList.contains(ww)&&gt([t.previousElementSibling],n)},t.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.list.querySelectorAll("li."+cc).length,n=this.list.querySelectorAll("li."+ac).length;if(this.enableGroupCheckBox&&!g(this.fields.groupBy)&&(n-=e),i!==n&&n!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?i!==n&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var r=0;r<t.length;r++)this.findGroupStart(t[r]);this.deselectHeader()}},t.prototype.openClick=function(e){this.openOnClick||"CheckBox"===this.mode?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()},t.prototype.KeyUp=function(e){"CheckBox"!==this.mode||this.openOnClick||(g(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0));this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode,this.search(e))},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new on;if(this.filterAction){if(null!==this.targetElement()){var i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof yn||"string"!==i)&&"number"!==i){var n=this.fields;t.where(g(n.text)?"":n.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new on)},t.prototype.dataUpdater=function(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.onActionComplete(n,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof yn?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()},t.prototype.checkForCustomValue=function(e,t){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){var n=this.inputElement.value,r=t||this.fields;if("string"!=typeof(!g(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData)){var o={};l(r.text,n,o),l(r.value,n,o),(s=JSON.parse(JSON.stringify(this.listData))).splice(0,0,o),this.resetList(s,r,e)}else{var s=[this.inputElement.value];this.resetList(s,r)}}this.value&&this.value.length&&this.refreshSelection()},t.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},t.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.enabled)if(e.target!==this.overAllClear){if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf("e-chips-close"))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&"e-input-group-icon e-ddl-icon"===e.target.className)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus")))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}else e.preventDefault()},t.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),St(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),St(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},t.prototype.onBlur=function(e,t){var i;if(g(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&ut([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(g(this.value)||0===this.value.length)&&gt([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&me.isIE&&!g(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove("e-input-focus");if(this.scrollFocusStatus)return g(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);this.inputFocus=!1,this.overAllWrapper.classList.remove("e-input-focus"),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&(this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0,!1,!0,!0),this.hidePopup()),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,me.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function(e,t,i,n,r){e.classList.remove("e-input-focus");var o=t.querySelector(".e-float-text");i&&i.length<=0&&"Auto"===n&&!g(o)&&(o.classList.contains(gw)&&gt([o],gw),ut([o],fw))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!g(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}},t.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else g(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},t.prototype.setPlaceholderSize=function(e){g(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":ut([this.searchWrapper],"e-search-custom-width"):g(this.value)||(this.searchWrapper.removeAttribute("style"),gt([this.searchWrapper],"e-search-custom-width"))},t.prototype.refreshInputHight=function(){this.value&&this.value.length||!g(this.text)&&""!==this.text?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size")},t.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},t.prototype.updateValueState=function(e,t,i){var n=t||[],r=i||[];if(this.initStatus&&this.validateValues(n,r)){var o={e:e,oldValue:i,value:t,isInteracted:!!e,element:this.element};this.trigger("change",o),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}},t.prototype.updateTempValue=function(){this.value?this.tempValues=this.value.slice():this.tempValues=this.value},t.prototype.getPagingCount=function(){var e=this.list.classList.contains(hc)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))},t.prototype.pageUpSelection=function(e){var t,i=this.list.querySelectorAll("li."+cc+":not(."+ww+"):not(.e-reorder-hide)");t=e>=0?i[e+1]:i[0],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},t.prototype.pageDownSelection=function(e){this.getItems();var t,i=this.list.querySelectorAll("li."+cc+":not(."+ww+"):not(.e-reorder-hide)");t=e<=i.length?i[e-1]:i[i.length-1],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},t.prototype.getItems=function(){return this.list||e.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+cc).length>0?this.ulElement.querySelectorAll("."+cc+":not(."+ww+")"):[]},t.prototype.focusInHandler=function(e){if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove("e-zero-size"),this.checkPlaceholderSize(),this.focused){var t={isInteracted:!!e,event:e};this.trigger("focus",t),this.focused=!1}return this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus"),function(e,t){e.classList.add("e-input-focus");var i=t.querySelector(".e-float-text");g(i)||(ut([i],gw),i.classList.contains(fw)&&gt([i],fw))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0}return!1},t.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")},t.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")},t.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},t.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},t.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},t.prototype.checkTextLength=function(){return this.targetElement().length<1},t.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}},t.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+dc);g(e)||this.inputElement.setAttribute("aria-activedescendant",e.id)},t.prototype.homeNavigation=function(e){this.removeFocus();var t=this.ulElement.querySelectorAll("li."+cc+":not(."+ww+"):not(.e-reorder-hide)");if(t.length>0){var i=t[e?0:t.length-1];i.classList.add(dc),this.scrollBottom(i)}},t.prototype.onKeyDown=function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124)))if(e.altKey)this.popupKeyActions(e);else{if(this.isPopupOpen()){var t=this.list.querySelector("."+dc);switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add("e-input-focus")}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),this.refreshPopup()}},t.prototype.arrowDown=function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains("e-input-filter")||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&(this.list.focus(),ye.add(this.list,"keydown",this.onKeyDown,this)),this.updateAriaAttribute()},t.prototype.arrowUp=function(e){e.preventDefault(),this.keyAction=!0;var t=this.list.querySelectorAll("li."+cc+":not(."+ww+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!g(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+cc+",li."+uc+":not(."+ww+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li."+dc);Array.prototype.slice.call(t).indexOf(i)<=0&&"CheckBox"===this.mode&&this.allowFiltering?(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})):this.list.focus(),this.moveByList(-1),this.updateAriaAttribute()},t.prototype.spaceKeySelection=function(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains("e-input-filter")||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()},t.prototype.checkBackCommand=function(e){8===e.keyCode&&""===this.targetElement()?this.backCommand=!1:this.backCommand=!0},t.prototype.keyNavigation=function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}},t.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},t.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},t.prototype.scrollBottom=function(e,t){var i=this.list.offsetHeight,n=e.offsetTop+e.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+n-i,o=e.offsetTop+e.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!g(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===t?this.list.scrollTop=0:n>i?this.list.scrollTop=r:o>0&&this.list.offsetHeight>o||(this.list.scrollTop=r)},t.prototype.scrollTop=function(e,t){var i=e.offsetTop-this.list.scrollTop;e.offsetTop,e.offsetHeight,this.list.scrollTop;i=this.fields.groupBy&&!f(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var n=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:n>0&&this.list.offsetHeight>n||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!f(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.selectListByKey=function(e){var t,i=this.list.querySelector("li."+dc),n=this.value&&this.value.length?this.value.length:0;null!==i&&(i.classList.contains("e-active")&&(n-=1),this.isValidLI(i)&&n<this.maximumSelectionLength?(this.updateListSelection(i,e),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!g(this.fields.groupBy)&&(t=i.firstElementChild.lastElementChild,this.findGroupStart(t),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(i)&&n<this.maximumSelectionLength&&((t=i.firstElementChild.lastElementChild).classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()},t.prototype.refreshListItems=function(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var t;t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList,this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}},t.prototype.removeSelectedChip=function(e){var t,i=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==i&&(g(this.value)||(this.tempValues=this.value.slice()),null!==(t=i.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(t,e)),this.removeValue(i.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()},t.prototype.moveByTop=function(e){var t,i=this.list.querySelectorAll("li."+cc);i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()},t.prototype.moveByList=function(e){if(this.list){var t=this.list.querySelectorAll("li."+cc+":not(."+ww+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!g(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+cc+",li."+uc+":not(."+ww+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li."+dc),n=-1;if(t.length){for(var r=0;r<t.length;r++)if(t[r]===i){n=r;break}e>0?n<t.length-1&&(this.removeFocus(),this.addListFocus(t[++n]),this.updateCheck(t[n]),this.scrollBottom(t[n],n)):n>0&&(this.removeFocus(),this.addListFocus(t[--n]),this.updateCheck(t[n]),this.scrollTop(t[n],n))}}},t.prototype.updateCheck=function(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!g(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))},t.prototype.moveBy=function(e,t){var i,n,r;i=this.chipCollectionWrapper.querySelectorAll("span."+Cw),null===(n=this.chipCollectionWrapper.querySelector("span.e-chip-selected"))?e<0&&this.addChipSelection(i[i.length-1],t):e<0?null!==(r=n.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(r,t)):(r=n.nextElementSibling,this.removeChipSelection(),null!==r&&this.addChipSelection(r,t))},t.prototype.chipClick=function(e){if(this.enabled){var t=Tt(e.target,"."+Cw);this.removeChipSelection(),this.addChipSelection(t,e)}},t.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},t.prototype.addChipSelection=function(e,t){ut([e],"e-chip-selected"),this.trigger("chipSelection",t)},t.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var t=e.target.parentElement.getAttribute("data-value"),i=this.getFormattedValue(t);if(this.allowCustomValue&&("false"!==t&&!1===i||!g(i)&&"NaN"===i.toString())&&(i=t),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(i,e),g(this.findListElement(this.list,"li","data-value",i))&&this.mainList&&this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},t.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},t.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.value&&this.value.length||!g(this.text)&&""!==this.text?this.inputElement.placeholder="":this.inputElement.placeholder=this.placeholder:this.setFloatLabelType(),this.expandTextbox()},t.prototype.removeValue=function(e,t,i,n){var r=this,o=this.value.indexOf(this.getFormattedValue(e));-1===o&&this.allowCustomValue&&!g(e)&&(o=this.value.indexOf(e.toString()));var s=t&&t.target;n=!!(n||s&&s.classList.contains("e-close-hooker"))||null;var a=this.hideSelectedItem?ww:ac;if(-1!==o){var l=this.findListElement(this.list,"li","data-value",e),h=this.getDataByValue(e),p={e:t,item:l,itemData:h,isInteracted:!!t,cancel:!1};this.trigger("removing",p,(function(s){if(s.cancel)r.removeIndex++;else{var p=r.value.slice(0);if(p.splice(o,1),S()&&r.isServerRendered){var d=[].concat([],p);r.setProperties({value:0===d.length?null:d},!0)}else r.setProperties({value:[].concat([],p)},!0);if(null!==l){var c=r.findListElement(r.mainList,"li","data-value",e);l.setAttribute("aria-selected","false"),gt([l],a),c&&(c.setAttribute("aria-selected","false"),gt([l,c],a)),r.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===r.mode,li:l,e:r,index:o}),r.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===r.mode,li:l,e:t}),St(r.inputElement,{"aria-activedescendant":l.id}),r.value&&r.value.length!==r.mainData.length&&"CheckBox"===r.mode&&r.showSelectAll&&r.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===r.mode,value:"uncheck"})}if(r.hideSelectedItem&&r.fields.groupBy&&r.hideGroupItem(e),r.updateMainList(!0,e),r.removeChip(e),r.updateChipStatus(),(r.value&&r.value.length?r.value.length:0)<r.maximumSelectionLength)gt(r.list.querySelectorAll("li."+cc+":not(.e-active)"),"e-disable");r.trigger("removed",s);var u=t&&t.currentTarget,f=!(!u||!u.classList.contains("e-selectall-parent"))||null;if(r.changeOnBlur||n||!t||!i||f||r.updateValueState(t,r.value,r.tempValues),i&&(r.selectAllEventData.push(h),r.selectAllEventEle.push(l)),1===i){r.changeOnBlur||r.updateValueState(t,r.value,r.tempValues);var m={event:t,items:r.selectAllEventEle,itemData:r.selectAllEventData,isInteracted:!!t,isChecked:!1};r.trigger("selectedAll",m),r.selectAllEventData=[],r.selectAllEventEle=[]}!n||1!==i&&null!==i||r.clearAllCallback(t,n),S()&&r.isServerRendered&&(g(r.value)||0===r.value.length)&&r.updatedataValueItems(t)}}))}},t.prototype.updateMainList=function(e,t){if(this.allowFiltering||"CheckBox"===this.mode){var i=this.findListElement(this.mainList,"li","data-value",t);i&&(e?(i.setAttribute("aria-selected","false"),gt([i],this.hideSelectedItem?ww:ac),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","false"),gt([i.firstElementChild.lastElementChild],"e-check"))):(i.setAttribute("aria-selected","true"),ut([i],this.hideSelectedItem?ww:ac),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","true"),ut([i.firstElementChild.lastElementChild],"e-check"))))}},t.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&Ct(t)}},t.prototype.setWidth=function(e){g(e)||("number"==typeof e?this.overAllWrapper.style.width=C(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:C(e)))},t.prototype.updateChipStatus=function(){this.value&&this.value.length?(g(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(g(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),g(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},t.prototype.addValue=function(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);var n=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),n&&(this.addListFocus(n),this.addListSelection(n)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},t.prototype.checkMaxSelection=function(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&ut(this.list.querySelectorAll("li."+cc+":not(.e-active)"),"e-disable")},t.prototype.dispatchSelect=function(e,t,i,n,r){var o=this;if(this.initStatus&&!n){var s=this.getDataByValue(e),a={e:t,item:i,itemData:s,isInteracted:!!t,cancel:!1};this.trigger("select",a,(function(n){if(!n.cancel){if(r&&(o.selectAllEventData.push(s),o.selectAllEventEle.push(i)),1===r){var a={event:t,items:o.selectAllEventEle,itemData:o.selectAllEventData,isInteracted:!!t,isChecked:!0};o.trigger("selectedAll",a),o.selectAllEventData=[]}o.updateListSelectEventCallback(e,i,t)}}))}},t.prototype.addChip=function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)},t.prototype.removeChipFocus=function(){var e,t;if(e=this.chipCollectionWrapper.querySelectorAll("span."+Cw),t=this.chipCollectionWrapper.querySelectorAll("span."+"e-chips-close".split(" ")[0]),gt(e,"e-chip-selected"),me.isDevice)for(var i=0;i<t.length;i++)t[i].style.display="none"},t.prototype.onMobileChipInteraction=function(e){var t=Tt(e.target,"."+Cw),i=t.querySelector("span."+"e-chips-close".split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains("e-chip-selected")||(this.removeChipFocus(),i.style.display="",t.classList.add("e-chip-selected")),this.refreshPopup(),e.preventDefault())},t.prototype.multiCompiler=function(e){var t=!1;if(e){try{t=!!document.querySelectorAll(e).length}catch(e){t=!1}}return t},t.prototype.getChip=function(e,t,i){var n=this,r={text:t,value:t},o=this.createElement("span",{className:Cw,attrs:{"data-value":t,title:e}}),s=this.createElement("span",{className:"e-chipcontent"}),a=this.createElement("span",{className:"e-chips-close"});if(this.mainData&&(r=S()&&this.isServerRendered?JSON.parse(JSON.stringify(this.getDataByValue(t))):this.getDataByValue(t)),this.valueTemplate&&!g(r)){var l=Ge(this.multiCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(r,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,s);if(l&&l.length>0)for(var h=0;h<l.length;h++)s.appendChild(l[h]);this.renderReactTemplates(),this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!1,!1,!1)}else this.enableHtmlSanitizer?s.innerText=e:s.innerHTML=e;o.appendChild(s);var p={isInteracted:!!i,itemData:r,e:i,setClass:function(e){ut([o],e)},cancel:!1};this.trigger("tagging",p,(function(e){e.cancel||(e.setClass&&"string"==typeof e.setClass&&S()&&n.isServerRendered&&ut([o],e.setClass),me.isDevice?(o.classList.add("e-mob-chip"),vt([a],o),a.style.display="none",ye.add(o,"click",n.onMobileChipInteraction,n)):(ye.add(o,"mousedown",n.chipClick,n),n.showClearButton&&o.appendChild(a)),ye.add(a,"mousedown",n.onChipRemove,n),n.chipCollectionWrapper.appendChild(o),!n.changeOnBlur&&i&&n.updateValueState(i,n.value,n.tempValues))}))},t.prototype.calcPopupWidth=function(){var e=C(this.popupWidth);e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px");return e},t.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},t.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},t.prototype.listOption=function(e,t){var i=!g(t.iconCss),n=g(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},u(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:n}),this.listCurrentOptions},t.prototype.renderPopup=function(){var t=this;if(this.list||e.prototype.render.call(this),!this.popupObj){document.body.appendChild(this.popupWrapper);var i=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&i&&this.filterParent&&(i.remove(),this.filterParent=null);var n=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),n-=this.header.offsetHeight),vt([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),n-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"!==this.mode||this.showSelectAll||(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(n-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(n-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){var r={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",r),n-=this.searchBoxHeight),ut([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=C(n),this.popupWrapper.style.maxHeight=C(this.popupHeight)):this.list.style.maxHeight=C(this.popupHeight),this.popupObj=new lr(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){t.popupObj.element.parentElement&&(t.popupObj.unwireScrollEvents(),wt(t.popupObj.element))},open:function(){if(t.popupObj.resolveCollision(),!t.isFirstClick){var e=t.list.querySelector("ul");e&&(t.itemTemplate&&S()&&t.isServerRendered?setTimeout((function(){t.mainList=t.ulElement}),0):"CheckBox"!==t.mode&&(t.allowFiltering||t.allowCustomValue)&&""!==t.targetElement().trim()||(t.mainList=e.cloneNode?e.cloneNode(!0):e)),t.isFirstClick=!0}t.popupObj.wireScrollEvents(),"CheckBox"!==t.mode&&(t.allowFiltering||t.allowCustomValue)&&""!==t.targetElement().trim()||t.loadTemplate(),t.setScrollPosition(),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode,value:"focus"})},targetExitViewport:function(){me.isDevice||t.hidePopup()}}),"CheckBox"===this.mode&&me.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}},t.prototype.setHeaderTemplate=function(){this.header&&this.header.remove(),this.header=this.createElement("div"),ut([this.header],"e-ddl-header");var e=Ge(this.multiCompiler(this.headerTemplate)?document.querySelector(this.headerTemplate).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(e&&e.length>0)for(var t=0;t<e.length;t++)this.header.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1),"CheckBox"===this.mode&&this.showSelectAll?yt([this.header],this.popupWrapper):vt([this.header],this.popupWrapper),ye.add(this.header,"mousedown",this.onListMouseDown,this)},t.prototype.setFooterTemplate=function(){this.footer&&this.footer.remove(),this.footer=this.createElement("div"),ut([this.footer],"e-ddl-footer");var e=Ge(this.multiCompiler(this.footerTemplate)?document.querySelector(this.footerTemplate).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(e&&e.length>0)for(var t=0;t<e.length;t++)this.footer.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),vt([this.footer],this.popupWrapper),ye.add(this.footer,"mousedown",this.onListMouseDown,this)},t.prototype.ClearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.value&&this.value.length>0){var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length&&(this.removeValue(t,e,null,!0),null!==this.value||!S()||!this.isServerRendered);t=this.value[this.removeIndex]);}else this.clearAllCallback(e)}},t.prototype.clearAllCallback=function(e,t){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),this.makeTextBoxEmpty(),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(g(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),this.changeOnBlur||!t||!g(this.value)&&0!==this.value.length||this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!g(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},t.prototype.windowResize=function(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()},t.prototype.resetValueHandler=function(e){var t=Tt(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}},t.prototype.wireEvent=function(){ye.add(this.componentWrapper,"mousedown",this.wrapperClick,this),ye.add(window,"resize",this.windowResize,this),ye.add(this.inputElement,"focus",this.focusInHandler,this),ye.add(this.inputElement,"keydown",this.onKeyDown,this),ye.add(this.inputElement,"keyup",this.KeyUp,this),"CheckBox"!==this.mode&&ye.add(this.inputElement,"input",this.onInput,this),ye.add(this.inputElement,"blur",this.onBlur,this),ye.add(this.componentWrapper,"mousemove",this.mouseIn,this);var e=Tt(this.inputElement,"form");e&&ye.add(e,"reset",this.resetValueHandler,this),ye.add(this.componentWrapper,"mouseout",this.mouseOut,this),ye.add(this.overAllClear,"mouseup",this.ClearAll,this),ye.add(this.inputElement,"paste",this.pasteHandler,this)},t.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,me.isDevice&&"mozilla"===me.info.name&&this.search(e)},t.prototype.pasteHandler=function(e){var t=this;setTimeout((function(){t.search(e)}))},t.prototype.search=function(e){var t=this;if(!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&8!==e.keyCode)this.focusAtFirstListItem();else{var i=this.targetElement();if(this.keyCode=e.keyCode,this.allowFiltering){var n={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,r){n.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,r))},event:e,cancel:!1};this.trigger("filtering",n,(function(e){e.cancel||t.isFiltered||e.preventDefaultAction||(t.filterAction=!0,t.dataUpdater(t.dataSource,null,t.fields))}))}else if(this.allowCustomValue){var r=new on;r=""!==i?r.where(this.fields.text,"startswith",i,this.ignoreCase,this.ignoreAccent):r,this.dataUpdater(this.mainData,r,this.fields)}else{var o;o=this.list.querySelectorAll("li."+cc+":not(.e-hide-listitem)");var s=Qd(this.targetElement(),o,"StartsWith",this.ignoreCase);s&&null!==s.item?(this.addListFocus(s.item),this.list.scrollTop=s.item.offsetHeight*s.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}},t.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"multi-select"},t.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0},t.prototype.updateData=function(e,t){var i,n="",r="Delimiter"===this.mode||"CheckBox"===this.mode,o=[],s=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!g(this.value))for(var a=0;!g(this.value[a]);a++){var l=this.findListElement(g(this.mainList)?this.ulElement:this.mainList,"li","data-value",this.value[a]);S()&&this.isServerRendered||!g(l)||this.allowCustomValue?(n+=(i=this.listData?this.getTextByValue(this.value[a]):this.value[a])+e+" ",o.push(i)):(this.value.splice(a,1),a-=1),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[a]+'">'+a+"</option>"}this.setProperties({text:o.toString()},!0),r&&(this.updateWrapperText(this.delimiterWrapper,n),this.delimiterWrapper.setAttribute("id",m("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var h=t&&t.target,p=!(!h||!h.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!p||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=s,this.addValidInputClass()},t.prototype.initialTextUpdate=function(){if(g(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],i=0;e.length>i;i++){var n=this.getValueByText(e[i]);g(n)?this.allowCustomValue&&t.push(e[i]):t.push(n)}t&&t.length&&this.setProperties({value:t},!0)}},t.prototype.renderList=function(t){!t&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(t=!0),e.prototype.render.call(this,t),this.unwireListEvents(),this.wireListEvents()},t.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,t=void 0,i=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!g(this.value))for(var n=0;!g(this.value[n]);n++)if(i=this.value[n],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),e=this.getTextByValue(i),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,i),this.addListSelection(t);else if(i&&this.allowCustomValue){var r=this.listData.length,o={};l(this.fields.text,i,o),l(this.fields.value,i,o);var s=this.popupWrapper.querySelector("."+hc);this.addItem(o,r),this.popupWrapper.contains(s)&&(this.list.setAttribute("style",s.getAttribute("style")),this.popupWrapper.replaceChild(this.list,s),this.wireListEvents()),this.addChip(e,i),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"!==this.mode||!this.showSelectAll||!g(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper()}},t.prototype.updateActionCompleteData=function(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,ut([e],ww))},t.prototype.updateAddItemList=function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+hc)&&e&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),Ct(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup())},t.prototype.updateDataList=function(){this.mainList&&this.ulElement&&this.mainList.childElementCount<this.ulElement.childElementCount&&(this.mainList=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement)},t.prototype.isValidLI=function(e){return e&&!e.classList.contains(gc)&&!e.classList.contains(uc)&&e.classList.contains(cc)},t.prototype.updateListSelection=function(e,t,i){var n=e.getAttribute("data-value"),r=this.getFormattedValue(n);this.allowCustomValue&&("false"!==n&&!1===r||!g(r)&&"NaN"===r.toString())&&(r=n);this.getTextByValue(r);this.removeHover(),this.value&&-1!==this.value.indexOf(r)?this.removeValue(r,t,i):this.dispatchSelect(r,t,e,"true"===e.getAttribute("aria-selected"),i)},t.prototype.updateListSelectEventCallback=function(e,t,i){var n=this,r=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,r,i);else{var o=t.cloneNode(!0),s=this.getDataByValue(e),a={newData:s,cancel:!1};this.trigger("customValueSelection",a,(function(t){t.cancel||(vt([o],n.mainList),n.mainData.push(s),n.remoteCustomValue=!1,n.addValue(e,r,i),S()&&n.isServerRendered&&(n.checkPlaceholderSize(),n.makeTextBoxEmpty()))}))}S()&&this.isServerRendered&&this.value&&this.list&&(this.value.length===this.list.querySelectorAll("li.e-list-item").length||this.value.length===this.maximumSelectionLength)&&(this.updatedataValueItems(i),this.checkPlaceholderSize()),S()&&this.isServerRendered&&(this.checkPlaceholderSize(),this.makeTextBoxEmpty())},t.prototype.removeListSelection=function(){var e=this.hideSelectedItem?ww:ac,t=this.list.querySelectorAll("."+e),i=t.length;if(t&&t.length)for(gt(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!g(this.mainList)){var n=this.mainList.querySelectorAll("."+e),r=n.length;if(n&&n.length)for(gt(n,e);r>0;)n[r-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>r-1&&(t[r-1].firstElementChild.setAttribute("aria-checked","false"),gt([t[r-1].firstElementChild.lastElementChild],"e-check")),n[r-1].firstElementChild.setAttribute("aria-checked","false"),gt([n[r-1].firstElementChild.lastElementChild],"e-check")),r--}},t.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+lc);e&&e.length&&gt(e,lc)},t.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+dc),t=this.mainList.querySelectorAll("."+dc);e&&e.length&&(gt(e,dc),gt(t,dc))}},t.prototype.addListHover=function(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!g(this.fields.groupBy))&&(this.removeHover(),ut([e],lc))},t.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),ut([e],dc)):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!g(this.fields.groupBy)&&ut([e],dc)},t.prototype.addListSelection=function(e){var t=this.hideSelectedItem?ww:ac;if(this.isValidLI(e)&&!e.classList.contains(lc)){if(ut([e],t),this.updateMainList(!1,e.getAttribute("data-value")),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var i=e.firstElementChild.getAttribute("aria-checked");("false"===i||g(i))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),null!==this.chipCollectionWrapper&&this.removeChipSelection(),St(this.inputElement,{"aria-activedescendant":e.id})}},t.prototype.updateDelimeter=function(e,t){this.updateData(e,t)},t.prototype.onMouseClick=function(e){this.scrollFocusStatus=!1;var t=e.target,i=Tt(t,"."+cc);if(Tt(t,"."+uc)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(t=t.classList.contains("e-list-group-item")?t.firstElementChild.lastElementChild:e.target).classList.contains("e-check")?(this.selectAllItem(!1,e),t.classList.remove("e-check"),t.classList.remove("e-stop"),Tt(t,".e-list-group-item").classList.remove("e-active"),t.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),t.classList.remove("e-stop"),t.classList.add("e-check"),Tt(t,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(i)){var n=this.value&&this.value.length?this.value.length:0;i.classList.contains("e-active")&&(n-=1),n<this.maximumSelectionLength&&(this.updateListSelection(i,e),this.checkPlaceholderSize(),this.addListFocus(i),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?("CheckBox"!==this.mode&&this.focusAtLastListItem(i.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(t)}else e.preventDefault();"CheckBox"!==this.mode&&this.refreshListItems(g(i)?null:i.textContent),this.refreshPlaceHolder(),this.deselectHeader()}},t.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!g(this.fields.groupBy)){var t=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),t=this.findGroupAttrtibutes(e,0,0,0,0),t=this.findGroupAttrtibutes(e,t[0],t[1],t[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,t[0],t[1],t[2])}},t.prototype.findGroupAttrtibutes=function(e,t,i,n,r){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,n++,null!=(e=r?e.nextElementSibling:e.previousElementSibling)););return[t,i,n]},t.prototype.updateCheckBox=function(e,t,i,n){if(null!==e){var r=e.getElementsByClassName("e-frame")[0];n===t?(r.classList.remove("e-stop"),r.classList.add("e-check"),Tt(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):n===i?(r.classList.remove("e-check"),r.classList.remove("e-stop"),Tt(r,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(r.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),Tt(r,".e-list-group-item").classList.add("e-active"),r.classList.add("e-check")):(r.classList.remove("e-check"),r.classList.add("e-stop"),Tt(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},t.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&gt(t,"e-disable"),e===this.maximumSelectionLength&&ut(t,"e-disable")},t.prototype.onMouseOver=function(e){var t=Tt(e.target,"."+cc);null===t&&"CheckBox"===this.mode&&!g(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=Tt(e.target,"."+uc)),this.addListHover(t)},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},t.prototype.onDocumentClick=function(e){if("CheckBox"!==this.mode){var t=e.target;!g(this.popupObj)&&Tt(t,"#"+this.popupObj.element.id)||this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=(me.isIE||"edge"===me.info.name)&&document.activeElement===this.inputElement:this.scrollFocusStatus=!1}},t.prototype.wireListEvents=function(){ye.add(document,"mousedown",this.onDocumentClick,this),ye.add(this.list,"mousedown",this.onListMouseDown,this),ye.add(this.list,"mouseup",this.onMouseClick,this),ye.add(this.list,"mouseover",this.onMouseOver,this),ye.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.unwireListEvents=function(){ye.remove(document,"mousedown",this.onDocumentClick),this.list&&(ye.remove(this.list,"mousedown",this.onListMouseDown),ye.remove(this.list,"mouseup",this.onMouseClick),ye.remove(this.list,"mouseover",this.onMouseOver),ye.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.hideOverAllClear=function(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")},t.prototype.showOverAllClear=function(){(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?this.overAllClear.style.display="":this.overAllClear.style.display="none"},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},t.prototype.showSpinner=function(){g(this.spinnerElement)&&("none"!==this.overAllClear.style.display?this.spinnerElement=this.overAllClear:(this.spinnerElement=this.createElement("span",{className:"e-chips-close e-close-hooker e-ms-spinner-icon"}),this.componentWrapper.appendChild(this.spinnerElement)),Ni({target:this.spinnerElement,width:me.isDevice?"16px":"14px"},this.createElement),ut([this.spinnerElement],"e-ddl-disable-icon"),Xi(this.spinnerElement))},t.prototype.hideSpinner=function(){g(this.spinnerElement)||(Ji(this.spinnerElement),gt([this.spinnerElement],"e-ddl-disable-icon"),this.spinnerElement.classList.contains("e-ms-spinner-icon")?wt(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.updateWrapperText=function(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=t:e.innerText=Oi.sanitize(t)},t.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove("e-delim-total"),this.value&&this.value.length){var e="",t=void 0,i=void 0,n=1,r=void 0,o=void 0,s=0,a=void 0;this.updateWrapperText(this.viewWrapper,e);var l={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},h=new ki(this.getLocaleName(),l,this.locale);""===h.getConstant("actionFailureTemplate")&&(h=new ki("dropdowns",l,this.locale)),""===h.getConstant("noRecordsTemplate")&&(h=new ki("dropdowns",l,this.locale));var p=h.getConstant("overflowCountTemplate"),d=this.createElement("span",{className:"e-remain"}),c=Ge(p),u=Ge(h.getConstant("totalCountTemplate")),f=c({count:this.value.length},this,"overflowCountTemplate",null,!this.isStringTemplate,null,d);f&&f.length>0&&d.appendChild(f[0]),this.viewWrapper.appendChild(d),this.renderReactTemplates();var m=d.offsetWidth;if(Ct(d),this.showDropDownIcon&&(s=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!g(this.value))for(var y=0;!g(this.value[y]);y++){if(e+=0===y?"":this.delimiterChar+" ",e+=t=this.getOverflowVal(y),t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e),r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),r+s+this.clearIconWidth>a){for(void 0!==i&&""!==i&&(t=i,y=n+1),this.updateWrapperText(this.viewWrapper,t),o=this.value.length-y,r=this.viewWrapper.offsetWidth;r+m+s+this.clearIconWidth>a&&0!==r&&""!==this.viewWrapper.innerHTML;){var v=this.viewWrapper.innerHTML.split(this.delimiterChar);v.pop(),this.viewWrapper.innerHTML=v.join(this.delimiterChar),""===this.viewWrapper.innerHTML&&o++,r=this.viewWrapper.offsetWidth}break}r+m+s<=a?(i=e,n=y):0===y&&(i="",n=-1)}if(o>0){var b=a-s-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(d,this.viewWrapper,o,c,u,b)),this.updateRemainWidth(this.viewWrapper,b),this.updateRemainingText(d,s,o,c,u)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},t.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)},t.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},t.prototype.updateRemainTemplate=function(e,t,i,n,r,o){t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="";var s=n({count:i},this,"overflowCountTemplate",null,!this.isStringTemplate,null,e),a=r({count:i},this,"totalCountTemplate",null,!this.isStringTemplate,null,e);return e.appendChild(t.firstChild&&3===t.firstChild.nodeType?s&&s[0]:a&&a[0]),t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),this.updateRemainWidth(t,o)),e},t.prototype.updateRemainingText=function(e,t,i,n,r){var o=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),s=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(s+t>=o&&0!==s&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;s+t>o&&0!==s&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var a=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);a.pop(),this.viewWrapper.firstChild.nodeValue=a.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,s=this.viewWrapper.offsetWidth}var l=o-t;this.updateRemainTemplate(e,this.viewWrapper,i,n,r,l)}},t.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t},t.prototype.unWireEvent=function(){ye.remove(this.componentWrapper,"mousedown",this.wrapperClick),ye.remove(window,"resize",this.windowResize),ye.remove(this.inputElement,"focus",this.focusInHandler),ye.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&ye.remove(this.inputElement,"input",this.onInput),ye.remove(this.inputElement,"keyup",this.KeyUp);var e=Tt(this.inputElement,"form");e&&ye.remove(e,"reset",this.resetValueHandler),ye.remove(this.inputElement,"blur",this.onBlur),ye.remove(this.componentWrapper,"mousemove",this.mouseIn),ye.remove(this.componentWrapper,"mouseout",this.mouseOut),ye.remove(this.overAllClear,"mousedown",this.ClearAll),ye.remove(this.inputElement,"paste",this.pasteHandler)},t.prototype.selectAllItem=function(e,t,i){var n;if(n=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&this.isPopupOpen()&&t&&t.target&&Tt(t.target,".e-close-hooker")&&this.allowFiltering&&(n=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!g(this.fields.groupBy)){var r=t?t.target:null;if((r=(r=t&&32===t.keyCode?i:r)&&r.classList.contains("e-frame")?r.parentElement.parentElement:r)&&r.classList.contains("e-list-group-item")){var o=r.nextElementSibling;if(g(o))return;for(;o.classList.contains("e-list-item");){if(e){if(!o.firstElementChild.lastElementChild.classList.contains("e-check")){var s=this.value&&this.value.length?this.value.length:0;o.classList.contains("e-active")&&(s-=1),s<this.maximumSelectionLength&&this.updateListSelection(o,t)}}else o.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(o,t);if(null==(o=o.nextElementSibling))break}if(r.classList.contains("e-list-group-item")){var a=this.list.getElementsByClassName("e-item-focus")[0];a&&a.classList.remove("e-item-focus"),e?r.classList.add("e-active"):r.classList.remove("e-active"),r.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,n,e)}else this.updateValue(t,n,e)},t.prototype.updateValue=function(e,t,i){var n=this,r=t.length;if(t&&t.length){var o=0,s=0;for(s=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength;o<r&&o<=50&&o<s;)this.updateListSelection(t[o],e,r-o),this.findGroupStart(t[o]),o++;r>50&&setTimeout((function(){for(;o<r&&o<s;)n.updateListSelection(t[o],e,r-o),n.findGroupStart(t[o]),o++;S()&&n.isServerRendered||n.updatedataValueItems(e)}),0)}S()&&this.isServerRendered||(this.updatedataValueItems(e),this.checkPlaceholderSize())},t.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},t.prototype.textboxValueUpdate=function(e){"Box"===this.mode||this.isPopupOpen()?this.searchWrapper.classList.remove("e-zero-size"):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.updateDataSource=function(e){g(this.list)?this.renderPopup():this.resetList(this.dataSource),!this.value||!this.value.length||S()&&this.isServerRendered||(this.setProperties({value:this.value}),this.refreshSelection())},t.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},t.prototype.selectAllItems=function(t,i){var n=this;if(g(this.list))this.selectAllAction=function(){if("CheckBox"===n.mode&&n.showSelectAll){var e={module:"CheckBoxSelection",enable:"CheckBox"===n.mode,value:t?"check":"uncheck"};n.notify("checkSelectAll",e)}n.selectAllItem(t,i),n.selectAllAction=null},e.prototype.render.call(this);else{if(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll){var r={value:t?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"};this.notify("checkSelectAll",r)}this.selectAllItem(t,i)}},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(t,i){(t.dataSource&&!g(Object.keys(t.dataSource))||t.query&&!g(Object.keys(t.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],t));for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(g(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(t.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,i.value,"value"),this.addValidInputClass();break;case"width":this.setWidth(t.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:t.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(t.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(i.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(t.enableRtl),e.prototype.onPropertyChanged.call(this,t,i);break;case"readonly":this.updateReadonly(t.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(t.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:var s;s=this.getPropObject(o,t,i),e.prototype.onPropertyChanged.call(this,s.newProperty,s.oldProperty)}}},t.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},t.prototype.updateVal=function(e,t,i){this.list&&(!(this.dataSource instanceof yn)||this.listData&&this.mainList&&this.mainData)?this.inputFocus||("text"===i&&(this.initialTextUpdate(),e=this.value),(g(this.value)||0===this.value.length)&&(this.tempValues=t),this.initialValueUpdate(),"Box"!==this.mode&&this.updateDelimView(),this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()):this.onLoadSelect(),this.changeOnBlur||this.updateValueState(null,e,t)},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.hidePopup=function(){var e=this;if(this.isPopupOpen()){var t={name:"FadeOut",duration:100,delay:100},i={popup:this.popupObj,cancel:!1,animation:t};this.trigger("close",i,(function(t){t.cancel||(e.beforePopupOpen=!1,e.overAllWrapper.classList.remove("e-icon-anim"),e.popupObj.hide(new Qt(t.animation)),St(e.inputElement,{"aria-expanded":"false"}),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"clear"}),e.popupObj.hide(),gt([document.body,e.popupObj.element],"e-popup-full-page"),ye.remove(e.list,"keydown",e.onKeyDown))}))}},t.prototype.showPopup=function(){var t=this;if(this.enabled){this.trigger("beforeOpen",{cancel:!1},(function(i){if(!i.cancel){if(S()&&t.isServerRendered&&t.itemTemplate&&(t.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,!1),"CheckBox"!==t.mode&&t.list&&t.refreshSelection()),!t.ulElement)return t.beforePopupOpen=!0,e.prototype.render.call(t),void("CheckBox"===t.mode&&me.isDevice&&t.allowFiltering&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode}));"CheckBox"===t.mode&&me.isDevice&&t.allowFiltering&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode});var n=t.ulElement.querySelectorAll("li.e-list-item").length,r=t.ulElement.querySelectorAll("li."+cc+"."+ww).length;if(n>0&&n===r&&r===t.mainData.length)return void(t.beforePopupOpen=!1);t.onPopupShown()}}))}},t.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},t.prototype.getModuleName=function(){return"multiselect"},t.prototype.clear=function(){this.selectAll(!1),this.setProperties({value:null},!0)},t.prototype.render=function(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:"e-chips-close e-close-hooker",styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&ut([this.overAllWrapper],"e-checkbox"),me.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",m("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",m("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!me.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),"Default"!==this.mode&&"Box"!==this.mode||this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?mw(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):m("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.renderComplete()},t.prototype.checkInitialValue=function(){var e=this,t=this.dataSource instanceof Array?this.dataSource.length>0:!g(this.dataSource);if((!this.value||!this.value.length)&&g(this.text)&&!t&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var i=this.element.options,n=[],r="",o=0,s=i.length;o<s;o++){var a=i[o];g(a.getAttribute("selected"))||(a.getAttribute("value")?n.push(a.getAttribute("value")):r+=a.text+this.delimiterChar)}n.length>0?this.setProperties({value:n},!0):""!==r&&this.setProperties({text:r},!0),(n.length>0||""!==r)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!g(this.text))&&this.renderPopup(),g(this.text)||!g(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof yn?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),g(this.text)||this.element.setAttribute("data-initial-value",this.text)},t.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},t.prototype.setFloatLabelType=function(){var e,t,i,n,r,o,s,a,l;e=this.overAllWrapper,t=this.componentWrapper,i=this.searchWrapper,n=this.inputElement,r=this.value,this.floatLabelType,o=this.placeholder,a=t.querySelector(".e-float-text"),l=t.querySelector(".e-float-line"),g(a)?yw(r,n,s=null!==o?o:""):(s=a.innerText,wt(i.querySelector(".e-float-text")),yw(r,n,s),g(l)||wt(i.querySelector(".e-float-line"))),e.classList.remove("e-float-input"),"Never"!==this.floatLabelType&&mw(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},t.prototype.addValidInputClass=function(){!g(this.value)&&this.value.length||"Always"===this.floatLabelType?ut([this.overAllWrapper],"e-valid-input"):gt([this.overAllWrapper],"e-valid-input")},t.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),ut([this.componentWrapper],["e-down-icon"])):g(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),gt([this.componentWrapper],["e-down-icon"]))},t.prototype.initialUpdate=function(){"Box"!==this.mode&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,e.prototype.destroy.call(this);for(var t=["readonly","aria-disabled","aria-placeholder","placeholder"],i=t.length;i>0;)this.inputElement.removeAttribute(t[i-1]),i--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),Ct(this.overAllWrapper))},bw([qt({text:null,value:null,iconCss:null,groupBy:null},nc)],t.prototype,"fields",void 0),bw([zt(!1)],t.prototype,"enablePersistence",void 0),bw([zt(null)],t.prototype,"groupTemplate",void 0),bw([zt("No records found")],t.prototype,"noRecordsTemplate",void 0),bw([zt("Request failed")],t.prototype,"actionFailureTemplate",void 0),bw([zt("None")],t.prototype,"sortOrder",void 0),bw([zt(!0)],t.prototype,"enabled",void 0),bw([zt(!1)],t.prototype,"enableHtmlSanitizer",void 0),bw([zt([])],t.prototype,"dataSource",void 0),bw([zt(null)],t.prototype,"query",void 0),bw([zt("StartsWith")],t.prototype,"filterType",void 0),bw([zt(1e3)],t.prototype,"zIndex",void 0),bw([zt(!1)],t.prototype,"ignoreAccent",void 0),bw([zt()],t.prototype,"locale",void 0),bw([zt(!1)],t.prototype,"enableGroupCheckBox",void 0),bw([zt(null)],t.prototype,"cssClass",void 0),bw([zt("100%")],t.prototype,"width",void 0),bw([zt("300px")],t.prototype,"popupHeight",void 0),bw([zt("100%")],t.prototype,"popupWidth",void 0),bw([zt(null)],t.prototype,"placeholder",void 0),bw([zt(null)],t.prototype,"filterBarPlaceholder",void 0),bw([zt({})],t.prototype,"htmlAttributes",void 0),bw([zt(null)],t.prototype,"valueTemplate",void 0),bw([zt(null)],t.prototype,"headerTemplate",void 0),bw([zt(null)],t.prototype,"footerTemplate",void 0),bw([zt(null)],t.prototype,"itemTemplate",void 0),bw([zt(null)],t.prototype,"allowFiltering",void 0),bw([zt(!0)],t.prototype,"changeOnBlur",void 0),bw([zt(!1)],t.prototype,"allowCustomValue",void 0),bw([zt(!0)],t.prototype,"showClearButton",void 0),bw([zt(1e3)],t.prototype,"maximumSelectionLength",void 0),bw([zt(!1)],t.prototype,"readonly",void 0),bw([zt(null)],t.prototype,"text",void 0),bw([zt(null)],t.prototype,"value",void 0),bw([zt(!0)],t.prototype,"hideSelectedItem",void 0),bw([zt(!0)],t.prototype,"closePopupOnSelect",void 0),bw([zt("Default")],t.prototype,"mode",void 0),bw([zt(",")],t.prototype,"delimiterChar",void 0),bw([zt(!0)],t.prototype,"ignoreCase",void 0),bw([zt(!1)],t.prototype,"showDropDownIcon",void 0),bw([zt("Never")],t.prototype,"floatLabelType",void 0),bw([zt(!1)],t.prototype,"showSelectAll",void 0),bw([zt("Select All")],t.prototype,"selectAllText",void 0),bw([zt("Unselect All")],t.prototype,"unSelectAllText",void 0),bw([zt(!0)],t.prototype,"enableSelectionOrder",void 0),bw([zt(!0)],t.prototype,"openOnClick",void 0),bw([_t()],t.prototype,"change",void 0),bw([_t()],t.prototype,"removing",void 0),bw([_t()],t.prototype,"removed",void 0),bw([_t()],t.prototype,"selectedAll",void 0),bw([_t()],t.prototype,"beforeOpen",void 0),bw([_t()],t.prototype,"open",void 0),bw([_t()],t.prototype,"close",void 0),bw([_t()],t.prototype,"blur",void 0),bw([_t()],t.prototype,"focus",void 0),bw([_t()],t.prototype,"chipSelection",void 0),bw([_t()],t.prototype,"filtering",void 0),bw([_t()],t.prototype,"tagging",void 0),bw([_t()],t.prototype,"customValueSelection",void 0),t=bw([Gt],t)}(mc),xw=function(){function e(e){this.activeLi=[],this.activeEle=[],this.parent=e,this.removeEventListener(),this.addEventListener()}return e.prototype.getModuleName=function(){return"CheckBoxSelection"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlur,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),ye.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlur),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),ye.remove(document,"mousedown",this.onDocumentClick),this.parent.off("popupFullScreen",this.setPopupFullScreen))},e.prototype.listOption=function(e){var t=this;if(g(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e)};else{var i=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e),i.apply(t,[e])}}},e.prototype.setPlaceholder=function(e){No.setPlaceholder(e.filterBarPlaceholder,this.filterInput)},e.prototype.checboxCreate=function(e){var t;if(t=g(e.item)?e:e.item,this.parent.enableGroupCheckBox||"e-list-group-item "!==t.className&&"e-list-group-item"!==t.className){var i=Fr(this.parent.createElement,!0),n=xt("div.e-icons",t);t.getAttribute("data-uid");t.insertBefore(i,t.childNodes[g(n)?0:1]),xt(".e-frame",i);xt(".e-frame",i);return this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),t}return t},e.prototype.setSelectAll=function(){this.parent.showSelectAll?(g(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:"e-selectall-parent"}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(g(this.parent.filterParent)?vt([this.checkAllParent],this.parent.popupWrapper):vt([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(g(this.parent.filterParent)?yt([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),ye.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&!this.parent.isDynamicDataChange||this.parent.isDynamicDataChange&&!g(this.parent.value)&&this.parent.value.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):g(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.listSelection=function(e){var t,i=S()&&e.module&&"listbox"===e.module;if(g(e.e)){var n=e.li.querySelector(".e-checkbox-wrapper");t=n?i?n.querySelector(".e-frame"):n.childNodes[1]:e.li.lastElementChild.childNodes[1]}else{var r=e.li.querySelector(".e-checkbox-wrapper .e-frame");t=g(e.e.target)?i?r:e.li.querySelector(".e-checkbox-wrapper").childNodes[1]:e.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(e.e.target))?e.e.target:i?r:e.li.querySelector(".e-checkbox-wrapper").childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(t=e.li.firstElementChild.childNodes[1]),g(t)||(this.checkWrapper=Tt(t,".e-checkbox-wrapper")),!g(this.checkWrapper)){var o=xt(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,o.classList.contains("e-check"),e.li,e.e,!1)}},e.prototype.validateCheckNode=function(e,t,i,n,r){this.changeState(e,t?"uncheck":"check",n,!0,r)},e.prototype.clickHandler=function(e){var t;t=e.currentTarget.classList.contains(this.checkAllParent.className)?e.currentTarget.firstElementChild.lastElementChild:e.currentTarget,this.checkWrapper=Tt(t,".e-checkbox-wrapper");if(!g(this.checkWrapper)){var i=xt(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,i.classList.contains("e-check"),null,e,!0)}e.preventDefault()},e.prototype.changeState=function(e,t,i,n,r){var o,s=e.getElementsByClassName("e-frame")[0];"check"!==t||s.classList.contains("e-check")?"uncheck"===t&&(s.classList.contains("e-check")||s.classList.contains("e-stop"))?(gt([s],["e-check","e-stop"]),o="false",r&&(this.parent.selectAllItems(!1,i),this.setLocale())):"indeterminate"!==t||s.classList.contains("e-stop")||(gt([s],["e-check"]),s.classList.add("e-stop"),o="false",r&&(this.parent.selectAllItems(!1,i),this.setLocale())):(s.classList.remove("e-stop"),s.classList.add("e-check"),o="true",r&&(this.parent.selectAllItems(!0,i),this.setLocale(!0))),g(o="check"===t?"true":"uncheck"===t?"false":o)||e.setAttribute("aria-checked",o)},e.prototype.setSearchBox=function(e){if(g(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:"e-filter-parent"}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:"e-input-filter"}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var t=!1;return me.isDevice&&(t=!0,this.parent.mobFilter=!1),this.filterInputObj=No.createInput({element:this.filterInput,buttons:t?["e-input-group-icon e-back-icon e-icons","e-input-group-icon e-clear-icon e-icons"]:["e-input-group-icon e-clear-icon e-icons"],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),g(this.parent.cssClass)||(-1!==this.parent.cssClass.split(" ").indexOf("e-outline")?ut([this.filterInputObj.container],"e-outline"):-1!==this.parent.cssClass.split(" ").indexOf("e-filled")&&ut([this.filterInputObj.container],"e-filled")),vt([this.filterInputObj.container],this.parent.filterParent),yt([this.parent.filterParent],e.popupElement),St(this.filterInput,{"aria-disabled":"false","aria-owns":this.parent.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector(".e-clear-icon"),!me.isDevice&&this.clearIconElement&&(ye.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),ye.add(this.filterInput,"input",this.parent.onInput,this.parent),ye.add(this.filterInput,"keyup",this.parent.KeyUp,this.parent),ye.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),ye.add(this.filterInput,"blur",this.onBlur,this),ye.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},e.prototype.clickOnBackIcon=function(e){this.parent.hidePopup(),gt([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.inputElement.focus()},e.prototype.clearText=function(e){this.parent.targetInputElement.value="",this.parent.refreshPopup(),this.parent.refreshListItems(null),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),this.setReorder(e),e.preventDefault()},e.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add("e-ddl-device"),this.parent.popupObj.element.classList.add("e-ddl-device-filter"),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector(".e-clear-icon"),this.clearIconElement.style.visibility="hidden",ye.add(this.backIconElement,"click",this.clickOnBackIcon,this),ye.add(this.clearIconElement,"click",this.clearText,this)},e.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height,t=0;this.checkAllParent&&(t=this.checkAllParent.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-e-t+"px",this.parent.list.style.height=window.innerHeight-e-t+"px";var i=this.filterInput.parentElement.querySelector(".e-clear-icon");wt(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},e.prototype.setPopupFullScreen=function(){St(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),ut([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%"},e.prototype.targetElement=function(){return g(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=""===this.parent.targetInputElement.value?"hidden":"visible"),this.parent.targetInputElement.value},e.prototype.onBlur=function(e){if(!this.parent.element.classList.contains("e-listbox")){var t=void 0;if(this.parent.keyAction)return;if(me.isIE&&(t=!g(e)&&e.target),me.isIE||(t=!g(e)&&e.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(t)&&!me.isIE&&this.filterInput)return void this.filterInput.focus();if(this.parent.scrollFocusStatus&&this.filterInput)return e.preventDefault(),this.filterInput.focus(),void(this.parent.scrollFocusStatus=!1);this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(e,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!me.isDevice&&this.parent.hidePopup()}},e.prototype.onDocumentClick=function(e){if("listbox"!==this.parent.getLocaleName()){var t=e.target;!g(this.parent.popupObj)&&Tt(t,"#"+this.parent.popupObj.element.id)&&(this.filterInput&&""!==this.filterInput.value||e.preventDefault()),!g(this.parent.popupObj)&&Tt(t,"#"+this.parent.popupObj.element.id)||this.parent.overAllWrapper.contains(e.target)?this.parent.scrollFocusStatus=(me.isIE||"edge"===me.info.name)&&document.activeElement===this.filterInput:(this.parent.overAllWrapper.classList.contains(dc)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlur(e,!0),this.parent.focused=!0),this.parent.overAllWrapper.contains(e.target)||!this.parent.overAllWrapper.classList.contains("e-input-focus")||this.parent.isPopupOpen()||(me.isIE?this.parent.onBlur():this.parent.onBlur(e)),this.filterInput===t&&this.filterInput.focus()}},e.prototype.getFocus=function(e){this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.keyAction&&"clear"!==e.value&&"focus"!==e.value?this.parent.keyAction=!1:("focus"===e.value&&(this.filterInput.focus(),this.parent.removeFocus(),ye.remove(this.parent.list,"keydown",this.parent.onKeyDown)),"clear"===e.value&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden"))},e.prototype.checkSelectAll=function(e){"check"===e.value&&"true"!==this.checkAllParent.getAttribute("aria-checked")&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale(!0)),"uncheck"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale()),"indeterminate"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale())},e.prototype.setLocale=function(e){if("Select All"!==this.parent.selectAllText||"Unselect All"!==this.parent.unSelectAllText){var t=e?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var i=e?"unSelectAllText":"selectAllText",n=0,r=Ge(t)({},this.parent,i,null,!this.parent.isStringTemplate);n<r.length;n++){var o=r[n];this.selectAllSpan.textContent=o.textContent}}else{var s=new ki(this.parent.getLocaleName(),{},this.parent.locale);""===s.getConstant("selectAllText")&&(s=new ki("dropdowns",{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.parent.locale)),this.selectAllSpan.textContent=e?s.getConstant("unSelectAllText"):s.getConstant("selectAllText")}},e.prototype.getActiveList=function(e){e.li.classList.contains("e-active")?this.activeLi.push(e.li.cloneNode(!0)):this.activeLi.splice(e.index,1)},e.prototype.setReorder=function(e){if(this.parent.enableSelectionOrder&&!g(this.parent.value)){var t=this.parent.ulElement.querySelectorAll("li.e-active").length,i=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});this.parent.createElement("div");t>0&&(vt(this.parent.ulElement.querySelectorAll("li.e-active"),i),ut(this.parent.ulElement.querySelectorAll("li.e-active"),"e-reorder-hide"),yt([i],this.parent.list)),this.parent.focusAtFirstListItem()}},e}(),kw=function(){function e(e){this.validationPredecessor=null,this.confirmPredecessorDialog=null,this.predecessorIndex=null,this.childRecord=null,this.parent=e,this.dateValidateModule=this.parent.dateValidationModule,this.parent.on("initPredessorDialog",this.initPredecessorValidationDialog,this)}return e.prototype.updateConnectorLineEditElement=function(e){var t=this.getConnectorLineHoverElement(e.target);a("editModule.taskbarEditModule.taskBarEditAction",this.parent)||this.highlightConnectorLineElements(t)},e.prototype.getConnectorLineHoverElement=function(e){var t=Bl(e,"e-line"),i=Bl(e,"e-connector-line-right-arrow"),n=Bl(e,"e-connector-line-left-arrow");return t||i||n?Bl(e,"e-connector-line-container"):null},e.prototype.highlightConnectorLineElements=function(e){e?e!==this.connectorLineElement&&(this.removeHighlight(),this.addHighlight(e)):this.removeHighlight()},e.prototype.addHighlight=function(e){this.connectorLineElement=e,ut([e],["e-connector-line-hover-z-index"]),ut(e.querySelectorAll(".e-line"),["e-connector-line-hover"]),ut(e.querySelectorAll(".e-connector-line-right-arrow"),["e-connector-line-right-arrow-hover"]),ut(e.querySelectorAll(".e-connector-line-left-arrow"),["e-connector-line-left-arrow-hover"])},e.prototype.removeHighlight=function(){g(this.connectorLineElement)||(gt([this.connectorLineElement],["e-connector-line-hover-z-index"]),gt(this.connectorLineElement.querySelectorAll(".e-line"),["e-connector-line-hover"]),gt(this.connectorLineElement.querySelectorAll(".e-connector-line-right-arrow"),["e-connector-line-right-arrow-hover"]),gt(this.connectorLineElement.querySelectorAll(".e-connector-line-left-arrow"),["e-connector-line-left-arrow-hover"]),this.connectorLineElement=null)},e.prototype.getEditedConnectorLineString=function(e){for(var t,i,n,r,o,s=[],a=[],l="",h=0;h<e.length;h++)if(t=e[h].ganttProperties.predecessor){for(var p=0;p<t.length;p++){i=t[p];if(this.removeConnectorLineById("parent"+i.from+"child"+i.to),n=this.parent.connectorLineModule.getRecordByID(i.from),r=this.parent.connectorLineModule.getRecordByID(i.to),(n&&!0===n.expanded||r&&!0===r.expanded)&&!g(o=this.parent.predecessorModule.updateConnectorLineObject(n,r,i))){var d=s.indexOf(o.connectorLineId),c=this.parent.connectorLineModule.getConnectorLineTemplate(o);-1!==d?a[d]=c:(s.push(o.connectorLineId),a.push(c))}}l=a.join("")}return l},e.prototype.refreshEditedRecordConnectorLine=function(e){var t;this.removePreviousConnectorLines(this.parent.previousRecords),this.parent.connectorLineModule.expandedRecords=this.parent.getExpandedRecords(this.parent.currentViewData),t=this.getEditedConnectorLineString(e),this.parent.connectorLineModule.dependencyViewContainer.innerHTML=this.parent.connectorLineModule.dependencyViewContainer.innerHTML+t},e.prototype.removePreviousConnectorLines=function(e){for(var t,i=(t=!0===p(e))?Object.keys(e).length:e.length,n=Object.keys(e),r=0;r<i;r++){var o,s=void 0;if(t)s=e[n[r]];else s=e[r];if((o=s.ganttProperties&&s.ganttProperties.predecessor)&&o.length>0)for(var a=0;a<o.length;a++){var l="parent"+o[a].from+"child"+o[a].to;this.removeConnectorLineById(l)}}},e.prototype.removeConnectorLineById=function(e){var t=this.parent.connectorLineModule.dependencyViewContainer.querySelector("#ConnectorLine"+e);g(t)||Ct(t)},e.prototype.idFromPredecessor=function(e){for(var t=e.split(","),i=[],n=0;n<t.length;n++){for(var r=[],o=0;o<t[n].length&&(!g(t[n].charAt(o))&&"NaN"!==parseInt(t[n].charAt(o),10).toString());o++)r.push(t[n].charAt(o));i.push(r.join(""))}return i},e.prototype.predecessorValidation=function(e,t){for(var i,n,r=t.rowUniqueID,o=0;o<e.length;o++){i=e[o];var s=[];e.slice(0).splice(o,1);for(var a=function(){var e=[];return-1!==s.indexOf(i)?"break":g(l.parent.connectorLineModule.getRecordByID(i))?{value:!1}:(!g((n=l.parent.connectorLineModule.getRecordByID(i).ganttProperties).predecessor)&&n.predecessor.length>0&&n.predecessor.forEach((function(t){n.rowUniqueID.toString()!==t.from&&e.push(t.from.toString())})),r.toString()===n.rowUniqueID.toString()||-1!==e.indexOf(r.toString())?{value:!1}:(s.push(i),!g(n.predecessor)&&n.predecessor.length>0?void(i=n.predecessor[0].from):"break"))},l=this;null!==i;){var h=a();if("object"==typeof h)return h.value;if("break"===h)break}}return!0},e.prototype.validatePredecessorRelation=function(e,t){var i,n,r="ResourceView"===this.parent.viewType?e.ganttProperties.taskId:e.ganttProperties.rowUniqueID;if(!g(t)&&t.length>0){i=this.idFromPredecessor(t);for(var o=function(t){if(!s.checkParentRelation(e,i))return{value:!1};var o=i.slice(0),a=[],l=!0;if(o.forEach((function(e){-1===a.indexOf(e)?a.push(e):l=!1})),!l)return{value:!1};n=i[t];var h=[];i.slice(0).splice(t,1);for(var p=function(){var t,i,o=[];if(-1!==h.indexOf(n))return"break";if(g(s.parent.connectorLineModule.getRecordByID(n.toString())))return{value:!1};if(!g((i=s.parent.connectorLineModule.getRecordByID(n.toString()).ganttProperties).predecessor)&&i.predecessor.length>0&&i.predecessor.forEach((function(e,n){i.rowUniqueID.toString()!==e.from&&(o.push(e.from.toString()),t=n)})),r.toString()===i.rowUniqueID.toString()||-1!==o.indexOf(r.toString()))return{value:!1};if(h.push(n),g(i.predecessor)||!(i.predecessor.length>0))return"break";var a=void 0;return o.length>1?a=s.predecessorValidation(o,e.ganttProperties):1===o.length&&(n=i.predecessor[t].from),!1===a?{value:!1}:void 0};null!==n;){var d=p();if("object"==typeof d)return d;if("break"===d)break}},s=this,a=0;a<i.length;a++){var l=o(a);if("object"==typeof l)return l.value}}return!0},e.prototype.addPredecessor=function(e,t){var i=g(e.ganttProperties.predecessorsName)||""===e.ganttProperties.predecessorsName?t:e.ganttProperties.predecessorsName+","+t;this.updatePredecessorHelper(e,i)},e.prototype.removePredecessor=function(e){this.updatePredecessorHelper(e,null)},e.prototype.updatePredecessor=function(e,t,i){return this.updatePredecessorHelper(e,t,i)},e.prototype.updatePredecessorHelper=function(e,t,i){if(f(t)||this.validatePredecessorRelation(e,t)){this.parent.isOnEdit=!0;var n=[];g(t)||""===t||(n=this.parent.predecessorModule.calculatePredecessor(t,e)),this.parent.setRecordValue("predecessor",n,e.ganttProperties,!0);var r=this.parent.predecessorModule.getPredecessorStringValue(e);this.parent.setRecordValue("predecessorsName",r,e.ganttProperties,!0),this.parent.setRecordValue("taskData."+this.parent.taskFields.dependency,r,e),this.parent.setRecordValue(this.parent.taskFields.dependency,r,e);var o={};return o.action=i&&i.action&&"CellEditing"===i.action?i.action:"DrawConnectorLine",o.data=e,this.parent.editModule.initiateUpdateAction(o),!0}return!1},e.prototype.checkParentRelation=function(e,t){var i=e;if(i&&i.parentItem&&-1!==t.indexOf(i.parentItem.taskId.toString()))return!1;for(var n=function(e){var i=r.parent.currentViewData.filter((function(i){return i&&i.ganttProperties.rowUniqueID.toString()===t[e].toString()}));if(i[0]&&i[0].hasChildRecords)return{value:!1}},r=this,o=0;o<t.length;o++){var s=n(o);if("object"==typeof s)return s.value}return!0},e.prototype.initPredecessorValidationDialog=function(){if(this.parent.taskFields.dependency&&this.parent.isInPredecessorValidation){var e=ct("div",{id:this.parent.element.id+"_dialogValidationRule"});this.parent.element.appendChild(e),this.renderValidationDialog()}},e.prototype.renderValidationDialog=function(){var e=new Fo({header:"Validate Editing",isModal:!0,visible:!1,width:"50%",showCloseIcon:!0,close:this.validationDialogClose.bind(this),content:"",buttons:[{click:this.validationDialogOkButton.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("okText"),isPrimary:!0}},{click:this.validationDialogCancelButton.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("cancel")}}],target:this.parent.element,animationSettings:{effect:"None"}});document.getElementById(this.parent.element.id+"_dialogValidationRule").innerHTML="",e.isStringTemplate=!0,e.appendTo("#"+this.parent.element.id+"_dialogValidationRule"),this.parent.validationDialogElement=e},e.prototype.validationDialogOkButton=function(){var e=this.parent.currentEditedArgs;e.validateMode.preserveLinkWithEditing=document.getElementById(this.parent.element.id+"_ValidationAddlineOffset").checked,e.validateMode.removeLink=document.getElementById(this.parent.element.id+"_ValidationRemoveline").checked,e.validateMode.respectLink=document.getElementById(this.parent.element.id+"_ValidationCancel").checked,this.applyPredecessorOption(),this.parent.validationDialogElement.hide()},e.prototype.validationDialogCancelButton=function(){this.parent.currentEditedArgs.validateMode.respectLink=!0,this.applyPredecessorOption(),this.parent.validationDialogElement.hide()},e.prototype.validationDialogClose=function(e){a("isInteraction",e)&&(this.parent.currentEditedArgs.validateMode.respectLink=!0,this.applyPredecessorOption())},e.prototype.applyPredecessorOption=function(){var e=this.parent.currentEditedArgs,t=e.data;e.validateMode.respectLink?(this.parent.editModule.reUpdatePreviousRecords(),this.parent.chartRowsModule.refreshRecords([e.data])):e.validateMode.removeLink?(this.removePredecessors(t,this.validationPredecessor),this.parent.editModule.updateEditedTask(e.editEventArgs)):e.validateMode.preserveLinkWithEditing&&(this.calculateOffset(t),this.parent.editModule.updateEditedTask(e.editEventArgs))},e.prototype.calculateOffset=function(e){for(var t=u([],e.ganttProperties.predecessor,[],!0),i=this.parent.predecessorModule.getValidPredecessor(e),n=0;n<i.length;n++){var r=i[n],o=this.parent.connectorLineModule.getRecordByID(r.from),s=void 0;if(Fl(o.ganttProperties)&&Fl(e.ganttProperties)){var a=void 0,l=void 0,h=void 0,p=void 0;switch(r.type){case"FS":a=new Date(o.ganttProperties.endDate.getTime()),l=new Date(e.ganttProperties.startDate.getTime());break;case"SS":a=new Date(o.ganttProperties.startDate.getTime()),l=new Date(e.ganttProperties.startDate.getTime());break;case"SF":a=new Date(o.ganttProperties.startDate.getTime()),l=new Date(e.ganttProperties.endDate.getTime());break;case"FF":a=new Date(o.ganttProperties.endDate.getTime()),l=new Date(e.ganttProperties.endDate.getTime())}if(a.getTime()<l.getTime())a=this.dateValidateModule.checkStartDate(a),l=this.dateValidateModule.checkEndDate(l,null),p=!1;else{var d=new Date(a.getTime());a=this.dateValidateModule.checkStartDate(l),l=this.dateValidateModule.checkEndDate(d,null),p=!0}a.getTime()<l.getTime()?(h=this.dateValidateModule.getDuration(a,l,r.offsetUnit,!0,!1),s=p?-1*h:h):s=0}else s=0;t[Vl(r,"from",t,"to")].offset=s;var c=u([],o.ganttProperties.predecessor,[],!0);c[Vl(r,"from",c,"to")].offset=s,this.parent.setRecordValue("predecessor",c,o.ganttProperties,!0)}this.parent.setRecordValue("predecessor",t,e.ganttProperties,!0);var g=this.parent.predecessorModule.getPredecessorStringValue(e);this.parent.setRecordValue("taskData."+this.parent.taskFields.dependency,g,e),this.parent.setRecordValue(this.parent.taskFields.dependency,g,e),this.parent.setRecordValue("predecessorsName",g,e.ganttProperties,!0)},e.prototype.removePredecessors=function(e,t){for(var i=u([],[],e.ganttProperties.predecessor,!0),n=t.length,r=0;r<n;r++){var o=this.parent.connectorLineModule.getRecordByID(t[r].from),s=u([],[],o.ganttProperties.predecessor,!0),a=Vl(t[r],"from",i,"to");i.splice(a,1);var l=Vl(t[r],"from",s,"to");s.splice(l,1),this.parent.setRecordValue("predecessor",s,o.ganttProperties,!0)}if(i.length!==e.ganttProperties.predecessor.length){this.parent.setRecordValue("predecessor",i,e.ganttProperties,!0);var h=this.parent.predecessorModule.getPredecessorStringValue(e);this.parent.setRecordValue("predecessorsName",h,e.ganttProperties,!0),this.parent.setRecordValue("taskData."+this.parent.taskFields.dependency,h,e),this.parent.setRecordValue(this.parent.taskFields.dependency,h,e)}},e.prototype.openValidationDialog=function(e){var t=this.validationDialogTemplate(e);this.parent.validationDialogElement.setProperties({content:t}),this.parent.validationDialogElement.show()},e.prototype.validationDialogTemplate=function(e){var t,i,n=this.parent.element.id,r=ct("div",{className:"e-ValidationContent"}),o=a("task",e),s=a("parentTask",e),l=a("violationType",e),h=o.ganttProperties.taskName,p=this.parent.getFormatedDate(o.ganttProperties.startDate,"MM/dd/yyyy"),d=[h,s.ganttProperties.taskName];"taskBeforePredecessor_FS"===l?i=this.parent.localeObj.getConstant("taskBeforePredecessor_FS"):"taskAfterPredecessor_FS"===l?i=this.parent.localeObj.getConstant("taskAfterPredecessor_FS"):"taskBeforePredecessor_SS"===l?i=this.parent.localeObj.getConstant("taskBeforePredecessor_SS"):"taskAfterPredecessor_SS"===l?i=this.parent.localeObj.getConstant("taskAfterPredecessor_SS"):"taskBeforePredecessor_FF"===l?i=this.parent.localeObj.getConstant("taskBeforePredecessor_FF"):"taskAfterPredecessor_FF"===l?i=this.parent.localeObj.getConstant("taskAfterPredecessor_FF"):"taskBeforePredecessor_SF"===l?i=this.parent.localeObj.getConstant("taskBeforePredecessor_SF"):"taskAfterPredecessor_SF"===l&&(i=this.parent.localeObj.getConstant("taskAfterPredecessor_SF")),t='<div id="'+n+'_ValidationText">'+(i=function(e,t){for(var i,n=0;n<t.length;n++)i=new RegExp("\\{"+n+"\\}","gm"),e=e.replace(i,t[n].toString());return e}(i,d))+"<div>";var c='<table><tr><td><input type="radio" id="'+n+'_ValidationCancel" name="ValidationRule" checked/><label for="'+n+'_ValidationCancel" id= "'+n+'_cancelLink">Cancel, keep the existing link</label></td></tr><tr><td><input type="radio" id="'+n+'_ValidationRemoveline" name="ValidationRule"/><label for="'+n+'_ValidationRemoveline" id="'+n+'_removeLink">Remove the link and move <b>'+h+"</b> to start on <b>"+p+'</b>.</label></td></tr><tr><td><input type="radio" id="'+n+'_ValidationAddlineOffset" name="ValidationRule"/><label for="'+n+'_ValidationAddlineOffset" id="'+n+'_preserveLink">Move the <b>'+h+"</b> to start on <b>"+p+"</b> and keep the link.</label></td></tr></table>";return r.innerHTML=t+c,r},e.prototype.validateTypes=function(e){var t,i,n,r=this.parent.predecessorModule.getValidPredecessor(e);this.validationPredecessor=[];for(var o=this.parent.predecessorModule.getPredecessorDate(e,r),s=e.ganttProperties,a=this.parent.allowUnscheduledTasks&&g(o)?s.endDate:this.dateValidateModule.getEndDate(o,s.duration,s.durationUnit,s,!1),l=0;l<r.length;l++){t=this.parent.connectorLineModule.getRecordByID(r[l].from);var h=null;"FS"===r[l].type?s.startDate<o?(this.validationPredecessor.push(r[l]),h="taskBeforePredecessor_FS"):s.startDate>o&&(this.validationPredecessor.push(r[l]),h="taskAfterPredecessor_FS"):"SS"===r[l].type?s.startDate<o?(this.validationPredecessor.push(r[l]),h="taskBeforePredecessor_SS"):s.startDate>o&&(this.validationPredecessor.push(r[l]),h="taskAfterPredecessor_SS"):"FF"===r[l].type?a<=t.ganttProperties.endDate?(this.validationPredecessor.push(r[l]),h="taskBeforePredecessor_FF"):a>t.ganttProperties.endDate&&(this.validationPredecessor.push(r[l]),h="taskAfterPredecessor_FF"):"SF"===r[l].type&&(a<t.ganttProperties.startDate?(this.validationPredecessor.push(r[l]),h="taskBeforePredecessor_SF"):a>t.ganttProperties.startDate&&(this.validationPredecessor.push(r[l]),h="taskAfterPredecessor_SF")),!g(h)&&g(n)&&(i=t,n=h)}return{parentTask:i,task:e,violationType:n}},e.prototype.addRemovePredecessor=function(e){var t=this.parent.previousRecords[e.uniqueID],i=e.ganttProperties.predecessor.slice();if(t&&t.ganttProperties&&t.ganttProperties.hasOwnProperty("predecessor")){var n=t.ganttProperties.predecessor;if(!g(n))for(var r=0;r<n.length;r++){if((l=this.parent.connectorLineModule.getRecordByID(n[r].from))===e)e.ganttProperties.predecessor.push(n[r]);else{var o=u([],[],l.ganttProperties.predecessor,!0),s=Vl(n[r],"from",o,"to");-1!==s&&(o.splice(s,1),this.parent.setRecordValue("predecessor",o,l.ganttProperties,!0))}}if(!g(i))for(var a=0;a<i.length;a++){var l;(o=u([],[],(l=this.parent.connectorLineModule.getRecordByID(i[a].from)).ganttProperties.predecessor,!0)).push(i[a]),this.parent.setRecordValue("predecessor",o,l.ganttProperties,!0)}}},e.prototype.removePredecessorByIndex=function(e,t){var i=e.ganttProperties.predecessor,n=i.splice(t,1),r=this.parent.connectorLineModule.getRecordByID(n[0].from).ganttProperties.predecessor,o=Vl(n[0],"from",r,"to");r.splice(o,1);var s=this.parent.predecessorModule.getPredecessorStringValue(e);i.push(n[0]),this.parent.connectorLineEditModule.updatePredecessor(e,s)},e.prototype.renderPredecessorDeleteConfirmDialog=function(){this.confirmPredecessorDialog=new Fo({width:"320px",isModal:!0,content:this.parent.localeObj.getConstant("confirmPredecessorDelete"),buttons:[{click:this.confirmOkDeleteButton.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("okText"),isPrimary:!0}},{click:this.confirmCloseDialog.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("cancel")}}],target:this.parent.element,animationSettings:{effect:"None"}});var e=ct("div",{id:this.parent.element.id+"_deletePredecessorConfirmDialog"});this.parent.element.appendChild(e),this.confirmPredecessorDialog.isStringTemplate=!0,this.confirmPredecessorDialog.appendTo(e)},e.prototype.confirmCloseDialog=function(){this.confirmPredecessorDialog.destroy()},e.prototype.confirmOkDeleteButton=function(){this.removePredecessorByIndex(this.childRecord,this.predecessorIndex),this.confirmPredecessorDialog.destroy()},e}(),Tw=function(){return(Tw=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Dw=function(){function e(e){if(this.isFromDeleteMethod=!1,this.targetedRecords=[],this.updateParentRecords=[],this.isaddtoBottom=!1,this.confirmDialog=null,this.taskbarMoved=!1,this.predecessorUpdated=!1,this.isBreakLoop=!1,this.deletedTaskDetails=[],this.parent=e,this.validatedChildItems=[],this.parent.editSettings.allowEditing&&"Auto"===this.parent.editSettings.mode&&(this.cellEditModule=new Ou(this.parent)),this.parent.taskFields.dependency&&(this.parent.connectorLineEditModule=new kw(this.parent)),(this.parent.editSettings.allowAdding||this.parent.editSettings.allowEditing&&("Dialog"===this.parent.editSettings.mode||"Auto"===this.parent.editSettings.mode))&&(this.dialogModule=new uw(this.parent)),this.parent.editSettings.allowTaskbarEditing&&(this.taskbarEditModule=new Bu(this.parent)),this.parent.editSettings.allowDeleting){var t=ct("div",{id:this.parent.element.id+"_deleteConfirmDialog"});this.parent.element.appendChild(t),this.renderDeleteConfirmDialog()}this.parent.treeGrid.recordDoubleClick=this.recordDoubleClick.bind(this),this.parent.treeGrid.editSettings.allowAdding=this.parent.editSettings.allowAdding,this.parent.treeGrid.editSettings.allowDeleting=this.parent.editSettings.allowDeleting,this.parent.treeGrid.editSettings.showDeleteConfirmDialog=this.parent.editSettings.showDeleteConfirmDialog,this.updateDefaultColumnEditors()}return e.prototype.getModuleName=function(){return"edit"},e.prototype.updateDefaultColumnEditors=function(){for(var e=[this.parent.taskFields.id,this.parent.taskFields.progress,this.parent.taskFields.resourceInfo,"taskType"],t=0;t<e.length;t++)if(!g(e[t])&&e[t].length>0){var i=this.parent.getColumnByField(e[t],this.parent.treeGridModule.treeGridColumns);i&&(i.field===this.parent.taskFields.id?this.updateIDColumnEditParams(i):i.field===this.parent.taskFields.progress?this.updateProgessColumnEditParams(i):i.field===this.parent.taskFields.resourceInfo?this.updateResourceColumnEditor(i):"taskType"===i.field&&this.updateTaskTypeColumnEditor(i))}},e.prototype.updateIDColumnEditParams=function(e){this.updateEditParams(e,{min:0,decimals:0,validateDecimalOnType:!0,format:"n0",showSpinButton:!1})},e.prototype.updateProgessColumnEditParams=function(e){this.updateEditParams(e,{min:0,decimals:0,validateDecimalOnType:!0,max:100,format:"n0"})},e.prototype.updateEditParams=function(e,t){g(e.edit)?(e.edit={},e.edit.params={}):g(e.edit.params)&&(e.edit.params={}),u(t,e.edit.params),e.edit.params=t,this.parent.getColumnByField(e.field,this.parent.ganttColumns).edit=e.edit},e.prototype.updateResourceColumnEditor=function(e){if(this.parent.editSettings.allowEditing&&g(e.edit)&&"Auto"===this.parent.editSettings.mode){e.editType="dropdownedit",e.edit=this.getResourceEditor();var t=this.parent.getColumnByField(e.field,this.parent.ganttColumns);t.editType="dropdownedit",t.edit=e.edit}},e.prototype.getResourceEditor=function(){var e,t=this,i=this.parent.resourceFields,n={};return Sw.Inject(xw),n.write=function(n){t.parent.treeGridModule.currentEditRow={},(e=new Sw({dataSource:new yn(t.parent.resources),fields:{text:i.name,value:i.id},mode:"CheckBox",showDropDownIcon:!0,popupHeight:"350px",delimiterChar:",",value:t.parent.treeGridModule.getResourceIds(n.rowData)})).appendTo(n.element)},n.read=function(e){var n=e.ej2_instances[0].value,r=[];g(n)&&(n=[]);for(var o=0;o<n.length;o++)for(var s=0;s<t.parent.resources.length;s++)if(t.parent.resources[s][i.id]===n[o]){r.push(t.parent.resources[s][i.name]);break}return t.parent.treeGridModule.currentEditRow[t.parent.taskFields.resourceInfo]=n,r.join(",")},n.destroy=function(){e&&e.destroy()},n},e.prototype.updateTaskTypeColumnEditor=function(e){if(this.parent.editSettings.allowEditing&&g(e.edit)&&"Auto"===this.parent.editSettings.mode){e.editType="dropdownedit",e.edit=this.getTaskTypeEditor();var t=this.parent.getColumnByField(e.field,this.parent.ganttColumns);t.editType="dropdownedit",t.edit=e.edit}},e.prototype.getTaskTypeEditor=function(){var e,t=this,i={},n=[{ID:1,Value:"FixedUnit"},{ID:2,Value:"FixedWork"},{ID:3,Value:"FixedDuration"}];return i.write=function(i){t.parent.treeGridModule.currentEditRow={},(e=new Cc({dataSource:new yn(n),fields:{value:"Value"},popupHeight:"350px",value:a("taskType",i.rowData.ganttProperties)})).appendTo(i.element)},i.read=function(e){var i=e.ej2_instances[0].value;return t.parent.treeGridModule.currentEditRow.taskType=i,i},i.destroy=function(){e&&e.destroy()},i},e.prototype.reUpdateEditModules=function(){var e=this.parent.editSettings;if(e.allowEditing?(this.parent.editModule.cellEditModule&&"Dialog"===e.mode?(this.cellEditModule.destroy(),this.parent.treeGrid.recordDoubleClick=this.recordDoubleClick.bind(this)):g(this.parent.editModule.cellEditModule)&&"Auto"===e.mode&&(this.cellEditModule=new Ou(this.parent)),this.parent.editModule.dialogModule&&"Auto"===e.mode?this.parent.treeGrid.recordDoubleClick=void 0:g(this.parent.editModule.dialogModule)&&(this.dialogModule=new uw(this.parent))):(this.cellEditModule&&this.cellEditModule.destroy(),this.dialogModule&&this.dialogModule.destroy()),e.allowDeleting&&e.showDeleteConfirmDialog){if(g(this.confirmDialog)){var t=ct("div",{id:this.parent.element.id+"_deleteConfirmDialog"});this.parent.element.appendChild(t),this.renderDeleteConfirmDialog()}}else e.allowDeleting&&e.showDeleteConfirmDialog||this.confirmDialog&&!this.confirmDialog.isDestroyed&&this.confirmDialog.destroy();e.allowTaskbarEditing?g(this.parent.editModule.taskbarEditModule)&&(this.taskbarEditModule=new Bu(this.parent)):this.taskbarEditModule&&this.taskbarEditModule.destroy()},e.prototype.recordDoubleClick=function(e){if(this.parent.editSettings.allowEditing&&"Dialog"===this.parent.editSettings.mode){var t=void 0;if(e.row){var i=a("rowIndex",e.row);t=this.parent.currentViewData[i]}g(t)||this.dialogModule.openEditDialog(t)}this.parent.ganttChartModule.recordDoubleClick(e)},e.prototype.destroy=function(){this.cellEditModule&&this.cellEditModule.destroy(),this.taskbarEditModule&&this.taskbarEditModule.destroy(),this.dialogModule&&this.dialogModule.destroy(),this.confirmDialog&&!this.confirmDialog.isDestroyed&&this.confirmDialog.destroy()},e.prototype.updateRecordByID=function(e){if(!this.parent.readOnly){var t=this.parent.taskFields;if(g(e)||g(e[t.id]))return;var i,n="ResourceView"===this.parent.viewType?this.parent.flatData[this.parent.getTaskIds().indexOf("T"+e[t.id])]:this.parent.getRecordByID(e[t.id]);if(S())-1===(i=Object.keys(e)).indexOf(t.startDate)||g(a(this.parent.taskFields.startDate,e))||l(this.parent.taskFields.startDate,this.parent.dataOperation.getDateFromFormat(a(this.parent.taskFields.startDate,e)),e),-1===i.indexOf(t.endDate)||g(a(this.parent.taskFields.endDate,e))||l(this.parent.taskFields.endDate,this.parent.dataOperation.getDateFromFormat(a(this.parent.taskFields.endDate,e)),e),-1===i.indexOf(t.baselineStartDate)||g(a(this.parent.taskFields.baselineStartDate,e))||l(this.parent.taskFields.baselineStartDate,this.parent.dataOperation.getDateFromFormat(a(this.parent.taskFields.baselineStartDate,e)),e),-1===i.indexOf(t.baselineEndDate)||g(a(this.parent.taskFields.baselineEndDate,e))||l(this.parent.taskFields.baselineEndDate,this.parent.dataOperation.getDateFromFormat(a(this.parent.taskFields.baselineEndDate,e)),e);if(!g(this.parent.editModule)&&n)if(this.parent.isOnEdit=!0,this.validateUpdateValues(e,n,!0),-1===(i=Object.keys(e)).indexOf(t.startDate)&&-1===i.indexOf(t.endDate)&&-1===i.indexOf(t.duration)||this.parent.dataOperation.calculateScheduledValues(n,n.taskData,!1),this.parent.dataOperation.updateWidthLeft(n),f(e[this.parent.taskFields.dependency])||e[this.parent.taskFields.dependency]===n.ganttProperties.predecessorsName){var r={};r.data=n,"ResourceView"===this.parent.viewType&&(r.action="methodUpdate"),this.parent.editModule.initiateUpdateAction(r)}else this.parent.connectorLineEditModule.updatePredecessor(n,e[this.parent.taskFields.dependency])}},e.prototype.validateUpdateValues=function(e,t,i){for(var n=this.parent,r=n.taskFields,o=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];t[e[r]]=r}return t}(n.columnMapping),s=[],a=!1,l=0,h=Object.keys(e);l<h.length;l++){var p=h[l];if(!(g(p)||g(e[p])&&!n.allowUnscheduledTasks))if(-1!==[r.startDate,r.endDate,r.duration].indexOf(p))if(i)if(r.duration===p)n.dataOperation.updateDurationValue(e[p],t.ganttProperties),t.ganttProperties.duration>0&&t.ganttProperties.isMilestone&&this.parent.setRecordValue("isMilestone",!1,t.ganttProperties,!0),n.dataOperation.updateMappingData(t,o[p]);else{var d="string"==typeof e[p]?new Date(e[p]):e[p];n.setRecordValue(o[p],d,t.ganttProperties,!0),n.dataOperation.updateMappingData(t,o[p])}else s.push(p),a=!0;else if(r.resourceInfo===p){var c=n.dataOperation.setResourceInfo(e);"ResourceView"===this.parent.viewType&&(JSON.stringify(c)!==JSON.stringify(t.ganttProperties.resourceInfo)?(this.parent.editModule.dialogModule.isResourceUpdate=!0,this.parent.editModule.dialogModule.previousResource=g(t.ganttProperties.resourceInfo)?[]:t.ganttProperties.resourceInfo.slice()):this.parent.editModule.dialogModule.isResourceUpdate=!1),t.ganttProperties.resourceInfo=c,n.dataOperation.updateMappingData(t,"resourceInfo")}else if(r.dependency===p);else if(-1!==[r.progress,r.notes,r.durationUnit,r.expandState,r.milestone,r.name,r.baselineStartDate,r.baselineEndDate,r.id].indexOf(p)){var u=n.columnByField[p],f=e[p];g(u)||"datepickeredit"!==u.editType&&"datetimepickeredit"!==u.editType||(f=n.dataOperation.getDateFromFormat(f));var m=o[p];p===r.id?m="taskId":p===r.name&&(m="taskName"),g(m)||n.setRecordValue(m,f,t.ganttProperties,!0),(p===r.baselineStartDate||p===r.baselineEndDate)&&t.ganttProperties.baselineStartDate&&t.ganttProperties.baselineEndDate&&(n.setRecordValue("baselineLeft",n.dataOperation.calculateBaselineLeft(t.ganttProperties),t.ganttProperties,!0),n.setRecordValue("baselineWidth",n.dataOperation.calculateBaselineWidth(t.ganttProperties),t.ganttProperties,!0)),n.setRecordValue("taskData."+p,f,t),n.setRecordValue(p,f,t)}else if(r.indicators===p){f=e[p];n.setRecordValue("indicators",f,t.ganttProperties,!0),n.setRecordValue("taskData."+p,f,t),n.setRecordValue(p,f,t)}else if(r.work===p)n.setRecordValue("work",e[p],t.ganttProperties,!0),this.parent.dataOperation.updateMappingData(t,"work"),this.parent.dataOperation.updateMappingData(t,"duration"),this.parent.dataOperation.updateMappingData(t,"endDate");else if("taskType"===p)n.setRecordValue("taskType",e[p],t.ganttProperties,!0);else if(-1!==n.customColumns.indexOf(p)){u=n.columnByField[p],f=e[p];g(u.edit)&&("datepickeredit"!==u.editType&&"datetimepickeredit"!==u.editType||(f=n.dataOperation.getDateFromFormat(f))),n.setRecordValue("taskData."+p,f,t),n.setRecordValue(p,f,t)}else r.manual===p&&(n.setRecordValue("isAutoSchedule",!e[p],t.ganttProperties,!0),this.parent.setRecordValue(p,e[p],t),this.updateTaskScheduleModes(t))}a&&this.validateScheduleValues(s,t,e)},e.prototype.updateResourceRelatedFields=function(e,t){var i=e.ganttProperties,n=i.taskType,r=i.isAutoSchedule;if(!g(i.resourceInfo))if(i.work>0||"work"===t)switch(n){case"FixedUnit":r&&i.resourceInfo.length&&("work"===t||"resource"===t)?this.parent.dataOperation.updateDurationWithWork(e):r||"work"!==t?this.parent.dataOperation.updateWorkWithDuration(e):this.parent.dataOperation.updateUnitWithWork(e);break;case"FixedWork":if(0===i.resourceInfo.length)return;r?"duration"===t||"endDate"===t?(this.parent.dataOperation.updateUnitWithWork(e),0===i.duration&&(this.parent.setRecordValue("work",0,i,!0),g(this.parent.taskFields.work)||this.parent.dataOperation.updateMappingData(e,"work"))):this.parent.dataOperation.updateDurationWithWork(e):"work"===t?this.parent.dataOperation.updateUnitWithWork(e):this.parent.dataOperation.updateWorkWithDuration(e);break;case"FixedDuration":i.resourceInfo.length&&"work"===t?this.parent.dataOperation.updateUnitWithWork(e):this.parent.dataOperation.updateWorkWithDuration(e)}else this.parent.dataOperation.updateWorkWithDuration(e)},e.prototype.validateScheduleValues=function(e,t,i){var n=this.parent;e.length>2?n.dataOperation.calculateScheduledValues(t,i,!1):e.length>1?this.validateScheduleByTwoValues(i,e,t):this.dialogModule.validateScheduleValuesByCurrentField(e[0],i[e[0]],t)},e.prototype.validateScheduleByTwoValues=function(e,t,i){var n,r,o,s=this.parent,a=s.taskFields,l=i.ganttProperties,h=s.allowUnscheduledTasks;-1!==t.indexOf(a.startDate)&&(n=e[a.startDate]),-1!==t.indexOf(a.endDate)&&(r=e[a.endDate]),-1!==t.indexOf(a.duration)&&(o=e[a.duration]),n&&r||h&&-1!==t.indexOf(a.startDate)&&-1!==t.indexOf(a.endDate)?(s.setRecordValue("startDate",s.dataOperation.getDateFromFormat(n),l,!0),s.setRecordValue("endDate",s.dataOperation.getDateFromFormat(r),l,!0),s.dataOperation.calculateDuration(i)):r&&o||h&&-1!==t.indexOf(a.endDate)&&-1!==t.indexOf(a.duration)?(s.setRecordValue("endDate",s.dataOperation.getDateFromFormat(r),l,!0),s.dataOperation.updateDurationValue(o,l)):(n&&o||h&&-1!==t.indexOf(a.startDate)&&-1!==t.indexOf(a.duration))&&(s.setRecordValue("startDate",s.dataOperation.getDateFromFormat(n),l,!0),s.dataOperation.updateDurationValue(o,l))},e.prototype.isTaskbarMoved=function(e){var t=!1,i=e.ganttProperties,n=this.parent.previousRecords&&this.parent.previousRecords[e.uniqueID];if(n&&n.ganttProperties){var r=a("ganttProperties.startDate",n),o=a("ganttProperties.endDate",n),s=a("ganttProperties.duration",n),l=a("ganttProperties.durationUnit",n),h=Object.keys(n.ganttProperties);-1===h.indexOf("startDate")&&-1===h.indexOf("endDate")&&-1===h.indexOf("duration")&&-1===h.indexOf("durationUnit")||(g(r)&&!g(i.startDate)||g(o)&&!g(i.endDate)||g(i.startDate)&&!g(r)||g(i.endDate)&&!g(o)||r&&r.getTime()!==i.startDate.getTime()||o&&o.getTime()!==i.endDate.getTime()||!g(s)&&s!==i.duration||!g(s)&&s===i.duration&&l!==i.durationUnit)&&(t=!0)}return t},e.prototype.isPredecessorUpdated=function(e){var t=!1,i=this.parent.previousRecords[e.uniqueID];return i&&i.ganttProperties&&i.ganttProperties.hasOwnProperty("predecessor")&&(e.ganttProperties.predecessorsName!==i.ganttProperties.predecessorsName?t=!0:this.parent.setRecordValue("predecessor",i.ganttProperties.predecessor,e.ganttProperties,!0)),t},e.prototype.isCheckPredecessor=function(e){var t=!1;return this.parent.previousRecords[e.uniqueID]&&this.parent.taskFields.dependency&&this.parent.isInPredecessorValidation&&this.parent.predecessorModule.getValidPredecessor(e).length>0&&this.isTaskbarMoved(e)&&(t=!0),t},e.prototype.updateGanttProperties=function(e,t){var i=["taskId","uniqueID","rowUniqueID","parentId"];Object.keys(e.ganttProperties).forEach((function(n){-1===i.indexOf(n)&&(t.ganttProperties[n]=e.ganttProperties[n])}))},e.prototype.initiateUpdateAction=function(e){var t=this.isCheckPredecessor(e.data);this.taskbarMoved=this.isTaskbarMoved(e.data),this.predecessorUpdated=this.isPredecessorUpdated(e.data),this.predecessorUpdated&&(this.parent.isConnectorLineUpdate=!0,this.parent.connectorLineEditModule.addRemovePredecessor(e.data));var i={};if(t)if(i=this.parent.connectorLineEditModule.validateTypes(e.data),this.parent.isConnectorLineUpdate=!0,g(a("violationType",i)))this.updateEditedTask(e);else{var n=this.validateTaskEvent(e);!1===n.validateMode.preserveLinkWithEditing&&!1===n.validateMode.removeLink&&!1===n.validateMode.respectLink?this.parent.connectorLineEditModule.openValidationDialog(i):this.parent.connectorLineEditModule.applyPredecessorOption()}else this.taskbarMoved&&(this.parent.isConnectorLineUpdate=!0),this.updateEditedTask(e)},e.prototype.validateTaskEvent=function(e){var t={},i={};return this.resetValidateArgs(),this.parent.currentEditedArgs=t,t.cancel=!1,t.data=e.data,t.requestType="validateLinkedTask",t.validateMode=this.parent.dialogValidateMode,t.editEventArgs=e,S()&&(i=Tw({},t),this.parent.updateDataArgs(t),this.parent.currentEditedArgs=i),this.parent.actionBeginTask(t),S()?i:t},e.prototype.resetValidateArgs=function(){this.parent.dialogValidateMode.preserveLinkWithEditing=!0,this.parent.dialogValidateMode.removeLink=!1,this.parent.dialogValidateMode.respectLink=!1},e.prototype.updateEditedTask=function(e){var t=e.data;if(this.updateParentChildRecord(t),this.parent.isConnectorLineUpdate){for(var i=0;i<this.validatedChildItems.length;i++){var n=this.validatedChildItems[i];n.ganttProperties.predecessor&&n.ganttProperties.predecessor.length>0&&(this.parent.editedTaskBarItem=n,this.parent.predecessorModule.validatePredecessor(n,[],""))}t.ganttProperties.predecessor&&(this.parent.isMileStoneEdited=t.ganttProperties.isMilestone,this.taskbarMoved&&(this.parent.editedTaskBarItem=t),this.parent.predecessorModule.validatePredecessor(t,[],""))}(t.parentItem||"Auto"!==this.parent.taskMode)&&this.parent.dataOperation.updateParentItems(t,!0),this.initiateSaveAction(e)},e.prototype.updateParentChildRecord=function(e){var t=e;t.hasChildRecords&&this.taskbarMoved&&"Auto"===this.parent.taskMode&&this.updateChildItems(t)},e.prototype.updateTaskScheduleModes=function(e){var t=e[this.parent.taskFields.startDate],i=e.ganttProperties;if(e.hasChildRecords&&i.isAutoSchedule)this.parent.setRecordValue("startDate",i.autoStartDate,i,!0),this.parent.setRecordValue("endDate",i.autoEndDate,i,!0),this.parent.setRecordValue("width",this.parent.dataOperation.calculateWidth(e,!0),i,!0),this.parent.setRecordValue("left",this.parent.dataOperation.calculateLeft(i,!0),i,!0),this.parent.setRecordValue("progressWidth",this.parent.dataOperation.getProgressWidth(i.width,i.progress),i,!0),this.parent.dataOperation.calculateDuration(e);else if(e.hasChildRecords&&!i.isAutoSchedule)this.parent.dataOperation.updateWidthLeft(e),this.parent.dataOperation.calculateDuration(e),this.parent.setRecordValue("autoStartDate",i.startDate,i,!0),this.parent.setRecordValue("autoEndDate",i.endDate,i,!0),this.parent.setRecordValue("autoDuration",this.parent.dataOperation.calculateAutoDuration(e),i,!0),this.parent.dataOperation.updateAutoWidthLeft(e);else{var n=this.parent.dateValidationModule.checkStartDate(t,e.ganttProperties);this.parent.setRecordValue("startDate",n,e.ganttProperties,!0),this.parent.dataOperation.updateMappingData(e,"startDate"),this.parent.dateValidationModule.calculateEndDate(e),this.parent.setRecordValue("taskData."+this.parent.taskFields.manual,e[this.parent.taskFields.manual],e),this.parent.dataOperation.updateWidthLeft(e)}},e.prototype.calculateDateByRoundOffDuration=function(e,t){var i=e,n=i.ganttProperties,r=new Date(t.getTime());if(!g(n.endDate)&&g(n.startDate)){var o=this.parent.dateValidationModule.checkStartDate(r,n,null);this.parent.setRecordValue("endDate",this.parent.dateValidationModule.checkEndDate(o,i.ganttProperties),n,!0)}else this.parent.setRecordValue("startDate",this.parent.dateValidationModule.checkStartDate(r,n,!1),n,!0),g(n.duration)||this.parent.dateValidationModule.calculateEndDate(i);this.parent.dataOperation.updateWidthLeft(e),this.parent.dataOperation.updateTaskData(i)},e.prototype.updateParentProgress=function(e){var t=0,i=this.parent.getParentTask(e),n=i.childRecords,r=n?n.length:0,o=0,s=0,l=0,h={};if(n){for(var p=0;p<r;p++)n[p].ganttProperties.isMilestone&&!n[p].hasChildRecords||!Fl(n[p].ganttProperties)?s+=1:(o+=a("totalProgress",h=this.parent.dataOperation.getParentProgress(n[p])),l+=a("totalDuration",h));t=r-s>0?Math.round(o/l):0,isNaN(t)&&(t=0),this.parent.setRecordValue("progressWidth",this.parent.dataOperation.getProgressWidth(i.ganttProperties.isAutoSchedule?i.ganttProperties.width:i.ganttProperties.autoWidth,t),i.ganttProperties,!0),this.parent.setRecordValue("progress",Math.floor(t),i.ganttProperties,!0),this.parent.setRecordValue("totalProgress",o,i.ganttProperties,!0),this.parent.setRecordValue("totalDuration",l,i.ganttProperties,!0)}this.parent.dataOperation.updateTaskData(i),i.parentItem&&this.updateParentProgress(i.parentItem)},e.prototype.revertCellEdit=function(e){this.parent.editModule.reUpdatePreviousRecords(!1,!0),this.resetEditProperties()},e.prototype.reUpdatePreviousRecords=function(e,t){for(var i=this.parent.previousRecords,n=Object.keys(i),r=0;r<n.length;r++){var o=n[r],s=i[o],a=this.parent.getTaskByUniqueID(o);this.copyTaskData(a.taskData,s.taskData),delete s.taskData,this.copyTaskData(a.ganttProperties,s.ganttProperties),delete s.ganttProperties,this.copyTaskData(a,s);var l=this.parent.currentViewData.indexOf(a);if(e&&this.parent.chartRowsModule.refreshRow(l),t){var h="ProjectView"===this.parent.viewType?a.ganttProperties.taskId:a.ganttProperties.rowUniqueID;this.parent.treeGrid.grid.setRowData(h,a),this.parent.treeGrid.grid.getRowObjectFromUID(this.parent.treeGrid.grid.getDataRows()[l].getAttribute("data-uid")).data=a}}},e.prototype.copyTaskData=function(e,t){g(t)||u(e,t)},e.prototype.updateScheduleDatesOnEditing=function(e){},e.prototype.updateChildItems=function(e){var t,i=this.parent.previousRecords[e.uniqueID];t=g(i)||g(i)&&!g(i.ganttProperties)?new Date(e.ganttProperties.startDate.getTime()):new Date(i.ganttProperties.startDate.getTime());var n,r,o,s,a,l=e.ganttProperties.startDate,h=[];if(this.getUpdatableChildRecords(e,h),0!==h.length){t.getTime()>l.getTime()?(n=this.parent.dateValidationModule.checkStartDate(l),r=this.parent.dateValidationModule.checkEndDate(t,e.ganttProperties),s=!1):(n=this.parent.dateValidationModule.checkStartDate(t),r=this.parent.dateValidationModule.checkEndDate(l,e.ganttProperties),s=!0),a=n.getTime()>=r.getTime()?0:this.parent.dateValidationModule.getDuration(n,r,"minute",!0,!1);for(var p=0;p<h.length;p++)if(h[p].ganttProperties.isAutoSchedule)if(a>0){var d=Fl(h[p].ganttProperties)||h[p].ganttProperties.startDate?h[p].ganttProperties.startDate:h[p].ganttProperties.endDate?h[p].ganttProperties.endDate:new Date(t.toString());o=s?this.parent.dateValidationModule.getEndDate(this.parent.dateValidationModule.checkStartDate(d,h[p].ganttProperties,h[p].ganttProperties.isMilestone),a,"minute",h[p].ganttProperties,!1):this.parent.dateValidationModule.getStartDate(this.parent.dateValidationModule.checkEndDate(d,h[p].ganttProperties),a,"minute",h[p].ganttProperties),this.calculateDateByRoundOffDuration(h[p],o),this.parent.isOnEdit&&-1===this.validatedChildItems.indexOf(h[p])&&this.validatedChildItems.push(h[p])}else g(i)&&(o=t,this.calculateDateByRoundOffDuration(h[p],o),this.parent.isOnEdit&&-1===this.validatedChildItems.indexOf(h[p])&&this.validatedChildItems.push(h[p]));h.length&&this.parent.dataOperation.updateParentItems(e,!0)}},e.prototype.getUpdatableChildRecords=function(e,t){for(var i=e.childRecords,n=0;n<i.length;n++)i[n].ganttProperties.isAutoSchedule&&(t.push(i[n]),i[n].hasChildRecords&&this.getUpdatableChildRecords(i[n],t))},e.prototype.initiateSaveAction=function(e){var t=this;this.parent.showSpinner();var i={};i.requestType="beforeSave",i.data=e.data,i.modifiedRecords=this.parent.editedRecords,i.modifiedTaskData=Hl(this.parent.editedRecords,!0),e.action&&"DrawConnectorLine"===e.action&&(i.action="DrawConnectorLine"),S()&&(i=this.parent.updateDataArgs(i)).modifiedTaskData,this.parent.trigger("actionBegin",i,(function(i){if(i.cancel)t.reUpdatePreviousRecords(),t.parent.chartRowsModule.refreshRecords([e.data]),t.resetEditProperties();else if(i.modifiedTaskData=Hl(i.modifiedRecords),Nl(t.parent.dataSource)){var n=t.parent.dataSource,r={changedRecords:i.modifiedTaskData},o=t.parent.query instanceof on?t.parent.query:new on;n.saveChanges(r,t.parent.taskFields.id,null,o).then((function(i){return t.dmSuccess(i,e)})).catch((function(i){return t.dmFailure(i,e)}))}else t.saveSuccess(e)}))},e.prototype.dmSuccess=function(e,t){this.saveSuccess(t)},e.prototype.dmFailure=function(e,t){if(this.deletedTaskDetails.length){for(var i=this.deletedTaskDetails,n=0;n<i.length;n++)i[n].isDelete=!1;this.deletedTaskDetails=[]}this.reUpdatePreviousRecords(!0,!0),this.resetEditProperties(),this.parent.trigger("actionFailure",{error:e})},e.prototype.updateSharedTask=function(e){for(var t=e.ganttProperties.sharedTaskUniqueIds,i=0;i<t.length;i++){var n=this.parent.flatData[this.parent.ids.indexOf(t[i].toString())];n.uniqueID!==e.uniqueID&&(this.updateGanttProperties(e,n),this.parent.setRecordValue("taskData",e.taskData,n,!0),this.parent.dataOperation.updateTaskData(n),this.parent.dataOperation.updateResourceName(n),g(n.parentItem)||this.parent.dataOperation.updateParentItems(n.parentItem))}},e.prototype.saveSuccess=function(e){var t={};if(this.parent.timelineSettings.updateTimescaleView){var i=this.parent.editedRecords;this.parent.timelineModule.updateTimeLineOnEditing(i,e.action)}if("ResourceView"===this.parent.viewType){"TaskbarEditing"===e.action?this.updateSharedTask(e.data):"DialogEditing"!==e.action&&"CellEditing"!==e.action&&"methodUpdate"!==e.action||(this.parent.editModule.dialogModule.isResourceUpdate?(this.updateResoures(this.parent.editModule.dialogModule.previousResource,e.data.ganttProperties.resourceInfo,e.data),this.updateSharedTask(e.data),this.isTreeGridRefresh=!0):this.updateSharedTask(e.data));for(var n=0;n<this.updateParentRecords.length;n++)this.parent.dataOperation.updateParentItems(this.updateParentRecords[n]);this.updateParentRecords=[],this.parent.editModule.dialogModule.isResourceUpdate=!1,this.parent.editModule.dialogModule.previousResource=[]}this.isTreeGridRefresh||(this.parent.chartRowsModule.refreshRecords(this.parent.editedRecords),this.parent.isConnectorLineUpdate&&!g(this.parent.connectorLineEditModule)&&(this.parent.updatedConnectorLineCollection=[],this.parent.connectorLineIds=[],this.parent.connectorLineEditModule.refreshEditedRecordConnectorLine(this.parent.editedRecords),this.updateScheduleDatesOnEditing(e))),!this.parent.editSettings.allowTaskbarEditing||this.parent.editSettings.allowTaskbarEditing&&!this.taskbarEditModule.dependencyCancel?(t.requestType="save",t.data=e.data,t.modifiedRecords=this.parent.editedRecords,t.modifiedTaskData=Hl(this.parent.editedRecords),g(e.action)||l("action",e.action,t),"TaskbarEditing"===e.action&&(t.taskBarEditAction=e.taskBarEditAction),this.endEditAction(e),S()&&this.parent.updateDataArgs(t),this.parent.trigger("actionComplete",t)):(this.taskbarEditModule.dependencyCancel=!1,this.resetEditProperties(),S()&&this.parent.updateDataArgs(t)),"ResourceView"===this.parent.viewType&&this.isTreeGridRefresh&&(this.parent.treeGrid.refresh(),this.isTreeGridRefresh=!1)},e.prototype.updateResoures=function(e,t,i){var n=this.parent.flatData,r=t?t.length:0,o=e?e.length:0;if(0!==r||0!==o){for(var s=0;s<r;s++){for(var a=[],l=parseInt(t[s][this.parent.resourceFields.id],10),h=0;h<e.length;h++)if(parseInt(e[h][this.parent.resourceFields.id],10)===l){a.push(h);break}if(0===a.length){var p=n[this.parent.getTaskIds().indexOf("R"+l)];p&&this.addNewRecord(i,p)}else e.splice(parseInt(a[0].toString(),10),1)}var d=e?e.length:0;for(s=0;s<d;s++)for(var c=i.ganttProperties.taskId,u=(l=e[s][this.parent.resourceFields.id],n[this.parent.getTaskIds().indexOf("R"+l)]),g=0;g<u.childRecords.length;g++)u.childRecords[g].ganttProperties.taskId===c&&this.removeChildRecord(u.childRecords[g]);if(r>0){var f=this.parent.getParentTask(i.parentItem);f&&f.ganttProperties.taskName===this.parent.localeObj.getConstant("unassignedTask")&&this.removeChildRecord(i)}0===r&&this.checkWithUnassignedTask(i)}},e.prototype.checkWithUnassignedTask=function(e){for(var t=null,i=0;i<this.parent.flatData.length;i++)this.parent.flatData[i].ganttProperties.taskName===this.parent.localeObj.getConstant("unassignedTask")&&(t=this.parent.flatData[i]);if(g(t)){var n={};n[this.parent.taskFields.id]=0,n[this.parent.taskFields.name]=this.parent.localeObj.getConstant("unassignedTask");var r,o=this.parent.isOnEdit;this.parent.isOnEdit=!1,r=this.parent.dataOperation.createRecord(n,0),this.parent.isOnEdit=o,this.addRecordAsBottom(r);var s=this.parent.flatData[this.parent.flatData.length-1];this.addNewRecord(e,s)}else this.addNewRecord(e,t)},e.prototype.addRecordAsBottom=function(e){var t=this.parent.flatData.length;this.parent.taskFields.parentID&&this.parent.dataSource.length>0&&this.parent.dataSource.splice(t+1,0,e.taskData),this.parent.currentViewData.splice(t+1,0,e),this.parent.flatData.splice(t+1,0,e),this.parent.ids.splice(t+1,0,e.ganttProperties.rowUniqueID.toString());var i=0===e.level?"R"+e.ganttProperties.taskId:"T"+e.ganttProperties.taskId;this.parent.getTaskIds().splice(t+1,0,i),this.updateTreeGridUniqueID(e,"add")},e.prototype.addNewRecord=function(e,t){var i=null;i=u({},{},e,!0),this.parent.setRecordValue("uniqueID",Za(this.parent.element.id+"_data_"),i),this.parent.setRecordValue("uniqueID",i.uniqueID,i.ganttProperties,!0);var n=i.uniqueID.replace(this.parent.element.id+"_data_","");this.parent.setRecordValue("rowUniqueID",n,i),this.parent.setRecordValue("rowUniqueID",n,i.ganttProperties,!0),this.parent.setRecordValue("level",1,i),this.parent.taskFields.parentID&&this.parent.setRecordValue("parentId",t.ganttProperties.taskId,i.ganttProperties,!0),this.parent.setRecordValue("parentItem",this.parent.dataOperation.getCloneParent(t),i);var r=i.parentItem?i.parentItem.uniqueID:null;this.parent.setRecordValue("parentUniqueID",r,i),e.ganttProperties.sharedTaskUniqueIds.push(n),i.ganttProperties.sharedTaskUniqueIds=e.ganttProperties.sharedTaskUniqueIds,this.addRecordAsChild(t,i)},e.prototype.removeChildRecord=function(e){var t,i=this.parent,n=[];n=this.parent.dataSource instanceof yn&&this.parent.dataSource.dataSource.json.length>0?this.parent.dataSource.dataSource.json:this.parent.currentViewData,t=this.parent.dataSource;var r=e,o=this.parent.getParentTask(r.parentItem);if(r){if(r.parentItem){var s=o?o.childRecords:[],a=0;s&&s.length>0&&(1===s.length&&(this.parent.isOnDelete=!0,s[0].isDelete=!0,this.parent.dataOperation.updateParentItems(o),this.parent.isOnDelete=!1,s[0].isDelete=!1),a=s.indexOf(r),o.childRecords.splice(a,1),this.updateParentRecords.push(o))}if(r.ganttProperties.sharedTaskUniqueIds.length){var l=r.ganttProperties.sharedTaskUniqueIds.indexOf(r.ganttProperties.rowUniqueID);r.ganttProperties.sharedTaskUniqueIds.splice(l,1)}if(this.updateTreeGridUniqueID(r,"delete"),r&&!this.parent.taskFields.parentID){var h=[];h.push(r.ganttProperties.rowUniqueID.toString()),this.parent.editModule.removeFromDataSource(h)}if(i.taskFields.parentID){for(var p=void 0,d=this.parent.currentViewData,c=0;c<d.length;c++)d[c].ganttProperties.rowUniqueID===r.ganttProperties.rowUniqueID&&(p=c);-1!==p&&(t.length>0&&t.splice(p,1),n.splice(p,1),this.parent.flatData.splice(p,1),this.parent.ids.splice(p,1),this.parent.getTaskIds().splice(p,1))}var u=n.indexOf(r);if(!i.taskFields.parentID){var g=this.parent.editModule.getChildCount(r,0);n.splice(u,g+1),this.parent.flatData.splice(u,g+1),this.parent.ids.splice(u,g+1),this.parent.getTaskIds().splice(u,g+1)}r.parentItem&&o&&o.childRecords&&!o.childRecords.length&&(o.expanded=!1,o.hasChildRecords=!1)}},e.prototype.addRecordAsChild=function(e,t){var i,n=this.parent,r=this.parent.flatData.indexOf(e),o=this.parent.editModule.getChildCount(e,0);if(!g(this.addRowIndex)&&this.addRowPosition&&e.childRecords&&"Child"!==this.addRowPosition){var s=e.childRecords[this.addRowIndex],a="Above"===this.addRowPosition||"Below"===this.addRowPosition?this.addRowPosition:"Child";i=s?this.addRowIndex+r+1:o+r+1,i="Above"===a?i:i+1}else i=g(o)||0===o?r+1:o+r+1;n.taskFields.parentID&&this.parent.dataSource.length>0&&this.parent.dataSource.splice(i,0,t.taskData),this.parent.currentViewData.splice(i,0,t),this.parent.flatData.splice(i,0,t),this.parent.ids.splice(i,0,t.ganttProperties.rowUniqueID.toString()),this.updateTreeGridUniqueID(t,"add");var l=0===t.level?"R"+t.ganttProperties.taskId:"T"+t.ganttProperties.taskId;this.parent.getTaskIds().splice(i,0,l),e.hasChildRecords||(e.hasChildRecords=!0,e.expanded=!0,e.childRecords.length||(e.childRecords=[],!n.taskFields.parentID&&g(e.taskData[this.parent.taskFields.child])&&(e.taskData[this.parent.taskFields.child]=[]))),e.childRecords.splice(e.childRecords.length,0,t),g(t)||this.parent.taskFields.parentID||g(e.taskData[this.parent.taskFields.child])||e.taskData[this.parent.taskFields.child].splice(e.childRecords.length,0,t.taskData),g(t.parentItem)||this.updateParentRecords.push(e)},e.prototype.resetEditProperties=function(){this.parent.currentEditedArgs={},this.resetValidateArgs(),this.parent.editedTaskBarItem=null,this.parent.isOnEdit=!1,this.validatedChildItems=[],this.parent.isConnectorLineUpdate=!1,this.parent.editedTaskBarItem=null,this.taskbarMoved=!1,this.predecessorUpdated=!1,g(this.dialogModule)||(this.dialogModule.dialog&&!this.dialogModule.dialogObj.isDestroyed&&this.dialogModule.dialogObj.hide(),this.dialogModule.dialogClose()),this.parent.hideSpinner(),this.parent.initiateEditAction(!1)},e.prototype.endEditAction=function(e){this.resetEditProperties(),"TaskbarEditing"===e.action?this.parent.trigger("taskbarEdited",e):"CellEditing"===e.action?this.parent.trigger("endEdit",e):"DialogEditing"===e.action&&(this.dialogModule.dialog&&!this.dialogModule.dialogObj.isDestroyed&&this.dialogModule.dialogObj.hide(),this.dialogModule.dialogClose())},e.prototype.saveFailed=function(e){this.reUpdatePreviousRecords(),this.parent.hideSpinner()},e.prototype.renderDeleteConfirmDialog=function(){var e=new Fo({width:"320px",isModal:!0,visible:!1,content:this.parent.localeObj.getConstant("confirmDelete"),buttons:[{click:this.confirmDeleteOkButton.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("okText"),isPrimary:!0}},{click:this.closeConfirmDialog.bind(this),buttonModel:{content:this.parent.localeObj.getConstant("cancel")}}],target:this.parent.element,animationSettings:{effect:"None"}});e.appendTo("#"+this.parent.element.id+"_deleteConfirmDialog"),this.confirmDialog=e},e.prototype.closeConfirmDialog=function(){this.confirmDialog.hide()},e.prototype.confirmDeleteOkButton=function(){this.deleteSelectedItems(),this.confirmDialog.hide(),this.parent.element.querySelector(".e-treegrid").focus()},e.prototype.startDeleteAction=function(){this.parent.editSettings.allowDeleting&&(this.parent.editSettings.showDeleteConfirmDialog?this.confirmDialog.show():this.deleteSelectedItems())},e.prototype.deleteResourceRecords=function(e){for(var t=[],i=0;i<e.length;i++)if(e[i].parentItem)for(var n=e[i].ganttProperties.sharedTaskUniqueIds,r=0;r<n.length;r++)t.push(this.parent.flatData[this.parent.ids.indexOf(n[r].toString())]);this.deleteRow(t)},e.prototype.deleteSelectedItems=function(){if(this.isFromDeleteMethod)this.targetedRecords.length&&("ResourceView"===this.parent.viewType?this.deleteResourceRecords(this.targetedRecords):this.deleteRow(this.targetedRecords)),this.isFromDeleteMethod=!1;else{var e=[];"Cell"!==this.parent.selectionSettings.mode?e=this.parent.selectionModule.getSelectedRecords():"Cell"===this.parent.selectionSettings.mode&&(e=this.parent.selectionModule.getCellSelectedRecords()),"ResourceView"===this.parent.viewType?this.deleteResourceRecords(e):this.deleteRow(e)}},e.prototype.deleteRecord=function(e){this.isFromDeleteMethod=!0;var t=typeof e;switch(this.targetedRecords=[],t){case"number":case"string":var i=e.toString();"ResourceView"===this.parent.viewType?g(i)||-1===this.parent.getTaskIds().indexOf("T"+i)||this.targetedRecords.push(this.parent.flatData[this.parent.getTaskIds().indexOf("T"+i)]):g(i)||-1===this.parent.ids.indexOf(i)||this.targetedRecords.push(this.parent.getRecordByID(i));break;case"object":Array.isArray(e)?this.updateTargetedRecords(e):this.targetedRecords.push(e.valueOf())}this.startDeleteAction()},e.prototype.updateTargetedRecords=function(e){if(e.length)if("object"===typeof e[0])this.targetedRecords=e;else for(var t=0;t<e.length;t++){var i=e[t].toString();"ResourceView"===this.parent.viewType?g(i)||-1===this.parent.getTaskIds().indexOf("T"+i)||this.targetedRecords.push(this.parent.flatData[this.parent.getTaskIds().indexOf("T"+i)]):g(i)||-1===this.parent.ids.indexOf(i)||this.targetedRecords.push(this.parent.getRecordByID(i))}},e.prototype.deleteRow=function(e){this.parent.flatData;var t=e&&e.length?e:this.parent.selectionModule.getSelectedRecords();if(t.length){this.parent.isOnDelete=!0,t.forEach((function(e){e.isDelete=!0})),"ResourceView"!==this.parent.viewType||e.length||(t=[]);for(var i=0;i<t.length;i++){var n=t[i];if(-1===this.deletedTaskDetails.indexOf(n)){if(n.parentItem){var r=this.parent.getParentTask(n.parentItem).childRecords;(1===r.length?r:r.filter((function(e){return!e.isDelete}))).length>0&&this.parent.dataOperation.updateParentItems(n.parentItem)}var o=n.ganttProperties.predecessor;o&&o.length&&this.removePredecessorOnDelete(n),this.deletedTaskDetails.push(n),n.hasChildRecords&&this.deleteChildRecords(n)}}this.parent.selectionModule&&this.parent.allowSelection&&this.parent.selectionModule.clearSelection();var s={};s.deletedRecordCollection=this.deletedTaskDetails,s.updatedRecordCollection=this.parent.editedRecords,s.cancel=!1,s.action="delete",this.initiateDeleteAction(s),this.parent.isOnDelete=!1}g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems()},e.prototype.removePredecessorOnDelete=function(e){for(var t=e.ganttProperties.predecessor,i=0;i<t.length;i++){var n=t[i],r="ResourceView"===this.parent.viewType?e.ganttProperties.taskId:e.ganttProperties.rowUniqueID;if(n.from.toString()===r.toString()){var o=this.parent.connectorLineModule.getRecordByID(n.to.toString());if(!g(o)){for(var s=u([],[],o.ganttProperties.predecessor,!0),a=void 0,l=0;l<s.length;l++){var h="ResourceView"===this.parent.viewType?o.ganttProperties.taskId:o.ganttProperties.rowUniqueID;if(s[l].to.toString()===h.toString()&&s[l].from.toString()===r.toString()){a=l;break}}s.splice(a,1),this.updatePredecessorValues(o,s)}}else if(n.to.toString()===r.toString()){var p=this.parent.connectorLineModule.getRecordByID(n.from.toString());if(!g(p)){var d=u([],[],p.ganttProperties.predecessor,!0);for(a=void 0,l=0;l<d.length;l++){var c="ResourceView"===this.parent.viewType?p.ganttProperties.taskId:p.ganttProperties.rowUniqueID;if(d[l].from.toString()===c.toString()&&d[l].to.toString()===r.toString()){a=l;break}}d.splice(a,1),this.updatePredecessorValues(p,d)}}}},e.prototype.updatePredecessorValues=function(e,t){this.parent.setRecordValue("predecessor",t,e.ganttProperties,!0);var i=this.parent.predecessorModule.getPredecessorStringValue(e);this.parent.setRecordValue("predecessorsName",i,e.ganttProperties,!0),this.parent.setRecordValue("taskData."+this.parent.taskFields.dependency,i,e),this.parent.setRecordValue(this.parent.taskFields.dependency,i,e)},e.prototype.updateTaskId=function(e,t){if(!this.parent.readOnly){var i="number"==typeof e?e.toString():e,n="number"==typeof t?t.toString():t,r=this.parent.ids;if(!g(i)&&!g(n)){var o=r.indexOf(i),s=r.indexOf(n);if(-1===o||s>-1)return;var a=this.parent.flatData[o];if(a.ganttProperties.taskId=a.ganttProperties.rowUniqueID=n,a.taskData[this.parent.taskFields.id]=n,a[this.parent.taskFields.id]=n,r[o]=n,a.hasChildRecords&&this.parent.taskFields.parentID)for(var l=a.childRecords,h=0;h<l.length;h++){var p=l[h];p[this.parent.taskFields.parentID]=t,this.parent.chartRowsModule.refreshRecords([p])}if(this.parent.taskFields.dependency&&!g(a.ganttProperties.predecessor))for(var d=a.ganttProperties.predecessor,c=void 0,u=0;u<d.length;u++){var f=d[u];f.to===i?c=this.parent.flatData[r.indexOf(f.from)]:f.from===i&&(c=this.parent.flatData[r.indexOf(f.to)]),this.updatePredecessorOnUpdateId(c,i,n)}this.updatePredecessorOnUpdateId(a,i,n),this.parent.treeGrid.refresh()}}},e.prototype.updatePredecessorOnUpdateId=function(e,t,i){if(this.parent.currentViewData.indexOf(e)>-1)for(var n=e.ganttProperties.predecessor,r=0;r<n.length;r++){var o=n[r];o.to===t?o.to=i:o.from===t&&(o.from=i)}this.updatePredecessorValues(e,e.ganttProperties.predecessor)},e.prototype.deleteChildRecords=function(e){for(var t=e.childRecords,i=0;i<t.length;i++){var n=t[i];if(-1===this.deletedTaskDetails.indexOf(n)){var r=n.ganttProperties.predecessor;r&&r.length&&this.removePredecessorOnDelete(n),this.deletedTaskDetails.push(n),n.hasChildRecords&&this.deleteChildRecords(n)}}},e.prototype.removeFromDataSource=function(e){var t;this.parent.taskFields;t=this.parent.dataSource instanceof yn?this.parent.dataSource.dataSource.json:this.parent.dataSource,this.removeData(t,e),this.isBreakLoop=!1},e.prototype.removeData=function(e,t){for(var i=0;i<e.length&&!this.isBreakLoop;i++)if(-1!==t.indexOf(a(this.parent.taskFields.id,e[i]).toString())){if(e[i][this.parent.taskFields.child]){var n=e[i][this.parent.taskFields.child];this.removeData(n,t)}if(t.splice(t.indexOf(a(this.parent.taskFields.id,e[i]).toString()),1),e.splice(i,1),0===t.length){this.isBreakLoop=!0;break}}else if(e[i][this.parent.taskFields.child]){n=e[i][this.parent.taskFields.child];this.removeData(n,t)}},e.prototype.initiateDeleteAction=function(e){var t=this;this.parent.showSpinner();var i={requestType:"beforeDelete"};i.data=e.deletedRecordCollection,i.modifiedRecords=e.updatedRecordCollection,i.modifiedTaskData=Hl(e.updatedRecordCollection);var n={};S()&&(i=this.parent.updateDataArgs(i),n.modifiedTaskData=i.modifiedTaskData,n.data=i.data),this.parent.trigger("actionBegin",i,(function(i){if(i.cancel){for(var r=t.deletedTaskDetails,o=0;o<r.length;o++)r[o].isDelete=!1;t.deletedTaskDetails=[],t.reUpdatePreviousRecords(),t.parent.initiateEditAction(!1),t.parent.hideSpinner()}else if(Nl(t.parent.dataSource)){var s=t.parent.dataSource,a={deletedRecords:S()?Hl(n.data):Hl(i.data),changedRecords:S()?n.modifiedTaskData:i.modifiedTaskData};if(S()){a.addedRecords=[]}s.saveChanges(a,t.parent.taskFields.id).then((function(i){return t.deleteSuccess(e)})).catch((function(i){return t.dmFailure(i,e)}))}else t.deleteSuccess(e)}))},e.prototype.deleteSuccess=function(e){for(var t=this.parent.flatData,i=this.parent.currentViewData,n=this.parent.getRecordFromFlatdata(e.deletedRecordCollection),r=[],o=0;o<n.length;o++){var s=n[o],a=i.indexOf(s),h=t.indexOf(s),p=this.parent.treeGrid.parentData.indexOf(s),d=void 0;if(-1!==a&&i.splice(a,1),-1!==h&&t.splice(h,1),!g(s)){if(r.push(s.ganttProperties.rowUniqueID.toString()),-1!==h&&(this.parent.ids.splice(h,1),"ResourceView"===this.parent.viewType&&this.parent.getTaskIds().splice(h,1)),0===s.level&&-1!==p&&this.parent.treeGrid.parentData.splice(p,1),s.parentItem){var c=this.parent.getParentTask(s.parentItem);if(c){var u=c.childRecords;-1!==(d=u.indexOf(s))&&u.splice(d,1),u.length||(c.hasChildRecords=!1)}}this.updateTreeGridUniqueID(s,"delete")}}r.length>0&&this.removeFromDataSource(r);var f={};this.parent.updatedConnectorLineCollection=[],this.parent.connectorLineIds=[],this.parent.predecessorModule.createConnectorLinesCollection(this.parent.flatData),this.parent.taskFields.dependency&&this.parent.predecessorModule.updatedRecordsDateByPredecessor(),this.parent.treeGrid.refresh(),f.requestType="delete",f.data=e.deletedRecordCollection,f.modifiedRecords=e.updatedRecordCollection,f.modifiedTaskData=Hl(e.updatedRecordCollection),l("action",e.action,f),S()&&this.parent.updateDataArgs(f),this.parent.trigger("actionComplete",f),this.deletedTaskDetails=[],this.parent.initiateEditAction(!1),this.parent.hideSpinner()},e.prototype.getNewTaskId=function(){var e=wn.aggregates.max(this.parent.flatData,this.parent.taskFields.id);return g(e)?1:parseInt(e.toString(),10)+1},
 e.prototype.prepareNewlyAddedData=function(e,t){var i,n=this.parent.taskFields,r=this.parent.ids;if(e[n.id]&&(-1!==r.indexOf(e[n.id].toString())?e[n.id]=null:e[n.id]=g(e[n.id])?null:parseInt(e[n.id],10)),e[n.id]||(i=this.getNewTaskId(),e[n.id]=i),
 
 // n.name&&!e[n.name]&&(e[n.name]="New Task"+e[n.id]),

 this.parent.allowUnscheduledTasks||e[n.startDate]||(e[n.startDate]=this.parent.projectStartDate),
 !this.parent.allowUnscheduledTasks&&n.duration&&g(e[n.duration])&&(e[n.endDate]||(e[n.duration]="5")),
 n.progress&&(e[n.progress]=e[n.progress]?e[n.progress]>100?100:e[n.progress]:0),!this.parent.allowUnscheduledTasks&&!e[n.endDate]&&n.endDate&&!e[n.duration]){var o=this.parent.dataOperation.getDateFromFormat(this.parent.projectStartDate);o.setDate(o.getDate()+4),e[n.endDate]=this.parent.getFormatedDate(o,this.parent.getDateFormat())}},e.prototype.updateNewlyAddedDataBeforeAjax=function(e,t,i,n){var r;if((r=this.parent.dataOperation.createRecord(e,t)).index=parseInt(r.ganttProperties.rowUniqueID.toString(),10)-1,!g(n)){this.parent.setRecordValue("parentItem",this.parent.dataOperation.getCloneParent(n),r);var o=r.parentItem?r.parentItem.index:null;this.parent.setRecordValue("parentIndex",o,r);var s=r.parentItem?r.parentItem.uniqueID:null;this.parent.setRecordValue("parentUniqueID",s,r),g(this.parent.taskFields.id)||g(this.parent.taskFields.parentID)||!r.parentItem||(this.parent.setRecordValue(this.parent.taskFields.parentID,r.parentItem.taskId,r.taskData,!0),this.parent.setRecordValue("parentId",r.parentItem.taskId,r.ganttProperties,!0),this.parent.setRecordValue(this.parent.taskFields.parentID,r.parentItem.taskId,r,!0))}return this.parent.isOnEdit=!0,this.backUpAndPushNewlyAddedRecord(r,i,n),this.parent.taskFields.dependency&&r.ganttProperties.predecessorsName?(this.parent.predecessorModule.ensurePredecessorCollectionHelper(r,r.ganttProperties),this.parent.predecessorModule.updatePredecessorHelper(r),this.parent.predecessorModule.validatePredecessorDates(r)):r.parentItem&&this.parent.getParentTask(r.parentItem).ganttProperties.isAutoSchedule&&this.parent.dataOperation.updateParentItems(r.parentItem),r},e.prototype.getChildCount=function(e,t){var i;if(!e.hasChildRecords)return 0;for(var n=0;n<e.childRecords.length;n++)t++,(i=e.childRecords[n]).hasChildRecords&&(t=this.getChildCount(i,t));return t},e.prototype.getVisibleChildRecordCount=function(e,t,i){var n,r;if(e.hasChildRecords){r=(n=e.childRecords).length;for(var o=0;o<r;o++)-1!==i.indexOf(n[o])&&t++,n[o].hasChildRecords&&(t=this.getVisibleChildRecordCount(n[o],t,i))}else-1!==i.indexOf(e)&&t++;return t},e.prototype.updatePredecessorOnIndentOutdent=function(e){for(var t,i,n=e.ganttProperties.predecessor.length,r=e.ganttProperties,o=r.predecessor,s=0;s<n;s++)if(o[s].to===r.rowUniqueID.toString()){t=this.parent.getRecordByID(o[s].from),i=Vl(o[s],"from",t.ganttProperties.predecessor,"to");var a=void 0;(a=u([],t.ganttProperties.predecessor,[],!0)).splice(i,1),this.parent.setRecordValue("predecessor",a,t.ganttProperties,!0)}else if(o[s].from===r.rowUniqueID.toString()){t=this.parent.getRecordByID(o[s].to);this.predecessorToString(t.ganttProperties.predecessor,e);var l=t.ganttProperties.predecessorsName.toString().split(","),h=o[s].from+o[s].type,p=l.indexOf(h);l.splice(p,1),this.parent.setRecordValue("predecessorsName",l.join(","),t.ganttProperties,!0),this.parent.setRecordValue(this.parent.taskFields.dependency,l.join(","),t),i=Vl(o[s],"from",t.ganttProperties.predecessor,"to");var d=void 0;(d=u([],t.ganttProperties.predecessor,[],!0)).splice(i,1),this.parent.setRecordValue("predecessor",d,t.ganttProperties,!0),this.parent.predecessorModule.validatePredecessorDates(t)}this.parent.setRecordValue("predecessor",[],e.ganttProperties,!0),this.parent.setRecordValue("predecessorsName","",e.ganttProperties,!0)},e.prototype.predecessorToString=function(e,t){for(var i=[],n=0,r=e.length;n<r;n++)if(t.ganttProperties.rowUniqueID.toString()!==e[n].from){var o=e[n].from+e[n].type;e[n].offset=isNaN(e[n].offset)?0:e[n].offset,0!==e[n].offset&&(e[n].offset<0?o+=e[n].offset.toString()+"d":e[n].offset>0&&(o+="+"+e[n].offset.toString()+"d")),i.push(o)}return i.join(",")},e.prototype.backUpAndPushNewlyAddedRecord=function(e,t,i){var n,r,o,s=this.parent.flatData,a=this.parent.currentViewData,l=this.parent.ids;switch(t){case"Top":s.splice(0,0,e),a.splice(0,0,e),l.splice(0,0,e.ganttProperties.rowUniqueID.toString());break;case"Bottom":if(s.push(e),a.push(e),l.push(e.ganttProperties.rowUniqueID.toString()),"ResourceView"===this.parent.viewType){var h=0===e.level?"R"+e.ganttProperties.taskId:"T"+e.ganttProperties.taskId;this.parent.getTaskIds().push(h)}break;case"Above":r=s.indexOf(this.addRowSelectedItem),o=a.indexOf(this.addRowSelectedItem),this.recordCollectionUpdate(void 0,r,o,e,i);break;case"Below":if(n=s.indexOf(this.addRowSelectedItem),this.addRowSelectedItem.hasChildRecords)r=n+this.getChildCount(this.addRowSelectedItem,0)+1,o=a.indexOf(this.addRowSelectedItem)+this.getVisibleChildRecordCount(this.addRowSelectedItem,0,a)+1;else r=n+1,o=a.indexOf(this.addRowSelectedItem)+1;this.recordCollectionUpdate(NaN,r,o,e,i);break;case"Child":if(n=s.indexOf(this.addRowSelectedItem),this.addRowSelectedItem.hasChildRecords)r=n+this.getChildCount(this.addRowSelectedItem,0)+1,this.addRowSelectedItem.expanded||this.parent.enableMultiTaskbar||this.parent.expandByID(Number(this.addRowSelectedItem.ganttProperties.rowUniqueID)),o=a.indexOf(this.addRowSelectedItem)+this.getVisibleChildRecordCount(this.addRowSelectedItem,0,a)+1;else this.parent.setRecordValue("hasChildRecords",!0,this.addRowSelectedItem),this.parent.setRecordValue("isMilestone",!1,this.addRowSelectedItem.ganttProperties,!0),this.parent.setRecordValue("expanded",!0,this.addRowSelectedItem),this.parent.setRecordValue("childRecords",[],this.addRowSelectedItem),r=n+1,o=a.indexOf(this.addRowSelectedItem)+1,this.addRowSelectedItem.ganttProperties.predecessor&&this.updatePredecessorOnIndentOutdent(this.addRowSelectedItem);this.recordCollectionUpdate(NaN,r,o,e,i)}this.newlyAddedRecordBackup=e},e.prototype.recordCollectionUpdate=function(e,t,i,n,r){var o=this.parent.flatData,s=this.parent.currentViewData,a=this.parent.ids;if(o.splice(t,0,n),s.splice(i,0,n),a.splice(t,0,n.ganttProperties.rowUniqueID.toString()),"ResourceView"===this.parent.viewType){var l=0===n.level?"R"+n.ganttProperties.taskId:"T"+n.ganttProperties.taskId;this.parent.getTaskIds().splice(t,0,l)}if(!g(r)&&(e=r.childRecords.indexOf(this.addRowSelectedItem),r.childRecords.splice(e,0,n),this.parent.dataSource instanceof yn&&g(r.taskData[this.parent.taskFields.parentID]))){var h=this.parent.taskFields.child;r.taskData[h]&&r.taskData[h].length>0||(r.taskData[h]=[]),r.taskData[h].push(n.taskData)}},e.prototype.constructTaskAddedEventArgs=function(e,t,i){var n={};return n.action=n.requestType=i,n.data=e,n.newTaskData=Hl([e])[0],n.recordIndex=e.index,n.modifiedRecords=t,n.modifiedTaskData=Hl(t),n},e.prototype.addSuccess=function(e){this.parent.treeGrid.refresh()},e.prototype.updateRealDataSource=function(e,t){var i=this.parent.taskFields,n=this.parent.dataSource;"Top"===t?n.splice(0,0,e.taskData):"Bottom"===t?n.push(e):g(i.id)||g(i.parentID)?this.addDataInRealDataSource(n,e.taskData,t):n.push(e.taskData),this.isBreakLoop=!1},e.prototype.addDataInRealDataSource=function(e,t,i){for(var n=0;n<e.length;n++){var r=this.parent.taskFields.child;if(this.isBreakLoop)break;if(a(this.parent.taskFields.id,e[n]).toString()===this.addRowSelectedItem.ganttProperties.rowUniqueID.toString()){"Above"===i?e.splice(n,0,t):"Below"===i?e.splice(n+1,0,t):"Child"===i&&(e[n][r]&&e[n][r].length>0||(e[n][r]=[]),e[n][r].push(t)),this.isBreakLoop=!0;break}if(e[n][r]){var o=e[n][r];this.addDataInRealDataSource(o,t,i)}}},e.prototype.addRecord=function(e,t,i){var n=this;if(this.parent.editModule&&this.parent.editSettings.allowAdding){var r=g(i)||isNaN(parseInt(i.toString(),10))?this.parent.selectionModule?"Row"!==this.parent.selectionSettings.mode&&"Both"!==this.parent.selectionSettings.mode||1!==this.parent.selectionModule.selectedRowIndexes.length?"Cell"===this.parent.selectionSettings.mode&&1===this.parent.selectionModule.getSelectedRowCellIndexes().length?this.parent.selectionModule.getSelectedRowCellIndexes()[0].rowIndex:null:this.parent.selectionModule.selectedRowIndexes[0]:null:i;this.addRowSelectedItem=g(r)?null:this.parent.currentViewData[r],t=g(t)?this.parent.editSettings.newRowPosition:t,e=g(e)?this.parent.editModule.dialogModule.composeAddRecord():e,((g(r)||r<0||g(this.addRowSelectedItem))&&("Above"===t||"Below"===t||"Child"===t)||!t||"Above"!==t&&"Below"!==t&&"Child"!==t&&"Top"!==t&&"Bottom"!==t)&&(t="Top");var o,s,a=0,h=void 0;switch(t){case"Top":case"Bottom":a=0;break;case"Above":case"Below":a=this.addRowSelectedItem.level,h=this.parent.getParentTask(this.addRowSelectedItem.parentItem);break;case"Child":a=this.addRowSelectedItem.level+1,h=this.addRowSelectedItem}this.prepareNewlyAddedData(e,t),o=this.updateNewlyAddedDataBeforeAjax(e,a,t,h),s=this.constructTaskAddedEventArgs(o,this.parent.editedRecords,"beforeAdd"),this.parent.showSpinner();var p={};if(S()){if(!Array.isArray(s.data)){var d=[];d.push(s.data),l("data",d,s)}p=Tw({},s)}this.parent.trigger("actionBegin",s,(function(e){if(e.cancel)e=S()?p:e,n.removeAddedRecord(),n.reUpdatePreviousRecords(),n.dialogModule.dialog&&!n.dialogModule.dialogObj.isDestroyed&&n.dialogModule.dialogObj.hide(),n.dialogModule.dialogClose(),n._resetProperties();else if(S()&&(p.data=p.data[0],e=p,n._resetProperties()),Nl(n.parent.dataSource)){var i=n.parent.dataSource,r={addedRecords:[e.newTaskData],changedRecords:e.modifiedTaskData},s=e.data.ganttProperties.taskId.toString(),a=n.parent.query instanceof on?n.parent.query:new on;i.saveChanges(r,n.parent.taskFields.id,null,a).then((function(t){if(n.parent.taskFields.id&&!g(t.addedRecords[0][n.parent.taskFields.id])&&t.addedRecords[0][n.parent.taskFields.id].toString()!==s){n.parent.setRecordValue("taskId",t.addedRecords[0][n.parent.taskFields.id],e.data.ganttProperties,!0),n.parent.setRecordValue("taskData."+n.parent.taskFields.id,t.addedRecords[0][n.parent.taskFields.id],e.data),n.parent.setRecordValue(n.parent.taskFields.id,t.addedRecords[0][n.parent.taskFields.id],e.data),n.parent.setRecordValue("rowUniqueID",t.addedRecords[0][n.parent.taskFields.id].toString(),e.data.ganttProperties,!0);var i=n.parent.ids.indexOf(s);-1!==i&&(n.parent.ids[i]=t.addedRecords[0][n.parent.taskFields.id].toString())}0===o.level&&n.parent.treeGrid.parentData.splice(0,0,o),n.updateTreeGridUniqueID(o,"add"),n.refreshNewlyAddedRecord(e,o),n._resetProperties()})).catch((function(t){n.removeAddedRecord(),n.dmFailure(t,e),n._resetProperties()}))}else n.updateRealDataSource(e.data,t),0===o.level&&n.parent.treeGrid.parentData.splice(0,0,o),n.updateTreeGridUniqueID(o,"add"),n.refreshNewlyAddedRecord(e,o),n._resetProperties()}))}},e.prototype._resetProperties=function(){this.parent.isOnEdit=!1,this.parent.hideSpinner(),this.addRowSelectedItem=null,this.newlyAddedRecordBackup=null,this.isBreakLoop=!1,this.parent.element.tabIndex=0,this.parent.initiateEditAction(!1)},e.prototype.updateTreeGridUniqueID=function(e,t){"add"===t?l("uniqueIDCollection."+e.uniqueID,e,this.parent.treeGrid):"delete"===t&&h(a("uniqueIDCollection",this.parent.treeGrid),e.uniqueID)},e.prototype.refreshNewlyAddedRecord=function(e,t){if(this.parent.selectionModule&&this.parent.allowSelection&&("Row"===this.parent.selectionSettings.mode||"Both"===this.parent.selectionSettings.mode)&&(this.parent.staticSelectedRowIndex=this.parent.currentViewData.indexOf(e.data)),this.parent.timelineSettings.updateTimescaleView){var i=[];e.modifiedRecords.length>0?(i.push(e.data),i.push.apply(i,e.modifiedRecords)):i=[e.data],this.parent.timelineModule.updateTimeLineOnEditing(i,e.action)}if(this.addSuccess(e),e=this.constructTaskAddedEventArgs(t,e.modifiedRecords,"add"),S()&&this.parent.updateDataArgs(e),this.parent.trigger("actionComplete",e),this.dialogModule.dialog&&!this.dialogModule.dialogObj.isDestroyed&&this.dialogModule.dialogObj.hide(),this.dialogModule.dialogClose(),"ResourceView"===this.parent.viewType){if(e.data.ganttProperties.sharedTaskUniqueIds.push(e.data.ganttProperties.rowUniqueID),e.data.ganttProperties.resourceInfo.length){if(e.data.ganttProperties.resourceInfo.length>1){var n=u([],[],e.data.ganttProperties.resourceInfo,!0);n.splice(0,1),this.updateResoures([],n,e.data)}}else this.removeChildRecord(e.data),this.parent.editModule.checkWithUnassignedTask(e.data);for(var r=0;r<this.updateParentRecords.length;r++)this.parent.dataOperation.updateParentItems(this.updateParentRecords[r]);this.updateParentRecords=[]}},e.prototype.removeAddedRecord=function(){var e=this.parent.flatData,t=this.parent.currentViewData,i=this.parent.ids,n=e.indexOf(this.newlyAddedRecordBackup),r=t.indexOf(this.newlyAddedRecordBackup),o=i.indexOf(this.newlyAddedRecordBackup.ganttProperties.rowUniqueID.toString());if(h(this.parent.previousRecords,e[n].uniqueID),this.newlyAddedRecordBackup.parentItem){var s=this.parent.getParentTask(this.newlyAddedRecordBackup.parentItem),a=s.childRecords.indexOf(this.newlyAddedRecordBackup);s.childRecords.splice(a,1)}e.splice(n,1),t.splice(r,1),i.splice(o,1)},e.prototype.indent=function(){var e,t=this.parent.selectedRowIndex,i=!!this.parent.selectionModule&&(1===this.parent.selectionModule.selectedRowIndexes.length||1===this.parent.selectionModule.getSelectedRowCellIndexes().length),n=this.parent.currentViewData[this.parent.selectionModule.getSelectedRowIndexes()[0]-1];if(this.parent.editSettings.allowEditing&&0!==t&&-1!==t&&i&&"ResourceView"!==this.parent.viewType&&this.parent.currentViewData[t].level-n.level!=1){if(n.level>this.parent.selectionModule.getSelectedRecords()[0].level)for(var r=this.parent.getTaskByUniqueID(n.parentItem.uniqueID),o=0;o<this.parent.currentViewData.length;o++)this.parent.currentViewData[o].taskData===r.taskData&&(e=o);else e=this.parent.selectionModule.getSelectedRowIndexes()[0]-1;this.indentOutdentRow([this.parent.selectionModule.getSelectedRowIndexes()[0]],e,"child")}},e.prototype.outdent=function(){var e,t=this.parent.selectionModule.getSelectedRowIndexes()[0],i=!!this.parent.selectionModule&&(1===this.parent.selectionModule.selectedRowIndexes.length||1===this.parent.selectionModule.getSelectedRowCellIndexes().length);if(this.parent.editSettings.allowEditing&&-1!==t&&0!==t&&i&&"ResourceView"!==this.parent.viewType&&0!==this.parent.currentViewData[t].level){for(var n=this.parent.getTaskByUniqueID(this.parent.selectionModule.getSelectedRecords()[0].parentItem.uniqueID),r=0;r<this.parent.currentViewData.length;r++)this.parent.currentViewData[r].taskData===n.taskData&&(e=r);this.indentOutdentRow([t],e,"below")}},e.prototype.indentOutdentRow=function(e,t,i){var n=this;e[0],"above"===i&&(this.dropPosition="topSegment"),"below"===i&&(this.dropPosition="bottomSegment"),"child"===i&&(this.dropPosition="middleSegment");for(var r=void 0,o=[],s=0;s<e.length;s++)o[s]=this.parent.currentViewData[e[s]];var a={data:o,dropIndex:t,dropPosition:this.dropPosition};"middleSegment"===this.dropPosition?r="indenting":"bottomSegment"===this.dropPosition&&(r="outdenting");var l={action:r,data:o[0],cancel:!1};this.parent.trigger("actionBegin",l,(function(e){e.cancel||n.reArrangeRows(a,!0)}))},e.prototype.reArrangeRows=function(e,t){var i=this;if(this.dropPosition=e.dropPosition,"Invalid"!==e.dropPosition&&this.parent.editModule){var n=this.parent,r=void 0,o=void 0;this.droppedRecord=n.currentViewData[e.dropIndex];var s=[];o=this.droppedRecord,e.data[0]?s=e.data:s.push(e.data);for(var a=0,l=s.length,h=0;h<l;h++){if(this.parent.isOnEdit=!0,r=s[h],this.draggedRecord=r,"Invalid"!==this.dropPosition){t&&this.deleteDragRow();var p=this.treeGridData.indexOf(o);if("bottomSegment"===this.dropPosition){if(o.hasChildRecords?(a=this.parent.editModule.getChildCount(o,0),this.parent.taskFields.parentID&&this.ganttData.length>0&&this.ganttData.splice(p+a+1,0,this.draggedRecord.taskData),this.treeGridData.splice(p+a+1,0,this.draggedRecord)):(this.parent.taskFields.parentID&&this.ganttData.length>0&&this.ganttData.splice(p+1,0,this.draggedRecord.taskData),this.treeGridData.splice(p+1,0,this.draggedRecord)),this.parent.setRecordValue("parentItem",this.treeGridData[p].parentItem,r),this.parent.setRecordValue("parentUniqueID",this.treeGridData[p].parentUniqueID,r),this.parent.setRecordValue("level",this.treeGridData[p].level,r),r.hasChildRecords){this.updateChildRecordLevel(r,1),this.updateChildRecord(r,p+a+1)}if(o.parentItem){var d=this.parent.getParentTask(o.parentItem).childRecords,c=d.indexOf(o)+1;d.splice(c,0,r)}}"middleSegment"===this.dropPosition&&this.dropMiddle(p),g(r.parentItem&&-1!==this.updateParentRecords.indexOf(r.parentItem))||this.updateParentRecords.push(r.parentItem)}if(g(r.parentItem)){var u=this.parent.treeGrid.parentData,f=u.indexOf(this.droppedRecord);"bottomSegment"===this.dropPosition&&u.splice(f+1,0,r)}this.refreshDataSource()}"middleSegment"===this.dropPosition&&(o.ganttProperties.predecessor&&(this.parent.editModule.removePredecessorOnDelete(o),o.ganttProperties.predecessor=null,o.ganttProperties.predecessorsName=null,o[this.parent.taskFields.dependency]=null,o.taskData[this.parent.taskFields.dependency]=null),o.ganttProperties.isMilestone&&(this.parent.setRecordValue("isMilestone",!1,o.ganttProperties,!0),g(o.taskData[this.parent.taskFields.milestone])||!0===o.taskData[this.parent.taskFields.milestone]&&(o.taskData[this.parent.taskFields.milestone]=!1)));for(var m=0;m<this.updateParentRecords.length;m++)this.parent.dataOperation.updateParentItems(this.updateParentRecords[m]);this.updateParentRecords=[],this.parent.isOnEdit=!1}if(Nl(this.parent.dataSource)){var y=this.parent.dataSource,v={changedRecords:Hl(this.parent.editedRecords)},b=this.parent.query instanceof on?this.parent.query:new on;y.saveChanges(v,this.parent.taskFields.id,null,b).then((function(t){return i.indentSuccess(t,e)})).catch((function(e){return i.indentFailure(e)}))}else this.indentOutdentSuccess(e)},e.prototype.indentSuccess=function(e,t){this.indentOutdentSuccess(t)},e.prototype.indentFailure=function(e){this.parent.trigger("actionFailure",{error:e})},e.prototype.indentOutdentSuccess=function(e){this.parent.treeGrid.refresh(),"middleSegment"===this.dropPosition?e.requestType="indented":"bottomSegment"===this.dropPosition&&(e.requestType="outdented"),e.modifiedRecords=this.parent.editedRecords,this.parent.trigger("actionComplete",e),this.parent.editedRecords=[]},e.prototype.refreshDataSource=function(){var e,t,i=this.draggedRecord,n=this.droppedRecord,r=this.parent;if((e=this.parent.dataSource instanceof yn?a("dataOperation.dataArray",this.parent):r.dataSource).length>0&&!g(n)&&!n.parentItem){for(var o=0;o<Object.keys(e).length;o++)e[o][this.parent.taskFields.child]===n.taskData[this.parent.taskFields.child]&&(t=o);"topSegment"===this.dropPosition?this.parent.taskFields.parentID||e.splice(t,0,i.taskData):"bottomSegment"===this.dropPosition&&(this.parent.taskFields.parentID||e.splice(t+1,0,i.taskData))}else if(!this.parent.taskFields.parentID&&!g(n)&&n.parentItem&&("topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition)){var s="topSegment"===this.dropPosition?"Above":"Below";this.parent.editModule.addRowSelectedItem=n,this.parent.editModule.updateRealDataSource(i,s),delete this.parent.editModule.addRowSelectedItem}this.parent.taskFields.parentID&&(i.parentItem?"topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition?(i[this.parent.taskFields.parentID]=n[this.parent.taskFields.parentID],i.taskData[this.parent.taskFields.parentID]=n[this.parent.taskFields.parentID]):(i[this.parent.taskFields.parentID]=n[this.parent.taskFields.id],i.taskData[this.parent.taskFields.parentID]=n[this.parent.taskFields.id]):(i[this.parent.taskFields.parentID]=null,i.taskData[this.parent.taskFields.parentID]=null))},e.prototype.deleteDragRow=function(){var e;this.parent.dataSource instanceof yn?this.ganttData=a("dataOperation.dataArray",this.parent):this.ganttData=this.parent.dataSource,this.treeGridData=this.parent.treeGrid.dataSource,e=this.parent.getTaskByUniqueID(this.draggedRecord.uniqueID),this.removeRecords(e)},e.prototype.dropMiddle=function(e){var t=this.parent,i=this.parent.editModule.getChildCount(this.droppedRecord,0),n=g(i)||0===i?e+1:i+e+1;"middleSegment"===this.dropPosition&&(t.taskFields.parentID&&this.ganttData.length>0&&this.ganttData.splice(n,0,this.draggedRecord.taskData),this.treeGridData.splice(n,0,this.draggedRecord),this.recordLevel(),this.draggedRecord.hasChildRecords&&this.updateChildRecord(this.draggedRecord,n,this.droppedRecord.expanded),g(this.draggedRecord.parentItem&&-1!==this.updateParentRecords.indexOf(this.draggedRecord.parentItem))&&this.updateParentRecords.push(this.draggedRecord.parentItem))},e.prototype.updateChildRecordLevel=function(e,t){var i,n;if(t++,!e.hasChildRecords)return 0;i=e.childRecords.length;for(var r=0;r<i;r++){n=e.childRecords[r];var o=void 0;e.parentItem&&(o=this.parent.getParentTask(e.parentItem)),n.level=e.parentItem?o.level+t:e.level+1,n.hasChildRecords&&(t--,t=this.updateChildRecordLevel(n,t))}return t},e.prototype.updateChildRecord=function(e,t,i){var n,r,o=this.parent;if(!e.hasChildRecords)return 0;r=e.childRecords.length;for(var s=0;s<r;s++)n=e.childRecords[s],t++,o.flatData.splice(t,0,n),this.parent.ids.splice(t,0,n.ganttProperties.rowUniqueID.toString()),o.taskFields.parentID&&this.ganttData.length>0&&this.ganttData.splice(t,0,n.taskData),n.hasChildRecords&&(t=this.updateChildRecord(n,t));return t},e.prototype.removeRecords=function(e){var t,i=this.parent;t=this.parent.dataSource instanceof yn?a("dataOperation.dataArray",this.parent):this.parent.dataSource;var n=e,r=this.parent.getParentTask(n.parentItem);if(n){if(n.parentItem){var o=r?r.childRecords:[],s=0;o&&o.length>0&&(s=o.indexOf(n),r.childRecords.splice(s,1),this.parent.taskFields.parentID||r.taskData[this.parent.taskFields.child].splice(s,1),this.updateParentRecords.push(r))}if(i.taskFields.parentID){n.hasChildRecords&&n.childRecords.length>0&&this.removeChildItem(n);for(var l=void 0,h=t.length>0?t:this.parent.currentViewData,p=0;p<h.length;p++)h[p][this.parent.taskFields.id]===n.taskData[this.parent.taskFields.id]&&(l=p);-1!==l&&(t.length>0&&t.splice(l,1),this.treeGridData.splice(l,1),-1!==this.parent.treeGrid.parentData.indexOf(n)&&this.parent.treeGrid.parentData.splice(this.parent.treeGrid.parentData.indexOf(n),1))}var d=this.treeGridData.indexOf(n);if(!i.taskFields.parentID){var c=this.getChildCount(n,0);this.treeGridData.splice(d,c+1);var u=this.ganttData.indexOf(n.taskData);-1!==u&&(this.ganttData.splice(u,1),this.parent.treeGrid.parentData.splice(u,1))}n.parentItem&&r&&r.childRecords&&!r.childRecords.length&&(r.expanded=!1,r.hasChildRecords=!1)}},e.prototype.removeChildItem=function(e){this.parent;for(var t,i,n=0;n<e.childRecords.length;n++){t=e.childRecords[n];var r=void 0;r=this.parent.dataSource instanceof yn?a("dataOperation.dataArray",this.parent):this.parent.dataSource;for(var o=0;o<r.length;o++)r[o][this.parent.taskFields.id]===t.taskData[this.parent.taskFields.id]&&(i=o);-1!==i&&(r.length>0&&r.splice(i,1),this.treeGridData.splice(i,1)),t.hasChildRecords&&this.removeChildItem(t)}},e.prototype.recordLevel=function(){var e=this.parent,t=this.draggedRecord,i=this.droppedRecord,n=e.taskFields.child;if(i.hasChildRecords||(i.hasChildRecords=!0,i.childRecords.length||(i.childRecords=[],!e.taskFields.parentID&&g(i.taskData[n])&&(i.taskData[n]=[]))),"middleSegment"===this.dropPosition){var r=u({},i);delete r.childRecords;var o={uniqueID:r.uniqueID,expanded:r.expanded,level:r.level,index:r.index,taskId:r.ganttProperties.rowUniqueID};if(this.parent.setRecordValue("parentItem",o,t),this.parent.setRecordValue("parentUniqueID",i.uniqueID,t),i.childRecords.splice(i.childRecords.length,0,t),g(t)||e.taskFields.parentID||g(i.taskData[n])||i.taskData[e.taskFields.child].splice(i.childRecords.length,0,t.taskData),t.hasChildRecords){t.level=i.level+1,this.updateChildRecordLevel(t,1)}else t.level=i.level+1;i.expanded=!0}},e}(),Ew=function(){function e(e){this.predefinedItems={},this.items=["Add","Edit","Update","Delete","Cancel","ExpandAll","CollapseAll","Search","PrevTimeSpan","NextTimeSpan","ZoomIn","ZoomOut","ZoomToFit","ExcelExport","CsvExport","PdfExport","Indent","Outdent"],this.parent=e,this.id=this.parent.element.id,this.parent.on("ui-toolbarupdate",this.propertyChanged,this)}return e.prototype.getModuleName=function(){return"toolbar"},e.prototype.renderToolbar=function(){if((this.parent.toolbar||[]).length>0){this.element=ct("div",{id:this.parent.controlId+"_Gantt_Toolbar",className:"e-gantt-toolbar"}),this.parent.treeGrid.grid.headerModule?this.parent.element.insertBefore(this.element,this.parent.treeGridPane.offsetParent):this.parent.element.appendChild(this.element);for(var e=0,t=["Add","Edit","Update","Delete","Cancel","ExpandAll","CollapseAll","PrevTimeSpan","NextTimeSpan","ZoomIn","ZoomOut","ZoomToFit","ExcelExport","CsvExport","PdfExport","Indent","Outdent"];e<t.length;e++){var i=t[e],n=i.toLowerCase(),r=i[0].toLowerCase()+i.slice(1);this.predefinedItems[i]={id:this.parent.element.id+"_"+n,prefixIcon:"e-"+n,text:this.parent.isAdaptive?"":this.parent.localeObj.getConstant(r),tooltipText:this.parent.localeObj.getConstant(r)+("add"===r||"edit"===r||"delete"===r?this.parent.localeObj.getConstant("task"):"expandAll"===r||"collapseAll"===r?this.parent.localeObj.getConstant("tasks"):""),align:this.parent.isAdaptive?"Right":"Left"}}var o=this.parent.localeObj.getConstant("search");this.parent.isAdaptive?this.predefinedItems.Search={id:this.id+"_searchbutton",prefixIcon:"e-search-icon",tooltipText:o,align:"Right"}:this.predefinedItems.Search={id:this.id+"_search",template:'<div class="e-input-group e-search" role="search">                <input id="'+this.id+'_searchbar" class="e-input" name="input" type="search"                 placeholder= "'+o+'"/>                <span id="'+this.id+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                 tabindex="-1" title="'+o+'" aria-label= "search"></span>                 </div>',tooltipText:o,align:"Right",cssClass:"e-search-wrapper"},this.createToolbar()}},e.prototype.createToolbar=function(){var e=this.getItems();this.toolbar=new Xu({items:e,clicked:this.toolbarClickHandler.bind(this),height:this.parent.isAdaptive?48:"auto"}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.element);var t=this.element.querySelector("#"+this.parent.element.id+"_cancel"),i=this.element.querySelector("#"+this.parent.element.id+"_update");(t&&ut([t],"e-grid"),i&&ut([i],"e-grid"),this.parent.isAdaptive)?(this.element.insertBefore(this.getSearchBarElement(),this.element.childNodes[0]),this.searchElement=this.element.querySelector("#"+this.parent.element.id+"_searchbar"),new Ac({placeholder:this.parent.localeObj.getConstant("search"),floatLabelType:"Never",showClearButton:!0}).appendTo(this.searchElement)):this.searchElement=this.element.querySelector("#"+this.parent.element.id+"_searchbar");this.parent.filterModule&&(this.wireEvent(),this.parent.searchSettings&&this.updateSearchTextBox()),this.parent.readOnly&&this.enableItems([this.parent.element.id+"_add",this.parent.element.id+"_update",this.parent.element.id+"_delete",this.parent.element.id+"_cancel",this.parent.element.id+"_indent",this.parent.element.id+"_outdent"],!1)},e.prototype.getSearchBarElement=function(){var e=this,t=ct("div",{className:"e-adaptive-searchbar",styles:"display: none"}),i=ct("input",{attrs:{type:"text"},id:this.parent.element.id+"_searchbar"}),n=ct("span",{className:"e-backarrowspan e-icons"});return n.onclick=function(){t.style.display="none",e.element.childNodes[1].style.display="block"},t.appendChild(n),t.appendChild(i),t},e.prototype.wireEvent=function(){this.searchElement&&(ye.add(this.searchElement,"keyup",this.keyUpHandler,this),ye.add(this.searchElement,"focus",this.focusHandler,this),ye.add(this.searchElement,"blur",this.blurHandler,this))},e.prototype.propertyChanged=function(e){a("module",e)===this.getModuleName()&&this.parent.toolbar&&(this.element&&this.element.parentNode&&Ct(this.element),this.renderToolbar(),this.refreshToolbarItems())},e.prototype.unWireEvent=function(){this.searchElement&&(ye.remove(this.searchElement,"keyup",this.keyUpHandler),ye.remove(this.searchElement,"focus",this.focusHandler),ye.remove(this.searchElement,"blur",this.blurHandler),this.searchElement=null),this.parent.off("ui-toolbarupdate",this.propertyChanged)},e.prototype.keyUpHandler=function(e){13===e.keyCode&&this.parent.searchSettings.key!==this.searchElement.value&&(this.parent.searchSettings.key=this.searchElement.value,this.parent.dataBind())},e.prototype.focusHandler=function(e){e.target.parentElement.classList.add("e-input-focus")},e.prototype.blurHandler=function(e){e.target.parentElement.classList.remove("e-input-focus")},e.prototype.updateSearchTextBox=function(){this.searchElement&&this.searchElement.value!==this.parent.searchSettings.key&&(this.searchElement.value=this.parent.searchSettings.key)},e.prototype.getItems=function(){var e=[],t=this.parent.toolbar,i=-1;if(t.forEach((function(e,t){("string"==typeof e&&"Search"===e||"object"==typeof e&&"Search"===e.text)&&(i=t)})),i>-1){var n=t.splice(i,1);t.push(n[0])}for(var r=0,o=t;r<o.length;r++){var s=o[r];switch(typeof s){case"string":e.push(this.getItemObject(s));break;default:e.push(this.getItem(s))}}return e},e.prototype.getItem=function(e){var t=this.predefinedItems[e.text];return t?u(t,t,e):e},e.prototype.getItemObject=function(e){return this.predefinedItems[e]||{text:e,id:this.id+"_"+e}},e.prototype.toolbarClickHandler=function(e){var t=this,i=this.parent,n=this.id;u(e,{cancel:!1}),i.trigger("toolbarClick",e,(function(e){if(!e.cancel)switch(!0===t.parent.isAdaptive&&(e.item.id!==n+"_edit"&&e.item.id!==n+"_add"&&e.item.id!==n+"_delete"&&e.item.id!==n+"_searchbutton"&&e.item.id!==n+"_expandall"&&e.item.id!==n+"_collapseall"||t.parent.selectionModule&&"Multiple"===t.parent.selectionSettings.type&&(t.parent.selectionModule.hidePopUp(),document.getElementsByClassName("e-gridpopup")[0].style.display="none")),!g(e.item)&&e.item.id){case n+"_edit":i.editModule&&i.editSettings.allowEditing&&i.editModule.dialogModule.openToolbarEditDialog();break;case n+"_indent":i.editModule&&i.selectionModule.getSelectedRecords().length&&i.indent();break;case n+"_outdent":i.editModule&&i.selectionModule.getSelectedRecords().length&&i.outdent();break;case n+"_update":i.editModule.cellEditModule.isCellEdit=!1,i.treeGrid.grid.saveCell();break;case n+"_cancel":i.cancelEdit();break;case n+"_add":i.editModule&&i.editSettings.allowAdding&&i.editModule.dialogModule.openAddDialog();break;case n+"_delete":t.parent.selectionModule&&t.parent.editModule&&("Cell"!==t.parent.selectionSettings.mode&&t.parent.selectionModule.selectedRowIndexes.length||"Cell"===t.parent.selectionSettings.mode&&t.parent.selectionModule.getSelectedRowCellIndexes().length)&&t.parent.editModule.startDeleteAction();break;case n+"_search":if(a("originalEvent.target.id",e)===t.parent.element.id+"_searchbutton"&&t.parent.filterModule){var r=t.element.querySelector("#"+t.parent.element.id+"_searchbar").value;t.parent.searchSettings.key!==r&&(t.parent.searchSettings.key=r,t.parent.dataBind())}break;case n+"_searchbutton":var o=t.element.querySelector(".e-adaptive-searchbar");o.parentElement.childNodes[1].style.display="none",o.style.display="block";break;case n+"_expandall":t.parent.ganttChartModule.expandCollapseAll("expand");break;case n+"_collapseall":t.parent.ganttChartModule.expandCollapseAll("collapse");break;case n+"_prevtimespan":t.parent.previousTimeSpan();break;case n+"_nexttimespan":t.parent.nextTimeSpan();break;case n+"_zoomin":t.zoomIn();break;case n+"_zoomout":t.zoomOut();break;case n+"_zoomtofit":t.zoomToFit()}}))},e.prototype.zoomIn=function(){this.parent.timelineModule.processZooming(!0)},e.prototype.zoomToFit=function(){this.parent.timelineModule.processZoomToFit(),this.parent.ganttChartModule.updateScrollLeft(0)},e.prototype.zoomOut=function(){this.parent.timelineModule.processZooming(!1)},e.prototype.refreshToolbarItems=function(e){var t,i=this.parent,n=[],r=[],o=i.editSettings,s=this.id,l=i.selectedRowIndex,h=!!i.selectionModule&&(1===i.selectionModule.selectedRowIndexes.length||1===i.selectionModule.getSelectedRowCellIndexes().length),p=this.toolbar?this.toolbar.items:[],d=[s+"_add",s+"_edit",s+"_delete",s+"_update",s+"_cancel",s+"_indent",s+"_outdent"],c="ResourceView"===this.parent.viewType&&0!==a("data.level",e)||"ProjectView"===this.parent.viewType;if(g(this.parent.editModule))r.push(s+"_delete"),r.push(s+"_add"),r.push(s+"_edit"),r.push(s+"_update"),r.push(s+"_cancel");else{var u=!!i.editModule.taskbarEditModule&&i.editModule.taskbarEditModule.touchEdit,f=i.currentViewData&&i.currentViewData.length;o.allowAdding&&!u?n.push(s+"_add"):r.push(s+"_add"),o.allowEditing&&c&&f&&h&&!u?n.push(s+"_edit"):r.push(s+"_edit"),o.allowEditing&&0!==l&&-1!==l&&f&&h&&"ResourceView"!==this.parent.viewType?0===i.currentViewData[l].level&&f&&!u?(n.push(s+"_indent"),r.push(s+"_outdent")):(t=i.currentViewData[l-1],i.currentViewData[l].level-t.level==1&&-1!==l?(r.push(s+"_indent"),n.push(s+"_outdent")):-1!==l&&(n.push(s+"_indent"),n.push(s+"_outdent"))):(r.push(s+"_indent"),r.push(s+"_outdent"));var m=!!i.selectionModule&&(i.selectionModule.selectedRowIndexes.length>0||i.selectionModule.getSelectedRowCellIndexes().length>0);if(o.allowDeleting&&c&&f&&m&&!u?n.push(s+"_delete"):r.push(s+"_delete"),"Auto"===i.editSettings.mode&&!g(i.editModule.cellEditModule)&&i.editModule.cellEditModule.isCellEdit){(n=[]).push(s+"_update",s+"_cancel"),r=[];for(var y=0;y<p.length;y++)p[y].id!==s+"_update"&&p[y].id!==s+"_cancel"&&-1!==d.indexOf(p[y].id)&&r.push(p[y].id)}else{r.push(s+"_update",s+"_cancel");for(y=0;y<p.length;y++)-1===n.indexOf(p[y].id)&&-1===r.indexOf(p[y].id)&&n.push(p[y].id)}}for(var v=0;v<n.length;v++){var b=void 0;for(y=0;y<p.length;y++)if(p[y].id===n[v]){b=y;break}p.length>0&&this.toolbar.hideItem(b,!1)}for(var w=0;w<r.length;w++){for(b=void 0,y=0;y<p.length;y++)if(p[y].id===r[w]){b=y;break}p.length>0&&this.toolbar.hideItem(b,!0)}},e.prototype.enableItems=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i],o=this.element.querySelector("#"+r);o&&this.toolbar.enableItems(o.parentElement,t)}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.toolbar.destroy(),this.parent.filterModule&&this.unWireEvent(),Ct(this.element))},e}(),Rw=function(){function e(e){var t=this;this.selectedRows=[],this.isOverflowBorder=!0,this.selectedRowColls=[],this.isRefresh=!0,this.isReplaceDragEle=!0,this.helper=function(e){var i=t.parent,n=t.draggable.currentStateTarget,r=t.parent.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+i.element.offsetWidth}),o=t.parent.createElement("table",{styles:"width:"+i.element.offsetWidth}),s=t.parent.createElement("tbody");if(document.getElementsByClassName("e-griddragarea").length||i.rowDropSettings.targetID&&!n.classList.contains("e-selectionbackground")&&"Single"!==i.selectionSettings.type||!i.rowDropSettings.targetID&&!Ka(e.sender.target,"e-rowdragdrop"))return!1;i.rowDropSettings.targetID&&"Row"===i.selectionSettings.mode&&"Single"===i.selectionSettings.type&&i.selectRow(parseInt(t.draggable.currentStateTarget.parentElement.getAttribute("aria-rowindex"),10)),t.startedRow=Tt(n,"tr").cloneNode(!0);var a=t.parent.getFrozenColumns();if(a){var l=parseInt(Tt(n,"tr").getAttribute("aria-rowindex"),10);t.startedRow.innerHTML=t.parent.getRows()[l].innerHTML+t.parent.getMovableRows()[l].innerHTML}t.processArgs(n);var h={selectedRow:t.rows,dragelement:n,cloneElement:r,cancel:!1,data:t.rowData},p=i.getSelectedRows();i.trigger("rowDragStartHelper",h);if(h.cancel)return!1;Xa(t.startedRow,".e-indentcell"),Xa(t.startedRow,".e-detailrowcollapse"),Xa(t.startedRow,".e-detailrowexpand"),t.removeCell(t.startedRow,"e-gridchkbox");var d=new RegExp("e-active","g");if(t.startedRow.innerHTML=t.startedRow.innerHTML.replace(d,""),s.appendChild(t.startedRow),i.getSelectedRowIndexes().length>1&&t.startedRow.hasAttribute("aria-selected")){var c=t.parent.createElement("span",{className:"e-dropitemscount",innerHTML:a?""+p.length/2:""+p.length});r.appendChild(c)}var u=Tt(n,"tr").querySelector(".e-icon-rowdragicon");return u&&u.classList.add("e-dragstartrow"),o.appendChild(s),r.appendChild(o),i.element.appendChild(r),r},this.dragStart=function(e){var i=t.parent;if(!document.getElementsByClassName("e-griddragarea").length){var n=e.target,r=t.parent.element.querySelector(".e-dropitemscount");t.parent.getSelectedRecords().length>1&&r&&(r.style.left=t.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px"),t.processArgs(n),i.trigger("rowDragStart",{rows:S()?null:t.rows,target:S()?null:e.target,draggableType:"rows",fromIndex:parseInt(t.rows[0].getAttribute("aria-rowindex"),10),data:Object.keys(t.rowData[0]).length>0?t.rowData:t.currentViewData()}),S()&&e.bindEvents(e.dragElement),t.dragStartData=t.rowData;var o=document.getElementById(i.rowDropSettings.targetID);i.rowDropSettings.targetID&&o&&o.ej2_instances&&"grid"===o.ej2_instances[0].getModuleName()&&o.ej2_instances[0].getContent().classList.add("e-allowRowDrop")}},this.drag=function(e){var i=t.parent,n=t.parent.element.querySelector(".e-cloneproperties"),r=t.getElementFromPosition(n,e.event);Et(n,["e-defaultcur"],["e-notallowedcur","e-movecur"]),t.isOverflowBorder=!0,t.hoverState=i.enableHover;var o=Ka(r,"e-grid")?Tt(e.target,"tr"):null;if(i.enableHover=!1,e.target){t.processArgs(r);var s={rows:t.rows,target:r,draggableType:"rows",data:t.rowData,originalEvent:e,cancel:!1};if(i.trigger("rowDrag",s),t.stopTimer(),!s.cancel){if(i.element.classList.add("e-rowdrag"),t.dragTarget=o&&Ka(r,"e-grid").id===n.parentElement.id?parseInt(o.getAttribute("aria-rowindex"),10):parseInt(t.startedRow.getAttribute("aria-rowindex"),10),i.rowDropSettings.targetID)Ka(r,"e-grid")&&Ka(n.parentElement,"e-grid").id!==Ka(r,"e-grid").id?Et(n,["e-defaultcur"],["e-notallowedcur"]):Et(n,["e-notallowedcur"],["e-defaultcur"]);else{var a=Ka(r,"e-grid");a&&a.id===n.parentElement.id?Et(n,["e-movecur"],["e-defaultcur"]):Et(n,["e-notallowedcur"],["e-movecur"])}if(!i.rowDropSettings.targetID&&(!i.groupSettings.columns.length||e.target.classList.contains("e-selectionbackground")))if(Ka(r,"e-grid")&&t.updateScrollPostion(e.event,r),(t.isOverflowBorder||t.parent.frozenRows>t.dragTarget)&&parseInt(t.startedRow.getAttribute("aria-rowindex"),10)!==t.dragTarget)t.moveDragRows(e,t.startedRow,o);else{if(o&&t.parent.getRowByIndex(t.parent.getCurrentViewRecords().length-1).getAttribute("data-uid")===o.getAttribute("data-uid")){var l=t.parent.createElement("div",{className:"e-lastrow-dragborder"}),h=t.parent.getContent();l.style.width=t.parent.element.offsetWidth-t.getScrollWidth()+"px",h.querySelectorAll(".e-lastrow-dragborder").length||(h.classList.add("e-grid-relative"),h.appendChild(l),l.style.bottom=t.getScrollWidth()+"px")}t.removeBorder(o)}}}},this.dragStop=function(e){hl(t.parent)?t.parent.notify(Or,{instance:t,handler:t.processDragStop,arg1:e}):t.processDragStop(e)},this.processDragStop=function(e){var i=t.parent;if(!t.parent.isDestroyed){var n=t.getElementFromPosition(e.helper,e.event),r=n&&!n.classList.contains("e-dlg-overlay")?n:e.target;t.parent.element.querySelector(".e-cloneproperties");i.element.classList.remove("e-rowdrag");var o=document.getElementById(i.rowDropSettings.targetID);if(i.rowDropSettings.targetID&&o&&o.ej2_instances&&"grid"===o.ej2_instances[0].getModuleName()&&o.ej2_instances[0].getContent().classList.remove("e-allowRowDrop"),i.isRowDragable()){t.stopTimer(),i.enableHover=t.hoverState,t.parent.getContent().classList.remove("e-grid-relative"),t.removeBorder(n);var s=i.element.querySelector(".e-dragstartrow");s&&s.classList.remove("e-dragstartrow")}t.processArgs(r);var a={target:S()?null:r,draggableType:"rows",cancel:!1,fromIndex:parseInt(t.rows[0].getAttribute("aria-rowindex"),10),dropIndex:t.dragTarget,rows:S()?null:t.rows,data:Object.keys(t.dragStartData[0]).length>0?t.dragStartData:t.currentViewData()};i.trigger("rowDrop",a,(function(){if(!Ka(r,"e-row")&&!Ka(r,"e-emptyrow")||a.cancel)return t.dragTarget=null,void Ct(e.helper);t.isRefresh=!1;var n=t.parent.getSelectedRowIndexes();if(i.isRowDragable()){if(S()){var o=t.parent.getSelectedRecords().length?t.parent.getSelectedRecords():t.currentViewData(),s={addedRecords:[],deletedRecords:o,changedRecords:[]},l=t.dragTarget?t.dragTarget:a.dropIndex,h=new on;h.dragDropDestinationIndex=l,t.saveChange(s,h),s.deletedRecords=[],s.addedRecords=o,t.saveChange(s,h)}else!t.parent.rowDropSettings.targetID&&t.startedRow.querySelector("td.e-selectionbackground")&&n.length>1&&n.length!==t.parent.getCurrentViewRecords().length?t.reorderRows(n,a.dropIndex):t.reorderRows([parseInt(t.startedRow.getAttribute("aria-rowindex"),10)],t.dragTarget);t.dragTarget=null,i.rowDropSettings.targetID||(Ct(e.helper),i.refresh())}t.isRefresh=!0}))}},this.removeCell=function(e,t){return[].slice.call(e.querySelectorAll("td")).filter((function(i){i.classList.contains(t)&&e.deleteCell(i.cellIndex)}))},this.parent=e,this.parent.isDestroyed||(this.parent.on(Sr,this.initializeDrag,this),this.parent.on("columnDrop",this.columnDrop,this),this.onDataBoundFn=this.onDataBound.bind(this),this.parent.addEventListener(Cr,this.onDataBoundFn),this.parent.on(kr,this.enableAfterRender,this))}return e.prototype.currentViewData=function(){for(var e=this.parent.getSelectedRowIndexes(),t=[],i=parseInt(this.startedRow.getAttribute("aria-rowindex"),10),n=0,r=e.length;n<r;n++){t[n]=this.parent.currentViewData[e[n]]}return this.parent.rowDropSettings.targetID||0!==e.length||(t[0]=this.parent.currentViewData[i]),t},e.prototype.saveChange=function(e,t){var i=this;this.parent.getDataModule().saveChanges(e,this.parent.getPrimaryKeyFieldNames()[0],{},t).then((function(){i.parent.notify(Er,{type:wr,requestType:"rowdraganddrop"})})).catch((function(e){g(e.error)||g(e.error.message)||(e.error=e.error.message),i.parent.trigger("actionFailure",e)}))},e.prototype.reorderRows=function(e,t){for(var i=this.parent.getSelectedRowIndexes(),n=[],r=[],o=this.parent.renderModule.data.dataManager.dataSource.json,s=t,a=e[0],l=0,h=e.length;l<h;l++)r[l]=o[e[l]];for(l=0,h=i.length;l<h;l++)n[l]=o[i[l]];for(l=0,h=r.length;l<h;l++){if(0!==l){for(var p=0,d=o.length;p<d;p++)if(JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[p])===JSON.stringify(r[l])){a=p;break}for(p=0,d=o.length;p<d;p++)if(JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[p])===JSON.stringify(r[l-1])){a>p&&(s=p+1);break}}this.reorderRow(a,s)}this.isRefresh&&this.parent.notify(Er,{type:wr,requestType:"rowdraganddrop"});for(l=0,h=n.length;l<h;l++)for(p=0,d=o.length;p<d;p++)if(JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[p])===JSON.stringify(n[l])){i[l]=p;break}this.selectedRowColls=i},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.initializeDrag=function(){var e=this.parent;this.draggable=new mi(e.element,{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isReplaceDragEle:this.isReplaceDragEle})},e.prototype.updateScrollPostion=function(e,t){var i=this,n=this.parent.getFrozenColumns(),r=Qa(e).y,o=this.parent.getContent().getBoundingClientRect(),s=this.parent.getRowHeight()-15,a=n?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstElementChild;if(o.top+s>=r){var l=-this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(a,l,!0)}),200)}else if(o.top+this.parent.getContent().clientHeight-s-33<=r){var h=this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(a,h,!0)}),200)}},e.prototype.setScrollDown=function(e,t,i){e.scrollTop=e.scrollTop+t},e.prototype.moveDragRows=function(e,t,i){var n=this.parent.element.querySelector(".e-cloneproperties"),r=Tt(e.target,"tr");if(Ka(r,"e-grid")&&Ka(n.parentElement,"e-grid").id===Ka(r,"e-grid").id){var o=r||this.startedRow;this.setBorder(o,e.event,t,i)}},e.prototype.setBorder=function(e,t,i,n){var r=this.parent.element,o=this.parent.element.querySelector(".e-cloneproperties");if(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),Ka(e,"e-grid")&&Ka(o.parentElement,"e-grid").id===Ka(e,"e-grid").id){gt(r.querySelectorAll(".e-rowcell,.e-rowdragdrop"),["e-dragborder"]);var s=[],a=parseInt(n.getAttribute("aria-rowindex"),10);if(n&&0===a){var l=this.parent.createElement("div",{className:"e-firstrow-dragborder"}),h=this.parent.getHeaderContent();h.classList.add("e-grid-relative"),l.style.width=r.offsetWidth-this.getScrollWidth()+"px",h.querySelectorAll(".e-firstrow-dragborder").length||h.appendChild(l)}else n&&parseInt(i.getAttribute("aria-rowindex"),10)>a?(e=this.parent.getRowByIndex(a-1),s=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):s=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"));var p=this.parent.getFrozenColumns();if(n&&0!==a&&p){var d=parseInt(e.getAttribute("aria-rowindex"),10),c=".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse";s=[].slice.call(this.parent.getRows()[d].querySelectorAll(c)).concat([].slice.call(this.parent.getMovableRows()[d].querySelectorAll(c)))}s.length>0&&cl(s,!0,"e-dragborder")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?la.getScrollBarWidth():0},e.prototype.removeFirstRowBorder=function(e){this.parent.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e&&0!==e.rowIndex&&this.parent.element.getElementsByClassName("e-firstrow-dragborder")[0].remove()},e.prototype.removeLastRowBorder=function(e){var t=e&&this.parent.getRowByIndex(this.parent.getCurrentViewRecords().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid");this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e&&t&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()},e.prototype.removeBorder=function(e){if(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),e=this.parent.getRows().filter((function(e){return e.querySelector("td.e-dragborder")}))[0]){var t=[].slice.call(e.querySelectorAll(".e-dragborder"));if(this.parent.getFrozenColumns()){var i=parseInt(e.getAttribute("aria-rowindex"),10);t=[].slice.call(this.parent.getRows()[i].querySelectorAll(".e-dragborder")).concat([].slice.call(this.parent.getMovableRows()[i].querySelectorAll(".e-dragborder")))}cl(t,!1,"e-dragborder")}},e.prototype.getElementFromPosition=function(e,t){var i,n=Qa(t);return e.style.display="none",i=document.elementFromPoint(n.x,n.y),e.style.display="",i},e.prototype.onDataBound=function(e){this.selectedRowColls.length>0&&(this.parent.selectRows(this.selectedRowColls),this.selectedRowColls=[])},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("aria-rowindex"),10):0},e.prototype.singleRowDrop=function(e){var t,i,n=Tt(e.target,"tr");i=e.droppedElement.parentElement.ej2_instances[0],t=n?n.rowIndex:i.currentViewData.length-1,this.reorderRow(this.startedRowIndex,t)},e.prototype.columnDrop=function(e){var t=this.parent;e.droppedElement.parentElement.ej2_instances[0];if("grouping"!==e.droppedElement.getAttribute("action")&&(Ka(e.target,"e-row")||Ka(e.target,"e-emptyrow"))){var i,n=Tt(e.target,"tr");if("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id===t.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id!==t.element.id)return;if(e.droppedElement.parentElement.id!==t.element.id)i=e.droppedElement.parentElement.ej2_instances[0];else if(this.isSingleRowDragDrop||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow"))return void this.singleRowDrop(e);if(i.element.id!==t.element.id&&i.rowDropSettings.targetID!==t.element.id)return;var r=i.getSelectedRecords(),o=this.getTargetIdx(n);if(isNaN(o)&&(o=0),t.allowPaging&&(o=o+t.pageSettings.currentPage*t.pageSettings.pageSize-t.pageSettings.pageSize),S()){var s=[],a=i.getSelectedRowIndexes();for(c=0;c<a.length;c++)s[c]=i.currentViewData[a[c]];var l={addedRecords:r=s,deletedRecords:[],changedRecords:[]},h=new on;h.dragDropDestinationIndex=o,t.getDataModule().saveChanges(l,t.getPrimaryKeyFieldNames()[0],{},h).then((function(){t.notify(Er,{type:wr,requestType:"rowdraganddrop"})})).catch((function(e){g(e.error)||g(e.error.message)||(e.error=e.error.message),t.trigger("actionFailure",e)})),l.deletedRecords=r,l.addedRecords=[],i.getDataModule().saveChanges(l,i.getPrimaryKeyFieldNames()[0],{},h).then((function(){i.notify(Er,{type:wr,requestType:"rowdraganddrop"})})).catch((function(e){g(e.error)||g(e.error.message)||(e.error=e.error.message),i.trigger("actionFailure",e)}))}else{t.notify("rows-added",{toIndex:o,records:r}),t.notify(Er,{type:wr,requestType:"rowdraganddrop"});var p=i.getSelectedRowIndexes(),d=i.allowPaging?i.pageSettings.currentPage*i.pageSettings.pageSize-i.pageSettings.pageSize:0;this.selectedRows=[];for(var c=0,u=r.length;c<u;c++)this.selectedRows.push(d+p[c]);i.notify("rows-removed",{indexes:this.selectedRows,records:r}),i.notify(Er,{type:wr,requestType:"rowdraganddrop"})}}},e.prototype.reorderRow=function(e,t){var i=this.parent;if(!i.sortSettings.columns.length&&!i.groupSettings.columns.length&&!i.filterSettings.columns.length){var n=i.allowPaging?i.pageSettings.currentPage*i.pageSettings.pageSize-i.pageSettings.pageSize:0;t+=n,this.selectedRows=i.getSelectedRowIndexes(),i.notify("row-position-changed",{fromIndex:e+n,toIndex:t})}},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.initializeDrag()},e.prototype.destroy=function(){var e=this.parent.element;!this.parent.isDestroyed&&e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.draggable.destroy(),this.parent.off(Sr,this.initializeDrag),this.parent.off("columnDrop",this.columnDrop),this.parent.removeEventListener(Cr,this.onDataBoundFn),this.parent.off(kr,this.enableAfterRender))},e.prototype.getModuleName=function(){return"rowDragAndDrop"},e.prototype.processArgs=function(e){var t=this.parent;t.getSelectedRecords().length>0&&!1===this.startedRow.cells[0].classList.contains("e-selectionbackground")||0===t.getSelectedRecords().length?(this.rows=[this.startedRow],this.rowData=[this.parent.getRowInfo(this.startedRow.querySelector(".e-rowcell")).rowData]):(this.rows=t.getSelectedRows(),this.rowData=t.getSelectedRecords())},e}(),Pw=function(){function e(e){this.canDrop=!0,this.isDraggedWithChild=!1,this.isaddtoBottom=!1,Pa.Inject(Rw),this.parent=e,this.addEventListener()}return e.prototype.getChildrecordsByParentID=function(e){return(this.parent.dataSource instanceof yn&&Ih(this.parent)?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource).filter((function(t){return t.uniqueID===e}))},e.prototype.addEventListener=function(){this.parent.on("row-draging",this.Rowdraging,this),this.parent.on("row-dropped",this.rowDropped,this),this.parent.on("rows-add",this.rowsAdded,this),this.parent.on("rows-remove",this.rowsRemoved,this)},e.prototype.reorderRows=function(e,t,i){var n=this.parent;e[0],"above"===i&&(this.dropPosition="topSegment"),"below"===i&&(this.dropPosition="bottomSegment"),"child"===i&&(this.dropPosition="middleSegment");for(var r=[],o=0;o<e.length;o++)r[o]=this.parent.getCurrentViewRecords()[e[o]];var s={data:r,dropIndex:t};Eh(this.parent)||this.dropRows(s,!0),n.isLocalData&&(n.flatData=this.orderToIndex(n.flatData)),this.parent.grid.refresh()},e.prototype.orderToIndex=function(e){for(var t=function(t){if(e[t].index=t,!g(e[t].parentItem)){var i=e.filter((function(i){return i.uniqueID===e[t].parentUniqueID}))[0];e[t].parentItem.index=i.index}},i=0;i<e.length;i++)t(i);return e},e.prototype.rowsAdded=function(e){for(var t,i=e.records,n=e.records.length-1;n>-1;n--)if((t=i[n]).parentUniqueID){var r=i.filter((function(e){return e.uniqueID===t.parentUniqueID}));if(r.length){var o=r[0].childRecords.indexOf(t),s=r[0];-1!==o&&(s.childRecords.splice(o,1),s.childRecords.length||(s.hasChildRecords=!1,s.hasFilteredChildRecords=!1),this.isDraggedWithChild=!0)}}if(g(this.parent.dataSource)||!this.parent.dataSource.length){var a,h=this.parent,p=e.records;for(n=e.records.length-1;n>-1;n--){if(g((a=p[n]).taskData)||a.taskData.hasOwnProperty(h.childMapping)||(a.taskData[h.childMapping]=[]),a.hasOwnProperty(h.childMapping)&&a[h.childMapping].length&&!this.isDraggedWithChild&&!g(h.parentIdMapping))for(var d=a[h.childMapping],c=0;c<d.length;c++)-1===p.indexOf(d[c])&&(p.splice(c,0,d[c]),d[c].taskData=u({},d[c]),n+=1);a.hasOwnProperty(h.parentIdMapping)&&null!=a[h.parentIdMapping]&&!this.isDraggedWithChild&&(a.taskData[h.parentIdMapping]=null,delete a.parentItem,delete a.parentUniqueID),g(h.dataSource)&&(h.dataSource=[]),h.dataSource.splice(0,0,a.taskData)}h.setProperties({dataSource:h.dataSource},!1)}else{for(n=0;n<i.length;n++)l("uniqueIDCollection."+i[n].uniqueID,i[n],this.parent);var f={data:e.records,dropIndex:e.toIndex};this.parent.dataSource instanceof yn?(this.treeGridData=this.parent.dataSource.dataSource.json,this.treeData=this.parent.dataSource.dataSource.json):(this.treeGridData=this.parent.grid.dataSource,this.treeData=this.parent.dataSource),this.dropRows(f)}},e.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++)this.draggedRecord=e.records[t],(this.draggedRecord.hasChildRecords||this.draggedRecord.parentItem&&-1!==this.parent.grid.dataSource.indexOf(this.getChildrecordsByParentID(this.draggedRecord.parentUniqueID)[0])||0===this.draggedRecord.level)&&this.deleteDragRow()},e.prototype.refreshGridDataSource=function(){var e,t,i=this.draggedRecord,n=this.droppedRecord,r=this.parent;if(!(e=this.parent.dataSource instanceof yn&&Ih(this.parent)?r.dataSource.dataSource.json:r.dataSource)||g(n)||n.parentItem){if(!this.parent.parentIdMapping&&!g(n)&&n.parentItem&&("topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition)){var o=this.getChildrecordsByParentID(n.parentUniqueID)[0].childRecords;for(s=0;s<o.length;s++)n.parentItem.taskData[this.parent.childMapping][s]=o[s].taskData}}else{for(var s=0;s<Object.keys(e).length;s++)e[s][this.parent.childMapping]===n.taskData[this.parent.childMapping]&&(t=s);"topSegment"===this.dropPosition?this.parent.idMapping||e.splice(t,0,i.taskData):"bottomSegment"===this.dropPosition&&(this.parent.idMapping||e.splice(t+1,0,i.taskData))}this.parent.parentIdMapping&&(i.parentItem?"topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition?(i[this.parent.parentIdMapping]=n[this.parent.parentIdMapping],i.taskData[this.parent.parentIdMapping]=n[this.parent.parentIdMapping]):(i[this.parent.parentIdMapping]=n[this.parent.idMapping],i.taskData[this.parent.parentIdMapping]=n[this.parent.idMapping]):(i.taskData[this.parent.parentIdMapping]=null,i[this.parent.parentIdMapping]=null))},e.prototype.removeFirstrowBorder=function(e,t){var i="bottomSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-firstrow-border").length>0&&e&&(0!==e.rowIndex||i)&&this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeLastrowBorder=function(e,t){var i=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader")),n=e&&!i&&this.parent.getRowByIndex(this.parent.getRows().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid"),r=n||"topSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-lastrow-border").length>0&&e&&(n||r)&&this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove()},e.prototype.updateIcon=function(e,t,i){var n=i.target?Tt(i.target,"tr"):null;this.dropPosition=void 0;var r=0;this.removeFirstrowBorder(n),this.removeLastrowBorder(n);for(var o=0;o<i.rows.length;o++)(g(n)||n.getAttribute("data-uid")!==i.rows[o].getAttribute("data-uid"))&&Ka(i.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());var s=this.parent,a=0,l=s.toolbar&&s.toolbar.length?document.getElementById(s.element.id+"_gridcontrol_toolbarItems").offsetHeight:0,h=this.getOffset(s.element),p=s.getHeaderContent().offsetHeight+h.top+l,d=s.getContent().firstElementChild.scrollTop;g(n)||(r=n.offsetTop-d);var c=((a=s.allowTextWrap?e[0].offsetHeight:r+p+0)+e[0].offsetHeight-a)/3,u=a+c,f=u+c,m=f+c,y=(h.left,xl("originalEvent.event",i).pageY),v=y<=u,b=y>u&&y<=f,w=y>f&&y<=m;if(v||b||w){if(v&&"Invalid"!==this.dropPosition&&(this.removeChildBorder(),this.dropPosition="topSegment",this.removetopOrBottomBorder(),this.addFirstrowBorder(n),this.removeErrorElem(),this.removeLastrowBorder(n),this.topOrBottomBorder(i.target)),b&&"Invalid"!==this.dropPosition){this.removetopOrBottomBorder();var C,S=void 0;S=Tt(i.target,"tr"),(C=[].slice.call(S.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length>0&&this.addRemoveClasses(C,!0,"e-childborder"),this.addLastRowborder(n),this.addFirstrowBorder(n),this.dropPosition="middleSegment"}w&&"Invalid"!==this.dropPosition&&(this.removeErrorElem(),this.removetopOrBottomBorder(),this.removeChildBorder(),this.dropPosition="bottomSegment",this.addLastRowborder(n),this.removeFirstrowBorder(n),this.topOrBottomBorder(i.target))}return this.dropPosition},e.prototype.removeChildBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-childborder"))).length>0&&this.addRemoveClasses(e,!1,"e-childborder")},e.prototype.addFirstrowBorder=function(e){var t=this.parent.element,i=this.parent;if(e&&0===e.rowIndex&&!e.classList.contains("e-emptyrow")){var n=this.parent.createElement("div",{className:"e-firstrow-border"}),r=this.parent.getHeaderContent(),o=0;i.toolbar&&(o=i.toolbarModule.getToolbar().offsetHeight);var s=!g(this.parent.rowDropSettings.targetID);s&&(n.style.top=this.parent.grid.element.getElementsByClassName("e-gridheader")[0].offsetHeight+o+"px"),n.style.width=s?t.offsetWidth+"px":t.offsetWidth-this.getScrollWidth()+"px",r.querySelectorAll(".e-firstrow-border").length||r.appendChild(n)}},e.prototype.addLastRowborder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader"));if(e&&!t&&this.parent.getRowByIndex(this.parent.getRows().length-1).getAttribute("data-uid")===e.getAttribute("data-uid")){var i=this.parent.createElement("div",{className:"e-lastrow-border"}),n=this.parent.getContent();i.style.width=this.parent.element.offsetWidth-this.getScrollWidth()+"px",n.querySelectorAll(".e-lastrow-border").length||(n.classList.add("e-treegrid-relative"),n.appendChild(i),i.style.bottom=this.getScrollWidth()+"px")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?la.getScrollBarWidth():0},e.prototype.addErrorElem=function(){var e=document.getElementsByClassName("e-cloneproperties")[0];if(!e.querySelectorAll(".e-errorelem").length&&!this.parent.rowDropSettings.targetID){var t=document.createElement("div");Et(t,["e-errorcontainer"],[]),Et(t,["e-icons","e-errorelem"],[]);var i=e.querySelector(".errorValue"),n=e.querySelector(".e-rowcell").innerHTML;i&&(n=i.innerHTML,i.parentNode.removeChild(i)),e.querySelector(".e-rowcell").innerHTML="";var r=document.createElement("span");r.className="errorValue",r.style.paddingLeft="16px",r.innerHTML=n,e.querySelector(".e-rowcell").appendChild(t),e.querySelector(".e-rowcell").appendChild(r)}},e.prototype.removeErrorElem=function(){var e=document.querySelector(".e-errorelem");e&&e.remove()},e.prototype.topOrBottomBorder=function(e){var t,i;g(this.parent.rowDropSettings.targetID);(i=(t=Tt(e,"tr"))?[].slice.call(t.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):[]).length&&("topSegment"===this.dropPosition&&(this.addRemoveClasses(i,!0,"e-droptop"),this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()),"bottomSegment"===this.dropPosition&&this.addRemoveClasses(i,!0,"e-dropbottom"))},e.prototype.removetopOrBottomBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-dropbottom, .e-droptop"))).length&&(this.addRemoveClasses(e,!1,"e-dropbottom"),this.addRemoveClasses(e,!1,"e-droptop"))},e.prototype.addRemoveClasses=function(e,t,i){for(var n=0,r=e.length;n<r;n++)t?e[n].classList.add(i):e[n].classList.remove(i)},e.prototype.getOffset=function(e){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,r=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,s=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,l=t.top+r-s,h=t.left+o-a;return{top:Math.round(l),left:Math.round(h)}},e.prototype.Rowdraging=function(e){var t=this.parent,i=this.parent.element.querySelector(".e-cloneproperties");i.style.cursor="";var n,r=e.target?Tt(e.target,"tr"):null,o=r?r.rowIndex:-1,s=[],a=t.getCurrentViewRecords()[o];(this.removeErrorElem(),this.canDrop=!0,e.data[0]?s=e.data:s.push(e.data),-1!==o?this.ensuredropPosition(s,a):(this.canDrop=!1,this.addErrorElem()),!t.rowDropSettings.targetID&&this.canDrop&&t.rowDragAndDropModule.updateIcon(e.rows,o,e),t.rowDropSettings.targetID)&&((n=Ka(e.target,"e-treegrid"))&&n.id===this.parent.rowDropSettings.targetID&&n.ej2_instances[0].rowDragAndDropModule.updateIcon(e.rows,o,e));e.target&&Tt(e.target,"#"+t.rowDropSettings.targetID)&&((n=Ka(e.target,"e-treegrid"))||(i.style.cursor="default"))},e.prototype.rowDropped=function(e){var t=this.parent;t.rowDropSettings.targetID?(e.target&&Tt(e.target,"#"+t.rowDropSettings.targetID)||Ka(e.target,"e-treegrid")&&Ka(e.target,"e-treegrid").id===t.rowDropSettings.targetID)&&(l("dropPosition",this.dropPosition,e),t.trigger("rowDrop",e),!e.cancel&&t.rowDropSettings.targetID&&(this.dragDropGrid(e),t.isLocalData&&(t.flatData=this.orderToIndex(t.flatData)))):Ka(e.target,"e-content")&&(this.parent.element.querySelector(".e-errorelem")&&(this.dropPosition="Invalid"),l("dropPosition",this.dropPosition,e),t.trigger("rowDrop",e),e.cancel||(Eh(this.parent)||this.dropRows(e),t.isLocalData&&(t.flatData=this.orderToIndex(t.flatData)),t.grid.refresh(),g(t.getHeaderContent().querySelector(".e-firstrow-border"))||t.getHeaderContent().querySelector(".e-firstrow-border").remove())),this.removetopOrBottomBorder(),this.removeChildBorder(),g(this.parent.element.getElementsByClassName("e-firstrow-border")[0])?g(this.parent.element.getElementsByClassName("e-lastrow-border")[0])||this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove():this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.dragDropGrid=function(e){var t,i=this.parent,n=Tt(e.target,"tr"),r=isNaN(this.getTargetIdx(n))?0:this.getTargetIdx(n),o=Ka(e.target,"e-treegrid");if(o&&o.id===this.parent.rowDropSettings.targetID&&!Dh(this.parent)&&!Eh(this.parent)){t=o.ej2_instances[0];for(var s=i.getSelectedRecords(),l=[],h=0;h<s.length;h++)l[h]=s[h].index;i.notify("rows-remove",{indexes:l,records:s}),t.notify("rows-add",{toIndex:r,records:s});var p=t.rowDragAndDropModule.treeGridData;if(!g(p))for(h=0;h<p.length;h++)if(p[h].index=h,!g(p[h].parentItem)){var d=a("uniqueIDCollection."+p[h].parentUniqueID+".index",t);p[h].parentItem.index=d}i.grid.refresh(),t.grid.refresh(),t.grid.dataSource.length>1&&(t.grid.refresh(),g(t.getHeaderContent().querySelector(".e-firstrow-border"))||t.getHeaderContent().querySelector(".e-firstrow-border").remove(),g(t.getContent().querySelector(".e-lastrow-border"))||t.getContent().querySelector(".e-lastrow-border").remove())}Eh(this.parent)&&(t=o.ej2_instances[0],i.grid.refresh(),t.grid.refresh())},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("aria-rowindex"),10):0},e.prototype.getParentData=function(e){var t=e.parentItem;if("bottomSegment"===this.dropPosition){var i=this.parent.getSelectedRecords()[0];this.droppedRecord=Oh(this.parent,i.parentItem.uniqueID)}"middleSegment"===this.dropPosition&&(this.parent.getSelectedRecords()[0].level===t.level?this.droppedRecord=Oh(this.parent,t.uniqueID):this.getParentData(t))},e.prototype.dropRows=function(e,t){if("Invalid"!==this.dropPosition&&!Dh(this.parent)){var i=this.parent,n=void 0,r=void 0;if(g(e.dropIndex)){var o=i.getSelectedRowIndexes()[0]-1,s=i.getCurrentViewRecords()[o];this.getParentData(s)}else e.dropIndex=e.dropIndex===e.fromIndex?this.getTargetIdx(e.target.parentElement):e.dropIndex,this.droppedRecord=i.getCurrentViewRecords()[e.dropIndex];var a=[];r=this.droppedRecord,e.data[0]?a=e.data:a.push(e.data);var l=0,h=this.parent.rowDropSettings.targetID;this.isMultipleGrid=h;h?this.isaddtoBottom=h&&this.isDraggedWithChild:this.ensuredropPosition(a,r);for(var p=a.length,d=0;d<p;d++){n=a[d],this.draggedRecord=n;var c=e.dropIndex,u=!g(i.parentIdMapping);if("Invalid"!==this.dropPosition){if(i.rowDropSettings.targetID&&!t||this.deleteDragRow(),this.draggedRecord===this.droppedRecord){var f=this.getTargetIdx(e.target.offsetParent.parentElement);isNaN(f)&&(f=this.getTargetIdx(e.target.parentElement)),c=e.dropIndex=f,r=this.droppedRecord=this.parent.getCurrentViewRecords()[e.dropIndex]}var m=this.treeGridData.indexOf(r);if(this.dropAtTop(m,u,d),"bottomSegment"===this.dropPosition){if(r.hasChildRecords?(l=this.getChildCount(r,0),this.parent.parentIdMapping&&this.treeData.splice(m+l+1,0,this.draggedRecord.taskData),this.treeGridData.splice(m+l+1,0,this.draggedRecord)):(this.parent.parentIdMapping&&this.treeData.splice(m+1,0,this.draggedRecord.taskData),this.treeGridData.splice(m+1,0,this.draggedRecord)),n.parentItem=this.treeGridData[m].parentItem,n.parentUniqueID=this.treeGridData[m].parentUniqueID,n.level=this.treeGridData[m].level,n.hasChildRecords){this.updateChildRecordLevel(n,1),this.updateChildRecord(n,m+l+1)}if(r.parentItem){var y=this.getChildrecordsByParentID(r.parentUniqueID)[0].childRecords,v=y.indexOf(r)+1;y.splice(v,0,n)}}this.dropMiddle(c,m,e,t,u,d)}if(g(n.parentItem)){var b=i.parentData,w=b.indexOf(this.droppedRecord);"bottomSegment"===this.dropPosition?b.splice(w+1,0,n):"topSegment"===this.dropPosition&&b.splice(w,0,n)}i.rowDragAndDropModule.refreshGridDataSource()}}},e.prototype.dropMiddle=function(e,t,i,n,r,o){var s=this.parent,a=Ph(this.droppedRecord),l=g(a)||0===a.length?t+1:a.length+t+1;"middleSegment"===this.dropPosition&&(s.parentIdMapping?(this.treeData.splice(l,0,this.draggedRecord.taskData),this.treeGridData.splice(l,0,this.draggedRecord)):this.treeGridData.splice(l,0,this.draggedRecord),this.recordLevel(),this.draggedRecord.hasChildRecords&&this.updateChildRecord(this.draggedRecord,l,this.droppedRecord.expanded))},e.prototype.dropAtTop=function(e,t,i){var n=this.parent;if("topSegment"===this.dropPosition){if(n.parentIdMapping&&this.treeData.splice(e,0,this.draggedRecord.taskData),this.draggedRecord.parentItem=this.treeGridData[e].parentItem,this.draggedRecord.parentUniqueID=this.treeGridData[e].parentUniqueID,this.draggedRecord.level=this.treeGridData[e].level,this.treeGridData.splice(e,0,this.draggedRecord),this.draggedRecord.hasChildRecords){this.updateChildRecord(this.draggedRecord,e),this.updateChildRecordLevel(this.draggedRecord,1)}if(this.droppedRecord.parentItem){var r=this.getChildrecordsByParentID(this.droppedRecord.parentUniqueID)[0].childRecords,o=r.indexOf(this.droppedRecord);r.splice(o,0,this.draggedRecord)}}},e.prototype.recordLevel=function(){var e=this.parent,t=this.draggedRecord,i=this.droppedRecord,n=e.childMapping;if(i.hasChildRecords||(i.hasChildRecords=!0,i.hasFilteredChildRecords=!0,g(i.childRecords)&&(i.childRecords=[],!e.parentIdMapping&&g(i.taskData[n])&&(i.taskData[n]=[]))),"middleSegment"===this.dropPosition){var r=u({},i);if(delete r.childRecords,t.parentItem=r,t.parentUniqueID=i.uniqueID,i.childRecords.splice(i.childRecords.length,0,t),g(t)||e.parentIdMapping||g(i.taskData[n])||i.taskData[e.childMapping].splice(i.childRecords.length,0,t.taskData),t.hasChildRecords){t.level=i.level+1,this.updateChildRecordLevel(t,1)}else t.level=i.level+1;i.expanded=!0}},e.prototype.deleteDragRow=function(){var e;this.parent.dataSource instanceof yn&&Ih(this.parent)?(this.treeGridData=this.parent.grid.dataSource.dataSource.json,this.treeData=this.parent.dataSource.dataSource.json):(this.treeGridData=this.parent.grid.dataSource,this.treeData=this.parent.dataSource),e=Oh(this.parent,this.draggedRecord.uniqueID),this.removeRecords(e)},e.prototype.updateChildRecord=function(e,t,i){var n,r,o=this.parent;if(!e.hasChildRecords)return 0;r=e.childRecords.length;for(var s=0;s<r;s++)n=e.childRecords[s],t++,o.flatData.splice(t,0,n),l("uniqueIDCollection."+n.uniqueID,n,this.parent),o.parentIdMapping&&this.treeData.splice(t,0,n.taskData),n.hasChildRecords&&(t=this.updateChildRecord(n,t));return t},e.prototype.updateChildRecordLevel=function(e,t){var i,n;if(t++,!e.hasChildRecords)return 0;i=e.childRecords.length;for(var r=0;r<i;r++){n=e.childRecords[r];var o=void 0;e.parentItem&&(o=Oh(this.parent,e.parentItem.uniqueID)),n.level=e.parentItem?o.level+t:e.level+1,n.hasChildRecords&&(t--,t=this.updateChildRecordLevel(n,t))}return t},e.prototype.removeRecords=function(e){var t,i=this.parent;t=this.parent.dataSource instanceof yn&&Ih(this.parent)?this.parent.dataSource.dataSource.json:this.parent.dataSource;var n=e,r=!g(i.parentIdMapping),o=this.getChildrecordsByParentID(n.parentUniqueID)[0];if(n){if(n.parentItem){var s=o?o.childRecords:[],a=0;s&&s.length>0&&(a=s.indexOf(n),o.childRecords.splice(a,1),this.parent.parentIdMapping||Du({value:n,action:"delete"},this.parent,r,n.index,n.index))}if(i.parentIdMapping){n.hasChildRecords&&n.childRecords.length>0&&this.removeChildItem(n);for(var l=void 0,h=void 0,p=t,d=0;d<p.length;d++)p[d][this.parent.idMapping]===n.taskData[this.parent.idMapping]&&(l=d);for(d=0;d<this.treeGridData.length;d++)this.treeGridData[d][this.parent.idMapping]===n.taskData[this.parent.idMapping]&&(h=d);-1===l&&-1===h||(t.splice(l,1),this.treeGridData.splice(h,1))}var c=this.treeGridData.indexOf(n);if(!i.parentIdMapping){var u=this.parent.parentData.indexOf(n);-1!==u&&(i.parentData.splice(u,1),t.splice(u,1))}if(-1===c&&!i.parentIdMapping)for(var f=i.getPrimaryKeyFieldNames()[0],m=0;m<this.treeGridData.length;m++)this.treeGridData[m][f]===n[f]&&(c=m);if(!i.parentIdMapping){var y=this.getChildCount(n,0);this.treeGridData.splice(c,y+1)}n.parentItem&&o&&o.childRecords&&!o.childRecords.length&&(o.expanded=!1,o.hasChildRecords=!1,o.hasFilteredChildRecords=!1)}},e.prototype.removeChildItem=function(e){var t,i,n,r;this.parent;r=this.parent.dataSource instanceof yn&&Ih(this.parent)?this.parent.dataSource.dataSource.json:this.parent.dataSource;for(var o=0;o<e.childRecords.length;o++){t=e.childRecords[o];var s=void 0;s=this.parent.dataSource instanceof yn&&Ih(this.parent)?this.parent.dataSource.dataSource.json:this.parent.dataSource;for(var a=0;a<s.length;a++)s[a][this.parent.idMapping]===t.taskData[this.parent.idMapping]&&(i=a);for(var l=0;l<this.treeGridData.length;l++)if(this.treeGridData[l][this.parent.idMapping]===t.taskData[this.parent.idMapping]){n=l;break}-1===i&&-1===n||(r.splice(i,1),this.treeGridData.splice(n,1)),t.hasChildRecords&&this.removeChildItem(t)}},e.prototype.getChildCount=function(e,t){var i;if(!e.hasChildRecords)return 0;for(var n=0;n<e.childRecords.length;n++)t++,(i=e.childRecords[n]).hasChildRecords&&(t=this.getChildCount(i,t));return t},e.prototype.ensuredropPosition=function(e,t){this.parent;var i=this;e.filter((function(e){if(e.hasChildRecords&&!g(e.childRecords)){if(-1!==e.childRecords.indexOf(t))return i.dropPosition="Invalid",i.addErrorElem(),void(i.canDrop=!1);i.ensuredropPosition(e.childRecords,t)}}))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("row-draging",this.Rowdraging),this.parent.off("row-dropped",this.rowDropped),this.parent.off("rows-add",this.rowsAdded),this.parent.off("rows-remove",this.rowsRemoved))},e.prototype.getModuleName=function(){return"rowDragAndDrop"},e}(),Iw=function(){function e(e){this.isTest=!1,this.updateParentRecords=[],this.isaddtoBottom=!1,this.isSharedTask=!1,this.canDrop=!0,this.parent=e,hp.Inject(Pw),this.parent.treeGrid.allowRowDragAndDrop=this.parent.allowRowDragAndDrop,this.bindEvents()}return e.prototype.getModuleName=function(){return"rowDragAndDrop"},e.prototype.destroy=function(){},e.prototype.bindEvents=function(){this.parent.treeGrid.rowDragStart=this.rowDragStart.bind(this),this.parent.treeGrid.rowDragStartHelper=this.rowDragStartHelper.bind(this),this.parent.treeGrid.rowDrag=this.rowDrag.bind(this),this.parent.treeGrid.rowDrop=this.rowDrop.bind(this)},e.prototype.rowDragStart=function(e){this.parent.trigger("rowDragStart",e),this.parent.element.style.position="relative"},e.prototype.addErrorElem=function(){var e=document.getElementsByClassName("e-ganttdrag")[0];if(!e.querySelectorAll(".e-errorelem").length){var t=document.createElement("div");Et(t,["e-errorcontainer"],[]),Et(t,["e-icons","e-errorelem"],[]);var i=e.querySelector(".errorValue"),n=e.querySelector(".e-rowcell").innerHTML;i&&(n=i.innerHTML,i.parentNode.removeChild(i)),e.querySelector(".e-rowcell").innerHTML="";var r=document.createElement("span");r.className="errorValue",r.style.paddingLeft="16px",r.innerHTML=n,e.querySelector(".e-rowcell").appendChild(t),e.querySelector(".e-rowcell").appendChild(r)}},e.prototype.removeErrorElem=function(){var e=document.querySelector(".e-errorelem");e&&e.remove()},e.prototype.rowDrag=function(e){var t=this.parent.element.querySelector(".e-cloneproperties");t.style.display="none";var i=t.cloneNode(!0);i.classList.add("e-ganttdrag"),i.style.display="",this.parent.element.querySelectorAll(".e-cloneproperties").length<=1?this.parent.element.appendChild(i):document.getElementsByClassName("e-cloneproperties")[0].querySelectorAll(".e-errorelem").length?this.addErrorElem():this.removeErrorElem(),"Both"===this.parent.gridLines&&ut(this.parent.element.querySelectorAll(".e-ganttdrag .e-rowcell"),["e-bothganttlines"]);var n=this.parent.element.querySelector(".e-ganttdrag"),r=this.parent.element.getClientRects()[0].top,o=this.parent.element.getClientRects()[0].left,s=a("event",e.originalEvent).clientX-o,l=a("event",e.originalEvent).clientY-r;n.style.left=s+20+"px",n.style.top=l+20+"px",this.parent.trigger("rowDrag",e)},e.prototype.rowDragStartHelper=function(e){this.parent.trigger("rowDragStartHelper",e),(this.parent.filterSettings.columns.length>0||this.parent.sortSettings.columns.length>0)&&(e.cancel=!0),"ResourceView"===this.parent.viewType&&0===a("level",e.data[0])&&(e.cancel=!0)},e.prototype.rowDrop=function(e){var t=document.querySelector(".e-ganttdrag");t&&t.remove();var i=Tt(e.target,".e-row"),n=i?parseInt(i.getAttribute("aria-rowindex"),10):e.dropIndex;e.dropIndex=n,e.dropRecord=this.parent.currentViewData[e.dropIndex],this.parent.trigger("rowDrop",e),"ResourceView"===this.parent.viewType&&("middleSegment"===e.dropPosition&&(1===e.dropRecord.level||e.dropRecord.uniqueID===a("parentItem",e.data[0]).uniqueID)&&(e.cancel=!0),"middleSegment"!==e.dropPosition&&(0===e.dropRecord.level||a("parentItem",e.data[0]).uniqueID===e.dropRecord.parentItem.uniqueID)&&(e.cancel=!0)),e.cancel||(e.cancel=!0,e.requestType="beforeDrop",this.parent.trigger("actionBegin",e),this.dropRows(e,!0))},e.prototype.dropRows=function(e,t){if(!this.parent.readOnly){if(this.dropPosition=e.dropPosition,"Invalid"!==e.dropPosition&&this.parent.editModule){var i=this.parent,n=void 0,r=void 0;this.droppedRecord=i.currentViewData[e.dropIndex];var o=[];r=this.droppedRecord,e.data[0]?o=e.data:o.push(e.data);for(var s=0,a=o.length,l=0;l<a;l++){if(this.parent.isOnEdit=!0,n=o[l],this.draggedRecord=n,"Invalid"!==this.dropPosition){if("ResourceView"===this.parent.viewType&&(this.checkisSharedTask(),this.previousParent=this.draggedRecord.parentItem.uniqueID),this.isSharedTask)return;t&&this.deleteDragRow();var h=this.ganttData.indexOf(r);if("topSegment"===this.dropPosition&&this.dropAtTop(h),"bottomSegment"===this.dropPosition&&!this.isSharedTask){if(r.hasChildRecords){if(s=this.parent.editModule.getChildCount(r,0),this.parent.taskFields.parentID&&this.parent.dataSource.length>0&&this.parent.dataSource.splice(h+s+1,0,this.draggedRecord.taskData),this.ganttData.splice(h+s+1,0,this.draggedRecord),this.parent.flatData.splice(h+s+1,0,this.draggedRecord),this.parent.ids.splice(h+s+1,0,this.draggedRecord.ganttProperties.rowUniqueID.toString()),"ResourceView"===this.parent.viewType){var p=0===this.draggedRecord.level?"R"+this.draggedRecord.ganttProperties.taskId:"T"+this.draggedRecord.ganttProperties.taskId;this.parent.getTaskIds().splice(h+s+1,0,p)}}else if(this.parent.taskFields.parentID&&this.parent.dataSource.length>0&&this.parent.dataSource.splice(h+1,0,this.draggedRecord.taskData),this.ganttData.splice(h+1,0,this.draggedRecord),this.parent.flatData.splice(h+1,0,this.draggedRecord),this.parent.ids.splice(h+1,0,this.draggedRecord.ganttProperties.rowUniqueID.toString()),"ResourceView"===this.parent.viewType){var d=0===this.draggedRecord.level?"R"+this.draggedRecord.ganttProperties.taskId:"T"+this.draggedRecord.ganttProperties.taskId;this.parent.getTaskIds().splice(h+1,0,d)}if(n.parentItem=this.ganttData[h].parentItem,n.parentUniqueID=this.ganttData[h].parentUniqueID,n.level=this.ganttData[h].level,n.hasChildRecords){this.updateChildRecordLevel(n,1),this.updateChildRecord(n,h+s+1)}if(r.parentItem){var c=this.parent.getParentTask(r.parentItem).childRecords,u=c.indexOf(r)+1;c.splice(u,0,n)}}"middleSegment"===this.dropPosition&&this.dropMiddle(h),g(n.parentItem&&-1!==this.updateParentRecords.indexOf(n.parentItem))||this.updateParentRecords.push(n.parentItem)}i.rowDragAndDropModule.refreshDataSource()}if("middleSegment"===this.dropPosition&&(r.ganttProperties.predecessor&&(this.parent.editModule.removePredecessorOnDelete(r),r.ganttProperties.predecessor=null,r.ganttProperties.predecessorsName=null,r[this.parent.taskFields.dependency]=null,r.taskData[this.parent.taskFields.dependency]=null),r.ganttProperties.isMilestone&&(this.parent.setRecordValue("isMilestone",!1,r.ganttProperties,!0),g(r.taskData[this.parent.taskFields.milestone])||!0===r.taskData[this.parent.taskFields.milestone]&&(r.taskData[this.parent.taskFields.milestone]=!1))),"ResourceView"===this.parent.viewType&&!this.isSharedTask){var f=void 0;f="middleSegment"===this.dropPosition?this.droppedRecord.uniqueID:this.droppedRecord.parentItem.uniqueID;var m=this.parent.getTaskByUniqueID(f),y={};y[this.parent.taskFields.resourceInfo]=[],y[this.parent.taskFields.resourceInfo].push(m.ganttProperties.taskId),this.removeExistingResources();var v=this.parent.dataOperation.setResourceInfo(y),b=this.draggedRecord;g(b.ganttProperties.resourceInfo)&&(b.ganttProperties.resourceInfo=[]),"Unassigned Task"===m.ganttProperties.taskName?(b.ganttProperties.resourceInfo=[],b.ganttProperties.sharedTaskUniqueIds=[b.ganttProperties.rowUniqueID]):b.ganttProperties.resourceInfo.push(v[0]),this.updateCurrentTask(b),"Unassigned Task"===m.ganttProperties.taskName?this.deleteSharedResourceTask():this.updateSharedResourceTask()}for(var w=0;w<this.updateParentRecords.length;w++)this.parent.dataOperation.updateParentItems(this.updateParentRecords[w]);this.updateParentRecords=[],this.parent.isOnEdit=!1}this.parent.treeGrid.refresh(),e.requestType="rowDropped",e.modifiedRecords=this.parent.editedRecords,this.parent.trigger("actionComplete",e),this.parent.editedRecords=[]}},e.prototype.updateCurrentTask=function(e){this.parent.dataOperation.updateMappingData(e,"resourceInfo"),this.parent.editModule.updateResourceRelatedFields(e,"resource"),this.parent.editModule.dialogModule.dialogEditValidationFlag=!1,this.parent.editModule.dialogModule.validateDuration(e),this.parent.dataOperation.updateWidthLeft(e),this.parent.dataOperation.updateTaskData(e)},e.prototype.deleteSharedResourceTask=function(){for(var e=0;e<this.parent.getTaskIds().length;e++)this.parent.getTaskIds()[e]==="T"+this.draggedRecord.ganttProperties.taskId&&("Unassigned Task"!==this.parent.getTaskByUniqueID(this.parent.currentViewData[e].parentItem.uniqueID).ganttProperties.taskName&&this.removeRecords(this.parent.currentViewData[e]),g(this.parent.currentViewData[e].parentItem&&-1!==this.updateParentRecords.indexOf(this.parent.currentViewData[e].parentItem))||this.updateParentRecords.push(this.parent.currentViewData[e].parentItem))},e.prototype.removeExistingResources=function(){var e=this.parent.getTaskByUniqueID(this.previousParent);if(this.draggedRecord.ganttProperties.resourceInfo)for(var t=0;t<this.draggedRecord.ganttProperties.resourceInfo.length;t++)if(this.draggedRecord.ganttProperties.resourceInfo[t][this.parent.resourceFields.id]===e.ganttProperties.taskId){this.draggedRecord.ganttProperties.resourceInfo.splice(t,1);break}},e.prototype.updateSharedResourceTask=function(){for(var e=0;e<this.parent.getTaskIds().length;e++)this.parent.getTaskIds()[e]==="T"+this.draggedRecord.ganttProperties.taskId&&(this.parent.editModule.updateGanttProperties(this.draggedRecord,this.parent.currentViewData[e]),this.parent.dataOperation.updateTaskData(this.parent.currentViewData[e]),g(this.parent.currentViewData[e].parentItem&&-1!==this.updateParentRecords.indexOf(this.parent.currentViewData[e].parentItem))||this.updateParentRecords.push(this.parent.currentViewData[e].parentItem))},e.prototype._getExistingTaskWithID=function(e){for(var t=[],i=0;i<this.parent.getTaskIds().length;i++)this.parent.getTaskIds()[i]==="T"+e.ganttProperties.taskId&&t.push(this.parent.currentViewData[i]);return t},e.prototype.removeResourceInfo=function(e){var t=this.parent.getTaskByUniqueID(this.draggedRecord.parentItem.uniqueID);if(e.ganttProperties.resourceInfo&&e.ganttProperties.resourceInfo.length>1){var i=this._getExistingTaskWithID(e),n=void 0;if(null==i)return;for(var r=0;r<i.length;r++)for(var o=(n=i[r]).ganttProperties.resourceInfo,s=0;s<o.length;s++)if(o[s][this.parent.resourceFields.id]===t.ganttProperties.taskId){o.splice(s,1),this.parent.setRecordValue("resourceInfo",o,n.ganttProperties,!0),this.updateCurrentTask(n),g(n.parentItem&&-1!==this.updateParentRecords.indexOf(n.parentItem))||this.updateParentRecords.push(n.parentItem);break}}},e.prototype.refreshDataSource=function(){var e,t,i=this.draggedRecord,n=this.droppedRecord,r=this.parent;if((e=this.parent.dataSource instanceof yn&&this.parent.dataSource.dataSource.json.length>0?r.dataSource.dataSource.json:r.dataSource).length>0&&!g(n)&&!n.parentItem){for(var o=0;o<Object.keys(e).length;o++)e[o][this.parent.taskFields.child]===n.taskData[this.parent.taskFields.child]&&(t=o);"topSegment"===this.dropPosition?this.parent.taskFields.parentID||e.splice(t,0,i.taskData):"bottomSegment"===this.dropPosition&&(this.parent.taskFields.parentID||e.splice(t+1,0,i.taskData))}else if(!this.parent.taskFields.parentID&&!g(n)&&n.parentItem&&("topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition)){var s="topSegment"===this.dropPosition?"Above":"Below";this.parent.editModule.addRowSelectedItem=n,this.parent.editModule.updateRealDataSource(i,s),delete this.parent.editModule.addRowSelectedItem}this.parent.taskFields.parentID&&(i.parentItem?"topSegment"===this.dropPosition||"bottomSegment"===this.dropPosition?(i[this.parent.taskFields.parentID]=n[this.parent.taskFields.parentID],i.taskData[this.parent.taskFields.parentID]=n[this.parent.taskFields.parentID],i.ganttProperties.parentId=n[this.parent.taskFields.parentID]):(i[this.parent.taskFields.parentID]=n[this.parent.taskFields.id],i.taskData[this.parent.taskFields.parentID]=n[this.parent.taskFields.id],i.ganttProperties.parentId=n[this.parent.taskFields.id]):(i[this.parent.taskFields.parentID]=null,i.taskData[this.parent.taskFields.parentID]=null,i.ganttProperties.parentId=null))},e.prototype.dropMiddle=function(e){var t=this.parent,i=this.parent.editModule.getChildCount(this.droppedRecord,0),n=g(i)||0===i?e+1:i+e+1;if("middleSegment"===this.dropPosition&&!this.isSharedTask){if(t.taskFields.parentID&&this.parent.dataSource.length>0&&this.parent.dataSource.splice(n,0,this.draggedRecord.taskData),this.ganttData.splice(n,0,this.draggedRecord),this.parent.flatData.splice(n,0,this.draggedRecord),this.parent.ids.splice(n,0,this.draggedRecord.ganttProperties.rowUniqueID.toString()),"ResourceView"===this.parent.viewType){var r=0===this.draggedRecord.level?"R"+this.draggedRecord.ganttProperties.taskId:"T"+this.draggedRecord.ganttProperties.taskId;this.parent.getTaskIds().splice(n,0,r)}this.draggedRecord.hasChildRecords&&this.updateChildRecord(this.draggedRecord,n,this.droppedRecord.expanded),this.recordLevel(),g(this.draggedRecord.parentItem&&-1!==this.updateParentRecords.indexOf(this.draggedRecord.parentItem))&&this.updateParentRecords.push(this.draggedRecord.parentItem)}},e.prototype.recordLevel=function(){var e=this.parent,t=this.draggedRecord,i=this.droppedRecord,n=e.taskFields.child;if(i.hasChildRecords||(i.hasChildRecords=!0,i.childRecords.length||(i.childRecords=[],!e.taskFields.parentID&&g(i.taskData[n])&&(i.taskData[n]=[]))),"middleSegment"===this.dropPosition){var r=u({},i);delete r.childRecords;var o={uniqueID:r.uniqueID,expanded:r.expanded,level:r.level,index:r.index,taskId:r.ganttProperties.rowUniqueID};if(t.parentItem=o,t.parentUniqueID=i.uniqueID,i.childRecords.splice(i.childRecords.length,0,t),g(t)||e.taskFields.parentID||g(i.taskData[n])||i.taskData[e.taskFields.child].splice(i.childRecords.length,0,t.taskData),t.hasChildRecords){t.level=i.level+1,this.updateChildRecordLevel(t,1)}else t.level=i.level+1;i.expanded=!0}},e.prototype.deleteDragRow=function(){var e;this.parent.dataSource instanceof yn&&this.parent.dataSource.dataSource.json.length>0?this.ganttData=this.parent.dataSource.dataSource.json:this.ganttData=this.parent.currentViewData,e=this.parent.getTaskByUniqueID(this.draggedRecord.uniqueID),this.removeRecords(e)},e.prototype.checkisSharedTask=function(){this.isSharedTask=!1;for(var e=null,t=0===this.droppedRecord.level?this.droppedRecord.uniqueID:this.droppedRecord.parentItem.uniqueID,i=this.parent.getTaskByUniqueID(t).childRecords,n=0;n<i.length;n++)"T"+this.draggedRecord.ganttProperties.taskId=="T"+i[n].ganttProperties.taskId&&(this.isSharedTask=!0,e=i[n]);this.isSharedTask&&this.removeResourceInfo(e)},e.prototype.dropAtTop=function(e){var t=this.parent;if(!this.isSharedTask){if(t.taskFields.parentID&&this.parent.dataSource.length>0&&this.parent.dataSource.splice(e,0,this.draggedRecord.taskData),this.draggedRecord.parentItem=this.ganttData[e].parentItem,this.draggedRecord.parentUniqueID=this.ganttData[e].parentUniqueID,this.draggedRecord.level=this.ganttData[e].level,this.ganttData.splice(e,0,this.draggedRecord),this.parent.flatData.splice(e,0,this.draggedRecord),this.parent.ids.splice(e,0,this.draggedRecord.ganttProperties.rowUniqueID.toString()),"ResourceView"===this.parent.viewType){var i=0===this.draggedRecord.level?"R"+this.draggedRecord.ganttProperties.taskId:"T"+this.draggedRecord.ganttProperties.taskId;this.parent.getTaskIds().splice(e,0,i)}if(this.draggedRecord.hasChildRecords){this.updateChildRecord(this.draggedRecord,e),this.updateChildRecordLevel(this.draggedRecord,1)}if(this.droppedRecord.parentItem){var n=this.parent.getParentTask(this.droppedRecord.parentItem).childRecords,r=n.indexOf(this.droppedRecord);n.splice(r,0,this.draggedRecord)}g(this.draggedRecord.parentItem&&-1!==this.updateParentRecords.indexOf(this.draggedRecord.parentItem))||this.updateParentRecords.push(this.draggedRecord.parentItem)}},e.prototype.updateChildRecordLevel=function(e,t){var i,n;if(t++,!e.hasChildRecords)return 0;i=e.childRecords.length;for(var r=0;r<i;r++){n=e.childRecords[r];var o=void 0;e.parentItem&&(o=this.parent.getParentTask(e.parentItem)),n.level=e.parentItem?o.level+t:e.level+1,n.hasChildRecords&&(t--,t=this.updateChildRecordLevel(n,t))}return t},e.prototype.updateChildRecord=function(e,t,i){var n,r,o=this.parent;if(!e.hasChildRecords)return 0;r=e.childRecords.length;for(var s=0;s<r;s++)n=e.childRecords[s],t++,o.currentViewData.splice(t,0,n),o.flatData.splice(t,0,n),this.parent.ids.splice(t,0,n.ganttProperties.rowUniqueID.toString()),o.taskFields.parentID&&o.dataSource.length>0&&o.dataSource.splice(t,0,n.taskData),n.hasChildRecords&&(t=this.updateChildRecord(n,t));return t},e.prototype.removeRecords=function(e){var t,i=this.parent;t=this.parent.dataSource;var n=e,r=this.parent.getParentTask(n.parentItem);if(n){if(n.parentItem){var o=r?r.childRecords:[],s=0;o&&o.length>0&&("ResourceView"===this.parent.viewType&&1===o.length&&(this.parent.isOnDelete=!0,o[0].isDelete=!0,this.parent.dataOperation.updateParentItems(r),this.parent.isOnDelete=!1,o[0].isDelete=!1),s=o.indexOf(n),r.childRecords.splice(s,1),this.updateParentRecords.push(r))}if(n&&!this.parent.taskFields.parentID){var a=[];a.push(n.ganttProperties.rowUniqueID.toString()),this.parent.editModule.removeFromDataSource(a)}if(i.taskFields.parentID){n.hasChildRecords&&n.childRecords.length>0&&this.removeChildItem(n);for(var l=void 0,h=t.length>0&&"ResourceView"!==this.parent.viewType?t:this.parent.currentViewData,p=0;p<h.length;p++)"ResourceView"===this.parent.viewType?h[p].ganttProperties.rowUniqueID===n.ganttProperties.rowUniqueID&&(l=p):h[p][this.parent.taskFields.id]===n.taskData[this.parent.taskFields.id]&&(l=p);-1!==l&&(t.length>0&&t.splice(l,1),this.ganttData.splice(l,1),this.parent.flatData.splice(l,1),this.parent.ids.splice(l,1),"ResourceView"===this.parent.viewType&&this.parent.getTaskIds().splice(l,1))}var d=this.ganttData.indexOf(n);if(!i.taskFields.parentID){var c=this.parent.editModule.getChildCount(n,0);this.ganttData.splice(d,c+1),this.parent.flatData.splice(d,c+1),this.parent.ids.splice(d,c+1),"ResourceView"===this.parent.viewType&&this.parent.getTaskIds().splice(d,c+1)}n.parentItem&&r&&r.childRecords&&!r.childRecords.length&&(r.expanded=!1,r.hasChildRecords=!1)}},e.prototype.removeChildItem=function(e){for(var t,i,n=this.parent,r=0;r<e.childRecords.length;r++){t=e.childRecords[r];var o;o=this.parent.dataSource.length>0?this.parent.dataSource:this.parent.currentViewData;for(var s=0;s<o.length;s++)o[s][this.parent.taskFields.id]===t.taskData[this.parent.taskFields.id]&&(i=s);-1!==i&&(n.dataSource.length>0&&n.dataSource.splice(i,1),this.ganttData.splice(i,1),this.parent.flatData.splice(i,1),this.parent.ids.splice(i,1),"ResourceView"===this.parent.viewType&&this.parent.getTaskIds().splice(i,1)),t.hasChildRecords&&this.removeChildItem(t)}},e.prototype.reorderRows=function(e,t,i){if(!this.parent.readOnly){e[0],"above"===i&&(this.dropPosition="topSegment"),"below"===i&&(this.dropPosition="bottomSegment"),"child"===i&&(this.dropPosition="middleSegment");for(var n=[],r=0;r<e.length;r++)n[r]=this.parent.currentViewData[e[r]];var o={data:n,dropIndex:t,dropPosition:this.dropPosition};this.dropRows(o,!0)}},e}(),Mw=function(){function e(e){this.isSelectionFromChart=!1,this.multipleIndexes=[],this.selectedRowIndexes=[],this.enableSelectMultiTouch=!1,this.openPopup=!1,this.parent=e,this.bindEvents(),this.parent.treeGrid.selectedRowIndex=this.parent.selectedRowIndex,this.parent.treeGrid.allowSelection=this.parent.allowSelection,this.parent.treeGrid.grid.selectionSettings.enableToggle=this.parent.selectionSettings.enableToggle,this.parent.treeGrid.selectionSettings=Ua(this.parent.selectionSettings),this.wireEvents()}return e.prototype.getModuleName=function(){return"selection"},e.prototype.wireEvents=function(){this.parent.on("selectRowByIndex",this.selectRowByIndex,this),this.parent.isAdaptive?(this.parent.on("chartMouseClick",this.mouseUpHandler,this),this.parent.on("treeGridClick",this.popUpClickHandler,this)):this.parent.on("chartMouseUp",this.mouseUpHandler,this)},e.prototype.selectRowByIndex=function(){-1===this.parent.selectedRowIndex&&-1===this.parent.staticSelectedRowIndex||(this.selectRow(-1!==this.parent.staticSelectedRowIndex?this.parent.staticSelectedRowIndex:this.parent.selectedRowIndex),this.parent.staticSelectedRowIndex=-1)},e.prototype.bindEvents=function(){this.parent.treeGrid.rowSelecting=this.rowSelecting.bind(this),this.parent.treeGrid.rowSelected=this.rowSelected.bind(this),this.parent.treeGrid.rowDeselecting=this.rowDeselecting.bind(this),this.parent.treeGrid.rowDeselected=this.rowDeselected.bind(this),this.parent.treeGrid.cellSelecting=this.cellSelecting.bind(this),this.parent.treeGrid.cellSelected=this.cellSelected.bind(this),this.parent.treeGrid.cellDeselecting=this.cellDeselecting.bind(this),this.parent.treeGrid.cellDeselected=this.cellDeselected.bind(this)},e.prototype.rowSelecting=function(e){this.parent.isGanttChartRendered?(e.isCtrlPressed=this.isMultiCtrlRequest,e.isShiftPressed=this.isMultiShiftRequest,e.target=this.actualTarget,g(e.foreignKeyData)||0!==Object.keys(e.foreignKeyData).length||delete e.foreignKeyData,this.parent.trigger("rowSelecting",e)):e.cancel=!0},e.prototype.rowSelected=function(e){var t="Multiple"!==this.parent.selectionSettings.type||g(e.rowIndexes)?[e.rowIndex]:e.rowIndexes;this.addClass(t),this.selectedRowIndexes=u([],this.getSelectedRowIndexes(),[],!0),this.parent.setProperties({selectedRowIndex:this.parent.treeGrid.grid.selectedRowIndex},!0),this.isMultiShiftRequest&&(this.selectedRowIndexes=t),this.parent.autoFocusTasks&&this.parent.ganttChartModule.updateScrollLeft(a("data.ganttProperties.left",e)),e.target=this.actualTarget,g(e.foreignKeyData)||0!==Object.keys(e.foreignKeyData).length||delete e.foreignKeyData,this.prevRowIndex=e.rowIndex,g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems(e),this.parent.trigger("rowSelected",e)},e.prototype.rowDeselecting=function(e){e.target=this.actualTarget,e.isInteracted=this.isInteracted,S()&&"Multiple"===this.parent.selectionSettings.type&&(this.multipleIndexes=u([],e.rowIndex,[],!0)),this.parent.trigger("rowDeselecting",e)},e.prototype.rowDeselected=function(e){var t,i;if(0!==this.multipleIndexes.length)t=this.multipleIndexes;else if(g(e.rowIndexes))t=e.rowIndex;else{for(var n=0;n<e.rowIndexes.length;n++)e.rowIndexes[n]===e.rowIndex&&(i=!0);t=i?e.rowIndexes:e.rowIndex}this.removeClass(t),this.selectedRowIndexes=u([],this.getSelectedRowIndexes(),[],!0),this.parent.setProperties({selectedRowIndex:-1},!0),g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems(),"Multiple"===this.parent.selectionSettings.type&&this.parent.isAdaptive&&0===this.selectedRowIndexes.length&&this.hidePopUp(),e.target=this.actualTarget,e.isInteracted=this.isInteracted,this.parent.trigger("rowDeselected",e),this.isInteracted=!1,this.multipleIndexes=[]},e.prototype.cellSelecting=function(e){var t=new vn;return this.parent.trigger("cellSelecting",e,(function(e){t.resolve(e)})),t},e.prototype.cellSelected=function(e){this.parent.trigger("cellSelected",e),g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems()},e.prototype.cellDeselecting=function(e){this.parent.trigger("cellDeselecting",e)},e.prototype.cellDeselected=function(e){this.parent.trigger("cellDeselected",e),g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems()},e.prototype.selectCell=function(e,t){this.parent.treeGrid.selectCell(e,t)},e.prototype.selectCells=function(e){this.parent.treeGrid.grid.selectCells(e)},e.prototype.selectRow=function(e,t,i){var n,r=this.parent.getRowByIndex(e);-1===e||g(r)||"Cell"===this.parent.selectionSettings.mode||(this.parent.showActiveElement&&!i?this.parent.treeGrid.grid.selectionModule.preventFocus=!0:this.parent.treeGrid.grid.selectionModule.preventFocus=!1,g(this.selectedClass)||this.selectedClass!==r||t||(n=!0),!0!==n&&this.parent.treeGrid.selectRow(e,t),this.parent.treeGrid.grid.selectionModule.preventFocus=!0!==this.parent.treeGrid.grid.selectionModule.preventFocus&&this.parent.treeGrid.grid.selectionModule.preventFocus,this.prevRowIndex=e,this.selectedClass=r)},e.prototype.selectRows=function(e){!g(e)&&e.length>0&&this.parent.treeGrid.selectRows(e)},e.prototype.getSelectedRowIndexes=function(){return this.parent.treeGrid.getSelectedRowIndexes()},e.prototype.getSelectedRowCellIndexes=function(){return this.parent.treeGrid.getSelectedRowCellIndexes()},e.prototype.getSelectedRecords=function(){return S()?this.parent.getRecordFromFlatdata(this.parent.treeGrid.getSelectedRecords()):this.parent.treeGrid.getSelectedRecords()},e.prototype.getCellSelectedRecords=function(){for(var e=this.parent.selectionModule.getSelectedRowCellIndexes(),t=[],i=0;i<e.length;i++)t.push(this.parent.currentViewData[e[i].rowIndex]);return S()?this.parent.getRecordFromFlatdata(t):t},e.prototype.getSelectedRows=function(){return this.parent.treeGrid.getSelectedRows()},e.prototype.clearSelection=function(){this.removeClass(this.selectedRowIndexes),this.parent.treeGrid.clearSelection(),this.parent.selectedRowIndex=-1,this.selectedRowIndexes=[],g(this.parent.toolbarModule)||this.parent.toolbarModule.refreshToolbarItems(),this.isInteracted=!1},e.prototype.highlightSelectedRows=function(e,t){var i=Tt(e.target,"tbody").children,n=Tt(e.target,"tr.e-chart-row"),r=[].slice.call(i).indexOf(n);this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch,this.isMultiShiftRequest=e.shiftKey,this.actualTarget=e.target,this.isInteracted=!0,this.isSelectionFromChart=t;var o=this.parent.selectionSettings.enableToggle;t&&("Single"===this.parent.selectionSettings.type||!this.isMultiCtrlRequest&&!this.isMultiShiftRequest?this.selectRow(r,o):this.isMultiShiftRequest?this.selectRowsByRange(g(this.prevRowIndex)?r:this.prevRowIndex,r):(l("isMultiCtrlRequest",!0,this.parent.treeGrid.grid.selectionModule),this.parent.treeGrid.grid.selectionModule.addRowsToSelection([r])))},e.prototype.getselectedrowsIndex=function(e,t){for(var i=[],n=e<t?{i:e,max:t}:{i:t,max:e},r=n.i,o=n.max;r<=o;r++)i.push(r);e>t&&i.reverse(),this.selectedRowIndexes=i},e.prototype.selectRowsByRange=function(e,t){this.isSelectionFromChart=!0,this.getselectedrowsIndex(e,t),this.selectRows(this.selectedRowIndexes)},e.prototype.addClass=function(e){for(var t=document.getElementById(this.parent.element.id+"GanttTaskTableBody").children,i=0;i<e.length;i++)g(t[e[i]])||(ut([t[e[i]]],"e-active"),t[e[i]].setAttribute("aria-selected","true"))},e.prototype.removeClass=function(e){if(!this.parent.selectionSettings.persistSelection)for(var t=document.getElementById(this.parent.element.id+"GanttTaskTableBody").children,i=g(e.length)?[e]:e,n=0;n<i.length;n++)gt([t[i[n]]],"e-active"),t[i[n]].removeAttribute("aria-selected")},e.prototype.showPopup=function(e){this.isSelectionFromChart?(Ga(this.parent.element.querySelector(".e-ganttpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(this.enableSelectMultiTouch&&(this.getSelectedRecords().length>1||this.getSelectedRowCellIndexes().length>1)?" e-spanclicked":"")),document.getElementsByClassName("e-gridpopup")[0].style.display="none",this.openPopup=!0):0===this.selectedRowIndexes.length&&this.hidePopUp()},e.prototype.hidePopUp=function(){this.openPopup?(document.getElementsByClassName("e-ganttpopup")[0].style.display="none",this.openPopup=!1):document.getElementsByClassName("e-gridpopup")[0].style.display="none"},e.prototype.popUpClickHandler=function(e){var t=e.target,i=this.parent.treeGrid.grid,n=Tt(t,".e-ganttpopup")?Tt(t,".e-ganttpopup"):Tt(t,".e-gridpopup");if(n){var r=n.querySelector(".e-rowselect");Tt(t,".e-ganttpopup")&&!r.classList.contains("e-spanclicked")?(this.enableSelectMultiTouch=!0,r.classList.add("e-spanclicked")):Tt(t,".e-gridpopup")&&r.classList.contains("e-spanclicked")?(this.openPopup=!0,this.enableSelectMultiTouch=!0):(this.hidePopUp(),this.enableSelectMultiTouch=!1,Tt(t,".e-ganttpopup")&&r.classList.remove("e-spanclicked"))}else if("Multiple"===this.parent.selectionSettings.type&&this.parent.isAdaptive){Tt(t,".e-rowcell")&&0===this.selectedRowIndexes.length&&this.hidePopUp()}i&&l("enableSelectMultiTouch",this.enableSelectMultiTouch,i.selectionModule)},e.prototype.mouseUpHandler=function(e){var t=!1,i=null;if(e.target.closest(".e-rowcell")?i=e.target:e.target.closest(".e-chart-row")&&(i=e.target.closest(".e-left-label-container")||e.target.closest(".e-taskbar-main-container")||e.target.closest(".e-right-label-container")),this.parent.focusModule&&this.parent.focusModule.setActiveElement(i),this.parent.editModule&&this.parent.editSettings.allowTaskbarEditing&&this.parent.editModule.taskbarEditModule){var n=this.parent.editModule.taskbarEditModule;(n.isMouseDragged||n.tapPointOnFocus)&&(t=!0)}if(!t&&this.parent.element.contains(e.target)){var r=Ka(e.target,"e-chart-row"),o=e.target.classList.contains("e-rowcell")||e.target.classList.contains("e-row")||e.target.classList.contains("e-treegridexpand")||e.target.classList.contains("e-treegridcollapse")||!g(r);this.popUpClickHandler(e),"Cell"!==this.parent.selectionSettings.mode&&o?(Tt(e.target,"tr.e-chart-row")?this.highlightSelectedRows(e,!0):this.highlightSelectedRows(e,!1),"Multiple"===this.parent.selectionSettings.type&&this.parent.isAdaptive&&(this.selectedRowIndexes.length>0?this.showPopup(e):this.hidePopUp())):this.isSelectionFromChart=!1}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off("selectRowByIndex",this.selectRowByIndex),this.parent.isAdaptive?(this.parent.off("chartMouseClick",this.mouseUpHandler),this.parent.off("treeGridClick",this.popUpClickHandler)):this.parent.off("chartMouseUp",this.mouseUpHandler))},e}(),Lw=function(){function e(e,t,i,n){var r=this;this.sortRequired=!0,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.reorderingColumns=[],this.visualElement=ct("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var t=r.parent,i=e.sender.target,n=i.classList.contains("e-groupheadercell")?i:Ka(i,"e-groupheadercell");return!(!n||!i.classList.contains("e-drag")&&r.groupSettings.allowReordering)&&(r.column=t.getColumnByField(n.firstElementChild.getAttribute("ej-mappingname")),r.visualElement.textContent=n.textContent,r.visualElement.style.width=n.offsetWidth+2+"px",r.visualElement.style.height=n.offsetHeight+2+"px",r.visualElement.setAttribute("e-mappinguid",r.column.uid),t.element.appendChild(r.visualElement),r.visualElement)},this.dragStart=function(e){r.parent.element.classList.add("e-ungroupdrag"),S()&&e.bindEvents(e.dragElement)},this.drag=function(e){r.groupSettings.allowReordering&&r.animateDropper(e);var t=e.target,i=r.parent.element.querySelector(".e-cloneproperties");r.parent.trigger("columnDrag",{target:t,draggableType:"headercell",column:r.column}),r.groupSettings.allowReordering||(Et(i,["e-defaultcur"],["e-notallowedcur"]),Ka(t,"e-gridcontent")||Ka(t,"e-headercell")||Et(i,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(e){r.parent.element.classList.remove("e-ungroupdrag");var t=!(Ka(e.target,"e-gridcontent")||Ka(e.target,"e-gridheader"));if(r.groupSettings.allowReordering&&t){if(Ct(e.helper),Ka(e.target,"e-groupdroparea"))r.rearrangeGroup(e);else if(!Ka(e.target,"e-grid")){var i=r.parent.getColumnByUid(e.helper.getAttribute("e-mappinguid")).field;-1!==r.groupSettings.columns.indexOf(i)&&r.ungroupColumn(i)}}else t&&Ct(e.helper)},this.animateDropper=function(e){var t=r.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),i=r.parent.getColumnByUid(t).field,n=Ka(e.target,"e-groupdroparea"),o=Ka(e.target,"e-group-animator"),s=[].slice.call(r.element.querySelectorAll(".e-groupheadercell")).map((function(e){return e.querySelector("div").getAttribute("ej-mappingname")})),a=JSON.parse(JSON.stringify(s));if(o||n){if(o){var l=o.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),h=+o.getAttribute("index");if(l!==i){var p=a.indexOf(i);-1!==p&&a.splice(p,1);var d=-1!==h&&p===h;a.splice(h+(d?1:0),0,i)}}else n&&-1===a.indexOf(i)&&a.push(i);r.element.innerHTML="",a.length&&!r.element.classList.contains("e-grouped")&&r.element.classList.add("e-grouped"),r.reorderingColumns=a;for(var c=0;c<a.length;c++)r.addColToGroupDrop(a[c])}else r.addLabel(),r.removeColFromGroupDrop(i)},this.drop=function(e){var t=r.parent,i=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));r.element.classList.remove("e-hover"),Ct(e.droppedElement),r.aria.setDropTarget(r.parent.element.querySelector(".e-groupdroparea"),!1),r.aria.setGrabbed(r.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),g(i)||!1===i.allowGrouping||Ka(t.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id")?r.parent.log("action_disabled_column",{moduleName:r.getModuleName(),columnName:i.headerText}):r.groupColumn(i.field)},this.contentRefresh=!0,this.aria=new fs,this.parent=e,this.groupSettings=t,this.serviceLocator=n,this.sortedColumns=i,this.focus=n.getService("focus"),this.addEventListener(),this.groupGenerator=new ds(this.parent)}return e.prototype.addLabel=function(){if(!this.element.querySelectorAll(".e-group-animator").length){var e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}},e.prototype.rearrangeGroup=function(e){this.sortRequired=!1,this.updateModel()},e.prototype.columnDrag=function(e){this.groupSettings.allowReordering&&this.animateDropper(e);this.parent;var t=this.parent.element.querySelector(".e-cloneproperties");Et(t,["e-defaultcur"],["e-notallowedcur"]),Ka(e.target,"e-groupdroparea")||this.parent.allowReordering&&Ka(e.target,"e-headercell")||Et(t,["e-notallowedcur"],["e-defaultcur"]),e.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},e.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){this.parent;var t=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(t,e.column.allowGrouping);var i=e.target.classList.contains("e-headercell")?e.target:Ka(e.target,"e-headercell");this.aria.setGrabbed(i,!0,!e.column.allowGrouping)}},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var i=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if(g(i)||!1===i.allowGrouping||Ka(t.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;this.ungroupColumn(i.field)}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(kr,this.enableAfterRender,this),this.parent.on("grouping-complete",this.onActionComplete,this),this.parent.on("ungrouping-complete",this.onActionComplete,this),this.parent.on(Dr,this.onPropertyChanged,this),this.parent.on(Ir,this.clickHandler,this),this.parent.on("columnDrag",this.columnDrag,this),this.parent.on("columnDragStart",this.columnDragStart,this),this.parent.on("header-drop",this.columnDrop,this),this.parent.on("columnDrop",this.columnDrop,this),this.parent.on(Rr,this.refreshSortIcons,this),this.parent.on("sorting-complete",this.refreshSortIcons,this),this.parent.on(Pr,this.keyPressHandler,this),this.parent.on(xr,this.initialEnd,this),this.parent.on(Tr,this.initialEnd,this),this.parent.on(Sr,this.render,this),this.parent.on("group-aggregates",this.onGroupAggregates,this),this.parent.on("blazor-action-begin",this.blazorActionBegin,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Sr,this.render),this.parent.off(kr,this.enableAfterRender),this.parent.off("grouping-complete",this.onActionComplete),this.parent.off("ungrouping-complete",this.onActionComplete),this.parent.off(Dr,this.onPropertyChanged),this.parent.off(Ir,this.clickHandler),this.parent.off("columnDrag",this.columnDrag),this.parent.off("columnDragStart",this.columnDragStart),this.parent.off("columnDrop",this.columnDrop),this.parent.off("header-drop",this.columnDrop),this.parent.off(Rr,this.refreshSortIcons),this.parent.off("sorting-complete",this.refreshSortIcons),this.parent.off(Pr,this.keyPressHandler),this.parent.off("group-aggregates",this.onGroupAggregates),this.parent.off("blazor-action-begin",this.blazorActionBegin),this.parent.off("group-expand-collapse",this.updateExpand))},e.prototype.blazorActionBegin=function(){this.parent.allowGrouping&&!this.parent.isCollapseStateEnabled()&&this.expandAll()},e.prototype.initialEnd=function(){var e=this.parent;if(this.parent.off(xr,this.initialEnd),this.parent.off(Tr,this.initialEnd),S()&&e.isServerRendered){for(var t=0;t<e.columns.length;t++)this.removeColFromGroupDrop(e.columns[t].field);this.updateGroupDropArea()}if(this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var i=0,n=e.groupSettings.columns;i<n.length;i++){var r=n[i];this.groupColumn(r)}this.contentRefresh=!0}},e.prototype.keyPressHandler=function(e){var t=this.parent;if("ctrlSpace"===e.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(e.action))switch(e.preventDefault(),e.action){case"altDownArrow":case"altUpArrow":var i=t.allowSelection?t.getSelectedRowIndexes():[];if(i.length){for(var n=t.getContentTable().querySelector("tbody").children,r=void 0,o=t.getDataRows()[i[i.length-1]].rowIndex;o>=0;o--)if(!n[o].classList.contains("e-row")&&!n[o].classList.contains("e-detailrow")){r=n[o];break}this.expandCollapseRows(r.querySelector("altUpArrow"===e.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(this.parent.isEdit||null!==Tt(e.target,"#"+this.parent.element.id+"_searchbar"))return;var s=this.focus.getFocusedElement(),a=s?s.parentElement.querySelector('[class^="e-record"]'):null;if(!a)break;this.expandCollapseRows(a);break;case"ctrlSpace":var l=t.focusModule.currentInfo.element;if(l&&l.classList.contains("e-headercell")){var h=t.getColumnByUid(l.firstElementChild.getAttribute("e-mappinguid"));h.field&&t.groupSettings.columns.indexOf(h.field)<0?this.groupColumn(h.field):this.ungroupColumn(h.field)}}},e.prototype.clickHandler=function(e){this.expandCollapseRows(e.target),this.applySortFromTarget(e.target),this.unGroupFromTarget(e.target),this.toogleGroupFromHeader(e.target)},e.prototype.unGroupFromTarget=function(e){e.classList.contains("e-ungroupbutton")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname"))},e.prototype.toogleGroupFromHeader=function(e){this.groupSettings.showToggleButton&&(e.classList.contains("e-grptogglebtn")?e.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):e.classList.contains("e-toggleungroup")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname")))},e.prototype.applySortFromTarget=function(e){var t=this.parent,i=Tt(e,".e-groupheadercell");if(t.allowSorting&&i&&!e.classList.contains("e-ungroupbutton")&&!e.classList.contains("e-toggleungroup")){var n=i.firstElementChild.getAttribute("ej-mappingname");t.getColumnHeaderByField(n).querySelectorAll(".e-ascending").length?t.sortColumn(n,"Descending",!0):t.sortColumn(n,"Ascending",!0)}},e.prototype.expandCollapseRows=function(e){var t=Ka(e,"e-recordplusexpand")||Ka(e,"e-recordpluscollapse");if(t){var i=t.cellIndex,n=t.parentElement.rowIndex,r=this.parent.getContentTable().querySelector("tbody").children,o=[].slice.call(r).slice(n+1,r.length),s=void 0,a=void 0,l=[],h=this.parent,p=t.parentElement.querySelectorAll(".e-indentcell").length,d=!1;if(S()&&this.parent.isCollapseStateEnabled())return void this.parent.notify("group-expand-collapse",{uid:t.parentElement.getAttribute("data-uid"),isExpand:t.classList.contains("e-recordpluscollapse")});if(t.classList.contains("e-recordpluscollapse")?(ut([t],"e-recordplusexpand"),gt([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",d=!0,Sl(h)&&this.updateVirtualRows(h,e,d,void 0,void 0),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionExpand(t.parentElement)):(s=!0,gt([t],"e-recordplusexpand"),ut([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",Sl(h)&&this.updateVirtualRows(h,e,!s,void 0,void 0),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionCollapse(t.parentElement)),this.aria.setExpand(t,d),!Sl(h)&&!this.parent.groupSettings.enableLazyLoading)for(var c=0,u=o.length;c<u&&(o[c].querySelectorAll("td")[i]&&o[c].querySelectorAll("td")[i].classList.contains("e-indentcell")&&o);c++)s?o[c].style.display="none":o[c].querySelectorAll(".e-indentcell").length===p+1&&(o[c].style.display="",(a=o[c].querySelector(".e-recordplusexpand"))&&l.push(a),o[c].classList.contains("e-detailrow")&&o[c-1].querySelectorAll(".e-detailrowcollapse").length&&(o[c].style.display="none"));for(c=0,u=l.length;c<u;c++)gt([l[c]],"e-recordplusexpand"),ut([l[c]],"e-recordpluscollapse"),l[c].firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",this.expandCollapseRows(l[c])}},e.prototype.updateVirtualRows=function(e,t,i,n,r){var o=e.getRowObjectFromUID(t.closest("tr").getAttribute("data-uid"));o.isExpand=i,function(e){for(var t=[],i=e.vRows,n=0;n<i.length;n++)i[n].isDataRow?t.push(i[n]):i[n].isDataRow||(t.push(i[n]),!i[n].isExpand&&i[n].isCaptionRow&&(n+=Fa(i[n],e)));e.vcRows=t}(e),(n=e.getDataModule().generateQuery(!1)).queries=e.getDataModule().aggregateQuery(e.getQuery().clone()).queries;var s={requestType:"virtualscroll",rowObject:o};e.getDataModule().getData(s,n.requiresCount()).then((function(t){return e.renderModule.dataManagerSuccess(t,s)}))},e.prototype.expandCollapse=function(e){if(S()&&this.parent.isCollapseStateEnabled())this.parent.notify("group-expand-collapse",{isExpand:e});else{e||this.parent.notify("initial-collapse",e);for(var t,i=this.parent.getContentTable().querySelector("tbody").children,n=0,r=i.length;n<r;n++)i[n].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((t=i[n].querySelector(e?".e-recordpluscollapse":".e-recordplusexpand"))&&(t.className=e?"e-recordplusexpand":"e-recordpluscollapse",t.firstElementChild.className=e?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"),i[n].firstElementChild.classList.contains("e-recordplusexpand")||i[n].firstElementChild.classList.contains("e-recordpluscollapse")||(i[n].style.display=e?"":"none")):i[n].style.display=e?"":"none"}},e.prototype.expandAll=function(){this.expandCollapse(!0)},e.prototype.collapseAll=function(){this.expandCollapse(!1)},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn()},e.prototype.renderGroupDropArea=function(){var e=this.parent.element.querySelector(".e-groupdroparea");e&&Ct(e),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")},e.prototype.updateGroupDropArea=function(e){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t,this.element.classList.remove("e-grouped")}else(this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&(1===this.groupSettings.columns.length||!this.isAppliedGroup&&!this.isAppliedUnGroup)||e)&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")},e.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},e.prototype.initializeGHeaderDrag=function(){new mi(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},e.prototype.initializeGHeaderDrop=function(){this.parent,new bi(this.element,{accept:".e-dragclone",drop:this.drop})},e.prototype.groupColumn=function(e){var t=this.parent,i=t.getColumnByField(e);g(i)||!1===i.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(e)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:i.headerText}):hl(t)?t.notify(Or,{instance:this,handler:this.groupColumn,arg1:e}):(i.visible=t.groupSettings.showGroupedColumn,this.colName=e,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(e),this.updateGroupDropArea(),this.isAppliedGroup=!1)},e.prototype.ungroupColumn=function(e){var t=this.parent,i=this.parent.enableColumnVirtualization?this.parent.columns.filter((function(t){return t.field===e}))[0]:t.getColumnByField(e);if(!(g(i)||!1===i.allowGrouping||this.groupSettings.columns.indexOf(e)<0))if(hl(t))t.notify(Or,{instance:this,handler:this.ungroupColumn,arg1:e});else{if(i.visible=!0,S()&&t.isServerRendered){var n=[];n[0]=i,this.parent.notify("setvisibility",n)}this.colName=i.field;var r=JSON.parse(JSON.stringify(this.groupSettings.columns));if(r.splice(r.indexOf(this.colName),1),this.sortedColumns.indexOf(e)<0)for(var o=0,s=t.sortSettings.columns.length;o<s;o++)if(e===t.sortSettings.columns[o].field){t.sortSettings.columns.splice(o,1);break}S()&&this.parent.isServerRendered&&(t.sortSettings.columns=t.sortSettings.columns),this.groupSettings.allowReordering&&(this.reorderingColumns=r),this.groupSettings.columns=r,t.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},e.prototype.updateModel=function(){this.parent;var e=JSON.parse(JSON.stringify(this.groupSettings.columns));e=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):e,this.sortRequired&&(-1===e.indexOf(this.colName)&&e.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=e,this.parent.dataBind()},e.prototype.onActionComplete=function(e){S()&&!this.parent.isJsComponent&&(e.rows=null);this.parent;"grouping"===e.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var t=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:"actionComplete"}:{requestType:"ungrouping",type:"actionComplete"};this.parent.trigger("actionComplete",u(e,t)),this.colName=null},e.prototype.groupAddSortingQuery=function(e){for(var t=0;t<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[t].field!==e;)t++;if(this.parent.sortSettings.columns.length===t){this.parent.sortSettings.columns.push({field:e,direction:"Ascending",isFromGroup:!0});S()&&this.parent.isServerRendered&&(this.parent.sortSettings.columns=this.parent.sortSettings.columns)}else this.parent.allowSorting||(this.parent.sortSettings.columns[t].direction="Ascending")},e.prototype.createElement=function(e){var t=this.parent,i="Ascending",n=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),r=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),o=this.parent.createElement("div",{attrs:{"ej-mappingname":e}}),s=this.parent.getColumnByField(e),a=t.getColumnHeaderByUid(s.uid);this.groupSettings.allowReordering&&o.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":"Drag the grouped column"}})),o.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:s.headerText,attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})),this.groupSettings.showToggleButton&&o.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"ungroup button"}})),a.querySelectorAll(".e-ascending,.e-descending").length&&(i=a.querySelector(".e-ascending")?"Ascending":"Descending"),o.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+i.toLowerCase()+" e-icon-"+i.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})),o.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:S()?this.l10n.getConstant("UnGroupButton"):this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":"ungroup the grouped column"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),r.appendChild(o);this.groupSettings.columns.indexOf(e);return this.groupSettings.allowReordering&&(n.appendChild(r),n.appendChild(this.createSeparator()),r=n),r},e.prototype.addColToGroupDrop=function(e){if((!this.groupSettings.allowReordering||!this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+e+"]"))&&!g(this.parent.getColumnByField(e))){var t=this.createElement(e);if(this.groupSettings.allowReordering){var i=this.element.querySelectorAll(".e-group-animator").length;t.setAttribute("index",i.toString())}this.element.appendChild(t)}},e.prototype.createSeparator=function(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"Separator for the grouped columns"},styles:this.groupSettings.showUngroupButton?"":"display:none"})},e.prototype.refreshToggleBtn=function(e){if(this.groupSettings.showToggleButton)for(var t=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),i=0,n=t.length;i<n;i++)if(!t[i].classList.contains("e-emptycell")&&!t[i].classList.contains("e-headerchkcelldiv")){var r=this.parent.getColumnByUid(t[i].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!r.showColumnMenu)&&(t[i].querySelectorAll(".e-grptogglebtn").length&&Ct(t[i].querySelectorAll(".e-grptogglebtn")[0]),e||t[i].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(r.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":"Group button"}})))}},e.prototype.removeColFromGroupDrop=function(e){if(!g(this.getGHeaderCell(e))){var t=this.getGHeaderCell(e);if(this.groupSettings.allowReordering)Ct(Ka(t,"e-group-animator"));else Ct(t);this.updateGroupDropArea()}this.isAppliedUnGroup=!1},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){var n=i[t];switch(n){case"columns":var r=void 0;if(this.contentRefresh){if(this.isAppliedUnGroup)r={requestType:"ungrouping",type:wr};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(var o=0;o<this.groupSettings.columns.length;o++){this.colName=this.groupSettings.columns[o],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),o<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[o])}}r={columnName:this.colName,requestType:e.properties[n].length?"grouping":"ungrouping",type:wr}}if(!this.groupSettings.showGroupedColumn){var s=e.oldProperties[n];for(o=0;o<s.length;o++)-1===e.properties[n].indexOf(s[o])&&(this.parent.getColumnByField(s[o]).visible=!0)}S()&&this.parent.isServerRendered&&this.parent.isCollapseStateEnabled()&&"grouping"===r.requestType&&this.parent.refreshHeader(),this.parent.notify(Er,r)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?this.element.style.display="":this.element.style.display="none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(Er,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}},e.prototype.updateGroupedColumn=function(e){for(var t=0;t<this.groupSettings.columns.length;t++)this.parent.getColumnByField(this.groupSettings.columns[t]).visible=e},e.prototype.updateButtonVisibility=function(e,t){for(var i=[].slice.call(this.element.querySelectorAll("."+t)),n=0;n<i.length;n++)i[n].style.display=e?"":"none"},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.isDestroyed||this.parent.refreshing||this.clearGrouping(),this.removeEventListener(),this.refreshToggleBtn(!0),Ct(this.element))},e.prototype.clearGrouping=function(){var e=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var t=0,i=e.length;t<i;t++)t===i-1&&(this.contentRefresh=!0),this.ungroupColumn(e[t]);this.contentRefresh=!0},e.prototype.getModuleName=function(){return"group"},e.prototype.refreshSortIcons=function(e){var t,i=this.parent,n=i.sortSettings.columns,r=i.groupSettings.columns,o=this.parent.getColumns().map((function(e){return e.field}));this.refreshToggleBtn();for(var s=0,a=n.length;s<a;s++)-1!==o.indexOf(n[s].field)&&(t=i.getColumnHeaderByField(n[s].field),!i.allowSorting&&(this.sortedColumns.indexOf(n[s].field)>-1||this.groupSettings.columns.indexOf(n[s].field)>-1)?(Et(t.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),n.length>1&&t.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(s+1).toString()}))):this.getGHeaderCell(n[s].field)&&this.getGHeaderCell(n[s].field).querySelectorAll(".e-groupsort").length&&("Ascending"===n[s].direction?Et(this.getGHeaderCell(n[s].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):Et(this.getGHeaderCell(n[s].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(s=0,a=r.length;s<a;s++)-1!==o.indexOf(r[s])&&i.getColumnHeaderByField(r[s]).setAttribute("aria-grouped","true")},e.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},e.prototype.onGroupAggregates=function(e){var t=this.iterateGroupAggregates(e),i=this.groupGenerator.generateRows(t,{}),n=this.parent.getRowsObject().filter((function(e){return!e.isDataRow})),r=i.filter((function(e){return!e.isDataRow}));this.parent.isReact&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]);for(var o=0;o<r.length;o++){var s=r[o],a={cells:s.cells.filter((function(e){return e.isDataCell})),data:s.data,dataUid:n[o]?n[o].uid:""};this.parent.notify("refresh-aggregate-cell",a)}},e.prototype.iterateGroupAggregates=function(e){var t=e instanceof Array?e:[],i=this.parent.getRowsObject(),n=this.parent.getCurrentViewRecords(),r=[],o=i.map((function(e){return"delete"===e.edit&&r.push(e.data),e.changes instanceof Object?e.changes:e.data})),s=this.parent.getPrimaryKeyFieldNames()[0];o=0===t.length?o:t;var a=n.map((function(e){var t,i=wn.getObject(s,e);return o.some((function(e){return t=e,i===wn.getObject(s,e)}))?t:e})),l=e;if((!l.type||"cancel"!==l.type)&&r.length>0)for(var h=0;h<r.length;h++){var p=a.indexOf(r[h]);a.splice(p,1)}for(var d,c,u=[],g=this.parent.aggregates,f=0;f<g.length;f++)for(var m=g[f],y=0;y<m.columns.length;y++){var v;v={type:m.columns[y].type.toString().toLowerCase(),field:m.columns[y].field},u.push(v)}for(var b=this.parent.groupSettings.columns,w=0;w<b.length;w++)c=d||a,d=wn.group(c,b[w],u,null,null);return d},e.prototype.updateExpand=function(e){for(var t=e.uid,i=e.isExpand,n=this.parent.getRowsObject(),r=0;r<n.length;r++){var o=n[r];if(o.uid===t||g(t)){o.isExpand=i;for(var s=function(e){var i=n[e],r=void 0;if(i.parentUid!==o.uid&&(r=n.filter((function(e){return e.uid===i.parentUid}))[0]),i.parentUid===o.uid?i.visible=o.isExpand:g(r)||i.parentUid!==r.uid||(r.isExpand&&!0===r.visible?i.visible=!0:r.isExpand&&!1===r.visible&&(i.visible=!1)),g(t))return"break"},a=r+1;a<n.length;a++){if("break"===s(a))break}}}this.parent.notify(xr,{rows:n,args:{isFrozen:!1,rows:n}})},e}(),Ow=function(){function e(e,t,i,n){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new fs,this.currentTarget=null,this.parent=e,this.sortSettings=t,this.sortedColumns=i,this.focus=n.getService("focus"),this.addEventListener()}return e.prototype.updateModel=function(){var e,t={field:this.columnName,direction:this.direction},i=this.parent.groupSettings.columns,n=!1;if(this.isMultiSort)(e=this.getSortedColsIndexByField(this.columnName))>-1&&this.sortSettings.columns.splice(e,1),this.sortSettings.columns.push(t),this.sortSettings.columns=this.sortSettings.columns;else if(i.length){for(var r=[],o=0,s=i.length;o<s;o++)if(e=this.getSortedColsIndexByField(i[o],r),this.columnName===i[o])n=!0,r.push(t);else{var a=this.getSortColumnFromField(i[o]);r.push({field:a.field,direction:a.direction,isFromGroup:a.isFromGroup})}n||r.push(t),this.sortSettings.columns=r}else this.sortSettings.columns=[t];this.parent.dataBind(),this.lastSortedCol=this.columnName},e.prototype.onActionComplete=function(e){S()&&!this.parent.isJsComponent&&(e.rows=null);var t=this.isRemove?{requestType:"sorting",type:"actionComplete"}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:"actionComplete"};this.isRemove=!1,this.parent.trigger("actionComplete",u(e,t))},e.prototype.sortColumn=function(e,t,i){var n=this.parent;if(!1===this.parent.getColumnByField(e).allowSorting||this.parent.isContextMenuOpen())this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:e});else if(n.allowMultiSorting||(i=n.allowMultiSorting),this.isActionPrevent())n.notify(Or,{instance:this,handler:this.sortColumn,arg1:e,arg2:t,arg3:i});else{this.backupSettings(),this.columnName=e,this.direction=t,this.isMultiSort=i,this.removeSortIcons();n.getColumnHeaderByField(e);this.updateSortedCols(e,i),this.updateModel()}},e.prototype.backupSettings=function(){this.lastSortedCols=Va(this.sortSettings.columns),this.lastCols=this.sortedColumns},e.prototype.restoreSettings=function(){this.isModelChanged=!1,this.isMultiSort=!0,this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0),this.sortedColumns=this.lastCols,this.isModelChanged=!0},e.prototype.updateSortedCols=function(e,t){if(!t)if(this.parent.allowGrouping)for(var i=0,n=this.sortedColumns.length;i<n;i++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[i])<0&&(this.sortedColumns.splice(i,1),n--,i--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(e)<0&&this.sortedColumns.push(e)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){if(this.contentRefresh){var t=this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:wr,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:wr,cancel:!1,target:this.currentTarget};this.parent.notify(Er,t)}this.refreshSortSettings(),this.removeSortIcons(),this.addSortIcons()}},e.prototype.refreshSortSettings=function(){this.sortedColumns.length=0;for(var e=this.sortSettings.columns,t=0;t<e.length;t++)e[t].isFromGroup||this.sortedColumns.push(e[t].field)},e.prototype.clearSorting=function(){var e=Ya(this.sortSettings.columns);if(this.isActionPrevent())this.parent.notify(Or,{instance:this,handler:this.clearSorting});else{for(var t=0,i=e.length;t<i;t++)this.removeSortColumn(e[t].field);S()&&!this.parent.isJsComponent&&(this.sortSettings.columns=this.sortSettings.columns)}},e.prototype.isActionPrevent=function(){return hl(this.parent)},e.prototype.removeSortColumn=function(e){var t=this.parent,i=this.sortSettings.columns;if(!(0===i.length&&this.sortedColumns.indexOf(e)<0))if(this.isActionPrevent())this.parent.notify(Or,{instance:this,handler:this.removeSortColumn,arg1:e});else{this.backupSettings(),this.removeSortIcons();for(var n=0,r=i.length;n<r;n++)if(i[n].field===e){if(t.allowGrouping&&t.groupSettings.columns.indexOf(i[n].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(i[n].field),1),i.splice(n,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(Er,{requestType:"sorting",type:wr,target:this.currentTarget});break}this.addSortIcons()}},e.prototype.getSortedColsIndexByField=function(e,t){for(var i=t||this.sortSettings.columns,n=0,r=i.length;n<r;n++)if(i[n].field===e)return n;return-1},e.prototype.getModuleName=function(){return"sort"},e.prototype.initialEnd=function(){this.parent.off(xr,this.initialEnd);if((!S()||!this.parent.isServerRendered)&&this.parent.getColumns().length&&this.sortSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1;for(var t=0,i=e.sortSettings.columns.slice();t<i.length;t++){var n=i[t];this.sortedColumns.indexOf(n.field)>-1&&this.sortColumn(n.field,n.direction,!0)}this.isMultiSort=!1,this.contentRefresh=!0}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(xr,this.initialEnd,this),this.parent.on("sorting-complete",this.onActionComplete,this),this.parent.on(Dr,this.onPropertyChanged,this),this.parent.on(Ir,this.clickHandler,this),this.parent.on(Rr,this.refreshSortIcons,this),this.parent.on(Pr,this.keyPressed,this),this.parent.on("cancel-Begin",this.cancelBeginEvent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("sorting-complete",this.onActionComplete),this.parent.off(Dr,this.onPropertyChanged),this.parent.off(Ir,this.clickHandler),this.parent.off(Rr,this.refreshSortIcons),this.parent.off(Pr,this.keyPressed),this.parent.off("cancel-Begin",this.cancelBeginEvent))},e.prototype.destroy=function(){this.isModelChanged=!1;var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),this.parent.refreshing||this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())},e.prototype.cancelBeginEvent=function(e){"sorting"===e.requestType&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)},e.prototype.clickHandler=function(e){this.currentTarget=null,this.popUpClickHandler(e);var t=Tt(e.target,".e-headercell");if(t&&!e.target.classList.contains("e-grptogglebtn")&&!t.classList.contains("e-resized")&&!e.target.classList.contains("e-rhandler")&&!e.target.classList.contains("e-columnmenu")&&!e.target.classList.contains("e-filtermenudiv")&&!Ka(e.target,"e-stackedheadercell")){var i=this.parent.getColumnByUid(t.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));t.querySelectorAll(".e-ascending").length;"checkbox"!==i.type&&(this.initiateSort(t,e,i),me.isDevice&&this.showPopUp(e))}t&&t.classList.remove("e-resized")},e.prototype.keyPressed=function(e){var t=e.target;if(!this.parent.isEdit&&("enter"===e.action||"ctrlEnter"===e.action||"shiftEnter"===e.action)&&Tt(t,".e-headercell")){var i=this.focus.getFocusedElement();if(g(i)||!i.classList.contains("e-headercell")||!i.querySelector(".e-headercelldiv"))return;var n=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));this.initiateSort(i,e,n)}},e.prototype.initiateSort=function(e,t,i){var n=this.parent,r=i.field;this.currentTarget=t.target;var o=e.querySelectorAll(".e-ascending").length?"Descending":"Ascending";t.shiftKey||this.sortSettings.allowUnsort&&e.querySelectorAll(".e-descending").length&&!(n.groupSettings.columns.indexOf(r)>-1)?(this.removeSortColumn(r),S()&&!this.parent.isJsComponent&&(this.sortSettings.columns=this.sortSettings.columns)):this.sortColumn(r,o,t.ctrlKey||this.enableSortMultiTouch||-1!==navigator.userAgent.indexOf("Mac OS")&&t.metaKey)},e.prototype.showPopUp=function(e){var t=Tt(e.target,".e-headercell");!this.parent.allowMultiSorting||g(t)&&!this.parent.isContextMenuOpen()||Ga(this.parent.element.querySelector(".e-gridpopup"),e,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))},e.prototype.popUpClickHandler=function(e){var t=e.target;Tt(t,".e-headercell")||e.target.classList.contains("e-rowcell")||Tt(t,".e-gridpopup")?t.classList.contains("e-sortdirect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},e.prototype.addSortIcons=function(){for(var e,t,i=this.parent,n=this.sortSettings.columns,r=this.parent.getColumns().map((function(e){return e.field})),o=0,s=n.length;o<s;o++)e=i.getColumnHeaderByField(n[o].field),-1===r.indexOf(n[o].field)||g(e)||(this.aria.setSort(e,n[o].direction),this.isMultiSort&&n.length>1&&e.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(o+1).toString()}),e.querySelector(".e-headertext")),t=e.querySelector(".e-sortfilterdiv"),"Ascending"===n[o].direction?Et(t,["e-ascending","e-icon-ascending"],[]):Et(t,["e-descending","e-icon-descending"],[]))},e.prototype.removeSortIcons=function(e){for(var t,i=this.parent,n=this.sortSettings.columns,r=this.parent.getColumns().map((function(e){return e.field})),o=e||0,s=g(e)?n.length:e+1;o<s;o++)g(t=i.getColumnHeaderByField(n[o].field))||i.allowGrouping&&i.groupSettings.columns.indexOf(n[o].field)>-1&&!t.querySelector(".e-sortfilterdiv")||-1!==r.indexOf(n[o].field)&&(this.aria.setSort(t,"none"),Et(t.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),t.querySelector(".e-sortnumber")&&t.querySelector(".e-headercelldiv").removeChild(t.querySelector(".e-sortnumber")))},e.prototype.getSortColumnFromField=function(e){for(var t=0,i=this.sortSettings.columns.length;t<i;t++)if(this.sortSettings.columns[t].field===e)return this.sortSettings.columns[t];return!1},e.prototype.updateAriaAttr=function(){for(var e=this.parent.getColumns().map((function(e){return e.field})),t=0,i=this.sortedColumns;t<i.length;t++){var n=i[t];if(-1!==e.indexOf(n)){var r=this.parent.getColumnHeaderByField(n);this.aria.setSort(r,this.getSortColumnFromField(n).direction)}}},e.prototype.refreshSortIcons=function(e){void 0===e&&(e={args:{isFrozen:!1}}),e.args.isFrozen||(this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr())},e}(),Aw=function(){function e(e){this.streamWriter=e}return Object.defineProperty(e.prototype,"document",{get:function(){return this.pdfDocument},set:function(e){this.pdfDocument=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.streamWriter.buffer.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.streamWriter.buffer.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stream",{get:function(){return this.streamWriter},enumerable:!0,configurable:!0}),e.prototype.write=function(e){var t=e;this.streamWriter.write(t)},e}();function Bw(e){return"[object String]"===Object.prototype.toString.call(e)?"$s"+e:"$o"+e.toString()}var Fw,Nw=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||Bw}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(void 0!==t)return t.value},e.prototype.setValue=function(e,t){var i="$"+this.toStr(e);this.table[i];this.nElements++,this.table[i]={key:e,value:t}},e.prototype.remove=function(e){var t="$"+this.toStr(e),i=this.table[t];return delete this.table[t],this.nElements--,i.value},e.prototype.keys=function(){for(var e=[],t=Object.keys(this.table),i=0;i<t.length;i++){var n=this.table[t[i]];e.push(n.key)}return e},e.prototype.values=function(){for(var e=[],t=Object.keys(this.table),i=0;i<t.length;i++){var n=this.table[t[i]];e.push(n.value)}return e},e.prototype.containsKey=function(e){return!(void 0===this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e}();!function(e){e[e.None=0]="None",e[e.Registered=1]="Registered"}(Fw||(Fw={}));var Hw=function(){function e(){this.objectCollections=[],this.mainObjectCollection=new Nw,this.primitiveObjectCollection=new Nw}return Object.defineProperty(e.prototype,"count",{get:function(){return this.objectCollections.length},enumerable:!0,configurable:!0}),e.prototype.items=function(e){return this.objectCollections[e]},Object.defineProperty(e.prototype,"outIsNew",{get:function(){return this.isNew},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=new Vw(e);this.objectCollections.push(t),this.primitiveObjectCollection.containsKey(e)||this.primitiveObjectCollection.setValue(e,this.objectCollections.length-1),e.position=this.index=this.objectCollections.length-1,e.status=Fw.Registered},e.prototype.lookFor=function(e){var t=-1;if(-1!==e.position)return e.position;if(this.primitiveObjectCollection.containsKey(e)&&this.count===this.primitiveObjectCollection.size())t=this.primitiveObjectCollection.getValue(e);else for(var i=this.count-1;i>=0;i--){if(this.objectCollections[i].object===e){t=i;break}}return t},e.prototype.getReference=function(e,t){return this.index=this.lookFor(e),this.isNew=!1,{reference:this.objectCollections[this.index].reference,wasNew:t}},e.prototype.trySetReference=function(e,t,i){return!0,this.index=this.lookFor(e),this.objectCollections[this.index].setReference(t),!0},e.prototype.destroy=function(){for(var e=0,t=this.objectCollections;e<t.length;e++){var i=t[e];void 0!==i&&(i.pdfObject.position=-1,i.pdfObject.isSaving=void 0,i.pdfObject.objectCollectionIndex=void 0,i.pdfObject.position=void 0)}this.objectCollections=[],this.mainObjectCollection=new Nw,this.primitiveObjectCollection=new Nw},e}(),Vw=function(){function e(e,t){this.pdfObject=e,this.pdfReference=t}return Object.defineProperty(e.prototype,"object",{get:function(){return this.pdfObject},set:function(e){this.pdfObject=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reference",{get:function(){return this.pdfReference},enumerable:!0,configurable:!0}),e.prototype.setReference=function(e){this.pdfReference=e},e}(),jw=function(){function e(e){this.emitBOM=!0,this.encodingType="Ansi",this.initBOM(e)}return Object.defineProperty(e.prototype,"includeBom",{get:function(){return this.emitBOM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.encodingType},set:function(e){this.encodingType=e},enumerable:!0,configurable:!0}),e.prototype.initBOM=function(e){this.emitBOM=null==e||e},e.prototype.getByteCount=function(e){return zw(e,"string"),""===e?this.utf8Len(e.charCodeAt(0)):(null!==this.type&&void 0!==this.type||(this.type="Ansi"),this.getByteCountInternal(e,0,e.length))},e.prototype.utf8Len=function(e){return e<=127?1:e<=2047?2:e<=65535?3:e<=2097151?4:0},e.prototype.isHighSurrogate=function(e){return e>=55296&&e<=56319},e.prototype.toCodepoint=function(e,t){return((e=(1023&e)<<10)|1023&t)+65536},e.prototype.getByteCountInternal=function(e,t,i){var n=0;if("Utf8"===this.encodingType||"Unicode"===this.encodingType){for(var r="Utf8"===this.encodingType,o=0;o<i;o++){var s=e.charCodeAt(r?t:t++);if(this.isHighSurrogate(s))if(r){var a=s,l=e.charCodeAt(++t);n+=this.utf8Len(this.toCodepoint(a,l))}else n+=4,++o;else n+=r?this.utf8Len(s):2;r&&t++}return n}return n=i},e.prototype.getBytes=function(e,t,i){if(zw(e,"string"),zw(t,"charIndex"),zw(i,"charCount"),t<0||i<0)throw new RangeError("Argument Out Of Range Exception: charIndex or charCount is less than zero");if(e.length-t<i)throw new RangeError("Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string");if(""===e)return new ArrayBuffer(0);null!==this.type&&void 0!==this.type||(this.type="Ansi");var n=this.getByteCountInternal(e,t,i);switch(this.type){case"Utf8":return this.getBytesOfUtf8Encoding(n,e,t,i);case"Unicode":return this.getBytesOfUnicodeEncoding(n,e,t,i);default:return this.getBytesOfAnsiEncoding(n,e,t,i)}},e.prototype.getString=function(e,t,i){if(zw(e,"bytes"),zw(t,"index"),zw(i,"count"),t<0||i<0)throw new RangeError("Argument Out Of Range Exception: index or count is less than zero");if(e.byteLength-t<i)throw new RangeError("Argument Out Of Range Exception: index and count do not denote a valid range in bytes");if(0===e.byteLength||0===i)return"";null!==this.type&&void 0!==this.type||(this.type="Ansi");var n="",r=new Uint8Array(e);switch(this.type){case"Utf8":return this.getStringOfUtf8Encoding(r,t,i);case"Unicode":var o=new Uint16Array(e);return n=this.getStringofUnicodeEncoding(o,t,i);default:for(var s=t,a=0;a<i;a++){var l=r[s];n+=String.fromCharCode(l),s++}return n}},e.prototype.getBytesOfAnsiEncoding=function(e,t,i,n){for(var r=new ArrayBuffer(e),o=new Uint8Array(r),s=0,a=0;a<n;a++){var l=t.charCodeAt(i++);o[s]=l<2048?l:63,s++}return r},e.prototype.getBytesOfUtf8Encoding=function(e,t,i,n){for(var r=new ArrayBuffer(e),o=new Uint8Array(r),s=i,a=0,l=0;l<n;l++){var h=t.charCodeAt(s);h<=127?o[a]=h:h<2048?(o[a]=192|h>>6,o[++a]=128|63&h):h<55296||h>=57344?(o[a]=224|h>>12,o[++a]=128|h>>6&63,o[++a]=128|63&h):(o[a]=239,o[++a]=191,o[++a]=189),++a,++s}return r},e.prototype.getBytesOfUnicodeEncoding=function(e,t,i,n){for(var r=new ArrayBuffer(e),o=new Uint16Array(r),s=0;s<n;s++){var a=t.charCodeAt(s);o[s]=a}return r},e.prototype.getStringOfUtf8Encoding=function(e,t,i){for(var n=0,r=t,o="";n<i;n++){for(var s=e[r++];r>e.length;)return o;s>127&&(s>191&&s<224&&r<i?s=(31&s)<<6|63&e[r]:s>223&&s<240&&r<e.byteLength?s=(15&s)<<12|(63&e[r])<<6|63&e[++r]:s>239&&s<248&&r<e.byteLength&&(s=(7&s)<<18|(63&e[r])<<12|(63&e[++r])<<6|63&e[++r]),++r),o+=String.fromCharCode(s)}return o},e.prototype.getStringofUnicodeEncoding=function(e,t,i){if(i>e.length)throw new RangeError("ArgumentOutOfRange_Count");for(var n=new Uint16Array(i),r=0;r<i&&r<e.length;r++)n[r]=e[t++];return String.fromCharCode.apply(null,n)},e.prototype.destroy=function(){this.emitBOM=void 0,this.encodingType=void 0},e}();function zw(e,t){if(null==e)throw new Error("ArgumentException: "+t+" cannot be null or undefined")}var qw,Ww=function(){function e(){}return e.save=function(e,t){if(null==e||""===e)throw new Error("ArgumentException: fileName cannot be undefined, null or empty");var i=e.substring(e.lastIndexOf(".")+1,e.length),n=this.getMimeType(i);if(""!==n&&(t=new Blob([t],{type:n})),this.isMicrosoftBrowser)navigator.msSaveBlob(t,e);else{var r=document.createElementNS("http://www.w3.org/1999/xhtml","a");this.saveInternal(e,i,t,r,"download"in r)}},e.saveInternal=function(e,t,i,n,r){if(r){n.download=e;var o=window.URL.createObjectURL(i);n.href=o;var s=document.createEvent("MouseEvent");s.initEvent("click",!0,!0),n.dispatchEvent(s),setTimeout((function(){window.URL.revokeObjectURL(o),o=void 0}))}else if("docx"!==t&&"xlsx"!==t){var a=window.URL.createObjectURL(i);window.open(a,"_blank")||(window.location.href=a)}else{var l=new FileReader;l.onloadend=function(){window.open(l.result,"_blank")||(window.location.href=l.result)},l.readAsDataURL(i)}},e.getMimeType=function(e){var t="";switch(e){case"html":t="text/html";break;case"pdf":t="application/pdf";break;case"docx":t="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case"xlsx":t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"txt":t="text/plain"}return t},e}(),_w=function(){function e(e){this.bufferBlob=new Blob([""]),this.bufferText="",this.init(e),Ww.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this.flush(),this.bufferBlob},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encoding",{get:function(){return this.enc},enumerable:!0,configurable:!0}),e.prototype.init=function(e){null==e?(this.enc=new jw(!1),this.enc.type="Utf8"):(this.enc=e,this.setBomByte())},e.prototype.setBomByte=function(){if(this.encoding.includeBom)switch(this.encoding.type){case"Unicode":var e=new ArrayBuffer(2),t=new Uint8Array(e);t[0]=255,t[1]=254,this.bufferBlob=new Blob([e]);break;case"Utf8":var i=new ArrayBuffer(3),n=new Uint8Array(i);n[0]=239,n[1]=187,n[2]=191,this.bufferBlob=new Blob([i]);break;default:this.bufferBlob=new Blob([""])}},e.prototype.save=function(e){""!==this.bufferText&&this.flush(),Ww.save(e,this.buffer)},e.prototype.write=function(e){if(void 0===this.encoding)throw new Error("Object Disposed Exception: current writer is disposed");zw(e,"string"),this.bufferText+=e,this.bufferText.length>=10240&&this.flush()},e.prototype.flush=function(){if(void 0!==this.bufferText&&null!==this.bufferText&&0!==this.bufferText.length){var e=this.encoding.getBytes(this.bufferText,0,this.bufferText.length);this.bufferText="",this.bufferBlob=new Blob([this.bufferBlob,e])}},e.prototype.writeLine=function(e){if(void 0===this.encoding)throw new Error("Object Disposed Exception: current writer is disposed");zw(e,"string"),this.bufferText=this.bufferText+e+"\r\n",this.bufferText.length>=10240&&this.flush()},e.prototype.destroy=function(){this.bufferBlob=void 0,this.bufferText=void 0,this.enc instanceof jw&&this.enc.destroy(),this.enc=void 0},e}(),Gw=function(){function e(e){this.isStreamCopied=!1,e instanceof Zx&&(this.document=e)}return Object.defineProperty(e.prototype,"pdfObjects",{get:function(){return this.objects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossTable",{get:function(){return this.pdfCrossTable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSavingObj",{get:function(){return this.currentSavingObject},set:function(e){this.currentSavingObject=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"catalog",{get:function(){return this.pdfCatalog},set:function(e){this.pdfCatalog=e},enumerable:!0,configurable:!0}),e.prototype.setMainObjectCollection=function(e){this.objects=e},e.prototype.setCrossTable=function(e){this.pdfCrossTable=e},e.prototype.setCatalog=function(e){this.pdfCatalog=e},e.prototype.save=function(e){var t=this,i=new jw(!0),n=new _w(i);if(void 0===e){var r=new jw(!0),o=new _w(r);return new Promise((function(e,i){var n={};n.blobData=new Blob([t.document.docSave(o,!0)],{type:"application/pdf"}),e(n)}))}this.document.docSave(n,e,!0)},e.prototype.clone=function(){return this.document},e}(),Uw=function(){function e(e){this.stringStartMark="/",this.internalValue="",this.isSaving6=!1,this.position6=-1,this.internalValue=this.normalizeValue(e)}return Object.defineProperty(e.prototype,"status",{get:function(){return this.status6},set:function(e){this.status6=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.isSaving6},set:function(e){this.isSaving6=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index6},set:function(e){this.index6=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.position6},set:function(e){this.position6=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.internalValue},set:function(e){var t=e;null!==e&&e.length>0?(t=e,this.internalValue=this.normalizeValue(t)):this.internalValue=t},enumerable:!0,configurable:!0}),e.prototype.save=function(e){e.write(this.toString())},e.prototype.toString=function(){return this.stringStartMark+this.escapeString(this.value)},e.prototype.clone=function(t){var i=new e;return i.value=this.internalValue,i},e.prototype.escapeString=function(t){for(var i="",n=0,r=t.length;n<r;n++){var o=t[n];e.delimiters.indexOf(o);i+=o}return i},e.prototype.normalizeValue=function(e,t){return e},e.delimiters="()<>[]{}/%}",e.replacements=[" ","\t","\n","\r"],e}(),Kw=function(){function e(){this.forTest="test",this.forTest=e.obj}return e.obj="obj",e.endObj="endobj",e.r="R",e.whiteSpace=" ",e.slash="/",e.newLine="\r\n",e.stream="stream",e.endStream="endstream",e.xref="xref",e.f="f",e.n="n",e.trailer="trailer",e.startxref="startxref",e.eof="%%EOF",e.header="%PDF-1.5",e.beginText="BT",e.endText="ET",e.beginPath="m",e.appendLineSegment="l",e.stroke="S",e.fill="f",e.fillEvenOdd="f*",e.fillStroke="B",e.fillStrokeEvenOdd="B*",e.appendbeziercurve="c",e.appendRectangle="re",e.saveState="q",e.restoreState="Q",e.paintXObject="Do",e.modifyCtm="cm",e.modifyTM="Tm",e.setLineWidth="w",e.setLineCapStyle="J",e.setLineJoinStyle="j",e.setDashPattern="d",e.setFlatnessTolerance="i",e.closePath="h",e.closeStrokePath="s",e.closeFillStrokePath="b",e.setCharacterSpace="Tc",e.setWordSpace="Tw",e.setHorizontalScaling="Tz",e.setTextLeading="TL",e.setFont="Tf",e.setRenderingMode="Tr",e.setTextRise="Ts",e.setTextScaling="Tz",e.setCoords="Td",e.goToNextLine="T*",e.setText="Tj",e.setTextWithFormatting="TJ",e.setTextOnNewLine="'",e.selectcolorspaceforstroking="CS",e.selectcolorspacefornonstroking="cs",e.setrbgcolorforstroking="RG",e.setrbgcolorfornonstroking="rg",e.setcmykcolorforstroking="K",e.setcmykcolorfornonstroking="k",e.setgraycolorforstroking="G",e.setgraycolorfornonstroking="g",e.clipPath="W",e.clipPathEvenOdd="W*",e.endPath="n",e.setGraphicsState="gs",e.comment="%",e.evenOdd="*",e.setMiterLimit="M",e.setColorAndPattern="scn",e.setColorAndPatternStroking="SCN",e}(),Yw=function(){this.pages="Pages",this.kids="Kids",this.count="Count",this.resources="Resources",this.type="Type",this.size="Size",this.mediaBox="MediaBox",this.parent="Parent",this.root="Root",this.decodeParms="DecodeParms",this.filter="Filter",this.font="Font",this.type1="Type1",this.baseFont="BaseFont",this.encoding="Encoding",this.subtype="Subtype",this.contents="Contents",this.procset="ProcSet",this.colorSpace="ColorSpace",this.extGState="ExtGState",this.pattern="Pattern",this.xObject="XObject",this.length="Length",this.width="Width",this.height="Height",this.bitsPerComponent="BitsPerComponent",this.image="Image",this.dctdecode="DCTDecode",this.columns="Columns",this.blackIs1="BlackIs1",this.k="K",this.s="S",this.predictor="Predictor",this.deviceRgb="DeviceRGB",this.next="Next",this.action="Action",this.link="Link",this.a="A",this.annot="Annot",this.p="P",this.c="C",this.rect="Rect",this.uri="URI",this.annots="Annots",this.ca="ca",this.CA="CA",this.xyz="XYZ",this.fit="Fit",this.dest="Dest",this.BM="BM",this.flatedecode="FlateDecode",this.rotate="Rotate",this.bBox="BBox",this.form="Form",this.w="W",this.cIDFontType2="CIDFontType2",this.cIDToGIDMap="CIDToGIDMap",this.identity="Identity",this.dw="DW",this.fontDescriptor="FontDescriptor",this.cIDSystemInfo="CIDSystemInfo",this.fontName="FontName",this.flags="Flags",this.fontBBox="FontBBox",this.missingWidth="MissingWidth",this.stemV="StemV",this.italicAngle="ItalicAngle",this.capHeight="CapHeight",this.ascent="Ascent",this.descent="Descent",this.leading="Leading",this.avgWidth="AvgWidth",this.fontFile2="FontFile2",this.maxWidth="MaxWidth",this.xHeight="XHeight",this.stemH="StemH",this.registry="Registry",this.ordering="Ordering",this.supplement="Supplement",this.type0="Type0",this.identityH="Identity-H",this.toUnicode="ToUnicode",this.descendantFonts="DescendantFonts",this.background="Background",this.shading="Shading",this.matrix="Matrix",this.antiAlias="AntiAlias",this.function="Function",this.extend="Extend",this.shadingType="ShadingType",this.coords="Coords",this.domain="Domain",this.range="Range",this.functionType="FunctionType",this.bitsPerSample="BitsPerSample",this.patternType="PatternType",this.paintType="PaintType",this.tilingType="TilingType",this.xStep="XStep",this.yStep="YStep"},Xw=function(){function e(e){if(this.position7=-1,this.primitiveItems=new Nw,this.prefix="<<",this.suffix=">>",this.resources=[],this.object=null,this.archive=!0,this.isFont=!1,void 0===e)this.primitiveItems=new Nw,this.encrypt=!0,this.dictionaryProperties=new Yw;else{this.primitiveItems=new Nw;for(var t=e.items.keys(),i=e.items.values(),n=0;n<e.items.size();n++)this.primitiveItems.setValue(t[n],i[n]);this.status=e.status,this.freezeChanges(this),this.encrypt=!0,this.dictionaryProperties=new Yw}}return Object.defineProperty(e.prototype,"items",{get:function(){return this.primitiveItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.status7},set:function(e){this.status7=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.isSaving7},set:function(e){this.isSaving7=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index7},set:function(e){this.index7=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return this.object},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.position7},set:function(e){this.position7=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Count",{get:function(){return this.primitiveItems.size()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dictionary",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.getArchive=function(){return this.archive},e.prototype.setArchive=function(e){this.archive=e},e.prototype.setEncrypt=function(e){this.encrypt=e,this.modify()},e.prototype.getEncrypt=function(){return this.encrypt},e.prototype.freezeChanges=function(e){this.bChanged=!1},e.prototype.clone=function(t){return new e},e.prototype.modify=function(){this.bChanged=!0},e.prototype.remove=function(e){"string"!=typeof e?(this.primitiveItems.remove(e.value),this.modify()):this.remove(new Uw(e))},e.prototype.containsKey=function(e){return this.primitiveItems.containsKey(e.toString())},e.prototype.onBeginSave=function(){this.beginSave.sender.beginSave()},e.prototype.onFontDictionaryBeginSave=function(){this.fontDictionaryBeginSave.sender.fontDictionaryBeginSave()},e.prototype.onDescendantFontBeginSave=function(){this.descendantFontBeginSave.sender.descendantFontBeginSave()},e.prototype.onTemplateBeginSave=function(){this.pageBeginDrawTemplate.sender.pageBeginSave()},e.prototype.onBeginAnnotationSave=function(){this.annotationBeginSave.sender.beginSave()},e.prototype.onSectionBeginSave=function(e){var t=this.sectionBeginSave;t.sender.beginSave(t.state,e)},e.prototype.save=function(e,t){void 0===t?this.save(e,!0):(e.write(this.prefix),void 0!==this.beginSave&&this.onBeginSave(),void 0!==this.descendantFontBeginSave&&this.onDescendantFontBeginSave(),void 0!==this.fontDictionaryBeginSave&&this.onFontDictionaryBeginSave(),void 0!==this.annotationBeginSave&&this.onBeginAnnotationSave(),void 0!==this.sectionBeginSave&&this.onSectionBeginSave(e),void 0!==this.pageBeginDrawTemplate&&this.onTemplateBeginSave(),this.Count>0&&this.saveItems(e),e.write(this.suffix),e.write(Kw.newLine))},e.prototype.saveItems=function(e){e.write(Kw.newLine);for(var t=this.primitiveItems.keys(),i=this.primitiveItems.values(),n=0;n<t.length;n++){var r=t[n];new Uw(r).save(e),e.write(Kw.whiteSpace),i[n].save(e),e.write(Kw.newLine)}},e}(),Qw=function(e){this.sender=e},Jw=function(e){this.sender=e},Zw=function(e){this.sender=e},$w=function(e){this.sender=e},eC=function(e,t){this.sender=e,this.state=t},tC=function(e){this.sender=e},iC=function(){function e(e){this.position5=-1,this.value=e}return Object.defineProperty(e.prototype,"intValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInteger",{get:function(){return this.integer},set:function(e){this.integer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.status5},set:function(e){this.status5=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.isSaving5},set:function(e){this.isSaving5=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index5},set:function(e){this.index5=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.position5},set:function(e){this.position5=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.save=function(e){e.write(this.intValue.toString())},e.prototype.clone=function(t){return new e(this.value)},e.floatToString=function(e){var t=e.toFixed(2);return"0.00"===t&&(t=".00"),t},e.min=function(e,t,i){var n=Math.min(e,t);return Math.min(i,n)},e}(),nC=function(){function e(t){if(this.startMark="[",this.endMark="]",this.position9=-1,this.clonedObject9=null,this.isFont=!1,void 0===t)this.internalElements=[];else if(void 0===t||t instanceof e){var i=t;this.internalElements=[];for(r=0;r<i.elements.length;r++)this.internalElements.push(i.elements[r])}else for(var n=t,r=0;r<n.length;r++){var o=new iC(n[r]);this.add(o)}}return e.prototype.items=function(e){return this.internalElements[e]},Object.defineProperty(e.prototype,"count",{get:function(){return this.internalElements.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.status9},set:function(e){this.status9=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.isSaving9},set:function(e){this.isSaving9=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return this.clonedObject9},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.position9},set:function(e){this.position9=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index9},set:function(e){this.index9=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CrossTable",{get:function(){return this.pdfCrossTable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this.internalElements},enumerable:!0,configurable:!0}),e.prototype.add=function(e){void 0===this.internalElements&&(this.internalElements=[]),this.internalElements.push(e),this.markedChange()},e.prototype.markedChange=function(){this.bChanged=!0},e.prototype.contains=function(e){for(var t=0;t<this.internalElements.length;t++){var i=this.internalElements[t],n=e;if(null!=i&&void 0!==i&&null!=n&&void 0!==n&&i.value===n.value)return!0}return!1},e.prototype.getItems=function(e){return this.internalElements[e]},e.prototype.save=function(e){e.write(this.startMark);for(var t=0,i=this.count;t<i;t++)this.getItems(t).save(e),t+1!==i&&e.write(Kw.whiteSpace);e.write(this.endMark)},e.prototype.clone=function(t){this.clonedObject9=null;for(var i=new e,n=0;n<this.internalElements.length;n++){var r=this.internalElements[n];i.add(r.clone(t))}return i.pdfCrossTable=t,this.clonedObject9=i,i},e.fromRectangle=function(t){return new e([t.x,t.y,t.width,t.height])},e.prototype.insert=function(e,t){if(e<this.internalElements.length&&e>0){for(var i=[],n=0;n<e;n++)i.push(this.internalElements[n]);i.push(t);for(n=e;n<this.internalElements.length;n++)i.push(this.internalElements[n]);this.internalElements=i}else this.internalElements.push(t);this.markChanged()},e.prototype.indexOf=function(e){return this.internalElements.indexOf(e)},e.prototype.remove=function(e){var t=this.internalElements.indexOf(e);this.internalElements[t]=null,this.markChanged()},e.prototype.removeAt=function(e){if(this.internalElements.length>e){for(var t=[],i=0;i<e;i++)t.push(this.internalElements[i]);for(i=e+1;i<this.internalElements.length;i++)t.push(this.internalElements[i]);this.internalElements=t}this.markChanged()},e.prototype.clear=function(){this.internalElements=[],this.markChanged()},e.prototype.markChanged=function(){this.bChanged=!0},e}(),rC=new Int16Array(286),oC=new Uint8Array(286),sC=new Int16Array(30),aC=new Uint8Array(30),lC=function(){function e(t){this.pendingBuffer=new Uint8Array(65536),this.pendingBufLength=0,this.pendingBufCache=0,this.pendingBufBitsInCache=0,this.bufferPosition=0,this.extraBits=0,this.currentHash=0,this.matchStart=0,this.matchLength=0,this.matchPrevAvail=!1,this.blockStart=0,this.stringStart=0,this.lookAhead=0,this.totalBytesIn=0,this.inputOffset=0,this.inputEnd=0,this.windowSize=32768,this.windowMask=this.windowSize-1,this.hashSize=32768,this.hashMask=this.hashSize-1,this.hashShift=Math.floor(17/3),this.maxDist=this.windowSize-262,this.checkSum=1,this.noWrap=!1,e.isHuffmanTreeInitiated||(e.initHuffmanTree(),e.isHuffmanTreeInitiated=!0),this.treeLiteral=new hC(this,286,257,15),this.treeDistances=new hC(this,30,1,15),this.treeCodeLengths=new hC(this,19,4,7),this.arrDistances=new Uint16Array(16384),this.arrLiterals=new Uint8Array(16384),this.stream=[],this.dataWindow=new Uint8Array(2*this.windowSize),this.hashHead=new Int16Array(this.hashSize),this.hashPrevious=new Int16Array(this.windowSize),this.blockStart=this.stringStart=1,this.noWrap=t,t||this.writeZLibHeader()}return Object.defineProperty(e.prototype,"compressedData",{get:function(){return this.stream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getCompressedString",{get:function(){var e="";if(void 0!==this.stream)for(var t=0;t<this.stream.length;t++)e+=String.fromCharCode.apply(null,this.stream[t]);return e},enumerable:!0,configurable:!0}),e.prototype.write=function(e,t,i){if(null==e)throw new Error("ArgumentException: data cannot null or undefined");var n=t+i;if(0>t||t>n||n>e.length)throw new Error("ArgumentOutOfRangeException: Offset or length is incorrect");if("string"==typeof e){var r=new jw(!1);r.type="Utf8",n=t+(e=new Uint8Array(r.getBytes(e,0,e.length))).length}for(this.inputBuffer=e,this.inputOffset=t,this.inputEnd=n,this.noWrap||(this.checkSum=pC.checksumUpdate(this.checkSum,this.inputBuffer,this.inputOffset,n));this.inputEnd!==this.inputOffset||0!==this.pendingBufLength;)this.pendingBufferFlush(),this.compressData(!1)},e.prototype.writeZLibHeader=function(){var e=30720;e|=64,e+=31-e%31,this.pendingBufferWriteShortBytes(e)},e.prototype.pendingBufferWriteShortBytes=function(e){this.pendingBuffer[this.pendingBufLength++]=e>>8,this.pendingBuffer[this.pendingBufLength++]=e},e.prototype.compressData=function(e){var t;do{this.fillWindow();var i=e&&this.inputEnd===this.inputOffset;t=this.compressSlow(i,e)}while(0===this.pendingBufLength&&t);return t},e.prototype.compressSlow=function(e,t){if(this.lookAhead<262&&!e)return!1;for(;this.lookAhead>=262||e;){if(0===this.lookAhead)return this.lookAheadCompleted(t);this.stringStart>=2*this.windowSize-262&&this.slideWindow();var i=this.matchStart,n=this.matchLength;if(this.lookAhead>=3&&this.discardMatch(),n>=3&&this.matchLength<=n?n=this.matchPreviousBest(i,n):this.matchPreviousAvailable(),this.bufferPosition>=16384)return this.huffmanIsFull(t)}return!0},e.prototype.discardMatch=function(){var e=this.insertString();0!==e&&this.stringStart-e<=this.maxDist&&this.findLongestMatch(e)&&this.matchLength<=5&&3===this.matchLength&&this.stringStart-this.matchStart>4096&&(this.matchLength=2)},e.prototype.matchPreviousAvailable=function(){this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!0,this.stringStart++,this.lookAhead--},e.prototype.matchPreviousBest=function(e,t){this.huffmanTallyDist(this.stringStart-1-e,t),t-=2;do{this.stringStart++,this.lookAhead--,this.lookAhead>=3&&this.insertString()}while(--t>0);return this.stringStart++,this.lookAhead--,this.matchPrevAvail=!1,this.matchLength=2,t},e.prototype.lookAheadCompleted=function(e){return this.matchPrevAvail&&this.huffmanTallyLit(255&this.dataWindow[this.stringStart-1]),this.matchPrevAvail=!1,this.huffmanFlushBlock(this.dataWindow,this.blockStart,this.stringStart-this.blockStart,e),this.blockStart=this.stringStart,!1},e.prototype.huffmanIsFull=function(e){var t=this.stringStart-this.blockStart;this.matchPrevAvail&&t--;var i=e&&0===this.lookAhead&&!this.matchPrevAvail;return this.huffmanFlushBlock(this.dataWindow,this.blockStart,t,i),this.blockStart+=t,!i},e.prototype.fillWindow=function(){for(this.stringStart>=this.windowSize+this.maxDist&&this.slideWindow();this.lookAhead<262&&this.inputOffset<this.inputEnd;){var e=2*this.windowSize-this.lookAhead-this.stringStart;e>this.inputEnd-this.inputOffset&&(e=this.inputEnd-this.inputOffset),this.dataWindow.set(this.inputBuffer.subarray(this.inputOffset,this.inputOffset+e),this.stringStart+this.lookAhead),this.inputOffset+=e,this.totalBytesIn+=e,this.lookAhead+=e}this.lookAhead>=3&&this.updateHash()},e.prototype.slideWindow=function(){this.dataWindow.set(this.dataWindow.subarray(this.windowSize,this.windowSize+this.windowSize),0),this.matchStart-=this.windowSize,this.stringStart-=this.windowSize,this.blockStart-=this.windowSize;for(var e=0;e<this.hashSize;++e){var t=65535&this.hashHead[e];this.hashHead[e]=t>=this.windowSize?t-this.windowSize:0}for(e=0;e<this.windowSize;e++){t=65535&this.hashPrevious[e];this.hashPrevious[e]=t>=this.windowSize?t-this.windowSize:0}},e.prototype.insertString=function(){var e,t=(this.currentHash<<this.hashShift^this.dataWindow[this.stringStart+2])&this.hashMask;return this.hashPrevious[this.stringStart&this.windowMask]=e=this.hashHead[t],this.hashHead[t]=this.stringStart,this.currentHash=t,65535&e},e.prototype.findLongestMatch=function(e){var t,i=4096,n=258,r=this.stringStart,o=this.stringStart+this.matchLength,s=Math.max(this.matchLength,2),a=Math.max(this.stringStart-this.maxDist,0),l=this.stringStart+258-1,h=this.dataWindow[o-1],p=this.dataWindow[o],d=this.dataWindow;s>=32&&(i>>=2),n>this.lookAhead&&(n=this.lookAhead);do{if(d[e+s]===p&&d[e+s-1]===h&&d[e]===d[r]&&d[e+1]===d[r+1]){for(t=e+2,r+=2;d[++r]===d[++t]&&d[++r]===d[++t]&&d[++r]===d[++t]&&d[++r]===d[++t]&&d[++r]===d[++t]&&d[++r]===d[++t]&&d[++r]===d[++t]&&d[++r]===d[++t]&&r<l;);if(r>o){if(this.matchStart=e,o=r,(s=r-this.stringStart)>=n)break;h=d[o-1],p=d[o]}r=this.stringStart}}while((e=65535&this.hashPrevious[e&this.windowMask])>a&&0!=--i);return this.matchLength=Math.min(s,this.lookAhead),this.matchLength>=3},e.prototype.updateHash=function(){this.currentHash=this.dataWindow[this.stringStart]<<this.hashShift^this.dataWindow[this.stringStart+1]},e.prototype.huffmanTallyLit=function(e){return this.arrDistances[this.bufferPosition]=0,this.arrLiterals[this.bufferPosition++]=e,this.treeLiteral.codeFrequencies[e]++,this.bufferPosition>=16384},e.prototype.huffmanTallyDist=function(e,t){this.arrDistances[this.bufferPosition]=e,this.arrLiterals[this.bufferPosition++]=t-3;var i=this.huffmanLengthCode(t-3);this.treeLiteral.codeFrequencies[i]++,i>=265&&i<285&&(this.extraBits+=Math.floor((i-261)/4));var n=this.huffmanDistanceCode(e-1);return this.treeDistances.codeFrequencies[n]++,n>=4&&(this.extraBits+=Math.floor(n/2-1)),this.bufferPosition>=16384},e.prototype.huffmanFlushBlock=function(e,t,i,n){this.treeLiteral.codeFrequencies[256]++,this.treeLiteral.buildTree(),this.treeDistances.buildTree(),this.treeLiteral.calculateBLFreq(this.treeCodeLengths),this.treeDistances.calculateBLFreq(this.treeCodeLengths),this.treeCodeLengths.buildTree();for(var r=4,o=18;o>r;o--)this.treeCodeLengths.codeLengths[hC.huffCodeLengthOrders[o]]>0&&(r=o+1);var s=14+3*r+this.treeCodeLengths.getEncodedLength()+this.treeLiteral.getEncodedLength()+this.treeDistances.getEncodedLength()+this.extraBits,a=this.extraBits;for(o=0;o<286;o++)a+=this.treeLiteral.codeFrequencies[o]*oC[o];for(o=0;o<30;o++)a+=this.treeDistances.codeFrequencies[o]*aC[o];s>=a&&(s=a),t>=0&&i+4<s>>3?this.huffmanFlushStoredBlock(e,t,i,n):s==a?(this.pendingBufferWriteBits(2+(n?1:0),3),this.treeLiteral.setStaticCodes(rC,oC),this.treeDistances.setStaticCodes(sC,aC),this.huffmanCompressBlock(),this.huffmanReset()):(this.pendingBufferWriteBits(4+(n?1:0),3),this.huffmanSendAllTrees(r),this.huffmanCompressBlock(),this.huffmanReset())},e.prototype.huffmanFlushStoredBlock=function(e,t,i,n){this.pendingBufferWriteBits(0+(n?1:0),3),this.pendingBufferAlignToByte(),this.pendingBufferWriteShort(i),this.pendingBufferWriteShort(~i),this.pendingBufferWriteByteBlock(e,t,i),this.huffmanReset()},e.prototype.huffmanLengthCode=function(e){if(255===e)return 285;for(var t=257;e>=8;)t+=4,e>>=1;return t+e},e.prototype.huffmanDistanceCode=function(e){for(var t=0;e>=4;)t+=2,e>>=1;return t+e},e.prototype.huffmanSendAllTrees=function(e){this.treeCodeLengths.buildCodes(),this.treeLiteral.buildCodes(),this.treeDistances.buildCodes(),this.pendingBufferWriteBits(this.treeLiteral.treeLength-257,5),this.pendingBufferWriteBits(this.treeDistances.treeLength-1,5),this.pendingBufferWriteBits(e-4,4);for(var t=0;t<e;t++)this.pendingBufferWriteBits(this.treeCodeLengths.codeLengths[hC.huffCodeLengthOrders[t]],3);this.treeLiteral.writeTree(this.treeCodeLengths),this.treeDistances.writeTree(this.treeCodeLengths)},e.prototype.huffmanReset=function(){this.bufferPosition=0,this.extraBits=0,this.treeLiteral.reset(),this.treeDistances.reset(),this.treeCodeLengths.reset()},e.prototype.huffmanCompressBlock=function(){for(var e=0;e<this.bufferPosition;e++){var t=255&this.arrLiterals[e],i=this.arrDistances[e];if(0!=i--){var n=this.huffmanLengthCode(t);this.treeLiteral.writeCodeToStream(n);var r=Math.floor((n-261)/4);r>0&&r<=5&&this.pendingBufferWriteBits(t&(1<<r)-1,r);var o=this.huffmanDistanceCode(i);this.treeDistances.writeCodeToStream(o),(r=Math.floor(o/2-1))>0&&this.pendingBufferWriteBits(i&(1<<r)-1,r)}else this.treeLiteral.writeCodeToStream(t)}this.treeLiteral.writeCodeToStream(256)},e.prototype.pendingBufferWriteBits=function(e,t){var i=new Uint32Array(1);i[0]=this.pendingBufCache|e<<this.pendingBufBitsInCache,this.pendingBufCache=i[0],this.pendingBufBitsInCache+=t,this.pendingBufferFlushBits()},e.prototype.pendingBufferFlush=function(e){if(this.pendingBufferFlushBits(),this.pendingBufLength>0){var t=new Uint8Array(this.pendingBufLength);t.set(this.pendingBuffer.subarray(0,this.pendingBufLength),0),this.stream.push(t)}this.pendingBufLength=0},e.prototype.pendingBufferFlushBits=function(){for(var e=0;this.pendingBufBitsInCache>=8&&this.pendingBufLength<65536;)this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache,this.pendingBufCache>>=8,this.pendingBufBitsInCache-=8,e++;return e},e.prototype.pendingBufferWriteByteBlock=function(e,t,i){var n=e.subarray(t,t+i);this.pendingBuffer.set(n,this.pendingBufLength),this.pendingBufLength+=i},e.prototype.pendingBufferWriteShort=function(e){this.pendingBuffer[this.pendingBufLength++]=e,this.pendingBuffer[this.pendingBufLength++]=e>>8},e.prototype.pendingBufferAlignToByte=function(){this.pendingBufBitsInCache>0&&(this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache),this.pendingBufCache=0,this.pendingBufBitsInCache=0},e.initHuffmanTree=function(){for(var e=0;e<144;)rC[e]=hC.bitReverse(48+e<<8),oC[e++]=8;for(;e<256;)rC[e]=hC.bitReverse(256+e<<7),oC[e++]=9;for(;e<280;)rC[e]=hC.bitReverse(-256+e<<9),oC[e++]=7;for(;e<286;)rC[e]=hC.bitReverse(-88+e<<8),oC[e++]=8;for(e=0;e<30;e++)sC[e]=hC.bitReverse(e<<11),aC[e]=5},e.prototype.close=function(){do{this.pendingBufferFlush(!0),this.compressData(!0)||(this.pendingBufferFlush(!0),this.pendingBufferAlignToByte(),this.noWrap||(this.pendingBufferWriteShortBytes(this.checkSum>>16),this.pendingBufferWriteShortBytes(65535&this.checkSum)),this.pendingBufferFlush(!0))}while(this.inputEnd!==this.inputOffset||0!==this.pendingBufLength)},e.prototype.destroy=function(){this.stream=[],this.stream=void 0,this.pendingBuffer=void 0,this.treeLiteral=void 0,this.treeDistances=void 0,this.treeCodeLengths=void 0,this.arrLiterals=void 0,this.arrDistances=void 0,this.hashHead=void 0,this.hashPrevious=void 0,this.dataWindow=void 0,this.inputBuffer=void 0,this.pendingBufLength=void 0,this.pendingBufCache=void 0,this.pendingBufBitsInCache=void 0,this.bufferPosition=void 0,this.extraBits=void 0,this.currentHash=void 0,this.matchStart=void 0,this.matchLength=void 0,this.matchPrevAvail=void 0,this.blockStart=void 0,this.stringStart=void 0,this.lookAhead=void 0,this.totalBytesIn=void 0,this.inputOffset=void 0,this.inputEnd=void 0,this.windowSize=void 0,this.windowMask=void 0,this.hashSize=void 0,this.hashMask=void 0,this.hashShift=void 0,this.maxDist=void 0,this.checkSum=void 0,this.noWrap=void 0},e.isHuffmanTreeInitiated=!1,e}(),hC=function(){function e(e,t,i,n){this.writer=e,this.codeMinCount=i,this.maxLength=n,this.codeFrequency=new Uint16Array(t),this.lengthCount=new Int32Array(n)}return Object.defineProperty(e.prototype,"treeLength",{get:function(){return this.codeCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeLengths",{get:function(){return this.codeLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeFrequencies",{get:function(){return this.codeFrequency},enumerable:!0,configurable:!0}),e.prototype.setStaticCodes=function(e,t){var i=new Int16Array(e.length);i.set(e,0),this.codes=i;var n=new Uint8Array(t.length);n.set(t,0),this.codeLength=n},e.prototype.reset=function(){for(var e=0;e<this.codeFrequency.length;e++)this.codeFrequency[e]=0;this.codes=void 0,this.codeLength=void 0},e.prototype.writeCodeToStream=function(e){this.writer.pendingBufferWriteBits(65535&this.codes[e],this.codeLength[e])},e.prototype.buildCodes=function(){var t=new Int32Array(this.maxLength);this.codes=new Int16Array(this.codeCount);for(var i=0,n=0;n<this.maxLength;n++)t[n]=i,i+=this.lengthCount[n]<<15-n;for(var r=0;r<this.codeCount;r++){var o=this.codeLength[r];o>0&&(this.codes[r]=e.bitReverse(t[o-1]),t[o-1]+=1<<16-o)}},e.bitReverse=function(t){return e.reverseBits[15&t]<<12|e.reverseBits[t>>4&15]<<8|e.reverseBits[t>>8&15]<<4|e.reverseBits[t>>12]},e.prototype.getEncodedLength=function(){for(var e=0,t=0;t<this.codeFrequency.length;t++)e+=this.codeFrequency[t]*this.codeLength[t];return e},e.prototype.calculateBLFreq=function(e){for(var t,i,n,r=-1,o=0;o<this.codeCount;){n=1;var s=this.codeLength[o];for(0===s?(t=138,i=3):(t=6,i=3,r!==s&&(e.codeFrequency[s]++,n=0)),r=s,o++;o<this.codeCount&&r===this.codeLength[o]&&(o++,!(++n>=t)););n<i?e.codeFrequency[r]+=n:0!==r?e.codeFrequency[16]++:n<=10?e.codeFrequency[17]++:e.codeFrequency[18]++}},e.prototype.writeTree=function(e){for(var t,i,n,r=-1,o=0;o<this.codeCount;){n=1;var s=this.codeLength[o];for(0===s?(t=138,i=3):(t=6,i=3,r!==s&&(e.writeCodeToStream(s),n=0)),r=s,o++;o<this.codeCount&&r===this.codeLength[o]&&(o++,!(++n>=t)););if(n<i)for(;n-- >0;)e.writeCodeToStream(r);else 0!==r?(e.writeCodeToStream(16),this.writer.pendingBufferWriteBits(n-3,2)):n<=10?(e.writeCodeToStream(17),this.writer.pendingBufferWriteBits(n-3,3)):(e.writeCodeToStream(18),this.writer.pendingBufferWriteBits(n-11,7))}},e.prototype.buildTree=function(){for(var e=this.codeFrequency.length,t=new Int32Array(e),i=0,n=0,r=0;r<e;r++){var o=this.codeFrequency[r];if(0!==o){for(var s=i++,a=0;s>0&&this.codeFrequency[t[a=Math.floor((s-1)/2)]]>o;)t[s]=t[a],s=a;t[s]=r,n=r}}for(;i<2;)t[i++]=n<2?++n:0;this.codeCount=Math.max(n+1,this.codeMinCount);for(var l=i,h=new Int32Array(4*i-2),p=new Int32Array(2*i-1),d=0;d<i;d++){var c=t[d],u=2*d;h[u]=c,h[u+1]=-1,p[d]=this.codeFrequency[c]<<8,t[d]=d}this.constructHuffmanTree(t,i,p,l,h),this.buildLength(h)},e.prototype.constructHuffmanTree=function(e,t,i,n,r){do{for(var o=e[0],s=e[--t],a=i[s],l=0,h=1;h<t;)h+1<t&&i[e[h]]>i[e[h+1]]&&h++,e[l]=e[h],h=2*(l=h)+1;for(;(h=l)>0&&i[e[l=Math.floor((h-1)/2)]]>a;)e[h]=e[l];e[h]=s;var p=e[0];r[2*(s=n++)]=o,r[2*s+1]=p;var d=Math.min(255&i[o],255&i[p]);for(i[s]=a=i[o]+i[p]-d+1,l=0,h=1;h<t;)h+1<t&&i[e[h]]>i[e[h+1]]&&h++,e[l]=e[h],h=2*(l=h)+1;for(;(h=l)>0&&i[e[l=Math.floor((h-1)/2)]]>a;)e[h]=e[l];e[h]=s}while(t>1)},e.prototype.buildLength=function(e){this.codeLength=new Uint8Array(this.codeFrequency.length);for(var t=Math.floor(e.length/2),i=Math.floor((t+1)/2),n=0,r=0;r<this.maxLength;r++)this.lengthCount[r]=0;if(0!==(n=this.calculateOptimalCodeLength(e,n,t))){var o=this.maxLength-1;do{for(;0===this.lengthCount[--o];);do{this.lengthCount[o]--,this.lengthCount[++o]++,n-=1<<this.maxLength-1-o}while(n>0&&o<this.maxLength-1)}while(n>0);this.recreateTree(e,n,i)}},e.prototype.recreateTree=function(e,t,i){this.lengthCount[this.maxLength-1]+=t,this.lengthCount[this.maxLength-2]-=t;for(var n=2*i,r=this.maxLength;0!==r;r--)for(var o=this.lengthCount[r-1];o>0;){var s=2*e[n++];-1===e[s+1]&&(this.codeLength[e[s]]=r,o--)}},e.prototype.calculateOptimalCodeLength=function(e,t,i){var n=new Int32Array(i);n[i-1]=0;for(var r=i-1;r>=0;r--){var o=2*r+1;if(-1!==e[o]){(s=n[r]+1)>this.maxLength&&(s=this.maxLength,t++),n[e[o-1]]=n[e[o]]=s}else{var s=n[r];this.lengthCount[s-1]++,this.codeLength[e[o-1]]=n[r]}}return t},e.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],e.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],e}(),pC=function(){function e(){}return e.checksumUpdate=function(t,i,n,r){var o=new Uint32Array(1);o[0]=t;for(var s=o[0],a=o[0]=65535&s,l=o[0]=s>>e.checkSumBitOffset;r>0;){var h=Math.min(r,e.checksumIterationCount);for(r-=h;--h>=0;)l+=a+=o[0]=255&i[n++];a%=e.checksumBase,l%=e.checksumBase}return s=l<<e.checkSumBitOffset|a},e.checkSumBitOffset=16,e.checksumBase=65521,e.checksumIterationCount=3800,e}(),dC=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cC=function(e){function t(t,i){var n=e.call(this,t)||this;return n.dicPrefix="stream",n.dicSuffix="endstream",n.clonedObject2=null,n.bCompress=!0,n.isImageStream=!1,n.isFontStream=!1,void 0!==t||void 0!==i?(n.dataStream2=[],n.dataStream2=i,n.bCompress2=!1):(n.dataStream2=[],n.bCompress2=!0),n}return dC(t,e),Object.defineProperty(t.prototype,"internalStream",{get:function(){return this.dataStream2},set:function(e){this.dataStream2=[],this.dataStream2=e,this.modify()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isImage",{get:function(){return this.isImageStream},set:function(e){this.isImageStream=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFont",{get:function(){return this.isFontStream},set:function(e){this.isFontStream=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"compress",{get:function(){return this.bCompress},set:function(e){this.bCompress=e,this.modify()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.dataStream2},set:function(e){this.dataStream2=[],this.dataStream2=e,this.modify()},enumerable:!0,configurable:!0}),t.prototype.clearStream=function(){this.internalStream=[],this.items.containsKey(this.dictionaryProperties.filter)&&this.remove(this.dictionaryProperties.filter),this.bCompress=!0,this.modify()},t.prototype.write=function(e){if(null==e)throw new Error("ArgumentNullException:text");if(e.length<=0)throw new Error("ArgumentException: Can not write an empty string, text");this.dataStream2.push(e),this.modify()},t.prototype.writeBytes=function(e){if(null===e)throw new Error("ArgumentNullException:data");if(e.length<=0)throw new Error("ArgumentException: Can not write an empty bytes, data");for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);this.dataStream2.push(t),this.modify()},t.prototype.onCmapBeginSave=function(){this.cmapBeginSave.sender.cmapBeginSave()},t.prototype.onFontProgramBeginSave=function(){this.fontProgramBeginSave.sender.fontProgramBeginSave()},t.prototype.compressContent=function(e,t){if(this.bCompress){for(var i=[],n=0;n<e.length;n++)i.push(e.charCodeAt(n));var r=new Uint8Array(i),o=new lC;o.write(r,0,r.length),o.close(),e=o.getCompressedString,this.addFilter(this.dictionaryProperties.flatedecode)}return e},t.prototype.addFilter=function(e){var t=this.items.getValue(this.dictionaryProperties.filter);t instanceof vC&&(t=t.object);var i=t,n=t;null!=n&&((i=new nC).insert(0,n),this.items.setValue(this.dictionaryProperties.filter,i)),n=new Uw(e),null==i?this.items.setValue(this.dictionaryProperties.filter,n):i.insert(0,n)},t.prototype.save=function(t){void 0!==this.cmapBeginSave&&this.onCmapBeginSave(),void 0!==this.fontProgramBeginSave&&this.onFontProgramBeginSave();for(var i="",n=0;n<this.data.length;n++)i+=this.data[n];i.length>1&&!this.isImage&&!this.isFont&&(i="q\r\n"+i+"Q\r\n");var r=(i=this.compressContent(i,t)).length;this.items.setValue(this.dictionaryProperties.length,new iC(r)),e.prototype.save.call(this,t,!1),t.write(this.dicPrefix),t.write(Kw.newLine),i.length>0&&t.write(i),t.write(Kw.newLine),t.write(this.dicSuffix),t.write(Kw.newLine)},t.bytesToString=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},t}(Xw),uC=function(e){this.sender=e},gC=function(e){this.sender=e};!function(e){var t;!function(e){e[e.None=0]="None",e[e.Ascii=1]="Ascii",e[e.Unicode=2]="Unicode"}(e.ForceEncoding||(e.ForceEncoding={})),function(e){e[e.StringValue=0]="StringValue",e[e.ByteBuffer=1]="ByteBuffer"}(t||(t={}))}(qw||(qw={}));var fC,mC=function(){function e(e){if(this.bHex=!1,this.position1=-1,this.clonedObject1=null,this.bDecrypted=!1,this.isParentDecrypted=!1,this.isPacked=!1,this.isFormField=!1,this.isColorSpace=!1,this.isHexString=!0,void 0===e)this.bHex=!1;else if(!(e.length>0&&"0xfeff"===e[0])){this.stringValue=e,this.data=[];for(var t=0;t<e.length;++t)this.data.push(e.charCodeAt(t))}}return Object.defineProperty(e.prototype,"hex",{get:function(){return this.bHex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.stringValue},set:function(e){this.stringValue=e,this.data=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.status1},set:function(e){this.status1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.isSaving1},set:function(e){this.isSaving1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index1},set:function(e){this.index1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return this.clonedObject1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.position1},set:function(e){this.position1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CrossTable",{get:function(){return this.crossTable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"converted",{get:function(){return this.bConverted},set:function(e){this.bConverted=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encode",{get:function(){return this.bForceEncoding},set:function(e){this.bForceEncoding=e},enumerable:!0,configurable:!0}),e.bytesToHex=function(e){if(null==e)return"";return""},e.prototype.save=function(t){if(null===t)throw new Error("ArgumentNullException : writer");void 0!==this.encode&&this.encode===qw.ForceEncoding.Ascii?t.write(this.pdfEncode()):t.write(e.stringMark[0]+this.value+e.stringMark[1])},e.prototype.pdfEncode=function(){var t="";if(void 0!==this.encode&&this.encode===qw.ForceEncoding.Ascii){for(var i=this.escapeSymbols(this.value),n=0;n<i.length;n++)t+=String.fromCharCode(i[n]);t=e.stringMark[0]+t+e.stringMark[1]}else t=this.value;return t},e.prototype.escapeSymbols=function(e){for(var t=[],i=0;i<e.length;i++){var n=e.charCodeAt(i);switch(n){case 40:case 41:t.push(92),t.push(n);break;case 13:t.push(92),t.push(114);break;case 92:t.push(92),t.push(n);break;default:t.push(n)}}return t},e.prototype.clone=function(t){if(null!==this.clonedObject1&&this.clonedObject1.CrossTable===t)return this.clonedObject1;this.clonedObject1=null;var i=new e(this.stringValue);return i.bHex=this.bHex,i.crossTable=t,i.isColorSpace=this.isColorSpace,this.clonedObject1=i,i},e.toUnicodeArray=function(e,t){if(null==e)throw new Error("Argument Null Exception : value");for(var i=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);i.push(r/256>>>0),i.push(255&r)}return i},e.byteToString=function(e){if(null==e)throw new Error("Argument Null Exception : stream");for(var t="",i=0;i<e.length;++i)t+=String.fromCharCode(e[i]);return t},e.stringMark="()",e.hexStringMark="<>",e.hexFormatPattern="{0:X2}",e}(),yC=function(){function e(e,t){this.index3=-1,this.position3=-1,this.objNumber=0,this.genNumber=0,"number"==typeof e&&"number"==typeof t?(this.objNumber=e,this.genNumber=t):(this.objNumber=Number(e),this.genNumber=Number(t))}return Object.defineProperty(e.prototype,"status",{get:function(){return this.status3},set:function(e){this.status3=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.isSaving3},set:function(e){this.isSaving3=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index3},set:function(e){this.index3=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.position3},set:function(e){this.position3=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.save=function(e){e.write(this.toString())},e.prototype.toString=function(){return this.objNumber.toString()+" "+this.genNumber.toString()+" R"},e.prototype.clone=function(e){return null},e}(),vC=function(){function e(e,t){this.index4=-1,this.position4=-1,this.objectIndex=-1,this.dictionaryProperties=new Yw,this.initialize(e)}return Object.defineProperty(e.prototype,"status",{get:function(){return this.status4},set:function(e){this.status4=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.isSaving4},set:function(e){this.isSaving4=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index4},set:function(e){this.index4=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.position4},set:function(e){this.position4=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"object",{get:function(){return this.primitiveObject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reference",{get:function(){return this.pdfReference},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.objectIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.primitiveObject},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){if(e instanceof nC||e instanceof Xw||e instanceof Uw||e instanceof iC||e instanceof cC||e instanceof yC||e instanceof mC)this.primitiveObject=e;else{var t=e;this.initialize(t.element)}},e.prototype.save=function(e){e.position;var t=e.document.crossTable;this.object.isSaving=!0;t.getReference(this.object).save(e)},e.prototype.clone=function(e){return null},e}();!function(e){e[e.Free=0]="Free",e[e.Normal=1]="Normal",e[e.Packed=2]="Packed"}(fC||(fC={}));var bC,wC,CC,SC,xC,kC,TC=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),DC=function(e){function t(){var t=e.call(this)||this;return t.sections=null,t.tempDictionaryProperties=new Yw,t.items.setValue((new Yw).type,new Uw("Catalog")),t}return TC(t,e),Object.defineProperty(t.prototype,"pages",{get:function(){return this.sections},set:function(e){e.element;this.sections=e,this.items.setValue(this.tempDictionaryProperties.pages,new vC(e))},enumerable:!0,configurable:!0}),t}(Xw),EC=function(){function e(){this.objects=new Nw,this.maxGenNumIndex=0,this.objectCount=0,this.dictionaryProperties=new Yw}return Object.defineProperty(e.prototype,"isMerging",{get:function(){return this.merging},set:function(e){this.merging=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trailer",{get:function(){return null==this.internalTrailer&&(this.internalTrailer=new cC),this.internalTrailer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return this.pdfDocument},set:function(e){this.pdfDocument=e,this.items=this.pdfDocument.pdfObjects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfObjects",{get:function(){return this.items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollection",{get:function(){return this.pdfDocument.pdfObjects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.objectCount},set:function(e){this.objectCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextObjNumber",{get:function(){return this.count=this.count+1,this.count},enumerable:!0,configurable:!0}),e.prototype.save=function(e,t){this.saveHead(e);this.mappedReferences=null,this.objects.clear(),this.markTrailerReferences(),this.saveObjects(e);var i=this.count,n=e.position;this.registerObject(0,new yC(0,-1),!0);e.write(Kw.xref),e.write(Kw.newLine),this.saveSections(e),this.saveTrailer(e,this.count,0),this.saveTheEndess(e,n),this.count=i;for(var r=0;r<this.objectCollection.count;++r){this.objectCollection.items(r).object.isSaving=!1}if(void 0===t)return e.stream.buffer;e.stream.save(t)},e.prototype.saveTheEndess=function(e,t){e.write(Kw.newLine+Kw.startxref+Kw.newLine),e.write(t.toString()+Kw.newLine),e.write(Kw.eof+Kw.newLine)},e.prototype.saveTrailer=function(e,t,i){e.write(Kw.trailer+Kw.newLine);var n=this.trailer;n.items.setValue(this.dictionaryProperties.size,new iC(this.objectCount+1)),(n=new Xw(n)).setEncrypt(!1),n.save(e)},e.prototype.saveSections=function(e){var t=0,i=0;do{i=this.prepareSubsection(t),this.saveSubsection(e,t,i),t+=i}while(0!==i)},e.prototype.saveSubsection=function(e,t,i){if(!(i<=0||t>=this.count)){e.write(t+" "+(i+1)+Kw.newLine);for(var n=t;n<=t+i;++n){var r=this.objects.getValue(n),o="";o=r.type===fC.Free?this.getItem(r.offset,65535,!0):this.getItem(r.offset,r.generation,!1),e.write(o)}}},e.prototype.getItem=function(e,t,i){var n="",r=10-e.toString().length;t<=0&&(t=0);for(var o=5-t.toString().length<=0?0:5-t.toString().length,s=0;s<r;s++)n+="0";n=n+e.toString()+" ";for(s=0;s<o;s++)n+="0";return n=(n=n+t.toString()+" ")+(i?Kw.f:Kw.n)+Kw.newLine},e.prototype.prepareSubsection=function(e){for(var t,i=0,n=this.count,r=0;r<this.document.pdfObjects.count;r++)this.document.pdfObjects.items(r).reference.toString().split(" ");if(e>=n)return i;for(e=t=e;t<n;++t)++i;return i},e.prototype.markTrailerReferences=function(){this.trailer.items.keys(),this.trailer.items.values()},e.prototype.saveHead=function(e){var t=this.generateFileVersion(e.document);e.write("%PDF-"+t),e.write(Kw.newLine)},e.prototype.generateFileVersion=function(e){return"1."+4..toString()},e.prototype.getReference=function(e,t){if(void 0===t){return this.getReference(e,!1)}return this.getSubReference(e,t)},e.prototype.getSubReference=function(e,t){var i,n=!1,r=null;if(this.items.count>0&&e.objectCollectionIndex>0&&this.items.count>e.objectCollectionIndex-1){var o=this.document.pdfObjects.getReference(e,i);r=o.reference,i=o.wasNew}if(i=null==r&&e.status!==Fw.Registered,null==r){var s=this.nextObjNumber;r=new yC(s,0);if(i){this.document.pdfObjects.add(e),this.document.pdfObjects.trySetReference(e,r,void 0);var a=this.document.pdfObjects.count-1,l=this.document.pdfObjects.objectCollections[a].reference.objNumber,h=this.document.pdfObjects.objectCollections[this.document.pdfObjects.count-1];this.document.pdfObjects.mainObjectCollection.setValue(l,h),e.position=-1}else this.document.pdfObjects.trySetReference(e,r,void 0);e.objectCollectionIndex=r.objNumber,e.status=Fw.None,n=!0}return n||this.bForceNew,r},e.prototype.saveObjects=function(e){for(var t=this.objectCollection,i=0;i<t.count;++i){var n=t.items(i).object;n.isSaving=!0,this.saveIndirectObject(n,e)}},e.prototype.saveIndirectObject=function(e,t){var i=this.getReference(e);e instanceof DC&&this.trailer.items.setValue(this.dictionaryProperties.root,i),this.pdfDocument.currentSavingObj=i;e.getArchive();this.registerObject(t.position,i),this.doSaveObject(e,i,t)},e.prototype.doSaveObject=function(e,t,i){i.length;i.write(t.objNumber.toString()),i.write(Kw.whiteSpace),i.write(t.genNumber.toString()),i.write(Kw.whiteSpace),i.write(Kw.obj),i.write(Kw.newLine),e.save(i);i.stream;i.write(Kw.endObj),i.write(Kw.newLine)},e.prototype.registerObject=function(e,t,i){"boolean"==typeof i?(this.objects.setValue(t.objNumber,new RC(e,t,i)),this.maxGenNumIndex=Math.max(this.maxGenNumIndex,t.genNumber)):void 0===i&&(this.objects.setValue(t.objNumber,new RC(e,t)),this.maxGenNumIndex=Math.max(this.maxGenNumIndex,t.genNumber))},e.dereference=function(e){return null!=e&&(e=e.object),e},e}(),RC=function(){function e(e,t,i){var n=e;this.offsetNumber=n;var r=t;this.generation=r.genNumber,this.object=r.objNumber,this.type=void 0===i?fC.Normal:fC.Free}return Object.defineProperty(e.prototype,"objectNumber",{get:function(){return this.object},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this.offsetNumber},enumerable:!0,configurable:!0}),e}(),PC=function(e,t){void 0===e?(this.x=0,this.y=0):(this.x=null!==e?e:0,this.y=null!==t?t:0)},IC=function(e,t){void 0===t?(this.height=0,this.width=0):(this.height=null!==t?t:0,this.width=null!==e?e:0)},MC=function(e,t,i,n){if(typeof e==typeof e&&void 0===e)this.x=0,this.y=0,this.height=0,this.width=0;else if(e instanceof PC&&t instanceof IC&&void 0===i){var r=e;this.x=r.x,this.y=r.y;var o=t;this.height=o.height,this.width=o.width}else{var s=e,a=t,l=i,h=n;this.x=s,this.y=a,this.height=h,this.width=l}},LC=function(){function e(e,t,i,n){this.left=e,this.top=t,this.right=i,this.bottom=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this.right-this.left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new PC(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return new IC(this.width,this.height)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.topLeft+"x"+this.size},e}(),OC=function(){function e(){}return e.letter=new IC(612,792),e.note=new IC(540,720),e.legal=new IC(612,1008),e.a0=new IC(2380,3368),e.a1=new IC(1684,2380),e.a2=new IC(1190,1684),e.a3=new IC(842,1190),e.a4=new IC(595,842),e.a5=new IC(421,595),e.a6=new IC(297,421),e.a7=new IC(210,297),e.a8=new IC(148,210),e.a9=new IC(105,148),e.a10=new IC(74,105),e.b0=new IC(2836,4008),e.b1=new IC(2004,2836),e.b2=new IC(1418,2004),e.b3=new IC(1002,1418),e.b4=new IC(709,1002),e.b5=new IC(501,709),e.archE=new IC(2592,3456),e.archD=new IC(1728,2592),e.archC=new IC(1296,1728),e.archB=new IC(864,1296),e.archA=new IC(648,864),e.flsa=new IC(612,936),e.halfLetter=new IC(396,612),e.letter11x17=new IC(792,1224),e.ledger=new IC(1224,792),e}();!function(e){e[e.Portrait=0]="Portrait",e[e.Landscape=1]="Landscape"}(bC||(bC={})),function(e){e[e.RotateAngle0=0]="RotateAngle0",e[e.RotateAngle90=1]="RotateAngle90",e[e.RotateAngle180=2]="RotateAngle180",e[e.RotateAngle270=3]="RotateAngle270"}(wC||(wC={})),function(e){e[e.None=0]="None",e[e.Numeric=1]="Numeric",e[e.LowerLatin=2]="LowerLatin",e[e.LowerRoman=3]="LowerRoman",e[e.UpperLatin=4]="UpperLatin",e[e.UpperRoman=5]="UpperRoman"}(CC||(CC={})),function(e){e[e.None=0]="None",e[e.Bottom=1]="Bottom",e[e.Top=2]="Top",e[e.Left=3]="Left",e[e.Right=4]="Right",e[e.Fill=5]="Fill"}(SC||(SC={})),function(e){e[e.None=0]="None",e[e.TopLeft=1]="TopLeft",e[e.TopCenter=2]="TopCenter",e[e.TopRight=3]="TopRight",e[e.MiddleLeft=4]="MiddleLeft",e[e.MiddleCenter=5]="MiddleCenter",e[e.MiddleRight=6]="MiddleRight",e[e.BottomLeft=7]="BottomLeft",e[e.BottomCenter=8]="BottomCenter",e[e.BottomRight=9]="BottomRight"}(xC||(xC={})),function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom",e[e.Left=3]="Left",e[e.Right=4]="Right"}(kC||(kC={}));var AC,BC,FC,NC,HC,VC,jC,zC,qC,WC,_C,GC,UC,KC,YC,XC,QC,JC,ZC,$C,eS,tS,iS,nS,rS,oS,sS=function(){function e(){this.pdfMargin=40,this.setMargins(this.pdfMargin)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.leftMargin},set:function(e){this.leftMargin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.topMargin},set:function(e){this.topMargin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.rightMargin},set:function(e){this.rightMargin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.bottomMargin},set:function(e){this.bottomMargin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all",{set:function(e){this.setMargins(e)},enumerable:!0,configurable:!0}),e.prototype.setMargins=function(e,t,i,n){void 0===t?this.leftMargin=this.topMargin=this.rightMargin=this.bottomMargin=e:void 0===i?(this.leftMargin=this.rightMargin=e,this.bottomMargin=this.topMargin=t):(this.leftMargin=e,this.topMargin=t,this.rightMargin=i,this.bottomMargin=n)},e.prototype.clone=function(){return this},e}(),aS=function(){function e(e){this.pageMargins=new sS,this.pageSize=OC.a4,this.rotateAngle=wC.RotateAngle0,this.pageOrientation=bC.Portrait,this.pageOrigin=new PC(0,0),this.isRotation=!1,"number"==typeof e&&this.pageMargins.setMargins(e)}return Object.defineProperty(e.prototype,"size",{get:function(){return this.pageSize},set:function(e){this.setSize(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.pageOrientation},set:function(e){this.pageOrientation!==e&&(this.pageOrientation=e,this.updateSize(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"margins",{get:function(){return this.pageMargins},set:function(e){this.pageMargins=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.pageSize.width},set:function(e){this.pageSize.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.pageSize.height},set:function(e){this.pageSize.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this.pageOrigin},set:function(e){this.pageOrigin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this.rotateAngle},set:function(e){this.rotateAngle=e,this.isRotation=!0},enumerable:!0,configurable:!0}),e.prototype.updateSize=function(e){var t=Math.min(this.pageSize.width,this.pageSize.height),i=Math.max(this.pageSize.width,this.pageSize.height);switch(e){case bC.Portrait:this.pageSize=new IC(t,i);break;case bC.Landscape:this.pageSize=new IC(i,t)}},e.prototype.clone=function(){return this.pageMargins=this.pageMargins.clone(),this},e.prototype.getActualSize=function(){var e=this.width-(this.margins.left+this.margins.right),t=this.height-(this.margins.top+this.margins.bottom);return new IC(e,t)},e.prototype.setSize=function(e){var t=Math.min(e.width,e.height),i=Math.max(e.width,e.height);this.orientation===bC.Portrait?this.pageSize=new IC(t,i):this.pageSize=new IC(i,t)},e}();!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(AC||(AC={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(BC||(BC={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right",e[e.Justify=3]="Justify"}(FC||(FC={})),function(e){e[e.Fill=0]="Fill",e[e.Stroke=1]="Stroke",e[e.FillStroke=2]="FillStroke",e[e.None=3]="None",e[e.ClipFlag=4]="ClipFlag",e[e.ClipFill=4]="ClipFill",e[e.ClipStroke=5]="ClipStroke",e[e.ClipFillStroke=6]="ClipFillStroke",e[e.Clip=7]="Clip"}(NC||(NC={})),function(e){e[e.Miter=0]="Miter",e[e.Round=1]="Round",e[e.Bevel=2]="Bevel"}(HC||(HC={})),function(e){e[e.Flat=0]="Flat",e[e.Round=1]="Round",e[e.Square=2]="Square"}(VC||(VC={})),function(e){e[e.Solid=0]="Solid",e[e.Dash=1]="Dash",e[e.Dot=2]="Dot",e[e.DashDot=3]="DashDot",e[e.DashDotDot=4]="DashDotDot",e[e.Custom=5]="Custom"}(jC||(jC={})),function(e){e[e.Winding=0]="Winding",e[e.Alternate=1]="Alternate"}(zC||(zC={})),function(e){e[e.Rgb=0]="Rgb",e[e.Cmyk=1]="Cmyk",e[e.GrayScale=2]="GrayScale",e[e.Indexed=3]="Indexed"}(qC||(qC={})),function(e){e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay",e[e.Darken=4]="Darken",e[e.Lighten=5]="Lighten",e[e.ColorDodge=6]="ColorDodge",e[e.ColorBurn=7]="ColorBurn",e[e.HardLight=8]="HardLight",e[e.SoftLight=9]="SoftLight",e[e.Difference=10]="Difference",e[e.Exclusion=11]="Exclusion",e[e.Hue=12]="Hue",e[e.Saturation=13]="Saturation",e[e.Color=14]="Color",e[e.Luminosity=15]="Luminosity"}(WC||(WC={})),function(e){e[e.Centimeter=0]="Centimeter",e[e.Pica=1]="Pica",e[e.Pixel=2]="Pixel",e[e.Point=3]="Point",e[e.Inch=4]="Inch",e[e.Document=5]="Document",e[e.Millimeter=6]="Millimeter"}(_C||(_C={})),function(e){e[e.Fit=0]="Fit",e[e.Center=1]="Center",e[e.Stretch=2]="Stretch",e[e.Tile=3]="Tile"}(GC||(GC={})),function(e){e[e.None=0]="None",e[e.LeftToRight=1]="LeftToRight",e[e.RightToLeft=2]="RightToLeft"}(UC||(UC={})),function(e){e[e.Regular=0]="Regular",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.Underline=4]="Underline",e[e.Strikeout=8]="Strikeout"}(KC||(KC={})),function(e){e[e.Helvetica=0]="Helvetica",e[e.Courier=1]="Courier",e[e.TimesRoman=2]="TimesRoman",e[e.Symbol=3]="Symbol",e[e.ZapfDingbats=4]="ZapfDingbats"}(YC||(YC={})),function(e){e[e.Standard=0]="Standard",e[e.TrueType=1]="TrueType",e[e.TrueTypeEmbedded=2]="TrueTypeEmbedded"}(XC||(XC={})),function(e){e[e.None=0]="None",e[e.Word=1]="Word",e[e.WordOnly=2]="WordOnly",e[e.Character=3]="Character"}(QC||(QC={})),function(e){e[e.None=0]="None",e[e.SuperScript=1]="SuperScript",e[e.SubScript=2]="SubScript"}(JC||(JC={})),function(e){e[e.Unknown=0]="Unknown",e[e.StandardEncoding=1]="StandardEncoding",e[e.MacRomanEncoding=2]="MacRomanEncoding",e[e.MacExpertEncoding=3]="MacExpertEncoding",e[e.WinAnsiEncoding=4]="WinAnsiEncoding",e[e.PdfDocEncoding=5]="PdfDocEncoding",e[e.IdentityH=6]="IdentityH"}(ZC||(ZC={})),function(e){e[e.Apple=0]="Apple",e[e.Microsoft=4]="Microsoft",e[e.Trimmed=6]="Trimmed"}($C||($C={})),function(e){e[e.Unknown=0]="Unknown",e[e.Symbol=1]="Symbol",e[e.Unicode=2]="Unicode",e[e.Macintosh=3]="Macintosh"}(eS||(eS={})),function(e){e[e.AppleUnicode=0]="AppleUnicode",e[e.Macintosh=1]="Macintosh",e[e.Iso=2]="Iso",e[e.Microsoft=3]="Microsoft"}(tS||(tS={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unicode=1]="Unicode"}(iS||(iS={})),function(e){e[e.Roman=0]="Roman",e[e.Japanese=1]="Japanese",e[e.Chinese=2]="Chinese"}(nS||(nS={})),function(e){e[e.FixedPitch=1]="FixedPitch",e[e.Serif=2]="Serif",e[e.Symbolic=4]="Symbolic",e[e.Script=8]="Script",e[e.Nonsymbolic=32]="Nonsymbolic",e[e.Italic=64]="Italic",e[e.ForceBold=262144]="ForceBold"}(rS||(rS={})),function(e){e[e.Arg1And2AreWords=1]="Arg1And2AreWords",e[e.ArgsAreXyValues=2]="ArgsAreXyValues",e[e.RoundXyToGrid=4]="RoundXyToGrid",e[e.WeHaveScale=8]="WeHaveScale",e[e.Reserved=16]="Reserved",e[e.MoreComponents=32]="MoreComponents",e[e.WeHaveAnXyScale=64]="WeHaveAnXyScale",e[e.WeHaveTwoByTwo=128]="WeHaveTwoByTwo",e[e.WeHaveInstructions=256]="WeHaveInstructions",e[e.UseMyMetrics=512]="UseMyMetrics"}(oS||(oS={}));var lS,hS=function(){function e(e){if(null==e)throw new Error("ArgumentNullException:stream");this.stream=e}return e.prototype.clear=function(){this.stream.clearStream()},e.prototype.setGraphicsState=function(e){e instanceof Uw?(this.stream.write(e.toString()),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setGraphicsState)):(this.stream.write(Kw.slash),this.stream.write(e),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setGraphicsState))},e.prototype.executeObject=function(e){this.stream.write(e.toString()),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.paintXObject),this.stream.write(Kw.newLine)},e.prototype.closePath=function(){this.writeOperator(Kw.closePath)},e.prototype.clipPath=function(e){this.stream.write(Kw.clipPath),e&&this.stream.write(Kw.evenOdd),this.stream.write(Kw.whiteSpace),this.stream.write(Kw.endPath),this.stream.write(Kw.newLine)},e.prototype.closeFillStrokePath=function(e){this.stream.write(Kw.closeFillStrokePath),e?(this.stream.write(Kw.evenOdd),this.stream.write(Kw.newLine)):this.stream.write(Kw.newLine)},e.prototype.fillStrokePath=function(e){this.stream.write(Kw.fillStroke),e?(this.stream.write(Kw.evenOdd),this.stream.write(Kw.newLine)):this.stream.write(Kw.newLine)},e.prototype.fillPath=function(e){this.stream.write(Kw.fill),e?(this.stream.write(Kw.evenOdd),this.stream.write(Kw.newLine)):this.stream.write(Kw.newLine)},e.prototype.endPath=function(){this.writeOperator(Kw.n)},e.prototype.closeFillPath=function(e){this.writeOperator(Kw.closePath),this.stream.write(Kw.fill),e?(this.stream.write(Kw.evenOdd),this.stream.write(Kw.newLine)):this.stream.write(Kw.newLine)},e.prototype.closeStrokePath=function(){this.writeOperator(Kw.closeStrokePath)},e.prototype.setTextScaling=function(e){this.stream.write(iC.floatToString(e)),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setTextScaling)},e.prototype.strokePath=function(){this.writeOperator(Kw.stroke)},e.prototype.restoreGraphicsState=function(){this.writeOperator(Kw.restoreState)},e.prototype.saveGraphicsState=function(){this.writeOperator(Kw.saveState)},e.prototype.startNextLine=function(e,t){void 0===e?this.writeOperator(Kw.goToNextLine):e instanceof PC?(this.writePoint(e),this.writeOperator(Kw.setCoords)):(this.writePoint(e,t),this.writeOperator(Kw.setCoords))},e.prototype.showText=function(e){this.checkTextParam(e),this.writeText(e),this.writeOperator(Kw.setText)},e.prototype.setLeading=function(e){this.stream.write(iC.floatToString(e)),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setTextLeading)},e.prototype.beginPath=function(e,t){this.writePoint(e,t),this.writeOperator(Kw.beginPath)},e.prototype.beginText=function(){this.writeOperator(Kw.beginText)},e.prototype.endText=function(){this.writeOperator(Kw.endText)},e.prototype.appendRectangle=function(e,t,i,n){e instanceof MC?this.appendRectangle(e.x,e.y,e.width,e.height):(this.writePoint(e,t),this.writePoint(i,n),this.writeOperator(Kw.appendRectangle))},e.prototype.appendLineSegment=function(e,t){e instanceof PC?this.appendLineSegment(e.x,e.y):(this.writePoint(e,t),this.writeOperator(Kw.appendLineSegment))},e.prototype.setTextRenderingMode=function(e){this.stream.write(e.toString()),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setRenderingMode)},e.prototype.setCharacterSpacing=function(e){this.stream.write(iC.floatToString(e)),this.stream.write(Kw.whiteSpace),this.stream.write(Kw.setCharacterSpace),this.stream.write(Kw.newLine)},e.prototype.setWordSpacing=function(e){this.stream.write(iC.floatToString(e)),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setWordSpace)},e.prototype.showNextLineText=function(e,t){e instanceof mC?(this.checkTextParam(e),this.writeText(e),this.writeOperator(Kw.setTextOnNewLine)):(this.checkTextParam(e),this.writeText(e,t),this.writeOperator(Kw.setTextOnNewLine))},e.prototype.setColorSpace=function(e,t){if(e instanceof Uw&&"boolean"==typeof t){var i=e,n=(r=t)?Kw.selectcolorspaceforstroking:Kw.selectcolorspacefornonstroking;this.stream.write(i.toString()),this.stream.write(Kw.whiteSpace),this.stream.write(n),this.stream.write(Kw.newLine)}else{i=e;var r=t;this.setColorSpace(new Uw(i),r)}},e.prototype.modifyCtm=function(e){if(null==e)throw new Error("ArgumentNullException:matrix");this.stream.write(e.toString()),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.modifyCtm)},e.prototype.setFont=function(e,t,i){if("string"==typeof t)this.setFont(e,new Uw(t),i);else{if(null==e)throw new Error("ArgumentNullException:font");this.stream.write(t.toString()),this.stream.write(Kw.whiteSpace),this.stream.write(iC.floatToString(i)),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setFont)}},e.prototype.writeOperator=function(e){this.stream.write(e),this.stream.write(Kw.newLine)},e.prototype.checkTextParam=function(e){if(null==e)throw new Error("ArgumentNullException:text");if("string"==typeof e&&""===e)throw new Error("ArgumentException:The text can not be an empty string, text")},e.prototype.writeText=function(e,t){if(e instanceof mC&&void 0===t)this.stream.write(e.pdfEncode());else{var i=void 0,n=void 0;t?(i=mC.hexStringMark[0],n=mC.hexStringMark[1]):(i=mC.stringMark[0],n=mC.stringMark[1]),this.stream.write(i),this.stream.write(e),this.stream.write(n)}},e.prototype.writePoint=function(e,t){if(e instanceof PC&&void 0===t)this.writePoint(e.x,e.y);else{var i=e;this.stream.write(iC.floatToString(i)),this.stream.write(Kw.whiteSpace),t=this.updateY(t),this.stream.write(iC.floatToString(t)),this.stream.write(Kw.whiteSpace)}},e.prototype.updateY=function(e){return-e},e.prototype.write=function(e){var t="";t+=e,t+=Kw.newLine,this.writeOperator(t)},e.prototype.writeComment=function(e){if(!(null!=e&&e.length>0))throw new Error("Invalid comment");var t="";t+=Kw.comment,t+=Kw.whiteSpace,t+=e,this.writeOperator(t)},e.prototype.setColorAndSpace=function(e,t,i){e.isEmpty||(this.stream.write(e.toString(t,i)),this.stream.write(Kw.newLine))},e.prototype.setLineDashPattern=function(e,t){this.setLineDashPatternHelper(e,t)},e.prototype.setLineDashPatternHelper=function(e,t){var i="[";if(e.length>1)for(var n=0;n<e.length;n++)n===e.length-1?i+=e[n].toString():i+=e[n].toString()+" ";i+="] ",i+=t.toString(),i+=" "+Kw.setDashPattern,this.stream.write(i),this.stream.write(Kw.newLine)},e.prototype.setMiterLimit=function(e){this.stream.write(iC.floatToString(e)),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setMiterLimit)},e.prototype.setLineWidth=function(e){this.stream.write(iC.floatToString(e)),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setLineWidth)},e.prototype.setLineCap=function(e){this.stream.write(e.toString()),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setLineCapStyle)},e.prototype.setLineJoin=function(e){this.stream.write(e.toString()),this.stream.write(Kw.whiteSpace),this.writeOperator(Kw.setLineJoinStyle)},Object.defineProperty(e.prototype,"position",{get:function(){return this.stream.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){var e=0;if(0!==this.stream.data.length&&-1!==this.stream.data.length)for(var t=0;t<this.stream.data.length;t++)e+=this.stream.data[t].length;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.appendBezierSegment=function(e,t,i,n,r,o){e instanceof PC&&t instanceof PC&&i instanceof PC?(this.writePoint(e.x,e.y),this.writePoint(t.x,t.y),this.writePoint(i.x,i.y)):(this.writePoint(e,t),this.writePoint(i,n),this.writePoint(r,o)),this.writeOperator(Kw.appendbeziercurve)},e.prototype.setColourWithPattern=function(e,t,i){if(null!=e){var n=e.length,r=0;for(r=0;r<n;++r)this.stream.write(e[r].toString()),this.stream.write(Kw.whiteSpace)}null!=t&&(this.stream.write(t.toString()),this.stream.write(Kw.whiteSpace)),i?this.writeOperator(Kw.setColorAndPatternStroking):this.writeOperator(Kw.setColorAndPattern)},e}(),pS=function(){function e(t,i,n,r){void 0===t?void 0!==i&&void 0!==n&&void 0!==r?this.assignRGB(i,n,r):this.filled=!1:t instanceof e?(this.redColor=t.r,this.greenColor=t.g,this.blueColor=t.b,this.grayColor=t.gray,this.alpha=t.alpha,this.filled=0!==this.alpha):"number"==typeof t&&void 0===i&&void 0===n&&void 0===r?(t<0&&(t=0),t>1&&(t=1),this.redColor=t*e.maxColourChannelValue,this.greenColor=t*e.maxColourChannelValue,this.blueColor=t*e.maxColourChannelValue,this.cyanColor=t,this.magentaColor=t,this.yellowColor=t,this.blackColor=t,this.grayColor=t,this.alpha=e.maxColourChannelValue,this.filled=!0):void 0===r?this.assignRGB(t,i,n):this.assignRGB(i,n,r,t)}return e.prototype.assignRGB=function(t,i,n,r){void 0===t||void 0===i||void 0===n?this.filled=!1:(this.cyanColor=0,this.magentaColor=0,this.yellowColor=0,this.blackColor=0,this.grayColor=0,this.redColor=t,this.greenColor=i,this.blueColor=n,this.alpha=void 0===r?e.maxColourChannelValue:r,this.filled=!0,this.assignCMYK(t,i,n))},e.prototype.assignCMYK=function(t,i,n){var r=t/e.maxColourChannelValue,o=i/e.maxColourChannelValue,s=n/e.maxColourChannelValue,a=iC.min(1-r,1-o,1-s),l=1===a?0:(1-r-a)/(1-a),h=1===a?0:(1-o-a)/(1-a),p=1===a?0:(1-s-a)/(1-a);this.blackColor=a,this.cyanColor=l,this.magentaColor=h,this.yellowColor=p},Object.defineProperty(e.prototype,"r",{get:function(){return this.redColor},set:function(e){this.redColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"red",{get:function(){return this.r/e.maxColourChannelValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this.blueColor},set:function(e){this.blueColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.b/e.maxColourChannelValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"c",{get:function(){return this.cyanColor},set:function(e){this.cyanColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return this.blackColor},set:function(e){this.blackColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"m",{get:function(){return this.magentaColor},set:function(e){this.magentaColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.yellowColor},set:function(e){this.yellowColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this.greenColor},set:function(e){this.greenColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.g/e.maxColourChannelValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gray",{get:function(){return(this.redColor+this.greenColor+this.blueColor)/(3*e.maxColourChannelValue)},set:function(t){this.grayColor=t<0?0:t>1?1:t,this.r=this.grayColor*e.maxColourChannelValue,this.g=this.grayColor*e.maxColourChannelValue,this.b=this.grayColor*e.maxColourChannelValue,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!this.filled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return this.alpha},set:function(e){this.alpha=e<0?0:e,this.filled=!0},enumerable:!0,configurable:!0}),e.prototype.toString=function(e,t){if(this.isEmpty)return"";var i="";switch(e){case qC.Rgb:i=this.rgbToString(t);break;case qC.GrayScale:i=this.grayScaleToString(t);break;case qC.Cmyk:i=this.cmykToString(t)}return i},e.prototype.grayScaleToString=function(t){var i=this.gray,n="",r=null;return null==(r=t?e.grayStringsSroke.containsKey(i)?e.grayStringsSroke.getValue(i):null:e.grayStringsFill.containsKey(i)?e.grayStringsFill.getValue(i):null)?t&&(n=i.toString()+" G",e.grayStringsSroke.setValue(i,n)):n=r.toString(),n+Kw.newLine},e.prototype.rgbToString=function(t){var i=this.r,n=this.g,r=this.b,o=(i<<16)+(n<<8)+r;t&&(o+=1<<24);var s="",a=null;if(e.rgbStrings.containsKey(o)&&(a=e.rgbStrings.getValue(o)),null==a){var l=i/e.maxColourChannelValue,h=n/e.maxColourChannelValue,p=r/e.maxColourChannelValue;s=t?l.toString()+" "+h.toString()+" "+p.toString()+" RG":l.toString()+" "+h.toString()+" "+p.toString()+" rg",e.rgbStrings.setValue(o,s)}else s=a.toString();return s+Kw.newLine},e.prototype.cmykToString=function(e){var t=this.c,i=this.m,n=this.y,r=this.b;return t.toString()+" "+i.toString()+" "+n.toString()+" "+r.toString()+" K"+Kw.newLine},e.prototype.toArray=function(e){var t=new nC;switch(e){case qC.Rgb:t.add(new iC(this.red)),t.add(new iC(this.green)),t.add(new iC(this.blue))}return t},e.rgbStrings=new Nw,e.grayStringsSroke=new Nw,e.grayStringsFill=new Nw,e.maxColourChannelValue=255,e}(),dS=function(){function e(){}return e.prototype.clone=function(){return this},e}(),cS=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uS=function(e){function t(t){var i=e.call(this)||this;return i.pdfColor=t,i}return cS(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return this.pdfColor},set:function(e){this.pdfColor=e},enumerable:!0,configurable:!0}),t.prototype.monitorChanges=function(e,t,i,n,r){if(null==t)throw new Error("ArgumentNullException:streamWriter");var o=!1;if(null==e)return o=!0,t.setColorAndSpace(this.pdfColor,r,!1),o;return o=!0,t.setColorAndSpace(this.pdfColor,r,!1),o},t.prototype.resetChanges=function(e){e.setColorAndSpace(new pS(0,0,0),qC.Rgb,!1)},t}(dS),gS=function(){function e(e,t){this.pdfColor=new pS(0,0,0),this.dashOffsetValue=0,this.penDashPattern=[0],this.pdfDashStyle=jC.Solid,this.pdfLineCap=0,this.pdfLineJoin=0,this.penWidth=1,this.internalMiterLimit=0,this.colorSpace=qC.Rgb,e instanceof dS?this.setBrush(e):e instanceof pS&&(this.color=e),"number"==typeof t&&(this.width=t)}return Object.defineProperty(e.prototype,"color",{get:function(){return this.pdfColor},set:function(e){this.pdfColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashOffset",{get:function(){return void 0===this.dashOffsetValue||null==this.dashOffsetValue?0:this.dashOffsetValue},set:function(e){this.dashOffsetValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashPattern",{get:function(){return this.penDashPattern},set:function(e){this.penDashPattern=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashStyle",{get:function(){return this.pdfDashStyle},set:function(e){if(this.pdfDashStyle!==e)switch(this.pdfDashStyle=e,this.pdfDashStyle){case jC.Custom:break;case jC.Dash:this.penDashPattern=[3,1];break;case jC.Dot:this.penDashPattern=[1,1];break;case jC.DashDot:this.penDashPattern=[3,1,1,1];break;case jC.DashDotDot:this.penDashPattern=[3,1,1,1,1,1];break;case jC.Solid:break;default:this.pdfDashStyle=jC.Solid,this.penDashPattern=[0]}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCap",{get:function(){return this.pdfLineCap},set:function(e){this.pdfLineCap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this.pdfLineJoin},set:function(e){this.pdfLineJoin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this.internalMiterLimit},set:function(e){this.internalMiterLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.penWidth},set:function(e){this.penWidth=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return this},e.prototype.setBrush=function(e){var t=e;null!=t&&t instanceof uS&&(this.color=t.color,this.pdfBrush=t),this.color=t.color,this.pdfBrush=t},e.prototype.monitorChanges=function(e,t,i,n,r,o){this.dashControl(e,!0,t),t.setLineWidth(this.width),t.setLineJoin(this.lineJoin),t.setLineCap(this.lineCap);var s=this.miterLimit;s>0&&t.setMiterLimit(s);this.pdfBrush;return t.setColorAndSpace(this.color,r,!0),!0},e.prototype.dashControl=function(e,t,i){var n=this.width,r=this.getPattern();return i.setLineDashPattern(r,this.dashOffset*n),!0},e.prototype.getPattern=function(){for(var e=this.dashPattern,t=0;t<e.length;++t)e[t]*=this.width;return e},e}(),fS=function(){function e(e,t){this.scalingFactor=100,this.wordWrapType=QC.Word,this.internalLineLimit=!0,this.wordWrapType=QC.Word,void 0!==e&&"string"!=typeof e&&(this.textAlignment=e),void 0!==t&&(this.verticalAlignment=t)}return Object.defineProperty(e.prototype,"alignment",{get:function(){return this.textAlignment},set:function(e){this.textAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textDirection",{get:function(){return this.direction},set:function(e){this.direction=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineAlignment",{get:function(){return void 0===this.verticalAlignment||null==this.verticalAlignment?BC.Top:this.verticalAlignment},set:function(e){this.verticalAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightToLeft",{get:function(){return void 0!==this.isRightToLeft&&null!=this.isRightToLeft&&this.isRightToLeft},set:function(e){this.isRightToLeft=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"characterSpacing",{get:function(){return void 0===this.internalCharacterSpacing||null==this.internalCharacterSpacing?0:this.internalCharacterSpacing},set:function(e){this.internalCharacterSpacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wordSpacing",{get:function(){return void 0===this.internalWordSpacing||null==this.internalWordSpacing?0:this.internalWordSpacing},set:function(e){this.internalWordSpacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return void 0===this.leading||null==this.leading?0:this.leading},set:function(e){this.leading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clipPath",{get:function(){return void 0!==this.clip&&null!=this.clip&&this.clip},set:function(e){this.clip=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subSuperScript",{get:function(){return void 0===this.pdfSubSuperScript||null==this.pdfSubSuperScript?JC.None:this.pdfSubSuperScript},set:function(e){this.pdfSubSuperScript=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paragraphIndent",{get:function(){return void 0===this.internalParagraphIndent||null==this.internalParagraphIndent?0:this.internalParagraphIndent},set:function(e){this.internalParagraphIndent=e,this.firstLineIndent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineLimit",{get:function(){return this.internalLineLimit},set:function(e){this.internalLineLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measureTrailingSpaces",{get:function(){return void 0!==this.trailingSpaces&&null!=this.trailingSpaces&&this.trailingSpaces},set:function(e){this.trailingSpaces=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noClip",{get:function(){return void 0!==this.isNoClip&&null!=this.isNoClip&&this.isNoClip},set:function(e){this.isNoClip=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this.wordWrapType},set:function(e){this.wordWrapType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalScalingFactor",{get:function(){return this.scalingFactor},set:function(e){if(e<=0)throw new Error("ArgumentOutOfRangeException:The scaling factor cant be less of equal to zero, ScalingFactor");this.scalingFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstLineIndent",{get:function(){return void 0===this.initialLineIndent||null==this.initialLineIndent?0:this.initialLineIndent},set:function(e){this.initialLineIndent=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return this},e}(),mS=function(){function e(e){if(this.currentPosition=0,null==e)throw new Error("ArgumentNullException:text");this.text=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.text.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.currentPosition===this.text.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.currentPosition},set:function(e){this.currentPosition=e},enumerable:!0,configurable:!0}),e.getCharsCount=function(e,t){if("string"==typeof t){if(null==e)throw new Error("ArgumentNullException:wholeText");for(var i=0,n=0;-1!==(n=e.indexOf(t,n));)i++,n++;return i}if(null==e)throw new Error("ArgumentNullException:text");if(null==t)throw new Error("ArgumentNullException:symbols");for(var r=0,o=0,s=e.length;o<s;o++){var a=e[o];this.contains(t,a)&&r++}return r},e.prototype.readLine=function(){for(var e=this.currentPosition;e<this.length;){var t=this.text[e];switch(t){case"\r":case"\n":var i=this.text.substring(this.currentPosition,e-this.currentPosition);return this.currentPosition=e+1,"\r"===t&&this.currentPosition<this.length&&"\n"===this.text[this.currentPosition]&&this.currentPosition++,i}e++}if(e>this.currentPosition){var n=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,n}return null},e.prototype.peekLine=function(){var e=this.currentPosition,t=this.readLine();return this.currentPosition=e,t},e.prototype.readWord=function(){for(var e=this.currentPosition;e<this.length;){var t=this.text[e];switch(t){case"\r":case"\n":var i=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e+1,"\r"===t&&this.currentPosition<this.length&&"\n"===this.text[this.currentPosition]&&this.currentPosition++,i;case" ":case"\t":e===this.currentPosition&&e++;var n=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,n}e++}if(e>this.currentPosition){var r=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,r}return null},e.prototype.peekWord=function(){var e=this.currentPosition,t=this.readWord();return this.currentPosition=e,t},e.prototype.read=function(e){if(void 0===e){var t="0";return this.end||(t=this.text[this.currentPosition],this.currentPosition++),t}for(var i=0,n="";!this.end&&i<e;){n+=t=this.read(),i++}return n},e.prototype.peek=function(){var e="0";return this.end||(e=this.text[this.currentPosition]),e},e.prototype.close=function(){this.text=null},e.prototype.readToEnd=function(){var e;return e=0===this.currentPosition?this.text:this.text.substring(this.length,this.currentPosition),this.currentPosition=this.length,e},e.contains=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n]===t){i=!0;break}return i},e.whiteSpace=" ",e.tab="\t",e.spaces=[e.whiteSpace,e.tab],e.whiteSpacePattern="^[ \t]+$",e}(),yS=function(){function e(){this.isOverloadWithPosition=!1}return e.prototype.layout=function(e,t,i,n,r,o,s){if(n instanceof MC){this.initialize(e,t,i,n,r),this.isOverloadWithPosition=o,this.clientSize=s;var a=this.doLayout();return this.clear(),a}this.initialize(e,t,i,n),this.isOverloadWithPosition=r,this.clientSize=o;a=this.doLayout();return this.clear(),a},e.prototype.initialize=function(e,t,i,n,r){if("number"==typeof r){if(null==e)throw new Error("ArgumentNullException:text");if(null==t)throw new Error("ArgumentNullException:font");this.text=e,this.font=t,this.format=i,this.size=new IC(n.width,n.height),this.rectangle=n,this.pageHeight=r,this.reader=new mS(e)}else this.initialize(e,t,i,new MC(new PC(0,0),n),0)},e.prototype.clear=function(){this.font=null,this.format=null,this.reader.close(),this.reader=null,this.text=null},e.prototype.doLayout=function(){for(var e=new vS,t=new vS,i=[],n=this.reader.peekLine(),r=this.getLineIndent(!0);null!=n;){if(null!==(t=this.layoutLine(n,r))||void 0!==t){var o=0,s=this.copyToResult(e,t,i,o),a=s.success;if(o=s.numInserted,!a){this.reader.read(o);break}}this.reader.readLine(),n=this.reader.peekLine(),r=this.getLineIndent(!1)}return this.finalizeResult(e,i),e},e.prototype.getLineIndent=function(e){var t=0;return null!=this.format&&(t=e?this.format.firstLineIndent:this.format.paragraphIndent,t=this.size.width>0?Math.min(this.size.width,t):t),t},e.prototype.getLineHeight=function(){var e=this.font.height;return null!=this.format&&0!==this.format.lineSpacing&&(e=this.format.lineSpacing+this.font.height),e},e.prototype.getLineWidth=function(e){return this.font.getLineWidth(e,this.format)},e.prototype.layoutLine=function(e,t){var i=new vS;i.layoutLineHeight=this.getLineHeight();var n=[],r=this.size.width,o=this.getLineWidth(e)+t,s=lS.FirstParagraphLine,a=!0;if(r<=0||Math.round(o)<=Math.round(r))this.addToLineResult(i,n,e,o,lS.NewLineBreak|s);else{var l="",h="";o=t;var p=t,d=new mS(e),c=d.peekWord();for(c.length!==d.length&&" "===c&&(h+=c,l+=c,d.position+=1,c=d.peekWord());null!=c;){h+=c;var u=this.getLineWidth(h.toString())+p;if(" "===h.toString()&&(h="",u=0),u>r){if(this.getWrapType()===QC.None)break;if(h.length===c.length){if(this.getWrapType()===QC.WordOnly){i.textRemainder=e.substring(d.position);break}if(1===h.length){l+=c;break}a=!1,h="",c=d.peek().toString();continue}this.getLineWidth(c.toString())>r?this.format.wordWrap=QC.Character:void 0!==this.format&&null!==this.format&&(this.format.wordWrap=QC.Word),this.getWrapType()===QC.Character&&a?(a=!1,h="",h+=l.toString(),c=d.peek().toString()):(" "!==(g=l.toString())&&this.addToLineResult(i,n,g,o,lS.LayoutBreak|s),this.isOverloadWithPosition&&(r=this.clientSize.width),h="",l="",o=0,p=0,u=0,s=lS.None,c=a?c:d.peekWord(),a=!0)}else l+=c,o=u,a?(d.readWord(),c=d.peekWord()):(d.read(),c=d.peek().toString())}if(l.length>0){var g=l.toString();this.addToLineResult(i,n,g,o,lS.NewLineBreak|lS.LastParagraphLine)}d.close()}i.layoutLines=[];for(var f=0;f<n.length;f++)i.layoutLines.push(n[f]);return n=[],i},e.prototype.addToLineResult=function(e,t,i,n,r){var o=new bS;o.text=i,o.width=n,o.lineType=r,t.push(o);var s=e.actualSize;s.height+=this.getLineHeight(),s.width=Math.max(s.width,n),e.size=s},e.prototype.copyToResult=function(e,t,i,n){var r=!0,o=null!=this.format&&!this.format.lineLimit,s=e.actualSize.height,a=this.size.height;if(this.pageHeight>0&&a+this.rectangle.y>this.pageHeight&&(a=this.rectangle.y-this.pageHeight,a=Math.max(a,-a)),n=0,null!=t.lines)for(var l=0,h=t.lines.length;l<h;l++){var p=s+t.lineHeight;if(!(p<=a||a<=0||o)){r=!1;break}var d=t.lines[l];n+=d.text.length,d=this.trimLine(d,0===i.length),i.push(d);var c=e.actualSize;c.width=Math.max(c.width,d.width),e.size=c,s=p}if(s!=e.size.height){var u=e.actualSize;u.height=s,e.size=u}return{success:r,numInserted:n}},e.prototype.finalizeResult=function(e,t){e.layoutLines=[];for(var i=0;i<t.length;i++)e.layoutLines.push(t[i]);e.layoutLineHeight=this.getLineHeight(),this.reader.end||(e.textRemainder=this.reader.readToEnd()),t=[]},e.prototype.trimLine=function(e,t){var i=e.text,n=e.width;e.lineType,lS.FirstParagraphLine,null==this.format||this.format.rightToLeft,mS.spaces;return(i=i.trim()).length!==e.text.length&&(n=this.getLineWidth(i),(e.lineType&lS.FirstParagraphLine)>0&&(n+=this.getLineIndent(t))),e.text=i,e.width=n,e},e.prototype.getWrapType=function(){return null!=this.format?this.format.wordWrap:QC.Word},e}(),vS=function(){function e(){}return Object.defineProperty(e.prototype,"remainder",{get:function(){return this.textRemainder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualSize",{get:function(){return void 0===this.size&&(this.size=new IC(0,0)),this.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lines",{get:function(){return this.layoutLines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this.layoutLineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return null==this.layoutLines||0===this.layoutLines.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.empty?0:this.layoutLines.length},enumerable:!0,configurable:!0}),e}(),bS=function(){function e(){}return Object.defineProperty(e.prototype,"lineType",{get:function(){return this.type},set:function(e){this.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.content},set:function(e){this.content=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.lineWidth},set:function(e){this.lineWidth=e},enumerable:!0,configurable:!0}),e}();!function(e){e[e.None=0]="None",e[e.NewLineBreak=1]="NewLineBreak",e[e.LayoutBreak=2]="LayoutBreak",e[e.FirstParagraphLine=4]="FirstParagraphLine",e[e.LastParagraphLine=8]="LastParagraphLine"}(lS||(lS={}));var wS,CS,SS,xS=function(){function e(e,t){this.fontStyle=KC.Regular,"number"==typeof e&&void 0===t?this.fontSize=e:(this.fontSize=e,this.setStyle(t))}return Object.defineProperty(e.prototype,"name",{get:function(){return this.metrics.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.metrics.getHeight(null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.fontStyle},set:function(e){this.fontStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return(this.style&KC.Bold)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return(this.style&KC.Italic)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strikeout",{get:function(){return(this.style&KC.Strikeout)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"underline",{get:function(){return(this.style&KC.Underline)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metrics",{get:function(){return this.fontMetrics},set:function(e){this.fontMetrics=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.pdfFontInternals},enumerable:!0,configurable:!0}),e.prototype.measureString=function(e,t,i,n,r){if("string"==typeof e&&void 0===t)return this.measureString(e,null);if("string"==typeof e&&(t instanceof fS||null==t)&&void 0===i&&void 0===n){var o=t;return this.measureString(e,o,0,0)}if("string"==typeof e&&(t instanceof fS||null==t)&&"number"==typeof i&&"number"==typeof n){o=t;return this.measureString(e,0,o,i,n)}if("string"==typeof e&&"number"==typeof t&&(i instanceof fS||null==i)&&"number"==typeof n&&"number"==typeof r){var s=new IC(t,0),a=i;return this.measureString(e,s,a,n,r)}if(null==e)throw Error('ArgumentNullException("text")');o=t,a=i;var l=(new yS).layout(e,this,a,o,!1,new IC(0,0));return n=e.length,r=l.empty?0:l.lines.length,l.actualSize},e.prototype.equalsTo=function(e){return this.equalsToFont(e)},e.prototype.getInternals=function(){return this.pdfFontInternals},e.prototype.setInternals=function(e){if(null==e)throw new Error("ArgumentNullException:internals");this.pdfFontInternals=e},e.prototype.setStyle=function(e){this.fontStyle=e},e.prototype.applyFormatSettings=function(e,t,i){var n=i;if(null!=t&&i>0&&(0!==t.characterSpacing&&(n+=(e.length-1)*t.characterSpacing),0!==t.wordSpacing)){var r=mS.spaces;n+=mS.getCharsCount(e,r)*t.wordSpacing}return n},e.charSizeMultiplier=.001,e.syncObject=new Object,e}(),kS=function(){function e(e){this.radDegFactor=180/Math.PI,this.transformationMatrix=new TS(1,0,0,void 0===e?1:-1,0,0)}return Object.defineProperty(e.prototype,"matrix",{get:function(){return this.transformationMatrix},set:function(e){this.transformationMatrix=e},enumerable:!0,configurable:!0}),e.prototype.translate=function(e,t){this.transformationMatrix.translate(e,t)},e.prototype.scale=function(e,t){this.transformationMatrix.elements[0]=e,this.transformationMatrix.elements[3]=t},e.prototype.rotate=function(e){e=e*Math.PI/180,this.transformationMatrix.elements[0]=Math.cos(e),this.transformationMatrix.elements[1]=Math.sin(e),this.transformationMatrix.elements[2]=-Math.sin(e),this.transformationMatrix.elements[3]=Math.cos(e)},e.prototype.toString=function(){for(var e="",t=0,i=this.transformationMatrix.elements.length;t<i;t++){this.matrix.elements[t];e+=iC.floatToString(this.transformationMatrix.elements[t]),e+=" "}return e},e.prototype.multiply=function(e){this.transformationMatrix.multiply(e.matrix)},e.degreesToRadians=function(e){return this.degRadFactor*e},e.prototype.radiansToDegrees=function(e){return this.radDegFactor*e},e.prototype.clone=function(){return this},e.degRadFactor=Math.PI/180,e}(),TS=function(){function e(e,t,i,n,r,o){void 0===e?this.metrixElements=[]:"number"==typeof e?(this.metrixElements=[],this.metrixElements.push(e),this.metrixElements.push(t),this.metrixElements.push(i),this.metrixElements.push(n),this.metrixElements.push(r),this.metrixElements.push(o)):this.metrixElements=e}return Object.defineProperty(e.prototype,"elements",{get:function(){return this.metrixElements},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.metrixElements[4]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.metrixElements[5]},enumerable:!0,configurable:!0}),e.prototype.translate=function(e,t){this.metrixElements[4]=e,this.metrixElements[5]=t},e.prototype.transform=function(e){var t=e.x,i=e.y,n=t*this.elements[0]+i*this.elements[2]+this.offsetX,r=t*this.elements[1]+i*this.elements[3]+this.offsetY;return new PC(n,r)},e.prototype.multiply=function(e){var t=[];t.push(this.elements[0]*e.elements[0]+this.elements[1]*e.elements[2]),t[1]=this.elements[0]*e.elements[1]+this.elements[1]*e.elements[3],t[2]=this.elements[2]*e.elements[0]+this.elements[3]*e.elements[2],t[3]=this.elements[2]*e.elements[1]+this.elements[3]*e.elements[3],t[4]=this.offsetX*e.elements[0]+this.offsetY*e.elements[2]+e.offsetX,t[5]=this.offsetX*e.elements[1]+this.offsetY*e.elements[3]+e.offsetY;for(var i=0;i<t.length;i++)this.elements[i]=t[i]},e.prototype.dispose=function(){this.metrixElements=null},e.prototype.clone=function(){return new e(this.metrixElements)},e}(),DS=function(){this.pdf="PDF",this.text="Text",this.imageB="ImageB",this.imageC="ImageC",this.imageI="ImageI"},ES=function(){function e(){this.mKeys=[],this.mValues=[]}return e.prototype.size=function(){return this.mKeys.length},e.prototype.add=function(e,t){if(null==e||null==t)throw new ReferenceError("Provided key or value is not valid.");if(this.mKeys.indexOf(e)<0)return this.mKeys.push(e),this.mValues.push(t),1;throw new RangeError("An item with the same key has already been added.")},e.prototype.keys=function(){return this.mKeys},e.prototype.values=function(){return this.mValues},e.prototype.getValue=function(e){if(null==e)throw new ReferenceError("Provided key is not valid.");var t=this.mKeys.indexOf(e);if(t<0)throw new RangeError("No item with the specified key has been added.");return this.mValues[t]},e.prototype.setValue=function(e,t){if(null==e)throw new ReferenceError("Provided key is not valid.");var i=this.mKeys.indexOf(e);i<0?(this.mKeys.push(e),this.mValues.push(t)):this.mValues[i]=t},e.prototype.remove=function(e){if(null==e)throw new ReferenceError("Provided key is not valid.");var t=this.mKeys.indexOf(e);if(t<0)throw new RangeError("No item with the specified key has been added.");return this.mKeys.splice(t,1),this.mValues.splice(t,1),!0},e.prototype.containsKey=function(e){if(null==e)throw new ReferenceError("Provided key is not valid.");return!(this.mKeys.indexOf(e)<0)},e.prototype.clear=function(){this.mKeys=[],this.mValues=[]},e}(),RS=function(){function e(e,t,i){this.dictionary=new Xw,this.dictionaryProperties=new Yw,this.dictionary.items.setValue(this.dictionaryProperties.CA,new iC(e)),this.dictionary.items.setValue(this.dictionaryProperties.ca,new iC(t)),this.dictionary.items.setValue(this.dictionaryProperties.BM,new Uw(i.toString()))}return Object.defineProperty(e.prototype,"element",{get:function(){return this.dictionary},enumerable:!0,configurable:!0}),e}(),PS=function(){function e(){this.automaticFieldsInformation=[]}return Object.defineProperty(e.prototype,"automaticFields",{get:function(){return this.automaticFieldsInformation},enumerable:!0,configurable:!0}),e.prototype.add=function(e){return this.automaticFields.push(e)},e}(),IS=function(){function e(){}return e.prototype.drawHelper=function(e,t,i){var n=0!==t||0!==i,r=null;n&&(r=e.save(),e.translateTransform(t,i)),this.drawInternal(e),n&&e.restore(r)},e}(),MS=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),LS=function(e){function t(){var t=e.call(this)||this;return t.internalBounds=new MC(0,0,0,0),t.internalTemplateSize=new IC(0,0),t}return MS(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.internalBounds},set:function(e){this.internalBounds=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return new IC(this.bounds.width,this.bounds.height)},set:function(e){this.bounds.width=e.width,this.bounds.height=e.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return new PC(this.bounds.x,this.bounds.y)},set:function(e){this.bounds.x=e.x,this.bounds.y=e.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.internalFont},set:function(e){this.internalFont=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brush",{get:function(){return this.internalBrush},set:function(e){this.internalBrush=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pen",{get:function(){return this.internalPen},set:function(e){this.internalPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stringFormat",{get:function(){return this.internalStringFormat},set:function(e){this.internalStringFormat=e},enumerable:!0,configurable:!0}),t.prototype.performDrawHelper=function(e,t,i,n){if(0===this.bounds.height||0===this.bounds.width){var r=this.getValue(e);this.internalTemplateSize=this.getFont().measureString(r,this.size,this.stringFormat)}},t.prototype.draw=function(e,t,i){if(void 0===t){var n=new PC(0,0);this.draw(e,n)}else if(t instanceof PC)this.draw(e,t.x,t.y);else{this.drawHelper(e,t,i);var r=new OS(this,new PC(t,i));e.automaticFields.add(r)}},t.prototype.getSize=function(){return 0===this.bounds.height||0===this.bounds.width?this.internalTemplateSize:this.size},t.prototype.drawInternal=function(e){},t.prototype.getBrush=function(){return void 0===this.internalBrush||null==this.internalBrush?new uS(new pS(0,0,0)):this.internalBrush},t.prototype.getFont=function(){return void 0===this.internalFont||null==this.internalFont?Zx.defaultFont:this.internalFont},t.prototype.getPageFromGraphics=function(e){return void 0!==e.page&&null!==e.page?e.page:e.currentPage},t}(IS),OS=function(){function e(t,i,n,r){this.pageNumberFieldLocation=new PC,this.pageNumberField=null,this.scaleX=1,this.scaleY=1,void 0===i&&t instanceof e?(this.pageNumberField=t.field,this.pageNumberFieldLocation=t.location,this.scaleX=t.scalingX,this.scaleY=t.scalingY):void 0===n&&i instanceof PC&&t instanceof LS?(this.pageNumberField=t,this.pageNumberFieldLocation=i):(this.pageNumberField=t,this.pageNumberFieldLocation=i,this.scaleX=n,this.scaleY=r)}return Object.defineProperty(e.prototype,"location",{get:function(){return this.pageNumberFieldLocation},set:function(e){this.pageNumberFieldLocation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"field",{get:function(){return this.pageNumberField},set:function(e){this.pageNumberField=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scalingX",{get:function(){return this.scaleX},set:function(e){this.scaleX=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scalingY",{get:function(){return this.scaleY},set:function(e){this.scaleY=e},enumerable:!0,configurable:!0}),e}(),AS=function(){function e(e){this.mPosition=0,this.buffer=new Uint8Array(e),this.dataView=new DataView(this.buffer.buffer)}return Object.defineProperty(e.prototype,"position",{get:function(){return this.mPosition},set:function(e){this.mPosition=e},enumerable:!0,configurable:!0}),e.prototype.read=function(e,t,i){for(var n=t;n<i;n++){var r=this.position;e.buffer[n]=this.readByte(r),this.position++}},e.prototype.getBuffer=function(e){return this.buffer[e]},e.prototype.writeFromBase64String=function(e){var t=this.encodedString(e);this.buffer=t},e.prototype.encodedString=function(e){var t,i,n,r,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;e.charAt(e.length-1)===s.charAt(64)&&h--;for(var p=new Uint8Array(0|h);a<e.length;)t=s.indexOf(e.charAt(a++))<<2|(r=s.indexOf(e.charAt(a++)))>>4,i=(15&r)<<4|(o=s.indexOf(e.charAt(a++)))>>2,n=(3&o)<<6|s.indexOf(e.charAt(a++)),p[l++]=t,p[l++]=i,p[l++]=n;return p},e.prototype.readByte=function(e){return this.buffer[e]},Object.defineProperty(e.prototype,"internalBuffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.buffer.byteLength},enumerable:!0,configurable:!0}),e.prototype.readNextTwoBytes=function(e){var t=e.readByte(this.position);return this.position++,t<<=8,t|=e.readByte(this.position),this.position++,t},e}(),BS=function(){function e(){}return Object.defineProperty(e.prototype,"empty",{get:function(){return this.offset===this.length&&this.length===this.checksum&&0===this.checksum},enumerable:!0,configurable:!0}),e}(),FS=function(){},NS=function(){},HS=function(){},VS=function(){function e(){}return Object.defineProperty(e.prototype,"isItalic",{get:function(){return 0!=(2&this.macStyle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBold",{get:function(){return 0!=(1&this.macStyle)},enumerable:!0,configurable:!0}),e}(),jS=function(){},zS=function(){},qS=function(){},WS=function(){},_S=function(){},GS=function(){},US=function(){function e(){}return Object.defineProperty(e.prototype,"empty",{get:function(){return this.index===this.width&&this.width===this.charCode&&0===this.charCode},enumerable:!0,configurable:!0}),e.prototype.compareTo=function(e){var t=e;return this.index-t.index},e}(),KS=function(){},YS=function(){},XS=function(){},QS=function(){},JS=function(){},ZS=function(){function e(e){this.int32Size=4,this.int16Size=2,this.int64Size=8,this.bufferLength=e,this.buffer=[]}return Object.defineProperty(e.prototype,"data",{get:function(){if(this.buffer.length<this.bufferLength)for(var e=this.bufferLength-this.buffer.length,t=0;t<e;t++)this.buffer.push(0);return this.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return void 0!==this.internalPosition&&null!==this.internalPosition||(this.internalPosition=0),this.internalPosition},enumerable:!0,configurable:!0}),e.prototype.writeShort=function(e){var t=[(65280&e)>>8,255&e];this.flush(t)},e.prototype.writeInt=function(e){var t=(4278190080&e)>>24;t=t<0?256+t:t;var i=(16711680&e)>>16;i=i<0?256+i:i;var n=(65280&e)>>8;n=n<0?256+n:n;var r=255&e;r=r<0?256+r:r;var o=[(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e];this.flush(o)},e.prototype.writeUInt=function(e){var t=[(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e];this.flush(t)},e.prototype.writeString=function(e){if(null==e)throw new Error("Argument Null Exception : value");for(var t=[],i=0;i<e.length;i++)t.push(e.charCodeAt(i));this.flush(t)},e.prototype.writeBytes=function(e){this.flush(e)},e.prototype.flush=function(e){if(null===e)throw new Error("Argument Null Exception : buff");for(var t=this.position,i=0;i<e.length;i++)this.buffer[t]=e[i],t++;this.internalPosition+=e.length},e}(),$S=function(){function e(e){this.int32Size=4,this.isTtcFont=!1,this.isMacTtf=!1,this.metricsName="",this.isMacTTF=!1,this.missedGlyphs=0,this.tableNames=["cvt ","fpgm","glyf","head","hhea","hmtx","loca","maxp","prep"],this.entrySelectors=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4],this.fontData=e,this.initialize()}return Object.defineProperty(e.prototype,"macintosh",{get:function(){return null!==this.macintoshDictionary&&void 0!==this.macintoshDictionary||(this.macintoshDictionary=new Nw),this.macintoshDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"microsoft",{get:function(){return null!==this.microsoftDictionary&&void 0!==this.microsoftDictionary||(this.microsoftDictionary=new Nw),this.microsoftDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"macintoshGlyphs",{get:function(){return null!==this.internalMacintoshGlyphs&&void 0!==this.internalMacintoshGlyphs||(this.internalMacintoshGlyphs=new Nw),this.internalMacintoshGlyphs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"microsoftGlyphs",{get:function(){return null!==this.internalMicrosoftGlyphs&&void 0!==this.internalMicrosoftGlyphs||(this.internalMicrosoftGlyphs=new Nw),this.internalMicrosoftGlyphs},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){void 0===this.metrics&&(this.metrics=new VS),this.readFontDictionary();var e=this.readNameTable(),t=this.readHeadTable();this.initializeFontName(e),this.metrics.macStyle=t.macStyle},e.prototype.readFontDictionary=function(){this.offset=0;this.checkPreambula();var e=this.readInt16(this.offset);this.readInt16(this.offset),this.readInt16(this.offset),this.readInt16(this.offset);void 0===this.tableDirectory&&(this.tableDirectory=new Nw);for(var t=0;t<e;++t){var i=new BS,n=this.readString(this.int32Size);i.checksum=this.readInt32(this.offset),i.offset=this.readInt32(this.offset),i.length=this.readInt32(this.offset),this.tableDirectory.setValue(n,i)}this.lowestPosition=this.offset,this.isTtcFont||this.fixOffsets()},e.prototype.fixOffsets=function(){for(var e=Number.MAX_VALUE,t=this.tableDirectory.keys(),i=0;i<t.length;i++){var n=(s=this.tableDirectory.getValue(t[i])).offset;if(e>n&&(e=n)<=this.lowestPosition)break}var r=e-this.lowestPosition;if(0!==r){var o=new Nw;for(i=0;i<t.length;i++){var s;(s=this.tableDirectory.getValue(t[i])).offset-=r,o.setValue(t[i],s)}this.tableDirectory=o}},e.prototype.checkPreambula=function(){var e=this.readInt32(this.offset);if(this.isMacTtf=1953658213===e,65536!==e&&1953658213!==e&&1330926671!==e){if(this.isTtcFont=!0,this.offset=0,"ttcf"!==this.readString(4))throw new Error("Can not read TTF font data");if(this.offset+=4,this.readInt32(this.offset)<0)throw new Error("Can not read TTF font data");this.offset=this.readInt32(this.offset),e=this.readInt32(this.offset)}return e},e.prototype.readNameTable=function(){var e=this.getTable("name");this.offset=e.offset;var t=new FS;t.formatSelector=this.readUInt16(this.offset),t.recordsCount=this.readUInt16(this.offset),t.offset=this.readUInt16(this.offset),t.nameRecords=[];for(var i=this.offset,n=0;n<t.recordsCount;n++){this.offset=i;var r=new NS;r.platformID=this.readUInt16(this.offset),r.encodingID=this.readUInt16(this.offset),r.languageID=this.readUInt16(this.offset),r.nameID=this.readUInt16(this.offset),r.length=this.readUInt16(this.offset),r.offset=this.readUInt16(this.offset),this.offset=e.offset+t.offset+r.offset;var o=0===r.platformID||3===r.platformID;r.name=this.readString(r.length,o),t.nameRecords[n]=r,i+=12}return t},e.prototype.readHeadTable=function(){var e=this.getTable("head");this.offset=e.offset;var t=new HS;return t.version=this.readFixed(this.offset),t.fontRevision=this.readFixed(this.offset),t.checkSumAdjustment=this.readUInt32(this.offset),t.magicNumber=this.readUInt32(this.offset),t.flags=this.readUInt16(this.offset),t.unitsPerEm=this.readUInt16(this.offset),t.created=this.readInt64(this.offset),t.modified=this.readInt64(this.offset),t.xMin=this.readInt16(this.offset),t.yMin=this.readInt16(this.offset),t.xMax=this.readInt16(this.offset),t.yMax=this.readInt16(this.offset),t.macStyle=this.readUInt16(this.offset),t.lowestReadableSize=this.readUInt16(this.offset),t.fontDirectionHint=this.readInt16(this.offset),t.indexToLocalFormat=this.readInt16(this.offset),t.glyphDataFormat=this.readInt16(this.offset),t},e.prototype.readHorizontalHeaderTable=function(){var e=this.getTable("hhea");this.offset=e.offset;var t=new jS;return t.version=this.readFixed(this.offset),t.ascender=this.readInt16(this.offset),t.descender=this.readInt16(this.offset),t.lineGap=this.readInt16(this.offset),t.advanceWidthMax=this.readUInt16(this.offset),t.minLeftSideBearing=this.readInt16(this.offset),t.minRightSideBearing=this.readInt16(this.offset),t.xMaxExtent=this.readInt16(this.offset),t.caretSlopeRise=this.readInt16(this.offset),t.caretSlopeRun=this.readInt16(this.offset),this.offset+=10,t.metricDataFormat=this.readInt16(this.offset),t.numberOfHMetrics=this.readUInt16(this.offset),t},e.prototype.readOS2Table=function(){var e=this.getTable("OS/2");this.offset=e.offset;var t=new zS;return t.version=this.readUInt16(this.offset),t.xAvgCharWidth=this.readInt16(this.offset),t.usWeightClass=this.readUInt16(this.offset),t.usWidthClass=this.readUInt16(this.offset),t.fsType=this.readInt16(this.offset),t.ySubscriptXSize=this.readInt16(this.offset),t.ySubscriptYSize=this.readInt16(this.offset),t.ySubscriptXOffset=this.readInt16(this.offset),t.ySubscriptYOffset=this.readInt16(this.offset),t.ySuperscriptXSize=this.readInt16(this.offset),t.ySuperscriptYSize=this.readInt16(this.offset),t.ySuperscriptXOffset=this.readInt16(this.offset),t.ySuperscriptYOffset=this.readInt16(this.offset),t.yStrikeoutSize=this.readInt16(this.offset),t.yStrikeoutPosition=this.readInt16(this.offset),t.sFamilyClass=this.readInt16(this.offset),t.panose=this.readBytes(10),t.ulUnicodeRange1=this.readUInt32(this.offset),t.ulUnicodeRange2=this.readUInt32(this.offset),t.ulUnicodeRange3=this.readUInt32(this.offset),t.ulUnicodeRange4=this.readUInt32(this.offset),t.vendorIdentifier=this.readBytes(4),t.fsSelection=this.readUInt16(this.offset),t.usFirstCharIndex=this.readUInt16(this.offset),t.usLastCharIndex=this.readUInt16(this.offset),t.sTypoAscender=this.readInt16(this.offset),t.sTypoDescender=this.readInt16(this.offset),t.sTypoLineGap=this.readInt16(this.offset),t.usWinAscent=this.readUInt16(this.offset),t.usWinDescent=this.readUInt16(this.offset),t.ulCodePageRange1=this.readUInt32(this.offset),t.ulCodePageRange2=this.readUInt32(this.offset),t.version>1?(t.sxHeight=this.readInt16(this.offset),t.sCapHeight=this.readInt16(this.offset),t.usDefaultChar=this.readUInt16(this.offset),t.usBreakChar=this.readUInt16(this.offset),t.usMaxContext=this.readUInt16(this.offset)):(t.sxHeight=0,t.sCapHeight=0,t.usDefaultChar=0,t.usBreakChar=0,t.usMaxContext=0),t},e.prototype.readPostTable=function(){var e=this.getTable("post");this.offset=e.offset;var t=new qS;return t.formatType=this.readFixed(this.offset),t.italicAngle=this.readFixed(this.offset),t.underlinePosition=this.readInt16(this.offset),t.underlineThickness=this.readInt16(this.offset),t.isFixedPitch=this.readUInt32(this.offset),t.minType42=this.readUInt32(this.offset),t.maxType42=this.readUInt32(this.offset),t.minType1=this.readUInt32(this.offset),t.maxType1=this.readUInt32(this.offset),t},e.prototype.readWidthTable=function(e,t){var i=this.getTable("hmtx");this.offset=i.offset;for(var n=[],r=0;r<e;r++){var o=new WS;o.advanceWidth=this.readUInt16(this.offset),o.lsb=this.readInt16(this.offset);var s=1e3*o.advanceWidth/t;n.push(Math.floor(s))}return n},e.prototype.readCmapTable=function(){var e=this.getTable("cmap");this.offset=e.offset;var t=new GS;t.version=this.readUInt16(this.offset),t.tablesCount=this.readUInt16(this.offset);for(var i=this.offset,n=[],r=0;r<t.tablesCount;r++){this.offset=i;var o=new _S;o.platformID=this.readUInt16(this.offset),o.encodingID=this.readUInt16(this.offset),o.offset=this.readUInt32(this.offset),i=this.offset,this.readCmapSubTable(o),n[r]=o}return n},e.prototype.readCmapSubTable=function(e){var t=this.getTable("cmap");this.offset=t.offset+e.offset;var i=this.readUInt16(this.offset),n=this.getCmapEncoding(e.platformID,e.encodingID);n===eS.Macintosh?tS.Macintosh:tS.Microsoft;if(n!==eS.Unknown)switch(i){case $C.Apple:this.readAppleCmapTable(e,n);break;case $C.Microsoft:this.readMicrosoftCmapTable(e,n);break;case $C.Trimmed:this.readTrimmedCmapTable(e,n)}},e.prototype.readAppleCmapTable=function(e,t){var i=this.getTable("cmap");this.offset=i.offset+e.offset;var n=new YS;n.format=this.readUInt16(this.offset),n.length=this.readUInt16(this.offset),n.version=this.readUInt16(this.offset),null!==this.maxMacIndex&&void 0!==this.maxMacIndex||(this.maxMacIndex=0);for(var r=0;r<256;++r){var o=new US;o.index=this.readByte(this.offset),o.width=this.getWidth(o.index),o.charCode=r,this.macintosh.setValue(r,o),this.addGlyph(o,t),this.maxMacIndex=Math.max(r,this.maxMacIndex)}},e.prototype.readMicrosoftCmapTable=function(e,t){var i=this.getTable("cmap");this.offset=i.offset+e.offset;var n=t===eS.Unicode?this.microsoft:this.macintosh,r=new XS;r.format=this.readUInt16(this.offset),r.length=this.readUInt16(this.offset),r.version=this.readUInt16(this.offset),r.segCountX2=this.readUInt16(this.offset),r.searchRange=this.readUInt16(this.offset),r.entrySelector=this.readUInt16(this.offset),r.rangeShift=this.readUInt16(this.offset);var o=r.segCountX2/2;r.endCount=this.readUshortArray(o),r.reservedPad=this.readUInt16(this.offset),r.startCount=this.readUshortArray(o),r.idDelta=this.readUshortArray(o),r.idRangeOffset=this.readUshortArray(o);var s=r.length/2-8-4*o;r.glyphID=this.readUshortArray(s);for(var a=0,l=0,h=0;h<o;h++)for(var p=r.startCount[h];p<=r.endCount[h]&&65535!==p;p++){if(0===r.idRangeOffset[h])a=p+r.idDelta[h]&65535;else{if((l=h+r.idRangeOffset[h]/2-o+p-r.startCount[h])>=r.glyphID.length)continue;a=r.glyphID[l]+r.idDelta[h]&65535}var d=new US;d.index=a,d.width=this.getWidth(d.index);var c=t===eS.Symbol&&61440==(65280&p)?255&p:p;d.charCode=c,n.setValue(c,d),this.addGlyph(d,t)}},e.prototype.readTrimmedCmapTable=function(e,t){var i=this.getTable("cmap");this.offset=i.offset+e.offset;var n=new QS;n.format=this.readUInt16(this.offset),n.length=this.readUInt16(this.offset),n.version=this.readUInt16(this.offset),n.firstCode=this.readUInt16(this.offset),n.entryCount=this.readUInt16(this.offset);for(var r=0;r<n.entryCount;++r){var o=new US;o.index=this.readUInt16(this.offset),o.width=this.getWidth(o.index),o.charCode=r+n.firstCode,this.macintosh.setValue(r,o),this.addGlyph(o,t),this.maxMacIndex=Math.max(r,this.maxMacIndex)}},e.prototype.initializeFontName=function(e){for(var t=0;t<e.recordsCount;t++){var i=e.nameRecords[t];if(1===i.nameID?this.metrics.fontFamily=i.name:6===i.nameID&&(this.metrics.postScriptName=i.name),null!==this.metrics.fontFamily&&void 0!==this.metrics.fontFamily&&null!==this.metrics.postScriptName&&void 0!==this.metrics.postScriptName)break}},e.prototype.getTable=function(e){var t,i=new BS;return this.tableDirectory.containsKey(e)&&(t=this.tableDirectory.getValue(e)),null!=t&&(i=t),i},e.prototype.getWidth=function(e){return e=e<this.width.length?e:this.width.length-1,this.width[e]},e.prototype.getCmapEncoding=function(e,t){var i=eS.Unknown;return e==tS.Microsoft&&t==iS.Undefined?i=eS.Symbol:e==tS.Microsoft&&t==iS.Unicode?i=eS.Unicode:e==tS.Macintosh&&t==nS.Roman&&(i=eS.Macintosh),i},e.prototype.addGlyph=function(e,t){var i=null;switch(t){case eS.Unicode:i=this.microsoftGlyphs;break;case eS.Macintosh:case eS.Symbol:i=this.macintoshGlyphs}i.setValue(e.index,e)},e.prototype.initializeMetrics=function(e,t,i,n,r,o){this.initializeFontName(e);for(var s=!1,a=0;a<o.length;a++){var l=o[a];if(this.getCmapEncoding(l.platformID,l.encodingID)===eS.Symbol){s=!0;break}}this.metrics.isSymbol=s,this.metrics.macStyle=t.macStyle,this.metrics.isFixedPitch=0!==r.isFixedPitch,this.metrics.italicAngle=r.italicAngle;var h=1e3/t.unitsPerEm;this.metrics.winAscent=n.sTypoAscender*h,this.metrics.macAscent=i.ascender*h,this.metrics.capHeight=0!==n.sCapHeight?n.sCapHeight:.7*t.unitsPerEm*h,this.metrics.winDescent=n.sTypoDescender*h,this.metrics.macDescent=i.descender*h,this.metrics.leading=(n.sTypoAscender-n.sTypoDescender+n.sTypoLineGap)*h,this.metrics.lineGap=Math.ceil(i.lineGap*h);var p=t.xMin*h,d=Math.ceil(this.metrics.macAscent+this.metrics.lineGap),c=t.xMax*h,u=this.metrics.macDescent;this.metrics.fontBox=new LC(p,d,c,u),this.metrics.stemV=80,this.metrics.widthTable=this.updateWidth(),this.metrics.contains=this.tableDirectory.containsKey("CFF"),this.metrics.subScriptSizeFactor=t.unitsPerEm/n.ySubscriptYSize,this.metrics.superscriptSizeFactor=t.unitsPerEm/n.ySuperscriptYSize},e.prototype.updateWidth=function(){var e=[];if(this.metrics.isSymbol)for(var t=0;t<256;t++){var i=this.getGlyph(String.fromCharCode(t));e[t]=i.empty?0:i.width}else{var n=[],r=String.fromCharCode(32);for(t=0;t<256;t++){n[0]=t;var o=this.getString(n,0,n.length),s=o.length>0?o[0]:"?";(i=this.getGlyph(s)).empty?(i=this.getGlyph(r),e[t]=i.empty?0:i.width):e[t]=i.width}}return e},e.prototype.getDefaultGlyph=function(){return this.getGlyph(mS.whiteSpace)},e.prototype.getString=function(e,t,i){for(var n="",r=0;r<i;r++)n+=String.fromCharCode(e[r+t]);return n},e.prototype.readLocaTable=function(e){var t=this.getTable("loca");this.offset=t.offset;var i=new KS,n=null;if(e){var r=t.length/2;n=[];for(var o=0;o<r;o++)n[o]=2*this.readUInt16(this.offset)}else{r=t.length/4;n=[];for(o=0;o<r;o++)n[o]=this.readUInt32(this.offset)}return i.offsets=n,i},e.prototype.updateGlyphChars=function(e,t){e.containsKey(0)||e.setValue(0,0);for(var i=new Nw,n=e.keys(),r=0;r<n.length;r++)i.setValue(n[r],e.getValue(n[r]));for(r=0;r<n.length;r++){var o=n[r];this.processCompositeGlyph(e,o,t)}},e.prototype.processCompositeGlyph=function(e,t,i){if(t<i.offsets.length-1){var n=i.offsets[t];if(n!==i.offsets[t+1]){var r=this.getTable("glyf");this.offset=r.offset+n;var o=new JS;if(o.numberOfContours=this.readInt16(this.offset),o.xMin=this.readInt16(this.offset),o.yMin=this.readInt16(this.offset),o.xMax=this.readInt16(this.offset),o.yMax=this.readInt16(this.offset),o.numberOfContours<0)for(var s=0;;){var a=this.readUInt16(this.offset),l=this.readUInt16(this.offset);if(e.containsKey(l)||e.setValue(l,0),0==(a&oS.MoreComponents))break;s=0!=(a&oS.Arg1And2AreWords)?4:2,0!=(a&oS.WeHaveScale)?s+=2:0!=(a&oS.WeHaveAnXyScale)?s+=4:0!=(a&oS.WeHaveTwoByTwo)&&(s+=8),this.offset+=s}}}},e.prototype.generateGlyphTable=function(e,t,i,n){i=[];var r=e.keys();r.sort((function(e,t){return e-t}));for(var o=0,s=0;s<r.length;s++){var a=r[s];t.offsets.length>0&&(o+=t.offsets[a+1]-t.offsets[a])}var l=this.align(o);n=[];for(s=0;s<l;s++)n.push(0);var h=0,p=0,d=this.getTable("glyf");for(s=0;s<t.offsets.length;s++)if(i.push(h),p<r.length&&r[p]===s){++p,i[s]=h;var c=t.offsets[s],u=t.offsets[s+1]-c;if(u>0)this.offset=d.offset+c,n=this.read(n,h,u).buffer,h+=u}return{glyphTableSize:o,newLocaTable:i,newGlyphTable:n}},e.prototype.updateLocaTable=function(e,t,i){if(null===e)throw new Error("Argument Null Exception : newLocaTable");for(var n=t?2*e.length:4*e.length,r=this.align(n),o=new ZS(r),s=0;s<e.length;s++){var a=e[s];t?(a/=2,o.writeShort(a)):o.writeInt(a)}return{newLocaUpdated:o.data,newLocaSize:n}},e.prototype.align=function(e){return e+3&-4},e.prototype.getFontProgram=function(e,t,i,n){if(null===e)throw new Error("Argument Null Exception : newLocaTableOut");if(null===t)throw new Error("Argument Null Exception : newGlyphTable");this.tableNames;var r=this.getFontProgramLength(e,t,0),o=r.fontProgramLength,s=r.numTables,a=new ZS(o);a.writeInt(65536),a.writeShort(s);var l=this.entrySelectors[s];return a.writeShort(16*(1<<(31&l))),a.writeShort(l),a.writeShort(16*(s-(1<<(31&l)))),this.writeCheckSums(a,s,e,t,i,n),this.writeGlyphs(a,e,t),a.data},e.prototype.getFontProgramLength=function(e,t,i){if(null===e)throw new Error("Argument Null Exception : newLocaTableOut");if(null===t)throw new Error("Argument Null Exception : newGlyphTable");i=2;for(var n=this.tableNames,r=0,o=0;o<n.length;o++){var s=n[o];if("glyf"!==s&&"loca"!==s){var a=this.getTable(s);a.empty||(++i,r+=this.align(a.length))}}return r+=e.length,r+=t.length,{fontProgramLength:r+=16*i+12,numTables:i}},e.prototype.writeCheckSums=function(e,t,i,n,r,o){if(null===e)throw new Error("Argument Null Exception : writer");if(null===i)throw new Error("Argument Null Exception : newLocaTableOut");if(null===n)throw new Error("Argument Null Exception : newGlyphTable");for(var s=this.tableNames,a=16*t+12,l=0,h=0;h<s.length;h++){var p=s[h],d=this.getTable(p);if(!d.empty){if(e.writeString(p),"glyf"===p){var c=this.calculateCheckSum(n);e.writeInt(c),l=r}else if("loca"===p){c=this.calculateCheckSum(i);e.writeInt(c),l=o}else e.writeInt(d.checksum),l=d.length;e.writeUInt(a),e.writeUInt(l),a+=this.align(l)}}},e.prototype.calculateCheckSum=function(e){if(null===e)throw new Error("Argument Null Exception : bytes");for(var t=0,i=0,n=0,r=0,o=0,s=0;s<(e.length+1)/4;s++)o+=255&e[t++],r+=255&e[t++],n+=255&e[t++],i+=255&e[t++];var a=i;return a+=n<<8,a+=r<<16,a+=o<<24},e.prototype.writeGlyphs=function(e,t,i){if(null===e)throw new Error("Argument Null Exception : writer");if(null===t)throw new Error("Argument Null Exception : newLocaTableOut");if(null===i)throw new Error("Argument Null Exception : newGlyphTable");for(var n=this.tableNames,r=0;r<n.length;r++){var o=n[r],s=this.getTable(o);if(!s.empty)if("glyf"===o)e.writeBytes(i);else if("loca"===o)e.writeBytes(t);else{for(var a=this.align(s.length),l=[],h=0;h<a;h++)l.push(0);this.offset=s.offset;var p=this.read(l,0,s.length);e.writeBytes(p.buffer)}}},e.prototype.setOffset=function(e){this.offset=e},e.prototype.createInternals=function(){this.metrics=new VS;var e=this.readNameTable(),t=this.readHeadTable();this.bIsLocaShort=0===t.indexToLocalFormat;var i=this.readHorizontalHeaderTable(),n=this.readOS2Table(),r=this.readPostTable();this.width=this.readWidthTable(i.numberOfHMetrics,t.unitsPerEm);var o=this.readCmapTable();this.initializeMetrics(e,t,i,n,r,o)},e.prototype.getGlyph=function(e){if("number"==typeof e){var t=null;return this.metrics.isSymbol||null==this.microsoftGlyphs?this.metrics.isSymbol&&null!=this.macintoshGlyphs&&this.macintoshGlyphs.containsKey(e)&&(t=this.macintoshGlyphs.getValue(e)):this.microsoftGlyphs.containsKey(e)&&(t=this.microsoftGlyphs.getValue(e)),null!=t?t:this.getDefaultGlyph()}var i=null,n=e.charCodeAt(0);return this.metrics.isSymbol||null===this.microsoft?(this.metrics.isSymbol&&null!==this.macintosh||this.isMacTTF)&&(0!==this.maxMacIndex?n%=this.maxMacIndex+1:n=61440==(65280&n)?255&n:n,this.macintosh.containsKey(n)&&(i=this.macintosh.getValue(n),this.isFontPresent=!0)):this.microsoft.containsKey(n)?(i=this.microsoft.getValue(n),n!==mS.whiteSpace.charCodeAt(0)&&(this.isFontPresent=!0)):n!==mS.whiteSpace.charCodeAt(0)&&(this.isFontPresent=!1),e===mS.whiteSpace&&null===i&&(i=new US),null!==i?i:this.getDefaultGlyph()},e.prototype.getGlyphChars=function(e){if(null==e)throw new Error("Argument Null Exception : chars");for(var t=new Nw,i=e.keys(),n=0;n<i.length;n++){var r=i[n],o=this.getGlyph(r);o.empty||t.setValue(o.index,r.charCodeAt(0))}return t},e.prototype.getAllGlyphs=function(){for(var e=[],t=new US,i=0,n=0;n<this.width.length;n++){var r=this.width[n];t.index=i,t.width=r,e.push(t),i++}return e},e.prototype.readFontProgram=function(e){var t=this.getGlyphChars(e),i=this.readLocaTable(this.bIsLocaShort);t.size()<e.size()&&(this.missedGlyphs=e.size()-t.size()),this.updateGlyphChars(t,i);var n=this.generateGlyphTable(t,i,null,null),r=n.glyphTableSize,o=n.newLocaTable,s=n.newGlyphTable,a=this.updateLocaTable(o,this.bIsLocaShort,null),l=a.newLocaSize,h=a.newLocaUpdated;return this.getFontProgram(h,s,r,l)},e.prototype.convertString=function(e){if(null===e)throw new Error("Argument Null Exception : text");for(var t="",i=0;i<e.length;i++){var n=e[i],r=this.getGlyph(n);r.empty||(t+=String.fromCharCode(r.index))}return t},e.prototype.getCharWidth=function(e){var t=this.getGlyph(e);return(t=t.empty?this.getDefaultGlyph():t).empty?0:t.width},e.prototype.readString=function(e,t){if(void 0===t)return this.readString(e,!1);var i="";if(t)for(var n=0;n<e;n++)n%2!=0&&(i+=String.fromCharCode(this.fontData[this.offset])),this.offset+=1;else for(n=0;n<e;n++)i+=String.fromCharCode(this.fontData[this.offset]),this.offset+=1;return i},e.prototype.readFixed=function(e){return this.readInt16(e)+this.readInt16(e+2)/16384},e.prototype.readInt32=function(e){var t=this.fontData[e+3],i=this.fontData[e+2],n=this.fontData[e+1],r=this.fontData[e];return this.offset+=4,t+(i<<8)+(n<<16)+(r<<24)},e.prototype.readUInt32=function(e){var t=this.fontData[e+3],i=this.fontData[e+2],n=this.fontData[e+1],r=this.fontData[e];return this.offset+=4,t|i<<8|n<<16|r<<24},e.prototype.readInt16=function(e){var t=(this.fontData[e]<<8)+this.fontData[e+1];return t=32768&t?t-65536:t,this.offset+=2,t},e.prototype.readInt64=function(e){var t=this.readInt32(e+4),i=4294967296*this.readInt32(e)+t;return t<0&&(i+=4294967296),i},e.prototype.readUInt16=function(e){var t=this.fontData[e]<<8|this.fontData[e+1];return this.offset+=2,t},e.prototype.readUshortArray=function(e){for(var t=[],i=0;i<e;i++)t[i]=this.readUInt16(this.offset);return t},e.prototype.readBytes=function(e){for(var t=[],i=0;i<e;i++)t.push(this.fontData[this.offset]),this.offset+=1;return t},e.prototype.readByte=function(e){var t=this.fontData[e];return this.offset+=1,t},e.prototype.read=function(e,t,i){if(null===e)throw new Error("Argument Null Exception : buffer");var n=0,r=0;do{for(var o=0;o<i-n&&this.offset+o<this.fontData.length;o++)e[t+o]=this.fontData[this.offset+o];r=i-n,this.offset+=r,n+=r}while(n<i);return{buffer:e,written:n}},e}(),ex=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tx=function(){function e(){this.lineGap=0}return e.prototype.getAscent=function(e){return this.ascent*xS.charSizeMultiplier*this.getSize(e)},e.prototype.getDescent=function(e){return this.descent*xS.charSizeMultiplier*this.getSize(e)},e.prototype.getLineGap=function(e){return this.lineGap*xS.charSizeMultiplier*this.getSize(e)},e.prototype.getHeight=function(e){for(var t=["cambria","candara","constantia","corbel","cariadings"],i=[],n=0;n<t.length;n++){var r=t[n];i.push(r)}return this.getDescent(e)<0?this.getAscent(e)-this.getDescent(e)+this.getLineGap(e):this.getAscent(e)+this.getDescent(e)+this.getLineGap(e)},e.prototype.getSize=function(e){var t=this.size;if(null!=e)switch(e.subSuperScript){case JC.SubScript:t/=this.subScriptSizeFactor;break;case JC.SuperScript:t/=this.superscriptSizeFactor}return t},e.prototype.clone=function(){return this.widthTable=ix.clone(),this},Object.defineProperty(e.prototype,"widthTable",{get:function(){return this.internalWidthTable},set:function(e){this.internalWidthTable=e},enumerable:!0,configurable:!0}),e}(),ix=function(){function e(){}return e.clone=function(){return null},e}(),nx=function(e){function t(t){var i=e.call(this)||this;if(null==t)throw new Error("ArgumentNullException:widths");return i.widths=t,i}return ex(t,e),t.prototype.items=function(e){if(e<0||e>=this.widths.length)throw new Error("ArgumentOutOfRangeException:index, The character is not supported by the font.");return this.widths[e]},Object.defineProperty(t.prototype,"length",{get:function(){return this.widths.length},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return this.widths=this.widths,this},t.prototype.toArray=function(){return new nC(this.widths)},t}(ix),rx=function(){function e(e,t){if(this.nameString="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this.dictionaryProperties=new Yw,this.isCompress=!1,this.isEmbedFont=!1,this.cmapPrefix="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap"+Kw.newLine+"/CIDSystemInfo << /Registry (Adobe)/Ordering (UCS)/Supplement 0>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange"+Kw.newLine,this.cmapEndCodespaceRange="endcodespacerange"+Kw.newLine,this.cmapBeginRange="beginbfrange"+Kw.newLine,this.cmapEndRange="endbfrange"+Kw.newLine,this.cmapSuffix="endbfrange\nendcmap\nCMapName currentdict /CMap defineresource pop\nend end"+Kw.newLine,null==e)throw new Error("ArgumentNullException:base64String");this.fontSize=t,this.fontString=e,this.Initialize()}return e.prototype.getCharWidth=function(e){return this.ttfReader.getCharWidth(e)},e.prototype.getLineWidth=function(e){for(var t=0,i=0,n=e.length;i<n;i++){var r=e[i];t+=this.getCharWidth(r)}return t},e.prototype.Initialize=function(){var e=new AS(this.fontString.length);e.writeFromBase64String(this.fontString),this.fontData=e.internalBuffer,this.ttfReader=new $S(this.fontData),this.ttfMetrics=this.ttfReader.metrics},e.prototype.createInternals=function(){this.fontDictionary=new Xw,this.fontProgram=new cC,this.cmap=new cC,this.descendantFont=new Xw,this.metrics=new tx,this.ttfReader.createInternals(),this.ttfMetrics=this.ttfReader.metrics,this.initializeMetrics(),this.subsetName=this.getFontName(),this.createDescendantFont(),this.createCmap(),this.createFontDictionary(),this.createFontProgram()},e.prototype.getInternals=function(){return this.fontDictionary},e.prototype.initializeMetrics=function(){var e=this.ttfReader.metrics;this.metrics.ascent=e.macAscent,this.metrics.descent=e.macDescent,this.metrics.height=e.macAscent-e.macDescent+e.lineGap,this.metrics.name=e.fontFamily,this.metrics.postScriptName=e.postScriptName,this.metrics.size=this.fontSize,this.metrics.widthTable=new nx(e.widthTable),this.metrics.lineGap=e.lineGap,this.metrics.subScriptSizeFactor=e.subScriptSizeFactor,this.metrics.superscriptSizeFactor=e.superscriptSizeFactor,this.metrics.isBold=e.isBold},e.prototype.getFontName=function(){for(var e,t="",i=0;i<6;i++){var n=Math.floor(26*Math.random())+0;t+=this.nameString[n]}return t+="+",e=(t+=this.ttfReader.metrics.postScriptName).toString(),e=this.formatName(e)},e.prototype.formatName=function(e){var t=e.replace("(","#28");return(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(")","#29")).replace("[","#5B")).replace("]","#5D")).replace("<","#3C")).replace(">","#3E")).replace("{","#7B")).replace("}","#7D")).replace("/","#2F")).replace("%","#25")).replace(" ","#20")},e.prototype.createDescendantFont=function(){this.descendantFont.isFont=!0,this.descendantFont.descendantFontBeginSave=new Jw(this),this.descendantFont.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.font)),this.descendantFont.items.setValue(this.dictionaryProperties.subtype,new Uw(this.dictionaryProperties.cIDFontType2)),this.descendantFont.items.setValue(this.dictionaryProperties.baseFont,new Uw(this.subsetName)),this.descendantFont.items.setValue(this.dictionaryProperties.cIDToGIDMap,new Uw(this.dictionaryProperties.identity)),this.descendantFont.items.setValue(this.dictionaryProperties.dw,new iC(1e3)),this.fontDescriptor=this.createFontDescriptor(),this.descendantFont.items.setValue(this.dictionaryProperties.fontDescriptor,new vC(this.fontDescriptor));var e=this.createSystemInfo();this.descendantFont.items.setValue(this.dictionaryProperties.cIDSystemInfo,e)},e.prototype.createFontDescriptor=function(){var e=new Xw,t=this.ttfReader.metrics;return e.isFont=!0,e.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.fontDescriptor)),e.items.setValue(this.dictionaryProperties.fontName,new Uw(this.subsetName)),e.items.setValue(this.dictionaryProperties.flags,new iC(this.getDescriptorFlags())),e.items.setValue(this.dictionaryProperties.fontBBox,nC.fromRectangle(this.getBoundBox())),e.items.setValue(this.dictionaryProperties.missingWidth,new iC(t.widthTable[32])),e.items.setValue(this.dictionaryProperties.stemV,new iC(t.stemV)),e.items.setValue(this.dictionaryProperties.italicAngle,new iC(t.italicAngle)),e.items.setValue(this.dictionaryProperties.capHeight,new iC(t.capHeight)),e.items.setValue(this.dictionaryProperties.ascent,new iC(t.winAscent)),e.items.setValue(this.dictionaryProperties.descent,new iC(t.winDescent)),e.items.setValue(this.dictionaryProperties.leading,new iC(t.leading)),e.items.setValue(this.dictionaryProperties.avgWidth,new iC(t.widthTable[32])),e.items.setValue(this.dictionaryProperties.fontFile2,new vC(this.fontProgram)),e.items.setValue(this.dictionaryProperties.maxWidth,new iC(t.widthTable[32])),e.items.setValue(this.dictionaryProperties.xHeight,new iC(0)),e.items.setValue(this.dictionaryProperties.stemH,new iC(0)),e},e.prototype.createCmap=function(){this.cmap.cmapBeginSave=new uC(this)},e.prototype.createFontDictionary=function(){this.fontDictionary.isFont=!0,this.fontDictionary.fontDictionaryBeginSave=new Zw(this),this.fontDictionary.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.font)),this.fontDictionary.items.setValue(this.dictionaryProperties.baseFont,new Uw(this.subsetName)),this.fontDictionary.items.setValue(this.dictionaryProperties.subtype,new Uw(this.dictionaryProperties.type0)),this.fontDictionary.items.setValue(this.dictionaryProperties.encoding,new Uw(this.dictionaryProperties.identityH));var e=new nC,t=new vC(this.descendantFont);e.isFont=!0,e.add(t),this.fontDictionary.items.setValue(this.dictionaryProperties.descendantFonts,e)},e.prototype.createFontProgram=function(){this.fontProgram.fontProgramBeginSave=new gC(this)},e.prototype.createSystemInfo=function(){var e=new Xw;return e.items.setValue(this.dictionaryProperties.registry,new mC("Adobe")),e.items.setValue(this.dictionaryProperties.ordering,new mC(this.dictionaryProperties.identity)),e.items.setValue(this.dictionaryProperties.supplement,new iC(0)),e},e.prototype.descendantFontBeginSave=function(){if(null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0){var e=this.getDescendantWidth();null!==e&&this.descendantFont.items.setValue(this.dictionaryProperties.w,e)}},e.prototype.cmapBeginSave=function(){this.generateCmap()},e.prototype.fontDictionaryBeginSave=function(){null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0&&!this.fontDictionary.containsKey(this.dictionaryProperties.toUnicode)&&this.fontDictionary.items.setValue(this.dictionaryProperties.toUnicode,new vC(this.cmap))},e.prototype.fontProgramBeginSave=function(){this.isCompress=!0,this.generateFontProgram()},e.prototype.getDescendantWidth=function(){var e=new nC;if(null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0){for(var t=[],i=this.usedChars.keys(),n=0;n<i.length;n++){var r=i[n];(h=this.ttfReader.getGlyph(r)).empty||t.push(h)}t.sort((function(e,t){return e.index-t.index}));var o=0,s=0,a=!1,l=new nC;for(n=0;n<t.length;n++){var h=t[n];a||(a=!0,o=h.index,s=h.index-1),(s+1!==h.index||n+1===t.length)&&t.length>1&&(e.add(new iC(o)),0!==n&&e.add(l),o=h.index,l=new nC),l.add(new iC(h.width)),n+1===t.length&&(e.add(new iC(o)),e.add(l)),s=h.index}}return e},e.prototype.generateCmap=function(){if(null!==this.usedChars&&void 0!==this.usedChars&&this.usedChars.size()>0){var e=this.ttfReader.getGlyphChars(this.usedChars);if(e.size()>0){var t=e.keys().sort(),i=t[0],n=t[t.length-1],r=this.toHexString(i,!1)+this.toHexString(n,!1)+Kw.newLine,o="";o+=this.cmapPrefix,o+=r,o+=this.cmapEndCodespaceRange;for(var s=0,a=0;a<t.length;a++){0===s&&(0!==a&&(o+=this.cmapEndRange),o+=s=Math.min(100,t.length-a),o+=Kw.whiteSpace,o+=this.cmapBeginRange),s-=1;var l=t[a];o+=this.toHexString(l,!0)+this.toHexString(l,!0)+this.toHexString(e.getValue(l),!0)+"\n"}o+=this.cmapSuffix,this.cmap.clearStream(),this.cmap.isFont=!0,this.cmap.write(o)}}},e.prototype.generateFontProgram=function(){var e;this.usedChars=null===this.usedChars||void 0===this.usedChars?new Nw:this.usedChars,this.ttfReader.setOffset(0),e=this.ttfReader.readFontProgram(this.usedChars),this.fontProgram.clearStream(),this.fontProgram.isFont=!0,this.fontProgram.writeBytes(e)},e.prototype.getDescriptorFlags=function(){var e=0,t=this.ttfReader.metrics;return t.isFixedPitch&&(e|=rS.FixedPitch),t.isSymbol?e|=rS.Symbolic:e|=rS.Nonsymbolic,t.isItalic&&(e|=rS.Italic),t.isBold&&(e|=rS.ForceBold),e},e.prototype.getBoundBox=function(){var e=this.ttfReader.metrics.fontBox,t=Math.abs(e.right-e.left),i=Math.abs(e.top-e.bottom);return new MC(e.left,e.bottom,t,i)},e.prototype.toHexString=function(e,t){var i=e.toString(16);return t&&(i=i.toUpperCase()),"<0000".substring(0,5-i.length)+i+">"},e.prototype.setSymbols=function(e){if(null===e)throw new Error("Argument Null Exception : text");null!==this.usedChars&&void 0!==this.usedChars||(this.usedChars=new Nw);for(var t=0;t<e.length;t++){var i=e[t];this.usedChars.setValue(i,String.fromCharCode(0))}!1===this.isEmbedFont&&this.getDescendantWidth()},e}(),ox=function(){function e(){this.arabicCharTable=[["Ø¡","ïº€"],["Ø¢","ïº","ïº‚"],["Ø£","ïºƒ","ïº„"],["Ø¤","ïº…","ïº†"],["Ø¥","ïº‡","ïºˆ"],["Ø¦","ïº‰","ïºŠ","ïº‹","ïºŒ"],["Ø§","ïº","ïºŽ"],["Ø¨","ïº","ïº","ïº‘","ïº’"],["Ø©","ïº“","ïº”"],["Øª","ïº•","ïº–","ïº—","ïº˜"],["Ø«","ïº™","ïºš","ïº›","ïºœ"],["Ø¬","ïº","ïºž","ïºŸ","ïº "],["Ø­","ïº¡","ïº¢","ïº£","ïº¤"],["Ø®","ïº¥","ïº¦","ïº§","ïº¨"],["Ø¯","ïº©","ïºª"],["Ø°","ïº«","ïº¬"],["Ø±","ïº­","ïº®"],["Ø²","ïº¯","ïº°"],["Ø³","ïº±","ïº²","ïº³","ïº´"],["Ø´","ïºµ","ïº¶","ïº·","ïº¸"],["Øµ","ïº¹","ïºº","ïº»","ïº¼"],["Ø¶","ïº½","ïº¾","ïº¿","ï»€"],["Ø·","ï»","ï»‚","ï»ƒ","ï»„"],["Ø¸","ï»…","ï»†","ï»‡","ï»ˆ"],["Ø¹","ï»‰","ï»Š","ï»‹","ï»Œ"],["Øº","ï»","ï»Ž","ï»","ï»"],["Ù€","Ù€","Ù€","Ù€","Ù€"],["Ù","ï»‘","ï»’","ï»“","ï»”"],["Ù‚","ï»•","ï»–","ï»—","ï»˜"],["Ùƒ","ï»™","ï»š","ï»›","ï»œ"],["Ù„","ï»","ï»ž","ï»Ÿ","ï» "],["Ù…","ï»¡","ï»¢","ï»£","ï»¤"],["Ù†","ï»¥","ï»¦","ï»§","ï»¨"],["Ù‡","ï»©","ï»ª","ï»«","ï»¬"],["Ùˆ","ï»­","ï»®"],["Ù‰","ï»¯","ï»°","ï¯¨","ï¯©"],["ÙŠ","ï»±","ï»²","ï»³","ï»´"],["Ù±","ï­","ï­‘"],["Ù¹","ï­¦","ï­§","ï­¨","ï­©"],["Ùº","ï­ž","ï­Ÿ","ï­ ","ï­¡"],["Ù»","ï­’","ï­“","ï­”","ï­•"],["Ù¾","ï­–","ï­—","ï­˜","ï­™"],["Ù¿","ï­¢","ï­£","ï­¤","ï­¥"],["Ú€","ï­š","ï­›","ï­œ","ï­"],["Úƒ","ï­¶","ï­·","ï­¸","ï­¹"],["Ú„","ï­²","ï­³","ï­´","ï­µ"],["Ú†","ï­º","ï­»","ï­¼","ï­½"],["Ú‡","ï­¾","ï­¿","ï®€","ï®"],["Úˆ","ï®ˆ","ï®‰"],["ÚŒ","ï®„","ï®…"],["Ú","ï®‚","ï®ƒ"],["ÚŽ","ï®†","ï®‡"],["Ú‘","ï®Œ","ï®"],["Ú˜","ï®Š","ï®‹"],["Ú¤","ï­ª","ï­«","ï­¬","ï­­"],["Ú¦","ï­®","ï­¯","ï­°","ï­±"],["Ú©","ï®Ž","ï®","ï®","ï®‘"],["Ú­","ï¯“","ï¯”","ï¯•","ï¯–"],["Ú¯","ï®’","ï®“","ï®”","ï®•"],["Ú±","ï®š","ï®›","ï®œ","ï®"],["Ú³","ï®–","ï®—","ï®˜","ï®™"],["Úº","ï®ž","ï®Ÿ"],["Ú»","ï® ","ï®¡","ï®¢","ï®£"],["Ú¾","ï®ª","ï®«","ï®¬","ï®­"],["Û€","ï®¤","ï®¥"],["Û","ï®¦","ï®§","ï®¨","ï®©"],["Û…","ï¯ ","ï¯¡"],["Û†","ï¯™","ï¯š"],["Û‡","ï¯—","ï¯˜"],["Ûˆ","ï¯›","ï¯œ"],["Û‰","ï¯¢","ï¯£"],["Û‹","ï¯ž","ï¯Ÿ"],["ÛŒ","ï¯¼","ï¯½","ï¯¾","ï¯¿"],["Û","ï¯¤","ï¯¥","ï¯¦","ï¯§"],["Û’","ï®®","ï®¯"],["Û“","ï®°","ï®±"]],this.alef="Ø§",this.alefHamza="Ø£",this.alefHamzaBelow="Ø¥",this.alefMadda="Ø¢",this.lam="Ù„",this.hamza="Ø¡",this.zeroWidthJoiner="â€",this.hamzaAbove="Ù”",this.hamzaBelow="Ù•",this.wawHamza="Ø¤",this.yehHamza="Ø¦",this.waw="Ùˆ",this.alefMaksura="Ù‰",this.yeh="ÙŠ",this.farsiYeh="ÛŒ",this.shadda="Ù‘",this.madda="Ù“",this.lwa="ï»»",this.lwawh="ï»·",this.lwawhb="ï»¹",this.lwawm="ï»µ",this.bwhb="Û“",this.fathatan="Ù‹",this.superScriptalef="Ù°",this.vowel=1,this.arabicMapTable=new Nw;for(var e=0;e<this.arabicCharTable.length;e++)this.arabicMapTable.setValue(this.arabicCharTable[e][0],this.arabicCharTable[e])}return e.prototype.getCharacterShape=function(e,t){if(e>=this.hamza&&e<=this.bwhb){if(this.arabicMapTable.getValue(e))return this.arabicMapTable.getValue(e)[t+1]}else if(e>=this.lwawm&&e<=this.lwa)return e;return e},e.prototype.shape=function(e,t){for(var i="",n="",r=0;r<e.length;r++){var o=e[r];if(o>="Ø€"&&o<="Û¿")n+=o;else{if(n.length>0)i+=this.doShape(n.toString(),0),n="";i+=o}}n.length>0&&(i+=this.doShape(n.toString(),0));return i.toString()},e.prototype.doShape=function(e,t){for(var i="",n=0,r=0,o="",s=new sx,a=new sx;r<e.length;)if(o=e[r++],0===this.ligature(o,a)){var l=this.getShapeCount(o);n=1===l?0:2,s.Shapes>2&&(n+=1),n%=a.Shapes,a.Value=this.getCharacterShape(a.Value,n),i=this.append(i,s,t),s=a,(a=new sx).Value=o,a.Shapes=l,a.Ligature++}return n=s.Shapes>2?1:0,n%=a.Shapes,a.Value=this.getCharacterShape(a.Value,n),i=this.append(i,s,t),(i=this.append(i,a,t)).toString()},e.prototype.append=function(e,t,i){return""!==t.Value&&(e+=t.Value,t.Ligature-=1,""!==t.Type&&(0==(i&this.vowel)?(e+=t.Type,t.Ligature-=1):t.Ligature-=1),""!==t.vowel&&(0==(i&this.vowel)?(e+=t.vowel,t.Ligature-=1):t.Ligature-=1)),e},e.prototype.ligature=function(e,t){if(""!==t.Value){var i=0;if(e>=this.fathatan&&e<=this.hamzaBelow||e===this.superScriptalef){if(i=1,""!==t.vowel&&e!==this.shadda&&(i=2),e===this.shadda){if(null!=t.Type)return 0;t.Type=this.shadda}else e===this.hamzaBelow?t.Value===this.alef?(t.Value=this.alefHamzaBelow,i=2):e===this.lwa?(t.Value=this.lwawhb,i=2):t.Type=this.hamzaBelow:e===this.hamzaAbove?t.Value===this.alef?(t.Value=this.alefHamza,i=2):t.Value===this.lwa?(t.Value=this.lwawh,i=2):t.Value===this.waw?(t.Value=this.wawHamza,i=2):t.Value===this.yeh||t.Value===this.alefMaksura||t.Value===this.farsiYeh?(t.Value=this.yehHamza,i=2):t.Type=this.hamzaAbove:e===this.madda?t.Value===this.alef&&(t.Value=this.alefMadda,i=2):t.vowel=e;return 1===i&&t.Ligature++,i}return""!==t.vowel?0:(t.Value===this.lam&&(e===this.alef?(t.Value=this.lwa,t.Shapes=2,i=3):e===this.alefHamza?(t.Value=this.lwawh,t.Shapes=2,i=3):e===this.alefHamzaBelow?(t.Value=this.lwawhb,t.Shapes=2,i=3):e===this.alefMadda&&(t.Value=this.lwawm,t.Shapes=2,i=3)),i)}return 0},e.prototype.getShapeCount=function(e){if(e>=this.hamza&&e<=this.bwhb&&!(e>=this.fathatan&&e<=this.hamzaBelow||e===this.superScriptalef)){if(this.arabicMapTable.getValue(e))return this.arabicMapTable.getValue(e).length-1}else if(e===this.zeroWidthJoiner)return 4;return 1},e}(),sx=function(){function e(){this.shapeValue="",this.shapeType="",this.shapeVowel="",this.shapeLigature=0,this.shapeShapes=1}return Object.defineProperty(e.prototype,"Value",{get:function(){return this.shapeValue},set:function(e){this.shapeValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this.shapeType},set:function(e){this.shapeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vowel",{get:function(){return this.shapeVowel},set:function(e){this.shapeVowel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Ligature",{get:function(){return this.shapeLigature},set:function(e){this.shapeLigature=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Shapes",{get:function(){return this.shapeShapes},set:function(e){this.shapeShapes=e},enumerable:!0,configurable:!0}),e}(),ax=function(){function e(){this.indexes=[],this.indexLevels=[],this.mirroringShapeCharacters=new Nw,this.update()}return e.prototype.doMirrorShaping=function(e){for(var t=[],i=0;i<e.length;i++)1==(1&this.indexLevels[i])&&this.mirroringShapeCharacters.containsKey(e[i].charCodeAt(0))?t[i]=String.fromCharCode(this.mirroringShapeCharacters.getValue(e[i].charCodeAt(0))):t[i]=e[i].toString();for(var n="",r=0;r<t.length;r++)n+=t[r];return n},e.prototype.getLogicalToVisualString=function(e,t){var i=new lx;this.indexLevels=i.getVisualOrder(e,t),this.setDefaultIndexLevel(),this.doOrder(0,this.indexLevels.length-1);for(var n=this.doMirrorShaping(e),r="",o=0;o<this.indexes.length;o++){r+=n[this.indexes[o]]}return r.toString()},e.prototype.setDefaultIndexLevel=function(){for(var e=0;e<this.indexLevels.length;e++)this.indexes[e]=e},e.prototype.doOrder=function(e,t){for(var i=this.indexLevels[e],n=i,r=i,o=i,s=e+1;s<=t;++s){var a=this.indexLevels[s];a>i?i=a:a<n&&(n=a),r&=a,o|=a}if(0!=(1&o))if(1!=(1&r))for(n|=1;i>=n;){for(var l=e;;){for(;l<=t&&!(this.indexLevels[l]>=i);)l+=1;if(l>t)break;for(var h=l+1;h<=t&&!(this.indexLevels[h]<i);)h+=1;this.reArrange(l,h),l=h+1}i-=1}else this.reArrange(e,t+1)},e.prototype.reArrange=function(e,t){var i=(e+t)/2;for(--t;e<i;++e,--t){var n=this.indexes[e];this.indexes[e]=this.indexes[t],this.indexes[t]=n}},e.prototype.update=function(){this.mirroringShapeCharacters.setValue(40,41),this.mirroringShapeCharacters.setValue(41,40),this.mirroringShapeCharacters.setValue(60,62),this.mirroringShapeCharacters.setValue(62,60),this.mirroringShapeCharacters.setValue(91,93),this.mirroringShapeCharacters.setValue(93,91),this.mirroringShapeCharacters.setValue(123,125),this.mirroringShapeCharacters.setValue(125,123),this.mirroringShapeCharacters.setValue(171,187),this.mirroringShapeCharacters.setValue(187,171),this.mirroringShapeCharacters.setValue(8249,8250),this.mirroringShapeCharacters.setValue(8250,8249),this.mirroringShapeCharacters.setValue(8261,8262),this.mirroringShapeCharacters.setValue(8262,8261),this.mirroringShapeCharacters.setValue(8317,8318),this.mirroringShapeCharacters.setValue(8318,8317),this.mirroringShapeCharacters.setValue(8333,8334),this.mirroringShapeCharacters.setValue(8334,8333),this.mirroringShapeCharacters.setValue(8712,8715),this.mirroringShapeCharacters.setValue(8713,8716),this.mirroringShapeCharacters.setValue(8714,8717),this.mirroringShapeCharacters.setValue(8715,8712),this.mirroringShapeCharacters.setValue(8716,8713),this.mirroringShapeCharacters.setValue(8717,8714),this.mirroringShapeCharacters.setValue(8725,10741),this.mirroringShapeCharacters.setValue(8764,8765),this.mirroringShapeCharacters.setValue(8765,8764),this.mirroringShapeCharacters.setValue(8771,8909),this.mirroringShapeCharacters.setValue(8786,8787),this.mirroringShapeCharacters.setValue(8787,8786),this.mirroringShapeCharacters.setValue(8788,8789),this.mirroringShapeCharacters.setValue(8789,8788),this.mirroringShapeCharacters.setValue(8804,8805),this.mirroringShapeCharacters.setValue(8805,8804),this.mirroringShapeCharacters.setValue(8806,8807),this.mirroringShapeCharacters.setValue(8807,8806),this.mirroringShapeCharacters.setValue(8808,8809),this.mirroringShapeCharacters.setValue(8809,8808),this.mirroringShapeCharacters.setValue(8810,8811),this.mirroringShapeCharacters.setValue(8811,8810),this.mirroringShapeCharacters.setValue(8814,8815),this.mirroringShapeCharacters.setValue(8815,8814),this.mirroringShapeCharacters.setValue(8816,8817),this.mirroringShapeCharacters.setValue(8817,8816),this.mirroringShapeCharacters.setValue(8818,8819),this.mirroringShapeCharacters.setValue(8819,8818),this.mirroringShapeCharacters.setValue(8820,8821),this.mirroringShapeCharacters.setValue(8821,8820),this.mirroringShapeCharacters.setValue(8822,8823),this.mirroringShapeCharacters.setValue(8823,8822),this.mirroringShapeCharacters.setValue(8824,8825),this.mirroringShapeCharacters.setValue(8825,8824),this.mirroringShapeCharacters.setValue(8826,8827),this.mirroringShapeCharacters.setValue(8827,8826),this.mirroringShapeCharacters.setValue(8828,8829),this.mirroringShapeCharacters.setValue(8829,8828),this.mirroringShapeCharacters.setValue(8830,8831),this.mirroringShapeCharacters.setValue(8831,8830),this.mirroringShapeCharacters.setValue(8832,8833),this.mirroringShapeCharacters.setValue(8833,8832),this.mirroringShapeCharacters.setValue(8834,8835),this.mirroringShapeCharacters.setValue(8835,8834),this.mirroringShapeCharacters.setValue(8836,8837),this.mirroringShapeCharacters.setValue(8837,8836),this.mirroringShapeCharacters.setValue(8838,8839),this.mirroringShapeCharacters.setValue(8839,8838),this.mirroringShapeCharacters.setValue(8840,8841),this.mirroringShapeCharacters.setValue(8841,8840),this.mirroringShapeCharacters.setValue(8842,8843),this.mirroringShapeCharacters.setValue(8843,8842),this.mirroringShapeCharacters.setValue(8847,8848),this.mirroringShapeCharacters.setValue(8848,8847),this.mirroringShapeCharacters.setValue(8849,8850),this.mirroringShapeCharacters.setValue(8850,8849),this.mirroringShapeCharacters.setValue(8856,10680),this.mirroringShapeCharacters.setValue(8866,8867),this.mirroringShapeCharacters.setValue(8867,8866),this.mirroringShapeCharacters.setValue(8870,10974),this.mirroringShapeCharacters.setValue(8872,10980),this.mirroringShapeCharacters.setValue(8873,10979),this.mirroringShapeCharacters.setValue(8875,10981),this.mirroringShapeCharacters.setValue(8880,8881),this.mirroringShapeCharacters.setValue(8881,8880),this.mirroringShapeCharacters.setValue(8882,8883),this.mirroringShapeCharacters.setValue(8883,8882),this.mirroringShapeCharacters.setValue(8884,8885),this.mirroringShapeCharacters.setValue(8885,8884),this.mirroringShapeCharacters.setValue(8886,8887),this.mirroringShapeCharacters.setValue(8887,8886),this.mirroringShapeCharacters.setValue(8905,8906),this.mirroringShapeCharacters.setValue(8906,8905),this.mirroringShapeCharacters.setValue(8907,8908),this.mirroringShapeCharacters.setValue(8908,8907),this.mirroringShapeCharacters.setValue(8909,8771),this.mirroringShapeCharacters.setValue(8912,8913),this.mirroringShapeCharacters.setValue(8913,8912),this.mirroringShapeCharacters.setValue(8918,8919),this.mirroringShapeCharacters.setValue(8919,8918),this.mirroringShapeCharacters.setValue(8920,8921),this.mirroringShapeCharacters.setValue(8921,8920),this.mirroringShapeCharacters.setValue(8922,8923),this.mirroringShapeCharacters.setValue(8923,8922),this.mirroringShapeCharacters.setValue(8924,8925),this.mirroringShapeCharacters.setValue(8925,8924),this.mirroringShapeCharacters.setValue(8926,8927),this.mirroringShapeCharacters.setValue(8927,8926),this.mirroringShapeCharacters.setValue(8928,8929),this.mirroringShapeCharacters.setValue(8929,8928),this.mirroringShapeCharacters.setValue(8930,8931),this.mirroringShapeCharacters.setValue(8931,8930),this.mirroringShapeCharacters.setValue(8932,8933),this.mirroringShapeCharacters.setValue(8933,8932),this.mirroringShapeCharacters.setValue(8934,8935),this.mirroringShapeCharacters.setValue(8935,8934),this.mirroringShapeCharacters.setValue(8936,8937),this.mirroringShapeCharacters.setValue(8937,8936),this.mirroringShapeCharacters.setValue(8938,8939),this.mirroringShapeCharacters.setValue(8939,8938),this.mirroringShapeCharacters.setValue(8940,8941),this.mirroringShapeCharacters.setValue(8941,8940),this.mirroringShapeCharacters.setValue(8944,8945),this.mirroringShapeCharacters.setValue(8945,8944),this.mirroringShapeCharacters.setValue(8946,8954),this.mirroringShapeCharacters.setValue(8947,8955),this.mirroringShapeCharacters.setValue(8948,8956),this.mirroringShapeCharacters.setValue(8950,8957),this.mirroringShapeCharacters.setValue(8951,8958),this.mirroringShapeCharacters.setValue(8954,8946),this.mirroringShapeCharacters.setValue(8955,8947),this.mirroringShapeCharacters.setValue(8956,8948),this.mirroringShapeCharacters.setValue(8957,8950),this.mirroringShapeCharacters.setValue(8958,8951),this.mirroringShapeCharacters.setValue(8968,8969),this.mirroringShapeCharacters.setValue(8969,8968),this.mirroringShapeCharacters.setValue(8970,8971),this.mirroringShapeCharacters.setValue(8971,8970),this.mirroringShapeCharacters.setValue(9001,9002),this.mirroringShapeCharacters.setValue(9002,9001),this.mirroringShapeCharacters.setValue(10088,10089),this.mirroringShapeCharacters.setValue(10089,10088),this.mirroringShapeCharacters.setValue(10090,10091),this.mirroringShapeCharacters.setValue(10091,10090),this.mirroringShapeCharacters.setValue(10092,10093),this.mirroringShapeCharacters.setValue(10093,10092),this.mirroringShapeCharacters.setValue(10094,10095),this.mirroringShapeCharacters.setValue(10095,10094),this.mirroringShapeCharacters.setValue(10096,10097),this.mirroringShapeCharacters.setValue(10097,10096),this.mirroringShapeCharacters.setValue(10098,10099),this.mirroringShapeCharacters.setValue(10099,10098),this.mirroringShapeCharacters.setValue(10100,10101),this.mirroringShapeCharacters.setValue(10101,10100),this.mirroringShapeCharacters.setValue(10197,10198),this.mirroringShapeCharacters.setValue(10198,10197),this.mirroringShapeCharacters.setValue(10205,10206),this.mirroringShapeCharacters.setValue(10206,10205),this.mirroringShapeCharacters.setValue(10210,10211),this.mirroringShapeCharacters.setValue(10211,10210),this.mirroringShapeCharacters.setValue(10212,10213),this.mirroringShapeCharacters.setValue(10213,10212),this.mirroringShapeCharacters.setValue(10214,10215),this.mirroringShapeCharacters.setValue(10215,10214),this.mirroringShapeCharacters.setValue(10216,10217),this.mirroringShapeCharacters.setValue(10217,10216),this.mirroringShapeCharacters.setValue(10218,10219),this.mirroringShapeCharacters.setValue(10219,10218),this.mirroringShapeCharacters.setValue(10627,10628),this.mirroringShapeCharacters.setValue(10628,10627),this.mirroringShapeCharacters.setValue(10629,10630),this.mirroringShapeCharacters.setValue(10630,10629),this.mirroringShapeCharacters.setValue(10631,10632),this.mirroringShapeCharacters.setValue(10632,10631),this.mirroringShapeCharacters.setValue(10633,10634),this.mirroringShapeCharacters.setValue(10634,10633),this.mirroringShapeCharacters.setValue(10635,10636),this.mirroringShapeCharacters.setValue(10636,10635),this.mirroringShapeCharacters.setValue(10637,10640),this.mirroringShapeCharacters.setValue(10638,10639),this.mirroringShapeCharacters.setValue(10639,10638),this.mirroringShapeCharacters.setValue(10640,10637),this.mirroringShapeCharacters.setValue(10641,10642),this.mirroringShapeCharacters.setValue(10642,10641),this.mirroringShapeCharacters.setValue(10643,10644),this.mirroringShapeCharacters.setValue(10644,10643),this.mirroringShapeCharacters.setValue(10645,10646),this.mirroringShapeCharacters.setValue(10646,10645),this.mirroringShapeCharacters.setValue(10647,10648),this.mirroringShapeCharacters.setValue(10648,10647),this.mirroringShapeCharacters.setValue(10680,8856),this.mirroringShapeCharacters.setValue(10688,10689),this.mirroringShapeCharacters.setValue(10689,10688),this.mirroringShapeCharacters.setValue(10692,10693),this.mirroringShapeCharacters.setValue(10693,10692),this.mirroringShapeCharacters.setValue(10703,10704),this.mirroringShapeCharacters.setValue(10704,10703),this.mirroringShapeCharacters.setValue(10705,10706),this.mirroringShapeCharacters.setValue(10706,10705),this.mirroringShapeCharacters.setValue(10708,10709),this.mirroringShapeCharacters.setValue(10709,10708),this.mirroringShapeCharacters.setValue(10712,10713),this.mirroringShapeCharacters.setValue(10713,10712),this.mirroringShapeCharacters.setValue(10714,10715),this.mirroringShapeCharacters.setValue(10715,10714),this.mirroringShapeCharacters.setValue(10741,8725),this.mirroringShapeCharacters.setValue(10744,10745),this.mirroringShapeCharacters.setValue(10745,10744),this.mirroringShapeCharacters.setValue(10748,10749),this.mirroringShapeCharacters.setValue(10749,10748),this.mirroringShapeCharacters.setValue(10795,10796),this.mirroringShapeCharacters.setValue(10796,10795),this.mirroringShapeCharacters.setValue(10797,10796),this.mirroringShapeCharacters.setValue(10798,10797),this.mirroringShapeCharacters.setValue(10804,10805),this.mirroringShapeCharacters.setValue(10805,10804),this.mirroringShapeCharacters.setValue(10812,10813),this.mirroringShapeCharacters.setValue(10813,10812),this.mirroringShapeCharacters.setValue(10852,10853),this.mirroringShapeCharacters.setValue(10853,10852),this.mirroringShapeCharacters.setValue(10873,10874),this.mirroringShapeCharacters.setValue(10874,10873),this.mirroringShapeCharacters.setValue(10877,10878),this.mirroringShapeCharacters.setValue(10878,10877),this.mirroringShapeCharacters.setValue(10879,10880),this.mirroringShapeCharacters.setValue(10880,10879),this.mirroringShapeCharacters.setValue(10881,10882),this.mirroringShapeCharacters.setValue(10882,10881),this.mirroringShapeCharacters.setValue(10883,10884),this.mirroringShapeCharacters.setValue(10884,10883),this.mirroringShapeCharacters.setValue(10891,10892),this.mirroringShapeCharacters.setValue(10892,10891),this.mirroringShapeCharacters.setValue(10897,10898),this.mirroringShapeCharacters.setValue(10898,10897),this.mirroringShapeCharacters.setValue(10899,10900),this.mirroringShapeCharacters.setValue(10900,10899),this.mirroringShapeCharacters.setValue(10901,10902),this.mirroringShapeCharacters.setValue(10902,10901),this.mirroringShapeCharacters.setValue(10903,10904),this.mirroringShapeCharacters.setValue(10904,10903),this.mirroringShapeCharacters.setValue(10905,10906),this.mirroringShapeCharacters.setValue(10906,10905),this.mirroringShapeCharacters.setValue(10907,10908),this.mirroringShapeCharacters.setValue(10908,10907),this.mirroringShapeCharacters.setValue(10913,10914),this.mirroringShapeCharacters.setValue(10914,10913),this.mirroringShapeCharacters.setValue(10918,10919),this.mirroringShapeCharacters.setValue(10919,10918),this.mirroringShapeCharacters.setValue(10920,10921),this.mirroringShapeCharacters.setValue(10921,10920),this.mirroringShapeCharacters.setValue(10922,10923),this.mirroringShapeCharacters.setValue(10923,10922),this.mirroringShapeCharacters.setValue(10924,10925),this.mirroringShapeCharacters.setValue(10925,10924),this.mirroringShapeCharacters.setValue(10927,10928),this.mirroringShapeCharacters.setValue(10928,10927),this.mirroringShapeCharacters.setValue(10931,10932),this.mirroringShapeCharacters.setValue(10932,10931),this.mirroringShapeCharacters.setValue(10939,10940),this.mirroringShapeCharacters.setValue(10940,10939),this.mirroringShapeCharacters.setValue(10941,10942),this.mirroringShapeCharacters.setValue(10942,10941),this.mirroringShapeCharacters.setValue(10943,10944),this.mirroringShapeCharacters.setValue(10944,10943),this.mirroringShapeCharacters.setValue(10945,10946),this.mirroringShapeCharacters.setValue(10946,10945),this.mirroringShapeCharacters.setValue(10947,10948),this.mirroringShapeCharacters.setValue(10948,10947),this.mirroringShapeCharacters.setValue(10949,10950),this.mirroringShapeCharacters.setValue(10950,10949),this.mirroringShapeCharacters.setValue(10957,10958),this.mirroringShapeCharacters.setValue(10958,10957),this.mirroringShapeCharacters.setValue(10959,10960),this.mirroringShapeCharacters.setValue(10960,10959),this.mirroringShapeCharacters.setValue(10961,10962),this.mirroringShapeCharacters.setValue(10962,10961),this.mirroringShapeCharacters.setValue(10963,10964),this.mirroringShapeCharacters.setValue(10964,10963),this.mirroringShapeCharacters.setValue(10965,10966),this.mirroringShapeCharacters.setValue(10966,10965),this.mirroringShapeCharacters.setValue(10974,8870),this.mirroringShapeCharacters.setValue(10979,8873),this.mirroringShapeCharacters.setValue(10980,8872),this.mirroringShapeCharacters.setValue(10981,8875),this.mirroringShapeCharacters.setValue(10988,10989),this.mirroringShapeCharacters.setValue(10989,10988),this.mirroringShapeCharacters.setValue(10999,11e3),this.mirroringShapeCharacters.setValue(11e3,10999),this.mirroringShapeCharacters.setValue(11001,11002),this.mirroringShapeCharacters.setValue(11002,11001),this.mirroringShapeCharacters.setValue(12296,12297),this.mirroringShapeCharacters.setValue(12297,12296),this.mirroringShapeCharacters.setValue(12298,12299),this.mirroringShapeCharacters.setValue(12299,12298),this.mirroringShapeCharacters.setValue(12300,12301),this.mirroringShapeCharacters.setValue(12301,12300),this.mirroringShapeCharacters.setValue(12302,12303),this.mirroringShapeCharacters.setValue(12303,12302),this.mirroringShapeCharacters.setValue(12304,12305),this.mirroringShapeCharacters.setValue(12305,12304),this.mirroringShapeCharacters.setValue(12308,12309),this.mirroringShapeCharacters.setValue(12309,12308),this.mirroringShapeCharacters.setValue(12310,12311),this.mirroringShapeCharacters.setValue(12311,12310),this.mirroringShapeCharacters.setValue(12312,12313),this.mirroringShapeCharacters.setValue(12313,12312),this.mirroringShapeCharacters.setValue(12314,12315),this.mirroringShapeCharacters.setValue(12315,12314),this.mirroringShapeCharacters.setValue(65288,65289),this.mirroringShapeCharacters.setValue(65289,65288),this.mirroringShapeCharacters.setValue(65308,65310),this.mirroringShapeCharacters.setValue(65310,65308),this.mirroringShapeCharacters.setValue(65339,65341),this.mirroringShapeCharacters.setValue(65341,65339),this.mirroringShapeCharacters.setValue(65371,65373),this.mirroringShapeCharacters.setValue(65373,65371),this.mirroringShapeCharacters.setValue(65375,65376),this.mirroringShapeCharacters.setValue(65376,65375),this.mirroringShapeCharacters.setValue(65378,65379),this.mirroringShapeCharacters.setValue(65379,65378)},e}(),lx=function(){function e(){this.types=[],this.textOrder=-1,this.rtlCharacterTypes=new Array(65536),this.L=0,this.LRE=1,this.LRO=2,this.R=3,this.AL=4,this.RLE=5,this.RLO=6,this.PDF=7,this.EN=8,this.ES=9,this.ET=10,this.AN=11,this.CS=12,this.NSM=13,this.BN=14,this.B=15,this.S=16,this.WS=17,this.ON=18,this.charTypes=[this.L,this.EN,this.BN,this.ES,this.ES,this.S,this.ET,this.ET,this.B,this.AN,this.AN,this.S,this.CS,this.CS,this.WS,this.NSM,this.NSM,this.B,this.BN,27,this.BN,28,30,this.B,31,31,this.S,32,32,this.WS,33,34,this.ON,35,37,this.ET,38,42,this.ON,43,43,this.ET,44,44,this.CS,45,45,this.ET,46,46,this.CS,47,47,this.CS,48,57,this.EN,58,58,this.CS,59,64,this.ON,65,90,this.L,91,96,this.ON,97,122,this.L,123,126,this.ON,127,132,this.BN,133,133,this.B,134,159,this.BN,160,160,this.CS,161,161,this.ON,162,165,this.ET,166,169,this.ON,170,170,this.L,171,175,this.ON,176,177,this.ET,178,179,this.EN,180,180,this.ON,181,181,this.L,182,184,this.ON,185,185,this.EN,186,186,this.L,187,191,this.ON,192,214,this.L,215,215,this.ON,216,246,this.L,247,247,this.ON,248,696,this.L,697,698,this.ON,699,705,this.L,706,719,this.ON,720,721,this.L,722,735,this.ON,736,740,this.L,741,749,this.ON,750,750,this.L,751,767,this.ON,768,855,this.NSM,856,860,this.L,861,879,this.NSM,880,883,this.L,884,885,this.ON,886,893,this.L,894,894,this.ON,895,899,this.L,900,901,this.ON,902,902,this.L,903,903,this.ON,904,1013,this.L,1014,1014,this.ON,1015,1154,this.L,1155,1158,this.NSM,1159,1159,this.L,1160,1161,this.NSM,1162,1417,this.L,1418,1418,this.ON,1419,1424,this.L,1425,1441,this.NSM,1442,1442,this.L,1443,1465,this.NSM,1466,1466,this.L,1467,1469,this.NSM,1470,1470,this.R,1471,1471,this.NSM,1472,1472,this.R,1473,1474,this.NSM,1475,1475,this.R,1476,1476,this.NSM,1477,1487,this.L,1488,1514,this.R,1515,1519,this.L,1520,1524,this.R,1525,1535,this.L,1536,1539,this.AL,1540,1547,this.L,1548,1548,this.CS,1549,1549,this.AL,1550,1551,this.ON,1552,1557,this.NSM,1558,1562,this.L,1563,1563,this.AL,1564,1566,this.L,1567,1567,this.AL,1568,1568,this.L,1569,1594,this.AL,1595,1599,this.L,1600,1610,this.AL,1611,1624,this.NSM,1625,1631,this.L,1632,1641,this.AN,1642,1642,this.ET,1643,1644,this.AN,1645,1647,this.AL,1648,1648,this.NSM,1649,1749,this.AL,1750,1756,this.NSM,1757,1757,this.AL,1758,1764,this.NSM,1765,1766,this.AL,1767,1768,this.NSM,1769,1769,this.ON,1770,1773,this.NSM,1774,1775,this.AL,1776,1785,this.EN,1786,1805,this.AL,1806,1806,this.L,1807,1807,this.BN,1808,1808,this.AL,1809,1809,this.NSM,1810,1839,this.AL,1840,1866,this.NSM,1867,1868,this.L,1869,1871,this.AL,1872,1919,this.L,1920,1957,this.AL,1958,1968,this.NSM,1969,1969,this.AL,1970,2304,this.L,2305,2306,this.NSM,2307,2363,this.L,2364,2364,this.NSM,2365,2368,this.L,2369,2376,this.NSM,2377,2380,this.L,2381,2381,this.NSM,2382,2384,this.L,2385,2388,this.NSM,2389,2401,this.L,2402,2403,this.NSM,2404,2432,this.L,2433,2433,this.NSM,2434,2491,this.L,2492,2492,this.NSM,2493,2496,this.L,2497,2500,this.NSM,2501,2508,this.L,2509,2509,this.NSM,2510,2529,this.L,2530,2531,this.NSM,2532,2545,this.L,2546,2547,this.ET,2548,2560,this.L,2561,2562,this.NSM,2563,2619,this.L,2620,2620,this.NSM,2621,2624,this.L,2625,2626,this.NSM,2627,2630,this.L,2631,2632,this.NSM,2633,2634,this.L,2635,2637,this.NSM,2638,2671,this.L,2672,2673,this.NSM,2674,2688,this.L,2689,2690,this.NSM,2691,2747,this.L,2748,2748,this.NSM,2749,2752,this.L,2753,2757,this.NSM,2758,2758,this.L,2759,2760,this.NSM,2761,2764,this.L,2765,2765,this.NSM,2766,2785,this.L,2786,2787,this.NSM,2788,2800,this.L,2801,2801,this.ET,2802,2816,this.L,2817,2817,this.NSM,2818,2875,this.L,2876,2876,this.NSM,2877,2878,this.L,2879,2879,this.NSM,2880,2880,this.L,2881,2883,this.NSM,2884,2892,this.L,2893,2893,this.NSM,2894,2901,this.L,2902,2902,this.NSM,2903,2945,this.L,2946,2946,this.NSM,2947,3007,this.L,3008,3008,this.NSM,3009,3020,this.L,3021,3021,this.NSM,3022,3058,this.L,3059,3064,this.ON,3065,3065,this.ET,3066,3066,this.ON,3067,3133,this.L,3134,3136,this.NSM,3137,3141,this.L,3142,3144,this.NSM,3145,3145,this.L,3146,3149,this.NSM,3150,3156,this.L,3157,3158,this.NSM,3159,3259,this.L,3260,3260,this.NSM,3261,3275,this.L,3276,3277,this.NSM,3278,3392,this.L,3393,3395,this.NSM,3396,3404,this.L,3405,3405,this.NSM,3406,3529,this.L,3530,3530,this.NSM,3531,3537,this.L,3538,3540,this.NSM,3541,3541,this.L,3542,3542,this.NSM,3543,3632,this.L,3633,3633,this.NSM,3634,3635,this.L,3636,3642,this.NSM,3643,3646,this.L,3647,3647,this.ET,3648,3654,this.L,3655,3662,this.NSM,3663,3760,this.L,3761,3761,this.NSM,3762,3763,this.L,3764,3769,this.NSM,3770,3770,this.L,3771,3772,this.NSM,3773,3783,this.L,3784,3789,this.NSM,3790,3863,this.L,3864,3865,this.NSM,3866,3892,this.L,3893,3893,this.NSM,3894,3894,this.L,3895,3895,this.NSM,3896,3896,this.L,3897,3897,this.NSM,3898,3901,this.ON,3902,3952,this.L,3953,3966,this.NSM,3967,3967,this.L,3968,3972,this.NSM,3973,3973,this.L,3974,3975,this.NSM,3976,3983,this.L,3984,3991,this.NSM,3992,3992,this.L,3993,4028,this.NSM,4029,4037,this.L,4038,4038,this.NSM,4039,4140,this.L,4141,4144,this.NSM,4145,4145,this.L,4146,4146,this.NSM,4147,4149,this.L,4150,4151,this.NSM,4152,4152,this.L,4153,4153,this.NSM,4154,4183,this.L,4184,4185,this.NSM,4186,5759,this.L,5760,5760,this.WS,5761,5786,this.L,5787,5788,this.ON,5789,5905,this.L,5906,5908,this.NSM,5909,5937,this.L,5938,5940,this.NSM,5941,5969,this.L,5970,5971,this.NSM,5972,6001,this.L,6002,6003,this.NSM,6004,6070,this.L,6071,6077,this.NSM,6078,6085,this.L,6086,6086,this.NSM,6087,6088,this.L,6089,6099,this.NSM,6100,6106,this.L,6107,6107,this.ET,6108,6108,this.L,6109,6109,this.NSM,6110,6127,this.L,6128,6137,this.ON,6138,6143,this.L,6144,6154,this.ON,6155,6157,this.NSM,6158,6158,this.WS,6159,6312,this.L,6313,6313,this.NSM,6314,6431,this.L,6432,6434,this.NSM,6435,6438,this.L,6439,6443,this.NSM,6444,6449,this.L,6450,6450,this.NSM,6451,6456,this.L,6457,6459,this.NSM,6460,6463,this.L,6464,6464,this.ON,6465,6467,this.L,6468,6469,this.ON,6470,6623,this.L,6624,6655,this.ON,6656,8124,this.L,8125,8125,this.ON,8126,8126,this.L,8127,8129,this.ON,8130,8140,this.L,8141,8143,this.ON,8144,8156,this.L,8157,8159,this.ON,8160,8172,this.L,8173,8175,this.ON,8176,8188,this.L,8189,8190,this.ON,8191,8191,this.L,8192,8202,this.WS,8203,8205,this.BN,8206,8206,this.L,8207,8207,this.R,8208,8231,this.ON,8232,8232,this.WS,8233,8233,this.B,8234,8234,this.LRE,8235,8235,this.RLE,8236,8236,this.PDF,8237,8237,this.LRO,8238,8238,this.RLO,8239,8239,this.WS,8240,8244,this.ET,8245,8276,this.ON,8277,8278,this.L,8279,8279,this.ON,8280,8286,this.L,8287,8287,this.WS,8288,8291,this.BN,8292,8297,this.L,8298,8303,this.BN,8304,8304,this.EN,8305,8307,this.L,8308,8313,this.EN,8314,8315,this.ET,8316,8318,this.ON,8319,8319,this.L,8320,8329,this.EN,8330,8331,this.ET,8332,8334,this.ON,8335,8351,this.L,8352,8369,this.ET,8370,8399,this.L,8400,8426,this.NSM,8427,8447,this.L,8448,8449,this.ON,8450,8450,this.L,8451,8454,this.ON,8455,8455,this.L,8456,8457,this.ON,8458,8467,this.L,8468,8468,this.ON,8469,8469,this.L,8470,8472,this.ON,8473,8477,this.L,8478,8483,this.ON,8484,8484,this.L,8485,8485,this.ON,8486,8486,this.L,8487,8487,this.ON,8488,8488,this.L,8489,8489,this.ON,8490,8493,this.L,8494,8494,this.ET,8495,8497,this.L,8498,8498,this.ON,8499,8505,this.L,8506,8507,this.ON,8508,8511,this.L,8512,8516,this.ON,8517,8521,this.L,8522,8523,this.ON,8524,8530,this.L,8531,8543,this.ON,8544,8591,this.L,8592,8721,this.ON,8722,8723,this.ET,8724,9013,this.ON,9014,9082,this.L,9083,9108,this.ON,9109,9109,this.L,9110,9168,this.ON,9169,9215,this.L,9216,9254,this.ON,9255,9279,this.L,9280,9290,this.ON,9291,9311,this.L,9312,9371,this.EN,9372,9449,this.L,9450,9450,this.EN,9451,9751,this.ON,9752,9752,this.L,9753,9853,this.ON,9854,9855,this.L,9856,9873,this.ON,9874,9887,this.L,9888,9889,this.ON,9890,9984,this.L,9985,9988,this.ON,9989,9989,this.L,9990,9993,this.ON,9994,9995,this.L,9996,10023,this.ON,10024,10024,this.L,10025,10059,this.ON,10060,10060,this.L,10061,10061,this.ON,10062,10062,this.L,10063,10066,this.ON,10067,10069,this.L,10070,10070,this.ON,10071,10071,this.L,10072,10078,this.ON,10079,10080,this.L,10081,10132,this.ON,10133,10135,this.L,10136,10159,this.ON,10160,10160,this.L,10161,10174,this.ON,10175,10191,this.L,10192,10219,this.ON,10220,10223,this.L,10224,11021,this.ON,11022,11903,this.L,11904,11929,this.ON,11930,11930,this.L,11931,12019,this.ON,12020,12031,this.L,12032,12245,this.ON,12246,12271,this.L,12272,12283,this.ON,12284,12287,this.L,12288,12288,this.WS,12289,12292,this.ON,12293,12295,this.L,12296,12320,this.ON,12321,12329,this.L,12330,12335,this.NSM,12336,12336,this.ON,12337,12341,this.L,12342,12343,this.ON,12344,12348,this.L,12349,12351,this.ON,12352,12440,this.L,12441,12442,this.NSM,12443,12444,this.ON,12445,12447,this.L,12448,12448,this.ON,12449,12538,this.L,12539,12539,this.ON,12540,12828,this.L,12829,12830,this.ON,12831,12879,this.L,12880,12895,this.ON,12896,12923,this.L,12924,12925,this.ON,12926,12976,this.L,12977,12991,this.ON,12992,13003,this.L,13004,13007,this.ON,13008,13174,this.L,13175,13178,this.ON,13179,13277,this.L,13278,13279,this.ON,13280,13310,this.L,13311,13311,this.ON,13312,19903,this.L,19904,19967,this.ON,19968,42127,this.L,42128,42182,this.ON,42183,64284,this.L,64285,64285,this.R,64286,64286,this.NSM,64287,64296,this.R,64297,64297,this.ET,64298,64310,this.R,64311,64311,this.L,64312,64316,this.R,64317,64317,this.L,64318,64318,this.R,64319,64319,this.L,64320,64321,this.R,64322,64322,this.L,64323,64324,this.R,64325,64325,this.L,64326,64335,this.R,64336,64433,this.AL,64434,64466,this.L,64467,64829,this.AL,64830,64831,this.ON,64832,64847,this.L,64848,64911,this.AL,64912,64913,this.L,64914,64967,this.AL,64968,65007,this.L,65008,65020,this.AL,65021,65021,this.ON,65022,65023,this.L,65024,65039,this.NSM,65040,65055,this.L,65056,65059,this.NSM,65060,65071,this.L,65072,65103,this.ON,65104,65104,this.CS,65105,65105,this.ON,65106,65106,this.CS,65107,65107,this.L,65108,65108,this.ON,65109,65109,this.CS,65110,65118,this.ON,65119,65119,this.ET,65120,65121,this.ON,65122,65123,this.ET,65124,65126,this.ON,65127,65127,this.L,65128,65128,this.ON,65129,65130,this.ET,65131,65131,this.ON,65132,65135,this.L,65136,65140,this.AL,65141,65141,this.L,65142,65276,this.AL,65277,65278,this.L,65279,65279,this.BN,65280,65280,this.L,65281,65282,this.ON,65283,65285,this.ET,65286,65290,this.ON,65291,65291,this.ET,65292,65292,this.CS,65293,65293,this.ET,65294,65294,this.CS,65295,65295,this.ES,65296,65305,this.EN,65306,65306,this.CS,65307,65312,this.ON,65313,65338,this.L,65339,65344,this.ON,65345,65370,this.L,65371,65381,this.ON,65382,65503,this.L,65504,65505,this.ET,65506,65508,this.ON,65509,65510,this.ET,65511,65511,this.L,65512,65518,this.ON,65519,65528,this.L,65529,65531,this.BN,65532,65533,this.ON,65534,65535,this.L];for(var e=0;e<this.charTypes.length;++e)for(var t=this.charTypes[e],i=this.charTypes[++e],n=this.charTypes[++e];t<=i;)this.rtlCharacterTypes[t++]=n}return e.prototype.getVisualOrder=function(e,t){this.types=this.getCharacterCode(e),this.textOrder=t?this.LRE:this.L,this.doVisualOrder();for(var i=[],n=0;n<this.levels.length;n++)i[n]=this.levels[n];return i},e.prototype.getCharacterCode=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=this.rtlCharacterTypes[e[i].charCodeAt(0)];return t},e.prototype.setDefaultLevels=function(){for(var e=0;e<this.length;e++)this.levels[e]=this.textOrder},e.prototype.setLevels=function(){this.setDefaultLevels();for(var e=0;e<this.length;++e){var t=this.levels[e];0!=(128&t)&&(t&=127,this.result[e]=0==(1&t)?this.L:this.R),this.levels[e]=t}},e.prototype.updateLevels=function(e,t,i){if(0==(1&t))for(var n=e;n<i;++n)this.result[n]===this.R?this.levels[n]+=1:this.result[n]!==this.L&&(this.levels[n]+=2);else for(n=e;n<i;++n)this.result[n]!==this.R&&(this.levels[n]+=1)},e.prototype.doVisualOrder=function(){this.length=this.types.length,this.result=this.types,this.levels=[],this.setLevels(),this.length=this.getEmbeddedCharactersLength();for(var e=this.textOrder,t=0;t<this.length;){for(var i=this.levels[t],n=0==(1&Math.max(e,i))?this.L:this.R,r=t+1;r<this.length&&this.levels[r]===i;)++r;var o=r<this.length?this.levels[r]:this.textOrder,s=0==(1&Math.max(o,i))?this.L:this.R;this.checkNSM(t,r,i,n,s),this.updateLevels(t,i,r),e=i,t=r}this.checkEmbeddedCharacters(this.length)},e.prototype.getEmbeddedCharactersLength=function(){for(var e=0,t=0;t<this.length;++t)this.types[t]!==this.LRE&&this.types[t]!==this.RLE&&this.types[t]!==this.LRO&&this.types[t]!==this.RLO&&this.types[t]!==this.PDF&&this.types[t]!==this.BN&&(this.result[e]=this.result[t],this.levels[e]=this.levels[t],e++);return e},e.prototype.checkEmbeddedCharacters=function(e){for(var t=this.types.length-1;t>=0;--t)this.types[t]===this.LRE||this.types[t]===this.RLE||this.types[t]===this.LRO||this.types[t]===this.RLO||this.types[t]===this.PDF||this.types[t]===this.BN?(this.result[t]=this.types[t],this.levels[t]=-1):(e-=1,this.result[t]=this.result[e],this.levels[t]=this.levels[e]);for(t=0;t<this.types.length;t++)-1===this.levels[t]&&(this.levels[t]=0===t?this.textOrder:this.levels[t-1])},e.prototype.checkNSM=function(e,t,i,n,r){for(var o=n,s=e;s<t;++s)this.result[s]===this.NSM?this.result[s]=o:o=this.result[s];this.checkEuropeanDigits(e,t,i,n,r)},e.prototype.checkEuropeanDigits=function(e,t,i,n,r){for(var o=e;o<t;++o)if(this.result[o]===this.EN)for(var s=o-1;s>=e;--s)if(this.result[s]===this.L||this.result[s]===this.R||this.result[s]===this.AL){this.result[s]===this.AL&&(this.result[o]=this.AN);break}this.checkArabicCharacters(e,t,i,n,r)},e.prototype.checkArabicCharacters=function(e,t,i,n,r){for(var o=e;o<t;++o)this.result[o]===this.AL&&(this.result[o]=this.R);this.checkEuropeanNumberSeparator(e,t,i,n,r)},e.prototype.checkEuropeanNumberSeparator=function(e,t,i,n,r){for(var o=e+1;o<t-1;++o)if(this.result[o]===this.ES||this.result[o]===this.CS){var s=this.result[o-1],a=this.result[o+1];s===this.EN&&a===this.EN?this.result[o]=this.EN:this.result[o]===this.CS&&s===this.AN&&a===this.AN&&(this.result[o]=this.AN)}this.checkEuropeanNumberTerminator(e,t,i,n,r)},e.prototype.checkEuropeanNumberTerminator=function(e,t,i,n,r){for(var o=e;o<t;++o)if(this.result[o]===this.ET){var s=o,a=[];a.push(this.ET);var l=this.getLength(s,t,a),h=s===e?n:this.result[s-1];if(h!==this.EN&&(h=l===t?r:this.result[l]),h===this.EN)for(var p=s;p<l;++p)this.result[p]=this.EN;o=l}this.checkOtherNeutrals(e,t,i,n,r)},e.prototype.checkOtherNeutrals=function(e,t,i,n,r){for(var o=e;o<t;++o)this.result[o]!==this.ES&&this.result[o]!==this.ET&&this.result[o]!==this.CS||(this.result[o]=this.ON);this.checkOtherCharacters(e,t,i,n,r)},e.prototype.checkOtherCharacters=function(e,t,i,n,r){for(var o=e;o<t;++o)if(this.result[o]===this.EN){for(var s=n,a=o-1;a>=e;--a)if(this.result[a]===this.L||this.result[a]===this.R){s=this.result[a];break}s===this.L&&(this.result[o]=this.L)}this.checkCommanCharacters(e,t,i,n,r)},e.prototype.getLength=function(e,t,i){for(--e;++e<t;){for(var n=this.result[e],r=0;r<i.length;++r)n===i[r]&&(e=this.getLength(++e,t,i));return e}return t},e.prototype.checkCommanCharacters=function(e,t,i,n,r){for(var o=e;o<t;++o)if(this.result[o]===this.WS||this.result[o]===this.ON||this.result[o]===this.B||this.result[o]===this.S){var s=o,a=[this.B,this.S,this.WS,this.ON],l=this.getLength(s,t,a),h=0,p=0,d=0;s===e?h=n:((h=this.result[s-1])===this.AN||h===this.EN)&&(h=this.R),l===t?p=r:((p=this.result[l])===this.AN||p===this.EN)&&(p=this.R),d=h===p?h:0==(1&i)?this.L:this.R;for(var c=s;c<l;++c)this.result[c]=d;o=l}},e}(),hx=function(){function e(){this.openBracket="(",this.closeBracket=")"}return e.prototype.layout=function(e,t,i,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");var o=[];return t.Unicode?o=this.customLayout(e,i,r,t,n):(o=[])[0]=e,o},e.prototype.splitLayout=function(e,t,i,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");return this.customSplitLayout(e,t,i,n,r)},e.prototype.getGlyphIndex=function(e,t,i,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");if(n=null,0===e.length)return{success:!1,glyphs:n};var o=(new ox).shape(e,0),s=t.fontInternal.ttfReader;n=new Uint16Array(o.length);for(var a=0,l=0,h=o.length;l<h;l++){var p=o[l],d=s.getGlyph(p);null!=d&&(n[a++]=d.index)}return{success:!0,glyphs:n}},e.prototype.customLayout=function(e,t,i,n,r){if(null==r){if(null==e)throw new Error("ArgumentNullException : line");var o=null;if(null!==i&&i.textDirection!==UC.None)o=(new ax).getLogicalToVisualString(e,t);return o}if(null==e)throw new Error("ArgumentNullException : line");if(null==n)throw new Error("ArgumentNullException : font");var s=null;if(null!==i&&i.textDirection!==UC.None){var a=(new ox).shape(e,0);s=this.customLayout(a,t,i)}o=[];if(r){for(var l=s.split(""),h=l.length,p=0;p<h;p++)l[p]=this.addChars(n,l[p]);o=l}else(o=[])[0]=this.addChars(n,s);return o},e.prototype.addChars=function(e,t){var i=t;if(null==e)throw new Error("ArgumentNullException : font");if(null==i)throw new Error("ArgumentNullException : line");var n=i,r=e.fontInternal.ttfReader;e.setSymbols(n),n=r.convertString(n);var o=mC.toUnicodeArray(n,!1);return n=mC.byteToString(o)},e.prototype.customSplitLayout=function(e,t,i,n,r){if(null==e)throw new Error("ArgumentNullException : line");if(null==t)throw new Error("ArgumentNullException : font");return this.customLayout(e,i,r).split("")},e}();!function(e){e[e.Paginate=0]="Paginate",e[e.OnePage=1]="OnePage"}(wS||(wS={})),function(e){e[e.FitPage=0]="FitPage",e[e.FitElement=1]="FitElement",e[e.FitColumnsToPage=2]="FitColumnsToPage"}(CS||(CS={})),function(e){e[e.Start=0]="Start",e[e.Line=1]="Line",e[e.Bezier3=3]="Bezier3",e[e.Bezier=3]="Bezier",e[e.PathTypeMask=7]="PathTypeMask",e[e.DashMode=16]="DashMode",e[e.PathMarker=32]="PathMarker",e[e.CloseSubpath=128]="CloseSubpath"}(SS||(SS={}));var px,dx=function(){function e(e){this.currentPosition=-1,this.value=e}return Object.defineProperty(e.prototype,"status",{get:function(){return this.objectStatus},set:function(e){this.objectStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaving",{get:function(){return this.saving},set:function(e){this.saving=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCollectionIndex",{get:function(){return this.index},set:function(e){this.index=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.currentPosition},set:function(e){this.currentPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clonedObject",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.save=function(e){e.write(this.boolToStr(this.value))},e.prototype.clone=function(t){return new e(this.value)},e.prototype.boolToStr=function(e){return e?"true":"false"},e}(),cx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ux=function(e){function t(t){var i=e.call(this)||this;return i.mbackground=new pS(255,255,255),i.mbStroking=!1,i.mfunction=null,i.dictionaryProperties=new Yw,i.mpatternDictionary=new Xw,i.mpatternDictionary.items.setValue(i.dictionaryProperties.type,new Uw(i.dictionaryProperties.pattern)),i.mpatternDictionary.items.setValue(i.dictionaryProperties.patternType,new iC(2)),i.shading=t,i.colorSpace=qC.Rgb,i}return cx(t,e),Object.defineProperty(t.prototype,"background",{get:function(){return this.mbackground},set:function(e){this.mbackground=e;var t=this.shading;e.isEmpty?t.remove(this.dictionaryProperties.background):t.items.setValue(this.dictionaryProperties.background,e.toArray(this.colorSpace))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"antiAlias",{get:function(){return this.shading.items.getValue(this.dictionaryProperties.antiAlias).value},set:function(e){var t=this.shading,i=t.items.getValue(this.dictionaryProperties.antiAlias);null==i&&void 0===i?(i=new dx(e),t.items.setValue(this.dictionaryProperties.antiAlias,i)):i.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"function",{get:function(){return this.mfunction},set:function(e){this.mfunction=e,null!=e&&void 0!==e?this.shading.items.setValue(this.dictionaryProperties.function,new vC(this.mfunction)):this.shading.remove(this.dictionaryProperties.function)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bBox",{get:function(){return this.shading.items.getValue(this.dictionaryProperties.bBox)},set:function(e){var t=this.shading;null==e&&void 0===e?t.remove(this.dictionaryProperties.bBox):t.items.setValue(this.dictionaryProperties.bBox,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorSpace",{get:function(){return this.mcolorSpace},set:function(e){var t=this.shading.items.getValue(this.dictionaryProperties.colorSpace);if(e!==this.mcolorSpace||null==t){this.mcolorSpace=e;var i=this.colorSpaceToDeviceName(e);this.shading.items.setValue(this.dictionaryProperties.colorSpace,new Uw(i))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroking",{get:function(){return this.mbStroking},set:function(e){this.mbStroking=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patternDictionary",{get:function(){return null==this.mpatternDictionary&&(this.mpatternDictionary=new Xw),this.mpatternDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shading",{get:function(){return this.mshading},set:function(e){if(null==e)throw new Error("ArgumentNullException : Shading");e!==this.mshading&&(this.mshading=e,this.patternDictionary.items.setValue(this.dictionaryProperties.shading,new vC(this.mshading)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"matrix",{get:function(){return this.mmatrix},set:function(e){if(null==e)throw new Error("ArgumentNullException : Matrix");if(e!==this.mmatrix){this.mmatrix=e.clone();var t=new nC(this.mmatrix.matrix.elements);this.mpatternDictionary.items.setValue(this.dictionaryProperties.matrix,t)}},enumerable:!0,configurable:!0}),t.prototype.monitorChanges=function(e,i,n,r,o){var s=!1;if(e instanceof t){this.colorSpace!==o&&(this.colorSpace=o,this.resetFunction()),i.setColorSpace("Pattern",this.mbStroking);var a=n.getResources().getName(this);i.setColourWithPattern(null,a,this.mbStroking),s=!0}return s},t.prototype.resetChanges=function(e){},t.prototype.colorSpaceToDeviceName=function(e){var t;switch(e){case qC.Rgb:t="DeviceRGB"}return t},t.prototype.resetPatternDictionary=function(e){this.mpatternDictionary=e},t.prototype.cloneAntiAliasingValue=function(e){if(null==e)throw new Error("ArgumentNullException : brush");var t=this.shading.items.getValue(this.dictionaryProperties.antiAlias);null!=t&&e.shading.items.setValue(this.dictionaryProperties.antiAlias,new dx(t.value))},t.prototype.cloneBackgroundValue=function(e){var t=this.background;t.isEmpty||(e.background=t)},Object.defineProperty(t.prototype,"element",{get:function(){return this.patternDictionary},enumerable:!0,configurable:!0}),t}(dS),gx=function(){function e(e,t){if(this.dictionaryProperties=new Yw,this.writeTransformation=!0,void 0===e);else if(e instanceof IC&&void 0===t){this.content=new cC;var i=new IC(e.width,e.height);this.setSize(i),this.initialize()}else this.content=new cC,this.setSize(new IC(e,t)),this.initialize()}return Object.defineProperty(e.prototype,"size",{get:function(){return this.templateSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){if(null==this.pdfGraphics||void 0===this.pdfGraphics){var e=new Ex(this),t=new Dx(this.size,e,this.content);this.pdfGraphics=t,this.pdfGraphics.initializeCoordinates()}return this.pdfGraphics},enumerable:!0,configurable:!0}),e.prototype.getResources=function(){return null==this.resources&&(this.resources=new Sx,this.content.items.setValue(this.dictionaryProperties.resources,this.resources)),this.resources},e.prototype.initialize=function(){this.addType(),this.addSubType()},e.prototype.addType=function(){var e=new Uw(this.dictionaryProperties.xObject);this.content.items.setValue(this.dictionaryProperties.type,e)},e.prototype.addSubType=function(){var e=new Uw(this.dictionaryProperties.form);this.content.items.setValue(this.dictionaryProperties.subtype,e)},e.prototype.reset=function(e){void 0===e?(null!=this.resources&&(this.resources=null,this.content.remove(this.dictionaryProperties.resources)),null!=this.graphics&&this.graphics.reset(this.size)):(this.setSize(e),this.reset())},e.prototype.setSize=function(e){var t=new MC(new PC(0,0),e),i=nC.fromRectangle(t);this.content.items.setValue(this.dictionaryProperties.bBox,i),this.templateSize=e},Object.defineProperty(e.prototype,"element",{get:function(){return this.content},enumerable:!0,configurable:!0}),e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Bmp=1]="Bmp",e[e.Emf=2]="Emf",e[e.Gif=3]="Gif",e[e.Jpeg=4]="Jpeg",e[e.Png=5]="Png",e[e.Wmf=6]="Wmf",e[e.Icon=7]="Icon"}(px||(px={}));var fx,mx=function(){function e(e){this.sof1Marker=193,this.sof2Marker=194,this.sof3Marker=195,this.sof5Marker=197,this.sof6Marker=198,this.sof7Marker=199,this.sof9Marker=201,this.sof10Marker=202,this.sof11Marker=203,this.sof13Marker=205,this.sof14Marker=206,this.sof15Marker=207,this.mFormat=px.Unknown,this.mbitsPerComponent=8,this.dictionaryProperties=new Yw,this.mStream=e,this.initialize()}return Object.defineProperty(e.prototype,"height",{get:function(){return this.mHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.mWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bitsPerComponent",{get:function(){return this.mbitsPerComponent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.mImageData.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageData",{get:function(){return this.mImageData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDataAsNumberArray",{get:function(){return this.mImageData.internalBuffer.buffer},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.mFormat===px.Unknown&&this.checkIfJpeg()&&(this.mFormat=px.Jpeg,this.parseJpegImage()),this.reset(),this.mImageData=new AS(this.mStream.count),this.mStream.read(this.mImageData,0,this.mImageData.count)},e.prototype.reset=function(){this.mStream.position=0},e.prototype.parseJpegImage=function(){this.reset();var e=new AS(this.mStream.count);this.mStream.read(e,0,e.count);for(var t=4,i=!1,n=256*e.getBuffer(t)+e.getBuffer(t+1);t<e.count;){if(!((t+=n)<e.count)){i=!0;break}if(192===e.getBuffer(t+1))return this.mHeight=256*e.getBuffer(t+5)+e.getBuffer(t+6),void(this.mWidth=256*e.getBuffer(t+7)+e.getBuffer(t+8));t+=2,n=256*e.getBuffer(t)+e.getBuffer(t+1)}i&&(this.mStream.position=0,this.skip(this.mStream,2),this.readExceededJPGImage(this.mStream))},Object.defineProperty(e.prototype,"format",{get:function(){return this.mFormat},enumerable:!0,configurable:!0}),e.prototype.checkIfJpeg=function(){this.reset();for(var t=0;t<e.mJpegHeader.length;t++){if(e.mJpegHeader[t]!==this.mStream.readByte(t))return!1;this.mStream.position++}return!0},e.prototype.getImageDictionary=function(){if(this.mFormat===px.Jpeg){this.imageData.internalBuffer.length;this.imageStream=new cC,this.imageStream.isImage=!0;for(var e="",t="",i=0;i<this.imageDataAsNumberArray.byteLength;i++)e+=String.fromCharCode(null,this.mStream.readByte(i));for(i=0;i<e.length;i++)i%2!=0&&(t+=e[i]);return this.imageStream.data=[t],this.imageStream.compress=!1,this.imageStream.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.xObject)),this.imageStream.items.setValue(this.dictionaryProperties.subtype,new Uw(this.dictionaryProperties.image)),this.imageStream.items.setValue(this.dictionaryProperties.width,new iC(this.width)),this.imageStream.items.setValue(this.dictionaryProperties.height,new iC(this.height)),this.imageStream.items.setValue(this.dictionaryProperties.bitsPerComponent,new iC(this.bitsPerComponent)),this.imageStream.items.setValue(this.dictionaryProperties.filter,new Uw(this.dictionaryProperties.dctdecode)),this.imageStream.items.setValue(this.dictionaryProperties.colorSpace,new Uw(this.getColorSpace())),this.imageStream.items.setValue(this.dictionaryProperties.decodeParms,this.getDecodeParams()),this.imageStream}return this.imageStream},e.prototype.getColorSpace=function(){return this.dictionaryProperties.deviceRgb},e.prototype.getDecodeParams=function(){var e=new Xw;return e.items.setValue(this.dictionaryProperties.columns,new iC(this.width)),e.items.setValue(this.dictionaryProperties.blackIs1,new dx(!0)),e.items.setValue(this.dictionaryProperties.k,new iC(-1)),e.items.setValue(this.dictionaryProperties.predictor,new iC(15)),e.items.setValue(this.dictionaryProperties.bitsPerComponent,new iC(this.bitsPerComponent)),e},e.prototype.readExceededJPGImage=function(e){this.mStream=e;for(var t=!0;t;){switch(this.getMarker(e)){case this.sof1Marker:case this.sof2Marker:case this.sof3Marker:case this.sof5Marker:case this.sof6Marker:case this.sof7Marker:case this.sof9Marker:case this.sof10Marker:case this.sof11Marker:case this.sof13Marker:case this.sof14Marker:case this.sof15Marker:e.position+=3,this.mHeight=this.mStream.readNextTwoBytes(e),this.mWidth=this.mStream.readNextTwoBytes(e),t=!1;break;default:this.skipStream(e)}}},e.prototype.skip=function(e,t){this.mStream=e;var i=new AS(t);this.mStream.read(i,0,i.count)},e.prototype.getMarker=function(e){var t=32;for(t=e.readByte(this.mStream.position),e.position++;255!==t;)t=e.readByte(this.mStream.position),e.position++;do{t=e.readByte(this.mStream.position),e.position++}while(255===t);return t},e.prototype.skipStream=function(e){var t=this.mStream.readNextTwoBytes(e)-2;t>0&&(e.position+=t)},e.mPngHeader=[137,80,78,71,13,10,26,10],e.mJpegHeader=[255,216],e.GIF_HEADER="G,I,F,8",e.BMP_HEADER="B,M",e}(),yx=function(){function e(e){this.updateProportionsHelper(e)}return e.prototype.convertUnits=function(e,t,i){return this.convertFromPixels(this.convertToPixels(e,t),i)},e.prototype.convertToPixels=function(e,t){var i=t;return e*this.proportions[i]},e.prototype.convertFromPixels=function(e,t){var i=t;return e/this.proportions[i]},e.prototype.updateProportionsHelper=function(e){this.proportions=[e/2.54,e/6,1,e/72,e,e/300,e/25.4]},e.horizontalResolution=96,e.verticalResolution=96,e}(),vx=function(){function e(){}return Object.defineProperty(e.prototype,"width",{get:function(){return this.imageWidth},set:function(e){this.imageWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.imageHeight},set:function(e){this.imageHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(e){this.width=e.width,this.height=e.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"physicalDimension",{get:function(){return this.imagePhysicalDimension=this.getPointSize(this.width,this.height,this.horizontalResolution,this.verticalResolution),new IC(this.width,this.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.imageStream},enumerable:!0,configurable:!0}),e.prototype.getPointSize=function(e,t,i,n){if(void 0===i){var r=yx.horizontalResolution,o=yx.verticalResolution;return this.getPointSize(e,t,r,o)}var s=new yx(i),a=new yx(n),l=s.convertUnits(e,_C.Pixel,_C.Point),h=a.convertUnits(t,_C.Pixel,_C.Point);return new IC(l,h)},e}(),bx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wx=function(e){function t(t){var i=e.call(this)||this;return i.imageStatus=!0,i.dictionaryProperties=new Yw,i.loadImage(t),i}return bx(t,e),t.prototype.loadImage=function(e){this.initializeAsync(e)},t.prototype.initializeAsync=function(e){var t=new AS(e.length);t.writeFromBase64String(e),this.decoder=new mx(t),this.height=this.decoder.height,this.width=this.decoder.width,this.bitsPerComponent=this.decoder.bitsPerComponent},t.prototype.save=function(){this.imageStatus=!0,this.imageStream=this.decoder.getImageDictionary()},t}(vx),Cx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sx=function(e){function t(t){var i=e.call(this,t)||this;return i.properties=new Xw,i}return Cx(t,e),Object.defineProperty(t.prototype,"names",{get:function(){return this.getNames()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){return this.pdfDocument},set:function(e){this.pdfDocument=e},enumerable:!0,configurable:!0}),t.prototype.getName=function(e){var t=e.element,i=null;if(this.names.containsKey(t)&&(i=this.names.getValue(t)),null==i){var n=this.generateName();i=new Uw(n),this.names.setValue(t,i),(e instanceof xS||e instanceof gx||e instanceof ux||e instanceof Tx||e instanceof RS||e instanceof vx||e instanceof wx)&&this.add(e,i)}return i},t.prototype.getNames=function(){null==this.pdfNames&&(this.pdfNames=new ES);var e=this.items.getValue(this.dictionaryProperties.font);if(null!=e){EC.dereference(e)}return this.pdfNames},t.prototype.requireProcedureSet=function(e){if(null==e)throw new Error("ArgumentNullException:procedureSetName");var t=this.items.getValue(this.dictionaryProperties.procset);null==t&&(t=new nC,this.items.setValue(this.dictionaryProperties.procset,t));var i=new Uw(e);t.contains(i)||t.add(i)},t.prototype.removeFont=function(e){for(var t=null,i=this.pdfNames.keys(),n=0;n<this.pdfNames.size();n++)if(this.pdfNames.getValue(i[n])===new Uw(e)){t=i[n];break}null!=t&&this.pdfNames.remove(t)},t.prototype.generateName=function(){return xx.getNewGuidString()},t.prototype.add=function(e,t){if(e instanceof xS){var i=null,n=this.items.getValue(this.dictionaryProperties.font);if(null!=n){var r=n;i=n,i=n}else i=new Xw,this.items.setValue(this.dictionaryProperties.font,i);i.items.setValue(t.value,new vC(e.element))}else if(e instanceof gx){var o=void 0;null==(o=this.items.getValue(this.dictionaryProperties.xObject))&&(o=new Xw,this.items.setValue(this.dictionaryProperties.xObject,o)),o.items.setValue(t.value,new vC(e.element))}else if(e instanceof dS){if(e instanceof ux||e instanceof Tx)if(null!=(a=e.element)){var s=this.items.getValue(this.dictionaryProperties.pattern);null==s&&(s=new Xw,this.items.setValue(this.dictionaryProperties.pattern,s)),s.items.setValue(t.value,new vC(a))}}else if(e instanceof RS){var a=e.element,l=null;null==(l=this.items.getValue(this.dictionaryProperties.extGState))&&(l=new Xw,this.items.setValue(this.dictionaryProperties.extGState,l)),l.items.setValue(t.value,new vC(a))}else{o=this.Dictionary.items.getValue(this.dictionaryProperties.xObject);var h=void 0;void 0!==this.pdfDocument&&(h=this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.getValue(this.dictionaryProperties.xObject));this.Dictionary.items.values();var p=!1,d=void 0;if(void 0===this.pdfDocument||void 0!==typeof h&&null!=h){if(void 0!==this.pdfDocument)for(var c=h.items.values(),u=0;u<c.length;u++)void 0!==c[u]&&void 0!==c[u].element&&c[u].element.data[0]===e.element.data[0]&&(d=c[u],p=!0)}else h=new Xw,this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.setValue(this.dictionaryProperties.xObject,h);if(null==o&&(o=new Xw,this.Dictionary.items.setValue(this.dictionaryProperties.xObject,o)),p&&void 0!==d)o.items.setValue(t.value,d);else{r=new vC(e.element);o.items.setValue(t.value,r),void 0!==this.pdfDocument&&h.items.setValue(t.value,r)}}},t}(Xw),xx=function(){function e(){}return e.getNewGuidString=function(){return"aaaaaaaa-aaaa-4aaa-baaa-aaaaaaaaaaaa".replace(/[ab]/g,(function(e){var t=16*Math.random()|0;return("a"===e?t:3&t|8).toString(16)}))},e}(),kx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tx=function(e){function t(t,i){var n=e.call(this)||this;n.mStroking=!1,n.mLocation=new PC(0,0),n.mDictionaryProperties=new Yw;var r=null;return t instanceof LC?r=t:t instanceof IC&&(r=new LC(0,0,t.width,t.height)),null!==i&&i instanceof Nx&&(n.mPage=i),n.brushStream=new cC,n.mResources=new Sx,n.brushStream.items.setValue(n.mDictionaryProperties.resources,n.mResources),n.setBox(r),n.setObligatoryFields(),null!==i&&i instanceof Nx&&(n.mPage=i,n.graphics.colorSpace=i.document.colorSpace),n}return kx(t,e),t.prototype.initialize=function(e,t,i,n){this.mPage=t,this.mLocation=i,this.mTransformationMatrix=n,this.tempBrushStream=this.brushStream,this.brushStream=new cC;var r=new Sx;return this.brushStream.items.setValue(this.mDictionaryProperties.resources,r),this.setBox(e),this.setObligatoryFields(),this},Object.defineProperty(t.prototype,"location",{get:function(){return this.mLocation},set:function(e){this.mLocation=e},enumerable:!0,configurable:!0}),t.prototype.setObligatoryFields=function(){if(this.brushStream.items.setValue(this.mDictionaryProperties.patternType,new iC(1)),this.brushStream.items.setValue(this.mDictionaryProperties.paintType,new iC(1)),this.brushStream.items.setValue(this.mDictionaryProperties.tilingType,new iC(1)),this.brushStream.items.setValue(this.mDictionaryProperties.xStep,new iC(this.mBox.right-this.mBox.left)),this.brushStream.items.setValue(this.mDictionaryProperties.yStep,new iC(this.mBox.bottom-this.mBox.top)),null!=this.mPage&&null!=this.mLocation)if(null==this.mTransformationMatrix&&void 0===this.mTransformationMatrix){var e=this.mPage.size.height%this.rectangle.size.height-this.mLocation.y;this.brushStream.items.setValue(this.mDictionaryProperties.matrix,new nC([1,0,0,1,this.mLocation.x,e]))}else{e=0;var t=this.mTransformationMatrix.matrix.elements;e=this.mPage.size.height>this.rectangle.size.height?this.mTransformationMatrix.matrix.offsetY-this.mPage.size.height%this.rectangle.size.height:this.mPage.size.height%this.rectangle.size.height+this.mTransformationMatrix.matrix.offsetY,this.brushStream.items.setValue(this.mDictionaryProperties.matrix,new nC([t[0],t[1],t[2],t[3],t[4],e]))}},t.prototype.setBox=function(e){this.mBox=e;var t=new MC(this.mBox.left,this.mBox.top,this.mBox.right,this.mBox.bottom);this.brushStream.items.setValue(this.mDictionaryProperties.bBox,nC.fromRectangle(t))},Object.defineProperty(t.prototype,"rectangle",{get:function(){return this.mBox},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.mBox.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){if(null==this.mGraphics&&void 0===this.mGraphics){var e=new Ex(this),t=new Dx(this.size,e,this.brushStream);this.mGraphics=t,this.mResources=this.getResources(),this.mGraphics.initializeCoordinates()}return this.mGraphics},enumerable:!0,configurable:!0}),t.prototype.getResources=function(){return this.mResources},Object.defineProperty(t.prototype,"stroking",{get:function(){return this.mStroking},set:function(e){this.mStroking=e},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=this.initialize(this.rectangle,this.mPage,this.location,this.mTransformationMatrix);return null!=this.mTransformationMatrix&&null!=this.mTransformationMatrix.matrix&&e.brushStream.items.setValue(this.mDictionaryProperties.matrix,new nC(this.mTransformationMatrix.matrix.elements)),e.brushStream.data=this.tempBrushStream.data,e.mResources=new Sx(this.mResources),e.brushStream.items.setValue(this.mDictionaryProperties.resources,e.mResources),e},t.prototype.monitorChanges=function(e,i,n,r,o){var s=!1;if(e!==this){i.setColorSpace("Pattern",this.mStroking);var a=n.getResources().getName(this);i.setColourWithPattern(null,a,this.mStroking),s=!0}else if(e instanceof t){i.setColorSpace("Pattern",this.mStroking);var l=n.getResources().getName(this);i.setColourWithPattern(null,l,this.mStroking),s=!0}return s},t.prototype.resetChanges=function(e){},Object.defineProperty(t.prototype,"element",{get:function(){return this.brushStream},enumerable:!0,configurable:!0}),t}(dS),Dx=function(){function e(e,t,i){this.currentColorSpace=qC.Rgb,this.previousTextRenderingMode=NC.Fill,this.previousCharacterSpacing=0,this.previousWordSpacing=0,this.previousTextScaling=100,this.procedureSets=new DS,this.isNormalRender=!0,this.isUseFontSize=!1,this.isItalic=!1,this.isEmfTextScaled=!1,this.isEmf=!1,this.isEmfPlus=!1,this.isBaselineFormat=!0,this.emfScalingFactor=new IC(0,0),this.colorSpaceChanged=!1,this.dictionaryProperties=new Yw,this.isOverloadWithPosition=!1,this.isPointOverload=!1,this.currentColorSpaces=["RGB","CMYK","GrayScale","Indexed"],this.isImageOptimized=!1,this.graphicsState=[],this.istransparencySet=!1,this.internalAutomaticFields=null,this.startCutIndex=-1,this.getResources=t,this.canvasSize=e,this.pdfStreamWriter=i instanceof hS?i:new hS(i),this.initialize()}return Object.defineProperty(e.prototype,"stringLayoutResult",{get:function(){return this.pdfStringLayoutResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.canvasSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaBoxUpperRightBound",{get:function(){return void 0===this.internalMediaBoxUpperRightBound&&(this.internalMediaBoxUpperRightBound=0),this.internalMediaBoxUpperRightBound},set:function(e){this.internalMediaBoxUpperRightBound=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientSize",{get:function(){return new IC(this.clipBounds.width,this.clipBounds.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorSpace",{get:function(){return this.currentColorSpace},set:function(e){this.currentColorSpace=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"streamWriter",{get:function(){return this.pdfStreamWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return null==this.transformationMatrix&&(this.transformationMatrix=new kS),this.transformationMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this.pageLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.pageLayer.page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"automaticFields",{get:function(){return null!=this.internalAutomaticFields&&void 0!==this.internalAutomaticFields||(this.internalAutomaticFields=new PS),this.internalAutomaticFields},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.bStateSaved=!1,this.currentPen=null,this.currentBrush=null,this.currentFont=null,this.currentColorSpace=qC.Rgb,this.bCSInitialized=!1,this.transformationMatrix=null,this.previousTextRenderingMode=-1,this.previousCharacterSpacing=-1,this.previousWordSpacing=-1,this.previousTextScaling=-100,this.currentStringFormat=null,this.clipBounds=new MC(new PC(0,0),this.size),this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf)},e.prototype.drawPdfTemplate=function(e,t,i){if(void 0===i){if(null==e)throw Error("ArgumentNullException-template");this.drawPdfTemplate(e,t,e.size)}else{if(null==e)throw Error("ArgumentNullException-template");var n=e.width>0?i.width/e.width:1,r=e.height>0?i.height/e.height:1,o=!(1===n&&1===r),s=this.save(),a=new kS;null!=this.pageLayer&&this.getTranslateTransform(t.x,t.y+i.height,a),o&&this.getScaleTransform(n,r,a),this.pdfStreamWriter.modifyCtm(a);var l=this.getResources.getResources().getName(e);this.pdfStreamWriter.executeObject(l),this.restore(s);var h=e.graphics;if(null!=h)for(var p=0;p<h.automaticFields.automaticFields.length;p++){var d=h.automaticFields.automaticFields[p],c=new PC(d.location.x+t.x,d.location.y+t.y),u=0==e.size.width?0:i.width/e.size.width,g=0==e.size.height?0:i.height/e.size.height;this.automaticFields.add(new OS(d.field,c,u,g)),this.page.dictionary.modify()}this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB),this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC),this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI),this.getResources.getResources().requireProcedureSet(this.procedureSets.text)}},e.prototype.drawString=function(e,t,i,n,r,o,s,a,l){if("string"==typeof e&&t instanceof xS&&(i instanceof gS||null===i)&&(n instanceof dS||null===n)&&"number"==typeof r&&"number"==typeof o&&(s instanceof fS||null===s)&&void 0===a)this.isOverloadWithPosition=!0,this.drawString(e,t,i,n,r,o,this.clientSize.width-r,0,s);else{var h=i,p=n,d=r,c=o,u=s,g=a,f=l,m=(new yS).layout(e,t,f,new IC(u,g),this.isOverloadWithPosition,this.clientSize);if(!m.empty){var y=this.checkCorrectLayoutRectangle(m.actualSize,d,c,f);u<=0&&(d=y.x,u=y.width),g<=0&&(c=y.y,g=y.height),this.drawStringLayoutResult(m,t,h,p,new MC(d,c,u,g),f),this.isEmfTextScaled=!1,this.emfScalingFactor=new IC(0,0)}this.getResources.getResources().requireProcedureSet(this.procedureSets.text),this.isNormalRender=!0,this.pdfStringLayoutResult=m,this.isUseFontSize=!1}},e.prototype.drawLine=function(e,t,i,n,r){if(t instanceof PC){var o=t,s=i;this.drawLine(e,o.x,o.y,s.x,s.y)}else{o=t,s=i;var a=n,l=r;this.stateControl(e,null,null);var h=this.streamWriter;h.beginPath(o,s),h.appendLineSegment(a,l),h.strokePath(),this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf)}},e.prototype.drawRectangle=function(e,t,i,n,r,o){if(e instanceof gS&&"number"==typeof t){var s=i;this.drawRectangle(e,null,t,s,n,r)}else if(e instanceof dS&&"number"==typeof t){s=i;this.drawRectangle(null,e,t,s,n,r)}else{s=i;var a=n,l=r,h=o;if(t instanceof Tx){this.bCSInitialized=!1;var p=this.matrix.matrix.offsetX+s,d=void 0;d=null!=this.layer&&null!=this.layer.page?this.layer.page.size.height-this.matrix.matrix.offsetY+a:this.clientSize.height-this.matrix.matrix.offsetY+a,t.location=new PC(p,d),t.graphics.colorSpace=this.colorSpace}else t instanceof ux&&(t.colorSpace=this.colorSpace);t instanceof uS&&t.color.isEmpty&&(t=null);var c=e,u=t;this.stateControl(c,u,null),this.streamWriter.appendRectangle(s,a,l,h),this.drawPathHelper(c,u,!1)}},e.prototype.drawPathHelper=function(e,t,i,n){if("boolean"==typeof i){var r=i;this.drawPathHelper(e,t,zC.Winding,r)}else{var o=null!=e,s=null!=t,a=(r=i)===zC.Alternate;o&&s?this.streamWriter.fillStrokePath(a):o||s?o?this.streamWriter.strokePath():this.streamWriter.fillPath(a):this.streamWriter.endPath()}},e.prototype.drawImage=function(e,t,i,n,r){if("number"==typeof t&&"number"==typeof i&&void 0===n){var o=e.physicalDimension;this.drawImage(e,t,i,o.width,o.height)}else{var s=t,a=i,l=r;e.save();var h=new kS;this.getTranslateTransform(s,a+l,h),this.getScaleTransform(n,r,h),this.pdfStreamWriter.write("q"),this.pdfStreamWriter.modifyCtm(h);var p=this.getResources.getResources();void 0!==this.pageLayer&&null!=this.page&&(p.document=this.page.document);var d=p.getName(e);void 0!==this.pageLayer&&this.page.setResources(p),this.pdfStreamWriter.executeObject(d),this.pdfStreamWriter.write(Kw.restoreState),this.pdfStreamWriter.write(Kw.newLine);var c=this.getResources.getResources();c.requireProcedureSet(this.procedureSets.imageB),c.requireProcedureSet(this.procedureSets.imageC),c.requireProcedureSet(this.procedureSets.imageI),c.requireProcedureSet(this.procedureSets.text)}},e.prototype.getLineBounds=function(e,t,i,n,r){var o;if(!t.empty&&e<t.lineCount&&e>=0){var s=t.lines[e],a=this.getTextVerticalAlignShift(t.actualSize.height,n.height,r)+n.y+t.lineHeight*e,l=s.width,h=this.getHorizontalAlignShift(l,n.width,r),p=this.getLineIndent(s,r,n,0===e);h+=this.rightToLeft(r)?0:p;var d=n.x+h,c=this.shouldJustify(s,n.width,r)?n.width-p:l-p,u=t.lineHeight;o=new MC(d,a,c,u)}else o=new MC(0,0,0,0);return o},e.prototype.checkCorrectLayoutRectangle=function(e,t,i,n){var r=new MC(t,i,e.width,e.width);if(null!=n){switch(n.alignment){case FC.Center:r.x-=r.width/2;break;case FC.Right:r.x-=r.width}switch(n.lineAlignment){case BC.Middle:r.y-=r.height/2;break;case BC.Bottom:r.y-=r.height}}return r},e.prototype.setLayer=function(e){this.pageLayer=e;var t=e.page;null!=t&&void 0!==t&&(t.beginSave=this.pageSave)},e.prototype.pageSave=function(e){if(null!=e.graphics.automaticFields)for(var t=0;t<e.graphics.automaticFields.automaticFields.length;t++){var i=e.graphics.automaticFields.automaticFields[t];i.field.performDraw(e.graphics,i.location,i.scalingX,i.scalingY)}},e.prototype.drawStringLayoutResult=function(e,t,i,n,r,o){if(e.empty)throw new Error("ArgumentNullException:result");this.applyStringSettings(t,i,n,o,r);var s=null!=o?o.horizontalScalingFactor:100;s===this.previousTextScaling||this.isEmfTextScaled||(this.pdfStreamWriter.setTextScaling(s),this.previousTextScaling=s);var a,l=null==o||0===o.lineSpacing?t.height:o.lineSpacing+t.height;a=null!=o&&o.subSuperScript===JC.SubScript?l-(t.height+t.metrics.getDescent(o)):l-t.metrics.getAscent(o),this.shift=a,this.pdfStreamWriter.startNextLine(r.x,r.y-a),this.pdfStreamWriter.setLeading(+l);for(var h=0,p="",d=0;d<e.lines.length;d++)if(h+=e.lineHeight,r.y+h>this.clientSize.height){this.startCutIndex=d;break}for(var c=this.startCutIndex;c<e.lines.length&&c>=0;c++)p+=e.lines[c].text;var u=new MC(r.x,r.y,r.width,r.height);this.drawLayoutResult(e,t,o,r),this.underlineStrikeoutText(i,n,e,t,u,o),this.isEmfPlus=!1,this.isUseFontSize=!1,-1!==this.startCutIndex&&this.getNextPage().graphics.drawString(p,t,i,n,r.x,0,r.width,0,o)},e.prototype.getNextPage=function(){var e=this.currentPage.section,t=e.indexOf(this.currentPage);return t===e.count-1?e.add():e.getPages()[t+1]},e.prototype.setClip=function(e,t){void 0===t?this.setClip(e,zC.Winding):(this.pdfStreamWriter.appendRectangle(e),this.pdfStreamWriter.clipPath(t===zC.Alternate))},e.prototype.applyStringSettings=function(e,t,i,n,r){i instanceof Tx?(this.bCSInitialized=!1,i.graphics.colorSpace=this.colorSpace):i instanceof ux&&(this.bCSInitialized=!1,i.colorSpace=this.colorSpace);var o=this.getTextRenderingMode(t,i,n);this.stateControl(t,i,e,n),this.pdfStreamWriter.beginText(),o!==this.previousTextRenderingMode&&(this.pdfStreamWriter.setTextRenderingMode(o),this.previousTextRenderingMode=o);var s=null!=n?n.characterSpacing:0;s===this.previousCharacterSpacing||this.isEmfTextScaled||(this.pdfStreamWriter.setCharacterSpacing(s),this.previousCharacterSpacing=s);var a=null!=n?n.wordSpacing:0;a!==this.previousWordSpacing&&(this.pdfStreamWriter.setWordSpacing(a),this.previousWordSpacing=a)},e.prototype.getTextVerticalAlignShift=function(e,t,i){var n=0;if(t>=0&&null!=i&&i.lineAlignment!==BC.Top)switch(i.lineAlignment){case BC.Middle:n=(t-e)/2;break;case BC.Bottom:n=t-e}return n},e.prototype.drawLayoutResult=function(e,t,i,n){var r=this.getTextVerticalAlignShift(e.actualSize.height,n.height,i);0!==r&&this.pdfStreamWriter.startNextLine(0,r);for(var o=t,s=null!=o&&o.isUnicode,a=(null!=o&&o.isEmbedFont,e.lines),l=0,h=a.length;l<h&&l!==this.startCutIndex;l++){var p=a[l],d=(p.text,p.width),c=this.getHorizontalAlignShift(d,n.width,i),u=this.getLineIndent(p,i,n,0===l);0===(c+=this.rightToLeft(i)?0:u)||this.isEmfTextScaled||this.pdfStreamWriter.startNextLine(c,0),s?this.drawUnicodeLine(p,n,t,i):this.drawAsciiLine(p,n,t,i),0===c||this.isEmfTextScaled||this.pdfStreamWriter.startNextLine(-c,0),this.isOverloadWithPosition&&a.length>1&&(this.pdfStreamWriter.startNextLine(-n.x,0),n.x=0,n.width=this.clientSize.width,this.isOverloadWithPosition=!1,this.isPointOverload=!0)}this.getResources.getResources().requireProcedureSet(this.procedureSets.text),0!==r&&this.pdfStreamWriter.startNextLine(0,-(r-e.lineHeight)),this.pdfStreamWriter.endText()},e.prototype.drawAsciiLine=function(e,t,i,n){this.justifyLine(e,t.width,n);var r="";if(-1!==e.text.indexOf("(")||-1!==e.text.indexOf(")"))for(var o=0;o<e.text.length;o++)"("===e.text[o]?r+="\\(":")"===e.text[o]?r+="\\)":r+=e.text[o];""===r&&(r=e.text);var s="("+r+")";this.pdfStreamWriter.showNextLineText(new mC(s))},e.prototype.drawUnicodeLine=function(e,t,i,n){var r=e.text,o=(e.width,null!==n&&n.rightToLeft),s=null!==n&&(0!==n.wordSpacing||n.alignment===FC.Justify),a=i,l=this.justifyLine(e,t.width,n),h=new hx;if(o||null!==n&&n.textDirection!==UC.None){var p=null,d=null!==n&&n.alignment===FC.Right,c=null;c=(p=null!==n&&n.textDirection!==UC.None?h.layout(r,a,n.textDirection===UC.RightToLeft,s,n):h.layout(r,a,d,s,n)).length>1?null!==n&&n.textDirection!==UC.None?h.splitLayout(r,a,n.textDirection===UC.RightToLeft,s,n):h.splitLayout(r,a,d,s,n):[r],this.drawUnicodeBlocks(p,c,a,n,l)}else if(s){var u=this.breakUnicodeLine(r,a,null);p=u.tokens,c=u.words;this.drawUnicodeBlocks(p,c,a,n,l)}else{var g=this.convertToUnicode(r,a),f=this.getUnicodeString(g);this.streamWriter.showNextLineText(f)}},e.prototype.drawUnicodeBlocks=function(e,t,i,n,r){if(null==e)throw new Error("Argument Null Exception : blocks");if(null==t)throw new Error("Argument Null Exception : words");if(null==i)throw new Error("Argument Null Exception : font");this.streamWriter.startNextLine();var o=0,s=0,a=0,l=0;try{null!==n&&(a=n.firstLineIndent,l=n.paragraphIndent,n.firstLineIndent=0,n.paragraphIndent=0);var h=i.getCharWidth(mS.whiteSpace,n)+r,p=null!=n?n.characterSpacing:0;h+=p+(null!==n&&0===r?n.wordSpacing:0);for(var d=0;d<e.length;d++){var c=e[d],u=t[d],g=0;if(0!==o&&this.streamWriter.startNextLine(o,0),u.length>0){g+=i.measureString(u,n).width,g+=p;var f=this.getUnicodeString(c);this.streamWriter.showText(f)}d!==e.length-1&&(s+=o=g+h)}s>0&&this.streamWriter.startNextLine(-s,0)}finally{null!==n&&(n.firstLineIndent=a,n.paragraphIndent=l)}},e.prototype.breakUnicodeLine=function(e,t,i){if(null===e)throw new Error("Argument Null Exception : line");i=e.split(null);for(var n=[],r=0;r<i.length;r++){var o=i[r],s=this.convertToUnicode(o,t);n[r]=s}return{tokens:n,words:i}},e.prototype.getUnicodeString=function(e){if(null===e)throw new Error("Argument Null Exception : token");var t=new mC(e);return t.converted=!0,t.encode=qw.ForceEncoding.Ascii,t},e.prototype.convertToUnicode=function(e,t){var i=null;if(null==e)throw new Error("Argument Null Exception : text");if(null==t)throw new Error("Argument Null Exception : ttfFont");if(t.fontInternal instanceof rx){var n=t.fontInternal.ttfReader;t.setSymbols(e),i=n.convertString(e);var r=mC.toUnicodeArray(i,!1);i=mC.byteToString(r)}return i},e.prototype.justifyLine=function(e,t,i){var n=e.text,r=e.width,o=this.shouldJustify(e,t,i),s=null!=i&&0!==i.wordSpacing,a=mS.spaces,l=mS.getCharsCount(n,a),h=0;o?(s&&(r-=l*i.wordSpacing),h=(t-r)/l,this.pdfStreamWriter.setWordSpacing(h)):s?this.pdfStreamWriter.setWordSpacing(i.wordSpacing):this.pdfStreamWriter.setWordSpacing(0);return h},e.prototype.reset=function(e){this.canvasSize=e,this.streamWriter.clear(),this.initialize(),this.initializeCoordinates()},e.prototype.shouldJustify=function(e,t,i){var n=e.text,r=e.width,o=null!=i&&i.alignment===FC.Justify,s=t>=0&&r<t,a=mS.spaces,l=mS.getCharsCount(n,a)>0&&n[0]!==mS.whiteSpace,h=(e.lineType&lS.LayoutBreak)>0;return o&&s&&l&&(h||i.alignment===FC.Justify)},e.prototype.underlineStrikeoutText=function(e,t,i,n,r,o){if(n.underline||n.strikeout){var s=this.createUnderlineStikeoutPen(e,t,n,o);if(null!=s){var a=this.getTextVerticalAlignShift(i.actualSize.height,r.height,o),l=0;l=r.y+a+n.metrics.getAscent(o)+1.5*s.width;for(var h=r.y+a+n.metrics.getHeight(o)/2+1.5*s.width,p=i.lines,d=0,c=i.lineCount;d<c;d++){var u=p[d],g=(u.text,u.width),f=this.getHorizontalAlignShift(g,r.width,o),m=this.getLineIndent(u,o,r,0===d);f+=this.rightToLeft(o)?0:m;var y=r.x+f,v=this.shouldJustify(u,r.width,o)?y+r.width-m:y+g-m;if(n.underline){var b=l;this.drawLine(s,y,b,v,b),l+=i.lineHeight}if(n.strikeout){b=h;this.drawLine(s,y,b,v,b),h+=i.lineHeight}this.isPointOverload&&p.length>1&&(r.x=0,r.width=this.clientSize.width)}this.isPointOverload=!1}}},e.prototype.createUnderlineStikeoutPen=function(e,t,i,n){var r=i.metrics.getSize(n)/20,o=null;return null!=e?o=new gS(e.color,r):null!=t&&(o=new gS(t,r)),o},e.prototype.getTextRenderingMode=function(e,t,i){var n=NC.None;return n=null!=e&&null!=t?NC.FillStroke:null!=e?NC.Stroke:NC.Fill,null!=i&&i.clipPath&&(n|=NC.ClipFlag),n},e.prototype.getLineIndent=function(e,t,i,n){var r=0,o=(e.lineType&lS.FirstParagraphLine)>0;return null!=t&&o&&(r=n?t.firstLineIndent:t.paragraphIndent,r=i.width>0?Math.min(i.width,r):r),r},e.prototype.getHorizontalAlignShift=function(e,t,i){var n=0;if(t>=0&&null!=i&&i.alignment!==FC.Left)switch(i.alignment){case FC.Center:n=(t-e)/2;break;case FC.Right:n=t-e}return n},e.prototype.rightToLeft=function(e){var t=null!=e&&e.rightToLeft;return null!=e&&e.textDirection!==UC.None&&void 0!==e.textDirection&&(t=!0),t},e.prototype.stateControl=function(e,t,i,n){if(void 0===n)this.stateControl(e,t,i,null);else{t instanceof ux&&(this.bCSInitialized=!1,t.colorSpace=this.colorSpace),t instanceof Tx&&(this.bCSInitialized=!1,t.graphics.colorSpace=this.colorSpace);if(null!==t){void 0!==this.pageLayer&&null!=this.pageLayer&&!1===this.colorSpaceChanged&&(this.lastDocumentCS=this.pageLayer.page.document.colorSpace,this.lastGraphicsCS=this.pageLayer.page.graphics.colorSpace,this.colorSpace=this.pageLayer.page.document.colorSpace,this.currentColorSpace=this.pageLayer.page.document.colorSpace,this.colorSpaceChanged=!0),this.initCurrentColorSpace(this.currentColorSpace)}else if(null!=e){void 0!==this.pageLayer&&null!=this.pageLayer&&(this.colorSpace=this.pageLayer.page.document.colorSpace,this.currentColorSpace=this.pageLayer.page.document.colorSpace),this.initCurrentColorSpace(this.currentColorSpace)}this.penControl(e,!1),this.brushControl(t,!1),this.fontControl(i,n,!1)}},e.prototype.initCurrentColorSpace=function(e){this.getResources.getResources();this.bCSInitialized||(this.currentColorSpace!=qC.GrayScale?(this.pdfStreamWriter.setColorSpace("Device"+this.currentColorSpaces[this.currentColorSpace],!0),this.pdfStreamWriter.setColorSpace("Device"+this.currentColorSpaces[this.currentColorSpace],!1),this.bCSInitialized=!0):(this.pdfStreamWriter.setColorSpace("DeviceGray",!0),this.pdfStreamWriter.setColorSpace("DeviceGray",!1),this.bCSInitialized=!0))},e.prototype.penControl=function(e,t){null!=e&&(this.currentPen=e,e.monitorChanges(this.currentPen,this.pdfStreamWriter,this.getResources,t,this.colorSpace,this.matrix.clone()),this.currentPen=e.clone())},e.prototype.brushControl=function(e,t){if(null!=e&&void 0!==e){var i=e.clone(),n=i;if(!(null==n||e instanceof uS||e instanceof Tx)){var r=n.matrix,o=this.matrix.clone();null!=r&&(r.multiply(o),o=r),n.matrix=o}this.currentBrush=n;i.monitorChanges(this.currentBrush,this.pdfStreamWriter,this.getResources,t,this.colorSpace),this.currentBrush=e,e=null}},e.prototype.fontControl=function(e,t,i){if(null!=e){var n=null!=t?t.subSuperScript:JC.None,r=null!=this.currentStringFormat?this.currentStringFormat.subSuperScript:JC.None;if(i||e!==this.currentFont||n!==r){var o=this.getResources.getResources();this.currentFont=e,this.currentStringFormat=t;var s=e.metrics.getSize(t);this.isEmfTextScaled=!1;var a=o.getName(e);this.pdfStreamWriter.setFont(e,a,s)}}},e.prototype.setTransparency=function(e,t,i){if(void 0===t)this.istransparencySet=!0,this.setTransparency(e,e,WC.Normal);else if("number"==typeof t&&void 0===i)this.setTransparency(e,t,WC.Normal);else{null==this.trasparencies&&(this.trasparencies=new ES);var n=null,r=new Px(e,t,i);this.trasparencies.containsKey(r)&&(n=this.trasparencies.getValue(r)),null==n&&(n=new RS(e,t,i),this.trasparencies.setValue(r,n));var o=this.getResources.getResources().getName(n);this.streamWriter.setGraphicsState(o)}},e.prototype.clipTranslateMargins=function(e,t,i,n,r,o){if(e instanceof MC&&void 0===t)this.clipBounds=e,this.pdfStreamWriter.writeComment("Clip margins."),this.pdfStreamWriter.appendRectangle(e),this.pdfStreamWriter.closePath(),this.pdfStreamWriter.clipPath(!1),this.pdfStreamWriter.writeComment("Translate co-ordinate system."),this.translateTransform(e.x,e.y);else if("number"==typeof e){var s=new MC(i,n,this.size.width-i-r,this.size.height-n-o);this.clipBounds=s,this.pdfStreamWriter.writeComment("Clip margins."),this.pdfStreamWriter.appendRectangle(s),this.pdfStreamWriter.closePath(),this.pdfStreamWriter.clipPath(!1),this.pdfStreamWriter.writeComment("Translate co-ordinate system."),this.translateTransform(e,t)}},e.prototype.updateY=function(e){return-e},e.prototype.translateTransform=function(e,t){var i=new kS;this.getTranslateTransform(e,t,i),this.pdfStreamWriter.modifyCtm(i),this.matrix.multiply(i)},e.prototype.getTranslateTransform=function(e,t,i){return i.translate(e,this.updateY(t)),i},e.prototype.scaleTransform=function(e,t){var i=new kS;this.getScaleTransform(e,t,i),this.pdfStreamWriter.modifyCtm(i),this.matrix.multiply(i)},e.prototype.getScaleTransform=function(e,t,i){return null==i&&(i=new kS),i.scale(e,t),i},e.prototype.rotateTransform=function(e){var t=new kS;this.getRotateTransform(e,t),this.pdfStreamWriter.modifyCtm(t),this.matrix.multiply(t)},e.prototype.initializeCoordinates=function(){this.pdfStreamWriter.writeComment("Change co-ordinate system to left/top."),this.mediaBoxUpperRightBound!==-this.size.height&&null==this.cropBox&&(this.mediaBoxUpperRightBound===this.size.height||0===this.mediaBoxUpperRightBound?this.translateTransform(0,this.updateY(this.size.height)):this.translateTransform(0,this.updateY(this.mediaBoxUpperRightBound)))},e.prototype.getRotateTransform=function(e,t){return null!=t&&void 0!==t||(t=new kS),t.rotate(this.updateY(e)),t},e.prototype.save=function(){var e=new Rx(this,this.matrix.clone());return e.brush=this.currentBrush,e.pen=this.currentPen,e.font=this.currentFont,e.colorSpace=this.currentColorSpace,e.characterSpacing=this.previousCharacterSpacing,e.wordSpacing=this.previousWordSpacing,e.textScaling=this.previousTextScaling,e.textRenderingMode=this.previousTextRenderingMode,this.graphicsState.push(e),this.pdfStreamWriter.saveGraphicsState(),e},e.prototype.restore=function(e){if(void 0===e)this.graphicsState.length>0&&this.doRestoreState();else if(-1!==this.graphicsState.indexOf(e))for(;0!==this.graphicsState.length;){if(this.doRestoreState()===e)break}},e.prototype.doRestoreState=function(){var e=this.graphicsState.pop();return this.transformationMatrix=e.matrix,this.currentBrush=e.brush,this.currentPen=e.pen,this.currentFont=e.font,this.currentColorSpace=e.colorSpace,this.previousCharacterSpacing=e.characterSpacing,this.previousWordSpacing=e.wordSpacing,this.previousTextScaling=e.textScaling,this.previousTextRenderingMode=e.textRenderingMode,this.pdfStreamWriter.restoreGraphicsState(),e},e.prototype.drawPath=function(e,t,i){t instanceof Tx?(this.bCSInitialized=!1,t.graphics.colorSpace=this.colorSpace):t instanceof ux&&(this.bCSInitialized=!1,t.colorSpace=this.colorSpace),this.stateControl(e,t,null),this.buildUpPath(i.pathPoints,i.pathTypes),this.drawPathHelper(e,t,i.fillMode,!1)},e.prototype.drawArc=function(e,t,i,n,r,o,s){t instanceof MC?this.drawArc(e,t.x,t.y,t.width,t.height,i,n):0!==s&&(this.stateControl(e,null,null),this.constructArcPath(t,i,t+n,i+r,o,s),this.drawPathHelper(e,null,!1))},e.prototype.buildUpPath=function(t,i){for(var n=t.length,r=0;r<n;++r){var o,s=t[r];switch(i[r]&e.pathTypesValuesMask){case SS.Start:this.pdfStreamWriter.beginPath(s.x,s.y);break;case SS.Bezier3:var a=new PC(0,0),l=new PC(0,0),h=this.getBezierPoints(t,i,r,a,l);this.pdfStreamWriter.appendBezierSegment(s,h.p2,h.p3),r=h.i;break;case SS.Line:this.pdfStreamWriter.appendLineSegment(s);break;default:throw new Error("ArithmeticException - Incorrect path formation.")}o=i[r],this.checkFlags(o)}},e.prototype.getBezierPoints=function(t,i,n,r,o){if((i[++n]&e.pathTypesValuesMask)!==SS.Bezier3)throw new Error("ArgumentException : errorMsg");if(r=t[n],(i[++n]&e.pathTypesValuesMask)!==SS.Bezier3)throw new Error("ArgumentException : errorMsg");return{i:n,p2:r,p3:t[n]}},e.prototype.checkFlags=function(e){(e&SS.CloseSubpath)===SS.CloseSubpath&&this.pdfStreamWriter.closePath()},e.prototype.constructArcPath=function(e,t,i,n,r,o){var s=this.getBezierArc(e,t,i,n,r,o);if(0!==s.length){var a=[s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7]];this.pdfStreamWriter.beginPath(a[0],a[1]);var l=0;for(l=0;l<s.length;l+=8)a=[s[l],s[l+1],s[l+2],s[l+3],s[l+4],s[l+5],s[l+6],s[l+7]],this.pdfStreamWriter.appendBezierSegment(a[2],a[3],a[4],a[5],a[6],a[7])}},e.prototype.getBezierArc=function(e,t,i,n,r,o){if(e>i){var s=void 0;s=e,e=i,i=s}if(n>t){s=void 0;s=t,t=n,n=s}var a,l;Math.abs(o)<=90?(a=o,l=1):a=o/(l=Math.ceil(Math.abs(o)/90));for(var h=(e+i)/2,p=(t+n)/2,d=(i-e)/2,c=(n-t)/2,u=a*(Math.PI/360),g=Math.abs(4/3*(1-Math.cos(u))/Math.sin(u)),f=[],m=0;m<l;m++){var y=(r+m*a)*(Math.PI/180),v=(r+(m+1)*a)*(Math.PI/180),b=Math.cos(y),w=Math.cos(v),C=Math.sin(y),S=Math.sin(v);a>0?f.push(h+d*b,p-c*C,h+d*(b-g*C),p-c*(C+g*b),h+d*(w+g*S),p-c*(S-g*w),h+d*w,p-c*S):f.push(h+d*b,p-c*C,h+d*(b+g*C),p-c*(C-g*b),h+d*(w-g*S),p-c*(S+g*w),h+d*w,p-c*S)}return f},e.pathTypesValuesMask=15,e.transparencyObject=!1,e}(),Ex=function(){function e(e){this.sender=e}return e.prototype.getResources=function(){return this.sender.getResources()},e}(),Rx=function(){function e(e,t){this.internalTextRenderingMode=NC.Fill,this.internalCharacterSpacing=0,this.internalWordSpacing=0,this.internalTextScaling=100,this.pdfColorSpace=qC.Rgb,void 0!==e&&(this.pdfGraphics=e,this.transformationMatrix=t)}return Object.defineProperty(e.prototype,"graphics",{get:function(){return this.pdfGraphics},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this.transformationMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"characterSpacing",{get:function(){return this.internalCharacterSpacing},set:function(e){this.internalCharacterSpacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wordSpacing",{get:function(){return this.internalWordSpacing},set:function(e){this.internalWordSpacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textScaling",{get:function(){return this.internalTextScaling},set:function(e){this.internalTextScaling=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pen",{get:function(){return this.pdfPen},set:function(e){this.pdfPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brush",{get:function(){return this.pdfBrush},set:function(e){this.pdfBrush=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.pdfFont},set:function(e){this.pdfFont=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorSpace",{get:function(){return this.pdfColorSpace},set:function(e){this.pdfColorSpace=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textRenderingMode",{get:function(){return this.internalTextRenderingMode},set:function(e){this.internalTextRenderingMode=e},enumerable:!0,configurable:!0}),e}(),Px=function(e,t,i){this.alphaPen=e,this.alphaBrush=t,this.blendMode=i},Ix=function(){function e(e,t){if(this.pdfColorSpace=qC.Rgb,this.isVisible=!0,this.sublayer=!1,this.contentLength=0,this.dictionaryProperties=new Yw,null===e)throw new Error("ArgumentNullException:page");if(this.pdfPage=e,this.clipPageTemplates=!0,void 0===t)this.content=new cC;else if(t instanceof cC||null===t){if(null===t)throw new Error("ArgumentNullException:stream");this.content=t}else this.content=new cC,this.clipPageTemplates=t}return Object.defineProperty(e.prototype,"colorSpace",{get:function(){return this.pdfColorSpace},set:function(e){this.pdfColorSpace=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerId",{get:function(){return this.layerid},set:function(e){this.layerid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.layerName},set:function(e){this.layerName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.isVisible},set:function(e){this.isVisible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){return null==this.pdfGraphics&&this.initializeGraphics(this.page),this.pdfGraphics},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layers",{get:function(){return null==this.layer?(this.layer=new Ox(this.page),this.layer.sublayer=!0,this.layer):this.layer},enumerable:!0,configurable:!0}),e.prototype.add=function(){var t=new e(this.pdfPage);return t.name="",t},e.prototype.sign=function(e){return 0===e?0:e>0?1:-1},e.prototype.initializeGraphics=function(e){var t=e,i=new Ex(this.page);if(this.pdfGraphics=new Dx(e.size,i,this.content),this.pdfGraphics.mediaBoxUpperRightBound=0,null!=t){var n=t.section.parent;null!=n&&(this.pdfGraphics.colorSpace=n.document.colorSpace,this.colorSpace=n.document.colorSpace)}var r=this.sign(e.origin.y)===this.sign(e.origin.x);(e.origin.x>=0&&e.origin.y>=0||!r)&&this.pdfGraphics.initializeCoordinates();var o=t.section.getActualBounds(t,!0),s=t.section.pageSettings.margins;this.clipPageTemplates?e.origin.x>=0&&e.origin.y>=0&&this.pdfGraphics.clipTranslateMargins(o):this.graphics.clipTranslateMargins(o.x,o.y,s.left,s.top,s.right,s.bottom),this.pdfGraphics.setLayer(this)},Object.defineProperty(e.prototype,"element",{get:function(){return this.content},enumerable:!0,configurable:!0}),e}(),Mx=function(){function e(){}return Object.defineProperty(e.prototype,"count",{get:function(){return void 0===this.collection&&(this.collection=[]),this.collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return void 0===this.collection&&(this.collection=[]),this.collection},enumerable:!0,configurable:!0}),e}(),Lx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ox=function(e){function t(t){var i=e.call(this)||this;if(i.parentLayerCount=0,i.sublayer=!1,i.optionalContent=new Xw,t instanceof Ax){i.page=t;var n=t;i.parseLayers(n)}return i}return Lx(t,e),t.prototype.items=function(e,t){if("number"==typeof e&&void 0===t)return this.list[e];if(null==t)throw new Error("ArgumentNullException: layer");if(t.page!==this.page)throw new Error("ArgumentException: The layer belongs to another page")},t.prototype.add=function(e,t){if(void 0===e){var i=new Ix(this.page);return i.name="",this.add(i),i}if(e instanceof Ix){var n=this.list.push(e);return this.addLayer(n,e),n}return 0},t.prototype.addLayer=function(e,t){var i=new vC(t);this.page.contents.add(i)},t.prototype.insert=function(e,t){for(var i=[],n=this.list.length,r=e;r<n;r++)i.push(this.list.pop());this.list.push(t);for(r=0;r<i.length;r++)this.list.push(i[r]);this.insertLayer(e,t)},t.prototype.insertLayer=function(e,t){if(null==t)throw new Error("ArgumentNullException:layer");var i=new vC(t);this.page.contents.insert(e,i)},t.prototype.parseLayers=function(e){var t=this.page.contents;this.page.getResources();e.crossTable;var i=new cC,n=new cC,r=[];r.push("q"),i.data=r,t.insert(0,new vC(i)),(r=[]).push("Q"),n.data=r,t.insert(t.count,new vC(n))},t.prototype.indexOf=function(e){if(null==e)throw new Error("ArgumentNullException: layer");return this.list.indexOf(e)},t}(Mx),Ax=function(){function e(e){this.defLayerIndex=-1,this.modified=!1,this.dictionaryProperties=new Yw,this.pageDictionary=e}return Object.defineProperty(e.prototype,"section",{get:function(){return this.pdfSection},set:function(e){this.pdfSection=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dictionary",{get:function(){return this.pageDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.pageDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultLayer",{get:function(){var e=this.layers,t=this.defaultLayerIndex;return e.items(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultLayerIndex",{get:function(){if(0===this.layerCollection.count||-1===this.defLayerIndex){var e=this.layerCollection.add();this.defLayerIndex=this.layerCollection.indexOf(e)}return this.defLayerIndex},set:function(e){if(e<0||e>this.layers.count-1)throw new Error("ArgumentOutOfRangeException : value, Index can not be less 0 and greater Layers.Count - 1");this.defLayerIndex=e,this.modified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layers",{get:function(){return null!=this.layerCollection&&void 0!==this.layerCollection||(this.layerCollection=new Ox(this)),this.layerCollection},enumerable:!0,configurable:!0}),e.prototype.getResources=function(){return null==this.resources&&(this.resources=new Sx,this.dictionary.items.setValue(this.dictionaryProperties.resources,this.resources)),this.resources},Object.defineProperty(e.prototype,"contents",{get:function(){var e=this.pageDictionary.items.getValue(this.dictionaryProperties.contents),t=e;return null==t&&(t=new nC,this.pageDictionary.items.setValue(this.dictionaryProperties.contents,t)),t},enumerable:!0,configurable:!0}),e.prototype.setResources=function(e){this.resources=e,this.dictionary.items.setValue(this.dictionaryProperties.resources,this.resources),this.modified=!0},e}(),Bx=function(){function e(e){this.alreadyExistsAnnotationError="This annotatation had been already added to page",this.missingAnnotationException="Annotation is not contained in collection.",this.dictionaryProperties=new Yw,this.internalAnnotations=new nC,this.lists=[],void 0!==e&&(this.page=e)}return Object.defineProperty(e.prototype,"annotations",{get:function(){return this.internalAnnotations},set:function(e){this.internalAnnotations=e},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.doAdd(e)},e.prototype.doAdd=function(e){if(void 0===e.destination)return e.setPage(this.page),this.internalAnnotations.add(new vC(e)),this.lists.push(e);var t=(new yS).layout(e.text,e.font,e.stringFormat,new IC(e.bounds.width,0),!1,new IC(0,0)),i=e.bounds.y;if(1===t.lines.length){var n=e.font.measureString(t.lines[0].text);e.bounds=new MC(new PC(e.bounds.x,i),n),e.text=t.lines[0].text,this.page.graphics.drawString(e.text,e.font,null,e.brush,e.bounds.x,e.bounds.y,e.bounds.width,e.bounds.height,null),e.setPage(this.page),this.setColor(e),this.internalAnnotations.add(new vC(e)),this.lists.push(e)}else for(var r=0;r<t.lines.length;r++){n=e.font.measureString(t.lines[r].text);if(0===r)e.bounds=new MC(e.bounds.x,i,n.width,n.height),e.text=t.lines[r].text,this.page.graphics.drawString(e.text,e.font,null,e.brush,e.bounds.x,i,n.width,n.height,null),e.setPage(this.page),this.setColor(e),this.internalAnnotations.add(new vC(e)),this.lists.push(e),i+=e.bounds.height;else{var o=e.clone();o.bounds=new MC(new PC(e.bounds.x,i),n),o.text=t.lines[r].text,this.page.graphics.drawString(o.text,o.font,null,o.brush,o.bounds.x,o.bounds.y,o.bounds.width,o.bounds.height,null),o.setPage(this.page),this.setColor(o),this.internalAnnotations.add(new vC(o)),this.lists.push(o),i+=o.bounds.height}}},e.prototype.setColor=function(e){var t=qC.Rgb,i=e.color.toArray(t);e.dictionary.items.setValue(this.dictionaryProperties.c,i)},Object.defineProperty(e.prototype,"element",{get:function(){return this.internalAnnotations},enumerable:!0,configurable:!0}),e}(),Fx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nx=function(e){function t(){var t=e.call(this,new Xw)||this;return t.annotationCollection=null,t.beginSave=null,t.initialize(),t}return Fx(t,e),Object.defineProperty(t.prototype,"document",{get:function(){return null!==this.section&&null!==this.section.parent?this.section.parent.document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){var e=this.defaultLayer.graphics;return e.currentPage=this,e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crossTable",{get:function(){if(null===this.section)throw new Error("PdfDocumentException : Page is not created");return null===this.section.parent?this.section.parentDocument.crossTable:this.section.parent.document.crossTable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.section.pageSettings.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this.section.pageSettings.origin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"annotations",{get:function(){return null==this.annotationCollection&&(this.annotationCollection=new Bx(this),this.dictionary.items.setValue(this.dictionaryProperties.annots,this.annotationCollection.element),this.annotationCollection.annotations=this.dictionary.items.getValue(this.dictionaryProperties.annots)),this.annotationCollection},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.dictionary.items.setValue(this.dictionaryProperties.type,new Uw("Page")),this.dictionary.pageBeginDrawTemplate=new tC(this)},t.prototype.setSection=function(e){this.section=e,this.dictionary.items.setValue(this.dictionaryProperties.parent,new vC(e))},t.prototype.resetProgress=function(){this.isProgressOn=!1},t.prototype.getClientSize=function(){var e=this.section.getActualBounds(this,!0);return new IC(e.width,e.height)},t.prototype.pageBeginSave=function(){var e=this.document;void 0!==typeof e&&null!=e&&this.drawPageTemplates(e),null!=this.beginSave&&void 0!==this.beginSave&&this.beginSave(this)},t.prototype.drawPageTemplates=function(e){if(this.section.containsTemplates(e,this,!1)){var t=new Ix(this,!1);if(this.layers.insert(0,t),this.section.drawTemplates(this,t,e,!1),null!==t.graphics&&void 0!==t.graphics)for(var i=0;i<t.graphics.automaticFields.automaticFields.length;i++){var n=t.graphics.automaticFields.automaticFields[i];n.field.performDraw(t.graphics,n.location,n.scalingX,n.scalingY)}}if(this.section.containsTemplates(e,this,!0)){var r=new Ix(this,!1);this.layers.add(r),this.section.drawTemplates(this,r,e,!0)}},t}(Ax),Hx=function(){function e(e){this.pdfPage=void 0!==e?e:null}return Object.defineProperty(e.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),e}(),Vx=function(){function e(e){if(this.pdfSection=null,null==e)throw Error('ArgumentNullException("section")');this.section=e}return Object.defineProperty(e.prototype,"section",{get:function(){return this.pdfSection},set:function(e){this.pdfSection=e},enumerable:!0,configurable:!0}),e.prototype.contains=function(e){return this.section.contains(e)},e.prototype.remove=function(e){this.section.remove(e)},e.prototype.add=function(){return this.section.add()},e}(),jx=function(){function e(){}return Object.defineProperty(e.prototype,"left",{get:function(){return this.leftTemplate},set:function(e){this.leftTemplate=this.checkElement(e,kC.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.topTemplate},set:function(e){this.topTemplate=this.checkElement(e,kC.Top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.rightTemplate},set:function(e){this.rightTemplate=this.checkElement(e,kC.Right)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.bottomTemplate},set:function(e){this.bottomTemplate=this.checkElement(e,kC.Bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EvenLeft",{get:function(){return this.evenLeft},set:function(e){this.evenLeft=this.checkElement(e,kC.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EvenTop",{get:function(){return this.evenTop},set:function(e){this.evenTop=this.checkElement(e,kC.Top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EvenRight",{get:function(){return this.evenRight},set:function(e){this.evenRight=this.checkElement(e,kC.Right)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EvenBottom",{get:function(){return this.evenBottom},set:function(e){this.evenBottom=this.checkElement(e,kC.Bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OddLeft",{get:function(){return this.oddLeft},set:function(e){this.oddLeft=this.checkElement(e,kC.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OddTop",{get:function(){return this.oddTop},set:function(e){this.oddTop=this.checkElement(e,kC.Top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OddRight",{get:function(){return this.oddRight},set:function(e){this.oddRight=this.checkElement(e,kC.Right)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OddBottom",{get:function(){return this.oddBottom},set:function(e){this.oddBottom=this.checkElement(e,kC.Bottom)},enumerable:!0,configurable:!0}),e.prototype.getLeft=function(e){if(null==e)throw new Error("ArgumentNullException:page");return this.isEven(e)?null!=this.EvenLeft?this.EvenLeft:this.left:null!=this.OddLeft?this.OddLeft:this.left},e.prototype.getTop=function(e){if(null==e)throw new Error("ArgumentNullException:page");return this.isEven(e)?null!=this.EvenTop?this.EvenTop:this.top:null!=this.OddTop?this.OddTop:this.top},e.prototype.getRight=function(e){if(null==e)throw new Error("ArgumentNullException:page");return this.isEven(e)?null!=this.EvenRight?this.EvenRight:this.right:null!=this.OddRight?this.OddRight:this.right},e.prototype.getBottom=function(e){if(null==e)throw new Error("ArgumentNullException:page");return this.isEven(e)?null!=this.EvenBottom?this.EvenBottom:this.bottom:null!=this.OddBottom?this.OddBottom:this.bottom},e.prototype.isEven=function(e){var t=e.section.document.pages;return(t.pageCollectionIndex.containsKey(e)?t.pageCollectionIndex.getValue(e)+1:t.indexOf(e)+1)%2==0},e.prototype.checkElement=function(e,t){if(null!=e){if(void 0!==e.type&&e.type!==kC.None)throw new Error("NotSupportedException:Can not reassign the template element. Please, create new one.");e.type=t}return e},e}(),zx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qx=function(e){function t(){var t=e.call(this)||this;return t.leftValue=t.topValue=t.rightValue=t.bottomValue=t.stampValue=!0,t}return zx(t,e),Object.defineProperty(t.prototype,"applyDocumentLeftTemplate",{get:function(){return this.leftValue},set:function(e){this.leftValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applyDocumentTopTemplate",{get:function(){return this.topValue},set:function(e){this.topValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applyDocumentRightTemplate",{get:function(){return this.rightValue},set:function(e){this.rightValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applyDocumentBottomTemplate",{get:function(){return this.bottomValue},set:function(e){this.bottomValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applyDocumentStamps",{get:function(){return this.stampValue},set:function(e){this.stampValue=e},enumerable:!0,configurable:!0}),t}(jx),Wx=function(){function e(e,t){this.pageAdded=new Hx,this.pdfPages=[],this.dictionaryProperties=new Yw,this.pdfDocument=e,void 0===t?(this.settings=e.pageSettings.clone(),this.initialSettings=this.settings.clone()):(this.settings=t.clone(),this.initialSettings=this.settings.clone()),this.initialize()}return Object.defineProperty(e.prototype,"parent",{get:function(){return this.sectionCollection},set:function(e){this.sectionCollection=e,this.section.items.setValue(this.dictionaryProperties.parent,new vC(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentDocument",{get:function(){return this.pdfDocument},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSettings",{get:function(){return this.settings},set:function(e){if(null==e)throw Error("Value can not be null.");this.settings=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.section},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.pagesReferences.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return null==this.pageTemplate&&(this.pageTemplate=new qx),this.pageTemplate},set:function(e){this.pageTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return this.sectionCollection.document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return null!=this.pagesCollection&&void 0!==this.pagesCollection||(this.pagesCollection=new Vx(this)),this.pagesCollection},enumerable:!0,configurable:!0}),e.prototype.getPages=function(){return this.pdfPages},e.prototype.pointToNativePdf=function(e,t){var i=this.getActualBounds(e,!0);return t.x+=i.x,t.y=this.pageSettings.height-t.y,t},e.prototype.setPageSettings=function(e){this.settings=e,this.state.orientation=e.orientation,this.state.rotate=e.rotate,this.state.size=e.size,this.state.origin=e.origin},e.prototype.initialize=function(){this.pagesReferences=new nC,this.section=new Xw,this.state=new _x(this.pdfDocument),this.section.sectionBeginSave=new eC(this,this.state),this.pageCount=new iC(0),this.section.items.setValue(this.dictionaryProperties.count,this.pageCount),this.section.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.pages)),this.section.items.setValue(this.dictionaryProperties.kids,this.pagesReferences)},e.prototype.containsTemplates=function(e,t,i){var n=this.getDocumentTemplates(e,t,i),r=this.getSectionTemplates(t,i);return n.length>0||r.length>0},e.prototype.getDocumentTemplates=function(e,t,i){var n=[];return this.template.applyDocumentTopTemplate&&null!=e.template.getTop(t)&&(!e.template.getTop(t).foreground&&!i||e.template.getTop(t).foreground&&i)&&n.push(e.template.getTop(t)),this.template.applyDocumentBottomTemplate&&null!=e.template.getBottom(t)&&(!e.template.getBottom(t).foreground&&!i||e.template.getBottom(t).foreground&&i)&&n.push(e.template.getBottom(t)),this.template.applyDocumentLeftTemplate&&null!=e.template.getLeft(t)&&(!e.template.getLeft(t).foreground&&!i||e.template.getLeft(t).foreground&&i)&&n.push(e.template.getLeft(t)),this.template.applyDocumentRightTemplate&&null!=e.template.getRight(t)&&(!e.template.getRight(t).foreground&&!i||e.template.getRight(t).foreground&&i)&&n.push(e.template.getRight(t)),n},e.prototype.getSectionTemplates=function(e,t){var i,n=[];null!=this.template.getTop(e)&&((!(i=this.template.getTop(e)).foreground&&!t||i.foreground&&t)&&n.push(i));null!=this.template.getBottom(e)&&((!(i=this.template.getBottom(e)).foreground&&!t||i.foreground&&t)&&n.push(i));null!=this.template.getLeft(e)&&((!(i=this.template.getLeft(e)).foreground&&!t||i.foreground&&t)&&n.push(i));null!=this.template.getRight(e)&&((!(i=this.template.getRight(e)).foreground&&!t||i.foreground&&t)&&n.push(i));return n},e.prototype.add=function(e){if(void 0===e){var t=new Nx;return this.add(t),t}var i=this.checkPresence(e);this.pdfPages.push(e),this.pagesReferences.add(i),e.setSection(this),e.resetProgress(),this.pageAddedMethod(e)},e.prototype.checkPresence=function(e){for(var t=new vC(e),i=!1,n=this.parent,r=0;r<n.section.length;r++){var o=n.section[r];i=i||o.contains(e)}return t},e.prototype.contains=function(e){return 0<=this.indexOf(e)},e.prototype.indexOf=function(e){for(var t=0;t<this.pdfPages.length;t++)if(this.pdfPages[t]===e)return this.pdfPages.indexOf(e);var i=new vC(e);return this.pagesReferences.indexOf(i)},e.prototype.pageAddedMethod=function(e){var t=new Hx(e);this.onPageAdded(t),this.parent.document.pages.onPageAdded(t),this.pageCount.intValue=this.count},e.prototype.onPageAdded=function(e){},e.prototype.getActualBounds=function(e,t,i){if(e instanceof Nx&&"boolean"==typeof t){var n=this.parent.document;return this.getActualBounds(n,e,t)}e=e,t=t,i=i;var r=new MC(0,0,0,0);r.height=i?this.pageSettings.size.height:this.pageSettings.getActualSize().height,r.width=i?this.pageSettings.size.width:this.pageSettings.getActualSize().width;var o=this.getLeftIndentWidth(e,t,i),s=this.getTopIndentHeight(e,t,i),a=this.getRightIndentWidth(e,t,i),l=this.getBottomIndentHeight(e,t,i);return r.x+=o,r.y+=s,r.width-=o+a,r.height-=s+l,r},e.prototype.getLeftIndentWidth=function(e,t,i){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.left:0,r=null!=this.template.getLeft(t)?this.template.getLeft(t).width:0,o=null!=e.template.getLeft(t)?e.template.getLeft(t).width:0;return n+=this.template.applyDocumentLeftTemplate?Math.max(r,o):r},e.prototype.getTopIndentHeight=function(e,t,i){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.top:0,r=null!=this.template.getTop(t)?this.template.getTop(t).height:0,o=null!=e.template.getTop(t)?e.template.getTop(t).height:0;return n+=this.template.applyDocumentTopTemplate?Math.max(r,o):r},e.prototype.getRightIndentWidth=function(e,t,i){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.right:0,r=null!=this.template.getRight(t)?this.template.getRight(t).width:0,o=null!=e.template.getRight(t)?e.template.getRight(t).width:0;return n+=this.template.applyDocumentRightTemplate?Math.max(r,o):r},e.prototype.getBottomIndentHeight=function(e,t,i){if(null==e)throw new Error("ArgumentNullException:document");if(null==t)throw new Error("ArgumentNullException:page");var n=i?this.pageSettings.margins.bottom:0,r=null!=this.template.getBottom(t)?this.template.getBottom(t).height:0,o=null!=e.template.getBottom(t)?e.template.getBottom(t).height:0;return n+=this.template.applyDocumentBottomTemplate?Math.max(r,o):r},e.prototype.remove=function(e){if(null==e)throw Error('ArgumentNullException("page")');var t=this.pdfPages.indexOf(e);this.pagesReferences.removeAt(t);for(var i=[],n=0;n<t;n++)i.push(this.pdfPages[n]);for(n=t+1;n<this.pdfPages.length;n++)i.push(this.pdfPages[n]);this.pdfPages=i},e.prototype.applyPageSettings=function(e,t,i){var n=new MC(i.origin,i.size);e.items.setValue(this.dictionaryProperties.mediaBox,nC.fromRectangle(n));var r;r=Gx.rotateFactor*i.rotate;var o=new iC(r);e.items.setValue(this.dictionaryProperties.rotate,o)},e.prototype.beginSave=function(e,t){var i=t.document;this.applyPageSettings(this.section,i.pageSettings,e)},e.prototype.drawTemplates=function(e,t,i,n){var r=this.getDocumentTemplates(i,e,n),o=this.getSectionTemplates(e,n);this.drawTemplatesHelper(t,i,r),this.drawTemplatesHelper(t,i,o)},e.prototype.drawTemplatesHelper=function(e,t,i){if(null!=i&&i.length>0)for(var n=i.length,r=0;r<n;r++){i[r].draw(e,t)}},e}(),_x=function(){function e(e){this.pageOrientation=e.pageSettings.orientation,this.pageRotate=e.pageSettings.rotate,this.pageSize=e.pageSettings.size,this.pageOrigin=e.pageSettings.origin}return Object.defineProperty(e.prototype,"orientation",{get:function(){return this.pageOrientation},set:function(e){this.pageOrientation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this.pageRotate},set:function(e){this.pageRotate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.pageSize},set:function(e){this.pageSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this.pageOrigin},set:function(e){this.pageOrigin=e},enumerable:!0,configurable:!0}),e}(),Gx=function(){function e(e){this.sections=[],this.dictionaryProperties=new Yw,this.pdfDocument=e.clone(),this.initialize()}return Object.defineProperty(e.prototype,"section",{get:function(){return this.sections},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return this.pdfDocument},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.sections.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.pages},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.sectionCount=new iC(0),this.sectionCollection=new nC,this.pages=new Xw,this.pages.beginSave=new Qw(this),this.pages.items.setValue(this.dictionaryProperties.type,new Uw("Pages")),this.pages.items.setValue(this.dictionaryProperties.kids,this.sectionCollection),this.pages.items.setValue(this.dictionaryProperties.count,this.sectionCount),this.pages.items.setValue(this.dictionaryProperties.resources,new Xw),this.setPageSettings(this.pages,this.pdfDocument.pageSettings)},e.prototype.pdfSectionCollection=function(e){if(e<0||e>=this.count)throw new Error("IndexOutOfRangeException()");return this.sections[e]},e.prototype.setPageSettings=function(e,t){var i=new MC(new PC,t.size);e.items.setValue(this.dictionaryProperties.mediaBox,nC.fromRectangle(i))},e.prototype.add=function(e){if(void 0===e){var t=new Wx(this.pdfDocument);return this.add(t),t}var i=this.checkSection(e);return this.sections.push(e),e.parent=this,this.sectionCollection.add(i),this.sections.indexOf(e)},e.prototype.checkSection=function(e){var t=new vC(e);this.sectionCollection.contains(t);return t},e.prototype.countPages=function(){var e=0;return this.sections.forEach((function(t){return e+=t.count})),e},e.prototype.beginSave=function(){this.sectionCount.intValue=this.countPages()},e.rotateFactor=90,e}(),Ux=function(){function e(e){this.pdfPageCollectionIndex=new Nw,this.document=e}return Object.defineProperty(e.prototype,"count",{get:function(){return this.countPages()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCollectionIndex",{get:function(){return this.pdfPageCollectionIndex},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(void 0===e){var t=new Nx;return this.add(t),t}this.getLastSection().add(e)},e.prototype.getLastSection=function(){var e=this.document.sections;return 0===e.section.length&&e.add(),e.section[e.section.length-1]},e.prototype.onPageAdded=function(e){},e.prototype.countPages=function(){for(var e=this.document.sections,t=0,i=0;i<e.section.length;i++)t+=e.section[i].count;return t},e.prototype.getPageByIndex=function(e){return this.getPage(e)},e.prototype.getPage=function(e){if(e<0||e>=this.count)throw Error('ArgumentOutOfRangeException("index", "Value can not be less 0")');for(var t=null,i=0,n=0,r=0,o=this.document.sections.count,s=0;s<o;s++){var a=this.document.sections.section[s];if(n=a.count,r=e-i,e>=i&&r<n){t=a.getPages()[r];break}i+=n}return t},e.prototype.indexOf=function(e){var t=-1;if(null==e)throw new Error("ArgumentNullException: page");for(var i=0,n=0,r=this.document.sections.count;n<r;n++){var o=this.document.sections.pdfSectionCollection(n);if((t=o.indexOf(e))>=0){t+=i;break}t=-1,i+=o.count}return t},e.prototype.remove=function(e){if(null==e)throw Error('ArgumentNullException("page")');for(var t=null,i=0,n=this.document.sections.count;i<n;i++)if((t=this.document.sections.pdfSectionCollection(i)).pages.contains(e)){t.pages.remove(e);break}return t},e}(),Kx=function(){function e(){this.referenceObjects=[],this.pdfFontCollection=new Nw}return e.prototype.search=function(e){var t=null,i=this.getGroup(e);return null==i?i=this.createNewGroup():i.length>0&&(t=i[0]),i.push(e),t},e.prototype.createNewGroup=function(){var e=[];return this.referenceObjects.push(e),e},e.prototype.getGroup=function(e){var t=null;if(null!==e)for(var i=this.referenceObjects.length,n=0;n<i;n++){if(this.referenceObjects.length>0){var r=this.referenceObjects[n];if(r.length>0){var o=r[0];if(e.equalsTo(o)){t=r;break}}else this.removeGroup(r)}i=this.referenceObjects.length}return t},e.prototype.removeGroup=function(e){if(null!==e){var t=this.referenceObjects.indexOf(e);this.referenceObjects.slice(t,t+1)}},e.prototype.destroy=function(){this.pdfFontCollection=void 0,this.referenceObjects=void 0},e}(),Yx=function(){function e(){}return e.getMetrics=function(e,t,i){var n=null;switch(e){case YC.Helvetica:n=this.getHelveticaMetrics(e,t,i);break;case YC.Courier:n=this.getCourierMetrics(e,t,i);break;case YC.TimesRoman:n=this.getTimesMetrics(e,t,i);break;case YC.Symbol:n=this.getSymbolMetrics(e,t,i);break;case YC.ZapfDingbats:n=this.getZapfDingbatsMetrics(e,t,i);break;default:n=this.getHelveticaMetrics(YC.Helvetica,t,i)}return n.name=e.toString(),n.subScriptSizeFactor=this.subSuperScriptFactor,n.superscriptSizeFactor=this.subSuperScriptFactor,n},e.getHelveticaMetrics=function(e,t,i){var n=new tx;return(t&KC.Bold)>0&&(t&KC.Italic)>0?(n.ascent=this.helveticaBoldItalicAscent,n.descent=this.helveticaBoldItalicDescent,n.postScriptName=this.helveticaBoldItalicName,n.size=i,n.widthTable=new nx(this.arialBoldWidth),n.height=n.ascent-n.descent):(t&KC.Bold)>0?(n.ascent=this.helveticaBoldAscent,n.descent=this.helveticaBoldDescent,n.postScriptName=this.helveticaBoldName,n.size=i,n.widthTable=new nx(this.arialBoldWidth),n.height=n.ascent-n.descent):(t&KC.Italic)>0?(n.ascent=this.helveticaItalicAscent,n.descent=this.helveticaItalicDescent,n.postScriptName=this.helveticaItalicName,n.size=i,n.widthTable=new nx(this.arialWidth),n.height=n.ascent-n.descent):(n.ascent=this.helveticaAscent,n.descent=this.helveticaDescent,n.postScriptName=this.helveticaName,n.size=i,n.widthTable=new nx(this.arialWidth),n.height=n.ascent-n.descent),n},e.getCourierMetrics=function(e,t,i){var n=new tx;return(t&KC.Bold)>0&&(t&KC.Italic)>0?(n.ascent=this.courierBoldItalicAscent,n.descent=this.courierBoldItalicDescent,n.postScriptName=this.courierBoldItalicName,n.size=i,n.widthTable=new nx(this.fixedWidth),n.height=n.ascent-n.descent):(t&KC.Bold)>0?(n.ascent=this.courierBoldAscent,n.descent=this.courierBoldDescent,n.postScriptName=this.courierBoldName,n.size=i,n.widthTable=new nx(this.fixedWidth),n.height=n.ascent-n.descent):(t&KC.Italic)>0?(n.ascent=this.courierItalicAscent,n.descent=this.courierItalicDescent,n.postScriptName=this.courierItalicName,n.size=i,n.widthTable=new nx(this.fixedWidth),n.height=n.ascent-n.descent):(n.ascent=this.courierAscent,n.descent=this.courierDescent,n.postScriptName=this.courierName,n.size=i,n.widthTable=new nx(this.fixedWidth),n.height=n.ascent-n.descent),n},e.getTimesMetrics=function(e,t,i){var n=new tx;return(t&KC.Bold)>0&&(t&KC.Italic)>0?(n.ascent=this.timesBoldItalicAscent,n.descent=this.timesBoldItalicDescent,n.postScriptName=this.timesBoldItalicName,n.size=i,n.widthTable=new nx(this.timesRomanBoldItalicWidths),n.height=n.ascent-n.descent):(t&KC.Bold)>0?(n.ascent=this.timesBoldAscent,n.descent=this.timesBoldDescent,n.postScriptName=this.timesBoldName,n.size=i,n.widthTable=new nx(this.timesRomanBoldWidth),n.height=n.ascent-n.descent):(t&KC.Italic)>0?(n.ascent=this.timesItalicAscent,n.descent=this.timesItalicDescent,n.postScriptName=this.timesItalicName,n.size=i,n.widthTable=new nx(this.timesRomanItalicWidth),n.height=n.ascent-n.descent):(n.ascent=this.timesAscent,n.descent=this.timesDescent,n.postScriptName=this.timesName,n.size=i,n.widthTable=new nx(this.timesRomanWidth),n.height=n.ascent-n.descent),n},e.getSymbolMetrics=function(e,t,i){var n=new tx;return n.ascent=this.symbolAscent,n.descent=this.symbolDescent,n.postScriptName=this.symbolName,n.size=i,n.widthTable=new nx(this.symbolWidth),n.height=n.ascent-n.descent,n},e.getZapfDingbatsMetrics=function(e,t,i){var n=new tx;return n.ascent=this.zapfDingbatsAscent,n.descent=this.zapfDingbatsDescent,n.postScriptName=this.zapfDingbatsName,n.size=i,n.widthTable=new nx(this.zapfDingbatsWidth),n.height=n.ascent-n.descent,n},e.subSuperScriptFactor=1.52,e.helveticaAscent=931,e.helveticaDescent=-225,e.helveticaName="Helvetica",e.helveticaBoldAscent=962,e.helveticaBoldDescent=-228,e.helveticaBoldName="Helvetica-Bold",e.helveticaItalicAscent=931,e.helveticaItalicDescent=-225,e.helveticaItalicName="Helvetica-Oblique",e.helveticaBoldItalicAscent=962,e.helveticaBoldItalicDescent=-228,e.helveticaBoldItalicName="Helvetica-BoldOblique",e.courierAscent=805,e.courierDescent=-250,e.courierName="Courier",e.courierBoldAscent=801,e.courierBoldDescent=-250,e.courierBoldName="Courier-Bold",e.courierItalicAscent=805,e.courierItalicDescent=-250,e.courierItalicName="Courier-Oblique",e.courierBoldItalicAscent=801,e.courierBoldItalicDescent=-250,e.courierBoldItalicName="Courier-BoldOblique",e.timesAscent=898,e.timesDescent=-218,e.timesName="Times-Roman",e.timesBoldAscent=935,e.timesBoldDescent=-218,e.timesBoldName="Times-Bold",e.timesItalicAscent=883,e.timesItalicDescent=-217,e.timesItalicName="Times-Italic",e.timesBoldItalicAscent=921,e.timesBoldItalicDescent=-218,e.timesBoldItalicName="Times-BoldItalic",e.symbolAscent=1010,e.symbolDescent=-293,e.symbolName="Symbol",e.zapfDingbatsAscent=820,e.zapfDingbatsDescent=-143,e.zapfDingbatsName="ZapfDingbats",e.arialWidth=[278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,0,556,0,222,556,333,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,222,222,333,333,350,556,1e3,333,1e3,500,333,944,0,500,667,0,333,556,556,556,556,260,556,333,737,370,556,584,0,737,333,400,584,333,333,333,556,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,584,611,556,556,556,556,500,556,500],e.arialBoldWidth=[278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,0,556,0,278,556,500,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,278,278,500,500,350,556,1e3,333,1e3,556,333,944,0,500,667,0,333,556,556,556,556,280,556,333,737,370,556,584,0,737,333,400,584,333,333,333,611,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,584,611,611,611,611,611,556,611,556],e.fixedWidth=[600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600],e.timesRomanWidth=[250,333,408,500,500,833,778,180,333,333,500,564,250,333,250,278,500,500,500,500,500,500,500,500,500,500,278,278,564,564,564,444,921,722,667,667,722,611,556,722,722,333,389,722,611,889,722,722,556,722,667,556,611,722,722,944,722,722,611,333,278,333,469,500,333,444,500,444,500,444,333,500,500,278,278,500,278,778,500,500,500,500,333,389,278,500,500,722,500,500,444,480,200,480,541,0,500,0,333,500,444,1e3,500,500,333,1e3,556,333,889,0,611,0,0,333,333,444,444,350,500,1e3,333,980,389,333,722,0,444,722,0,333,500,500,500,500,200,500,333,760,276,500,564,0,760,333,400,564,300,300,333,500,453,250,333,300,310,500,750,750,750,444,722,722,722,722,722,722,889,667,611,611,611,611,333,333,333,333,722,722,722,722,722,722,722,564,722,722,722,722,722,722,556,500,444,444,444,444,444,444,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,564,500,500,500,500,500,500,500,500],e.timesRomanBoldWidth=[250,333,555,500,500,1e3,833,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,930,722,667,722,722,667,611,778,778,389,500,778,667,944,722,778,611,778,722,556,667,722,722,1e3,722,722,667,333,278,333,581,500,333,500,556,444,556,444,333,500,556,278,333,556,278,833,556,500,556,556,444,389,333,556,500,722,500,500,444,394,220,394,520,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,1e3,0,667,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,444,722,0,333,500,500,500,500,220,500,333,747,300,500,570,0,747,333,400,570,300,300,333,556,540,250,333,300,330,500,750,750,750,500,722,722,722,722,722,722,1e3,722,667,667,667,667,389,389,389,389,722,722,778,778,778,778,778,570,778,722,722,722,722,722,611,556,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,500,556,500],e.timesRomanItalicWidth=[250,333,420,500,500,833,778,214,333,333,500,675,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,675,675,675,500,920,611,611,667,722,611,611,722,722,333,444,667,556,833,667,722,611,722,611,500,556,722,611,833,611,556,556,389,278,389,422,500,333,500,500,444,500,444,278,500,500,278,278,444,278,722,500,500,500,500,389,389,278,500,444,667,444,444,389,400,275,400,541,0,500,0,333,500,556,889,500,500,333,1e3,500,333,944,0,556,0,0,333,333,556,556,350,500,889,333,980,389,333,667,0,389,556,0,389,500,500,500,500,275,500,333,760,276,500,675,0,760,333,400,675,300,300,333,500,523,250,333,300,310,500,750,750,750,500,611,611,611,611,611,611,889,667,611,611,611,611,333,333,333,333,722,667,722,722,722,722,722,675,722,722,722,722,722,556,611,500,500,500,500,500,500,500,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,675,500,500,500,500,500,444,500,444],e.timesRomanBoldItalicWidths=[250,389,555,500,500,833,778,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,832,667,667,667,722,667,667,722,778,389,500,667,611,889,722,722,611,722,667,556,611,722,667,889,667,611,611,333,278,333,570,500,333,500,500,444,500,444,333,500,556,278,278,500,278,778,556,500,500,500,389,389,278,556,444,667,500,444,389,348,220,348,570,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,944,0,611,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,389,611,0,389,500,500,500,500,220,500,333,747,266,500,606,0,747,333,400,570,300,300,333,576,500,250,333,300,300,500,750,750,750,500,667,667,667,667,667,667,944,667,667,667,667,667,389,389,389,389,722,722,722,722,722,722,722,570,722,722,722,722,722,611,611,500,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,444,500,444],e.symbolWidth=[250,333,713,500,549,833,778,439,333,333,500,549,250,549,250,278,500,500,500,500,500,500,500,500,500,500,278,278,549,549,549,444,549,722,667,722,612,611,763,603,722,333,631,722,686,889,722,722,768,741,556,592,611,690,439,768,645,795,611,333,863,333,658,500,500,631,549,549,494,439,521,411,603,329,603,549,549,576,521,549,549,521,549,603,439,576,713,686,493,686,494,480,200,480,549,750,620,247,549,167,713,500,753,753,753,753,1042,987,603,987,603,400,549,411,549,549,713,494,460,549,549,549,549,1e3,603,1e3,658,823,686,795,987,768,768,823,768,768,713,713,713,713,713,713,713,768,713,790,790,890,823,549,250,713,603,603,1042,987,603,987,603,494,329,790,790,786,713,384,384,384,384,384,384,494,494,494,494,329,274,686,686,686,384,384,384,384,384,384,494,494,494,-1],e.zapfDingbatsWidth=[278,974,961,974,980,719,789,790,791,690,960,939,549,855,911,933,911,945,974,755,846,762,761,571,677,763,760,759,754,494,552,537,577,692,786,788,788,790,793,794,816,823,789,841,823,833,816,831,923,744,723,749,790,792,695,776,768,792,759,707,708,682,701,826,815,789,789,707,687,696,689,786,787,713,791,785,791,873,761,762,762,759,759,892,892,788,784,438,138,277,415,392,392,668,668,390,390,317,317,276,276,509,509,410,410,234,234,334,334,732,544,544,910,667,760,760,776,595,694,626,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,894,838,1016,458,748,924,748,918,927,928,928,834,873,828,924,924,917,930,931,463,883,836,836,867,867,696,696,874,874,760,946,771,865,771,888,967,888,831,873,927,970,918],e}(),Xx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qx=function(e){function t(i,n,r){var o=e.call(this,n,void 0===r?i instanceof t?i.style:KC.Regular:r)||this;return o.dictionaryProperties=new Yw,o.encodings=["Unknown","StandardEncoding","MacRomanEncoding","MacExpertEncoding","WinAnsiEncoding","PDFDocEncoding","IdentityH"],o.pdfFontFamily=void 0===i?YC.Helvetica:i instanceof t?i.fontFamily:i,o.checkStyle(),o.initializeInternals(),o}return Xx(t,e),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.pdfFontFamily},enumerable:!0,configurable:!0}),t.prototype.checkStyle=function(){if(this.fontFamily===YC.Symbol||this.fontFamily===YC.ZapfDingbats){var e=this.style;e&=~(KC.Bold|KC.Italic),this.setStyle(e)}},t.prototype.getLineWidth=function(e,i){if(null==e)throw new Error("ArgumentNullException:line");for(var n=0,r=(this.name,0),o=(e=t.convert(e)).length;r<o;r++){var s=e[r];n+=this.getCharWidthInternal(s,i)}var a=this.metrics.getSize(i);return n*=xS.charSizeMultiplier*a,n=this.applyFormatSettings(e,i,n)},t.prototype.equalsToFont=function(e){var t=!1,i=e;if(null!=i){var n=this.fontFamily===i.fontFamily,r=~(KC.Underline|KC.Strikeout),o=(this.style&r)==(i.style&r);t=n&&o}return t},t.prototype.initializeInternals=function(){Zx.cache.search(this);var e,t=Yx.getMetrics(this.pdfFontFamily,this.style,this.size);this.metrics=t,e=this.createInternals(),this.setInternals(e)},t.prototype.createInternals=function(){var e=new Xw;if(e.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.font)),e.items.setValue(this.dictionaryProperties.subtype,new Uw(this.dictionaryProperties.type1)),e.items.setValue(this.dictionaryProperties.baseFont,new Uw(this.metrics.postScriptName)),this.fontFamily!==YC.Symbol&&this.fontFamily!==YC.ZapfDingbats){var t=this.encodings[ZC.WinAnsiEncoding];e.items.setValue(this.dictionaryProperties.encoding,new Uw(t))}return e},t.prototype.getCharWidthInternal=function(e,i){var n=0;return n=e.charCodeAt(0),"0"!==this.name&&"1"!==this.name&&"2"!==this.name&&"3"!==this.name&&"4"!==this.name||(n-=t.charOffset),n=n>=0&&128!==n?n:0,this.metrics.widthTable.items(n)},t.convert=function(e){return e},t.charOffset=32,t}(xS),Jx=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zx=function(e){function t(i){var n=e.call(this)||this;n.defaultMargin=40,n.streamWriter=null,n.document=n;var r=!1;void 0===i?(t.cacheCollection=new Kx,r=!1):r=i;var o=new Hw;n.setMainObjectCollection(o);var s=new EC;s.isMerging=r,s.document=n,n.setCrossTable(s);var a=new DC;return n.setCatalog(a),o.add(a),a.position=-1,n.sectionCollection=new Gx(n),n.documentPageCollection=new Ux(n),a.pages=n.sectionCollection,n}return Jx(t,e),Object.defineProperty(t,"defaultFont",{get:function(){return null==this.defaultStandardFont&&(this.defaultStandardFont=new Qx(YC.Helvetica,8)),this.defaultStandardFont},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sections",{get:function(){return this.sectionCollection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSettings",{get:function(){return null==this.settings&&(this.settings=new aS(this.defaultMargin)),this.settings},set:function(e){this.settings=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pages",{get:function(){return this.documentPageCollection},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cache",{get:function(){return void 0===t.cacheCollection||null==t.cacheCollection?new Kx:t.cacheCollection},set:function(e){this.cacheCollection=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"enableCache",{get:function(){return this.isCacheEnabled},set:function(e){this.isCacheEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorSpace",{get:function(){return this.pdfColorSpace===qC.Rgb||this.pdfColorSpace===qC.Cmyk||this.pdfColorSpace===qC.GrayScale?this.pdfColorSpace:qC.Rgb},set:function(e){e===qC.Rgb||e===qC.Cmyk||e===qC.GrayScale?this.pdfColorSpace=e:this.pdfColorSpace=qC.Rgb},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return null==this.pageTemplate&&(this.pageTemplate=new jx),this.pageTemplate},set:function(e){this.pageTemplate=e},enumerable:!0,configurable:!0}),t.prototype.docSave=function(e,t,i){if(this.checkPagesPresence(),null===e)throw new Error("ArgumentNullException : stream");this.streamWriter=e;var n=new Aw(e);if(n.document=this,"boolean"==typeof t&&void 0===i)return this.crossTable.save(n);this.crossTable.save(n,t)},t.prototype.checkPagesPresence=function(){0===this.pages.count&&this.pages.add()},t.prototype.destroy=function(){this.catalog=void 0,this.colorSpace=void 0,this.currentSavingObj=void 0,this.documentPageCollection=void 0,this.isStreamCopied=void 0,this.pageSettings=void 0,this.pageTemplate=void 0,this.pdfColorSpace=void 0,this.sectionCollection=void 0,t.cache.destroy(),this.crossTable.pdfObjects.destroy(),t.cache=void 0,this.streamWriter.destroy()},t.defaultStandardFont=null,t.isCacheEnabled=!0,t}(Gw),$x=function(){function e(){var e=new gS(new pS(0,0,0));e.dashStyle=jC.Solid;var t=new gS(new pS(0,0,0));t.dashStyle=jC.Solid;var i=new gS(new pS(0,0,0));i.dashStyle=jC.Solid;var n=new gS(new pS(0,0,0));n.dashStyle=jC.Solid,this.leftPen=e,this.rightPen=t,this.topPen=i,this.bottomPen=n}return Object.defineProperty(e.prototype,"left",{get:function(){return this.leftPen},set:function(e){this.leftPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.rightPen},set:function(e){this.rightPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.topPen},set:function(e){this.topPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.bottomPen},set:function(e){this.bottomPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all",{set:function(e){this.leftPen=this.rightPen=this.topPen=this.bottomPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAll",{get:function(){return this.leftPen===this.rightPen&&this.leftPen===this.topPen&&this.leftPen===this.bottomPen},enumerable:!0,configurable:!0}),Object.defineProperty(e,"default",{get:function(){return new e},enumerable:!0,configurable:!0}),e}(),ek=function(){function e(e,t,i,n){this.hasLeftPad=!1,this.hasRightPad=!1,this.hasTopPad=!1,this.hasBottomPad=!1,void 0===e?(this.leftPad=this.rightPad=5.76,this.bottomPad=this.topPad=.5):(this.leftPad=e,this.rightPad=t,this.topPad=i,this.bottomPad=n,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.leftPad},set:function(e){this.leftPad=e,this.hasLeftPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.rightPad},set:function(e){this.rightPad=e,this.hasRightPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.topPad},set:function(e){this.topPad=e,this.hasTopPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.bottomPad},set:function(e){this.bottomPad=e,this.hasBottomPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all",{set:function(e){this.leftPad=this.rightPad=this.topPad=this.bottomPad=e,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0},enumerable:!0,configurable:!0}),e}();!function(e){e[e.Overlap=0]="Overlap",e[e.Inside=1]="Inside"}(fx||(fx={}));var tk,ik=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nk=function(){function e(){}return Object.defineProperty(e.prototype,"backgroundBrush",{get:function(){return this.gridBackgroundBrush},set:function(e){this.gridBackgroundBrush=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textBrush",{get:function(){return this.gridTextBrush},set:function(e){this.gridTextBrush=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textPen",{get:function(){return this.gridTextPen},set:function(e){this.gridTextPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.gridFont},set:function(e){this.gridFont=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundImage",{get:function(){return this.gridBackgroundImage},set:function(e){this.gridBackgroundImage=e},enumerable:!0,configurable:!0}),e}(),rk=function(e){function t(){var t=e.call(this)||this;return t.gridBorderOverlapStyle=fx.Overlap,t.bAllowHorizontalOverflow=!1,t.gridHorizontalOverflowType=tk.LastPage,t}return ik(t,e),Object.defineProperty(t.prototype,"cellSpacing",{get:function(){return void 0===this.gridCellSpacing&&(this.gridCellSpacing=0),this.gridCellSpacing},set:function(e){this.gridCellSpacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalOverflowType",{get:function(){return this.gridHorizontalOverflowType},set:function(e){this.gridHorizontalOverflowType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowHorizontalOverflow",{get:function(){return this.bAllowHorizontalOverflow},set:function(e){this.bAllowHorizontalOverflow=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellPadding",{get:function(){return void 0===this.gridCellPadding&&(this.gridCellPadding=new ek),this.gridCellPadding},set:function(e){void 0===this.gridCellPadding?(this.gridCellPadding=new ek,this.gridCellPadding=e):this.gridCellPadding=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderOverlapStyle",{get:function(){return this.gridBorderOverlapStyle},set:function(e){this.gridBorderOverlapStyle=e},enumerable:!0,configurable:!0}),t}(nk),ok=function(e){function t(){var t=e.call(this)||this;return t.gridCellBorders=$x.default,t}return ik(t,e),Object.defineProperty(t.prototype,"stringFormat",{get:function(){return this.format},set:function(e){this.format=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borders",{get:function(){return this.gridCellBorders},set:function(e){this.gridCellBorders=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellPadding",{get:function(){return this.gridCellPadding},set:function(e){null!=this.gridCellPadding&&void 0!==this.gridCellPadding||(this.gridCellPadding=new ek),this.gridCellPadding=e},enumerable:!0,configurable:!0}),t}(nk),sk=function(){function e(){}return Object.defineProperty(e.prototype,"backgroundBrush",{get:function(){return this.gridRowBackgroundBrush},enumerable:!0,configurable:!0}),e.prototype.setBackgroundBrush=function(e){if(this.gridRowBackgroundBrush=e,void 0!==this.parent)for(var t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.backgroundBrush=e},Object.defineProperty(e.prototype,"textBrush",{get:function(){return this.gridRowTextBrush},enumerable:!0,configurable:!0}),e.prototype.setTextBrush=function(e){if(this.gridRowTextBrush=e,void 0!==this.parent)for(var t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.textBrush=e},Object.defineProperty(e.prototype,"textPen",{get:function(){return this.gridRowTextPen},enumerable:!0,configurable:!0}),e.prototype.setTextPen=function(e){if(this.gridRowTextPen=e,void 0!==this.parent)for(var t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.textPen=e},Object.defineProperty(e.prototype,"font",{get:function(){return this.gridRowFont},enumerable:!0,configurable:!0}),e.prototype.setFont=function(e){if(this.gridRowFont=e,void 0!==this.parent)for(var t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.font=e},Object.defineProperty(e.prototype,"border",{get:function(){return void 0===this.gridRowBorder&&this.setBorder(new $x),this.gridRowBorder},enumerable:!0,configurable:!0}),e.prototype.setBorder=function(e){if(this.gridRowBorder=e,void 0!==this.parent)for(var t=0;t<this.parent.cells.count;t++)this.parent.cells.getCell(t).style.borders=e},e.prototype.setParent=function(e){this.parent=e},Object.defineProperty(e.prototype,"backgroundImage",{get:function(){return this.gridRowBackgroundImage},enumerable:!0,configurable:!0}),e}();!function(e){e[e.NextPage=0]="NextPage",e[e.LastPage=1]="LastPage"}(tk||(tk={}));var ak,lk=function(){function e(e){this.layoutElement=e}return Object.defineProperty(e.prototype,"elements",{get:function(){return this.layoutElement},enumerable:!0,configurable:!0}),e.prototype.getElement=function(){return this.layoutElement},e.prototype.layout=function(e){return this.layoutInternal(e)},e.prototype.Layouter=function(e){return this.layoutInternal(e)},e.prototype.getNextPage=function(e){return e.section.add()},e.prototype.getPaginateBounds=function(e){if(null==e)throw new Error("ArgumentNullException : param");return e.format.usePaginateBounds?e.format.paginateBounds:new MC(e.bounds.x,0,e.bounds.width,e.bounds.height)},e}(),hk=function(){function e(e){void 0===e||(this.break=e.break,this.layout=e.layout,this.paginateBounds=e.paginateBounds,this.boundsSet=e.usePaginateBounds)}return Object.defineProperty(e.prototype,"layout",{get:function(){return this.layoutType},set:function(e){this.layoutType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"break",{get:function(){return this.breakType},set:function(e){this.breakType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paginateBounds",{get:function(){return void 0===this.layoutPaginateBounds&&null==this.layoutPaginateBounds&&(this.layoutPaginateBounds=new MC(0,0,0,0)),this.layoutPaginateBounds},set:function(e){this.layoutPaginateBounds=e,this.boundsSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usePaginateBounds",{get:function(){return this.boundsSet},enumerable:!0,configurable:!0}),e}(),pk=function(){function e(){}return Object.defineProperty(e.prototype,"page",{get:function(){return this.pdfPage},set:function(e){this.pdfPage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new MC(this.layoutBounds.x,this.layoutBounds.y,this.layoutBounds.width,this.layoutBounds.height)},set:function(e){this.layoutBounds=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.layoutFormat},set:function(e){this.layoutFormat=e},enumerable:!0,configurable:!0}),e}(),dk=function(){function e(e,t){this.pdfPage=e,this.layoutBounds=t}return Object.defineProperty(e.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.layoutBounds},enumerable:!0,configurable:!0}),e}(),ck=function(){function e(){}return Object.defineProperty(e.prototype,"raiseBeginPageLayout",{get:function(){return void 0!==this.beginPageLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"raiseEndPageLayout",{get:function(){return void 0!==this.endPageLayout},enumerable:!0,configurable:!0}),e.prototype.onBeginPageLayout=function(e){this.beginPageLayout&&this.beginPageLayout(this,e)},e.prototype.onEndPageLayout=function(e){this.endPageLayout&&this.endPageLayout(this,e)},e.prototype.drawHelper=function(e,t,i,n){if(t instanceof PC&&void 0===t.width&&void 0===i)return this.drawHelper(e,t.x,t.y);if("number"==typeof t&&"number"==typeof i&&void 0===n)return this.drawHelper(e,t,i,null);if(t instanceof MC&&void 0!==t.width&&void 0===i)return this.drawHelper(e,t,null);if(t instanceof PC&&void 0===t.width&&i instanceof hk)return this.drawHelper(e,t.x,t.y,i);if("number"==typeof t&&"number"==typeof i&&(n instanceof hk||null==n)){var r=e.graphics.clientSize.width-t,o=new MC(t,i,r,0);return this.drawHelper(e,o,n)}if(t instanceof MC&&void 0!==t.width&&"boolean"==typeof i)return this.bEmbedFonts=i,this.drawHelper(e,t,null);var s=new pk,a=t,l=i;if(s.page=e,s.bounds=a,null!=s){var h=s.bounds.x,p=s.bounds.y;0===s.bounds.x&&(h=$x.default.right.width/2),0===s.bounds.y&&(p=$x.default.top.width/2);var d=new MC(h,p,s.bounds.width,s.bounds.height);s.bounds=d}return s.format=null!=l?l:new hk,this.layout(s)},e}(),uk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gk=function(e){function t(t){return e.call(this,t)||this}return uk(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return e.prototype.getElement.call(this)},enumerable:!0,configurable:!0}),t.prototype.layoutInternal=function(e){this.format=null!==this.element.stringFormat&&void 0!==this.element.stringFormat?this.element.stringFormat:null;var t=e.page,i=e.bounds,n=this.element.value,r=null,o=new fk;for(o.page=t,o.remainder=n;;){o=this.layoutOnPage(n,t,i,e),r=this.getLayoutResult(o);break}return r},t.prototype.getLayoutResult=function(e){return new mk(e.page,e.bounds,e.remainder,e.lastLineBounds)},t.prototype.layoutOnPage=function(e,t,i,n){var r=new fk;r.remainder=e,r.page=t,i=this.checkCorrectBounds(t,i);var o=(new yS).layout(e,this.element.font,this.format,i,t.getClientSize().height,!1,new IC(0,0)),s=null==o.remainder,a=(n.format.break===CS.FitElement||o.empty,t.graphics),l=this.element.getBrush();this.element instanceof Ik&&(l.color=new pS(0,0,255)),a.drawStringLayoutResult(o,this.element.font,this.element.pen,l,i,this.format);o.lines[o.lineCount-1];return r.lastLineBounds=a.getLineBounds(o.lineCount-1,o,this.element.font,i,this.format),r.bounds=this.getTextPageBounds(t,i,o),r.remainder=o.remainder,r.end=s,r},t.prototype.checkCorrectBounds=function(e,t){var i=e.graphics.clientSize;return t.height=t.height>0?t.height:i.height-t.y,t},t.prototype.getTextPageBounds=function(e,t,i){var n=i.actualSize,r=t.x,o=t.y,s=t.width>0?t.width:n.width,a=n.height;r=e.graphics.checkCorrectLayoutRectangle(n,t.x,t.y,this.format).x;var l=e.graphics.getTextVerticalAlignShift(n.height,t.height,this.format);return new MC(r,o+=l,s,a)},t}(lk),fk=function(){},mk=function(e){function t(t,i,n,r){var o=e.call(this,t,i)||this;return o.remainderText=n,o.lastLineTextBounds=r,o}return uk(t,e),Object.defineProperty(t.prototype,"remainder",{get:function(){return this.remainderText},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastLineBounds",{get:function(){return this.lastLineTextBounds},enumerable:!0,configurable:!0}),t}(dk),yk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vk=function(e){function t(t,i,n,r,o){var s=e.call(this)||this;return s.content="",s.elementValue="",s.hasPointOverload=!1,s.isPdfTextElement=!1,void 0===t||("string"==typeof t&&void 0===i?(s.content=t,s.elementValue=t):"string"==typeof t&&i instanceof xS&&void 0===n?(s.content=t,s.elementValue=t,s.pdfFont=i):"string"==typeof t&&i instanceof xS&&n instanceof gS&&void 0===r?(s.content=t,s.elementValue=t,s.pdfFont=i,s.pdfPen=n):"string"==typeof t&&i instanceof xS&&n instanceof dS&&void 0===r?(s.content=t,s.elementValue=t,s.pdfFont=i,s.pdfBrush=n):(s.content=t,s.elementValue=t,s.pdfFont=i,s.pdfPen=n,s.pdfBrush=r,s.format=o)),s}return yk(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.content},set:function(e){this.elementValue=e,this.content=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.elementValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pen",{get:function(){return this.pdfPen},set:function(e){this.pdfPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brush",{get:function(){return this.pdfBrush},set:function(e){this.pdfBrush=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.pdfFont},set:function(e){this.pdfFont=e,this.pdfFont instanceof Qx&&null!=this.content?this.elementValue=Qx.convert(this.content):this.elementValue=this.content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stringFormat",{get:function(){return this.format},set:function(e){this.format=e},enumerable:!0,configurable:!0}),t.prototype.getBrush=function(){return null==this.pdfBrush||void 0===this.pdfBrush?new uS(new pS(0,0,0)):this.pdfBrush},t.prototype.layout=function(e){return new gk(this).layout(e)},t.prototype.drawText=function(e,t,i,n){if(t instanceof PC&&void 0===t.width&&void 0===i)return this.hasPointOverload=!0,this.drawText(e,t.x,t.y);if("number"==typeof t&&"number"==typeof i&&void 0===n)return this.hasPointOverload=!0,this.drawText(e,t,i,null);if(t instanceof MC&&void 0!==t.width&&void 0===i)return this.drawText(e,t,null);if(t instanceof PC&&void 0===t.width&&i instanceof hk)return this.hasPointOverload=!0,this.drawText(e,t.x,t.y,i);if("number"==typeof t&&"number"==typeof i&&(n instanceof hk||null==n)){this.hasPointOverload=!0;var r=e.graphics.clientSize.width-t,o=new MC(t,i,r,0);return this.drawText(e,o,n)}if(t instanceof MC&&void 0!==t.width&&"boolean"==typeof i)return this.drawText(e,t,null);var s=new yS;if(this.hasPointOverload){var a=s.layout(this.value,this.font,this.stringFormat,new IC(e.graphics.clientSize.width-t.x,0),!0,e.graphics.clientSize),l=void 0,h=t,p=i;(m=new pk).page=e;if(m.bounds=h,m.format=null!=p?p:new hk,a.lines.length>1){if(this.text=a.layoutLines[0].text,m.bounds.y<=m.page.graphics.clientSize.height){var d=new PC(m.bounds.x,m.bounds.y);l=this.layout(m);for(var c=new MC(0,l.bounds.y+a.lineHeight,e.graphics.clientSize.width,a.lineHeight),u=1;u<a.lines.length;u++)if(m.page=l.page,m.bounds=new MC(new PC(c.x,c.y),new IC(c.width,c.height)),this.text=a.layoutLines[u].text,c.y+a.lineHeight>l.page.graphics.clientSize.height&&(!0,m.page=m.page.graphics.getNextPage(),c=d.y>l.page.graphics.clientSize.height-l.bounds.height?new MC(0,l.bounds.height,l.page.graphics.clientSize.width,a.lineHeight):new MC(0,0,l.page.graphics.clientSize.width,a.lineHeight),m.bounds=c),l=this.layout(m),u!==a.lines.length-1)c=new MC(0,l.bounds.y+a.lineHeight,l.page.graphics.clientSize.width,a.lineHeight);else{var g=this.font.measureString(this.text,this.format).width;l=this.calculateResultBounds(l,g,l.page.graphics.clientSize.width,0)}}return l}var f=this.font.measureString(this.text,this.format);return m.bounds.y<=m.page.graphics.clientSize.height&&(l=this.layout(m),l=this.calculateResultBounds(l,f.width,l.page.graphics.clientSize.width,0)),l}l=s.layout(this.value,this.font,this.stringFormat,new IC(t.width,0),!1,e.graphics.clientSize);var m,y=void 0;h=t,p=i;if((m=new pk).page=e,m.bounds=h,m.format=null!=p?p:new hk,l.lines.length>1){if(this.text=l.layoutLines[0].text,m.bounds.y<=m.page.graphics.clientSize.height){d=new PC(m.bounds.x,m.bounds.y);y=this.layout(m);for(c=new MC(h.x,y.bounds.y+l.lineHeight,h.width,l.lineHeight),u=1;u<l.lines.length;u++)if(m.page=y.page,m.bounds=new MC(c.x,c.y,c.width,c.height),this.text=l.layoutLines[u].text,c.y+l.lineHeight>y.page.graphics.clientSize.height&&(!0,m.page=m.page.graphics.getNextPage(),c=d.y>y.page.graphics.clientSize.height-y.bounds.height?new MC(h.x,l.lineHeight,h.width,l.lineHeight):new MC(h.x,0,h.width,l.lineHeight),m.bounds=c),y=this.layout(m),u!==l.lines.length-1)c=new MC(h.x,y.bounds.y+l.lineHeight,h.width,l.lineHeight);else{g=this.font.measureString(this.text,this.format).width;y=this.calculateResultBounds(y,g,h.width,h.x)}}return y}f=this.font.measureString(this.text,this.format);return m.bounds.y<=m.page.graphics.clientSize.height&&(y=this.layout(m),y=this.calculateResultBounds(y,f.width,h.width,h.x)),y},t.prototype.calculateResultBounds=function(e,t,i,n){return null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===FC.Center?(e.bounds.x=n+(i-t)/2,e.bounds.width=t):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===FC.Right?(e.bounds.x=n+(i-t),e.bounds.width=t):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===FC.Justify?(e.bounds.x=n,e.bounds.width=i):(e.bounds.width=n,e.bounds.width=t),e},t}(ck),bk=function(){function e(e){this.dictionaryProperties=new Yw,this.pdfColor=new pS(255,255,255),this.rectangle=new MC(0,0,0,0),this.pdfPage=null,this.textBrush=new uS(new pS(0,0,0)),this.textFont=new Qx(YC.TimesRoman,10),this.format=new fS(FC.Left),this.content="",this.pdfDictionary=new Xw,this.internalColor=new pS,this.darkness=1,void 0===e?this.initialize():(this.initialize(),this.bounds=e)}return Object.defineProperty(e.prototype,"color",{get:function(){return this.pdfColor},set:function(e){this.pdfColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerColor",{get:function(){return this.internalColor},set:function(e){this.internalColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.rectangle},set:function(e){this.rectangle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.textFont},set:function(e){this.textFont=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stringFormat",{get:function(){return this.format},set:function(e){this.format=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brush",{get:function(){return this.textBrush},set:function(e){this.textBrush=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.content},set:function(e){this.content=e,this.dictionary.items.setValue(this.dictionaryProperties.contents,new mC(this.content))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dictionary",{get:function(){return this.pdfDictionary},set:function(e){this.pdfDictionary=e},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.pdfDictionary.annotationBeginSave=new $w(this),this.pdfDictionary.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.annot))},e.prototype.setPage=function(e){this.pdfPage=e,this.pdfDictionary.items.setValue(this.dictionaryProperties.p,new vC(this.pdfPage))},e.prototype.beginSave=function(){this.save()},e.prototype.save=function(){var e=new MC(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),t=this.pdfPage.section,i=e.height,n=t.pointToNativePdf(this.page,new PC(e.x,e.y));e.x=n.x,e.width=n.x+e.width,e.y=n.y-this.page.document.pageSettings.margins.top,e.height=e.y-i,this.pdfDictionary.items.setValue(this.dictionaryProperties.rect,nC.fromRectangle(e)),this.dictionary.items.setValue(this.dictionaryProperties.ca,new iC(this.darkness))},Object.defineProperty(e.prototype,"element",{get:function(){return this.pdfDictionary},enumerable:!0,configurable:!0}),e}(),wk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ck=function(e){function t(t){return e.call(this,t)||this}return wk(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.dictionary.items.setValue(this.dictionaryProperties.subtype,new Uw(this.dictionaryProperties.link))},t}(bk),Sk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xk=function(e){function t(t){var i=e.call(this,t)||this;return i.pdfAction=null,i}return Sk(t,e),t.prototype.getSetAction=function(e){if(void 0===e)return this.pdfAction;this.pdfAction=e},t}(Ck),kk=function(){function e(){this.action=null,this.dictionaryProperties=new Yw,this.initialize()}return Object.defineProperty(e.prototype,"next",{get:function(){return this.action},set:function(e){this.action=e,this.dictionary.items.setValue(this.dictionaryProperties.next,new vC(this.action))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dictionary",{get:function(){return void 0===this.pdfDictionary&&(this.pdfDictionary=new Xw),this.pdfDictionary},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.dictionary.items.setValue(this.dictionaryProperties.type,new Uw(this.dictionaryProperties.action))},Object.defineProperty(e.prototype,"element",{get:function(){return this.dictionary},enumerable:!0,configurable:!0}),e}(),Tk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dk=function(e){function t(t){var i=e.call(this)||this;return i.uniformResourceIdentifier="",i}return Tk(t,e),Object.defineProperty(t.prototype,"uri",{get:function(){return this.uniformResourceIdentifier},set:function(e){this.uniformResourceIdentifier=e,this.dictionary.items.setValue(this.dictionaryProperties.uri,new mC(this.uniformResourceIdentifier))},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.dictionary.items.setValue(this.dictionaryProperties.s,new Uw(this.dictionaryProperties.uri))},t}(kk),Ek=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rk=function(e){function t(t,i){var n=e.call(this,t)||this;return void 0!==i&&(n.uri=i),n}return Ek(t,e),Object.defineProperty(t.prototype,"uriAction",{get:function(){return void 0===this.pdfUriAction&&(this.pdfUriAction=new Dk),this.pdfUriAction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uri",{get:function(){return this.uriAction.uri},set:function(e){this.uriAction.uri!==e&&(this.uriAction.uri=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"action",{get:function(){return this.getSetAction()},set:function(e){this.getSetAction(e),this.uriAction.next=e},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.dictionary.items.setValue(this.dictionaryProperties.subtype,new Uw(this.dictionaryProperties.link));this.uriAction.element;this.dictionary.items.setValue(this.dictionaryProperties.a,this.uriAction.element)},t}(xk),Pk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ik=function(e){function t(){var t=e.call(this)||this;t.uniformResourceLocator="",t.uriAnnotation=null,t.recalculateBounds=!1,t.defaultBorder=new nC;for(var i=0;i<3;i++)t.defaultBorder.add(new iC(0));return t}return Pk(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this.uniformResourceLocator},set:function(e){if(0===e.length)throw new Error("ArgumentException : Url - string can not be empty");this.uniformResourceLocator=e},enumerable:!0,configurable:!0}),t.prototype.draw=function(e,t){if(e instanceof Nx){var i=new yS,n=this.font.style;if(t instanceof PC){if(this.recalculateBounds=!0,this.font.style=KC.Underline,1===(a=i.layout(this.value,this.font,this.stringFormat,new IC(e.graphics.clientSize.width-t.x,0),!0,e.graphics.clientSize)).lines.length){var r=this.font.measureString(this.value),o=new MC(t,r);o=this.calculateBounds(o,r.width,e.graphics.clientSize.width,t.x),this.uriAnnotation=new Rk(o,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),e.annotations.add(this.uriAnnotation);var s=this.drawText(e,t);return this.font.style=n,s}s=this.drawMultipleLineWithPoint(a,e,t);return this.font.style=n,s}var a=i.layout(this.value,this.font,this.stringFormat,new IC(t.width,0),!1,new IC(0,0));if(this.font.style=KC.Underline,1===a.lines.length){r=this.font.measureString(this.value),o=new MC(new PC(t.x,t.y),r);o=this.calculateBounds(o,r.width,t.width,t.x),this.uriAnnotation=new Rk(o,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),e.annotations.add(this.uriAnnotation);var l=this.drawText(e,t);return this.font.style=n,l}l=this.drawMultipleLineWithBounds(a,e,t);return this.font.style=n,l}var h=new Nx;return h=e.page,this.draw(h,t)},t.prototype.drawMultipleLineWithPoint=function(e,t,i){for(var n,r=0;r<e.layoutLines.length;r++){var o=this.font.measureString(e.lines[r].text),s=new MC(i,o);if(0!==r&&(s.x=0),this.text=e.lines[r].text,s.y+o.height>t.graphics.clientSize.height){if(0===r)break;t=t.graphics.getNextPage(),s=new MC(0,0,t.graphics.clientSize.width,o.height),i.y=0}s=this.calculateBounds(s,o.width,t.graphics.clientSize.width,s.x),this.uriAnnotation=new Rk(s,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),t.annotations.add(this.uriAnnotation),n=0!==r?this.drawText(t,new PC(0,s.y)):this.drawText(t,s.x,s.y),i.y+=o.height}return n},t.prototype.drawMultipleLineWithBounds=function(e,t,i){for(var n,r=0;r<e.layoutLines.length;r++){var o=this.font.measureString(e.lines[r].text),s=new MC(new PC(i.x,i.y),o);if(s=this.calculateBounds(s,o.width,i.width,i.x),this.text=e.lines[r].text,i.y+o.height>t.graphics.clientSize.height){if(0===r)break;t=t.graphics.getNextPage(),i=new MC(i.x,0,i.width,o.height),s.y=0}this.uriAnnotation=new Rk(s,this.url),this.uriAnnotation.dictionary.items.setValue("Border",this.defaultBorder),t.annotations.add(this.uriAnnotation),n=this.drawText(t,i),i.y+=o.height}return n},t.prototype.calculateBounds=function(e,t,i,n){return null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===FC.Center?(e.x=n+(i-t)/2,e.width=t):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===FC.Right?(e.x=n+(i-t),e.width=t):null!=this.stringFormat&&void 0!==this.stringFormat&&this.stringFormat.alignment===FC.Justify?(e.x=n,e.width=i):(e.width=n,e.width=t),e},t}(vk),Mk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lk=function(e){function t(t){var i=e.call(this,t)||this;return i.gridInitialWidth=0,i.gridSize=new IC(0,0),i.parentCellIndex=0,i.tempWidth=0,i.childheight=0,i.isChildGrid=!1,i.hasRowSpanSpan=!1,i.isRearranged=!1,i.pageBounds=new MC,i.listOfNavigatePages=[],i.flag=!0,i.columnRanges=[],i.currentLocation=new PC(0,0),i.breakRow=!0,i.isOverloadWithPosition=!1,i}return Mk(t,e),Object.defineProperty(t.prototype,"Grid",{get:function(){return this.elements},enumerable:!0,configurable:!0}),t.prototype.getFormat=function(e){return e},t.prototype.layoutInternal=function(e){var t=this.getFormat(e.format);if(this.gridLayoutFormat=this.getFormat(e.format),this.currentPage=e.page,null===this.currentPage)throw Error("Can not set page as null");this.currentPage.getClientSize().height,this.currentPage.getClientSize().width;this.currentPageBounds=this.currentPage.getClientSize(),this.currentGraphics=this.currentPage.graphics;var i;if(i=this.currentGraphics.page.section.indexOf(this.currentGraphics.page),this.listOfNavigatePages.push(i),null!=t&&t.break===CS.FitColumnsToPage?this.currentBounds=new MC(new PC(e.bounds.x,e.bounds.y),new IC(this.Grid.columns.width,this.currentGraphics.clientSize.height)):this.currentBounds=new MC(new PC(e.bounds.x,e.bounds.y),this.currentGraphics.clientSize),0!==this.Grid.rows.count)this.currentBounds.width=e.bounds.width>0?e.bounds.width:this.currentBounds.width-this.Grid.rows.getRow(0).cells.getCell(0).style.borders.left.width/2;else{if(0===this.Grid.headers.count)throw Error("Please add row or header into grid");this.currentBounds.width=e.bounds.width}if(this.startLocation=new PC(e.bounds.x,e.bounds.y),e.bounds.height>0&&!this.Grid.isChildGrid&&(this.currentBounds.height=e.bounds.height),this.Grid.isChildGrid||(this.hType=this.Grid.style.horizontalOverflowType),this.Grid.style.allowHorizontalOverflow?(this.Grid.measureColumnsWidth(),this.determineColumnDrawRanges()):(this.columnRanges=[],this.Grid.measureColumnsWidth(this.currentBounds),this.columnRanges.push([0,this.Grid.columns.count-1])),this.Grid.hasRowSpanSpan)for(var n=0;n<this.Grid.rows.count;n++)-1===this.Grid.rows.getRow(n).height||this.Grid.rows.getRow(n).isRowHeightSet||(this.Grid.rows.getRow(n).isRowHeightSet=!0);return this.layoutOnPage(e)},t.prototype.determineColumnDrawRanges=function(){for(var e=0,t=0,i=0,n=this.currentGraphics.clientSize.width-this.currentBounds.x,r=0;r<this.Grid.columns.count;r++)if((i+=this.Grid.columns.getColumn(r).width)>=n){for(var o=0,s=e;s<=r&&!((o+=this.Grid.columns.getColumn(s).width)>n);s++)t=s;this.columnRanges.push([e,t]),i=(t=e=t+1)<=r?this.Grid.columns.getColumn(r).width:0}this.columnRanges.push([e,this.Grid.columns.count-1])},t.prototype.layoutOnPage=function(e){this.pageBounds.x=e.bounds.x,this.pageBounds.y=e.bounds.y,this.pageBounds.height=e.bounds.height;for(var i,n=this.getFormat(e.format),r=new ES,o=e.page,s=[],a=0;a<this.columnRanges.length;a++){var l=this.columnRanges[a];this.cellStartIndex=l[0],this.cellEndIndex=l[1];var h=this.raiseBeforePageLayout(this.currentPage,this.currentBounds,this.currentRowIndex);this.currentBounds=h.currentBounds,this.currentRowIndex=h.currentRowIndex;for(var p=0;p<this.Grid.headers.count;p++){var d=this.Grid.headers.getHeader(p);this.currentBounds.y,this.drawRow(d);!1}var c=0,u=(this.Grid.rows.count,void 0),g=!0;s=[];for(var f=0;f<this.Grid.rows.count;f++){d=this.Grid.rows.getRow(f);c++,this.currentRowIndex=c-1;var m=this.currentBounds.y;o=this.currentPage,t.repeatRowIndex=-1,g&&d.grid.isChildGrid&&(m,g=!1);var y=null;if(-1==this.Grid.splitChildRowIndex)y=this.drawRow(d),d.isrowFinish=!0;else{if(!(d.grid.ParentCell.row.grid.isGridSplit&&this.Grid.splitChildRowIndex<=d.rowIndex)){if(d.isrowFinish)continue;break}y=this.drawRow(d),d.isrowFinish=!0}for(s.push(y.bounds.width),m===this.currentBounds.y?(u=!0,t.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(d)):(u=!1,t.repeatRowIndex=-1);!y.isFinish&&null!=o;){var v=this.getLayoutResult();if(this.raisePageLayouted(v).cancel||u)break;if(this.Grid.allowRowBreakAcrossPages){this.currentPage=this.getNextPageformat(n),m=this.currentBounds.y;var b=new PC($x.default.right.width/2,$x.default.top.width/2);if(0===n.paginateBounds.x&&0===n.paginateBounds.y&&0===n.paginateBounds.width&&0===n.paginateBounds.height&&this.startLocation.x===b.x&&this.startLocation.y===b.y&&(this.currentBounds.x+=this.startLocation.x,this.currentBounds.y+=this.startLocation.y),this.Grid.isChildGrid&&null!=d.grid.ParentCell&&null!=this.Grid.ParentCell.row.grid.style.cellPadding&&d.rowBreakHeight+this.Grid.ParentCell.row.grid.style.cellPadding.top<this.currentBounds.height&&(this.currentBounds.y=this.Grid.ParentCell.row.grid.style.cellPadding.top),null!=d.grid.ParentCell){d.grid.ParentCell.row.isRowBreaksNextPage=!0,d.grid.ParentCell.row.rowBreakHeightValue=d.rowBreakHeight+this.Grid.ParentCell.row.grid.style.cellPadding.top+this.Grid.ParentCell.row.grid.style.cellPadding.bottom;for(var w=d.rowIndex+1;w<d.grid.rows.count;w++)d.grid.ParentCell.row.rowBreakHeightValue+=d.grid.rows.getRow(w).height}if(d.grid.isChildGrid){d.isrowFinish=!1,d.grid.splitChildRowIndex=d.rowIndex,d.grid.ParentCell.row.grid.splitChildRowIndex=d.grid.ParentCell.row.rowIndex,d.grid.ParentCell.row.grid.isGridSplit&&(d.grid.ParentCell.row.noOfPageCount+=1,d.grid.ParentCell.row.grid.isGridSplit=!1);break}if(d.noOfPageCount<1){if(-1!=d.grid.splitChildRowIndex&&(d.grid.isGridSplit=!0),null!=d.style.border&&(null!=d.style.border.left&&1!==d.style.border.left.width||null!=d.style.border.top&&1!==d.style.border.top.width)){var C=d.style.border.left.width/2,S=d.style.border.top.width/2;if(this.currentBounds.x===$x.default.right.width/2&&this.currentBounds.y===$x.default.right.width/2){var x=new MC(C,S,this.currentBounds.width,this.currentBounds.height);this.currentBounds=x}}if(this.Grid.repeatHeader)for(var k=0;k<this.Grid.headers.count;k++){var T=this.Grid.headers.getHeader(k);this.drawRow(T)}if(y=this.drawRow(d),d.noOfPageCount>=1){d.rowBreakHeightValue;for(var D=0;D<d.noOfPageCount;D++){var E=this.getLayoutResult();if(this.raisePageLayouted(E),this.currentPage=this.getNextPageformat(n),m=this.currentBounds.y,-1!=d.grid.splitChildRowIndex&&(d.grid.isGridSplit=!0),this.currentBounds.y=.5,this.Grid.repeatHeader)for(var R=0;R<this.Grid.headers.count;R++){var P=this.Grid.headers.getHeader(R);this.drawRow(P)}this.drawRow(d)}}d.grid.splitChildRowIndex=-1,d.grid.isGridSplit=!1,y.isFinish=!0;for(var I=0;I<d.cells.count;I++)d.cells.getCell(I).value instanceof Zk&&(d.cells.getCell(I).value.splitChildRowIndex=-1)}}}if(!y.isFinish&&null!==o&&n.layout!==wS.OnePage&&u){this.startLocation.x=this.currentBounds.x;if(this.currentPage=this.getNextPageformat(n),null!==e.format&&!e.format.usePaginateBounds&&null!==e.bounds&&e.bounds.height>0&&!this.Grid.isChildGrid&&(this.currentBounds.height=e.bounds.height),null!==e.format&&!e.format.usePaginateBounds&&null!==e.bounds&&e.bounds.y>0&&!this.Grid.isChildGrid&&(this.currentBounds.y=e.bounds.y),this.startLocation.y=this.currentBounds.y,n.paginateBounds.x===n.paginateBounds.y&&n.paginateBounds.y===n.paginateBounds.height&&n.paginateBounds.height===n.paginateBounds.width&&0===n.paginateBounds.width&&(this.currentBounds.x+=this.startLocation.x),this.currentBounds.x===$x.default.left.width/2&&(this.currentBounds.y+=this.startLocation.x),this.Grid.repeatHeader)for(var M=0;M<this.Grid.headers.count;M++){P=this.Grid.headers.getHeader(M);this.drawRow(P)}this.drawRow(d),null===this.currentPage||r.containsKey(this.currentPage)||r.add(this.currentPage,l)}if(null!=d.NestedGridLayoutResult){this.currentPage=d.NestedGridLayoutResult.page,this.currentGraphics=this.currentPage.graphics,this.startLocation=new PC(d.NestedGridLayoutResult.bounds.x,d.NestedGridLayoutResult.bounds.y);var L=this.ReCalculateHeight(d,d.NestedGridLayoutResult.bounds.height);if(this.currentBounds.y=L,o!=this.currentPage){for(var O=this.currentPage.section,A=O.indexOf(o)+1,B=O.indexOf(this.currentPage),F=A;F<B+1;F++){var N=this.currentPage.graphics,H=new PC(n.paginateBounds.x,n.paginateBounds.y),V=F==B?d.NestedGridLayoutResult.bounds.height-e.bounds.y:this.currentBounds.height-H.y;V<=N.clientSize.height&&(V+=e.bounds.y),H.y=null==n?.5:n.paginateBounds.y;for(var j=0;j<d.cells.count;j++){var z,q=d.cells.getCell(j),W=0;if(q.value instanceof Zk)for(var _=0;_<q.value.columns.count;_++)W+=q.value.columns.getColumn(_).columnWidth;else W=q.width;z=Math.max(W,d.grid.columns.getColumn(j).width),q.drawCellBorders(N,new MC(H,new IC(z,V))),H.x+=z,j+=q.columnSpan-1}}o=this.currentPage}}}var G=!1,U=0;s.length>0&&(U=s[0]);var K=[[1,2]];for(j=0;j<this.Grid.rows.count;j++)if(-1!=this.cellEndIndex&&this.Grid.rows.getRow(j).cells.getCell(this.cellEndIndex).value instanceof Zk){var Y=this.Grid.rows.getRow(j).cells.getCell(this.cellEndIndex).value;this.rowLayoutBoundsWidth=Y.rowLayoutBoundsWidth,G=!0}if(!G&&s.length>0){for(j=0;j<c-1;j++)U<s[j]&&(U=s[j]);this.rowLayoutBoundsWidth=U}else this.rowLayoutBoundsWidth=K[0][1];if(this.columnRanges.indexOf(l)<this.columnRanges.length-1&&null!=o&&n.layout!=wS.OnePage)if(this.Grid.isChildGrid,0!=K[0][0]){this.currentPage.section.indexOf(this.currentPage);this.currentGraphics=this.currentPage.graphics,this.currentBounds=new MC(new PC(0,0),this.currentPage.getClientSize());this.currentGraphics.page.section.indexOf(this.currentGraphics.page)}else this.currentPage=this.getNextPageformat(n);this.columnRanges.length-1!==a&&this.columnRanges.length>1&&n.layout!==wS.OnePage&&(this.currentPage=this.getNextPageformat(n),n.paginateBounds.x===n.paginateBounds.y&&n.paginateBounds.y===n.paginateBounds.height&&n.paginateBounds.height===n.paginateBounds.width&&0===n.paginateBounds.width&&(this.currentBounds.x+=this.startLocation.x,this.currentBounds.y+=this.startLocation.y))}return i=this.getLayoutResult(),this.Grid.style.allowHorizontalOverflow&&this.Grid.style.horizontalOverflowType==tk.NextPage&&this.reArrangePages(r),this.raisePageLayouted(i),i},t.prototype.getNextPageformat=function(e){var t=this.currentPage.section,i=null,n=t.indexOf(this.currentPage);this.flag=!1,i=n===t.count-1?t.add():t.getPages()[n+1],this.currentGraphics=i.graphics;var r=this.currentGraphics.page.section.indexOf(this.currentGraphics.page);return-1===this.listOfNavigatePages.indexOf(r)&&this.listOfNavigatePages.push(r),this.currentBounds=new MC(new PC(0,0),i.getClientSize()),i},t.prototype.CheckIfDefaultFormat=function(e){var t=new fS;return e.alignment===t.alignment&&e.characterSpacing===t.characterSpacing&&e.clipPath===t.clipPath&&e.firstLineIndent===t.firstLineIndent&&e.horizontalScalingFactor===t.horizontalScalingFactor&&e.lineAlignment===t.lineAlignment&&e.lineLimit===t.lineLimit&&e.lineSpacing===t.lineSpacing&&e.measureTrailingSpaces===t.measureTrailingSpaces&&e.noClip===t.noClip&&e.paragraphIndent===t.paragraphIndent&&e.rightToLeft===t.rightToLeft&&e.subSuperScript===t.subSuperScript&&e.wordSpacing===t.wordSpacing&&e.wordWrap===t.wordWrap},t.prototype.RaiseBeforeCellDraw=function(e,t,i,n,r,o){var s=null;return this.Grid.raiseBeginCellDraw&&(s=new Fk(e,t,i,n,r,o),this.Grid.onBeginCellDraw(s),o=s.style),o},t.prototype.raiseAfterCellDraw=function(e,t,i,n,r,o){var s=null;this.Grid.raiseEndCellDraw&&(s=new Nk(e,t,i,n,r,o),this.Grid.onEndCellDraw(s))},t.prototype.reArrangePages=function(e){for(var t=this.currentPage.document,i=[],n=e.keys(),r=(e.values(),0);r<n.length;r++){(a=n[r]).section=null,i.push(a),t.pages.remove(a)}for(r=0;r<e.size();r++)for(var o=r,s=e.size()/this.columnRanges.length;o<e.size();o+=s){var a=i[o];-1===t.pages.indexOf(a)&&t.pages.add(a)}},t.prototype.getLayoutResult=function(){if(this.Grid.isChildGrid&&this.Grid.allowRowBreakAcrossPages)for(var e=0;e<this.Grid.rows.count;e++){var t=this.Grid.rows.getRow(e);t.rowBreakHeight>0&&t.repeatFlag&&(this.startLocation.y=this.currentPage.origin.y)}var i;return this.isChanged||(i=new MC(this.startLocation,new IC(this.currentBounds.width,this.currentBounds.y-this.startLocation.y))),new Ok(this.currentPage,i)},t.prototype.ReCalculateHeight=function(e,t){for(var i=0,n=this.cellStartIndex;n<=this.cellEndIndex;n++)null!==e.cells.getCell(n).remainingString&&""!==e.cells.getCell(n).remainingString&&void 0!==e.cells.getCell(n).remainingString&&(i=Math.max(i,e.cells.getCell(n).measureHeight()));return Math.max(t,i)},t.prototype.raiseBeforePageLayout=function(e,t,i){var n=!1;if(this.Grid.raiseBeginPageLayout){var r=new zk(t,e,i);this.Grid.onBeginPageLayout(r),n=r.cancel,t=r.bounds,i=r.startRowIndex}return{returnValue:n,currentBounds:t,currentRowIndex:i}},t.prototype.raisePageLayouted=function(e){var t=new qk(e);return this.Grid.raiseEndPageLayout&&this.Grid.onEndPageLayout(t),t},t.prototype.drawRow=function(e,i,n){if(void 0===i){var r=new Wk,o=0,s=(new PC(0,0),new IC(0,0)),a=!1;if(e.rowSpanExists){var l=0,h=this.Grid.rows.rowCollection.indexOf(e);-1===h&&-1!==(h=this.Grid.headers.indexOf(e))&&(a=!0);for(var p=0;p<e.cells.count;p++){var d=e.cells.getCell(p);l=Math.max(l,d.rowSpan)}for(p=h;p<h+l;p++)o+=a?this.Grid.headers.getHeader(p).height:this.Grid.rows.getRow(p).height}var c=e.rowBreakHeight>0?e.rowBreakHeight:e.height;return this.Grid.isChildGrid&&null!=this.Grid.ParentCell?this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+c>this.currentPageBounds.height||this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+c>this.currentBounds.height||this.currentBounds.y+this.Grid.ParentCell.row.grid.style.cellPadding.bottom+o>this.currentPageBounds.height?(this.Grid.ParentCell.row.grid.LayoutFormat.break===CS.FitPage&&(t.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(e),this.Grid.splitChildRowIndex=this.Grid.rows.rowCollection.indexOf(e)),t.repeatRowIndex>-1&&t.repeatRowIndex===e.rowIndex&&this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,r.bounds=this.currentBounds,this.drawRowWithBreak(r,e,c),e.repeatFlag=!0,e.repeatRowNumber=t.repeatRowIndex)):(r.isFinish=!0,e.grid.ParentCell.row.rowBreakHeightValue>0?e.repeatFlag=!0:(e.repeatFlag=!1,c=e.height),this.Grid.isChildGrid&&e.rowBreakHeight>0&&null!=this.Grid.ParentCell.row.grid.style.cellPadding&&(c+=this.Grid.ParentCell.row.grid.style.cellPadding.bottom),this.drawRow(e,r,c)):c>this.currentPageBounds.height?this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,this.drawRowWithBreak(r,e,c),e.isrowFinish=!0,e.repeatFlag=!0,-1!==e.grid.splitChildRowIndex&&(r.isFinish=!1)):this.currentBounds.y+c>this.currentPageBounds.height||this.currentBounds.y+c>this.currentBounds.height+this.startLocation.y||this.currentBounds.y+o>this.currentPageBounds.height?(this.Grid.LayoutFormat.break===CS.FitPage&&(t.repeatRowIndex=this.Grid.rows.rowCollection.indexOf(e)),t.repeatRowIndex>-1&&t.repeatRowIndex===e.rowIndex?this.Grid.allowRowBreakAcrossPages&&(r.isFinish=!0,this.drawRowWithBreak(r,e,c),e.repeatFlag=!0,e.repeatRowNumber=t.repeatRowIndex,-1!==e.grid.splitChildRowIndex&&(r.isFinish=!1)):r.isFinish=!1):(r.isFinish=!0,this.drawRow(e,r,c),e.repeatFlag=!1),r}var u=new PC(this.currentBounds.x,this.currentBounds.y);i.bounds=new MC(u,new IC(0,0)),n=this.ReCalculateHeight(e,n);for(p=this.cellStartIndex;p<=this.cellEndIndex;p++){var g=p>this.cellEndIndex+1&&e.cells.getCell(p).columnSpan>1;if(!g)for(var f=1;f<e.cells.getCell(p).columnSpan;f++)e.cells.getCell(p+f).isCellMergeContinue=!0;s=new IC(this.Grid.columns.getColumn(p).width,n);!this.CheckIfDefaultFormat(this.Grid.columns.getColumn(p).format)&&this.CheckIfDefaultFormat(e.cells.getCell(p).stringFormat)&&(e.cells.getCell(p).stringFormat=this.Grid.columns.getColumn(p).format);var m=e.cells.getCell(p).style,y="string"==typeof e.cells.getCell(p).value&&null!==e.cells.getCell(p).value?e.cells.getCell(p).value:"";e.cells.getCell(p).style=this.RaiseBeforeCellDraw(this.currentGraphics,this.currentRowIndex,p,new MC(u,s),y,m),e.cells.getCell(p).value instanceof Zk&&((b=e.cells.getCell(p).value).parentCellIndex=p);var v=e.cells.getCell(p).draw(this.currentGraphics,new MC(u,s),g);if(e.grid.style.allowHorizontalOverflow&&(e.cells.getCell(p).columnSpan>this.cellEndIndex||p+e.cells.getCell(p).columnSpan>this.cellEndIndex+1)&&this.cellEndIndex<e.cells.count-1&&(e.rowOverflowIndex=this.cellEndIndex),e.grid.style.allowHorizontalOverflow&&e.rowOverflowIndex>0&&(e.cells.getCell(p).columnSpan>this.cellEndIndex||p+e.cells.getCell(p).columnSpan>this.cellEndIndex+1)&&e.cells.getCell(p).columnSpan-this.cellEndIndex+p-1>0&&(e.cells.getCell(e.rowOverflowIndex+1).value=null!==v&&void 0!==v.remainder?v.remainder:"",e.cells.getCell(e.rowOverflowIndex+1).stringFormat=e.cells.getCell(p).stringFormat,e.cells.getCell(e.rowOverflowIndex+1).style=e.cells.getCell(p).style,e.cells.getCell(e.rowOverflowIndex+1).columnSpan=e.cells.getCell(p).columnSpan-this.cellEndIndex+p-1),y="string"==typeof e.cells.getCell(p).value&&null!==e.cells.getCell(p).value?e.cells.getCell(p).value:"",g||this.raiseAfterCellDraw(this.currentGraphics,this.currentRowIndex,p,new MC(u,s),y,e.cells.getCell(p).style),e.cells.getCell(p).value instanceof Zk){var b=e.cells.getCell(p).value;this.Grid.columns.getColumn(p).width>=this.currentGraphics.clientSize.width?(u.x=b.rowLayoutBoundsWidth,u.x+=b.style.cellSpacing):u.x+=this.Grid.columns.getColumn(p).width}else u.x+=this.Grid.columns.getColumn(p).width}e.rowMergeComplete&&!e.isRowHeightSet||(this.currentBounds.y+=n),i.bounds=new MC(new PC(i.bounds.x,i.bounds.y),new IC(u.x,u.y))},t.prototype.drawRowWithBreak=function(e,t,i){var n=new PC(this.currentBounds.x,this.currentBounds.y);t.grid.isChildGrid&&t.grid.allowRowBreakAcrossPages&&this.startLocation.x!==this.currentBounds.x&&(n.x=this.startLocation.x),e.bounds=new MC(n,new IC(0,0)),this.gridHeight=t.rowBreakHeight>0?this.currentPageBounds.height:0,t.grid.style.cellPadding.top+this.currentBounds.y+t.grid.style.cellPadding.bottom<this.currentPageBounds.height&&(t.rowBreakHeight=this.currentBounds.y+i-this.currentPageBounds.height);for(var r=0;r<t.cells.count;r++){var o=t.cells.getCell(r);o.measureHeight()===i&&o.value instanceof Zk&&(t.rowBreakHeight=0)}for(r=this.cellStartIndex;r<=this.cellEndIndex;r++){var s=t.cells.getCell(r).columnSpan+r>this.cellEndIndex+1&&t.cells.getCell(r).columnSpan>1,a=new IC(this.Grid.columns.getColumn(r).width,this.gridHeight>0?this.gridHeight:this.currentPageBounds.height),l=t.cells.getCell(r).style;t.cells.getCell(r).style=l;var h=null;if(h=t.cells.getCell(r).draw(this.currentGraphics,new MC(n,a),s),t.rowBreakHeight>0&&null!=h&&(t.cells.getCell(r).FinishedDrawingCell=!1,t.cells.getCell(r).remainingString=null==h.remainder?" ":h.remainder,t.grid.isChildGrid&&(t.rowBreakHeight=i-h.actualSize.height)),e.isFinish=e.isFinish?t.cells.getCell(r).FinishedDrawingCell:e.isFinish,t.cells.getCell(r).value instanceof Zk){var p=t.cells.getCell(r).value;this.rowBreakPageHeightCellIndex=r,this.Grid.columns.getColumn(r).width>=this.currentGraphics.clientSize.width?(n.x=this.rowLayoutBoundsWidth,n.x+=p.style.cellSpacing):n.x+=this.Grid.columns.getColumn(r).width}else n.x+=this.Grid.columns.getColumn(r).width}this.currentBounds.y+=this.gridHeight>0?this.gridHeight:i,e.bounds=new MC(new PC(e.bounds.x,e.bounds.y),new IC(n.x,n.y))},t.repeatRowIndex=-1,t}(lk),Ok=function(e){function t(t,i){return e.call(this,t,i)||this}return Mk(t,e),t}(dk),Ak=function(e){function t(t){return e.call(this,t)||this}return Mk(t,e),t}(hk),Bk=function(){function e(e,t,i,n,r){this.gridRowIndex=t,this.gridCellIndex=i,this.internalValue=r,this.gridBounds=n,this.pdfGraphics=e}return Object.defineProperty(e.prototype,"rowIndex",{get:function(){return this.gridRowIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellIndex",{get:function(){return this.gridCellIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.internalValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.gridBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){return this.pdfGraphics},enumerable:!0,configurable:!0}),e}(),Fk=function(e){function t(t,i,n,r,o,s){var a=e.call(this,t,i,n,r,o)||this;return a.style=s,a}return Mk(t,e),Object.defineProperty(t.prototype,"skip",{get:function(){return this.bSkip},set:function(e){this.bSkip=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.cellStyle},set:function(e){this.cellStyle=e},enumerable:!0,configurable:!0}),t}(Bk),Nk=function(e){function t(t,i,n,r,o,s){var a=e.call(this,t,i,n,r,o)||this;return a.cellStyle=s,a}return Mk(t,e),Object.defineProperty(t.prototype,"style",{get:function(){return this.cellStyle},enumerable:!0,configurable:!0}),t}(Bk),Hk=function(){function e(){}return Object.defineProperty(e.prototype,"cancel",{get:function(){return this.isCancel},set:function(e){this.isCancel=e},enumerable:!0,configurable:!0}),e}(),Vk=function(e){function t(t,i){var n=e.call(this)||this;return n.bounds=t,n.pdfPage=i,n}return Mk(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.cellBounds},set:function(e){this.cellBounds=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.pdfPage},enumerable:!0,configurable:!0}),t}(Hk),jk=function(e){function t(t){var i=e.call(this)||this;return i.layoutResult=t,i}return Mk(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.layoutResult},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextPage",{get:function(){return this.nextPdfPage},set:function(e){this.nextPdfPage=e},enumerable:!0,configurable:!0}),t}(Hk),zk=function(e){function t(t,i,n){var r=e.call(this,t,i)||this;return r.startRow=n,r}return Mk(t,e),Object.defineProperty(t.prototype,"startRowIndex",{get:function(){return this.startRow},enumerable:!0,configurable:!0}),t}(Vk),qk=function(e){function t(t){return e.call(this,t)||this}return Mk(t,e),t}(jk),Wk=function(){function e(){this.layoutedBounds=new MC(0,0,0,0)}return Object.defineProperty(e.prototype,"isFinish",{get:function(){return this.bIsFinished},set:function(e){this.bIsFinished=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.layoutedBounds},set:function(e){this.layoutedBounds=e},enumerable:!0,configurable:!0}),e}(),_k=function(){function e(e){this.cellWidth=0,this.cellHeight=0,this.tempval=0,this.fontSpilt=!1,this.finsh=!0,this.rowSpanRemainingHeight=0,this.hasRowSpan=!1,this.hasColSpan=!1,this.isFinish=!0,this.present=!1,this.gridRowSpan=1,this.colSpan=1,void 0!==e&&(this.gridRow=e)}return Object.defineProperty(e.prototype,"isCellMergeContinue",{get:function(){return this.internalIsCellMergeContinue},set:function(e){this.internalIsCellMergeContinue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRowMergeContinue",{get:function(){return this.internalIsRowMergeContinue},set:function(e){this.internalIsRowMergeContinue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCellMergeStart",{get:function(){return this.internalIsCellMergeStart},set:function(e){this.internalIsCellMergeStart=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRowMergeStart",{get:function(){return this.internalIsRowMergeStart},set:function(e){this.internalIsRowMergeStart=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remainingString",{get:function(){return this.remaining},set:function(e){this.remaining=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FinishedDrawingCell",{get:function(){return this.isFinish},set:function(e){this.isFinish=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stringFormat",{get:function(){return null==this.format&&(this.format=new fS),this.format},set:function(e){this.format=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this.gridRow},set:function(e){this.gridRow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.objectValue},set:function(e){if(this.objectValue=e,this.objectValue instanceof Zk){this.row.grid.isSingleGrid=!1,this.objectValue.ParentCell=this,this.objectValue.isChildGrid=!0;for(var t=this.row.grid.rows.count,i=0;i<t;i++)for(var n=this.row.grid.rows.getRow(i),r=n.cells.count,o=0;o<r;o++){n.cells.getCell(o).parent=this}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowSpan",{get:function(){return this.gridRowSpan},set:function(e){if(e<1)throw new Error("ArgumentException : Invalid span specified, must be greater than or equal to 1");this.gridRowSpan=e,this.row.rowSpanExists=!0,this.row.grid.hasRowSpanSpan=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return null==this.cellStyle&&(this.cellStyle=new ok),this.cellStyle},set:function(e){this.cellStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 0===this.cellHeight&&(this.cellHeight=this.measureHeight()),this.cellHeight},set:function(e){this.cellHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnSpan",{get:function(){return this.colSpan},set:function(e){if(e<1)throw Error("Invalid span specified, must be greater than or equal to 1");this.colSpan=e,this.row.columnSpanExists=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return(0===this.cellWidth||this.row.grid.isComplete)&&(this.cellWidth=this.measureWidth()),Math.round(this.cellWidth)},set:function(e){this.cellWidth=e},enumerable:!0,configurable:!0}),e.prototype.measureWidth=function(){var e=0,t=new yS;if("string"==typeof this.objectValue)e+=t.layout(this.objectValue,this.getTextFont(),this.stringFormat,new IC(Number.MAX_VALUE,Number.MAX_VALUE),!1,new IC(0,0)).actualSize.width,e+=2*(this.style.borders.left.width+this.style.borders.right.width);else if(this.objectValue instanceof Zk)e=this.objectValue.size.width;else if(this.objectValue instanceof vx||this.objectValue instanceof wx)e+=this.objectValue.width;else if(this.objectValue instanceof Ik){var i=this.objectValue;e+=t.layout(i.text,i.font,i.stringFormat,new IC(0,0),!1,new IC(0,0)).actualSize.width,e+=2*(this.style.borders.left.width+this.style.borders.right.width)}return this.objectValue instanceof Zk?null!=this.style.cellPadding||void 0!==this.style.cellPadding?(void 0!==this.style.cellPadding.left&&this.style.cellPadding.hasLeftPad&&(e+=this.style.cellPadding.left),void 0!==this.style.cellPadding.right&&this.style.cellPadding.hasRightPad&&(e+=this.style.cellPadding.right)):(void 0!==this.row.grid.style.cellPadding.left&&this.row.grid.style.cellPadding.hasLeftPad&&(e+=this.row.grid.style.cellPadding.left),void 0!==this.row.grid.style.cellPadding.right&&this.row.grid.style.cellPadding.hasRightPad&&(e+=this.row.grid.style.cellPadding.right)):null!=this.style.cellPadding?e+=this.style.cellPadding.left+this.style.cellPadding.right:e+=this.row.grid.style.cellPadding.left+this.row.grid.style.cellPadding.right,e+=this.row.grid.style.cellSpacing},e.prototype.drawCellBackground=function(e,t){var i=this.getBackgroundBrush();if(null!=i&&(e.save(),e.drawRectangle(i,t.x,t.y,t.width,t.height),e.restore()),null!=this.style.backgroundImage){this.getBackgroundImage();e.drawImage(this.style.backgroundImage,t.x,t.y,t.width,t.height)}},e.prototype.adjustContentLayoutArea=function(e){var t=new MC(e.x,e.y,e.width,e.height);return this.objectValue instanceof Zk?(null==this.style.cellPadding||void 0===this.style.cellPadding?(void 0!==this.gridRow.grid.style.cellPadding.left&&this.gridRow.grid.style.cellPadding.hasLeftPad&&(t.x+=this.gridRow.grid.style.cellPadding.left+this.cellStyle.borders.left.width,t.width-=this.gridRow.grid.style.cellPadding.left),void 0!==this.gridRow.grid.style.cellPadding.top&&this.gridRow.grid.style.cellPadding.hasTopPad&&(t.y+=this.gridRow.grid.style.cellPadding.top+this.cellStyle.borders.top.width,t.height-=this.gridRow.grid.style.cellPadding.top),void 0!==this.gridRow.grid.style.cellPadding.right&&this.gridRow.grid.style.cellPadding.hasRightPad&&(t.width-=this.gridRow.grid.style.cellPadding.right),void 0!==this.gridRow.grid.style.cellPadding.bottom&&this.gridRow.grid.style.cellPadding.hasBottomPad&&(t.height-=this.gridRow.grid.style.cellPadding.bottom)):(void 0!==this.style.cellPadding.left&&this.style.cellPadding.hasLeftPad&&(t.x+=this.style.cellPadding.left+this.cellStyle.borders.left.width,t.width-=this.style.cellPadding.left),void 0!==this.style.cellPadding.top&&this.style.cellPadding.hasTopPad&&(t.y+=this.style.cellPadding.top+this.cellStyle.borders.top.width,t.height-=this.style.cellPadding.top),void 0!==this.style.cellPadding.right&&this.style.cellPadding.hasRightPad&&(t.width-=this.style.cellPadding.right),void 0!==this.style.cellPadding.bottom&&this.style.cellPadding.hasBottomPad&&(t.height-=this.style.cellPadding.bottom)),t.width-=this.cellStyle.borders.left.width+this.cellStyle.borders.right.width,t.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width):void 0===this.style.cellPadding||null==this.style.cellPadding?(t.x+=this.gridRow.grid.style.cellPadding.left+this.cellStyle.borders.left.width,t.y+=this.gridRow.grid.style.cellPadding.top+this.cellStyle.borders.top.width,t.width-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left,t.height-=this.gridRow.grid.style.cellPadding.bottom+this.gridRow.grid.style.cellPadding.top,t.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width):(t.x+=this.style.cellPadding.left+this.cellStyle.borders.left.width,t.y+=this.style.cellPadding.top+this.cellStyle.borders.top.width,t.width-=this.style.cellPadding.right+this.style.cellPadding.left,t.width-=this.cellStyle.borders.left.width+this.cellStyle.borders.right.width,t.height-=this.style.cellPadding.bottom+this.style.cellPadding.top,t.height-=this.cellStyle.borders.top.width+this.cellStyle.borders.bottom.width,1===this.rowSpan&&(t.width-=this.style.borders.left.width)),t},e.prototype.draw=function(e,t,i){var n=null;if(this.internalIsCellMergeContinue||this.internalIsRowMergeContinue){if(!this.internalIsCellMergeContinue||!this.row.grid.style.allowHorizontalOverflow)return n;if(this.row.rowOverflowIndex>0&&this.row.cells.indexOf(this)!=this.row.rowOverflowIndex+1||0==this.row.rowOverflowIndex&&this.internalIsCellMergeContinue)return n}t=this.adjustOuterLayoutArea(t,e),this.drawCellBackground(e,t);var r=this.getTextPen(),o=this.getTextBrush();void 0===r&&void 0===o&&(o=new uS(new pS(0,0,0)));var s=this.getTextFont(),a=this.getStringFormat(),l=t;if(l.height>=e.clientSize.height&&this.row.grid.allowRowBreakAcrossPages&&(l.height-=l.y),l=this.adjustContentLayoutArea(l),"string"==typeof this.objectValue||"string"==typeof this.remaining){var h=void 0,p=void 0;if(p=l.height<s.height?new MC(l.x,l.y,l.width,s.height):l,l.height<s.height&&this.row.grid.isChildGrid&&null!=this.row.grid.ParentCell){var d=p.height-this.row.grid.ParentCell.row.grid.style.cellPadding.bottom-this.row.grid.style.cellPadding.bottom;-1!=this.row.grid.splitChildRowIndex&&(this.fontSpilt=!0,this.row.rowFontSplit=!0),d>0&&d<s.height&&(p.height=d)}0!=this.gridRow.grid.style.cellSpacing&&(p.width-=this.gridRow.grid.style.cellSpacing,t.width-=this.gridRow.grid.style.cellSpacing),this.isFinish?(h=""===this.remaining?this.remaining:this.objectValue,e.drawString(h,s,r,o,p.x,p.y,p.width,p.height,a),-1==this.row.grid.splitChildRowIndex||this.row.grid.isChildGrid||void 0!==this.remaining||(this.remaining="")):(void 0!==this.remaining&&null!==this.remaining||(this.remaining=""),this.row.repeatFlag&&e.drawString(this.remaining,s,r,o,p.x,p.y,p.width,p.height,a),this.isFinish=!0),n=e.stringLayoutResult}else if(this.objectValue instanceof Zk){var c=this.objectValue;c.isChildGrid=!0,c.ParentCell=this;var u;u=l,0!=this.gridRow.grid.style.cellSpacing&&(t.width-=this.gridRow.grid.style.cellSpacing);var g=new Lk(c),f=new Ak;null!=this.row.grid.LayoutFormat?f=this.row.grid.LayoutFormat:f.layout=wS.Paginate;var m=new pk;if(null!=e.layer){m.page=e.page,m.bounds=u,m.format=f,c.setSpan(),c.checkSpan();var y=g.Layouter(m);this.value=c,-1!==this.row.grid.splitChildRowIndex&&(this.height=this.row.rowBreakHeightValue),m.page!=y.page&&(y.bounds.height=this.row.rowBreakHeightValue,0==this.row.rowBreakHeight?this.row.NestedGridLayoutResult=y:this.row.rowBreakHeight=this.row.rowBreakHeightValue)}}else if(this.objectValue instanceof vx||this.objectValue instanceof wx){var v=void 0;v=this.objectValue.width<=l.width?new MC(l.x,l.y,this.objectValue.width,l.height):l,e.drawImage(this.objectValue,v.x,v.y,v.width,v.height)}else this.objectValue instanceof Ik?this.objectValue.draw(e.currentPage,l):void 0===this.objectValue&&(this.objectValue="",e.drawString(this.objectValue,s,r,o,l.x,l.y,l.width,l.height,a),null!=this.style.cellPadding&&0==this.style.cellPadding.bottom&&0==this.style.cellPadding.left&&0==this.style.cellPadding.right&&0==this.style.cellPadding.top&&(t.width-=this.style.borders.left.width+this.style.borders.right.width),0!=this.gridRow.grid.style.cellSpacing&&(t.width-=this.gridRow.grid.style.cellSpacing));return null!=this.style.borders&&(this.fontSpilt?-1!=this.row.grid.ParentCell.row.grid.splitChildRowIndex&&(this.row.rowFontSplit=!1,this.drawCellBorders(e,t)):this.drawCellBorders(e,t)),n},e.prototype.drawCellBorders=function(e,t){this.row.grid.style.borderOverlapStyle===fx.Inside&&(t.x+=this.style.borders.left.width,t.y+=this.style.borders.top.width,t.width-=this.style.borders.right.width,t.height-=this.style.borders.bottom.width);var i=new PC(t.x,t.y+t.height),n=new PC(t.x,t.y),r=this.cellStyle.borders.left;this.cellStyle.borders.left.dashStyle===jC.Solid&&(r.lineCap=VC.Square),0!==r.width&&e.drawLine(r,i,n),i=new PC(t.x+t.width,t.y),n=new PC(t.x+t.width,t.y+t.height),r=this.cellStyle.borders.right,t.x+t.width>e.clientSize.width-r.width/2&&(i=new PC(e.clientSize.width-r.width/2,t.y),n=new PC(e.clientSize.width-r.width/2,t.y+t.height)),this.cellStyle.borders.right.dashStyle===jC.Solid&&(r.lineCap=VC.Square),0!==r.width&&e.drawLine(r,i,n),i=new PC(t.x,t.y),n=new PC(t.x+t.width,t.y),r=this.cellStyle.borders.top,this.cellStyle.borders.top.dashStyle===jC.Solid&&(r.lineCap=VC.Square),0!==r.width&&e.drawLine(r,i,n),i=new PC(t.x+t.width,t.y+t.height),n=new PC(t.x,t.y+t.height),r=this.cellStyle.borders.bottom,t.y+t.height>e.clientSize.height-r.width/2&&(i=new PC(t.x+t.width,e.clientSize.height-r.width/2),n=new PC(t.x,e.clientSize.height-r.width/2)),this.cellStyle.borders.bottom.dashStyle===jC.Solid&&(r.lineCap=VC.Square),0!==r.width&&e.drawLine(r,i,n)},e.prototype.adjustOuterLayoutArea=function(e,t){var i=!1,n=this.row.grid.style.cellSpacing;n>0&&(e=new MC(e.x+n,e.y+n,e.width-n,e.height-n));var r=this.row.cells.indexOf(this);if(this.columnSpan>1||this.row.rowOverflowIndex>0&&r==this.row.rowOverflowIndex+1&&this.isCellMergeContinue){if(1==(h=this.columnSpan)&&this.isCellMergeContinue)for(var o=r+1;o<this.row.grid.columns.count&&this.row.cells.getCell(o).isCellMergeContinue;o++)h++;for(var s=0,a=r;a<r+h;a++){if(this.row.grid.style.allowHorizontalOverflow){var l=this.row.grid.size.width<t.clientSize.width?this.row.grid.size.width:t.clientSize.width;if((this.row.grid.size.width>t.clientSize.width?e.x+s+this.row.grid.columns.getColumn(a).width:s+this.row.grid.columns.getColumn(a).width)>l)break}s+=this.row.grid.columns.getColumn(a).width}s-=this.row.grid.style.cellSpacing,e.width=s}if(this.rowSpan>1||this.row.rowSpanExists){var h=this.rowSpan,p=this.row.grid.rows.rowCollection.indexOf(this.row);-1==p&&-1!=(p=this.row.grid.headers.indexOf(this.row))&&(i=!0);var d=0;for(a=p;a<p+h;a++){d+=i?this.row.grid.headers.getHeader(a).height:this.row.grid.rows.getRow(a).height;var c=this.row.grid.rows.getRow(a);this.row.grid.rows.rowCollection.indexOf(c)}this.row.cells.indexOf(this);d-=this.row.grid.style.cellSpacing,e.height=d,this.row.rowMergeComplete||(e.height=d)}return e},e.prototype.getTextFont=function(){return void 0!==this.style.font&&null!=this.style.font?this.style.font:void 0!==this.row.style.font&&null!=this.row.style.font?this.row.style.font:void 0!==this.row.grid.style.font&&null!=this.row.grid.style.font?this.row.grid.style.font:Zx.defaultFont},e.prototype.getTextBrush=function(){return void 0!==this.style.textBrush&&null!=this.style.textBrush?this.style.textBrush:void 0!==this.row.style.textBrush&&null!=this.row.style.textBrush?this.row.style.textBrush:this.row.grid.style.textBrush},e.prototype.getTextPen=function(){return void 0!==this.style.textPen&&null!=this.style.textPen?this.style.textPen:void 0!==this.row.style.textPen&&null!=this.row.style.textPen?this.row.style.textPen:this.row.grid.style.textPen},e.prototype.getBackgroundBrush=function(){return void 0!==this.style.backgroundBrush&&null!=this.style.backgroundBrush?this.style.backgroundBrush:void 0!==this.row.style.backgroundBrush&&null!=this.row.style.backgroundBrush?this.row.style.backgroundBrush:this.row.grid.style.backgroundBrush},e.prototype.getBackgroundImage=function(){return void 0!==this.style.backgroundImage&&null!=this.style.backgroundImage?this.style.backgroundImage:void 0!==this.row.style.backgroundImage&&null!=this.row.style.backgroundImage?this.row.style.backgroundImage:this.row.grid.style.backgroundImage},e.prototype.getStringFormat=function(){return void 0!==this.style.stringFormat&&null!=this.style.stringFormat?this.style.stringFormat:this.stringFormat},e.prototype.measureHeight=function(){var e=this.calculateWidth();null==this.style.cellPadding||void 0===this.style.cellPadding?e-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(e-=this.style.cellPadding.right+this.style.cellPadding.left,e-=this.style.borders.left.width+this.style.borders.right.width);var t=0,i=new yS;if("string"==typeof this.objectValue||"string"==typeof this.remaining){var n=this.objectValue;this.isFinish||(n=null!==this.remaining&&""!==this.remaining&&void 0!==this.remaining?this.remaining:this.objectValue);var r=this.row.cells.indexOf(this);0!=this.gridRow.grid.style.cellSpacing&&(e-=2*this.gridRow.grid.style.cellSpacing),this.row.cells.getCell(r).hasColSpan||this.row.cells.getCell(r).hasRowSpan||(this.gridRow.grid.isChildGrid?(e<0?(this.tempval=e,null==this.style.cellPadding||void 0===this.style.cellPadding?this.tempval+=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(this.tempval+=this.style.cellPadding.right+this.style.cellPadding.left,this.tempval+=this.style.borders.left.width+this.style.borders.right.width)):this.tempval=e,t+=i.layout(n,this.getTextFont(),this.stringFormat,new IC(this.tempval,0),!1,new IC(0,0)).actualSize.height):t+=i.layout(n,this.getTextFont(),this.stringFormat,new IC(e,0),!1,new IC(0,0)).actualSize.height),t+=2*(this.style.borders.top.width+this.style.borders.bottom.width)}else if(this.objectValue instanceof Zk){r=this.row.cells.indexOf(this);var o=0;null!=this.style.cellPadding||void 0!==this.style.cellPadding?(o=this.calculateWidth(),void 0!==this.style.cellPadding.left&&this.style.cellPadding.hasLeftPad&&(o-=this.style.cellPadding.left),void 0!==this.style.cellPadding.right&&this.style.cellPadding.hasRightPad&&(o-=this.style.cellPadding.right)):null!=this.row.grid.style.cellPadding||void 0!==this.row.grid.style.cellPadding?(o=this.calculateWidth(),void 0!==this.row.grid.style.cellPadding.left&&this.row.grid.style.cellPadding.hasLeftPad&&(o-=this.row.grid.style.cellPadding.left),void 0!==this.row.grid.style.cellPadding.right&&this.row.grid.style.cellPadding.hasRightPad&&(o-=this.row.grid.style.cellPadding.right)):o=this.calculateWidth(),this.objectValue.tempWidth=o,this.row.cells.getCell(r).hasColSpan||this.row.cells.getCell(r).hasRowSpan?t+=2*(this.style.borders.top.width+this.style.borders.bottom.width):t=this.objectValue.size.height,0!==this.gridRow.grid.style.cellSpacing&&(e-=2*this.gridRow.grid.style.cellSpacing),null==this.style.cellPadding&&void 0===this.style.cellPadding||(void 0!==this.row.grid.style.cellPadding.top&&this.row.grid.style.cellPadding.hasTopPad&&(t+=this.row.grid.style.cellPadding.top),this.row.grid.style.cellPadding.hasBottomPad&&void 0!==this.row.grid.style.cellPadding.bottom&&(t+=this.row.grid.style.cellPadding.bottom)),t+=this.objectValue.style.cellSpacing}else if(this.objectValue instanceof vx||this.objectValue instanceof wx)t+=this.objectValue.height;else if(this.objectValue instanceof Ik){var s=this.objectValue;t+=i.layout(s.text,s.font,s.stringFormat,new IC(e,0),!1,new IC(0,0)).actualSize.height,t+=2*(this.style.borders.top.width+this.style.borders.bottom.width)}else void 0===this.objectValue&&(null==this.style.cellPadding||void 0===this.style.cellPadding?e-=this.gridRow.grid.style.cellPadding.right+this.gridRow.grid.style.cellPadding.left:(e-=this.style.cellPadding.right+this.style.cellPadding.left,e-=this.style.borders.left.width+this.style.borders.right.width),t+=2*(this.style.borders.top.width+this.style.borders.bottom.width));return this.objectValue instanceof Zk?null==this.style.cellPadding||void 0===this.style.cellPadding?(void 0!==this.row.grid.style.cellPadding.top&&this.row.grid.style.cellPadding.hasTopPad&&(t+=this.row.grid.style.cellPadding.top),void 0!==this.row.grid.style.cellPadding.bottom&&this.row.grid.style.cellPadding.hasBottomPad&&(t+=this.row.grid.style.cellPadding.bottom)):(void 0!==this.style.cellPadding.top&&this.style.cellPadding.hasTopPad&&(t+=this.style.cellPadding.top),void 0!==this.style.cellPadding.bottom&&this.style.cellPadding.hasBottomPad&&(t+=this.style.cellPadding.bottom)):null==this.style.cellPadding||void 0===this.style.cellPadding?t+=this.row.grid.style.cellPadding.top+this.row.grid.style.cellPadding.bottom:t+=this.style.cellPadding.top+this.style.cellPadding.bottom,t+=this.row.grid.style.cellSpacing},e.prototype.calculateWidth=function(){var e=this.row.cells.indexOf(this),t=(this.row.grid.rows.rowCollection.indexOf(this.row),this.columnSpan),i=0;if(1===t)for(var n=0;n<t;n++)i+=this.row.grid.columns.getColumn(e+n).width;else if(t>1)for(n=0;n<t;n++)i+=this.row.grid.columns.getColumn(e+n).width,n+1<t&&(this.row.cells.getCell(e+n+1).hasColSpan=!0);if(null!=this.parent&&this.parent.row.width>0&&this.row.grid.isChildGrid&&null!=this.parent&&this.row.width>this.parent.row.width){i=0;for(var r=0;r<this.parent.columnSpan;r++)i+=this.parent.row.grid.columns.getColumn(r).width;i/=this.row.cells.count}return i},e}(),Gk=function(){function e(e){this.cells=[],this.gridRow=e}return e.prototype.getCell=function(e){if(e<0||e>=this.count)throw new Error("IndexOutOfRangeException");return this.cells[e]},Object.defineProperty(e.prototype,"count",{get:function(){return this.cells.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(void 0===e){var t=new _k;return this.add(t),e}e.row=this.gridRow,this.cells.push(e)},e.prototype.indexOf=function(e){return this.cells.indexOf(e)},e}(),Uk=function(){function e(e){this.columnWidth=0,this.grid=e}return Object.defineProperty(e.prototype,"width",{get:function(){return this.columnWidth},set:function(e){this.isCustomWidth=!0,this.columnWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return null==this.stringFormat&&(this.stringFormat=new fS),this.stringFormat},set:function(e){this.stringFormat=e},enumerable:!0,configurable:!0}),e}(),Kk=function(){function e(e){this.internalColumns=[],this.columnWidth=0,this.grid=e,this.internalColumns=[]}return e.prototype.add=function(e){for(var t=0;t<e;t++){this.internalColumns.push(new Uk(this.grid));for(var i=0;i<this.grid.rows.count;i++){var n=this.grid.rows.getRow(i),r=new _k;r.value="",n.cells.add(r)}}},Object.defineProperty(e.prototype,"count",{get:function(){return this.internalColumns.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 0===this.columnWidth&&(this.columnWidth=this.measureColumnsWidth()),0===this.grid.initialWidth||this.columnWidth===this.grid.initialWidth||this.grid.style.allowHorizontalOverflow||(this.columnWidth=this.grid.initialWidth,this.grid.isPageWidth=!0),this.columnWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this.internalColumns},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(e){if(e>=0&&e<=this.columns.length)return this.columns[e];throw Error("can not get the column from the index: "+e)},e.prototype.measureColumnsWidth=function(){var e=0;this.grid.measureColumnsWidth();for(var t=0,i=this.internalColumns.length;t<i;t++)e+=this.internalColumns[t].width;return e},e.prototype.getDefaultWidths=function(e){for(var t=[],i=this.count,n=0;n<this.count;n++)this.grid.isPageWidth&&e>=0&&!this.internalColumns[n].isCustomWidth?this.internalColumns[n].width=0:(t[n]=this.internalColumns[n].width,this.internalColumns[n].width>0&&this.internalColumns[n].isCustomWidth?(e-=this.internalColumns[n].width,i--):t[n]=0);for(n=0;n<this.count;n++){var r=e/i;t[n]<=0&&(t[n]=r)}return t},e}(),Yk=function(){function e(e){this.gridRowOverflowIndex=0,this.rowHeight=0,this.rowWidth=0,this.isrowFinish=!1,this.isRowSpanRowHeightSet=!1,this.noOfPageCount=0,this.isRowHeightSet=!1,this.isPageBreakRowSpanApplied=!1,this.isRowMergeComplete=!0,this.repeatFlag=!1,this.rowFontSplit=!1,this.pdfGrid=e}return Object.defineProperty(e.prototype,"rowSpanExists",{get:function(){return this.bRowSpanExists},set:function(e){this.bRowSpanExists=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cells",{get:function(){return null==this.gridCells&&(this.gridCells=new Gk(this)),this.gridCells},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this.pdfGrid},set:function(e){this.pdfGrid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return void 0===this.rowStyle&&(this.rowStyle=new sk,this.rowStyle.setParent(this)),this.rowStyle},set:function(e){this.rowStyle=e;for(var t=0;t<this.cells.count;t++)this.cells.getCell(t).style.borders=e.border,void 0!==e.font&&(this.cells.getCell(t).style.font=e.font),void 0!==e.backgroundBrush&&(this.cells.getCell(t).style.backgroundBrush=e.backgroundBrush),void 0!==e.backgroundImage&&(this.cells.getCell(t).style.backgroundImage=e.backgroundImage),void 0!==e.textBrush&&(this.cells.getCell(t).style.textBrush=e.textBrush),void 0!==e.textPen&&(this.cells.getCell(t).style.textPen=e.textPen)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowBreakHeight",{get:function(){return void 0===this.gridRowBreakHeight&&(this.gridRowBreakHeight=0),this.gridRowBreakHeight},set:function(e){this.gridRowBreakHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowOverflowIndex",{get:function(){return this.gridRowOverflowIndex},set:function(e){this.gridRowOverflowIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.isRowHeightSet||(this.rowHeight=this.measureHeight()),this.rowHeight},set:function(e){this.rowHeight=e,this.isRowHeightSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 0!==this.rowWidth&&void 0!==this.rowWidth||(this.rowWidth=this.measureWidth()),this.rowWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NestedGridLayoutResult",{get:function(){return this.gridResult},set:function(e){this.gridResult=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnSpanExists",{get:function(){return this.bColumnSpanExists},set:function(e){this.bColumnSpanExists=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowMergeComplete",{get:function(){return this.isRowMergeComplete},set:function(e){this.isRowMergeComplete=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowIndex",{get:function(){return this.grid.rows.rowCollection.indexOf(this)},enumerable:!0,configurable:!0}),e.prototype.measureHeight=function(){var e,t=0,i=0;e=this.cells.getCell(0).rowSpan>1?0:this.cells.getCell(0).height;for(var n=0;n<this.cells.count;n++){var r=this.cells.getCell(n);if(r.rowSpanRemainingHeight>t&&(t=r.rowSpanRemainingHeight),this.rowMergeComplete=!1,r.rowSpan>1){for(var o=n,s=this.grid.rows.rowCollection.indexOf(this),a=0;a<r.rowSpan;a++)a+1<r.rowSpan&&(this.grid.rows.getRow(s+a+1).cells.getCell(o).hasRowSpan=!0);i<r.height&&(i=r.height)}else e=Math.max(e,r.height)}return i>e&&(e=i),0===e?e=i:t>0&&(e+=t),e},e.prototype.measureWidth=function(){for(var e=0,t=0;t<this.grid.columns.count;t++){e+=this.grid.columns.getColumn(t).width}return e},e}(),Xk=function(){function e(e){this.rows=[],this.grid=e}return Object.defineProperty(e.prototype,"count",{get:function(){return this.rows.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCollection",{get:function(){return this.rows},enumerable:!0,configurable:!0}),e.prototype.addRow=function(e){if(void 0===e){var t=new Yk(this.grid);return this.addRow(t),t}if(e.style.setBackgroundBrush(this.grid.style.backgroundBrush),e.style.setFont(this.grid.style.font),e.style.setTextBrush(this.grid.style.textBrush),e.style.setTextPen(this.grid.style.textPen),0===e.cells.count)for(var i=0;i<this.grid.columns.count;i++)e.cells.add(new _k);this.rows.push(e)},e.prototype.getRow=function(e){return this.rows[e]},e}(),Qk=function(){function e(e){this.rows=[],this.grid=e,this.rows=[]}return e.prototype.getHeader=function(e){return this.rows[e]},Object.defineProperty(e.prototype,"count",{get:function(){return this.rows.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if("number"==typeof e){for(var t=void 0,i=0;i<e;i++){t=new Yk(this.grid);for(var n=0;n<this.grid.columns.count;n++)t.cells.add(new _k);this.rows.push(t)}return this.rows}this.rows.push(e)},e.prototype.indexOf=function(e){return this.rows.indexOf(e)},e}(),Jk=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zk=function(e){function t(){var t=e.call(this)||this;return t.gridSize=new IC(0,0),t.isGridSplit=!1,t.isRearranged=!1,t.pageBounds=new MC,t.listOfNavigatePages=[],t.parentCellIndex=0,t.tempWidth=0,t.breakRow=!0,t.splitChildRowIndex=-1,t.hasRowSpanSpan=!1,t.hasColumnSpan=!1,t.isSingleGrid=!0,t}return Jk(t,e),Object.defineProperty(t.prototype,"raiseBeginCellDraw",{get:function(){return void 0!==this.beginCellDraw&&null!==typeof this.beginCellDraw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raiseEndCellDraw",{get:function(){return void 0!==this.endCellDraw&&null!==typeof this.endCellDraw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatHeader",{get:function(){return null!=this.bRepeatHeader&&void 0!==this.bRepeatHeader||(this.bRepeatHeader=!1),this.bRepeatHeader},set:function(e){this.bRepeatHeader=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowRowBreakAcrossPages",{get:function(){return this.breakRow},set:function(e){this.breakRow=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return null!=this.gridColumns&&void 0!==this.gridColumns||(this.gridColumns=new Kk(this)),this.gridColumns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return null==this.gridRows&&(this.gridRows=new Xk(this)),this.gridRows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){return null!=this.gridHeaders&&void 0!==this.gridHeaders||(this.gridHeaders=new Qk(this)),this.gridHeaders},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initialWidth",{get:function(){return this.gridInitialWidth},set:function(e){this.gridInitialWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return null==this.gridStyle&&(this.gridStyle=new rk),this.gridStyle},set:function(e){null==this.gridStyle&&(this.gridStyle=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPageWidth",{get:function(){return this.ispageWidth},set:function(e){this.ispageWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChildGrid",{get:function(){return this.ischildGrid},set:function(e){this.ischildGrid=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return 0!==this.gridSize.width&&void 0!==this.gridSize.width||0!==this.gridSize.height||(this.gridSize=this.measure()),this.gridSize},set:function(e){this.gridSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ParentCell",{get:function(){return this.parentCell},set:function(e){this.parentCell=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LayoutFormat",{get:function(){return this.layoutFormat},enumerable:!0,configurable:!0}),t.prototype.draw=function(e,t,i,n){if(t instanceof PC&&void 0===t.width&&void 0===i)return this.drawHelper(e,t.x,t.y);if("number"==typeof t&&"number"==typeof i&&void 0===n)return this.drawHelper(e,t,i,null);if(t instanceof MC&&void 0!==t.width&&void 0===i)return this.drawHelper(e,t,null);if(t instanceof PC&&void 0===t.width&&i instanceof hk)return this.drawHelper(e,t.x,t.y,i);if("number"==typeof t&&"number"==typeof i&&(n instanceof hk||null==n)){var r=e.graphics.clientSize.width-t,o=new MC(t,i,r,0);return this.drawHelper(e,o,n)}return t instanceof MC&&void 0!==t.width&&"boolean"==typeof i?this.drawHelper(e,t,null):this.drawHelper(e,t,i)},t.prototype.measure=function(){for(var e=0,t=this.columns.width,i=0;i<this.headers.count;i++){e+=this.headers.getHeader(i).height}for(i=0;i<this.rows.count;i++){e+=this.rows.getRow(i).height}return new IC(t,e)},t.prototype.onBeginCellDraw=function(e){this.raiseBeginCellDraw&&this.beginCellDraw(this,e)},t.prototype.onEndCellDraw=function(e){this.raiseEndCellDraw&&this.endCellDraw(this,e)},t.prototype.layout=function(e){if(0!==this.rows.count){var t=this.rows.getRow(0).cells.getCell(0).style;if(null!=t.borders&&(null!=t.borders.left&&1!==t.borders.left.width||null!=t.borders.top&&1!==t.borders.top.width)){var i=t.borders.left.width/2,n=t.borders.top.width/2;if(e.bounds.x===$x.default.right.width/2&&e.bounds.y===$x.default.right.width/2){var r=new MC(i,n,this.gridSize.width,this.gridSize.height);e.bounds=r}}}return this.setSpan(),this.checkSpan(),this.layoutFormat=e.format,this.gridLocation=e.bounds,new Lk(this).Layouter(e)},t.prototype.setSpan=function(){for(var e=1,t=1,i=0,n=0,r=0,o=this.headers.count,s=0;s<o;s++){var a=this.headers.getHeader(s);r=0;for(var l=a.cells.count,h=0;h<l;h++){var p=a.cells.getCell(h);if(r=Math.max(r,p.rowSpan),!p.isCellMergeContinue&&!p.isRowMergeContinue&&(p.columnSpan>1||p.rowSpan>1)){if(p.columnSpan+h>a.cells.count)throw new Error("Invalid span specified at row "+h.toString()+" column "+s.toString());if(p.rowSpan+s>this.headers.count)throw new Error("Invalid span specified at Header "+h.toString()+" column "+s.toString());if(p.columnSpan>1&&p.rowSpan>1){for(e=p.columnSpan,t=p.rowSpan,i=h,n=s,p.isCellMergeStart=!0,p.isRowMergeStart=!0;e>1;)i++,a.cells.getCell(i).isCellMergeContinue=!0,a.cells.getCell(i).isRowMergeContinue=!0,a.cells.getCell(i).rowSpan=t,e--;for(i=h,e=p.columnSpan;t>1;){for(n++,this.headers.getHeader(n).cells.getCell(h).isRowMergeContinue=!0,this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue=!0,t--;e>1;)i++,this.headers.getHeader(n).cells.getCell(i).isCellMergeContinue=!0,this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue=!0,e--;e=p.columnSpan,i=h}}else if(p.columnSpan>1&&1===p.rowSpan)for(e=p.columnSpan,i=h,p.isCellMergeStart=!0;e>1;)i++,a.cells.getCell(i).isCellMergeContinue=!0,e--;else if(1===p.columnSpan&&p.rowSpan>1)for(t=p.rowSpan,n=s;t>1;)n++,this.headers.getHeader(n).cells.getCell(h).isRowMergeContinue=!0,t--}}a.maximumRowSpan=r}},t.prototype.checkSpan=function(){var e,t,i=1,n=0,r=0;if(e=i=1,t=r=0,this.hasRowSpanSpan||this.hasColumnSpan)for(var o=this.rows.count,s=0;s<o;s++){var a=this.rows.getRow(s);n=0;for(var l=a.cells.count,h=0;h<l;h++){var p=a.cells.getCell(h);if(n=Math.max(n,p.rowSpan),!p.isCellMergeContinue&&!p.isRowMergeContinue&&(p.columnSpan>1||p.rowSpan>1)){if(p.columnSpan+h>a.cells.count)throw new Error("Invalid span specified at row  "+h.toString()+" column "+s.toString());if(p.rowSpan+s>this.rows.count)throw new Error("Invalid span specified at row  "+h.toString()+" column "+s.toString());if(p.columnSpan>1&&p.rowSpan>1){for(e=p.columnSpan,i=p.rowSpan,t=h,r=s,p.isCellMergeStart=!0,p.isRowMergeStart=!0;e>1;)t++,a.cells.getCell(t).isCellMergeContinue=!0,a.cells.getCell(t).isRowMergeContinue=!0,e--;for(t=h,e=p.columnSpan;i>1;){for(r++,this.rows.getRow(r).cells.getCell(h).isRowMergeContinue=!0,this.rows.getRow(r).cells.getCell(t).isRowMergeContinue=!0,i--;e>1;)t++,this.rows.getRow(r).cells.getCell(t).isCellMergeContinue=!0,this.rows.getRow(r).cells.getCell(t).isRowMergeContinue=!0,e--;e=p.columnSpan,t=h}}else if(p.columnSpan>1&&1===p.rowSpan)for(e=p.columnSpan,t=h,p.isCellMergeStart=!0;e>1;)t++,a.cells.getCell(t).isCellMergeContinue=!0,e--;else if(1===p.columnSpan&&p.rowSpan>1)for(i=p.rowSpan,r=s;i>1;)r++,this.rows.getRow(r).cells.getCell(h).isRowMergeContinue=!0,i--}}a.maximumRowSpan=n}},t.prototype.measureColumnsWidth=function(e){if(void 0!==e){this.isPageWidth=!1;for(var t=this.columns.getDefaultWidths(e.width-e.x),i=0,n=this.columns.count;i<n;i++)this.columns.getColumn(i).columnWidth=t[i],this.tempWidth=t[i];if(null!=this.ParentCell&&0==this.style.allowHorizontalOverflow&&0==this.ParentCell.row.grid.style.allowHorizontalOverflow){var r=0,o=0,s=this.columns.count,a=0;null==this.ParentCell.style.cellPadding&&void 0===this.ParentCell.style.cellPadding||(void 0!==this.ParentCell.style.cellPadding.left&&this.ParentCell.style.cellPadding.hasLeftPad&&(r+=this.ParentCell.style.cellPadding.left),void 0!==this.ParentCell.style.cellPadding.right&&this.ParentCell.style.cellPadding.hasRightPad&&(r+=this.ParentCell.style.cellPadding.right));for(i=0;i<this.ParentCell.columnSpan;i++)o+=this.ParentCell.row.grid.columns.getColumn(this.parentCellIndex+i).width;for(var l=0;l<this.columns.count;l++)this.gridColumns.getColumn(l).width>0&&this.gridColumns.getColumn(l).isCustomWidth&&(o-=this.gridColumns.getColumn(l).width,s--);if(null==this.ParentCell.row.grid.style.cellPadding&&void 0===this.ParentCell.row.grid.style.cellPadding||(void 0!==this.ParentCell.row.grid.style.cellPadding.top&&this.ParentCell.row.grid.style.cellPadding.hasTopPad&&(r+=this.ParentCell.row.grid.style.cellPadding.top),void 0!==this.ParentCell.row.grid.style.cellPadding.bottom&&this.ParentCell.row.grid.style.cellPadding.hasBottomPad&&(r+=this.ParentCell.row.grid.style.cellPadding.bottom)),0!=this.ParentCell.row.grid.style.cellSpacing&&(o-=2*this.ParentCell.row.grid.style.cellSpacing),o>r&&(a=(o-r)/s,this.tempWidth=a,null!=this.ParentCell))for(l=0;l<this.columns.count;l++)this.columns.getColumn(l).isCustomWidth||(this.columns.getColumn(l).columnWidth=a)}}else{t=[this.columns.count];for(var h=0;h<this.columns.count;h++)t[h]=0;var p=0;if((void 0===this.isChildGrid&&void 0!==this.gridLocation||null===this.isChildGrid&&void 0!==this.gridLocation)&&(this.initialWidth=this.gridLocation.width),this.headers.count>0){var d=this.headers.getHeader(0).cells.count,c=this.headers.count;for(i=0;i<d;i++){p=0;for(l=0;l<c;l++){var u=Math.min(this.initialWidth,this.headers.getHeader(l).cells.getCell(i).width);p=Math.max(p,u)}t[i]=p}}p=0;i=0;for(var g=this.columns.count;i<g;i++){for(l=0,c=this.rows.count;l<c;l++)if(1==this.rows.getRow(l).cells.getCell(i).columnSpan&&!this.rows.getRow(l).cells.getCell(i).isCellMergeContinue||null!=this.rows.getRow(l).cells.getCell(i).value){if(null!=this.rows.getRow(l).cells.getCell(i).value&&!this.rows.getRow(l).grid.style.allowHorizontalOverflow)this.rows.getRow(l).grid.style.cellPadding.right,this.rows.getRow(l).grid.style.cellPadding.left,this.rows.getRow(l).cells.getCell(i).style.borders.left.width;u=0;u=this.initialWidth>0?Math.min(this.initialWidth,this.rows.getRow(l).cells.getCell(i).width):this.rows.getRow(l).cells.getCell(i).width,p=Math.max(t[i],Math.max(p,u)),p=Math.max(this.columns.getColumn(i).width,p)}0!=this.rows.count&&(t[i]=p),p=0}i=0;for(var f=this.rows.count;i<f;i++){l=0;for(var m=this.columns.count;l<m;l++)if(this.rows.getRow(i).cells.getCell(l).columnSpan>1){t[l];for(var y=1;y<this.rows.getRow(i).cells.getCell(l).columnSpan;y++)t[l+y]}}for(i=0,n=this.columns.count;i<n;i++)(this.columns.getColumn(i).width<=0||this.columns.getColumn(i).width>0&&!this.columns.getColumn(i).isCustomWidth)&&(this.columns.getColumn(i).columnWidth=t[i]);r=0;var v=0,b=this.columns.count,w=0;v=this.tempWidth;for(l=0;l<this.columns.count;l++)this.gridColumns.getColumn(l).width>0&&this.gridColumns.getColumn(l).isCustomWidth&&(v-=this.gridColumns.getColumn(l).width,b--);if(v>0&&0!=this.ParentCell.row.grid.style.cellSpacing&&(v-=2*this.ParentCell.row.grid.style.cellSpacing),v>r&&(w=v/b,null!=this.ParentCell))for(l=0;l<this.columns.count;l++)this.columns.getColumn(l).isCustomWidth||(this.columns.getColumn(l).columnWidth=w)}},t}(ck),$k=function(){function e(e,t,i,n,r){e instanceof MC&&void 0===t?this.InitiateBounds(e.x,e.y,e.width,e.height,null):e instanceof MC&&t instanceof Nx&&void 0===i?this.InitiateBounds(e.x,e.y,e.width,e.height,t):e instanceof PC&&t instanceof IC&&void 0===i?this.InitiateBounds(e.x,e.y,t.width,t.height,null):e instanceof PC&&t instanceof IC&&i instanceof Nx&&void 0===n?this.InitiateBounds(e.x,e.y,t.width,t.height,i):e instanceof IC&&void 0===t?this.InitiateBounds(0,0,e.width,e.height,null):"number"==typeof e&&"number"==typeof t&&void 0===i?this.InitiateBounds(0,0,e,t,null):"number"==typeof e&&"number"==typeof t&&i instanceof Nx&&void 0===n?this.InitiateBounds(0,0,e,t,i):this.InitiateBounds(e,t,i,n,null)}return Object.defineProperty(e.prototype,"dock",{get:function(){return this.dockStyle},set:function(e){this.dockStyle=e,this.resetAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this.alignmentStyle},set:function(e){this.setAlignment(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"foreground",{get:function(){return this.isForeground},set:function(e){this.isForeground=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return!this.isForeground},set:function(e){this.isForeground=!e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.currentLocation},set:function(e){this.type===kC.None&&(this.currentLocation=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return void 0!==this.currentLocation?this.currentLocation.x:0},set:function(e){this.type===kC.None&&(this.currentLocation.x=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return void 0!==this.currentLocation?this.currentLocation.y:0},set:function(e){this.type===kC.None&&(this.currentLocation.y=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.template.size},set:function(e){this.type===kC.None&&this.template.reset(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.template.width},set:function(e){if(this.template.width!==e&&this.type===kC.None){var t=this.template.size;t.width=e,this.template.reset(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.template.height},set:function(e){if(this.template.height!==e&&this.type===kC.None){var t=this.template.size;t.height=e,this.template.reset(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){return this.template.graphics},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this.pdfTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.templateType},set:function(e){this.updateDocking(e),this.templateType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new MC(new PC(this.x,this.y),this.size)},set:function(e){this.type===kC.None&&(this.location=new PC(e.x,e.y),this.size=new IC(e.width,e.height))},enumerable:!0,configurable:!0}),e.prototype.InitiateBounds=function(e,t,i,n,r){this.x=e,this.y=t,this.pdfTemplate=new gx(i,n)},e.prototype.updateDocking=function(e){if(e!==kC.None){switch(e){case kC.Top:this.dock=SC.Top;break;case kC.Bottom:this.dock=SC.Bottom;break;case kC.Left:this.dock=SC.Left;break;case kC.Right:this.dock=SC.Right}this.resetAlignment()}},e.prototype.resetAlignment=function(){this.alignment=xC.None},e.prototype.setAlignment=function(e){if(this.dock===SC.None)this.alignmentStyle=e;else{var t=!1;switch(this.dock){case SC.Left:t=e===xC.TopLeft||e===xC.MiddleLeft||e===xC.BottomLeft||e===xC.None;break;case SC.Top:t=e===xC.TopLeft||e===xC.TopCenter||e===xC.TopRight||e===xC.None;break;case SC.Right:t=e===xC.TopRight||e===xC.MiddleRight||e===xC.BottomRight||e===xC.None;break;case SC.Bottom:t=e===xC.BottomLeft||e===xC.BottomCenter||e===xC.BottomRight||e===xC.None;break;case SC.Fill:t=e===xC.MiddleCenter||e===xC.None}t&&(this.alignmentStyle=e)}},e.prototype.draw=function(e,t){var i=e.page,n=this.calculateBounds(i,t);-0===n.x&&(n.x=0),e.graphics.drawPdfTemplate(this.template,new PC(n.x,n.y),new IC(n.width,n.height))},e.prototype.calculateBounds=function(e,t){var i=this.bounds;return this.alignmentStyle!==xC.None?i=this.getAlignmentBounds(e,t):this.dockStyle!==SC.None&&(i=this.getDockBounds(e,t)),i},e.prototype.getAlignmentBounds=function(e,t){this.bounds;return this.type===kC.None?this.getSimpleAlignmentBounds(e,t):this.getTemplateAlignmentBounds(e,t)},e.prototype.getSimpleAlignmentBounds=function(e,t){var i=this.bounds,n=e.section.getActualBounds(t,e,!1),r=this.x,o=this.y;switch(this.alignmentStyle){case xC.TopLeft:r=0,o=0;break;case xC.TopCenter:r=(n.width-this.width)/2,o=0;break;case xC.TopRight:r=n.width-this.width,o=0;break;case xC.MiddleLeft:r=0,o=(n.height-this.height)/2;break;case xC.MiddleCenter:r=(n.width-this.width)/2,o=(n.height-this.height)/2;break;case xC.MiddleRight:r=n.width-this.width,o=(n.height-this.height)/2;break;case xC.BottomLeft:r=0,o=n.height-this.height;break;case xC.BottomCenter:r=(n.width-this.width)/2,o=n.height-this.height;break;case xC.BottomRight:r=n.width-this.width,o=n.height-this.height}return i.x=r,i.y=o,i},e.prototype.getTemplateAlignmentBounds=function(e,t){var i=this.bounds,n=e.section,r=n.getActualBounds(t,e,!1),o=this.x,s=this.y;switch(this.alignmentStyle){case xC.TopLeft:this.type===kC.Left?(o=-r.x,s=0):this.type===kC.Top&&(o=-r.x,s=-r.y);break;case xC.TopCenter:o=(r.width-this.width)/2,s=-r.y;break;case xC.TopRight:this.type===kC.Right?(o=r.width+n.getRightIndentWidth(t,e,!1)-this.width,s=0):this.type===kC.Top&&(o=r.width+n.getRightIndentWidth(t,e,!1)-this.width,s=-r.y);break;case xC.MiddleLeft:o=-r.x,s=(r.height-this.height)/2;break;case xC.MiddleCenter:o=(r.width-this.width)/2,s=(r.height-this.height)/2;break;case xC.MiddleRight:o=r.width+n.getRightIndentWidth(t,e,!1)-this.width,s=(r.height-this.height)/2;break;case xC.BottomLeft:this.type===kC.Left?(o=-r.x,s=r.height-this.height):this.type===kC.Bottom&&(o=-r.x,s=r.height+n.getBottomIndentHeight(t,e,!1)-this.height);break;case xC.BottomCenter:o=(r.width-this.width)/2,s=r.height+n.getBottomIndentHeight(t,e,!1)-this.height;break;case xC.BottomRight:this.type===kC.Right?(o=r.width+n.getRightIndentWidth(t,e,!1)-this.width,s=r.height-this.height):this.type===kC.Bottom&&(o=r.width+n.getRightIndentWidth(t,e,!1)-this.width,s=r.height+n.getBottomIndentHeight(t,e,!1)-this.height)}return i.x=o,i.y=s,i},e.prototype.getDockBounds=function(e,t){this.bounds;return this.type===kC.None?this.getSimpleDockBounds(e,t):this.getTemplateDockBounds(e,t)},e.prototype.getSimpleDockBounds=function(e,t){this.bounds;var i=e.section.getActualBounds(t,e,!1),n=this.x,r=this.y,o=this.width,s=this.height;switch(this.dockStyle){case SC.Left:n=0,r=0,o=this.width,s=i.height;break;case SC.Top:n=0,r=0,o=i.width,s=this.height;break;case SC.Right:n=i.width-this.width,r=0,o=this.width,s=i.height;break;case SC.Bottom:n=0,r=i.height-this.height,o=i.width,s=this.height;break;case SC.Fill:n=0,n=0,o=i.width,s=i.height}return new MC(n,r,o,s)},e.prototype.getTemplateDockBounds=function(e,t){this.bounds;var i=e.section,n=i.getActualBounds(t,e,!1),r=i.pageSettings.getActualSize(),o=this.x,s=this.y,a=this.width,l=this.height;switch(this.dockStyle){case SC.Left:o=-n.x,s=0,a=this.width,l=n.height;break;case SC.Top:o=-n.x,s=-n.y,a=r.width,l=this.height,n.height<0&&(s=-n.y+r.height);break;case SC.Right:o=n.width+i.getRightIndentWidth(t,e,!1)-this.width,s=0,a=this.width,l=n.height;break;case SC.Bottom:o=-n.x,s=n.height+i.getBottomIndentHeight(t,e,!1)-this.height,a=r.width,l=this.height,n.height<0&&(s-=r.height);break;case SC.Fill:o=0,o=0,a=n.width,l=n.height}return new MC(o,s,a,l)},e}(),eT=function(){function e(){}return e.convert=function(e,t){var i="";switch(t){case CC.None:i="";break;case CC.Numeric:i=e.toString();break;case CC.LowerLatin:i=this.arabicToLetter(e).toLowerCase();break;case CC.LowerRoman:i=this.arabicToRoman(e).toLowerCase();break;case CC.UpperLatin:i=this.arabicToLetter(e);break;case CC.UpperRoman:i=this.arabicToRoman(e)}return i},e.arabicToRoman=function(e){var t="",i=this.generateNumber(e,1e3,"M");t+=i.returnValue,e=i.intArabic;var n=this.generateNumber(e,900,"CM");t+=n.returnValue,e=n.intArabic;var r=this.generateNumber(e,500,"D");t+=r.returnValue,e=r.intArabic;var o=this.generateNumber(e,400,"CD");t+=o.returnValue,e=o.intArabic;var s=this.generateNumber(e,100,"C");t+=s.returnValue,e=s.intArabic;var a=this.generateNumber(e,90,"XC");t+=a.returnValue,e=a.intArabic;var l=this.generateNumber(e,50,"L");t+=l.returnValue,e=l.intArabic;var h=this.generateNumber(e,40,"XL");t+=h.returnValue,e=h.intArabic;var p=this.generateNumber(e,10,"X");t+=p.returnValue,e=p.intArabic;var d=this.generateNumber(e,9,"IX");t+=d.returnValue,e=d.intArabic;var c=this.generateNumber(e,5,"V");t+=c.returnValue,e=c.intArabic;var u=this.generateNumber(e,4,"IV");t+=u.returnValue,e=u.intArabic;var g=this.generateNumber(e,1,"I");return t+=g.returnValue,e=g.intArabic,t.toString()},e.arabicToLetter=function(e){for(var t=this.convertToLetter(e),i="";t.length>0;){var n=t.pop();i=this.appendChar(i,n)}return i.toString()},e.generateNumber=function(e,t,i){for(var n="";e>=t;)e-=t,n+=i;return{returnValue:n.toString(),intArabic:e}},e.convertToLetter=function(e){if(e<=0)throw Error("ArgumentOutOfRangeException-arabic, Value can not be less 0");for(var t=[];e>this.letterLimit;){var i=e%this.letterLimit;0===i?(e=e/this.letterLimit-1,i=this.letterLimit):e/=this.letterLimit,t.push(i)}return t.push(e),t},e.appendChar=function(t,i){return t+=String.fromCharCode(e.acsiiStartIndex+i)},e.letterLimit=26,e.acsiiStartIndex=64,e}(),tT=function(){function e(e,t){this.pdfTemplate=null,this.content="",void 0===e||(this.template=e,this.value=t)}return Object.defineProperty(e.prototype,"template",{get:function(){return this.pdfTemplate},set:function(e){this.pdfTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.content},set:function(e){this.content=e},enumerable:!0,configurable:!0}),e}(),iT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nT=function(e){function t(){var t=e.call(this)||this;return t.list=new ES,t}return iT(t,e),t.prototype.performDraw=function(t,i,n,r){e.prototype.performDrawHelper.call(this,t,i,n,r);var o=this.getValue(t),s=new gx(this.getSize());this.list.setValue(t,new tT(s,o));s.graphics;var a=this.getSize();s.graphics.drawString(o,this.getFont(),this.pen,this.getBrush(),0,0,a.width,a.height,this.stringFormat);var l=new PC(i.x+this.location.x,i.y+this.location.y);t.drawPdfTemplate(s,l,new IC(s.width*n,s.height*r))},t}(LS),rT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oT=function(e){function t(t,i){var n=e.call(this)||this;return n.internalNumberStyle=CC.Numeric,void 0===i?n.font=t:i instanceof dS?(n.font=t,n.brush=i):(n.font=t,n.bounds=i),n}return rT(t,e),Object.defineProperty(t.prototype,"numberStyle",{get:function(){return this.internalNumberStyle},set:function(e){this.internalNumberStyle=e},enumerable:!0,configurable:!0}),t.prototype.getValue=function(e){var t=this.getPageFromGraphics(e);return this.internalGetValue(t)},t.prototype.internalGetValue=function(e){var t=e.document.pages.indexOf(e)+1;return eT.convert(t,this.numberStyle)},t}(nT),sT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),aT=function(e){function t(t,i,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s=e.call(this)||this;return s.internalAutomaticFields=null,s.internalText="",s.font=t,s.brush=i,s.text=n,s.automaticFields=r,s}return sT(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.internalText},set:function(e){this.internalText=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"automaticFields",{get:function(){return this.internalAutomaticFields},set:function(e){this.internalAutomaticFields=e},enumerable:!0,configurable:!0}),t.prototype.getValue=function(e){var t=this.text.toString();if(void 0!==this.automaticFields&&null!=this.automaticFields&&this.automaticFields.length>0)for(var i=0;i<this.automaticFields.length;i++){var n=this.automaticFields[i];t=t.replace("{"+i+"}",n.getValue(e))}return t},t}(nT),lT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hT=function(e){function t(){var t=e.call(this)||this;return t.list=new ES,t.painterGraphics=[],t}return lT(t,e),t.prototype.performDraw=function(t,i,n,r){e.prototype.performDrawHelper.call(this,t,i,n,r);var o=this.getPageFromGraphics(t).document,s=this.getValue(t);if(this.list.containsKey(o)){var a=this.list.getValue(o),l=new PC(i.x+this.location.x,i.y+this.location.y);t.drawPdfTemplate(a.template,l,new IC(a.template.width*n,a.template.height*r)),this.painterGraphics.push(t)}else{var h=this.getSize(),p=new gx(h);this.list.setValue(o,new tT(p,s)),p.graphics.drawString(s,this.getFont(),this.pen,this.getBrush(),0,0,h.width,h.height,this.stringFormat);l=new PC(i.x+this.location.x,i.y+this.location.y);t.drawPdfTemplate(p,l,new IC(p.width*n,p.height*r)),this.painterGraphics.push(t)}},t}(LS),pT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dT=function(e){function t(t,i){var n=e.call(this)||this;return n.internalNumberStyle=CC.Numeric,void 0===i?n.font=t:i instanceof dS?(n.font=t,n.brush=i):(n.font=t,n.bounds=i),n}return pT(t,e),Object.defineProperty(t.prototype,"numberStyle",{get:function(){return this.internalNumberStyle},set:function(e){this.internalNumberStyle=e},enumerable:!0,configurable:!0}),t.prototype.getValue=function(e){var t=this.getPageFromGraphics(e).section.parent.document.pages.count;return eT.convert(t,this.numberStyle)},t}(hT),cT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uT=function(e){function t(t,i,n){var r=e.call(this,i)||this;return r.isEmbedFont=!1,r.isUnicode=!0,void 0!==n?r.createFontInternal(t,n):r.createFontInternal(t,KC.Regular),r}return cT(t,e),t.prototype.equalsToFont=function(e){return!1},t.prototype.getLineWidth=function(e,t){var i=0;null!==t&&t.textDirection!==UC.None?i=this.getUnicodeLineWidth(e,i,t).width:i=this.fontInternal.getLineWidth(e);var n=this.metrics.getSize(t);return i*=xS.charSizeMultiplier*n,i=this.applyFormatSettings(e,t,i)},t.prototype.getCharWidth=function(e,t){var i=this.fontInternal.getCharWidth(e);return i*=.001*this.metrics.getSize(t)},t.prototype.createFontInternal=function(e,t){this.fontInternal=new rx(e,this.size),this.calculateStyle(t),this.initializeInternals()},t.prototype.calculateStyle=function(e){var t=this.fontInternal.ttfMetrics.macStyle;0!=(e&KC.Underline)&&(t|=KC.Underline),0!=(e&KC.Strikeout)&&(t|=KC.Strikeout),this.setStyle(t)},t.prototype.initializeInternals=function(){var e=null;Zx.enableCache&&(e=Zx.cache.search(this));var t=null;if(null!=e){t=e.getInternals();var i=e.metrics;(i=i.clone()).size=this.size,this.metrics=i,this.fontInternal=e.fontInternal}else null==e&&(this.fontInternal instanceof rx&&(this.fontInternal.isEmbed=this.isEmbedFont),this.fontInternal.createInternals(),t=this.fontInternal.getInternals(),this.metrics=this.fontInternal.metrics);this.metrics.isUnicodeFont=!0,this.setInternals(t)},t.prototype.setSymbols=function(e){var t=this.fontInternal;null!=t&&t.setSymbols(e)},Object.defineProperty(t.prototype,"Unicode",{get:function(){return this.isUnicode},enumerable:!0,configurable:!0}),t.prototype.getUnicodeLineWidth=function(e,t,i){t=0;var n=null,r=(new hx).getGlyphIndex(e,this,i.textDirection===UC.RightToLeft,n,!0),o=r.success;if(n=r.glyphs,o&&null!==n)for(var s=this.fontInternal.ttfReader,a=0,l=n.length;a<l;a++){var h=n[a],p=s.getGlyph(h);null!=p&&(t+=p.width)}return{success:o,width:t}},t}(xS),gT=function(){function e(e){this.hideColumnInclude=!1,this.foreignKeyData={},this.parent=e}return e.getQuery=function(e,t){var i=t.generateQuery(!0).requiresCount();return t.isRemote()&&(e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length?i.lazyLoad=[]:i.take(e.pageSettings.totalRecordsCount)),i},e.prototype.getFData=function(e,t){return bl(t,{},e,this.foreignKeyData[t.field])[0]},e.prototype.getGridRowModel=function(e,t,i,n){void 0===n&&(n=0);var r=[],o=t.length;if(o){for(var s=0;s<o;s++,n++){var a={isExpand:!1};a.data=t[s],a.index=n,i.childGrid&&("All"===i.hierarchyPrintMode?a.isExpand=!0:"Expanded"===i.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[n]&&(a.isExpand=i.expandedRows[n].isExpand));var l=new ts(a);l.cells=this.generateCells(e,i),r.push(l)}this.processColumns(r)}return r},e.prototype.generateCells=function(e,t){var i=[];if(t.childGridLevel)for(var n=t.childGridLevel,r=0;n>r;r++)i.push(this.generateCell({},dr.Indent));for(var o=0,s=e;o<s.length;o++){var a=s[o];i.push(this.generateCell(a,dr.Data))}return i},e.prototype.getColumnData=function(e){var t,i=this,n=[],r=e.getForeignKeyColumns();if(r.length){for(var o=0;o<r.length;o++){var s="result"in r[o].dataSource?new yn(r[o].dataSource.result):r[o].dataSource;n.push(s.executeQuery(new on))}t=Promise.all(n).then((function(e){for(var t=0;t<r.length;t++)i.foreignKeyData[r[t].field]=e[t].result}))}return t},e.prototype.getHeaders=function(e,t){this.hideColumnInclude=!!t,this.colDepth=Rl(e);for(var i=[],n=0;n<this.colDepth;n++)i[n]=new ts({}),i[n].cells=[];return i=this.processColumns(i),{rows:i=this.processHeaderCells(i,e),columns:this.generateActualColumns(e)}},e.prototype.getConvertedWidth=function(e){var t=parseFloat(e);return-1!==e.indexOf("%")?this.parent.element.getBoundingClientRect().width*t/100:t},e.prototype.generateActualColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,n=e;i<n.length;i++){var r=n[i];if(!r.commands)if(r.columns){if(r.visible||this.hideColumnInclude)0!==this.getCellCount(r,0)&&this.generateActualColumns(r.columns,t)}else(r.visible||this.hideColumnInclude)&&t.push(r)}return t},e.prototype.processHeaderCells=function(e,t){for(var i=t,n=0;n<i.length;n++)i[n].commands||(e=this.appendGridCells(i[n],e,0));return e},e.prototype.appendGridCells=function(e,t,i){if(e.columns||!1===e.visible&&!this.hideColumnInclude||e.commands){if(e.columns){var n=this.getCellCount(e,0);n&&t[i].cells.push(new is({cellType:dr.StackedHeader,column:e,colSpan:n}));for(var r=void 0,o=0,s=e.columns.length;o<s;o++)e.columns[o].visible&&!r&&(r=!0),t=this.appendGridCells(e.columns[o],t,i+1)}}else t[i].cells.push(this.generateCell(e,dr.Header,this.colDepth-i,i));return t},e.prototype.generateCell=function(e,t,i,n){var r={visible:e.visible,isDataCell:t===dr.Data,column:e,cellType:t,rowSpan:i,index:n};return(!r.rowSpan||r.rowSpan<2)&&delete r.rowSpan,new is(r)},e.prototype.processColumns=function(e){var t=this.parent,i=[];t.enableColumnVirtualization&&(i=t.getColumnIndexesInView());for(var n=0,r=e.length;n<r;n++)if(t.allowGrouping)for(var o=0,s=t.groupSettings.columns.length;o<s;o++)t.enableColumnVirtualization&&-1===i.indexOf(o)||e[n].cells.splice(0,0,this.generateCell({},dr.HeaderIndent));return e},e.prototype.getCellCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getCellCount(e.columns[i],t);else(e.visible||this.hideColumnInclude)&&t++;return t},e.prototype.checkAndExport=function(e,t){Object.keys(e).some((function(t){return!e[t]}))||t()},e.prototype.failureHandler=function(e,t,i){var n=this;return function(){e[t.id]=!0,n.checkAndExport(e,i)}},e.prototype.createChildGrid=function(e,t,i,n){var r=new Pa(this.parent.detailRowModule.getGridModel(e,t,i));e.isPrinting=!1;r.parentDetails={parentID:e.element.id,parentPrimaryKeys:e.getPrimaryKeyFieldNames(),parentKeyField:e.childGrid.queryString,parentKeyFieldValue:a(r.queryString,t.data),parentRowData:t.data};var o=Za("child-grid"),s=ct("div",{id:o,styles:"display: none"});return document.body.appendChild(s),r.id=o,n[o]=!1,{childGrid:r,element:s}},e.prototype.getGridExportColumns=function(e){for(var t=[],i=0,n=e;i<n.length;i++)"checkbox"!==n[i].type&&t.push(n[i]);return t},e}(),fT=function(){function e(e){this.valueFormatter=new Cn(e),this.internationalization=new ee(e)}return e.prototype.returnFormattedValue=function(e,t){return!g(e.value)&&e.value?this.valueFormatter.getFormatFunction(t)(e.value):""},e.prototype.formatCellValue=function(e,t){if(e.isForeignKey&&(e.value=a(e.column.foreignKeyValue,bl(e.column,{},e.value)[0])),"number"===e.column.type&&void 0!==e.column.format&&""!==e.column.format)return e.value?this.internationalization.getNumberFormat({format:e.column.format})(e.value):"";if("boolean"===e.column.type&&""!==e.value)return e.value?"true":"false";if("date"!==e.column.type&&"datetime"!==e.column.type&&"time"!==e.column.type||void 0===e.column.format)return(g(e.column.type)||g(e.value))&&g(e.value)?"":e.value.toString();if("string"==typeof e.value&&(e.value=new Date(e.value)),"string"==typeof e.column.format){var i=void 0,n=e.column.format;return i="date"===e.column.type?t?{type:"date",format:n}:{type:"date",skeleton:n}:"time"===e.column.type?t?{type:"time",format:n}:{type:"time",skeleton:n}:t?{type:"dateTime",format:n}:{type:"dateTime",skeleton:n},this.returnFormattedValue(e,i)}if(e.column.format instanceof Object&&void 0===e.column.format.type)return e.value.toString();var r=void 0;return r="date"===e.column.type?{type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:"time"===e.column.type?{type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:{type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton},this.returnFormattedValue(e,r)},e}(),mT=function(){function e(e){this.hideColumnInclude=!1,this.currentViewData=!1,this.customDataSource=!1,this.isGrouping=!1,this.headerOnPages=[],this.drawPosition={xPosition:0,yPosition:0},this.parent=e,this.helper=new gT(e),this.gridPool={}}return e.prototype.getModuleName=function(){return"PdfExport"},e.prototype.init=function(e){this.exportValueFormatter=new fT(e.locale),this.pdfDocument=void 0,this.hideColumnInclude=!1,this.currentViewData=!1,this.parent=e,this.isGrouping=!1,this.isExporting=!0,e.id=Za("main-grid"),this.gridPool[e.id]=!1,this.pdfPageSettings=new aS},e.prototype.exportWithData=function(e,t,i,n,r,o,s){var a=this;this.init(e),g(t)?this.pdfDocument=new Zx:this.pdfDocument=t,this.processExport(e,n,r,o).then((function(){a.isExporting=!1,e.trigger("pdfExportComplete",a.isBlob?{promise:a.blobPromise}:{}),a.parent.log("exporting_complete",a.getModuleName()),i(a.pdfDocument)})).catch((function(e){s(a.pdfDocument),a.parent.trigger("actionFailure",e)}))},e.prototype.Map=function(e,t,i,n,r){var o=this;this.data=new es(this.parent),this.isBlob=r,this.gridPool={},e.childGrid&&(g(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Tl(e).expandedRows);var s={requestType:"beforePdfExport",cancel:!1,headerPageNumbers:[],gridDrawPosition:{xPosition:0,yPosition:0}};if(!S()){s.gridObject=e}if(e.trigger("beforePdfExport",s),!0===s.cancel)return new Promise((function(e,t){return e()}));if(Oa(t)&&Aa(t,e),this.headerOnPages=s.headerPageNumbers,this.drawPosition=s.gridDrawPosition,this.parent.log("exporting_begin",this.getModuleName()),g(t)||g(t.dataSource)){if(g(t)||"CurrentPage"!==t.exportType){var a=[];return a.push(this.data.getData({},gT.getQuery(e,this.data))),a.push(this.helper.getColumnData(e)),new Promise((function(r,s){Promise.all(a).then((function(a){o.init(e),g(n)?o.pdfDocument=new Zx:o.pdfDocument=n,o.processExport(e,a[0],t,i).then((function(){o.isExporting=!1,e.trigger("pdfExportComplete",o.isBlob?{promise:o.blobPromise}:{}),o.parent.log("exporting_complete",o.getModuleName()),r(o.pdfDocument)})).catch((function(e){s(o.pdfDocument),o.parent.trigger("actionFailure",e)}))}))}))}return new Promise((function(r,s){o.exportWithData(e,n,r,o.parent.getCurrentViewRecords(),t,i,s)}))}return t.dataSource instanceof yn||(t.dataSource=new yn(t.dataSource)),new Promise((function(r,s){t.dataSource.executeQuery(new on).then((function(a){o.exportWithData(e,n,r,a,t,i,s)}))}))},e.prototype.processExport=function(e,t,i,n){var r,o=this,s=this.pdfDocument.sections.add();this.processSectionExportProperties(s,i);var a=s.pages.add();return new Promise((function(n,s){r=o.processGridExport(e,t,i),o.globalResolve=n,o.gridPool[e.id]=!0,o.helper.checkAndExport(o.gridPool,o.globalResolve)})).then((function(){return r.draw(a,o.drawPosition.xPosition,o.drawPosition.yPosition),o.drawHeader(i),n||(o.isBlob?o.blobPromise=o.pdfDocument.save():!g(i)&&i.fileName?o.pdfDocument.save(i.fileName):o.pdfDocument.save("Export.pdf"),o.pdfDocument.destroy(),delete e.expandedRows),o.pdfDocument}))},e.prototype.processSectionExportProperties=function(e,t){return g(t)||g(t.pageOrientation)&&g(t.pageSize)||(this.pdfPageSettings.orientation="Landscape"===t.pageOrientation?bC.Landscape:bC.Portrait,this.pdfPageSettings.size=this.getPageSize(t.pageSize),e.setPageSettings(this.pdfPageSettings)),e},e.prototype.processGridExport=function(e,t,i){var n=!0;g(i)||(this.gridTheme=i.theme,S()&&!g(this.gridTheme)&&this.getGridPdfFont(this.gridTheme),n=!!g(i.allowHorizontalOverflow)||i.allowHorizontalOverflow);var r=new gT(e),o=this.processExportProperties(i,t.result),s=Oa(i)?_a(i.columns,e.enableColumnVirtualization):r.getGridExportColumns(e.columns);s=s.filter((function(e){return g(e.commands)}));var a=!1;e.groupSettings.columns.length&&(a=!0),e.childGrid&&!g(i)&&(e.hierarchyPrintMode=i.hierarchyExportMode||"Expanded");var l=new Zk,h=this.getHeaderThemeStyle(),p=h.border,d=h.font,c=h.brush,u=r.getHeaders(s,this.hideColumnInclude),f=u.columns;l=this.processGridHeaders(e.groupSettings.columns.length,l,u.rows,f,p,d,c,e,n,s),this.setColumnProperties(f,l,r,e,n);var m=this.getSummaryCaptionThemeStyle();if(!g(o)&&o.length){if(a?(g(m.border)||(p=m.border),this.processGroupedRecords(l,o,f,e,p,0,m.font,m.brush,m.backgroundBrush,t,i,r,0)):this.processRecord(p,f,e,o,l,0,i,r,0),!g(t.aggregates)){var y=new as(e),v=void 0;e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo(),v=this.customDataSource?y.generateRows(o,t.aggregates):this.currentViewData?y.generateRows(this.parent.getCurrentViewRecords(),t.aggregates):a?y.generateRows(o.records,t.aggregates):y.generateRows(t.result,t.aggregates,null,null,s),this.processAggregates(v,l,p,m.font,m.brush,m.backgroundBrush,!1)}}else l.rows.addRow().style.setBorder(p);return l},e.prototype.getSummaryCaptionThemeStyle=function(){if(g(this.gridTheme)||g(this.gridTheme.caption))return{font:new Qx(YC.Helvetica,9.75),brush:new uS(new pS(0,0,0)),backgroundBrush:new uS(new pS(246,246,246))};var e=g(this.gridTheme.caption.fontSize)?9.75:this.gridTheme.caption.fontSize,t=g(this.gridTheme.caption.fontName)?YC.Helvetica:this.getFontFamily(this.gridTheme.caption.fontName),i=this.getFontStyle(this.gridTheme.caption),n=new pS(0,0,0);if(!g(this.gridTheme.caption.fontColor)){var r=this.hexToRgb(this.gridTheme.caption.fontColor);n=new pS(r.r,r.g,r.b)}var o=this.gridTheme.caption.border?this.getBorderStyle(this.gridTheme.caption.border):null,s=new Qx(t,e,i);return g(this.gridTheme.caption.font)||(s=this.gridTheme.caption.font),{font:s,brush:new uS(n),backgroundBrush:new uS(new pS(246,246,246)),border:o}},e.prototype.getGridPdfFont=function(e){var t=0;if(e.header&&e.header.font){var i=e.header.font.fontFamily,n=e.header.font.fontSize,r=e.header.font.fontStyle;if(t=g(KC[r])?0:KC[r],e.header.font.isTrueType)e.header.font=new uT(i,n,t);else{var o=g(i)?YC.Helvetica:this.getFontFamily(i);e.header.font=new Qx(o,n,t)}}if(e.caption&&e.caption.font){var s=e.caption.font.fontFamily,a=e.caption.font.fontSize,l=e.caption.font.fontStyle;if(t=g(KC[l])?0:KC[l],e.caption.font.isTrueType)e.caption.font=new uT(s,a,t);else{var h=g(s)?YC.Helvetica:this.getFontFamily(s);e.caption.font=new Qx(h,a,t)}}if(e.record&&e.record.font){var p=e.record.font.fontFamily,d=e.record.font.fontSize,c=e.record.font.fontStyle;if(t=g(KC[c])?0:KC[c],e.record.font.isTrueType)e.record.font=new uT(p,d,t);else{var u=g(p)?YC.Helvetica:this.getFontFamily(p);e.record.font=new Qx(u,d,t)}}},e.prototype.getHeaderThemeStyle=function(){var e=new $x;if(g(this.gridTheme)||g(this.gridTheme.header))return e.all=new gS(new pS(234,234,234)),{border:e,font:new Qx(YC.Helvetica,10.5),brush:new uS(new pS(102,102,102))};var t=g(this.gridTheme.header.fontName)?YC.Helvetica:this.getFontFamily(this.gridTheme.header.fontName),i=this.getFontStyle(this.gridTheme.header),n=g(this.gridTheme.header.fontSize)?10.5:this.gridTheme.header.fontSize,r=new pS;if(!g(this.gridTheme.header.fontColor)){var o=this.hexToRgb(this.gridTheme.header.fontColor);r=new pS(o.r,o.g,o.b)}var s=new Qx(t,n,i);return g(this.gridTheme.header.font)||(s=this.gridTheme.header.font),{border:this.getBorderStyle(this.gridTheme.header.border),font:s,brush:new uS(r)}},e.prototype.processGroupedRecords=function(e,t,i,n,r,o,s,a,l,h,p,d,c){for(var u=this,f=o,m=function(o){var m=e.rows.addRow(),v=n.getColumnByField(o.field),b={value:o.key,column:v,style:void 0,isForeignKey:v.isForeignColumn()},w={captionText:y.parent.getColumnByField(o.field).headerText+": "+(v.enableGroupByFormat?o.key:y.exportValueFormatter.formatCellValue(b))+" - "+o.count+(t.count>1?" items":" item"),type:"PDF"};y.parent.trigger("exportGroupCaption",w,(function(y){var v;m.cells.getCell(f).value=y.captionText,m.cells.getCell(f+1).style.stringFormat=new fS(FC.Left),m.style.setBorder(r),m.style.setFont(s),m.style.setTextBrush(a),m.style.setBackgroundBrush(l);var b=new hs(n);if(v=g(o.items.records)?b.generateRows(o.items,o):b.generateRows(o.items.records,o),g(v)||0!==v.length||(m.cells.getCell(f+1).columnSpan=e.columns.count-(f+1)),!g(t.childLevels)&&t.childLevels>0){u.processAggregates(v,e,r,s,a,l,!0,m,f),u.processGroupedRecords(e,o.items,i,n,r,f+1,s,a,l,h,p,d,c),v=new ls(n).generateRows(o.items.records,o),u.processAggregates(v,e,r,s,a,l,!1)}else{u.processAggregates(v,e,r,s,a,l,!0,m,f),c=u.processRecord(r,i,n,o.items,e,f+1,p,d,c),v=new ls(n).generateRows(o.items,o);u.processAggregates(v,e,r,s,a,l,!1,null,null,!0)}}))},y=this,v=0,b=t;v<b.length;v++){m(b[v])}},e.prototype.processGridHeaders=function(e,t,i,n,r,o,s,a,l,h){var p=this,d=n.length+e,c=Rl(h),u=h,f=0;this.parent.allowGrouping&&(f=this.parent.groupSettings.columns.length),t.columns.add(d),t.headers.add(i.length);var m=function(e,n,a,l,h){var d=t.headers.getHeader(e),c=d.cells.getCell(n),u=i[e].cells[n];g(a.headerTextAlign)||(c.style.stringFormat=p.getHorizontalAlignment(a.headerTextAlign)),l>0&&(c.rowSpan=l,c.style.stringFormat=p.getVerticalAlignment("Bottom",c.style.stringFormat,a.textAlign)),h>0&&(c.columnSpan=h),d.style.setBorder(r),d.style.setFont(o),d.style.setTextBrush(s),c.value=a.headerText,g(u)||u.cellType!==dr.HeaderIndent&&u.cellType!==dr.DetailHeader||(c.value="",c.width=20);var f={cell:c,gridCell:u,style:c.style};p.parent.trigger("pdfHeaderQueryCellInfo",f)},y=function(e,t,i,n,r,o){for(var s=0,a=0;a<e.length;a++)if(o&&(n=s=s+i+(0===a?0:-1),i=0),e[a].columns&&e[a].columns.length){var l=y(e[a].columns,t-1,0,a+n,r+1,!1);m(r,a+n,e[a],0,l),i+=l,n=n+l-1}else(e[a].visible||p.hideColumnInclude)&&(i++,m(r,a+n+f,e[a],t,0));return i};return y(u,c,0,0,0,!0),t.columns.count>=6&&l&&(t.style.allowHorizontalOverflow=!0),t},e.prototype.processExportProperties=function(e,t){if(g(e))this.currentViewData=!1,this.customDataSource=!1;else{g(e.theme)||(this.gridTheme=e.theme);var i=this.pdfPageSettings.size;if(this.drawHeader(e),!g(e.footer)){var n=e.footer,r=new PC(0,i.width-80-.75*n.fromBottom),o=new IC(i.width-80,.75*n.height),s=new MC(r,o);this.pdfDocument.template.bottom=this.drawPageTemplate(new $k(s),n)}g(e.includeHiddenColumn)||this.isGrouping||(this.hideColumnInclude=e.includeHiddenColumn),g(e.dataSource)?g(e.exportType)?(this.currentViewData=!1,this.customDataSource=!1):"CurrentPage"===e.exportType?(t=this.parent.currentViewData,this.currentViewData=!0,this.customDataSource=!1):(this.currentViewData=!1,this.customDataSource=!1):(e.dataSource instanceof yn||(t=e.dataSource),this.customDataSource=!0,this.currentViewData=!1)}return t},e.prototype.drawHeader=function(e){var t=this,i=this.pdfPageSettings.size;if(!g(e)&&!g(e.header)){var n=e.header,r=new PC(0,n.fromTop),o=new IC(i.width-80,.75*n.height),s=new MC(r,o);if(this.headerOnPages.length){var a=this.drawPageTemplate(new $k(s),n);this.headerOnPages.filter((function(e){e-1>=0&&e-1<t.pdfDocument.pages.count-1&&t.pdfDocument.pages.getPageByIndex(e-1).graphics.drawPdfTemplate(a.template,new PC(0,0))}))}else this.pdfDocument.template.top=this.drawPageTemplate(new $k(s),n)}},e.prototype.drawPageTemplate=function(e,t){for(var i=0,n=t.contents;i<n.length;i++){var r=n[i];switch(this.processContentValidation(r),r.type){case"Text":if(""===r.value||void 0===r.value||null===r.value||"string"!=typeof r.value)throw new Error("please enter the valid input value in text content...");this.drawText(e,r);break;case"PageNumber":this.drawPageNumber(e,r);break;case"Image":if(void 0===r.src||null===r.src||""===r.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(e,r);break;case"Line":this.drawLine(e,r);break;default:throw new Error("Please set valid content type...")}}return e},e.prototype.processContentValidation=function(e){if(void 0===e.type||null===e.type)throw new Error("please set valid content type...");if("Line"===e.type){if(void 0===e.points||null===e.points)throw new Error("please enter valid points in "+e.type+" content...");if(void 0===e.points.x1||null===e.points.x1||"number"!=typeof e.points.x1)throw new Error("please enter valid x1 co-ordinate in "+e.type+" points...");if(void 0===e.points.y1||null===e.points.y1||"number"!=typeof e.points.y1)throw new Error("please enter valid y1 co-ordinate in "+e.type+" points...");if(void 0===e.points.x2||null===e.points.x2||"number"!=typeof e.points.x2)throw new Error("please enter valid x2 co-ordinate in "+e.type+" points...");if(void 0===e.points.y2||null===e.points.y2||"number"!=typeof e.points.y2)throw new Error("please enter valid y2 co-ordinate in "+e.type+" points...")}else{if(void 0===e.position||null===e.position)throw new Error("please enter valid position in "+e.type+" content...");if(void 0===e.position.x||null===e.position.x||"number"!=typeof e.position.x)throw new Error("please enter valid x co-ordinate in "+e.type+" position...");if(void 0===e.position.y||null===e.position.y||"number"!=typeof e.position.y)throw new Error("please enter valid y co-ordinate in "+e.type+" position...")}},e.prototype.drawText=function(e,t){var i=this.getFont(t),n=this.getBrushFromContent(t),r=null;if(!g(t.style.textPenColor)){var o=this.hexToRgb(t.style.textPenColor);r=new gS(new pS(o.r,o.g,o.b))}null==n&&null==r&&(n=new uS(new pS(0,0,0)));var s=t.value.toString(),a=.75*t.position.x,l=.75*t.position.y,h=new fS,p=this.setContentFormat(t,h);null===p||g(p.format)||g(p.size)?e.graphics.drawString(s,i,r,n,a,l,h):e.graphics.drawString(s,i,r,n,a,l,p.size.width,p.size.height,p.format)},e.prototype.drawPageNumber=function(e,t){var i=this.getFont(t),n=null;if(g(t.style.textBrushColor))n=new uS(new pS(0,0,0));else{var r=this.hexToRgb(t.style.textBrushColor);n=new uS(new pS(r.r,r.g,r.b))}var o,s,a=new oT(i,n);if(a.numberStyle=this.getPageNumberStyle(t.pageNumberType),g(t.format))o=new aT(i,n,s="{0}",a);else if(-1!==t.format.indexOf("$total")&&-1!==t.format.indexOf("$current"))(l=new dT(i)).numberStyle=this.getPageNumberStyle(t.pageNumberType),s=t.format.indexOf("$total")>t.format.indexOf("$current")?(s=t.format.replace("$current","0")).replace("$total","1"):(s=t.format.replace("$current","1")).replace("$total","0"),o=new aT(i,n,s,a,l);else if(-1!==t.format.indexOf("$current")&&-1===t.format.indexOf("$total"))s=t.format.replace("$current","0"),o=new aT(i,n,s,a);else{var l=new dT(i);s=t.format.replace("$total","0"),o=new aT(i,n,s,l)}var h=.75*t.position.x,p=.75*t.position.y,d=this.setContentFormat(t,o.stringFormat);null===d||g(d.format)||g(d.size)||(o.stringFormat=d.format,o.bounds=new MC(h,p,d.size.width,d.size.height)),o.draw(e.graphics,h,p)},e.prototype.drawImage=function(e,t){var i=.75*t.position.x,n=.75*t.position.y,r=g(t.size)?void 0:.75*t.size.width,o=g(t.size)?void 0:.75*t.size.height,s=new wx(t.src);g(r)?e.graphics.drawImage(s,i,n):e.graphics.drawImage(s,i,n,r,o)},e.prototype.drawLine=function(e,t){var i=.75*t.points.x1,n=.75*t.points.y1,r=.75*t.points.x2,o=.75*t.points.y2,s=this.getPenFromContent(t);g(t.style)||null===t.style||(g(t.style.penSize)||null===t.style.penSize||"number"!=typeof t.style.penSize||(s.width=.75*t.style.penSize),s.dashStyle=this.getDashStyle(t.style.dashStyle)),e.graphics.drawLine(s,i,n,r,o)},e.prototype.processAggregates=function(e,t,i,n,r,o,s,a,l,h){for(var p=0,c=e;p<c.length;p++){for(var u=c[p],f=-1,m=0,y=!0,v=[],b=0;b<t.columns.count;b++){var w=u.cells[m];if(w.cellType!==dr.DetailFooterIntent){if(!this.hideColumnInclude){for(;void 0===w.visible;)if(w.cellType!==dr.DetailFooterIntent){if(g(a))v.push("");else if(g(a.cells.getCell(b).value))v.push("");else{var C={row:u,type:gr.GroupCaption,style:a.cells};this.parent.trigger("pdfAggregateQueryCellInfo",C),v.push(""),v.push(a.cells.getCell(b).value),y=!1,s||(b+=1)}b+=1,m+=1,w=u.cells[m]}for(;!g(w.visible)&&!w.visible;)m+=1,w=u.cells[m]}if(w.isDataCell){var S={};if(g(w.column.footerTemplate)&&g(w.column.groupCaptionTemplate)&&g(w.column.groupFooterTemplate)){g(x=this.getSummaryWithoutTemplate(u.data[w.column.field]))||v.push(x)}else{var x;S=(x=this.getTemplateFunction(S,b,f,w)).templateFunction,f=x.leastCaptionSummaryIndex;var k=S[d(dr,w.cellType)](u.data[w.column.field?w.column.field:w.column.columnName]);v.push(k[0].textContent),y=!1}}else v.push("");y&&""!==v[b]&&!g(v[b])&&null!==v[b]&&(y=!1),m+=1}else b--,m++}if(s)for(b=this.parent.groupSettings.columns.length+1;b<v.length-1;b++)v[b]=v[b+1];if(!y)if(s)for(b=0;b<t.columns.count;b++)a.cells.getCell(b).value=v[b].toString(),b===l+1&&-1!==f&&1!==f?a.cells.getCell(b).columnSpan=f-(l+1):b===l+1&&-1===f&&(a.cells.getCell(b).columnSpan=t.columns.count-(l+1));else{var T=t.rows.addRow();T.style.setBorder(i),T.style.setFont(n),T.style.setTextBrush(r),T.style.setBackgroundBrush(o);C={row:u,type:h?gr.GroupFooter:gr.Footer,style:T.cells};this.parent.trigger("pdfAggregateQueryCellInfo",C);for(var b=0;b<t.columns.count;b++)T.cells.getCell(b).value=v[b].toString()}}},e.prototype.getTemplateFunction=function(e,t,i,n){return g(n.column.footerTemplate)||n.cellType!==dr.Summary?g(n.column.groupCaptionTemplate)?e[d(dr,dr.GroupSummary)]=Ge(n.column.groupFooterTemplate):(-1===i&&(i=t),e[d(dr,dr.CaptionSummary)]=Ge(n.column.groupCaptionTemplate)):e[d(dr,dr.Summary)]=Ge(n.column.footerTemplate),{templateFunction:e,leastCaptionSummaryIndex:i}},e.prototype.getSummaryWithoutTemplate=function(e){return g(e.Sum)?g(e.Average)?g(e.Max)?g(e.Min)?g(e.Count)?g(e.TrueCount)?g(e.FalseCount)?g(e.Custom)?void 0:e.Custom:e.FalseCount:e.TrueCount:e.Count:e.Min:e.Max:e.Average:e.Sum},e.prototype.setColumnProperties=function(e,t,i,n,r){for(var o=n.groupSettings.columns.length,s=0;s<o;s++)t.columns.getColumn(s).width=20;for(s=0;s<e.length;s++)g(e[s].textAlign)||(t.columns.getColumn(s+o).format=this.getHorizontalAlignment(e[s].textAlign)),t.style.allowHorizontalOverflow&&!g(e[s].width)&&r&&(t.columns.getColumn(s+o).width="number"==typeof e[s].width?.75*e[s].width:.75*i.getConvertedWidth(e[s].width))},e.prototype.setRecordThemeStyle=function(e,t){if(g(this.gridTheme)||g(this.gridTheme.record))e.style.setTextBrush(new uS(new pS(0,0,0)));else{var i=g(this.gridTheme.record.fontName)?YC.Helvetica:this.getFontFamily(this.gridTheme.record.fontName),n=g(this.gridTheme.record.fontSize)?9.75:this.gridTheme.record.fontSize,r=this.getFontStyle(this.gridTheme.record),o=new Qx(i,n,r);g(this.gridTheme.record.font)||(o=this.gridTheme.record.font),e.style.setFont(o);var s=new pS;if(!g(this.gridTheme.record.fontColor)){var a=this.hexToRgb(this.gridTheme.record.fontColor);s=new pS(a.r,a.g,a.b)}e.style.setTextBrush(new uS(s))}var l=this.gridTheme&&this.gridTheme.record&&this.gridTheme.record.border?this.getBorderStyle(this.gridTheme.record.border):t;return e.style.setBorder(l),e},e.prototype.processRecord=function(e,t,i,n,r,o,s,l,h){for(var p=0,d=l.getGridRowModel(t,n,i,h);p<d.length;p++){var c=d[p];h++;for(var u=this.setRecordThemeStyle(r.rows.addRow(),e),f=c.cells.length,m=0;m<f;m++){var y=c.cells[m];if(y.cellType===dr.Data){var v=y.column,b=v.field,w=g(b)?"":v.valueAccessor(b,c.data,v),C=g(w)?"":w,S=void 0;if(v.isForeignColumn&&v.isForeignColumn()&&(S=l.getFData(C,v),C=a(v.foreignKeyValue,S)),(I={data:c.data,value:C,column:v,style:void 0,colSpan:1,cell:k=u.cells.getCell(m)}).value=this.exportValueFormatter.formatCellValue(I,i.isServerRendered),this.parent.trigger("pdfQueryCellInfo",I),k.value=I.value,g(I.style)||this.processCellStyle(k,I),I.colSpan>1){m+1+I.colSpan>u.cells.count&&(I.colSpan=u.cells.count-(m+1)),k.columnSpan=I.colSpan;for(var x=1;x<k.columnSpan;x++){u.cells.getCell(m+x).value=""}m+=I.colSpan-1}}}if(c.isExpand){var k,T=this.setRecordThemeStyle(r.rows.addRow(),e);(k=T.cells.getCell(o)).columnSpan=T.cells.count-o,k.style.cellPadding=new ek(10,10,10,10),i.isPrinting=!0;var D=!g(s)&&s.exportType?s.exportType:"AllPages",E=this.helper.createChildGrid(i,c,D,this.gridPool),R=E.childGrid,P=E.element;R.actionFailure=l.failureHandler(this.gridPool,R,this.globalResolve);var I={childGrid:R,row:c,cell:k,exportProperties:s};this.parent.trigger("exportdetaildatabound",I),R.beforeDataBound=this.childGridCell(k,R,s),R.appendTo(P)}this.parent.notify("export-RowDataBound",{type:"pdf",rowObj:c})}return h},e.prototype.childGridCell=function(e,t,i){var n=this;return function(r){return t.beforeDataBound=null,r.cancel=!0,e.value=n.processGridExport(t,r,i),t.destroy(),wt(t.element),n.gridPool[t.id]=!0,n.helper.checkAndExport(n.gridPool,n.globalResolve),e}},e.prototype.processCellStyle=function(e,t){if(!g(t.style.backgroundColor)){var i=this.hexToRgb(t.style.backgroundColor);e.style.backgroundBrush=new uS(new pS(i.r,i.g,i.b))}if(g(t.style.textAlignment)||(e.style.stringFormat=this.getHorizontalAlignment(t.style.textAlignment)),g(t.style.cellPadding)||(e.style.cellPadding=t.style.cellPadding),g(t.style.verticalAlignment)||(e.style.stringFormat=this.getVerticalAlignment(t.style.verticalAlignment,e.style.stringFormat)),!g(t.style.textBrushColor)){var n=this.hexToRgb(t.style.textBrushColor);e.style.textBrush=new uS(new pS(n.r,n.g,n.b))}if(!g(t.style.textPenColor)){var r=this.hexToRgb(t.style.textPenColor);e.style.textPen=new gS(new pS(r.r,r.g,r.b))}if(g(t.style.fontFamily)&&g(t.style.fontSize)&&g(t.style.bold)&&g(t.style.italic)&&g(t.style.underline)&&g(t.style.strikeout)||(e.style.font=this.getFont(t)),!g(t.style.border)){var o=new $x,s=t.style.border.width,a=g(s)||"number"!=typeof s?void 0:.75*s,l=new pS(196,196,196);if(!g(t.style.border.color)){var h=this.hexToRgb(t.style.border.color);l=new pS(h.r,h.g,h.b)}var p=new gS(l,a);g(t.style.border.dashStyle)||(p.dashStyle=this.getDashStyle(t.style.border.dashStyle)),o.all=p,e.style.borders=o}g(t.style.paragraphIndent)||(e.style.stringFormat=new fS,e.style.stringFormat.paragraphIndent=t.style.paragraphIndent)},e.prototype.getHorizontalAlignment=function(e,t){switch(void 0===t&&(t=new fS),e){case"Right":t.alignment=FC.Right;break;case"Center":t.alignment=FC.Center;break;case"Justify":t.alignment=FC.Justify;break;case"Left":t.alignment=FC.Left}return t},e.prototype.getVerticalAlignment=function(e,t,i){switch(void 0===t&&(t=new fS,t=this.getHorizontalAlignment(i,t)),e){case"Bottom":t.lineAlignment=BC.Bottom;break;case"Middle":t.lineAlignment=BC.Middle;break;case"Top":t.lineAlignment=BC.Top}return t},e.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},e.prototype.getFont=function(e){if(e.font)return e.font;var t=g(e.style.fontSize)?9.75:.75*e.style.fontSize,i=g(e.style.fontFamily)?YC.TimesRoman:this.getFontFamily(e.style.fontFamily),n=KC.Regular;return!g(e.style.bold)&&e.style.bold&&(n|=KC.Bold),!g(e.style.italic)&&e.style.italic&&(n|=KC.Italic),!g(e.style.underline)&&e.style.underline&&(n|=KC.Underline),!g(e.style.strikeout)&&e.style.strikeout&&(n|=KC.Strikeout),new Qx(i,t,n)},e.prototype.getPageNumberStyle=function(e){switch(e){case"LowerLatin":return 2;case"LowerRoman":return 3;case"UpperLatin":return 4;case"UpperRoman":return 5;default:return 1}},e.prototype.setContentFormat=function(e,t){if(!g(e.size)){var i=.75*e.size.width,n=.75*e.size.height;if(t=new fS(FC.Left,BC.Middle),!g(e.style.hAlign))switch(e.style.hAlign){case"Right":t.alignment=FC.Right;break;case"Center":t.alignment=FC.Center;break;case"Justify":t.alignment=FC.Justify;break;default:t.alignment=FC.Left}return g(e.style.vAlign)||(t=this.getVerticalAlignment(e.style.vAlign,t)),{format:t,size:new IC(i,n)}}return null},e.prototype.getPageSize=function(e){switch(e){case"Letter":return new IC(612,792);case"Note":return new IC(540,720);case"Legal":return new IC(612,1008);case"A0":return new IC(2380,3368);case"A1":return new IC(1684,2380);case"A2":return new IC(1190,1684);case"A3":return new IC(842,1190);case"A5":return new IC(421,595);case"A6":return new IC(297,421);case"A7":return new IC(210,297);case"A8":return new IC(148,210);case"A9":return new IC(105,148);case"B0":return new IC(2836,4008);case"B1":return new IC(2004,2836);case"B2":return new IC(1418,2004);case"B3":return new IC(1002,1418);case"B4":return new IC(709,1002);case"B5":return new IC(501,709);case"Archa":return new IC(648,864);case"Archb":return new IC(864,1296);case"Archc":return new IC(1296,1728);case"Archd":return new IC(1728,2592);case"Arche":return new IC(2592,3456);case"Flsa":return new IC(612,936);case"HalfLetter":return new IC(396,612);case"Letter11x17":return new IC(792,1224);case"Ledger":return new IC(1224,792);default:return new IC(595,842)}},e.prototype.getDashStyle=function(e){switch(e){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},e.prototype.getPenFromContent=function(e){var t=new gS(new pS(0,0,0));if(!g(e.style)&&null!==e.style&&!g(e.style.penColor)){var i=this.hexToRgb(e.style.penColor);t=new gS(new pS(i.r,i.g,i.b))}return t},e.prototype.getBrushFromContent=function(e){var t=null;if(!g(e.style.textBrushColor)){var i=this.hexToRgb(e.style.textBrushColor);t=new uS(new pS(i.r,i.g,i.b))}return t},e.prototype.hexToRgb=function(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color...");e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},e.prototype.getFontStyle=function(e){var t=KC.Regular;return!g(e)&&e.bold&&(t|=KC.Bold),!g(e)&&e.italic&&(t|=KC.Italic),!g(e)&&e.underline&&(t|=KC.Underline),!g(e)&&e.strikeout&&(t|=KC.Strikeout),t},e.prototype.getBorderStyle=function(e){var t=new $x;if(g(e))t.all=new gS(new pS(234,234,234));else{var i=e.width,n=g(i)||"number"!=typeof i?void 0:.75*i,r=new pS(196,196,196);if(!g(e.color)){var o=this.hexToRgb(e.color);r=new pS(o.r,o.g,o.b)}var s=new gS(r,n);g(e.dashStyle)||(s.dashStyle=this.getDashStyle(e.dashStyle)),t.all=s}return t},e.prototype.destroy=function(){},e}(),yT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yT(t,e),t}(Array),bT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wT=function(){this.isSummaryRowBelow=!0,this.showGridLines=!0},CT=function(){},ST=function(){},xT=function(){},kT=function(){},TT=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.add=function(e){for(var n=!1,r=0,o=0,s=i;o<s.length;o++){var a=s[o];if(t.isIntersecting(a,e)){var l=new kT;l.x=Math.min(a.x,e.x),l.y=Math.min(a.Y,e.y),l.width=Math.max(a.Width+a.X,e.width+e.x),l.height=Math.max(a.Height+a.Y,e.height+e.y),l.ref=i[r].ref.split(":")[0]+":"+e.ref.split(":")[1],i[r]=l,e=l,n=!0}r++}return n||i.push(e),e},i}return bT(t,e),t.isIntersecting=function(e,t){return e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height},t}(Array),DT=function(){this.numFmtId=0,this.backColor="none",this.fontName="Calibri",this.fontSize=14,this.fontColor="#000000",this.italic=!1,this.bold=!1,this.underline=!1,this.wrapText=!1,this.hAlign="general",this.vAlign="bottom",this.indent=0,this.rotation=0,this.numberFormat="GENERAL",this.type="datetime",this.borders=new AT,this.isGlobalStyle=!1},ET=function(){this.sz=14,this.name="Calibri",this.u=!1,this.b=!1,this.i=!1,this.color="FF000000"},RT=function(){},PT=function(){},IT=function(){},MT=function(){this.name="Normal",this.xfId=0},LT=function(e,t){this.numFmtId=e,this.formatCode=t},OT=function(e,t){this.lineStyle=e,this.color=t},AT=function(){this.left=new OT("none","#FFFFFF"),this.right=new OT("none","#FFFFFF"),this.top=new OT("none","#FFFFFF"),this.bottom=new OT("none","#FFFFFF"),this.all=new OT("none","#FFFFFF")},BT=function(){},FT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),NT=function(){},HT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.add=function(e){for(var i=!1,n=0,r=0,o=t;r<o.length;r++){o[r].index===e.index&&(t[n]=e,i=!0),n++}i||t.push(e)},t}return FT(t,e),t}(Array),VT=function(){},jT=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zT=function(){},qT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.add=function(e){for(var i=!1,n=0,r=0,o=t;r<o.length;r++){o[r].index===e.index&&(t[n]=e,i=!0),n++}i||t.push(e)},t}return jT(t,e),t}(Array),WT=[],_T=function(){function e(){0===WT.length&&e.initCrc32Table(),this.files=[],this.level="Normal",Ww.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(e.prototype,"compressionLevel",{get:function(){return this.level},set:function(e){this.level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return void 0===this.files?0:this.files.length},enumerable:!0,configurable:!0}),e.prototype.addItem=function(e){if(null==e)throw new Error("ArgumentException: item cannot be null or undefined");for(var t=0;t<this.files.length;t++){var i=this.files[t];if(i instanceof GT&&i.name===e.name)throw new Error("item with same name already exist")}this.files.push(e)},e.prototype.addDirectory=function(e){if(null==e)throw new Error("ArgumentException: string cannot be null or undefined");if(0===e.length)throw new Error("ArgumentException: string cannot be empty");if("/"!==e.slice(-1)&&(e+="/"),-1!==this.files.indexOf(e))throw new Error("item with same name already exist");this.files.push(e)},e.prototype.getItem=function(e){if(e>=0&&e<this.files.length)return this.files[e]},e.prototype.contains=function(e){return-1!==this.files.indexOf(e)},e.prototype.save=function(e){if(null==e||0===e.length)throw new Error("ArgumentException: fileName cannot be null or undefined");if(0===this.files.length)throw new Error("InvalidOperation");var t=this;return new Promise((function(i,n){t.saveInternal(e,!1).then((function(){i(t)}))}))},e.prototype.saveAsBlob=function(){var e=this;return new Promise((function(t,i){e.saveInternal("",!0).then((function(e){t(e)}))}))},e.prototype.saveInternal=function(e,t){var i=this,n=this;return new Promise((function(r,o){for(var s=[],a=0,l=0;l<n.files.length;l++){i.getCompressedData(i.files[l]).then((function(i){if(a=n.constructZippedObject(s,i,a,i.isDirectory),s.length===n.files.length){var o=n.writeZippedContent(e,s,a,t);r(o)}}))}}))},e.prototype.destroy=function(){if(void 0!==this.files&&this.files.length>0){for(var e=0;e<this.files.length;e++){var t=this.files[e];t instanceof GT&&t.destroy(),t=void 0}this.files=[]}this.files=void 0,this.level=void 0},e.prototype.getCompressedData=function(e){var t=this;return new Promise((function(i,n){if(e instanceof GT){var r=new FileReader;r.onload=function(){var n=new Uint8Array(r.result),o={fileName:e.name,crc32Value:0,compressedData:[],compressedSize:void 0,uncompressedDataSize:n.length,compressionType:void 0,isDirectory:!1};if("Normal"===t.level){t.compressData(n,o,WT);for(var s=0,a=0;a<o.compressedData.length;a++)s+=o.compressedData[a].length;o.compressedSize=s,o.compressionType="\b\0"}else o.compressedSize=n.length,o.crc32Value=t.calculateCrc32Value(0,n,WT),o.compressionType="\0\0",o.compressedData.push(n);i(o)},r.readAsArrayBuffer(e.data)}else{i({fileName:e,crc32Value:0,compressedData:"",compressedSize:0,uncompressedDataSize:0,compressionType:"\0\0",isDirectory:!0})}}))},e.prototype.compressData=function(e,t,i){var n=new lC(!0),r=0,o=0;do{if(r>=e.length){n.close();break}o=Math.min(e.length,r+16384);var s=e.subarray(r,o);t.crc32Value=this.calculateCrc32Value(t.crc32Value,s,i),n.write(s,0,o-r),r=o}while(r<=e.length);t.compressedData=n.compressedData,n.destroy()},e.prototype.constructZippedObject=function(e,t,i,n){var r=0,o=new Date;n&&(r|=16),r|=0;var s=this.writeHeader(t,o),a="PK"+s+t.fileName,l=this.writeCentralDirectory(t,s,i,r);return e.push({localHeader:a,centralDir:l,compressedData:t}),i+a.length+t.compressedSize},e.prototype.writeHeader=function(e,t){var i="";return i+="\n\0\0\0",i+=e.compressionType,i+=this.getBytes(this.getModifiedTime(t),2),i+=this.getBytes(this.getModifiedDate(t),2),i+=this.getBytes(e.crc32Value,4),i+=this.getBytes(e.compressedSize,4),i+=this.getBytes(e.uncompressedDataSize,4),i+=this.getBytes(e.fileName.length,2),i+=this.getBytes(0,2)},e.prototype.writeZippedContent=function(e,t,i,n){for(var r=0,o=[],s=0;s<t.length;s++){var a=t[s];for(r+=a.centralDir.length,o.push(this.getArrayBuffer(a.localHeader));a.compressedData.compressedData.length;)o.push(a.compressedData.compressedData.shift().buffer)}for(s=0;s<t.length;s++)o.push(this.getArrayBuffer(t[s].centralDir));o.push(this.getArrayBuffer(this.writeFooter(t,r,i)));var l=new Blob(o,{type:"application/zip"});return n||Ww.save(e,l),l},e.prototype.writeCentralDirectory=function(e,t,i,n){return"PK"+this.getBytes(20,2)+t+this.getBytes(0,2)+"\0\0\0\0"+this.getBytes(n,4)+this.getBytes(i,4)+e.fileName},e.prototype.writeFooter=function(e,t,i){return"PK\0\0\0\0"+this.getBytes(e.length,2)+this.getBytes(e.length,2)+this.getBytes(t,4)+this.getBytes(i,4)+this.getBytes(0,2)},e.prototype.getArrayBuffer=function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t.buffer},e.prototype.getBytes=function(e,t){for(var i="",n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i},e.prototype.getModifiedTime=function(e){var t=e.getHours();return t<<=6,t|=e.getMinutes(),(t<<=5)|e.getSeconds()/2},e.prototype.getModifiedDate=function(e){var t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,(t<<=5)|e.getDate()},e.prototype.calculateCrc32Value=function(e,t,i){e^=-1;for(var n=0;n<t.length;n++)e=e>>>8^i[255&(e^t[n])];return-1^e},e.initCrc32Table=function(){for(var e,t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;WT[t]=e}},e}(),GT=function(){function e(e,t){if(null==e)throw new Error("ArgumentException: data cannot be null or undefined");if(null==t)throw new Error("ArgumentException: string cannot be null or undefined");if(0===t.length)throw new Error("string cannot be empty");this.data=e,this.name=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.fileName},set:function(e){this.fileName=e},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.fileName=void 0,this.data=void 0},e}(),UT=function(){function e(e){this.intl=new ee}return e.prototype.getFormatFunction=function(e,t){return e.type?(t&&(e.isServerRendered=!0),this.intl.getDateFormat(e)):this.intl.getNumberFormat(e)},e.prototype.toView=function(e,t){var i=e;return g(t)||g(e)||(i=t(e)),i},e.prototype.displayText=function(e,t,i){return this.toView(e,this.getFormatFunction(t,i))},e}(),KT=function(){function e(e,t){if(this.csvStr="",this.separator=null==t?",":t,this.formatter=new UT,this.isMicrosoftBrowser=!!navigator.msSaveBlob,null!==e.isServerRendered&&void 0!==e.isServerRendered&&(this.isServerRendered=e.isServerRendered),null!==e.styles&&void 0!==e.styles){this.globalStyles=new Map;for(var i=0;i<e.styles.length;i++)void 0!==e.styles[i].name&&void 0!==e.styles[i].numberFormat&&this.globalStyles.set(e.styles[i].name,e.styles[i].numberFormat)}null!==e.worksheets&&void 0!==e.worksheets&&this.parseWorksheet(e.worksheets[0])}return e.prototype.parseWorksheet=function(e){null!==e.rows&&void 0!==e.rows&&this.parseRows(e.rows)},e.prototype.parseRows=function(e){for(var t=1,i=0,n=e;i<n.length;i++){var r=n[i];if(null===r.index||void 0===r.index)throw Error("Row index is missing.");for(;t<r.index;)this.csvStr+="\n",t++;this.parseRow(r)}},e.prototype.parseRow=function(e){if(null!==e.cells&&void 0!==e.cells)for(var t=1,i=0,n=e.cells;i<n.length;i++){var r=n[i];if(null===r.index||void 0===r.index)throw Error("Cell index is missing.");for(;t<r.index;)this.csvStr+=this.separator,t++;this.parseCell(r)}},e.prototype.parseCell=function(e){var t=this.csvStr;if(void 0!==e.value)if(e.value instanceof Date)if(void 0!==e.style&&void 0!==e.style.numberFormat)try{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",skeleton:e.style.numberFormat},this.isServerRendered))}catch(i){t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",format:e.style.numberFormat},this.isServerRendered))}else if(void 0!==e.style&&void 0!==e.style.name&&this.globalStyles.has(e.style.name))try{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",skeleton:this.globalStyles.get(e.style.name)},this.isServerRendered))}catch(i){t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",format:this.globalStyles.get(e.style.name)},this.isServerRendered))}else t+=e.value;else"boolean"==typeof e.value?t+=e.value?"TRUE":"FALSE":"number"==typeof e.value?void 0!==e.style&&void 0!==e.style.numberFormat?t+=this.parseCellValue(this.formatter.displayText(e.value,{format:e.style.numberFormat},this.isServerRendered)):void 0!==e.style&&void 0!==e.style.name&&this.globalStyles.has(e.style.name)?t+=this.parseCellValue(this.formatter.displayText(e.value,{format:this.globalStyles.get(e.style.name)},this.isServerRendered)):t+=e.value:t+=this.parseCellValue(e.value);this.csvStr=t},e.prototype.parseCellValue=function(e){for(var t="",i=e.length,n=0;n<i;n++)'"'===e[n]?t+=e[n].replace('"','""'):t+=e[n];return-1!==(e=t).indexOf(this.separator)||-1!==e.indexOf("\n")?'"'+e+'"':e},e.prototype.save=function(e){if(this.buffer=new Blob(["\ufeff"+this.csvStr],{type:"text/csv;charset=UTF-8"}),this.isMicrosoftBrowser)navigator.msSaveBlob(this.buffer,e);else{var t=window.URL.createObjectURL(this.buffer),i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.download=e,i.href=t;var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),i.dispatchEvent(n),setTimeout((function(){window.URL.revokeObjectURL(t)}))}},e.prototype.saveAsBlob=function(){return new Blob(["\ufeff"+this.csvStr],{type:"text/csv;charset=UTF-8"})},e}(),YT=function(){function e(){this.parts=[]}return e.prototype.append=function(e){this.parts.push(e),this.blob=void 0},e.prototype.getBlob=function(){return new Blob(this.parts,{type:"text/plain"})},e}(),XT=function(){function e(e,t,i,n,r){if(this.sharedStringCount=0,this.unitsProportions=[1.28,.32,96,96/25.4,96/2.54,1,96/72,96/72/12700],this.hyperlinkStyle={fontColor:"#0000FF",underline:!0},this.culture=void 0!==i?i:"en-US",this.currency=void 0!==n?n:"USD",this.intl=new ee(this.culture),this.mSaveType=t,"xlsx"===t){if(this.mArchive=new _T,this.sharedString=[],this.mFonts=[],this.mBorders=[],this.mStyles=[],this.printTitles=new Map,this.cellStyles=new Map,this.mNumFmt=new Map,this.mFills=new Map,this.mStyles.push(new DT),this.mFonts.push(new ET),this.cellStyles.set("Normal",new MT),this.mCellXfs=[],this.mCellStyleXfs=[],this.drawingCount=0,this.imageCount=0,null!==e.styles&&void 0!==e.styles){this.globalStyles=new Map;for(var o=0;o<e.styles.length;o++)if(void 0!==e.styles[o].name){if(this.cellStyles.has(e.styles[o].name))throw Error("Style name "+e.styles[o].name+" is already existed");var s=new DT;s.isGlobalStyle=!0,this.parserCellStyle(e.styles[o],s,"none");var a=new MT;a.name=s.name,a.xfId=s.index-1,this.cellStyles.set(a.name,a);var l={};void 0!==e.styles[o].numberFormat&&(l.format=e.styles[o].numberFormat),void 0!==e.styles[o].type?l.type=e.styles[o].type:l.type="datetime",void 0!==l.format&&this.globalStyles.set(e.styles[o].name,l)}}if(null===e.worksheets||void 0===e.worksheets)throw Error("Worksheet is expected.");this.parserWorksheets(e.worksheets),null!==e.builtInProperties&&void 0!==e.builtInProperties&&(this.builtInProperties=new QT,this.parserBuiltInProperties(e.builtInProperties,this.builtInProperties))}else this.csvHelper=new KT(e,r)}return e.prototype.parserBuiltInProperties=function(e,t){null!==e.author&&void 0!==e.author&&(t.author=e.author),null!==e.comments&&void 0!==e.comments&&(t.comments=e.comments),null!==e.category&&void 0!==e.category&&(t.category=e.category),null!==e.company&&void 0!==e.company&&(t.company=e.company),null!==e.manager&&void 0!==e.manager&&(t.manager=e.manager),null!==e.subject&&void 0!==e.subject&&(t.subject=e.subject),null!==e.title&&void 0!==e.title&&(t.title=e.title),null!==e.createdDate&&void 0!==e.createdDate&&(t.createdDate=e.createdDate),null!==e.modifiedDate&&void 0!==e.modifiedDate&&(t.modifiedDate=e.modifiedDate),null!==e.tags&&void 0!==e.tags&&(t.tags=e.tags),null!==e.status&&void 0!==e.status&&(t.status=e.status)},e.prototype.parserWorksheets=function(e){this.worksheets=new vT;for(var t=e.length,i=0;i<t;i++){var n=e[i],r=new wT;this.mergeCells=new TT,this.mergedCellsStyle=new Map,this.mHyperLinks=[],null!==n.name&&void 0!==n.name?r.name=n.name:r.name="Sheet"+(i+1).toString(),r.index=i+1,null!==n.columns&&void 0!==n.columns&&this.parserColumns(n.columns,r),null!==n.rows&&void 0!==n.rows&&this.parserRows(n.rows,r),null!==n.showGridLines&&void 0!==n.showGridLines&&(r.showGridLines=n.showGridLines),null!==n.freeze&&void 0!==n.freeze&&this.parserFreezePanes(n.freeze,r),null!==n.printTitle&&void 0!==n.printTitle&&this.parserPrintTitle(n.printTitle,r),void 0!==n.pageSetup&&void 0!==n.pageSetup.isSummaryRowBelow&&(r.isSummaryRowBelow=n.pageSetup.isSummaryRowBelow),void 0!==n.images&&this.parserImages(n.images,r),r.index=i+1,r.mergeCells=this.mergeCells,r.hyperLinks=this.mHyperLinks,this.worksheets.push(r)}},e.prototype.mergeOptions=function(e,t){var i={};return this.applyProperties(e,i),this.applyProperties(t,i),i},e.prototype.applyProperties=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)"name"!==i[n]&&(t[i[n]]=e[i[n]])},e.prototype.getCellName=function(e,t){return this.getColumnName(t)+e.toString()},e.prototype.getColumnName=function(e){e--;var t="";do{var i=e%26;e=e/26-1,t=String.fromCharCode(65+i)+t}while(e>=0);return t},e.prototype.parserPrintTitle=function(e,t){var i,n,r="";if(null!==e.fromRow&&void 0!==e.fromRow){i="$"+e.fromRow+":$"+(null!==e.toRow&&void 0!==e.toRow?e.toRow:e.fromRow)}if(null!==e.fromColumn&&void 0!==e.fromColumn){var o=e.fromColumn,s=void 0;s=null!==e.toColumn&&void 0!==e.toColumn?e.toColumn:e.fromColumn,n="$"+this.getColumnName(o)+":$"+this.getColumnName(s)}void 0!==i&&(r+=t.name+"!"+i),void 0!==n&&void 0!==i?r+=","+t.name+"!"+n:void 0!==n&&(r+=t.name+"!"+n),""!==r&&this.printTitles.set(t.index-1,r)},e.prototype.parserFreezePanes=function(e,t){t.freezePanes=new xT,null!==e.row&&void 0!==e.row?t.freezePanes.row=e.row:t.freezePanes.row=0,null!==e.column&&void 0!==e.column?t.freezePanes.column=e.column:t.freezePanes.column=0,t.freezePanes.leftCell=this.getCellName(t.freezePanes.row+1,t.freezePanes.column+1)},e.prototype.parserColumns=function(e,t){var i=e.length;t.columns=[];for(var n=0;n<i;n++){var r=new BT;if(null===e[n].index||void 0===e[n].index)throw Error("Column index is missing.");r.index=e[n].index,null!==e[n].width&&void 0!==e[n].width&&(r.width=e[n].width),t.columns.push(r)}},e.prototype.parserRows=function(e,t){var i=e.length;t.rows=new HT;for(var n=0,r=0;r<i;r++){var o=this.parserRow(e[r],n);n=o.index,t.rows.add(o)}this.insertMergedCellsStyle(t)},e.prototype.insertMergedCellsStyle=function(e){var t=this;this.mergeCells.length>0&&this.mergedCellsStyle.forEach((function(i,n){var r=e.rows.filter((function(e){return e.index===i.y}))[0];if(g(r)){var o=e.rows.filter((function(e){return e.index<=i.y})),s=new NT;s.index=i.y,s.cells=new qT,s.cells.add(t.createCell(i,n));h=0;o.length>0&&(h=e.rows.indexOf(o[o.length-1])+1),e.rows.splice(h,0,s)}else{var a=r.cells.filter((function(e){return e.index===i.x}))[0];if(g(a)){var l=r.cells.filter((function(e){return e.index<=i.x})),h=0;l.length>0&&(h=r.cells.indexOf(l[l.length-1])+1),r.cells.splice(h,0,t.createCell(i,n))}else a.styleIndex=i.styleIndex}}))},e.prototype.createCell=function(e,t){var i=new zT;return i.refName=t,i.index=e.x,i.cellStyle=new DT,i.styleIndex=e.styleIndex,i},e.prototype.parserRow=function(e,t){var i=new NT;if(null!==e.height&&void 0!==e.height&&(i.height=e.height),null===e.index||void 0===e.index)throw Error("Row index is missing.");return i.index=e.index,null!==e.grouping&&void 0!==e.grouping&&this.parseGrouping(e.grouping,i),this.parseCells(e.cells,i),i},e.prototype.parseGrouping=function(e,t){t.grouping=new ST,void 0!==e.outlineLevel&&(t.grouping.outlineLevel=e.outlineLevel),void 0!==e.isCollapsed&&(t.grouping.isCollapsed=e.isCollapsed),void 0!==e.isHidden&&(t.grouping.isHidden=e.isHidden)},e.prototype.parseCells=function(e,t){t.cells=new qT;for(var i=void 0!==e?e.length:0,n=1,r=1,o=0;o<i;o++){var s=e[o],a=new zT;if(null===s.index||void 0===s.index)throw Error("Cell index is missing.");if(a.index=s.index,a.index<n?n=a.index:a.index>r&&(r=a.index),a.refName=this.getCellName(t.index,a.index),null!==s.rowSpan&&void 0!==s.rowSpan?a.rowSpan=s.rowSpan-1:a.rowSpan=0,null!==s.colSpan&&void 0!==s.colSpan?a.colSpan=s.colSpan-1:a.colSpan=0,null!==s.hyperlink&&void 0!==s.hyperlink){var l=new CT;void 0!==s.hyperlink.target&&(l.target=s.hyperlink.target,void 0!==s.hyperlink.displayText?a.value=s.hyperlink.displayText:a.value=s.hyperlink.target,a.type=this.getCellValueType(a.value),l.ref=a.refName,l.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(l),a.cellStyle=new DT,this.parserCellStyle(void 0!==s.style?this.mergeOptions(s.style,this.hyperlinkStyle):this.hyperlinkStyle,a.cellStyle,"string"),a.styleIndex=a.cellStyle.index)}null!==s.formula&&void 0!==s.formula&&(a.formula=s.formula,a.type="formula"),null!==s.value&&void 0!==s.value&&(void 0!==a.formula?a.value=0:(a.value=s.value,a.type=this.getCellValueType(a.value))),null!==s.style&&void 0!==s.style&&void 0===a.styleIndex?(a.cellStyle=new DT,a.value instanceof Date?this.parserCellStyle(s.style,a.cellStyle,a.type,14):this.parserCellStyle(s.style,a.cellStyle,a.type),a.styleIndex=a.cellStyle.index):a.value instanceof Date&&(a.cellStyle=new DT,this.parserCellStyle({},a.cellStyle,a.type,14),a.styleIndex=a.cellStyle.index),this.parseCellType(a),this.mergeCells=this.processMergeCells(a,t.index,this.mergeCells),t.cells.add(a),a.index+1}t.spans=n+":"+r},e.prototype.GetColors=function(){var e;return(e=new Map).set("WHITE","FFFFFFFF"),e.set("SILVER","FFC0C0C0"),e.set("GRAY","FF808080"),e.set("BLACK","FF000000"),e.set("RED","FFFF0000"),e.set("MAROON","FF800000"),e.set("YELLOW","FFFFFF00"),e.set("OLIVE","FF808000"),e.set("LIME","FF00FF00"),e.set("GREEN","FF008000"),e.set("AQUA","FF00FFFF"),e.set("TEAL","FF008080"),e.set("BLUE","FF0000FF"),e.set("NAVY","FF000080"),e.set("FUCHSIA","FFFF00FF"),e.set("PURPLE","FF800080"),e},e.prototype.processColor=function(e){return 0===e.indexOf("#")?e.replace("#","FF"):(e=e.toUpperCase(),this.rgbColors=this.GetColors(),e=this.rgbColors.has(e)?this.rgbColors.get(e):"FF000000")},e.prototype.processCellValue=function(e,t){var i=e;if(-1!==e.indexOf("<font")||-1!==e.indexOf("<a")||-1!==e.indexOf("<b>")||-1!==e.indexOf("<i>")||-1!==e.indexOf("<u>")){var n="",r=e.indexOf("<",0),o=e.indexOf(">",r+1);if(r>=0&&o>=0){for(0!==r&&(n+='<r><t xml:space="preserve">'+e.substring(0,r)+"</t></r>");r>=0&&o>=0;)if((o=e.indexOf(">",r+1))>=0){var s=e.substring(r+1,o);(r=e.indexOf("<",o+1))<0&&(r=i.length);var a=i.substring(o+1,r);if(0!==a.length){var l=s.split(" ");if(l.length>0&&(n+="<r><rPr>"),l.length>1)for(var h=0,p=l;h<p.length;h++){var d=p[h];switch(d.trim().substring(0,5)){case"size=":n+='<sz val="'+d.substring(6,d.length-1)+'"/>';break;case"face=":n+='<rFont val="'+d.substring(6,d.length-1)+'"/>';break;case"color":n+='<color rgb="'+this.processColor(d.substring(7,d.length-1))+'"/>';break;case"href=":var c=new CT;c.target=d.substring(6,d.length-1).trim(),c.ref=t.refName,c.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(c),n+='<color rgb="FF0000FF"/><u/><b/>'}}else if(1===l.length){switch(l[0].trim()){case"b":n+="<b/>";break;case"i":n+="<i/>";break;case"u":n+="<u/>"}}n+='</rPr><t xml:space="preserve">'+a+"</t></r>"}}return""===n?i:n}return i}return i},e.prototype.applyGlobalStyle=function(e,t){this.cellStyles.has(e.name)&&(t.index=this.mStyles.filter((function(t){return t.name===e.name}))[0].index,t.name=e.name)},e.prototype.parserCellStyle=function(e,t,i,n){if(null!==e.name&&void 0!==e.name){if(!t.isGlobalStyle)return void this.applyGlobalStyle(e,t);t.name=e.name}null!==e.backColor&&void 0!==e.backColor&&(t.backColor=e.backColor),t.borders=new AT,null!==e.borders&&void 0!==e.borders&&this.parserBorder(e.borders,t.borders.all),null!==e.leftBorder&&void 0!==e.leftBorder&&this.parserBorder(e.leftBorder,t.borders.left),null!==e.rightBorder&&void 0!==e.rightBorder&&this.parserBorder(e.rightBorder,t.borders.right),null!==e.topBorder&&void 0!==e.topBorder&&this.parserBorder(e.topBorder,t.borders.top),null!==e.bottomBorder&&void 0!==e.bottomBorder&&this.parserBorder(e.bottomBorder,t.borders.bottom),null!==e.fontName&&void 0!==e.fontName&&(t.fontName=e.fontName),null!==e.fontSize&&void 0!==e.fontSize&&(t.fontSize=e.fontSize),null!==e.fontColor&&void 0!==e.fontColor&&(t.fontColor=e.fontColor),null!==e.italic&&void 0!==e.italic&&(t.italic=e.italic),null!==e.bold&&void 0!==e.bold&&(t.bold=e.bold),null!==e.hAlign&&void 0!==e.hAlign&&(t.hAlign=e.hAlign.toLowerCase()),null!==e.indent&&void 0!==e.indent&&(t.indent=e.indent,"left"!==t.hAlign&&"right"!==t.hAlign&&(t.hAlign="left")),null!==e.rotation&&void 0!==e.rotation&&(t.rotation=e.rotation),null!==e.vAlign&&void 0!==e.vAlign&&(t.vAlign=e.vAlign.toLowerCase()),null!==e.underline&&void 0!==e.underline&&(t.underline=e.underline),null!==e.wrapText&&void 0!==e.wrapText&&(t.wrapText=e.wrapText),null!==e.numberFormat&&void 0!==e.numberFormat?null!==e.type&&void 0!==e.type?t.numberFormat=this.getNumberFormat(e.numberFormat,e.type):t.numberFormat=this.getNumberFormat(e.numberFormat,i):void 0!==n?(t.numFmtId=14,t.numberFormat="GENERAL"):t.numberFormat="GENERAL",t.index=this.processCellStyle(t)},e.prototype.switchNumberFormat=function(e,t){var i=this.getNumberFormat(e,t);if(i!==e){var n=this.mNumFmt.get(e);if(void 0!==n&&(n.formatCode=i,this.mNumFmt.has(i))){for(var r=0,o=this.mCellStyleXfs;r<o.length;r++){var s=o[r];s.numFmtId===n.numFmtId&&(s.numFmtId=this.mNumFmt.get(i).numFmtId)}for(var a=0,l=this.mCellXfs;a<l.length;a++){var h=l[a];h.numFmtId===n.numFmtId&&(h.numFmtId=this.mNumFmt.get(i).numFmtId)}}}},e.prototype.getNumberFormat=function(e,t){var i;switch(t){case"number":try{i=this.intl.getNumberPattern({format:e,currency:this.currency,useGrouping:!0},!0)}catch(t){i=e}break;case"datetime":try{i=this.intl.getDatePattern({skeleton:e,type:"dateTime"},!0)}catch(t){try{i=this.intl.getDatePattern({format:e,type:"dateTime"},!0)}catch(t){i=e}}break;case"date":try{i=this.intl.getDatePattern({skeleton:e,type:"date"},!0)}catch(t){try{i=this.intl.getDatePattern({format:e,type:"date"},!0)}catch(t){i=e}}break;case"time":try{i=this.intl.getDatePattern({skeleton:e,type:"time"},!0)}catch(t){try{i=this.intl.getDatePattern({format:e,type:"time"},!0)}catch(t){i=e}}break;default:i=e}return i},e.prototype.parserBorder=function(e,t){null!==e.color&&void 0!==e.color?t.color=e.color:t.color="#000000",null!==e.lineStyle&&void 0!==e.lineStyle?t.lineStyle=e.lineStyle:t.lineStyle="thin"},e.prototype.processCellStyle=function(e){if(e.isGlobalStyle)return this.processNumFormatId(e),this.mStyles.push(e),this.mStyles.length;var t=this.compareStyle(e);return t.result?t.index:(this.processNumFormatId(e),this.mStyles.push(e),this.mStyles.length)},e.prototype.processNumFormatId=function(e){if("GENERAL"!==e.numberFormat&&!this.mNumFmt.has(e.numberFormat)){var t=this.mNumFmt.size+164;this.mNumFmt.set(e.numberFormat,new LT(t,e.numberFormat))}},e.prototype.isNewFont=function(e){for(var t=!1,i=0,n=0,r=this.mFonts;n<r.length;n++){var o=r[n];i++;var s=void 0;if(void 0!==e.fontColor&&(s="FF"+e.fontColor.replace("#","")),t=o.color===s&&o.b===e.bold&&o.i===e.italic&&o.u===e.underline&&o.name===e.fontName&&o.sz===e.fontSize)break}return{index:i-=1,result:t}},e.prototype.isNewBorder=function(e){var t=new DT;return this.isAllBorder(e.borders)?t.borders.all.color===e.borders.all.color&&t.borders.all.lineStyle===e.borders.all.lineStyle:t.borders.left.color===e.borders.left.color&&t.borders.left.lineStyle===e.borders.left.lineStyle&&t.borders.right.color===e.borders.right.color&&t.borders.right.lineStyle===e.borders.right.lineStyle&&t.borders.top.color===e.borders.top.color&&t.borders.top.lineStyle===e.borders.top.lineStyle&&t.borders.bottom.color===e.borders.bottom.color&&t.borders.bottom.lineStyle===e.borders.bottom.lineStyle},e.prototype.isAllBorder=function(e){var t=new DT;return t.borders.all.color!==e.all.color&&t.borders.all.lineStyle!==e.all.lineStyle},e.prototype.compareStyle=function(e){for(var t=!0,i=0,n=0,r=this.mStyles;n<r.length;n++){var o=r[n];if(t=!o.isGlobalStyle&&(o.backColor===e.backColor&&o.bold===e.bold&&o.numFmtId===e.numFmtId&&o.numberFormat===e.numberFormat&&o.type===e.type&&o.fontColor===e.fontColor&&o.fontName===e.fontName&&o.fontSize===e.fontSize&&o.hAlign===e.hAlign&&o.italic===e.italic&&o.underline===e.underline&&o.vAlign===e.vAlign&&o.indent===e.indent&&o.rotation===e.rotation&&o.wrapText===e.wrapText&&o.borders.all.color===e.borders.all.color&&o.borders.all.lineStyle===e.borders.all.lineStyle&&o.borders.left.color===e.borders.left.color&&o.borders.left.lineStyle===e.borders.left.lineStyle&&o.borders.right.color===e.borders.right.color&&o.borders.right.lineStyle===e.borders.right.lineStyle&&o.borders.top.color===e.borders.top.color&&o.borders.top.lineStyle===e.borders.top.lineStyle&&o.borders.bottom.color===e.borders.bottom.color&&o.borders.bottom.lineStyle===e.borders.bottom.lineStyle)){i=o.index;break}}return{index:i,result:t}},e.prototype.contains=function(e,t){var i=e.indexOf(t);return i>-1&&i<e.length},e.prototype.getCellValueType=function(e){return e instanceof Date?"datetime":"boolean"==typeof e?"boolean":"number"==typeof e?"number":"string"},e.prototype.parseCellType=function(e){var t,i=e.type,n=e.value;switch(i){case"datetime":if(n=this.toOADate(n),void 0!==e.cellStyle&&void 0!==e.cellStyle.name&&this.globalStyles.has(e.cellStyle.name)){var r=this.globalStyles.get(e.cellStyle.name);this.switchNumberFormat(r.format,r.type)}t="n";break;case"boolean":n=n?1:0,t="b";break;case"number":t="n",void 0!==e.cellStyle&&void 0!==e.cellStyle.name&&this.globalStyles.has(e.cellStyle.name)&&this.switchNumberFormat(this.globalStyles.get(e.cellStyle.name).format,"number");break;case"string":this.sharedStringCount++,t="s";var o=this.processCellValue(n,e);this.contains(this.sharedString,o)||this.sharedString.push(o),n=this.sharedString.indexOf(o)}e.saveType=t,e.value=n},e.prototype.parserImages=function(e,t){var i=e.length;t.images=[];for(var n=0;n<i;n++){var r=this.parserImage(e[n]);t.images.push(r)}},e.prototype.parserImage=function(e){var t=new VT;return null!==e.image&&void 0!==e.image&&(t.image=e.image),null!==e.row&&void 0!==e.row&&(t.row=e.row),null!==e.column&&void 0!==e.column&&(t.column=e.column),null!==e.lastRow&&void 0!==e.lastRow&&(t.lastRow=e.lastRow),null!==e.lastColumn&&void 0!==e.lastColumn&&(t.lastColumn=e.lastColumn),null!==e.width&&void 0!==e.width&&(t.width=e.width),null!==e.height&&void 0!==e.height&&(t.height=e.height),null!==e.horizontalFlip&&void 0!==e.horizontalFlip&&(t.horizontalFlip=e.horizontalFlip),null!==e.verticalFlip&&void 0!==e.verticalFlip&&(t.verticalFlip=e.verticalFlip),null!==e.rotation&&void 0!==e.rotation&&(t.rotation=e.rotation),t},e.prototype.saveAsBlob=function(e){var t=this;switch(e){case"text/csv":return new Promise((function(e,i){var n={};n.blobData=t.csvHelper.saveAsBlob(),e(n)}));default:return new Promise((function(e,i){t.saveInternal(),t.mArchive.saveAsBlob().then((function(t){var i={};i.blobData=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e(i)}))}))}},e.prototype.save=function(e,t){var i=this;if(null==e||""===e)throw new Error("Argument Null Exception: fileName cannot be null or empty");var n=e.match(".xlsx$"),r=e.match(".csv$");if(null!==n&&n[0]==="."+this.mSaveType)this.saveInternal(),this.mArchive.save(e).then((function(){i.mArchive.destroy()}));else{if(null===r||r[0]!=="."+this.mSaveType)throw Error("Save type and file extension is different.");this.csvHelper.save(e)}},e.prototype.saveInternal=function(){this.saveWorkbook(),this.saveWorksheets(),this.saveSharedString(),this.saveStyles(),this.saveApp(this.builtInProperties),this.saveCore(this.builtInProperties),this.saveContentType(),this.saveTopLevelRelation(),this.saveWorkbookRelation()},e.prototype.saveWorkbook=function(){for(var e='<?xml version="1.0" encoding="utf-8"?><workbook xmlns:r = "http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns= "http://schemas.openxmlformats.org/spreadsheetml/2006/main"><workbookPr codeName="ThisWorkbook" defaultThemeVersion= "153222"/><bookViews><workbookView activeTab="0"/></bookViews>',t="<sheets>",i=this.worksheets.length,n=0;n<i;n++)t+='<sheet name="'+this.worksheets[n].name+'" sheetId="'+(n+1).toString()+'" r:id ="rId'+(n+1).toString()+'" />';if(e+=t+="</sheets>",this.printTitles.size>0){var r="<definedNames>";this.printTitles.forEach((function(e,t){r+='<definedName name="_xlnm.Print_Titles" localSheetId="'+t+'">'+e+"</definedName>"})),e+=r+="</definedNames>"}this.addToArchive(e+"</workbook>","xl/workbook.xml")},e.prototype.saveWorksheets=function(){for(var e=this.worksheets.length,t=0;t<e;t++)this.saveWorksheet(this.worksheets[t],t)},e.prototype.saveWorksheet=function(e,t){var i=new YT,n='<?xml version="1.0" encoding="utf-8" standalone="yes"?><worksheet xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';if(e.isSummaryRowBelow?n+="<sheetPr />":n+='<sheetPr><outlinePr summaryBelow="0" ></outlinePr></sheetPr>',n+=this.saveSheetView(e),void 0!==e.columns){for(var r="<cols>",o=0,s=e.columns;o<s.length;o++){var a=s[o];void 0!==a.width?r+='<col min="'+a.index+'" max="'+a.index+'" width="'+this.pixelsToColumnWidth(a.width)+'" customWidth="1" />':r+='<col min="'+a.index+'" max="'+a.index+'" width="8.43" customWidth="1" />'}n+=r+"</cols>"}if(n+="<sheetData>",i.append(n),n="",void 0!==e.rows)for(var l=0,h=e.rows;l<h.length;l++){var p=h[l],d='<row r="'+p.index+'" ';g(p.spans)||(d+='spans="'+p.spans+'" '),void 0!==p.height&&(d+='ht="'+this.pixelsToRowHeight(p.height)+'" customHeight="1" '),void 0!==p.grouping&&(p.grouping.isHidden&&(d+='hidden="1" '),void 0!==p.grouping.outlineLevel&&(d+='outlineLevel="'+p.grouping.outlineLevel+'" '),p.grouping.isCollapsed&&(d+='collapsed="1" ')),d+=">";for(var c=0,u=p.cells;c<u.length;c++){var f=u[c];void 0===f||void 0===f.value&&void 0===f.cellStyle||(d+='<c r="'+f.refName+'" ',void 0!==f.saveType&&(d+='t="'+f.saveType+'" '),void 0!==f.styleIndex&&(d+='s="'+f.styleIndex+'" '),d+=" >",void 0!==f.formula&&(d+="<f>"+f.formula+"</f>"),void 0!==f.value?d+="<v>"+f.value+"</v></c>":d+="</c>")}d+="</row>",i.append(d)}if(n+="</sheetData>",e.mergeCells.length>0){n+='<mergeCells count="'+e.mergeCells.length+'">';for(var m=0,y=e.mergeCells;m<y.length;m++){n+='<mergeCell ref="'+y[m].ref+'" />'}n+="</mergeCells>"}if(e.hyperLinks.length>0){n+="<hyperlinks>";for(var v=0,b=e.hyperLinks;v<b.length;v++){var w=b[v];n+='<hyperlink ref="'+w.ref+'" r:id="rId'+w.rId+'" />'}n+="</hyperlinks>"}n+='<pageMargins left="0.75" right="0.75" top="1" bottom="1" header="0.5" footer="0.5" /><headerFooter scaleWithDoc="1" alignWithMargins="0" differentFirst="0" differentOddEven="0" />',null!=e.images&&e.images.length>0&&(this.drawingCount++,this.saveDrawings(e,e.index),n+='<drawing r:id="rId'+(e.hyperLinks.length+1)+'"/>'),this.addToArchive(this.saveSheetRelations(e),"xl/worksheets/_rels/sheet"+e.index+".xml.rels"),i.append(n+"</worksheet>"),this.addToArchive(i.getBlob(),"xl/worksheets/sheet"+(t+1)+".xml")},e.prototype.saveDrawings=function(e,t){var i=new YT,n='<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">';if(void 0!==e.images){for(var r=0,o=0,s=e.images;o<s.length;o++){var a=s[o];void 0!==a.height&&void 0!==a.width?(this.updatelastRowOffset(e,a),this.updatelastColumnOffSet(e,a)):void 0!==a.lastRow&&void 0!==a.lastColumn&&(a.lastRowOffset=0,a.lastColOffset=0),r++,n+='<xdr:twoCellAnchor editAs="oneCell">',n+="<xdr:from><xdr:col>",n+=a.column-1,n+="</xdr:col><xdr:colOff>",n+=0,n+="</xdr:colOff><xdr:row>",n+=a.row-1,n+="</xdr:row><xdr:rowOff>",n+=0,n+="</xdr:rowOff></xdr:from>",n+="<xdr:to><xdr:col>",n+=a.lastColumn,n+="</xdr:col><xdr:colOff>",n+=a.lastColOffset,n+="</xdr:colOff><xdr:row>",n+=a.lastRow,n+="</xdr:row><xdr:rowOff>",n+=a.lastRowOffset,n+="</xdr:rowOff></xdr:to>",n+="<xdr:pic>",n+="<xdr:nvPicPr>",n+='<xdr:cNvPr id="'+r+'" name="Picture '+r+'"> </xdr:cNvPr>',n+='<xdr:cNvPicPr><a:picLocks noChangeAspect="1"/></xdr:cNvPicPr> </xdr:nvPicPr>',n+="<xdr:blipFill>",n+='<a:blip xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:embed="rId'+r+'" cstate="print">',n+="</a:blip><a:stretch><a:fillRect /></a:stretch></xdr:blipFill>",n+="<xdr:spPr>",n+="<a:xfrm",null!=a.rotation&&a.rotation<=3600&&a.rotation>=-3600&&(n+=' rot="'+6e4*a.rotation+'"'),null!=a.verticalFlip&&0!=a.verticalFlip&&(n+=' flipV="1"'),null!=a.horizontalFlip&&0!=a.horizontalFlip&&(n+=' flipH="1"'),n+="/>",n+='<a:prstGeom prst="rect"><a:avLst /></a:prstGeom></xdr:spPr>',n+="</xdr:pic><xdr:clientData /></xdr:twoCellAnchor>";new YT;var l=this.convertBase64toImage(a.image);this.imageCount+=1,this.addToArchive(l,"xl/media/image"+this.imageCount+".png")}i.append(n),i.append("</xdr:wsDr>"),this.saveDrawingRelations(e),this.addToArchive(i.getBlob(),"xl/drawings/drawing"+this.drawingCount+".xml")}},e.prototype.updatelastRowOffset=function(e,t){for(var i=t.height,n=t.row,r=0;i>=0;){var o=0,s=(o=void 0!==e.rows&&void 0!==e.rows[n-1]?this.convertToPixels(void 0===e.rows[n-1].height?15:e.rows[n-1].height):this.convertToPixels(15))-r*o/256;if(s>i){t.lastRow=n,t.lastRowOffset=r+256*i/o;var a=0;a=void 0!==e.rows&&void 0!==e.rows[n-1]?this.convertToPixels(void 0===e.rows[n-1].height?15:e.rows[n-1].height):this.convertToPixels(15),t.lastRowOffset=a*t.lastRowOffset/256,t.lastRowOffset=Math.round(t.lastRowOffset/this.unitsProportions[7]);break}i-=s,n++,r=0}},e.prototype.updatelastColumnOffSet=function(e,t){for(var i=t.width,n=t.column,r=0;i>=0;){var o=0,s=(o=void 0!==e.columns&&void 0!==e.columns[n-1]?this.ColumnWidthToPixels(void 0===e.columns[n-1].width?8.43:e.columns[n-1].width):this.ColumnWidthToPixels(8.43))-r*o/1024;if(s>i){t.lastColumn=n,t.lastColOffset=r+1024*i/o;var a=0;a=void 0!==e.columns&&void 0!==e.columns[n-1]?this.ColumnWidthToPixels(void 0===e.columns[n-1].width?8.43:e.columns[n].width):this.ColumnWidthToPixels(8.43),t.lastColOffset=a*t.lastColOffset/1024,t.lastColOffset=Math.round(t.lastColOffset/this.unitsProportions[7]);break}i-=s,n++,r=0}},e.prototype.convertToPixels=function(e){return e*this.unitsProportions[6]},e.prototype.convertBase64toImage=function(e){for(var t=window.atob(e),i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:"image/png"})},e.prototype.saveDrawingRelations=function(e){for(var t='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',i=e.images.length,n=this.imageCount-e.images.length,r=1;r<=i;r++)t+='<Relationship Id="rId'+r+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Target="../media/image'+ ++n+'.png" />';this.addToArchive(t+"</Relationships>","xl/drawings/_rels/drawing"+this.drawingCount+".xml.rels")},e.prototype.pixelsToColumnWidth=function(e){var t=e>12?this.trunc((e-5)/7*100+.5)/100:e/12;return t>1?(7*t+5)/7*256/256:12*t/7*256/256},e.prototype.ColumnWidthToPixels=function(e){var t=e>1?(7*e+5)/7*256/256:12*e/7*256/256;return this.trunc((256*t+this.trunc(128/7))/256*7)},e.prototype.trunc=function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},e.prototype.pixelsToRowHeight=function(e){return e*this.unitsProportions[5]/this.unitsProportions[6]},e.prototype.saveSheetRelations=function(e){for(var t='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',i=0,n=e.hyperLinks;i<n.length;i++){var r=n[i];t+='<Relationship Id="rId'+r.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="'+r.target+'" TargetMode="External" />'}return null!=e.images&&e.images.length>0&&(t+='<Relationship Id="rId'+(e.hyperLinks.length+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing" Target="../drawings/drawing'+this.drawingCount+'.xml" />'),t+="</Relationships>"},e.prototype.saveSheetView=function(e){var t='<sheetViews><sheetView workbookViewId="0" ';return!1===e.showGridLines?t+='showGridLines="0" >':t+=">",void 0!==e.freezePanes&&(t+='<pane state="frozen" topLeftCell="'+e.freezePanes.leftCell+'" ',0!==e.freezePanes.row&&(t+='ySplit="'+e.freezePanes.row+'" '),0!==e.freezePanes.column&&(t+='xSplit="'+e.freezePanes.column+'" '),t+="/>"),t+="</sheetView></sheetViews > "},e.prototype.saveSharedString=function(){var e=this.sharedString.length;if(e>0){for(var t='<?xml version="1.0" encoding="utf-8"?><sst uniqueCount="'+e+'" count="'+this.sharedStringCount+'" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">',i="",n=0;n<e;n++)0!==this.sharedString[n].indexOf("<r>")?(i+="<si><t>",i+=this.processString(this.sharedString[n]),i+="</t></si>"):(i+="<si>",i+=this.sharedString[n],i+="</si>");i+="</sst>",this.addToArchive(t+i,"xl/sharedStrings.xml")}},e.prototype.processString=function(e){return-1!==e.indexOf("&")&&(e=e.replace(/&/g,"&amp;")),-1!==e.indexOf("<")&&(e=e.replace(/</g,"&lt;")),-1!==e.indexOf(">")&&(e=e.replace(/>/g,"&gt;")),e},e.prototype.saveStyles=function(){this.updateCellXfsStyleXfs();var e='<?xml version="1.0" encoding="utf-8"?><styleSheet xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';e+=this.saveNumberFormats(),e+=this.saveFonts(),e+=this.saveFills(),e+=this.saveBorders(),e+=this.saveCellStyleXfs(),e+=this.saveCellXfs(),e+=this.saveCellStyles(),this.addToArchive(e+"</styleSheet>","xl/styles.xml")},e.prototype.updateCellXfsStyleXfs=function(){for(var e=0,t=this.mStyles;e<t.length;e++){var i=t[e],n=void 0;i.isGlobalStyle?(n=new IT).xfId=i.index-1:(n=new RT).xfId=0;var r=this.isNewFont(i);if(r.result)n.fontId=r.index;else{var o=new ET;o.b=i.bold,o.i=i.italic,o.name=i.fontName,o.sz=i.fontSize,o.u=i.underline,o.color="FF"+i.fontColor.replace("#",""),this.mFonts.push(o),n.fontId=this.mFonts.length-1}if("none"!==i.backColor){var s="FF"+i.backColor.replace("#","");if(this.mFills.has(s)){var a=this.mFills.get(s);n.fillId=a}else{a=this.mFills.size+2;this.mFills.set(s,a),n.fillId=a}}else n.fillId=0;if(this.isNewBorder(i)?n.borderId=0:(this.mBorders.push(i.borders),n.borderId=this.mBorders.length),"GENERAL"!==i.numberFormat)if(this.mNumFmt.has(i.numberFormat)){var l=this.mNumFmt.get(i.numberFormat);n.numFmtId=l.numFmtId}else{var h=this.mNumFmt.size+164;this.mNumFmt.set(i.numberFormat,new LT(h,i.numberFormat)),n.numFmtId=h}else"GENERAL"===i.numberFormat&&14===i.numFmtId?n.numFmtId=14:n.numFmtId=0;i.isGlobalStyle||(n.applyAlignment=1),n.alignment=new PT,n.alignment.indent=i.indent,n.alignment.horizontal=i.hAlign,n.alignment.vertical=i.vAlign,n.alignment.wrapText=i.wrapText?1:0,n.alignment.rotation=i.rotation,i.isGlobalStyle?(this.mCellStyleXfs.push(n),this.mCellXfs.push(n)):this.mCellXfs.push(n)}},e.prototype.saveNumberFormats=function(){if(this.mNumFmt.size>=1){var e='<numFmts count="'+this.mNumFmt.size+'">';return this.mNumFmt.forEach((function(t,i){e+='<numFmt numFmtId="'+t.numFmtId+'" formatCode="'+t.formatCode.replace(/"/g,"&quot;")+'" />'})),e+="</numFmts>"}return""},e.prototype.saveFonts=function(){var e='<fonts count="'+this.mFonts.length+'">';if(this.mFonts.length>=1)for(var t=0,i=this.mFonts;t<i.length;t++){var n=i[t];e+="<font>",n.b&&(e+="<b />"),n.i&&(e+="<i />"),n.u&&(e+="<u />"),e+='<sz val="'+this.pixelsToRowHeight(n.sz)+'" />',e+='<color rgb="'+n.color+'" />',e+='<name val="'+n.name+'" /></font>'}return e+"</fonts>"},e.prototype.saveFills=function(){var e='<fills count="'+(this.mFills.size+2)+'"><fill><patternFill patternType="none"></patternFill></fill><fill><patternFill patternType="gray125"></patternFill></fill>';return this.mFills.size>=1&&this.mFills.forEach((function(t,i){e+='<fill><patternFill patternType="solid"><fgColor rgb="'+i+'" /><bgColor rgb="FFFFFFFF" /></patternFill></fill>'})),e+"</fills>"},e.prototype.saveBorders=function(){var e='<borders count="'+(this.mBorders.length+1)+'"><border><left /><right /><top /><bottom /><diagonal /></border>';if(this.mBorders.length>=1)for(var t=0,i=this.mBorders;t<i.length;t++){var n=i[t];if(this.isAllBorder(n)){var r=n.all.color.replace("#",""),o=n.all.lineStyle;e+='<border><left style="'+o+'"><color rgb="FF'+r+'" /></left><right style="'+o+'"><color rgb="FF'+r+'" /></right><top style="'+o+'"><color rgb="FF'+r+'" /></top><bottom style="'+o+'"><color rgb="FF'+r+'" /></bottom></border>'}else e+='<border><left style="'+n.left.lineStyle+'"><color rgb="FF'+n.left.color.replace("#","")+'" /></left><right style="'+n.right.lineStyle+'"><color rgb="FF'+n.right.color.replace("#","")+'" /></right><top style="'+n.top.lineStyle+'"><color rgb="FF'+n.top.color.replace("#","")+'" /></top><bottom style="'+n.bottom.lineStyle+'"><color rgb="FF'+n.bottom.color.replace("#","")+'" /></bottom></border>'}return e+"</borders>"},e.prototype.saveCellStyles=function(){var e=this,t='<cellStyles  count="'+this.cellStyles.size+'">';return this.cellStyles.forEach((function(i,n){t+='<cellStyle name="'+n+'" xfId="'+e.cellStyles.get(n).xfId+'"',"Normal"===n&&(t+=' builtinId="0"'),t+=" />"})),t+="</cellStyles>"},e.prototype.saveCellStyleXfs=function(){var e='<cellStyleXfs count="'+(this.mCellStyleXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" />';if(this.mCellStyleXfs.length>=1)for(var t=0,i=this.mCellStyleXfs;t<i.length;t++){var n=i[t];e+='<xf numFmtId="'+n.numFmtId+'" fontId="'+n.fontId+'" fillId="'+n.fillId+'" borderId="'+n.borderId+'" ',void 0!==n.alignment?e+=">"+this.saveAlignment(n)+"</xf>":e+=" />"}return e+"</cellStyleXfs>"},e.prototype.saveCellXfs=function(){var e='<cellXfs count="'+(this.mCellXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />';if(this.mCellXfs.length>=1)for(var t=0,i=this.mCellXfs;t<i.length;t++){var n=i[t];e+='<xf numFmtId="'+n.numFmtId+'" fontId="'+n.fontId+'" fillId="'+n.fillId+'" borderId="'+n.borderId+'" xfId="'+n.xfId+'" ',1===n.applyAlignment&&(e+='applyAlignment="1"'),e+=">"+this.saveAlignment(n)+"</xf>"}return e+"</cellXfs>"},e.prototype.saveAlignment=function(e){var t="<alignment ";return void 0!==e.alignment.horizontal&&(t+='horizontal="'+e.alignment.horizontal+'" '),void 0!==e.alignment.indent&&0!==e.alignment.indent?t+='indent="'+e.alignment.indent+'" ':void 0!==e.alignment.rotation&&0!==e.alignment.rotation&&(t+='textRotation="'+e.alignment.rotation+'" '),void 0!==e.alignment.vertical&&(t+='vertical="'+e.alignment.vertical+'" '),t+='wrapText="'+e.alignment.wrapText+'" />'},e.prototype.saveApp=function(e){var t='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>Essential XlsIO</Application>';void 0!==e&&(void 0!==e.manager&&(t+="<Manager>"+e.manager+"</Manager>"),void 0!==e.company&&(t+="<Company>"+e.company+"</Company>")),this.addToArchive(t+"</Properties>","docProps/app.xml")},e.prototype.saveCore=function(e){var t=new Date,i='<?xml version="1.0" encoding="utf-8" standalone="yes"?><cp:coreProperties xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties">';void 0!==this.builtInProperties?(void 0!==e.author&&(i+="<dc:creator>"+e.author+"</dc:creator>"),void 0!==e.subject&&(i+="<dc:subject>"+e.subject+"</dc:subject>"),void 0!==e.category&&(i+="<cp:category>"+e.category+"</cp:category>"),void 0!==e.comments&&(i+="<dc:description>"+e.comments+"</dc:description>"),void 0!==e.title&&(i+="<dc:title>"+e.title+"</dc:title>"),void 0!==e.tags&&(i+="<cp:keywords>"+e.tags+"</cp:keywords>"),void 0!==e.status&&(i+="<cp:contentStatus>"+e.status+"</cp:contentStatus>"),void 0!==e.createdDate?i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+e.createdDate.toISOString()+"</dcterms:created>":i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:created>",void 0!==e.modifiedDate?i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+e.modifiedDate.toISOString()+"</dcterms:modified>":i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:modified>"):(i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:created>",i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:modified>"),i+="</cp:coreProperties>",this.addToArchive(i,"docProps/core.xml")},e.prototype.saveTopLevelRelation=function(){this.addToArchive('<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml" /><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml" /><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml" /></Relationships>',"_rels/.rels")},e.prototype.saveWorkbookRelation=function(){for(var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',t=this.worksheets.length,i=0,n=0;n<t;n++,i++)e+='<Relationship Id="rId'+(n+1).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+(n+1).toString()+'.xml" />';e+='<Relationship Id="rId'+(++i).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />',this.sharedStringCount>0&&(e+='<Relationship Id="rId'+(++i).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" />'),this.addToArchive(e+"</Relationships>","xl/_rels/workbook.xml.rels")},e.prototype.saveContentType=function(){for(var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" />',t="",i=this.worksheets.length,n=0;n<i;n++)t+='<Override PartName="/xl/worksheets/sheet'+(n+1).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" />',null!=this.worksheets[n].images&&this.worksheets[n].images.length>0&&(t+='<Override PartName="/xl/drawings/drawing'+(n+1).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.drawing+xml" />');this.imageCount>0&&(t+='<Default Extension="png" ContentType="image/png" />'),this.sharedStringCount>0&&(e+='<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" />'),this.addToArchive(e+t+"</Types>","[Content_Types].xml")},e.prototype.addToArchive=function(e,t){if("string"==typeof e){var i=new Blob([e],{type:"text/plain"}),n=new GT(i,t);this.mArchive.addItem(n)}else{n=new GT(e,t);this.mArchive.addItem(n)}},e.prototype.processMergeCells=function(e,t,i){if(0!==e.rowSpan||0!==e.colSpan){var n=new kT;n.x=e.index,n.width=e.colSpan,n.y=t,n.height=e.rowSpan;var r=this.getCellName(n.y,n.x),o=this.getCellName(t+n.height,e.index+n.width);n.ref=r+":"+o;i.add(n);var s={x:n.x,y:n.y},a={x:e.index+n.width,y:t+n.height};this.updatedMergedCellStyles(s,a,e)}return i},e.prototype.updatedMergedCellStyles=function(e,t,i){for(var n=e.x;n<=t.x;n++)for(var r=e.y;r<=t.y;r++)this.mergedCellsStyle.set(this.getCellName(r,n),{x:n,y:r,styleIndex:i.styleIndex})},e.prototype.dateToTicks=function(e,t,i){if(e>=1&&e<=9999&&t>=1&&t<=12){var n=e-1;return 864e9*(365*n+(n/4|0)-(n/100|0)+(n/400|0)+(this.isLeapYear(e)?[0,31,60,91,121,152,182,213,244,274,305,335,366]:[0,31,59,90,120,151,181,212,243,273,304,334,365])[t-1]+i-1)}throw new Error("Not a valid date")},e.prototype.timeToTicks=function(e,t,i){if(e>=0&&e<24&&t>=0&&t<60&&i>=0&&i<60)return 1e4*(3600*e+60*t+i)*1e3;throw new Error("Not valid time")},e.prototype.isLeapYear=function(e){return e%4==0&&(e%100!=0||e%400==0)},e.prototype.toOADate=function(e){var t;if(0===(t=this.dateToTicks(e.getFullYear(),e.getMonth()+1,e.getDate())+this.timeToTicks(e.getHours(),e.getMinutes(),e.getSeconds())))return 0;if(t<31241376e9)throw new Error("Arg_OleAutDateInvalid");return(t-599264352e9)/1e4/864e5},e}(),QT=function(){},JT=function(){function e(e,t){this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.isCsvExport=!1,this.isElementIdChanged=!1,this.foreignKeyData={},this.gridPool={},this.parent=e,this.helper=new gT(e),this.locator=t,this.l10n=this.locator.getService("localization")}return e.prototype.getModuleName=function(){return"ExcelExport"},e.prototype.init=function(e){null!==e.element&&""===e.element.id&&(e.element.id=(new Date).toISOString(),this.isElementIdChanged=!0),this.parent=e,this.parent.isDestroyed||(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new fT(e.locale),e.id=Za("main-grid"),this.gridPool[e.id]=!1)},e.prototype.Map=function(e,t,i,n,r,o){var s=e;this.gridPool={},e.childGrid&&(g(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Tl(e).expandedRows);var a={requestType:"beforeExcelExport",gridObject:s,cancel:!1,isMultipleExport:i,workbook:n,isCsv:r,isBlob:o};return s.trigger("beforeExcelExport",a),a.cancel?new Promise((function(e,t){return e()})):(this.parent.log("exporting_begin",this.getModuleName()),this.data=new es(s),this.isExporting=!0,this.isBlob=a.isBlob,this.isCsvExport=!!a.isCsv&&a.isCsv,Oa(t)&&Aa(t,s),this.processRecords(s,t,a.isMultipleExport,a.workbook))},e.prototype.exportingSuccess=function(e){this.isExporting=!1,this.parent.trigger("excelExportComplete",this.isBlob?{promise:this.blobPromise}:{}),this.parent.log("exporting_complete",this.getModuleName()),e(this.book)},e.prototype.processRecords=function(e,t,i,n){var r=this;if(g(t)||g(t.dataSource)){if(g(t)||"CurrentPage"!==t.exportType){var o=[];return o.push(this.data.getData({},gT.getQuery(e,this.data))),o.push(this.helper.getColumnData(e)),new Promise((function(s,a){Promise.all(o).then((function(o){r.init(e),r.processInnerRecords(e,t,i,n,o[0]).then((function(){r.exportingSuccess(s)}))})).catch((function(e){a(r.book),r.parent.trigger("actionFailure",e)}))}))}return new Promise((function(o,s){r.init(e),r.processInnerRecords(e,t,i,n,r.parent.getCurrentViewRecords()),r.exportingSuccess(o)}))}t.dataSource instanceof yn||(t.dataSource=new yn(t.dataSource));var s=t.query?t.query:new on;return(g(s.isCountRequired)||e.aggregates)&&(s.isCountRequired=!0),new Promise((function(o,a){t.dataSource.executeQuery(s).then((function(s){r.init(e),r.processInnerRecords(e,t,i,n,s).then((function(){r.exportingSuccess(o)}))}))}))},e.prototype.processInnerRecords=function(e,t,i,n,r){var o=this;this.groupedColLength=e.groupSettings.columns.length;var s,a=5,l=[],h=!g(t);return h&&!g(t.multipleExport)&&(this.expType=g(t.multipleExport.type)?"AppendToSheet":t.multipleExport.type,g(t.multipleExport.blankRows)||(a=t.multipleExport.blankRows)),g(n)?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[]):"NewSheet"===this.expType?(this.workSheet=n.worksheets,this.rows=[],this.columns=[],this.styles=n.styles):(this.workSheet=[],this.rows=n.worksheets[0].rows,this.columns=n.worksheets[0].columns,this.styles=n.styles,this.rowLength=this.rows[this.rows.length-1].index+a,this.rowLength++),h&&(g(i)?(g(t.header)||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),g(t.footer)||(this.footer=JSON.parse(JSON.stringify(t.footer)))):(g(t.header)||!i&&"NewSheet"!==this.expType||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),g(t.footer)||"AppendToSheet"===this.expType&&i||(this.footer=JSON.parse(JSON.stringify(t.footer))))),this.includeHiddenColumn=!!h&&t.includeHiddenColumn,new Promise((function(i,n){e.childGridLevel=0,l=o.processGridExport(e,t,r),o.globalResolve=i,o.gridPool[e.id]=!0,o.helper.checkAndExport(o.gridPool,o.globalResolve)})).then((function(){var r=[];o.organiseRows(l,l[0].index,r),o.rows=o.rows.concat(r),g(o.footer)||("AppendToSheet"===o.expType&&!i||"NewSheet"===o.expType)&&o.processExcelFooter(o.footer);var a={};if(o.columns.length>0&&(a.columns=o.columns),a.rows=o.rows,o.workSheet.push(a),o.book.worksheets=o.workSheet,o.book.styles=o.styles,e.notify("finalPageSetup",o.book),!i){if(o.isCsvExport){S()&&e.isServerRendered&&(o.book.isServerRendered=e.isServerRendered),h&&!g(t.separator)&&","!==t.separator&&(s=t.separator);var p=new XT(o.book,"csv",e.locale,e.currencyCode,s);o.isBlob?o.blobPromise=p.saveAsBlob("text/csv"):h&&t.fileName?p.save(t.fileName):p.save("Export.csv")}else{p=new XT(o.book,"xlsx",e.locale,e.currencyCode);o.isBlob?o.blobPromise=p.saveAsBlob("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"):h&&t.fileName?p.save(t.fileName):p.save("Export.xlsx")}o.isElementIdChanged&&(e.element.id=""),delete e.expandedRows}return n}))},e.prototype.organiseRows=function(e,t,i){if(!e.length)return t;for(var n=0;n<e.length;n++){var r=e[n],o=r.childRows;o?(r.index=t++,delete r.childRows,i.push(r),t=this.organiseRows(o,t,i)):(r.index=t++,i.push(r))}return t},e.prototype.processGridExport=function(e,t,i){var n=[];g(t)||g(t.theme)||(this.theme=t.theme),e.childGrid&&!g(t)&&(e.hierarchyPrintMode=t.hierarchyExportMode||"Expanded");var r=new gT(e),o=Oa(t)?_a(t.columns,e.enableColumnVirtualization):r.getGridExportColumns(e.columns),s=r.getHeaders(o,this.includeHiddenColumn),a=e.groupSettings.columns.length;return n=this.processHeaderContent(e,s,a,n),n=g(t)||g(t.dataSource)||t.dataSource instanceof yn?g(t)||"CurrentPage"!==t.exportType?this.processRecordContent(e,i,s,t,void 0,n,r):this.processRecordContent(e,i,s,t,e.currentViewData,n,r):this.processRecordContent(e,i,s,t,t.dataSource,n,r),e.notify("export-DataBound",{excelRows:n,type:"excel"}),n},e.prototype.processRecordContent=function(e,t,i,n,r,o,s){var a;if(a=!g(r)&&r.length?r:t.result,g(a.level)?this.processRecordRows(e,a,i,0,0,n,o,s):this.processGroupedRows(e,a,i,a.level,0,n,o,s),!g(t.aggregates))if(g(r)){var l=t.result.GroupGuid?t.result.records:t.result;this.processAggregates(e,l,o,null,null,null,i.columns)}else this.processAggregates(e,t.result,o,r);return o},e.prototype.processGroupedRows=function(e,t,i,n,r,o,s,a){for(var l=0,h=t;l<h.length;l++){var p=h[l],d=[],c={};c.index=1+n;var u=e.getColumnByField(p.field),f={value:p.key,column:u,style:void 0,isForeignKey:u.isForeignColumn()},m=e.getColumnByField(p.field).headerText+": "+(u.enableGroupByFormat?p.key:this.exportValueFormatter.formatCellValue(f))+" - ";p.count>1?m+=p.count+" items":m+=p.count+" item";var y={captionText:m,type:this.isCsvExport?"CSV":"Excel"};this.parent.trigger("exportGroupCaption",y),c.value=y.captionText,c.style=this.getCaptionThemeStyle(this.theme);var v=new hs(e).generateRows(p);if(this.fillAggregates(e,v,t.level+t.childLevels,s,this.rowLength),d.push(c),s[s.length-1].cells.length>0){for(var b=t.level+t.childLevels+v[0].cells.length,w=0,C=0,S=s[s.length-1].cells;C<S.length;C++){var x=S[C];x.index<b&&(b=x.index),x.index>w&&(w=x.index),d[d.length-1].index!==x.index&&d.push(x)}for(b-c.index>1&&(c.colSpan=b-c.index);w<i.columns.length+n+t.childLevels;){var k={};k.index=w+1,k.style=this.getCaptionThemeStyle(this.theme),d.push(k),w++}}else{for(var T=0,D=0,E=i.columns;D<E.length;D++){E[D].visible&&T++}c.colSpan=t.childLevels+T}if(s[s.length-1].cells=d,this.rowLength++,this.groupedColLength<8&&n>1){var R={outlineLevel:n-1,isCollapsed:!0};s[s.length-1].grouping=R}!g(t.childLevels)&&t.childLevels>0?this.processGroupedRows(e,p.items,i,p.items.level,r,o,s,a):(r=this.processRecordRows(e,p.items,i,n,r,o,s,a),this.processAggregates(e,p,s,void 0,n,!0))}},e.prototype.processRecordRows=function(e,t,i,n,r,o,s,l){for(var h=1,p=[],d=i.columns,c=0,u=l.getGridRowModel(d,t,e,r);c<u.length;c++){var f=u[c];p=[],r++,h=1;for(var m=0,y=f.cells.length;m<y;m++){var v=f.cells[m];if(v.cellType===dr.Data){var b=v.column,w=b.field,C=g(w)?"":b.valueAccessor(w,f.data,b),S=g(C)?"":C,x=void 0;if(b.isForeignColumn&&b.isForeignColumn()&&(x=l.getFData(S,b),S=a(b.foreignKeyValue,x)),!g(S)){var k={},T={data:f.data,column:b,foreignKeyData:x,value:S,style:void 0,colSpan:1,cell:k};if(e.trigger("excelQueryCellInfo",T),(k=T.cell).index=h+n+e.childGridLevel,k.value=T.value,""===T.data&&e.childGridLevel&&1===h){var D={hAlign:"left"};T={style:D},k.colSpan=e.getVisibleColumns().length,k.value=this.l10n.getConstant("EmptyRecord")}if(T.colSpan>1&&(k.colSpan=T.colSpan),g(T.style))k.style={name:e.element.id+"column"+(h+n)};else{var E=this.getColumnStyle(e,h+n);k.style=this.mergeOptions(this.styles[E],T.style)}p.push(k)}h++}}var R={index:this.rowLength++,cells:p};if(this.groupedColLength<8&&n>0?(R.grouping={outlineLevel:n,isCollapsed:!0},s.push(R)):s.push(R),!g(e.childGrid)){e.isPrinting=!0;var P=!g(o)&&o.exportType?o.exportType:"AllPages",I=this.helper.createChildGrid(e,f,P,this.gridPool),M=I.childGrid,L=I.element;M.actionFailure=l.failureHandler(this.gridPool,M,this.globalResolve),M.childGridLevel=e.childGridLevel+1;var O={childGrid:M,row:f,exportProperties:o};this.parent.trigger("exportdetaildatabound",O),M.beforeDataBound=this.childGridCell(R,M,o,f),M.appendTo(L)}e.notify("export-RowDataBound",{rowObj:f,type:"excel",excelRows:s})}return r},e.prototype.childGridCell=function(e,t,i,n){var r=this;return function(o){t.beforeDataBound=null,o.cancel=!0,0===o.result.length&&(o.result=[""]),e.childRows=r.processGridExport(t,i,o);for(var s=r.parent.groupSettings.columns.length,a=e.childRows,l=0;l<a.length;l++)a[l].grouping={outlineLevel:s+t.childGridLevel,isCollapsed:!n.isExpand,isHidden:!n.isExpand};return t.destroy(),wt(t.element),r.gridPool[t.id]=!0,r.helper.checkAndExport(r.gridPool,r.globalResolve),e}},e.prototype.processAggregates=function(e,t,i,n,r,o,s){var a=new as(e);e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo();var l=void 0;if(l=g(n)?t:n,void 0===r&&(r=0),e.groupSettings.columns.length>0&&o){var h=new ls(e).generateRows(l,{level:l.level});h.length>0&&(i=this.fillAggregates(e,h,r,i))}else{r=e.groupSettings.columns.length>0&&!o?e.groupSettings.columns.length:r;var p=a.generateRows(l,t.aggregates,null,null,s);p.length>0&&!o&&(i=this.fillAggregates(e,p,r,i))}return i},e.prototype.fillAggregates=function(e,t,i,n,r){for(var o=0,s=t;o<s.length;o++){for(var a=s[o],l=[],h=0,p=0,d=a.cells;p<d.length;p++){var c=d[p],u={};if(c.cellType!==dr.DetailFooterIntent&&(c.visible||this.includeHiddenColumn))if(h++,c.isDataCell){var f=!g(c.column.footerTemplate),m=!g(c.column.groupFooterTemplate),y=!g(c.column.groupCaptionTemplate);if(u.index=h+i+e.childGridLevel,f)u.value=this.getAggreateValue(dr.Summary,c.column.footerTemplate,c,a);else if(m)u.value=this.getAggreateValue(dr.GroupSummary,c.column.groupFooterTemplate,c,a);else if(y)u.value=this.getAggreateValue(dr.CaptionSummary,c.column.groupCaptionTemplate,c,a);else for(var v=0,b=Object.keys(a.data[c.column.field]);v<b.length;v++){b[v]===c.column.type&&(g(a.data[c.column.field].Sum)?g(a.data[c.column.field].Average)?g(a.data[c.column.field].Max)?g(a.data[c.column.field].Min)?g(a.data[c.column.field].Count)?g(a.data[c.column.field].TrueCount)?g(a.data[c.column.field].FalseCount)?g(a.data[c.column.field].Custom)||(u.value=a.data[c.column.field].Custom):u.value=a.data[c.column.field][c.column.field+" - falsecount"]:u.value=a.data[c.column.field][c.column.field+" - truecount"]:u.value=a.data[c.column.field][c.column.field+" - count"]:u.value=a.data[c.column.field][c.column.field+" - min"]:u.value=a.data[c.column.field][c.column.field+" - max"]:u.value=a.data[c.column.field][c.column.field+" - average"]:u.value=a.data[c.column.field][c.column.field+" - sum"])}u.style=this.getCaptionThemeStyle(this.theme),this.aggregateStyle(c.column,u.style,c.column.field);var w=c.attributes.style;w.textAlign&&(u.style.hAlign=w.textAlign.toLowerCase());var C={row:a,type:f?gr.Footer:m?gr.GroupFooter:gr.GroupCaption,style:u};this.parent.trigger("excelAggregateQueryCellInfo",C),l.push(u)}else void 0===r&&(u.index=h+i+e.childGridLevel,u.style=this.getCaptionThemeStyle(this.theme),l.push(u))}if(g(r)){var S={};if(this.groupedColLength<8&&this.groupedColLength>0){var x={outlineLevel:n[n.length-1].grouping.outlineLevel,isCollapsed:!0};S={index:this.rowLength++,cells:l,grouping:x}}else S={index:this.rowLength++,cells:l};n.push(S)}else n.push({index:r,cells:l})}return n},e.prototype.aggregateStyle=function(e,t,i){var n=this.parent.getColumnByField(i);if("object"==typeof e.format){var r=e.format;t.numberFormat=g(r.format)?r.skeleton:r.format,g(r.type)||(t.type=r.type.toLowerCase())}else t.numberFormat=e.format;!g(n)&&g(t.type)&&(t.type=n.type.toLowerCase())},e.prototype.getAggreateValue=function(e,t,i,n){var r={};return r[d(dr,i.cellType)]=Ge(t),r[d(dr,i.cellType)](n.data[i.column.field?i.column.field:i.column.columnName])[0].textContent},e.prototype.mergeOptions=function(e,t){for(var i={},n=Object.keys(e),r=0;r<n.length;r++)"name"!==n[r]&&(i[n[r]]=e[n[r]]);n=Object.keys(t);for(r=0;r<n.length;r++)"name"!==n[r]&&(i[n[r]]=t[n[r]]);return i},e.prototype.getColumnStyle=function(e,t){for(var i=0,n=0,r=this.styles;n<r.length;n++){if(r[n].name===e.element.id+"column"+t)return i;i++}},e.prototype.processHeaderContent=function(e,t,i,n){var r=t.rows,o=t.columns,s=[];if(i>0)for(var a=0;a!==i;)this.columns.push({index:a+1,width:30}),a++;for(var l=0;l<r.length;l++){for(var h=1+i,p=[],d=0;d<r[l].cells.length;d++){var c={},u={},f=r[l].cells[d];if(f.cellType!==dr.HeaderIndent&&f.cellType!==dr.DetailHeader){for(var m={contains:!0,index:1};m.contains;)if(h=(m=this.getIndex(s,1,h)).index,!m.contains){u.index=m.index+e.childGridLevel;break}if(!g(f.rowSpan)&&1!==f.rowSpan){u.rowSpan=f.rowSpan;for(var y=1;y<f.rowSpan+1;y++){var v={rowIndex:0,columnIndex:0};v.rowIndex=y,v.columnIndex=h,s.push(v)}}g(f.colSpan)||1===f.colSpan||(u.colSpan=f.colSpan,h=h+u.colSpan-1),u.value=f.column.headerText,c=this.getHeaderThemeStyle(this.theme),g(f.column.textAlign)||(c.hAlign=f.column.textAlign.toLowerCase()),g(f.column.headerTextAlign)||(c.hAlign=f.column.headerTextAlign.toLowerCase());var b={cell:u,gridCell:f,style:c};e.trigger("excelHeaderQueryCellInfo",b),u.style=b.style,p.push(u),h++}}n.push({index:this.rowLength++,cells:p})}for(var w=0;w<o.length;w++)this.parseStyles(e,o[w],this.getRecordThemeStyle(this.theme),i+w+1);return n},e.prototype.getHeaderThemeStyle=function(e){var t={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};return g(e)||g(e.header)||(t=this.updateThemeStyle(e.header,t)),t},e.prototype.updateThemeStyle=function(e,t){return u(t,e)},e.prototype.getCaptionThemeStyle=function(e){var t={fontSize:13,backColor:"#F6F6F6"};return g(e)||g(e.caption)||(t=this.updateThemeStyle(e.caption,t)),t},e.prototype.getRecordThemeStyle=function(e){var t={fontSize:13,borders:{color:"#E0E0E0"}};return g(e)||g(e.record)||(t=this.updateThemeStyle(e.record,t)),t},e.prototype.processExcelHeader=function(e){if(!g(e.rows)&&("NewSheet"===this.expType||1===this.rowLength)){var t=void 0;void 0===e.headerRows?this.rowLength=e.rows.length:this.rowLength=e.headerRows,t=this.rowLength<e.rows.length?this.rowLength:e.rows.length,this.rowLength++;for(var i=0;i<t;i++){var n=e.rows[i];(null===n.index||g(n.index))&&(n.index=i+1),this.updatedCellIndex(n)}}},e.prototype.updatedCellIndex=function(e){for(var t=e.cells.length,i=0;i<t;i++){var n=e.cells[i];(null===n.index||g(n.index))&&(n.index=i+1)}this.rows.push(e)},e.prototype.processExcelFooter=function(e){if(!g(e.rows)){var t=void 0;void 0===e.footerRows?this.rowLength+=e.rows.length:e.footerRows>e.rows.length?(this.rowLength+=e.footerRows-e.rows.length,t=e.rows.length):t=e.footerRows;for(var i=0;i<t;i++){var n=e.rows[i];null===n.index||void 0===n.index?n.index=this.rowLength++:n.index+=this.rowLength,this.updatedCellIndex(n)}}},e.prototype.getIndex=function(e,t,i){for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o.rowIndex===t&&o.columnIndex===i)return{contains:!0,index:i+=1}}return{contains:!1,index:i}},e.prototype.parseStyles=function(e,t,i,n){if(!g(t.format))if("object"==typeof t.format){var r=t.format;i.numberFormat=g(r.format)?r.skeleton:r.format,g(r.type)||(i.type=r.type.toLowerCase())}else i.numberFormat=t.format,i.type=t.type;g(t.textAlign)||(i.hAlign=t.textAlign.toLowerCase()),Object.keys(i).length>0&&(i.name=e.element.id+"column"+n,this.styles.push(i)),g(t.width)||this.columns.push({index:n+e.childGridLevel,width:"number"==typeof t.width?t.width:this.helper.getConvertedWidth(t.width)})},e.prototype.destroy=function(){},e}(),ZT=".e-gridheader",$T=".e-gridcontent",eD=".e-inline-edit",tD=".e-editedbatchcell",iD="e-edit",nD=".e-gridpager",rD="e-delete",oD="e-save",sD="e-cancel",aD="e-copy",lD="e-pdfexport",hD="e-icon-group",pD="e-icon-ungroup",dD="e-csvexport",cD="e-excelexport",uD="e-icon-first",gD="e-icon-next",fD="e-icon-last",mD="e-icon-prev",yD="e-icon-ascending",vD="e-icon-descending",bD="e-groupdroparea",wD="e-gridpopup",CD=function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(kr,this.enableAfterRenderMenu,this),this.parent.on("initial-load",this.render,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initial-load",this.render),this.parent.off(kr,this.enableAfterRenderMenu),ye.remove(this.element,"keydown",this.keyDownHandler.bind(this)))},e.prototype.keyDownHandler=function(e){"Tab"!==e.code&&9!==e.which||this.contextMenu.close(),"Escape"===e.code&&(this.contextMenu.close(),this.parent.notify("restore-Focus",{}))},e.prototype.render=function(){this.parent.element.classList.add("e-noselect"),this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_cmenu"}),ye.add(this.element,"keydown",this.keyDownHandler.bind(this)),this.parent.element.appendChild(this.element);var e="#"+this.gridID;this.contextMenu=new sw({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-grid-menu"}),this.contextMenu.appendTo(this.element)},e.prototype.enableAfterRenderMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.contextMenu&&(this.contextMenu.destroy(),Ct(this.element),this.parent.element.classList.remove("e-noselect")),this.render())},e.prototype.getMenuItems=function(){for(var e=[],t=[],i=0,n=this.parent.contextMenuItems;i<n.length;i++){var r=n[i];"string"==typeof r&&-1!==this.getDefaultItems().indexOf(r)?-1!==r.toLocaleLowerCase().indexOf("export")?t.push(this.buildDefaultItems(r)):e.push(this.buildDefaultItems(r)):"string"!=typeof r&&e.push(r)}if(t.length>0){var o=this.buildDefaultItems("export");o.items=t,e.push(o)}return e},e.prototype.getLastPage=function(){var e=Math.floor(this.parent.pageSettings.totalRecordsCount/this.parent.pageSettings.pageSize);return this.parent.pageSettings.totalRecordsCount%this.parent.pageSettings.pageSize&&(e+=1),e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.contextMenuItemClick=function(e){switch(this.getKeyFromId(e.item.id)){case"AutoFitAll":this.parent.autoFitColumns([]);break;case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Edit":this.parent.editModule&&("Batch"===this.parent.editSettings.mode?this.row&&this.cell&&!isNaN(parseInt(this.cell.getAttribute("aria-colindex"),10))&&this.parent.editModule.editCell(parseInt(this.row.getAttribute("aria-rowindex"),10),this.parent.getColumns()[parseInt(this.cell.getAttribute("aria-colindex"),10)].field):(this.parent.editModule.endEdit(),this.parent.editModule.startEdit(this.row)));break;case"Delete":this.parent.editModule&&("Batch"!==this.parent.editSettings.mode&&this.parent.editModule.endEdit(),1===this.parent.getSelectedRecords().length?this.parent.editModule.deleteRow(this.row):this.parent.deleteRecord());break;case"Save":this.parent.editModule&&this.parent.editModule.endEdit();break;case"Cancel":this.parent.editModule&&this.parent.editModule.closeEdit();break;case"Copy":this.parent.copy();break;case"PdfExport":this.parent.pdfExport();break;case"ExcelExport":this.parent.excelExport();break;case"CsvExport":this.parent.csvExport();break;case"SortAscending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"FirstPage":this.parent.goToPage(1);break;case"PrevPage":this.parent.goToPage(this.parent.pageSettings.currentPage-1);break;case"LastPage":this.parent.goToPage(this.getLastPage());break;case"NextPage":this.parent.goToPage(this.parent.pageSettings.currentPage+1)}if(e.column=this.targetColumn,e.rowInfo=this.targetRowdata,S()){var t=e.rowInfo.row?{element:e.element,item:e.item,event:e.event,column:this.targetColumn,rowInfo:{rowData:this.targetRowdata.rowData,rowIndex:this.targetRowdata.rowIndex,cellIndex:this.targetRowdata.cellIndex}}:this.targetColumn?{element:e.element,item:e.item,event:e.event,column:this.targetColumn}:{element:e.element,item:e.item,event:e.event};this.parent.trigger("contextMenuClick",t)}else this.parent.trigger("contextMenuClick",e)},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof sw&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems),this.contextMenu.enableItems(this.disableItems),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.contextMenuBeforeOpen=function(e){var t=Tt(e.event.target,".e-grid");if(e.event&&t&&t!==this.parent.element)e.cancel=!0;else if(e.event&&(Tt(e.event.target,"."+bD)||Tt(e.event.target,"."+wD)||Tt(e.event.target,".e-summarycell")||Tt(e.event.target,".e-groupcaption")||Tt(e.event.target,".e-filterbarcell")))e.cancel=!0;else{this.targetColumn=this.getColumn(e.event),this.targetRowdata=this.parent.getRowInfo(e.event.target),g(e.parentItem)&&this.targetColumn&&this.targetRowdata.cell&&this.selectRow(e.event,!this.targetRowdata.cell.classList.contains("e-selectionbackground")||"Multiple"!==this.parent.selectionSettings.type);for(var i=[],n=[],r=0,o=e.items;r<o.length;r++){var s=o[r],a=this.getKeyFromId(s.id),l=this.defaultItems[a];if(-1!==this.getDefaultItems().indexOf(a))if(this.ensureDisabledStatus(a)&&this.disableItems.push(s.text),e.event&&(this.ensureTarget(e.event.target,eD)||this.ensureTarget(e.event.target,tD)))"Save"!==a&&"Cancel"!==a&&this.hiddenItems.push(s.text);else{if(this.parent.editModule&&"Batch"===this.parent.editSettings.mode&&(Tt(e.event.target,".e-gridform")||this.parent.editModule.getBatchChanges().changedRecords.length||this.parent.editModule.getBatchChanges().addedRecords.length||this.parent.editModule.getBatchChanges().deletedRecords.length)&&("Save"===a||"Cancel"===a))continue;g(e.parentItem)&&e.event&&!this.ensureTarget(e.event.target,l.target)&&this.hiddenItems.push(s.text)}else s.target&&e.event&&!this.ensureTarget(e.event.target,s.target)?s.separator?i.push(s.id):this.hiddenItems.push(s.text):this.ensureTarget(e.event.target,s.target)&&s.separator&&n.push(s.id)}n.length>0&&this.contextMenu.showItems(n,!0),this.contextMenu.enableItems(this.disableItems,!1),this.contextMenu.hideItems(this.hiddenItems),i.length>0&&this.contextMenu.hideItems(i,!0),this.eventArgs=e.event,e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger("contextMenuOpen",e),(e.cancel||this.hiddenItems.length===e.items.length&&!e.parentItem)&&(this.updateItemStatus(),e.cancel=!0)}Il(this.parent.element,this.contextMenu.element.parentElement)},e.prototype.ensureTarget=function(e,t){var i=e;return(i=!this.ensureFrozenHeader(e)||t!==ZT&&t!==$T?t===$T||t===ZT?Ka(Tt(e,".e-table"),t.substr(1,t.length)):Tt(e,t):Tt(e,t===ZT?"thead":"tbody"))&&Ka(i,"e-grid")===this.parent.element},e.prototype.ensureFrozenHeader=function(e){return!(!this.parent.getFrozenColumns()&&!this.parent.frozenRows||!Tt(e,ZT))},e.prototype.ensureDisabledStatus=function(e){var t=!1;switch(e){case"AutoFitAll":case"AutoFit":t=!(this.parent.ensureModuleInjected(Ld)&&!this.parent.isEdit)||this.targetColumn&&!this.targetColumn.field&&"AutoFit"===e;break;case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(Lw)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.field)&&(t=!0);break;case"Ungroup":(!this.parent.allowGrouping||!this.parent.ensureModuleInjected(Lw)||this.parent.ensureModuleInjected(Lw)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"Edit":case"Delete":case"Save":case"Cancel":this.parent.editModule&&0!==this.parent.getDataRows().length||(t=!0);break;case"Copy":0!==this.parent.getSelectedRowIndexes().length&&0!==this.parent.getCurrentViewRecords().length||(t=!0);break;case"export":this.parent.allowExcelExport&&this.parent.excelExport&&(this.parent.ensureModuleInjected(mT)||this.parent.ensureModuleInjected(JT))||(t=!0);break;case"PdfExport":this.parent.allowPdfExport&&this.parent.ensureModuleInjected(mT)||(t=!0);break;case"ExcelExport":case"CsvExport":this.parent.allowExcelExport&&this.parent.ensureModuleInjected(JT)||(t=!0);break;case"SortAscending":case"SortDescending":if(!this.parent.allowSorting||!this.parent.ensureModuleInjected(Ow)||this.targetColumn&&!this.targetColumn.field)t=!0;else if(this.parent.ensureModuleInjected(Ow)&&this.parent.sortSettings.columns.length>0&&this.targetColumn)for(var i=this.parent.sortSettings.columns,n=0;n<i.length;n++)i[n].field===this.targetColumn.field&&i[n].direction.toLowerCase()===e.toLowerCase().replace("sort","").toLocaleLowerCase()&&(t=!0);break;case"FirstPage":case"PrevPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(fg)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(fg)&&1===this.parent.pageSettings.currentPage)&&(t=!0);break;case"LastPage":case"NextPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(fg)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(fg)&&this.parent.pageSettings.currentPage===this.getLastPage())&&(t=!0)}return t},e.prototype.getContextMenu=function(){return this.element},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.contextMenu.destroy(),Ct(this.element),this.removeEventListener(),this.parent.element.classList.remove("e-noselect"))},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.gridID+"_cmenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.gridID+"_cmenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"AutoFitAll":case"AutoFit":t={target:ZT};break;case"Group":t={target:ZT,iconCss:hD};break;case"Ungroup":t={target:ZT,iconCss:pD};break;case"Edit":t={target:$T,iconCss:iD};break;case"Delete":t={target:$T,iconCss:rD};break;case"Save":t={target:eD,iconCss:oD};break;case"Cancel":t={target:eD,iconCss:sD};break;case"Copy":t={target:$T,iconCss:aD};break;case"export":t={target:$T};break;case"PdfExport":t={target:$T,iconCss:lD};break;case"ExcelExport":t={target:$T,iconCss:cD};break;case"CsvExport":t={target:$T,iconCss:dD};break;case"SortAscending":t={target:ZT,iconCss:yD};break;case"SortDescending":t={target:ZT,iconCss:vD};break;case"FirstPage":t={target:nD,iconCss:uD};break;case"PrevPage":t={target:nD,iconCss:mD};break;case"LastPage":t={target:nD,iconCss:fD};break;case"NextPage":t={target:nD,iconCss:gD}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","Group","Ungroup","Edit","Delete","Save","Cancel","Copy","export","PdfExport","ExcelExport","CsvExport","SortAscending","SortDescending","FirstPage","PrevPage","LastPage","NextPage"]},e.prototype.setLocaleKey=function(){var e={AutoFitAll:"autoFitAll",AutoFit:"autoFit",Copy:"Copy",Group:"Group",Ungroup:"Ungroup",Edit:"EditRecord",Delete:"DeleteRecord",Save:"Save",Cancel:"CancelButton",PdfExport:"Pdfexport",ExcelExport:"Excelexport",CsvExport:"Csvexport",export:"Export",SortAscending:"SortAscending",SortDescending:"SortDescending",FirstPage:"FirstPage",LastPage:"LastPage",PrevPage:"PreviousPage",NextPage:"NextPage"};if(S()){e.AutoFitAll="AutoFitAll";e.AutoFit="AutoFit"}return e},e.prototype.getColumn=function(e){var t=Tt(e.target,"th.e-headercell");if(t){var i=t.querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)}return this.parent.getRowInfo(e.target).column||null},e.prototype.selectRow=function(e,t){this.cell=e.target,this.row=Tt(e.target,"tr.e-row")||this.row,this.row&&t&&!Ka(e.target,"e-gridpager")&&this.parent.selectRow(parseInt(this.row.getAttribute("aria-rowindex"),10))},e}(),SD=function(){function e(e){Pa.Inject(CD),this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("contextMenuOpen",this.contextMenuOpen,this),this.parent.on("contextMenuClick",this.contextMenuClick,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("contextMenuOpen",this.contextMenuOpen),this.parent.off("contextMenuClick",this.contextMenuClick))},e.prototype.contextMenuOpen=function(e){var t=e.element.querySelector("#"+this.parent.element.id+"_gridcontrol_cmenu_AddRow"),i=e.element.querySelector("#"+this.parent.element.id+"_gridcontrol_cmenu_Edit");t&&(!1===this.parent.grid.editSettings.allowAdding?t.style.display="none":t.style.display="block"),"Cell"!==this.parent.editSettings.mode&&"Batch"!==this.parent.editSettings.mode||g(i)||i.classList.contains("e-menu-hide")||(i.style.display="none")},e.prototype.contextMenuClick=function(e){"Above"!==e.item.id&&"Below"!==e.item.id||(this.parent.notify("savePreviousRowPosition",e),this.parent.setProperties({editSettings:{newRowPosition:e.item.id}},!0),this.parent.addRecord())},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getContextMenu=function(){return this.parent.grid.contextMenuModule.getContextMenu()},e}(),xD=function(){function e(e){var t=this;this.headerContextMenuClick=function(e){var i=Tt(e.event.target,".e-row"),n=Tt(e.event.target,".e-chart-row");g(i)&&g(n)&&(e.type="Header",t.parent.trigger("contextMenuClick",e))},this.headerContextMenuOpen=function(e){var i=Tt(e.event.target,".e-row"),n=Tt(e.event.target,".e-chart-row");g(i)&&g(n)?(e.type="Header",t.parent.trigger("contextMenuOpen",e)):e.cancel=!0},this.parent=e,this.ganttID=e.element.id,hp.Inject(SD),this.parent.treeGrid.contextMenuClick=this.headerContextMenuClick.bind(this),this.parent.treeGrid.contextMenuOpen=this.headerContextMenuOpen.bind(this),this.addEventListener(),this.resetItems()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("initiate-contextMenu",this.render,this),this.parent.on("reRender-contextMenu",this.reRenderContextMenu,this),this.parent.on("contextMenuClick",this.contextMenuItemClick,this),this.parent.on("contextMenuOpen",this.contextMenuBeforeOpen,this))},e.prototype.reRenderContextMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.contextMenu&&(this.contextMenu.destroy(),Ct(this.element)),this.resetItems(),this.render())},e.prototype.render=function(){this.element=this.parent.createElement("ul",{id:this.ganttID+"_contextmenu",className:"e-grid"}),this.parent.element.appendChild(this.element);var e="#"+this.ganttID;this.contextMenu=new sw({items:this.getMenuItems(),locale:this.parent.locale,target:e,animationSettings:{effect:"None"},select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-gantt"}),this.contextMenu.appendTo(this.element),this.parent.treeGrid.contextMenuItems=this.headerMenuItems},e.prototype.contextMenuItemClick=function(e){this.item=this.getKeyFromId(e.item.id);var t=a("parentObj",e.item),i=-1;switch(t&&!g(t.id)&&"DeleteDependency"===this.getKeyFromId(t.id)&&(i=t.items.indexOf(e.item)),this.parent.isAdaptive&&("TaskInformation"!==this.item&&"Above"!==this.item&&"Below"!==this.item&&"Child"!==this.item&&"DeleteTask"!==this.item||this.parent.selectionModule&&"Multiple"===this.parent.selectionSettings.type&&(this.parent.selectionModule.hidePopUp(),document.getElementsByClassName("e-gridpopup")[0].style.display="none")),this.item){case"TaskInformation":this.parent.openEditDialog(Number(this.rowData.ganttProperties.rowUniqueID));break;case"Above":case"Below":case"Child":var n=this.item,r=u({},{},this.rowData.taskData,!0),o=this.parent.taskFields;if(g(o.dependency)||(r[o.dependency]=null),!g(o.child)&&r[o.child]&&delete r[o.child],!g(o.parentID)&&r[o.parentID]&&(r[o.parentID]=null),this.rowData){var s=this.parent.currentViewData.indexOf(this.rowData);this.parent.addRecord(r,n,s)}break;case"Milestone":case"ToMilestone":this.parent.convertToMilestone(this.rowData.ganttProperties.rowUniqueID);break;case"DeleteTask":this.parent.editModule.deleteRecord(this.rowData);break;case"ToTask":if(r=u({},{},this.rowData.taskData,!0),g((o=this.parent.taskFields).duration)){r[o.startDate]=new Date(this.rowData.taskData[o.startDate]);var l=new Date(this.rowData.taskData[o.startDate]);l.setDate(l.getDate()+1),r[o.endDate]=l}else{var h=this.rowData.ganttProperties;r[o.duration]="1 "+h.durationUnit}g(r[o.milestone])||!0===r[o.milestone]&&(r[o.milestone]=!1),this.parent.updateRecordByID(r);break;case"Cancel":this.parent.cancelEdit();break;case"Save":this.parent.editModule.cellEditModule.isCellEdit=!1,this.parent.treeGrid.grid.saveCell();break;case"Dependency"+i:this.parent.connectorLineEditModule.removePredecessorByIndex(this.rowData,i);break;case"Auto":case"Manual":this.parent.changeTaskMode(this.rowData);break;case"Indent":this.parent.indent();break;case"Outdent":this.parent.outdent()}e.type="Content",e.rowData=this.rowData,this.parent.trigger("contextMenuClick",e)},e.prototype.contextMenuBeforeOpen=function(e){var t=this,i=e.event?e.event.target:this.parent.focusModule?this.parent.ganttChartModule.targetElement:this.parent.focusModule.getActiveElement();e.gridRow=Tt(i,".e-row"),e.chartRow=Tt(i,".e-chart-row");var n=Tt(i,".e-gantt");if(!Tt(i,".e-gridform")&&this.parent.editModule&&this.parent.editModule.cellEditModule&&this.parent.editModule.cellEditModule.isCellEdit&&this.parent.editModule.dialogModule.dialogObj&&!this.parent.editModule.dialogModule.dialogObj.open&&(this.parent.treeGrid.grid.saveCell(),this.parent.editModule.cellEditModule.isCellEdit=!1),this.parent.readOnly&&this.contextMenu.enableItems(["Add","Save","Convert","Delete Dependency","Delete Task","TaskMode","Indent","Outdent"],!1),(g(e.gridRow)&&g(e.chartRow)||0===this.contentMenuItems.length)&&(g(e.parentItem)||g(n)?e.cancel=!0:e.cancel=!1),!e.cancel){var r=-1;e.gridRow?r=parseInt(e.gridRow.getAttribute("aria-rowindex"),0):e.chartRow&&(r=parseInt(a("rowIndex",e.chartRow),0)),this.parent.selectionModule&&this.parent.allowSelection&&this.parent.selectionModule.selectRow(r),e.parentItem||(this.rowData=this.parent.currentViewData[r]);for(var o=0,s=e.items;o<s.length;o++){var l=s[o];l.separator||this.updateItemStatus(l,i)}if(e.rowData=this.rowData,e.type="Content",e.disableItems=this.disableItems,e.hideItems=this.hideItems,0===e.rowData.level&&"ResourceView"===this.parent.viewType)return void(e.cancel=!0);var h=new vn;return this.parent.trigger("contextMenuOpen",e,(function(e){h.resolve(e),S()&&(e.element=g(e.element)?e.element:x(e.element),e.gridRow=g(e.gridRow)?e.gridRow:x(e.gridRow),e.chartRow=g(e.chartRow)?e.chartRow:x(e.chartRow)),t.hideItems=e.hideItems,t.disableItems=e.disableItems,e.parentItem||e.hideItems.length!==e.items.length||(t.revertItemStatus(),e.cancel=!0),t.hideItems.length>0&&t.contextMenu.hideItems(t.hideItems),t.disableItems.length>0&&t.contextMenu.enableItems(t.disableItems,!1)})),h}},e.prototype.updateItemStatus=function(e,t){var i=this.getKeyFromId(e.id);if(Tt(t,".e-gridform"))"Save"!==i&&"Cancel"!==i&&this.hideItems.push(e.text);else switch(i){case"TaskInformation":this.parent.editSettings.allowEditing&&this.parent.editModule||this.updateItemVisibility(e.text);break;case"Add":this.parent.editSettings.allowAdding&&this.parent.editModule||this.updateItemVisibility(e.text);break;case"Save":case"Cancel":this.hideItems.push(e.text);break;case"Convert":if(this.rowData.hasChildRecords)this.hideItems.push(e.text);else if(this.parent.editSettings.allowEditing&&this.parent.editModule){var n=[];this.rowData.ganttProperties.isMilestone?n.push(this.createItemModel(".e-content","ToTask",this.getLocale("toTask"))):n.push(this.createItemModel(".e-content","ToMilestone",this.getLocale("toMilestone"))),e.items=n}else this.updateItemVisibility(e.text);break;case"DeleteDependency":var r=this.getPredecessorsItems();this.rowData.hasChildRecords?this.hideItems.push(e.text):this.parent.editSettings.allowDeleting&&0!==r.length&&this.parent.editModule?r.length>0&&(e.items=r):this.updateItemVisibility(e.text);break;case"DeleteTask":this.parent.editSettings.allowDeleting&&this.parent.editModule||this.updateItemVisibility(e.text);break;case"TaskMode":var o=[];"Custom"!==this.parent.taskMode?this.updateItemVisibility(e.text):(this.rowData.ganttProperties.isAutoSchedule?o.push(this.createItemModel(".e-content","Manual",this.getLocale("manual"))):o.push(this.createItemModel(".e-content","Auto",this.getLocale("auto"))),e.items=o);break;case"Indent":var s=this.parent.selectedRowIndex,a=!!this.parent.selectionModule&&(1===this.parent.selectionModule.selectedRowIndexes.length||1===this.parent.selectionModule.getSelectedRowCellIndexes().length),l=this.parent.currentViewData[this.parent.selectionModule.getSelectedRowIndexes()[0]-1];this.parent.editSettings.allowEditing&&0!==s&&-1!==s&&a&&"ResourceView"!==this.parent.viewType&&this.parent.currentViewData[s].level-l.level!=1||this.hideItems.push(e.text);break;case"Outdent":var h=this.parent.selectionModule.getSelectedRowIndexes()[0],p=!!this.parent.selectionModule&&(1===this.parent.selectionModule.selectedRowIndexes.length||1===this.parent.selectionModule.getSelectedRowCellIndexes().length);this.parent.editSettings.allowEditing&&-1!==h&&0!==h&&p&&"ResourceView"!==this.parent.viewType&&0!==this.parent.currentViewData[h].level||this.hideItems.push(e.text)}},e.prototype.updateItemVisibility=function(e){!!g(this.parent.contextMenuItems)?this.hideItems.push(e):this.disableItems.push(e)},e.prototype.contextMenuOpen=function(e){this.isOpen=!0,ut([e.element.querySelectorAll("li:not(.e-menu-hide)")[0]],"e-focused")},e.prototype.getMenuItems=function(){for(var e=0,t=g(this.parent.contextMenuItems)?this.getDefaultItems():this.parent.contextMenuItems;e<t.length;e++){var i=t[e];"string"==typeof i&&-1!==this.getDefaultItems().indexOf(i)?this.buildDefaultItems(i):"string"!=typeof i&&(-1!==this.getDefaultItems().indexOf(i.text)?this.buildDefaultItems(i.text,i.iconCss):".e-gridheader"===i.target?this.headerMenuItems.push(i):this.contentMenuItems.push(i))}return this.contentMenuItems},e.prototype.createItemModel=function(e,t,i,n){return{text:i,id:this.generateID(t),target:e,iconCss:n?"e-icons "+n:null}},e.prototype.getLocale=function(e){return this.parent.localeObj.getConstant(e)},e.prototype.buildDefaultItems=function(e,t){var i;switch(e){case"AutoFitAll":case"AutoFit":case"SortAscending":case"SortDescending":this.headerMenuItems.push(e);break;case"TaskInformation":i=this.createItemModel(".e-content",e,this.getLocale("taskInformation"),this.getIconCSS("e-edit",t));break;case"Indent":i=this.createItemModel(".e-content",e,this.getLocale("indent"),this.getIconCSS("e-indent",t));break;case"Outdent":i=this.createItemModel(".e-content",e,this.getLocale("outdent"),this.getIconCSS("e-outdent",t));break;case"Save":i=this.createItemModel("e-edit",e,this.getLocale("save"),this.getIconCSS("e-save",t));break;case"Cancel":i=this.createItemModel("e-edit",e,this.getLocale("cancel"),this.getIconCSS("e-cancel",t));break;case"Add":(i=this.createItemModel(".e-content",e,this.getLocale("add"),this.getIconCSS("e-add",t))).items=[],i.items.push(this.createItemModel(".e-content","Above",this.getLocale("above"),this.getIconCSS("e-add-above",t))),i.items.push(this.createItemModel(".e-content","Below",this.getLocale("below"),this.getIconCSS("e-add-below",t))),"ResourceView"!==this.parent.viewType&&i.items.push(this.createItemModel(".e-content","Child",this.getLocale("child"))),i.items.push(this.createItemModel(".e-content","Milestone",this.getLocale("milestone")));break;case"DeleteTask":i=this.createItemModel(".e-content",e,this.getLocale("deleteTask"),this.getIconCSS("e-delete",t));break;case"DeleteDependency":(i=this.createItemModel(".e-content",e,this.getLocale("deleteDependency"))).items=[],i.items.push({});break;case"Convert":(i=this.createItemModel(".e-content",e,this.getLocale("convert"))).items=[],i.items.push({});break;case"TaskMode":(i=this.createItemModel(".e-content",e,this.getLocale("changeScheduleMode"))).items=[],i.items.push({})}i&&this.contentMenuItems.push(i)},e.prototype.getIconCSS=function(e,t){return g(t)?e:t},e.prototype.getPredecessorsItems=function(){this.predecessors=this.parent.predecessorModule.getValidPredecessor(this.rowData);for(var e,t=[],i=0,n=0,r=this.predecessors;n<r.length;n++){var o=r[n],s=this.parent.getRecordByID(o.from).ganttProperties,a=s.rowUniqueID+" - "+s.taskName,l="Dependency"+i++;e=this.createItemModel(".e-content",l,a),t.push(e)}return t},e.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","TaskInformation","DeleteTask","Save","Cancel","SortAscending","SortDescending","Add","DeleteDependency","Convert","TaskMode","Indent","Outdent"]},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("initiate-contextMenu",this.render),this.parent.off("reRender-contextMenu",this.reRenderContextMenu),this.parent.off("contextMenuClick",this.contextMenuItemClick),this.parent.off("contextMenuOpen",this.contextMenuOpen))},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof sw&&this.revertItemStatus()},e.prototype.revertItemStatus=function(){S()&&g(this.disableItems)&&(this.disableItems=[]),this.contextMenu.showItems(this.hideItems),this.contextMenu.enableItems(this.disableItems),this.hideItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.resetItems=function(){this.hideItems=[],this.disableItems=[],this.headerMenuItems=[],this.contentMenuItems=[],this.item=null},e.prototype.generateID=function(e){return this.ganttID+"_contextMenu_"+e},e.prototype.getKeyFromId=function(e){var t=this.ganttID+"_contextMenu_";return e.indexOf(t)>-1?e.replace(t,""):"Custom"},e.prototype.destroy=function(){this.contextMenu.destroy(),Ct(this.element),this.removeEventListener(),this.contextMenu=null,this.element=null},e}(),kD=function(){function e(e){this.theme=e,this.ganttStyle={},this.setTheme(this.ganttStyle,this.theme)}return Object.defineProperty(e.prototype,"style",{get:function(){return this.ganttStyle||this.setTheme(this.ganttStyle,"Material"),this.ganttStyle},enumerable:!0,configurable:!0}),e.prototype.setTheme=function(e,t){switch(this.initStyles(e),e.columnHeader.fontSize=9.5,e.columnHeader.fontColor=new pS(0,0,0),e.columnHeader.fontColor.gray=.2,e.columnHeader.backgroundColor=new pS(255,255,255),e.columnHeader.borderColor=new pS(234,234,234),e.columnHeader.format.lineAlignment=1,e.columnHeader.format.alignment=0,e.fontFamily=YC.Helvetica,e.cell.fontSize=9.5,e.cell.backgroundColor=new pS(255,255,255),e.cell.borderColor=new pS(234,234,234),e.cell.fontColor=new pS(0,0,0),e.cell.fontColor.gray=.2,e.cell.format.lineAlignment=1,e.cell.format.alignment=0,e.footer.fontSize=9.5,e.footer.fontStyle=0,e.footer.format.alignment=1,e.footer.format.lineAlignment=1,e.timeline.fontSize=9.5,e.timeline.fontStyle=0,e.timeline.backgroundColor=new pS(252,252,252),e.timeline.fontColor=new pS(40,40,39),e.chartGridLineColor=new pS(206,206,206),e.timeline.borderColor=new pS(206,206,206),t){case"Bootstrap":e.taskbar.taskColor=new pS(49,122,185),e.taskbar.progressColor=new pS(33,82,125),e.taskbar.parentTaskColor=new pS(119,119,119),e.taskbar.parentProgressColor=new pS(85,85,85),e.taskbar.taskBorderColor=new pS(33,82,125),e.taskbar.parentTaskBorderColor=new pS(85,85,85),e.taskbar.milestoneColor=new pS(85,85,85),e.footer.fontColor=new pS(0,0,0),e.footer.fontColor.gray=.2,e.connectorLineColor=new pS(33,82,125),e.footer.backgroundColor=new pS(255,255,255),e.taskbar.progressFontColor=new pS(255,255,255),e.label.fontColor=new pS(0,0,0);break;case"Bootstrap 4":e.taskbar.taskColor=new pS(0,123,255),e.taskbar.progressColor=new pS(0,86,179),e.taskbar.parentTaskColor=new pS(108,117,125),e.taskbar.parentProgressColor=new pS(73,80,87),e.taskbar.taskBorderColor=new pS(0,86,179),e.taskbar.parentTaskBorderColor=new pS(73,80,87),e.taskbar.milestoneColor=new pS(73,80,87),e.footer.fontColor=new pS(0,0,0),e.footer.fontColor.gray=.2,e.connectorLineColor=new pS(0,86,179),e.footer.backgroundColor=new pS(255,255,255),e.taskbar.progressFontColor=new pS(255,255,255),e.label.fontColor=new pS(33,37,41);break;case"Fabric":e.columnHeader.fontColor=new pS(102,102,102),e.cell.fontColor=new pS(51,51,51),e.taskbar.taskColor=new pS(0,120,214),e.taskbar.progressColor=new pS(0,91,163),e.taskbar.parentTaskColor=new pS(118,118,118),e.taskbar.parentProgressColor=new pS(80,80,80),e.taskbar.taskBorderColor=new pS(0,91,163),e.taskbar.parentTaskBorderColor=new pS(80,80,80),e.taskbar.milestoneColor=new pS(80,80,80),e.footer.fontColor=new pS(51,51,51),e.footer.fontColor.gray=.2,e.connectorLineColor=new pS(0,69,122),e.footer.backgroundColor=new pS(255,255,255),e.taskbar.progressFontColor=new pS(255,255,255),e.label.fontColor=new pS(51,51,51);break;default:e.taskbar.taskColor=new pS(88,105,197),e.taskbar.progressColor=new pS(63,81,181),e.taskbar.parentTaskColor=new pS(132,132,132),e.taskbar.parentProgressColor=new pS(97,97,97),e.taskbar.taskBorderColor=new pS(63,81,181),e.taskbar.parentTaskBorderColor=new pS(51,51,51),e.taskbar.milestoneColor=new pS(97,97,97),e.footer.fontColor=new pS(0,0,0),e.footer.fontColor.gray=.2,e.connectorLineColor=new pS(63,81,181),e.footer.backgroundColor=new pS(255,255,255),e.taskbar.progressFontColor=new pS(255,255,255),e.label.fontColor=new pS(51,51,51)}},e.prototype.initStyles=function(e){e.columnHeader={},e.columnHeader.format=new fS,e.cell={},e.cell.format=new fS,e.timeline={},e.footer={},e.footer.format=new fS,e.label={},e.taskbar={}},e}(),TD=function(){function e(){this.mKeys=[],this.mValues=[]}return e.prototype.size=function(){return this.mKeys.length},e.prototype.add=function(e,t){if(null==e||null==t)throw new ReferenceError("Provided key or value is not valid.");if(this.mKeys.indexOf(e)<0)return this.mKeys.push(e),this.mValues.push(t),1;throw new RangeError("An item with the same key has already been added.")},e.prototype.keys=function(){return this.mKeys},e.prototype.values=function(){return this.mValues},e.prototype.getValue=function(e){if(null==e)throw new ReferenceError("Provided key is not valid.");var t=this.mKeys.indexOf(e);if(t<0)throw new RangeError("No item with the specified key has been added.");return this.mValues[t]},e.prototype.setValue=function(e,t){if(null==e)throw new ReferenceError("Provided key is not valid.");var i=this.mKeys.indexOf(e);i<0?(this.mKeys.push(e),this.mValues.push(t)):this.mValues[i]=t},e.prototype.remove=function(e){if(null==e)throw new ReferenceError("Provided key is not valid.");var t=this.mKeys.indexOf(e);if(t<0)throw new RangeError("No item with the specified key has been added.");return this.mKeys.splice(t,1),this.mValues.splice(t,1),!0},e.prototype.containsKey=function(e){if(null==e)throw new ReferenceError("Provided key is not valid.");return!(this.mKeys.indexOf(e)<0)},e.prototype.clear=function(){this.mKeys=[],this.mValues=[]},e}(),DD=function(){function e(){var e=new gS(new pS(0,0,0));e.dashStyle=jC.Solid;var t=new gS(new pS(0,0,0));t.dashStyle=jC.Solid;var i=new gS(new pS(0,0,0));i.dashStyle=jC.Solid;var n=new gS(new pS(0,0,0));n.dashStyle=jC.Solid,this.leftPen=e,this.rightPen=t,this.topPen=i,this.bottomPen=n}return Object.defineProperty(e.prototype,"left",{get:function(){return this.leftPen},set:function(e){this.leftPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.rightPen},set:function(e){this.rightPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.topPen},set:function(e){this.topPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.bottomPen},set:function(e){this.bottomPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all",{set:function(e){this.leftPen=this.rightPen=this.topPen=this.bottomPen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAll",{get:function(){return this.leftPen===this.rightPen&&this.leftPen===this.topPen&&this.leftPen===this.bottomPen},enumerable:!0,configurable:!0}),Object.defineProperty(e,"default",{get:function(){return new e},enumerable:!0,configurable:!0}),e}(),ED=function(){function e(e,t,i,n){this.hasLeftPad=!1,this.hasRightPad=!1,this.hasTopPad=!1,this.hasBottomPad=!1,void 0===e?(this.leftPad=this.rightPad=5.76,this.bottomPad=this.topPad=.5):(this.leftPad=e,this.rightPad=t,this.topPad=i,this.bottomPad=n,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.leftPad},set:function(e){this.leftPad=e,this.hasLeftPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.rightPad},set:function(e){this.rightPad=e,this.hasRightPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.topPad},set:function(e){this.topPad=e,this.hasTopPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.bottomPad},set:function(e){this.bottomPad=e,this.hasBottomPad=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all",{set:function(e){this.leftPad=this.rightPad=this.topPad=this.bottomPad=e,this.hasLeftPad=!0,this.hasRightPad=!0,this.hasTopPad=!0,this.hasBottomPad=!0},enumerable:!0,configurable:!0}),e}();!function(e){e[e.NextPage=0]="NextPage",e[e.LastPage=1]="LastPage"}(ak||(ak={}));var RD=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),PD=function(e){function t(t){var i=e.call(this,t)||this;return i.columnRanges=[],i.repeatRowIndex=-1,i.currentBounds=new MC(0,0,0,0),i}return RD(t,e),Object.defineProperty(t.prototype,"treegrid",{get:function(){return this.elements},enumerable:!0,configurable:!0}),t.prototype.layoutInternal=function(e){if(g(e))throw Error("Argument Null Expection");this.currentPage=e.page;var t=e.format;if(null!==this.currentPage&&(this.currentPageBounds=this.currentPage.getClientSize()),this.currentGraphics=this.currentPage.graphics,null!==t&&t.break===CS.FitColumnsToPage?this.currentBounds=new MC(new PC(e.bounds.x,e.bounds.y),new IC(this.treegrid.columns.width,this.currentGraphics.clientSize.height)):this.currentBounds=new MC(new PC(e.bounds.x,e.bounds.y),this.currentGraphics.clientSize),0===this.treegrid.rows.count)throw Error("Please add row or header into grid");return this.currentBounds.width=e.bounds.width>0?e.bounds.width:this.currentBounds.width-this.treegrid.rows.getRow(0).cells.getCell(0).style.borders.left.width/2,this.startLocation=new PC(e.bounds.x,e.bounds.y),e.bounds.height>0&&(this.currentBounds.height=e.bounds.height),this.treegrid.style.allowHorizontalOverflow||this.treegrid.isFitToWidth?(this.treegrid.measureColumnsWidth(this.currentBounds),this.columnRanges.push([0,this.treegrid.columns.count-1])):(this.treegrid.measureColumnsWidth(),this.determineColumnDrawRanges()),this.layoutOnPage(e)},t.prototype.determineColumnDrawRanges=function(){for(var e=0,t=0,i=0,n=this.currentGraphics.clientSize.width-this.currentBounds.x,r=0;r<this.treegrid.columns.count;r++)if((i+=this.treegrid.columns.getColumn(r).width)>=n){for(var o=0,s=e;s<=r&&!((o+=this.treegrid.columns.getColumn(s).width)>n);s++)t=s;this.columnRanges.push([e,t]),e=t+1,i=t<=r?this.treegrid.columns.getColumn(r).width:0}this.columnRanges.push([e,this.treegrid.columns.count-1])},t.prototype.getFormat=function(e){return e},t.prototype.layoutOnPage=function(e){for(var t,i=this.getFormat(e.format),n=new TD,r=e.page,o=0;o<this.columnRanges.length;o++){var s=this.columnRanges[o];this.cellStartIndex=s[0],this.cellEndIndex=s[1];for(var a=this.treegrid.rows.count,l=0,h=!1,p=0;p<a;p++){var d=this.treegrid.rows.getRow(p);l++;var c=this.currentBounds.y;null===this.currentPage||n.containsKey(this.currentPage)||n.add(this.currentPage,s);var u=this.drawRow(d);for(c===this.currentBounds.y?(h=!0,this.repeatRowIndex=this.treegrid.rows.rowCollection.indexOf(d)):(h=!1,this.repeatRowIndex=-1);!u.isFinish&&null!==r;)if(this.treegrid.allowRowBreakAcrossPages)this.currentPage=this.getNextPageFormat(i),this.treegrid.enableHeader&&this.drawHeader(),c=this.currentBounds.y,this.checkBounds(i),u=this.drawRow(d);else{if(!this.treegrid.allowRowBreakAcrossPages&&l<length){this.currentPage=this.getNextPageFormat(i),this.treegrid.enableHeader&&this.drawHeader();break}if(l>=length)break}!u.isFinish&&null!==r&&i.layout!==wS.OnePage&&h&&(this.startLocation.x=this.currentBounds.x,this.currentPage=this.getNextPageFormat(i),this.treegrid.enableHeader&&this.drawHeader(),this.startLocation.y=this.currentBounds.y,i.paginateBounds===new MC(0,0,0,0)&&(this.currentBounds.x+=this.startLocation.x),this.currentBounds.x===DD.default.left.width/2&&(this.currentBounds.y+=this.startLocation.x),this.drawRow(d),null===this.currentPage||n.containsKey(this.currentPage)||n.add(this.currentPage,s))}this.columnRanges.indexOf(s)<this.columnRanges.length-1&&null!==r&&i.layout!==wS.OnePage&&(this.currentPage=this.getNextPageFormat(i),this.checkBounds(i))}return t=this.getLayoutResult(),this.treegrid.style.allowHorizontalOverflow&&this.treegrid.style.horizontalOverflowType===ak.NextPage&&this.reArrangePages(n),t},t.prototype.checkBounds=function(e){var t=new PC(DD.default.right.width/2,DD.default.top.width/2);e.paginateBounds===new MC(0,0,0,0)&&this.startLocation===t&&(this.currentBounds.x+=this.startLocation.x,this.currentBounds.y+=this.startLocation.y)},t.prototype.drawHeader=function(){this.drawRow(this.treegrid.rows.getRow(0))},t.prototype.reArrangePages=function(e){for(var t=this.currentPage.document,i=[],n=e.keys(),r=0;r<n.length;r++){(a=n[r]).section=null,i.push(a),t.pages.remove(a)}for(r=0;r<e.size();r++)for(var o=e.size()/this.columnRanges.length,s=r;s<e.size();s+=o){var a=i[s];-1===t.pages.indexOf(a)&&t.pages.add(a)}},t.prototype.getNextPageFormat=function(e){var t=this.currentPage.section,i=null,n=t.indexOf(this.currentPage);return i=n===t.count-1?t.add():t.getPages()[n+1],this.currentGraphics=i.graphics,this.currentBounds=new MC(new PC(0,0),i.getClientSize()),i},t.prototype.getLayoutResult=function(){var e=new MC(this.startLocation,new IC(this.currentBounds.width,this.currentBounds.y-this.startLocation.y));return new ID(this.currentPage,e)},t.prototype.checkIfDefaultFormat=function(e){var t=new fS;return e.alignment===t.alignment&&e.characterSpacing===t.characterSpacing&&e.clipPath===t.clipPath&&e.firstLineIndent===t.firstLineIndent&&e.horizontalScalingFactor===t.horizontalScalingFactor&&e.lineAlignment===t.lineAlignment&&e.lineLimit===t.lineLimit&&e.lineSpacing===t.lineSpacing&&e.measureTrailingSpaces===t.measureTrailingSpaces&&e.noClip===t.noClip&&e.paragraphIndent===t.paragraphIndent&&e.rightToLeft===t.rightToLeft&&e.subSuperScript===t.subSuperScript&&e.wordSpacing===t.wordSpacing&&e.wordWrap===t.wordWrap},t.prototype.drawRow=function(e,t,i){if(g(t)){var n=new Wk,r=e.rowBreakHeight>0?e.rowBreakHeight:e.height;return r>this.currentPageBounds.height?this.treegrid.allowRowBreakAcrossPages?(n.isFinish=!0,this.drawRowWithBreak(n,e,r)):(n.isFinish=!1,this.drawRow(e,n,r)):this.currentBounds.y+r>this.currentPageBounds.height||this.currentBounds.y+r>this.currentBounds.height?this.repeatRowIndex>-1&&this.repeatRowIndex===e.rowIndex?this.treegrid.allowRowBreakAcrossPages?(n.isFinish=!0,this.drawRowWithBreak(n,e,r)):(n.isFinish=!1,this.drawRow(e,n,r)):n.isFinish=!1:(n.isFinish=!0,this.drawRow(e,n,r)),n}var o=new PC(this.currentBounds.x,this.currentBounds.y);t.bounds=new MC(o,new IC(0,0));var s=0;i=this.reCalculateHeight(e,i);for(var a=this.cellStartIndex;a<=this.cellEndIndex;a++){var l=e.cells.getCell(a),h=this.treegrid.columns.getColumn(a);h.isTreeColumn&&(s=10*e.level);var p=a>this.cellEndIndex+1&&l.columnSpan>1;if(!p)for(var d=1;d<l.columnSpan;d++)e.cells.getCell(a+d).isCellMergeContinue=!0;var c=new IC(h.width,i);!this.checkIfDefaultFormat(h.format)&&this.checkIfDefaultFormat(l.style.format)&&(l.style.format=h.format);l.draw(this.currentGraphics,new MC(o,c),p,s);e.treegrid.style.allowHorizontalOverflow&&(l.columnSpan>this.cellEndIndex||a+l.columnSpan>this.cellEndIndex+1)&&this.cellEndIndex<e.cells.count-1&&(e.rowOverflowIndex=this.cellEndIndex),o.x+=h.width,s=0}return this.currentBounds.y+=i,t.bounds=new MC(new PC(t.bounds.x,t.bounds.y),new IC(o.x,o.y)),null},t.prototype.drawRowWithBreak=function(e,t,i){var n=new PC(this.currentBounds.x,this.currentBounds.y);e.bounds=new MC(n,new IC(0,0));var r=0;this.treegridHeight=this.currentBounds.height,t.rowBreakHeight=this.currentBounds.y+i-this.currentBounds.height;for(var o=0;o<t.cells.count;o++){(l=t.cells.getCell(o)).measureHeight()===i&&null===l.value&&(t.rowBreakHeight=this.currentBounds.y+i-this.currentBounds.height)}for(var s=this.cellStartIndex;s<=this.cellEndIndex;s++){var a=this.treegrid.columns.getColumn(s);a.isTreeColumn&&(r=10*t.level);var l,h=(l=t.cells.getCell(s)).columnSpan+s>this.cellEndIndex+1&&l.columnSpan>1;if(!h)for(var p=1;p<l.columnSpan;p++)t.cells.getCell(s+p).isCellMergeContinue=!0;var d=this.treegridHeight>0?this.treegridHeight:this.currentBounds.height,c=new IC(a.width,d);!this.checkIfDefaultFormat(a.format)&&this.checkIfDefaultFormat(l.style.format)&&(l.style.format=a.format);l.draw(this.currentGraphics,new MC(n,c),h,r);e.isFinish=e.isFinish?l.finishedDrawingCell:e.isFinish,n.x+=a.width,r=0,this.currentBounds.y+=this.treegridHeight>0?this.treegridHeight:i,e.bounds=new MC(new PC(e.bounds.x,e.bounds.y),new IC(n.x,n.y))}},t.prototype.reCalculateHeight=function(e,t){for(var i=0,n=this.cellStartIndex;n<=this.cellEndIndex;n++)g(e.cells.getCell(n).remainingString)&&""!==e.cells.getCell(n).remainingString||(i=Math.max(i,e.cells.getCell(n).measureHeight()));return Math.max(t,i)},t}(lk),ID=function(e){function t(t,i){return e.call(this,t,i)||this}return RD(t,e),t}(dk),MD=function(e){function t(t){return void 0===t?e.call(this)||this:e.call(this,t)||this}return RD(t,e),t}(hk),LD=function(){function e(e){this.parent=e}return e.prototype.processGridExport=function(e,t,i){this.flatData=e,this.gantt=t,this.exportValueFormatter=new OD(this.parent.locale),this.exportProps=i,this.rowIndex=0,this.colIndex=0,this.columns=this.parent.treeGrid.columns,this.gantt.treeColumnIndex=this.parent.treeColumnIndex,this.gantt.rowHeight=jl(this.parent.rowHeight),this.gantt.style.cellPadding.left=0,this.gantt.style.cellPadding.right=0,this.ganttStyle=this.gantt.ganttStyle,this.gantt.borderColor=this.ganttStyle.chartGridLineColor,this.processHeaderContent(),this.processGanttContent(),this.processTimeline(),this.processTaskbar(),this.processPredecessor()},e.prototype.processHeaderContent=function(){var e=this;this.rowIndex++,this.row=this.gantt.rows.addRow();var t=0;this.columns.forEach((function(i){e.isColumnVisible(i)&&(e.processColumnHeader(i,t),t++)}))},e.prototype.processColumnHeader=function(e,t){this.gantt.columns.add(1);var i=this.gantt.columns.getColumn(t);this.parent.treeColumnIndex===t&&(i.isTreeColumn=!0);var n=parseInt(e.width,10);i.width=jl(n),this.totalColumnWidth+=i.width,i.headerText=e.headerText,i.field=e.field;var r=this.row.cells.getCell(t);r.value=e.headerText,r.isHeaderCell=!0;var o=this.parent.timelineModule.isSingleTier?45:60;this.row.height=jl(o),this.copyStyles(this.ganttStyle.columnHeader,r,!1),e.headerTextAlign&&(r.style.format.alignment=FC[e.headerTextAlign]);var s={cell:r,style:r.style,value:r.value,column:e};this.parent.pdfColumnHeaderQueryCellInfo&&this.parent.trigger("pdfColumnHeaderQueryCellInfo",s),r.value=s.value},e.prototype.isColumnVisible=function(e){var t=e.visible||this.exportProps.includeHiddenColumn,i=!!g(e.template);return t&&i},e.prototype.processGanttContent=function(){var e=this;0===this.flatData.length?this.renderEmptyGantt():this.flatData.forEach((function(t){e.row=e.gantt.rows.addRow(),t.hasChildRecords?(e.gantt.rows.getRow(e.rowIndex).isParentRow=!0,e.processRecordRow(t)):e.processRecordRow(t),e.rowIndex++}))},e.prototype.processTimeline=function(){var e=this.parent.timelineModule;this.gantt.chartHeader.topTierHeight=this.gantt.chartHeader.bottomTierHeight=this.parent.timelineModule.isSingleTier?45:30,this.gantt.chartHeader.topTierCellWidth=e.topTierCellWidth,this.gantt.chartHeader.bottomTierCellWidth=e.bottomTierCellWidth,this.gantt.chartHeader.topTier=u([],[],e.topTierCollection,!0),this.gantt.chartHeader.bottomTier=u([],[],e.bottomTierCollection,!0),this.gantt.chartHeader.width=e.totalTimelineWidth,this.gantt.chartHeader.height=this.gantt.rows.getRow(0).height,this.gantt.timelineStartDate=new Date(e.timelineStartDate.getTime())},e.prototype.processPredecessor=function(){var e=this;(g(this.exportProps.showPredecessorLines)||this.exportProps.showPredecessorLines)&&(this.parent.pdfExportModule.isPdfExport=!0,this.parent.predecessorModule.createConnectorLinesCollection(),this.parent.updatedConnectorLineCollection.forEach((function(t){var i=e.gantt.predecessor.add();i.parentLeft=t.parentLeft,i.childLeft=t.childLeft,i.parentWidth=t.parentWidth,i.childWidth=t.childWidth,i.parentIndex=t.parentIndex,i.childIndex=t.childIndex,i.rowHeight=t.rowHeight,i.type=t.type,i.milestoneParent=t.milestoneParent,i.milestoneChild=t.milestoneChild,i.lineWidth=e.parent.connectorLineWidth>5?jl(5):jl(e.parent.connectorLineWidth),i.connectorLineColor=e.ganttStyle.connectorLineColor,e.gantt.predecessorCollection.push(i)})),this.parent.pdfExportModule.isPdfExport=!1)},e.prototype.processRecordRow=function(e){var t=this;this.colIndex=0,this.row.level=e.level,this.columns.forEach((function(i){t.isColumnVisible(i)&&(t.processRecordCell(e,i,t.row),t.colIndex++)}))},e.prototype.processRecordCell=function(e,t,i){var n=i.cells.getCell(this.colIndex),r=this.parent.taskFields,o=e.ganttProperties;if("datepickeredit"===t.editType||"datetimepickeredit"===t.editType?n.value=this.parent.getFormatedDate(e[t.field],this.parent.getDateFormat()):t.field===r.duration?n.value=this.parent.getDurationString(o.duration,o.durationUnit):t.field===r.resourceInfo?n.value=o.resourceNames:t.field===r.work?n.value=this.parent.getWorkString(o.work,o.workUnit):n.value=g(e[t.field])?"":e[t.field].toString(),n.isHeaderCell=!1,n.style.padding=new ED,this.copyStyles(this.ganttStyle.cell,n,i.isParentRow),this.colIndex!==this.parent.treeColumnIndex?n.style.format.alignment=FC[t.textAlign]:n.style.format.paragraphIndent=10*n.row.level,null!=this.parent.pdfQueryCellInfo){var s={data:e,value:n.value,column:t,style:n.style,cell:n};s.value=this.exportValueFormatter.formatCellValue(s),this.parent.pdfQueryCellInfo&&this.parent.trigger("pdfQueryCellInfo",s),n.value=s.value}},e.prototype.processTaskbar=function(){var e=this;this.flatData.forEach((function(t){var i=e.gantt.taskbar.add(),n=t.ganttProperties;i.left=n.left,i.progress=n.progress,i.isScheduledTask=Fl(n),Fl?g(n.endDate)&&g(n.duration)?i.unscheduledTaskBy="startDate":g(n.startDate)&&g(n.duration)?i.unscheduledTaskBy="endDate":(i.unscheduledTaskBy="duration",i.unscheduleStarteDate=e.parent.dateValidationModule.getValidStartDate(t.ganttProperties),i.unscheduleEndDate=e.parent.dateValidationModule.getValidEndDate(t.ganttProperties)):(i.unscheduleStarteDate=null,i.unscheduleEndDate=null),i.startDate=n.startDate,i.endDate=n.endDate,i.width=n.width,i.height=e.parent.chartRowsModule.taskBarHeight,i.isMilestone=n.isMilestone,i.milestoneColor=new pS(e.ganttStyle.taskbar.milestoneColor),i.isParentTask=t.hasChildRecords,n.isMilestone&&(i.height=n.width),t[e.parent.labelSettings.leftLabel]&&(i.leftTaskLabel.value=t[e.parent.labelSettings.leftLabel].toString()),t[e.parent.labelSettings.rightLabel]&&(i.rightTaskLabel.value=t[e.parent.labelSettings.rightLabel].toString());var r=n.isMilestone?Math.floor(e.parent.chartRowsModule.taskBarHeight/2)+33:33;i.rightTaskLabel.left=n.left+n.width+r,i.fontFamily=e.ganttStyle.fontFamily,i.progressWidth=n.progressWidth,i.labelColor=new pS(e.ganttStyle.label.fontColor),i.progressFontColor=new pS(e.ganttStyle.taskbar.progressFontColor),i.isParentTask?(i.taskColor=new pS(e.ganttStyle.taskbar.parentTaskColor),i.taskBorderColor=new pS(e.ganttStyle.taskbar.parentTaskBorderColor),i.progressColor=new pS(e.ganttStyle.taskbar.parentProgressColor)):(i.taskColor=new pS(e.ganttStyle.taskbar.taskColor),i.taskBorderColor=new pS(e.ganttStyle.taskbar.taskBorderColor),i.progressColor=new pS(e.ganttStyle.taskbar.progressColor)),i.gridLineColor=new pS(e.ganttStyle.chartGridLineColor),e.gantt.taskbarCollection.push(i);var o={};o.progressFontColor=i.progressFontColor,o.taskColor=i.taskColor,o.taskBorderColor=i.taskBorderColor,o.progressColor=i.progressColor,o.milestoneColor=i.milestoneColor;var s={taskbar:o,data:t};e.parent.pdfQueryTaskbarInfo&&(e.parent.trigger("pdfQueryTaskbarInfo",s),i.progressFontColor=s.taskbar.progressFontColor,i.taskColor=s.taskbar.taskColor,i.taskBorderColor=s.taskbar.taskBorderColor,i.progressColor=s.taskbar.progressColor,i.milestoneColor=s.taskbar.milestoneColor)}))},e.prototype.getHorizontalAlignment=function(e,t){switch(void 0===t&&(t=new fS),e){case"Right":t.alignment=FC.Right;break;case"Center":t.alignment=FC.Center;break;case"Justify":t.alignment=FC.Justify;break;case"Left":t.alignment=FC.Left}return t},e.prototype.getVerticalAlignment=function(e,t,i){switch(void 0===t&&(t=new fS,t=this.getHorizontalAlignment(i,t)),e){case"Bottom":t.lineAlignment=BC.Bottom;break;case"Middle":t.lineAlignment=BC.Middle;break;case"Top":t.lineAlignment=BC.Top}return t},e.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},e.prototype.getFont=function(e){if(e.font)return e.font;var t=g(e.style.fontSize)?9.75:.75*e.style.fontSize,i=g(e.style.fontFamily)?YC.TimesRoman:this.getFontFamily(e.style.fontFamily),n=KC.Regular;return!g(e.style.bold)&&e.style.bold&&(n|=KC.Bold),!g(e.style.italic)&&e.style.italic&&(n|=KC.Italic),!g(e.style.underline)&&e.style.underline&&(n|=KC.Underline),!g(e.style.strikeout)&&e.style.strikeout&&(n|=KC.Strikeout),new Qx(i,t,n)},e.prototype.renderEmptyGantt=function(){var e=this.gantt.rows.addRow();e.cells.getCell(0).isHeaderCell=!1,e.height=jl(this.parent.rowHeight),this.copyStyles(this.ganttStyle.columnHeader,e.cells.getCell(0),e.isParentRow);var t=this.columns.length;this.mergeCells(0,0,t)},e.prototype.mergeCells=function(e,t,i){this.gantt.rows.getRow(e).cells.getCell(t).columnSpan=i},e.prototype.copyStyles=function(e,t,i){t.style.fontColor=new pS(e.fontColor),t.style.backgroundColor=new pS(e.backgroundColor),t.style.borderColor=new pS(e.borderColor),t.style.fontSize=e.fontSize,t.style.fontStyle=e.fontStyle,t.style.format=Object.assign(new fS,e.format),t.style.borders=new DD,t.style.borders.all=new gS(t.style.borderColor),t.style.padding=new ED;var n=0;n=t.isHeaderCell?this.parent.timelineModule.isSingleTier?22.5:30:this.parent.rowHeight/2,t.style.padding.top=n-e.fontSize,t.style.padding.bottom=n-e.fontSize,t.style.padding.left=10,t.style.padding.right=10},e.prototype.initializePdf=function(e){this.pdfDoc=e;var t=[],i=this.pdfDoc.pageSettings.width-82;this.totalColumnWidth>this.pdfDoc.pageSettings.width-82?this.gantt.style.allowHorizontalOverflow=!0:i/this.columns.length<t[0]&&(this.gantt.columns.getColumn(0).width=t[0]);this.pdfDoc.sections.add();if(this.exportProps.enableFooter||g(this.exportProps.enableFooter)){var n=new MC(0,0,e.pageSettings.width,35),r=new gS(this.ganttStyle.chartGridLineColor),o=new $k(n),s=new uS(this.ganttStyle.footer.backgroundColor);o.graphics.drawRectangle(r,s,0,0,e.pageSettings.width,35);var a=new Qx(this.ganttStyle.fontFamily,this.ganttStyle.footer.fontSize,this.ganttStyle.footer.fontStyle),l=new uS(this.ganttStyle.footer.fontColor),h=new oT(a),p=new dT(a,l),d=new aT(a,l,"Page {0}",h,p);d.stringFormat=this.ganttStyle.footer.format,d.bounds=n,d.draw(o.graphics,new PC(0,0)),e.template.bottom=o}},e}(),OD=function(){function e(e){this.valueFormatter=new Cn(e),this.internationalization=new ee(e)}return e.prototype.returnFormattedValue=function(e,t){return!g(e.value)&&e.value?this.valueFormatter.getFormatFunction(t)(e.value):""},e.prototype.formatCellValue=function(e){if(e.isForeignKey&&(e.value=a(e.column.foreignKeyValue,bl(e.column,{},e.value)[0])),"number"===e.column.type&&void 0!==e.column.format&&""!==e.column.format)return e.value?this.internationalization.getNumberFormat({format:e.column.format})(e.value):"";if("boolean"===e.column.type)return e.value?"true":"false";if("date"!==e.column.type&&"datetime"!==e.column.type&&"time"!==e.column.type||void 0===e.column.format)return(g(e.column.type)||g(e.value))&&g(e.value)?"":e.value.toString();if("string"==typeof e.value&&(e.value=new Date(e.value)),"string"==typeof e.column.format){var t=void 0;return t="date"===e.column.type?{type:"date",skeleton:e.column.format}:"time"===e.column.type?{type:"time",skeleton:e.column.format}:{type:"dateTime",skeleton:e.column.format},this.returnFormattedValue(e,t)}if(e.column.format instanceof Object&&void 0===e.column.format.type)return e.value.toString();var i=void 0;return i="date"===e.column.type?{type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:"time"===e.column.type?{type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:{type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton},this.returnFormattedValue(e,i)},e}(),AD=function(){return(AD=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},BD=function(){function e(e){this.leftTaskLabel={},this.rightTaskLabel={},this.startPage=-1,this.endPage=-1,this.parent=e}return e.prototype.add=function(){return new e(this.parent)},e.prototype.GetNextPage=function(e){var t=e.section,i=t.indexOf(e);return i===t.count-1?t.add():t.getPages()[i+1]},e.prototype.drawTaskbar=function(e,t,i,n,r,o){var s=e.graphics,a=!1,l=e.getClientSize(),h=(new gS(o.gridLineColor,.5),t.y+r);h>l.height&&(s=(e=this.GetNextPage(e)).graphics,t.y=0,this.parent.pdfExportModule.gantt.enableHeader&&(this.parent.pdfExportModule.gantt.chartHeader.drawPageTimeline(e,t,i),t.y=jl(this.parent.timelineModule.isSingleTier?45:60)),h=t.y+r,a=!0),this.drawLeftLabel(e,t,i,n);var p=new Qx(this.fontFamily,9,KC.Regular),d=new uS(this.progressFontColor),c=new fS;c.lineAlignment=BC.Middle,c.alignment=FC.Right;var u=-1;if(o.isMilestone)this.drawMilestone(e,t,i,n);else{var f=new gS(o.taskBorderColor),m=new uS(o.taskColor),y=new gS(o.progressColor),v=new uS(o.progressColor),b=jl((this.parent.rowHeight-this.height)/2);u=e.section.indexOf(e);var w=g(this.unscheduleStarteDate)?this.startDate:this.unscheduleStarteDate,C=g(this.unscheduleEndDate)?this.endDate:this.unscheduleEndDate;if(i.startDate<=w&&C<=i.endDate)this.isStartPoint||(this.taskStartPoint=AD({},t),this.isStartPoint=!0),this.isScheduledTask||"duration"===this.unscheduledTaskBy?(s.drawRectangle(f,m,t.x+jl(this.left-n)+.5,t.y+b,jl(o.width),jl(o.height)),this.progress>0&&this.progressWidth>0&&this.isScheduledTask&&(s.drawRectangle(y,v,t.x+jl(this.left-n)+.5,t.y+b,jl(o.progressWidth),jl(o.height)),g(this.parent.taskFields.progress)||g(this.parent.labelSettings.taskLabel)||s.drawString(this.progress.toString(),p,null,d,t.x+jl(this.left-n),t.y+b,jl(this.progressWidth),jl(this.height),c))):this.drawUnscheduledTask(s,t,n,b),this.isCompleted=!0,this.startPage=u,this.endPage=u;else if(i.startDate<=w&&i.endDate>=w&&!(C<i.endDate)){this.isStartPoint||(this.taskStartPoint=AD({},t),this.isStartPoint=!0);var S;if(this.width=this.width-(i.totalWidth-(this.left-n)),S=i.totalWidth-(this.left-n),this.isScheduledTask||"duration"===this.unscheduledTaskBy){if(s.drawRectangle(f,m,t.x+jl(this.left-n)+.5,t.y+b,jl(S),jl(o.height)),this.progress>0&&this.progressWidth>0&&this.isScheduledTask){var x=0;x=this.progressWidth<=S?this.progressWidth:S,s.drawRectangle(y,v,t.x+jl(this.left-n)+.5,t.y+b,jl(x),jl(o.height)),this.progressWidth-=x,0===this.progressWidth&&0!==this.progress&&this.parent.labelSettings.taskLabel&&s.drawString(this.progress.toString(),p,null,d,t.x+jl(this.left-n),t.y+b,jl(x),jl(this.height),c)}}else this.drawUnscheduledTask(s,t,n,b);this.left=0,this.isCompleted=!1,this.startPage=u}else if(C<=i.endDate&&i.startDate<=C&&!this.isCompleted)this.isStartPoint||(this.taskStartPoint=AD({},t),this.isStartPoint=!0),s.drawRectangle(f,m,t.x+jl(o.left+.5),t.y+b,jl(o.width),jl(o.height)),this.isScheduledTask&&(s.drawRectangle(y,v,t.x+jl(o.left+.5),t.y+b,jl(o.progressWidth),jl(o.height)),0===this.progressWidth&&0!==this.progress&&s.drawString(this.progress.toString(),p,null,d,t.x+jl(this.left),t.y+b,jl(this.progressWidth),jl(this.height),c)),this.isCompleted=!0,this.endPage=u;else if(w<i.startDate&&C>i.endDate){if(this.isStartPoint||(this.taskStartPoint=AD({},t),this.isStartPoint=!0),s.drawRectangle(f,m,t.x+jl(o.left)+.5,t.y+b,jl(i.totalWidth),jl(o.height)),this.progress>0&&this.progressWidth>0&&this.isScheduledTask){x=0;x=this.progressWidth<=i.totalWidth?this.progressWidth:i.totalWidth,s.drawRectangle(y,v,t.x+jl(o.left)+.5,t.y+b,jl(x),jl(o.height)),this.progressWidth-=x,0===this.progressWidth&&0!==this.progress&&s.drawString(this.progress.toString(),p,null,d,t.x+jl(this.left),t.y+b,jl(x),jl(this.height),c)}this.isCompleted=!1,this.width-=i.totalWidth}}return this.drawRightLabel(e,t,i,n),a},e.prototype.drawRightLabel=function(e,t,i,n){var r,o=e.graphics,s=(r=this.rightTaskLabel.isLeftCalculated?this.rightTaskLabel.left:jl(this.rightTaskLabel.left))-jl(n)+t.x;if(i.startPoint<=r&&r<i.endPoint&&!g(this.rightTaskLabel.value)&&!this.rightTaskLabel.isCompleted){var a=this.getWidth(this.rightTaskLabel.value,i.endPoint-r,15),l=new Qx(this.fontFamily,9),h=(jl(this.parent.rowHeight)-a.actualSize.height)/2,p=new PC(s,t.y+h),d=new IC(a.actualSize.width,a.actualSize.height),c=new MC(p,d),u=new fS;if(u.alignment=FC.Right,u.lineAlignment=BC.Middle,a.actualSize.width>0){var f=new uS(this.labelColor);o.drawString(a.lines[0].text,l,null,f,c.x,c.y,a.actualSize.width,a.actualSize.height,u),null!==a.remainder?(this.rightTaskLabel.value=a.remainder,this.rightTaskLabel.left=i.endPoint,this.rightTaskLabel.isLeftCalculated=!0):this.rightTaskLabel.isCompleted=!0}else this.rightTaskLabel.left=i.endPoint}},e.prototype.drawLeftLabel=function(e,t,i,n){var r,o=e.graphics;if(!g(this.leftTaskLabel.value)){var s;if(s=this.left,this.leftTaskLabel.isLeftCalculated)r=this.leftTaskLabel.left;else{var a=this.getWidth(this.leftTaskLabel.value,Number.MAX_VALUE,15);r=jl(s-(this.isMilestone?Math.floor(this.parent.chartRowsModule.taskBarHeight/2)+33:33))-a.actualSize.width,this.leftTaskLabel.left=r,this.leftTaskLabel.isLeftCalculated=!0}var l=r-jl(n)+t.x;if(i.startPoint<=r&&r<i.endPoint&&!g(this.leftTaskLabel.value)&&!this.leftTaskLabel.isCompleted){a=this.getWidth(this.leftTaskLabel.value,i.endPoint-r,15);var h=new Qx(this.fontFamily,9),p=(jl(this.parent.rowHeight)-a.actualSize.height)/2,d=new PC(l,t.y+p),c=new IC(a.actualSize.width,a.actualSize.height),u=new MC(d,c),f=new fS;if(f.alignment=FC.Right,f.lineAlignment=BC.Middle,a.actualSize.width>0){var m=new uS(this.labelColor);o.drawString(a.lines[0].text,h,null,m,u.x,u.y,a.actualSize.width,a.actualSize.height,f),null!==a.remainder?(this.leftTaskLabel.value=a.remainder,this.leftTaskLabel.left=i.endPoint):this.leftTaskLabel.isCompleted=!0}else this.leftTaskLabel.left=i.endPoint}}},e.prototype.getWidth=function(e,t,i){var n=new Qx(this.fontFamily,9),r=new yS,o=new fS;return o.alignment=FC.Left,o.wordWrap=QC.Character,o.lineAlignment=BC.Middle,r.layout(e,n,o,new IC(t,i),!1,new IC(t,i))},e.prototype.drawUnscheduledTask=function(e,t,i,n){var r=new uS(this.taskColor);e.drawRectangle(r,t.x+jl(this.left-i),t.y+n,jl(3),jl(this.height))},e.prototype.drawMilestone=function(e,t,i,n){if(i.startDate<=this.startDate&&this.startDate<=i.endDate){var r=e.graphics,o=e.section.indexOf(e);this.taskStartPoint=AD({},t);var s=new gS(this.milestoneColor),a=jl((this.parent.rowHeight-this.height)/2),l=new uS(this.milestoneColor);r.save();var h=Math.floor(.6*this.parent.chartRowsModule.taskBarHeight);r.translateTransform(t.x+jl(this.left-n),t.y+a-.7*this.parent.chartRowsModule.taskBarHeight/2),r.rotateTransform(45),r.drawRectangle(s,l,0,0,jl(h),jl(h)),r.restore(),this.endPage=this.startPage=o}},e}(),FD=function(){function e(e){this.cellWidth=0,this.cellHeight=0,this.finishedDrawingCell=!0,g(e)?(this.rowSpan=1,this.columnSpan=1):this.row=e,this.style={}}return Object.defineProperty(e.prototype,"height",{get:function(){return 0===this.cellHeight&&(this.cellHeight=this.measureHeight()),this.cellHeight},set:function(e){this.cellHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 0===this.cellWidth&&(this.cellWidth=this.measureWidth()),Math.round(this.cellWidth)},set:function(e){this.cellWidth=e},enumerable:!0,configurable:!0}),e.prototype.measureWidth=function(){var e=0,t=new yS;if("string"==typeof this.value){var i=new Qx(this.row.treegrid.ganttStyle.fontFamily,this.style.fontSize,this.style.fontStyle);e+=t.layout(this.value,i,this.style.format,new IC(Number.MAX_VALUE,Number.MAX_VALUE),!1,new IC(0,0)).actualSize.width,e+=2*(this.style.borders.left.width+this.style.borders.right.width)}return void 0!==this.row.treegrid.style.cellPadding.left&&this.row.treegrid.style.cellPadding.hasLeftPad&&(e+=this.row.treegrid.style.cellPadding.left),void 0!==this.row.treegrid.style.cellPadding.right&&this.row.treegrid.style.cellPadding.hasRightPad&&(e+=this.row.treegrid.style.cellPadding.right),e+=this.row.treegrid.style.cellSpacing},e.prototype.measureHeight=function(){var e=this.row.treegrid.rowHeight,t=0,i=this.calculateWidth();i-=this.row.treegrid.style.cellPadding.right+this.row.treegrid.style.cellPadding.left,i-=this.style.borders.left.width+this.style.borders.right.width;var n=new yS;if("string"==typeof this.value||"string"==typeof this.remainingString){var r=this.value;this.finishedDrawingCell||(r=g(this.remainingString)||""===this.remainingString?this.value:this.remainingString);var o=new Qx(this.row.treegrid.ganttStyle.fontFamily,this.style.fontSize,this.style.fontStyle);t+=n.layout(r,o,this.style.format,new IC(i,0),!1,new IC(0,0)).actualSize.height,t+=2*(this.style.borders.top.width+this.style.borders.bottom.width)}return t+=this.row.treegrid.style.cellPadding.top+this.row.treegrid.style.cellPadding.bottom,(t+=this.row.treegrid.style.cellSpacing)>e?t:e},e.prototype.calculateWidth=function(){for(var e=this.row.cells.indexOf(this),t=this.columnSpan,i=0,n=0;n<t;n++)i+=this.row.treegrid.columns.getColumn(e+n).width;return this.row.treegrid.columns.getColumn(e).isTreeColumn&&(i-=10*this.row.level),i},e.prototype.draw=function(e,t,i,n){var r=null;if(i){for(var o=this.row.cells.indexOf(this),s=o+1;s<=o+this.columnSpan;s++)this.row.cells.getCell(s).isCellMergeContinue=!1,this.row.cells.getCell(s).isRowMergeContinue=!1;this.columnSpan=1}if((this.isCellMergeContinue||this.isRowMergeContinue)&&this.isCellMergeContinue&&this.row.treegrid.style.allowHorizontalOverflow)return this.row.rowOverflowIndex>0&&this.row.cells.indexOf(this)!==this.row.rowOverflowIndex+1||0===this.row.rowOverflowIndex&&this.isCellMergeContinue,r;this.drawCellBackground(e,t);var a=new uS(this.style.fontColor),l=null;l=this.row.isParentRow?new Qx(this.row.treegrid.ganttStyle.fontFamily,this.style.fontSize,KC.Bold):new Qx(this.row.treegrid.ganttStyle.fontFamily,this.style.fontSize,this.style.fontStyle);var h=t;if(this.isHeaderCell||(h.x=h.x,h.width=h.width),h.height>=e.clientSize.height&&(this.row.treegrid.allowRowBreakAcrossPages?(h.height-=h.y,t.height-=t.y):(h.height=e.clientSize.height,t.height=e.clientSize.height)),h=this.adjustContentLayoutArea(h),"string"==typeof this.value||"string"==typeof this.remainingString){var p=null;this.finishedDrawingCell?(p=""===this.remainingString?this.remainingString:this.value,e.drawString(p,l,null,a,h.x+n,h.y,h.width-n-10,h.height-10,this.style.format)):e.drawString(this.remainingString,l,null,a,h.x+n,h.y,this.style.format),r=e.stringLayoutResult}return null!=this.style.borders&&this.drawCellBorder(e,t),r},e.prototype.drawCellBackground=function(e,t){var i=new uS(this.style.backgroundColor);null!=i&&(e.save(),e.drawRectangle(i,t.x,t.y,t.width,t.height),e.restore())},e.prototype.adjustContentLayoutArea=function(e){var t=new MC(new PC(e.x,e.y),new IC(e.width,e.height)),i=this.style.padding;if(this.value instanceof GD){var n=this.value.size;this.style.format.alignment===FC.Center?(t.x+=i.left+(t.width-n.width)/2,t.y+=i.top+(t.height-n.height)/2):this.style.format.alignment===FC.Left?(t.x+=i.left,t.y+=i.top):this.style.format.alignment===FC.Right&&(t.x+=i.left+(t.width-n.width),t.y+=i.top)}else t.x+=i.left,t.y+=i.top;return t},e.prototype.drawCellBorder=function(e,t){if(this.row.treegrid.style.borderOverlapStyle===fx.Inside&&(t.x+=this.style.borders.left.width,t.y+=this.style.borders.top.width,t.width-=this.style.borders.right.width,t.height-=this.style.borders.bottom.width),this.style.borders.isAll&&this.isHeaderCell)return e.drawRectangle(this.style.borders.left,t.x,t.y,t.width,t.height),void e.restore();var i=new PC(t.x,t.y+t.height),n=new PC(t.x,t.y),r=this.style.borders.left;this.style.borders.left.dashStyle===jC.Solid&&(r.lineCap=VC.Square),e.drawLine(r,i,n),e.restore(),i=new PC(t.x+t.width,t.y),n=new PC(t.x+t.width,t.y+t.height),r=this.style.borders.right,t.x+t.width>e.clientSize.width-r.width/2&&(i=new PC(e.clientSize.width-r.width/2,t.y),n=new PC(e.clientSize.width-r.width/2,t.y+t.height)),this.style.borders.right.dashStyle===jC.Solid&&(r.lineCap=VC.Square),e.drawLine(r,i,n),e.restore(),i=new PC(t.x,t.y),n=new PC(t.x+t.width,t.y),r=this.style.borders.top,this.style.borders.top.dashStyle===jC.Solid&&(r.lineCap=VC.Square),e.drawLine(r,i,n),e.restore(),i=new PC(t.x+t.width,t.y+t.height),n=new PC(t.x,t.y+t.height),r=this.style.borders.bottom,t.y+t.height>e.clientSize.height-r.width/2&&(i=new PC(t.x+t.width,e.clientSize.height-r.width/2),n=new PC(t.x,e.clientSize.height-r.width/2)),this.style.borders.bottom.dashStyle===jC.Solid&&(r.lineCap=VC.Square),e.drawLine(r,i,n),e.restore()},e}(),ND=function(){function e(e){this.treegridRow=e,this.cells=[]}return e.prototype.getCell=function(e){if(e<0||e>=this.count)throw new Error("IndexOutOfRangeException");return this.cells[e]},Object.defineProperty(e.prototype,"count",{get:function(){return this.cells.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(void 0===e){var t=new FD;return this.add(t),e}e.row=this.treegridRow,this.cells.push(e)},e.prototype.indexOf=function(e){return this.cells.indexOf(e)},e}(),HD=function(){function e(e){this.treegridRowOverflowIndex=0,this.rowHeight=0,this.rowWidth=0,this._isParentRow=!1,this.intendLevel=0,this.pdfTreeGrid=e}return Object.defineProperty(e.prototype,"cells",{get:function(){return g(this.treegridCells)&&(this.treegridCells=new ND(this)),this.treegridCells},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isParentRow",{get:function(){return this._isParentRow},set:function(e){this._isParentRow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treegrid",{get:function(){return this.pdfTreeGrid},set:function(e){this.pdfTreeGrid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowBreakHeight",{get:function(){return void 0===this.treegridRowBreakHeight&&(this.treegridRowBreakHeight=0),this.treegridRowBreakHeight},set:function(e){this.treegridRowBreakHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowOverflowIndex",{get:function(){return this.treegridRowOverflowIndex},set:function(e){this.treegridRowOverflowIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.intendLevel},set:function(e){this.intendLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 0===this.rowHeight&&(this.rowHeight=this.measureHeight()),this.rowHeight},set:function(e){this.rowHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 0===this.rowWidth&&(this.rowWidth=this.measureWidth()),this.rowWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowIndex",{get:function(){return this.treegrid.rows.rowCollection.indexOf(this)},enumerable:!0,configurable:!0}),e.prototype.measureWidth=function(){for(var e=this.treegrid.columns.columns,t=0,i=0;i<e.length;i++){t+=e[i].width}return t},e.prototype.measureHeight=function(){for(var e=this.cells.getCell(0).height,t=0;t<this.cells.count;t++){var i=this.cells.getCell(t);e=1===i.columnSpan||1===i.rowSpan?Math.max(e,i.height):Math.min(e,i.height),i.height=e}return e},e}(),VD=function(){function e(e){this.rows=[],this.treegrid=e}return Object.defineProperty(e.prototype,"count",{get:function(){return this.rows.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCollection",{get:function(){return this.rows},enumerable:!0,configurable:!0}),e.prototype.addRow=function(e){if(void 0===e){var t=new HD(this.treegrid);return this.addRow(t),t}if(0===e.cells.count)for(var i=0;i<this.treegrid.columns.count;i++)e.cells.add(new FD);this.rows.push(e)},e.prototype.getRow=function(e){return this.rows[e]},e}(),jD=function(){function e(e){this.rows=[],this.treegrid=e,this.rows=[]}return e.prototype.getHeader=function(e){return this.rows[e]},Object.defineProperty(e.prototype,"count",{get:function(){return this.rows.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.rows.push(e)},e.prototype.indexOf=function(e){return this.rows.indexOf(e)},e}(),zD=function(){function e(e){this.columnWidth=0,this.treeColumnIndex=!1,this._headerText="",this._field="",this.treegrid=e}return Object.defineProperty(e.prototype,"headerText",{get:function(){return this._headerText},set:function(e){this._headerText=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"field",{get:function(){return this._field},set:function(e){this._field=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.columnWidth},set:function(e){this.columnWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTreeColumn",{get:function(){return this.treeColumnIndex},set:function(e){this.treeColumnIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return null==this.stringFormat&&(this.stringFormat=new fS),this.stringFormat},set:function(e){this.stringFormat=e},enumerable:!0,configurable:!0}),e}(),qD=function(){function e(e){this.internalColumns=[],this.columnWidth=0,this.treegrid=e,this.internalColumns=[]}return e.prototype.add=function(e){for(var t=0;t<e;t++){this.internalColumns.push(new zD(this.treegrid));for(var i=0;i<this.treegrid.rows.count;i++){var n=this.treegrid.rows.getRow(i),r=new FD;r.value="",n.cells.add(r)}}},Object.defineProperty(e.prototype,"count",{get:function(){return this.internalColumns.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 0===this.columnWidth&&(this.columnWidth=this.measureColumnsWidth()),this.columnWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this.internalColumns},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(e){if(e>=0&&e<=this.columns.length)return this.columns[e];throw Error("can not get the column from the index: "+e)},e.prototype.measureColumnsWidth=function(){var e=0;this.treegrid.measureColumnsWidth();for(var t=0,i=this.internalColumns.length;t<i;t++)e+=this.internalColumns[t].width;return e},e.prototype.getDefaultWidths=function(e){for(var t=[],i=this.count,n=0;n<this.count;n++)t[n]=this.internalColumns[n].width,this.internalColumns[n].width>0?(e-=this.internalColumns[n].width,i--):t[n]=0;for(n=0;n<this.count;n++){var r=e/i;t[n]<=0&&(t[n]=r)}return t},e}(),WD=function(){this.cellSpacing=0,this.borderOverlapStyle=fx.Overlap,this.allowHorizontalOverflow=!1,this.horizontalOverflowType=ak.LastPage,this.cellPadding=new ED},_D=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GD=function(e){function t(){var t=e.call(this)||this;return t.treeGridSize=new IC(0,0),t.treeColumnIndex=0,t.allowRowBreakAcrossPages=!0,t.enableHeader=!0,t.isFitToWidth=!1,t.columns=new qD(t),t.rows=new VD(t),t.headers=new jD(t),t.style=new WD,t.rowHeight=0,t}return _D(t,e),Object.defineProperty(t.prototype,"raiseBeginCellDraw",{get:function(){return void 0!==this.beginCellDraw&&null!==typeof this.beginCellDraw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raiseEndCellDraw",{get:function(){return void 0!==this.endCellDraw&&null!==typeof this.endCellDraw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return 0===this.treeGridSize.width&&0===this.treeGridSize.height&&(this.treeGridSize=this.calculateTreeGridSize()),this.treeGridSize},set:function(e){this.treeGridSize=e},enumerable:!0,configurable:!0}),t.prototype.draw=function(e,t,i,n){if(t instanceof PC&&void 0===t.width&&void 0===i)return this.drawHelper(e,t.x,t.y);if("number"==typeof t&&"number"==typeof i&&void 0===n)return this.drawHelper(e,t,i,null);if(t instanceof MC&&void 0!==t.width&&void 0===i)return this.drawHelper(e,t,null);if(t instanceof PC&&void 0===t.width&&i instanceof hk)return this.drawHelper(e,t.x,t.y,i);if("number"==typeof t&&"number"==typeof i&&(n instanceof hk||null==n)){var r=e.graphics.clientSize.width-t,o=new MC(t,i,r,0);return this.drawHelper(e,o,n)}return t instanceof MC&&void 0!==t.width&&"boolean"==typeof i?this.drawHelper(e,t,null):this.drawHelper(e,t,i)},t.prototype.measureColumnsWidth=function(e){if(void 0!==e)for(var t=this.columns.getDefaultWidths(e.width-e.x),i=0;i<this.columns.count;i++)this.columns.getColumn(i).width<0&&(this.columns.getColumn(i).width=t[i]);else{t=[];var n=0,r=0,o=this.columns.count;for(i=0;i<o;i++){for(var s=this.rows.count,a=0;a<s;a++){var l=this.rows.getRow(a).cells.getCell(i).width,h=this.initialWidth>0?Math.min(this.initialWidth,l):l;n=Math.max(n,h),n=Math.max(this.columns.getColumn(i).width,n),this.columns.getColumn(i).isTreeColumn&&(r=Math.max(r,this.rows.getRow(a).level))}this.columns.getColumn(i).isTreeColumn?t.push(n+10*r):t.push(n),n,n=0}for(i=0;i<this.columns.count;i++)this.columns.getColumn(i).width<0&&(this.columns.getColumn(i).width=t[i])}},t.prototype.calculateTreeGridSize=function(){for(var e=0,t=this.columns.width,i=0;i<this.headers.count;i++){e+=this.headers.getHeader(i).height}for(i=0;i<this.rows.count;i++){e+=this.rows.getRow(i).height}return new IC(t,e)},t.prototype.drawGrid=function(e,t,i,n){this.initialWidth=e.graphics.clientSize.width;var r=new MC(0,0,e.getClientSize().height,0);return this.draw(e,r,n)},t.prototype.layout=function(e){if(0!==this.rows.count){var t=this.rows.getRow(0).cells.getCell(0).style;if(1!==t.borders.left.width){var i=t.borders.left.width/2,n=t.borders.top.width/2;if(e.bounds.x===DD.default.right.width/2&&e.bounds.y===DD.default.right.width/2){var r=new MC(new PC(i,n),new IC(this.size.width,this.size.height));e.bounds=r}}}return this.setSpan(),this.layouter=new PD(this),this.layouter.layoutInternal(e)},t.prototype.onBeginCellDraw=function(e){this.raiseBeginCellDraw&&this.beginCellDraw(this,e)},t.prototype.onEndCellDraw=function(e){this.raiseEndCellDraw&&this.endCellDraw(this,e)},t.prototype.setSpan=function(){for(var e=1,t=1,i=0,n=0,r=0,o=this.headers.count,s=0;s<o;s++){r=0;for(var a=(p=this.headers.getHeader(s)).cells.count,l=0;l<a;l++){var h=p.cells.getCell(l);if(r=Math.max(r,h.rowSpan),!h.isCellMergeContinue&&!h.isRowMergeContinue&&(h.columnSpan>1||h.rowSpan>1)){if(h.columnSpan+l>p.cells.count)throw new Error("Invalid span specified at row "+l.toString()+" column "+s.toString());if(h.rowSpan+s>this.headers.count)throw new Error("Invalid span specified at Header "+l.toString()+" column "+s.toString());if(h.columnSpan>1&&h.rowSpan>1){for(e=h.columnSpan,t=h.rowSpan,i=l,n=s,h.isCellMergeStart=!0,h.isRowMergeStart=!0;e>1;)i++,p.cells.getCell(i).isCellMergeContinue=!0,p.cells.getCell(i).isRowMergeContinue=!0,p.cells.getCell(i).rowSpan=t,e--;for(i=l,e=h.columnSpan;t>1;){for(n++,this.headers.getHeader(n).cells.getCell(l).isRowMergeContinue=!0,this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue=!0,t--;e>1;)i++,this.headers.getHeader(n).cells.getCell(i).isCellMergeContinue=!0,this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue=!0,e--;e=h.columnSpan,i=l}}else if(h.columnSpan>1&&1===h.rowSpan)for(e=h.columnSpan,i=l,h.isCellMergeStart=!0;e>1;)i++,p.cells.getCell(i).isCellMergeContinue=!0,e--;else if(1===h.columnSpan&&h.rowSpan>1)for(t=h.rowSpan,n=s;t>1;)n++,this.headers.getHeader(n).cells.getCell(l).isRowMergeContinue=!0,t--}}p.maximumRowSpan=r}e=t=1,i=n=0,o=this.rows.count;for(s=0;s<o;s++){var p,d=(p=this.rows.getRow(s)).cells.count;for(l=0;l<d;l++){if(!(h=p.cells.getCell(l)).isCellMergeContinue&&!h.isRowMergeContinue&&(h.columnSpan>1||h.rowSpan>1)){if(h.columnSpan+l>p.cells.count)throw new Error("Invalid span specified at row {0} column {1} "+l.toString());if(h.rowSpan+s>this.rows.count)throw new Error("Invalid span specified at row {0} column {1} "+l.toString());if(h.columnSpan>1&&h.rowSpan>1){for(e=h.columnSpan,t=h.rowSpan,i=l,n=s,h.isCellMergeStart=!0,h.isRowMergeStart=!0;e>1;)i++,p.cells.getCell(i).isCellMergeContinue=!0,e--;for(i=l,e=h.columnSpan;t>1;){for(n++,this.rows.getRow(n).cells.getCell(l).isRowMergeContinue=!0,t--;e>1;)i++,this.rows.getRow(n).cells.getCell(i).isCellMergeContinue=!0,e--;e=h.columnSpan,i=l}}else if(h.columnSpan>1&&1===h.rowSpan)for(e=h.columnSpan,i=l,h.isCellMergeStart=!0;e>1;)i++,p.cells.getCell(i).isCellMergeContinue=!0,e--;else if(1===h.columnSpan&&h.rowSpan>1)for(t=h.rowSpan,n=s;t>1;)n++,this.rows.getRow(n).cells.getCell(l).isRowMergeContinue=!0,t--}}}},t}(ck),UD=function(){function e(e){this.width=0,this.gantt=e,this.parent=e.parent,this.topTierPoint=new PC,this.bottomTierPoint=new PC,this.topTierIndex=0,this.bottomTierIndex=0,this.prevTopTierIndex=0,this.prevBottomTierIndex=0}return e.prototype.drawTimeline=function(e,t,i){var n=Math.floor(i.totalWidth),r=0;e.graphics;for(this.topTierPoint.x=t.x,this.topTierPoint.y=t.y,this.prevTopTierIndex=this.topTierIndex,this.prevBottomTierIndex=this.bottomTierIndex;n>0;){var o=this.topTier[this.topTierIndex];if(this.topTier.length>this.topTierIndex){var s=!1;this.topTier[this.topTierIndex].isFinished||(n>=o.width?(r=o.width,o.isFinished=!0,o.completedWidth=r,s=!0):(r=n,s=!1,o.isFinished=!1,o.width=o.width-n,o.completedWidth=r)),this.triggerQueryTimelinecell(e,this.topTierPoint.x,this.topTierPoint.y,this.topTierHeight,r,o.value,!0),this.topTierPoint.x+=jl(r),n-=r,s&&this.topTierIndex++}else n=0}n=Math.floor(i.totalWidth);var a=this.parent.timelineModule.isSingleTier?0:this.topTierHeight;for(this.bottomTierPoint=new PC(t.x,jl(t.y+a));n>0;){var l=this.bottomTier[this.bottomTierIndex];if(this.bottomTier.length>this.bottomTierIndex){s=!0;var h=l.width;n<h&&(h=n,s=!1,l.completedWidth=h),this.triggerQueryTimelinecell(e,this.bottomTierPoint.x,this.bottomTierPoint.y,this.bottomTierHeight,h,l.value,!1),this.bottomTierPoint.x=this.bottomTierPoint.x+jl(h),n-=h,l.completedWidth=h,s&&this.bottomTierIndex++}else n=0}},e.prototype.drawPageTimeline=function(e,t,i){e.graphics;this.topTierPoint=u({},{},t,!0);for(var n=this.prevTopTierIndex;n<=this.topTierIndex;n++)if(this.topTier.length>n){var r=this.topTier[n];r.completedWidth>0&&(this.triggerQueryTimelinecell(e,this.topTierPoint.x,this.topTierPoint.y,this.topTierHeight,r.completedWidth,r.value,!0),this.topTierPoint.x+=jl(r.completedWidth))}this.bottomTierPoint.x=t.x,this.bottomTierPoint.y=jl(t.y+this.topTierHeight);for(n=this.prevBottomTierIndex;n<=this.bottomTierIndex;n++)if(this.bottomTier.length>n){var o=this.bottomTier[n];o.completedWidth>0&&(this.triggerQueryTimelinecell(e,this.bottomTierPoint.x,this.bottomTierPoint.y,this.bottomTierHeight,o.width,o.value,!1),this.bottomTierPoint.x=this.bottomTierPoint.x+jl(o.width))}},e.prototype.triggerQueryTimelinecell=function(e,t,i,n,r,o,s){var a=e.graphics,l={},h=this.gantt.ganttStyle;l.borderColor=new pS(h.timeline.borderColor),l.fontColor=new pS(h.timeline.fontColor),l.fontSize=h.timeline.fontSize,l.fontStyle=h.timeline.fontStyle,l.backgroundColor=new pS(h.timeline.backgroundColor),h.timeline.padding&&(l.padding=h.timeline.padding);var p=new fS;g(h.timeline.format)?s?(p.lineAlignment=BC.Middle,p.alignment=FC.Left):(p.lineAlignment=BC.Middle,p.alignment=FC.Center,p.wordWrap=QC.Character):p=h.timeline.format,l.format=p;var d={timelineCell:l,value:o};this.parent.pdfQueryTimelineCellInfo&&this.parent.trigger("pdfQueryTimelineCellInfo",d);var c=d.timelineCell,u=new gS(d.timelineCell.borderColor),f=new uS(d.timelineCell.backgroundColor);a.drawRectangle(u,f,t,i,jl(r),jl(n));var m=new Qx(h.fontFamily,c.fontSize,c.fontStyle),y=new uS(d.timelineCell.fontColor),v=h.timeline.padding?d.timelineCell.padding.left:0,b=h.timeline.padding?d.timelineCell.padding.top:0;a.drawString(d.value,m,null,y,t+v,i+b,jl(r),jl(n),c.format)},e}(),KD=function(){return(KD=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},YD=function(){function e(e,t){this.parent=e,this.pdfGantt=t}return e.prototype.add=function(){return new e(this.parent)},e.prototype.drawPredecessor=function(e){this.pdfGantt=e;var t,i,n,r,o=e.result.page.section.getPages(),s=e.taskbarCollection[this.parentIndex],a=e.taskbarCollection[this.childIndex],l=new Nx,h=new Nx,p="";switch(this.type){case"FS":if(!(a.startPage>-1&&s.endPage>-1))return;l=o[s.endPage],h=o[a.startPage],t=e.pdfPageDetail[s.endPage-e.chartPageIndex],i=e.pdfPageDetail[a.startPage-e.chartPageIndex],p=this.parentIndex<this.childIndex?this.parentLeft<this.childLeft&&this.childLeft>this.parentLeft+this.parentWidth+25?"FSType1":"FSType2":this.parentLeft<this.childLeft&&this.childLeft>this.parentLeft+this.parentWidth+25?"FSType3":"FSType4";break;case"SF":if(!(a.endPage>-1&&s.startPage>-1))return;l=o[s.startPage],h=o[a.endPage],t=e.pdfPageDetail[s.endPage-e.chartPageIndex],i=e.pdfPageDetail[a.startPage-e.chartPageIndex],p=this.parentIndex<this.childIndex?this.parentLeft>this.childLeft+this.childWidth?"SFType1":"SFType2":this.parentLeft>this.childLeft+this.childWidth?"SFType3":"SFType4";break;case"FF":if(!(a.endPage>-1&&s.endPage>-1))return;l=o[s.endPage],h=o[a.endPage],t=e.pdfPageDetail[s.endPage-e.chartPageIndex],i=e.pdfPageDetail[a.endPage-e.chartPageIndex],p=this.parentIndex<this.childIndex?this.childLeft+this.childWidth>=this.parentLeft+this.parentWidth?"FFType1":"FFType2":this.childLeft+this.childWidth>=this.parentLeft+this.parentWidth?"FFType3":"FFType4";break;case"SS":if(!(a.startPage>-1&&s.startPage>-1))return;l=o[s.startPage],h=o[a.startPage],t=e.pdfPageDetail[s.startPage-e.chartPageIndex],i=e.pdfPageDetail[a.startPage-e.chartPageIndex],p=this.parentIndex<this.childIndex?this.parentLeft>=this.childLeft?"SSType1":"SSType2":this.parentLeft>=this.childLeft?"SSType3":"SSType4"}var d,c,u,g,f,m,y=Math.round((this.parent.rowHeight-1)/2);y=jl(y),d=c=u=g=f=m=new PC;var v=KD({},s.taskStartPoint),b=KD({},a.taskStartPoint);n=v.y+t.startPoint.y,r=b.y+i.startPoint.y;var w=new PC(jl(this.parentLeft+this.parentWidth),n+y),C=new PC(jl(this.parentLeft)-1,n+y),S=new PC(jl(this.childLeft-20),r+y),x=new PC(jl(this.childLeft-6-this.lineWidth)-1,r+y),k=new PC(jl(this.childLeft+this.childWidth+6+this.lineWidth)+1,r+y);switch(p){case"FSType1":case"FSType3":d=w,c=new PC(jl(this.childLeft-20),n+y),u=S,g=x,this.connectLines(l,h,d,c,u,g,a,y);break;case"FSType2":c=new PC((d=w).x+10,n+y),u=new PC(d.x+10,r+2),g=new PC(jl(this.childLeft-20),r+2),f=S,m=x,this.connectLines(l,h,d,c,u,g,a,y,f,m);break;case"FSType4":c=new PC((d=w).x+10,n+y),u=new PC(d.x+10,n+2),g=new PC(jl(this.childLeft-20),n+2),f=S,m=x,this.connectLines(l,h,d,c,u,g,a,y,f,m);break;case"FFType1":case"FFType3":d=new PC(jl(this.parentLeft+this.parentWidth)+1,n+y),c=new PC(jl(this.childLeft+this.childWidth+20),n+y),u=new PC(c.x,r+y),g=k,this.connectLines(l,h,d,c,u,g,a,y);break;case"FFType2":case"FFType4":d=new PC(jl(this.parentLeft+this.parentWidth)+1,n+y),c=new PC(jl(this.parentLeft+this.parentWidth+20),n+y),u=new PC(c.x,r+y),g=k,this.connectLines(l,h,d,c,u,g,a,y);break;case"SSType1":case"SSType3":d=C,c=new PC(jl(this.childLeft-20),n+y),u=new PC(c.x,r+y),g=x,this.connectLines(l,h,d,c,u,g,a,y);break;case"SSType2":case"SSType4":d=C,c=new PC(jl(this.parentLeft-20),n+y),u=new PC(c.x,r+y),g=x,this.connectLines(l,h,d,c,u,g,a,y);break;case"SFType1":case"SFType3":d=C,c=new PC(jl(this.childLeft+this.childWidth+20),n+y),u=new PC(c.x,r+y),g=k,this.connectLines(l,h,d,c,u,g,a,y);break;case"SFType2":d=C,c=new PC(jl(this.parentLeft-20),n+y),u=new PC(c.x,r+2),g=new PC(jl(this.childLeft+this.childWidth+20),r+2),f=new PC(g.x,r+y),m=k,this.connectLines(l,h,d,c,u,g,a,y,f,m);break;case"SFType4":d=C,c=new PC(jl(this.parentLeft-20),n+y),u=new PC(c.x,n+2),g=new PC(jl(this.childLeft+this.childWidth+20),n+2),f=new PC(g.x,r+y),m=k,this.connectLines(l,h,d,c,u,g,a,y,f,m)}},e.prototype.connectLines=function(e,t,i,n,r,o,s,a,l,h){this.drawLine(e,i,n),this.drawLine(e,n,r),this.drawLine(e,r,o),g(l)||g(h)||(this.drawLine(e,o,l),this.drawLine(e,l,h)),this.drawArrow(t,s,a)},e.prototype.contains=function(e,t,i){return e.x<=t&&t<e.x+e.width&&e.y<=i&&i<e.y+e.height},e.prototype.findPageIndex=function(e){for(var t=-1,i=0;i<this.pdfGantt.pdfPageDetail.length;i++){var n=this.pdfGantt.pdfPageDetail[i],r=new MC(n.startPoint.x,n.startPoint.y,n.width,n.height);if(this.contains(r,e.x,e.y)){t=i;break}}return t},e.prototype.drawLine=function(e,t,i){var n=this.pdfGantt.result.page.section.getPages(),r=e.graphics,o=KD({},i),s=KD({},i),a=KD({},i),l=this.pdfGantt.pdfPageDetail[e.section.indexOf(e)-this.pdfGantt.chartPageIndex],h=new MC(l.startPoint.x,l.startPoint.y,l.width,l.height),p=this.contains(h,t.x,t.y),d=this.contains(h,i.x,i.y),c=-1;if(t=new PC(t.x,t.y),i=new PC(i.x,i.y),p||d){if(d&&!p)(c=this.findPageIndex(t))>-1&&(l=this.pdfGantt.pdfPageDetail[c],s=t,o=i,this.drawLine(n[c+this.pdfGantt.chartPageIndex],s,o));else if(!d&&p){var u=h.x,g=h.x+h.width,f=h.y+h.height,m=h.y;u>i.x?(a.x=i.x=u-1,s.x=u-1):g<i.x?(a.x=i.x=g,s.x=g,a.x+=1):f<i.y?(a.y=i.y=f,s.y=f,a.y+=1,this.pdfGantt.enableHeader&&(s.y+=this.parent.timelineModule.isSingleTier?jl(45):jl(62))):m>i.y&&(s.y=a.y=m-1,i.y=m,this.pdfGantt.enableHeader&&(a.y+=this.parent.timelineModule.isSingleTier?jl(45):jl(62),i.y+=this.parent.timelineModule.isSingleTier?jl(45):jl(62))),-1!==(c=this.findPageIndex(a))&&this.drawLine(n[c+this.pdfGantt.chartPageIndex],s,o)}}else(c=this.findPageIndex(t))>-1&&(l=this.pdfGantt.pdfPageDetail[c],s=t,o=i,this.drawLine(n[c+this.pdfGantt.chartPageIndex],s,o));if(p){t=new PC(t.x,t.y),i=new PC(i.x,i.y),t.x=t.x+l.pageStartX-l.startPoint.x,t.y=t.y-l.startPoint.y,i.x=i.x+l.pageStartX-l.startPoint.x,i.y=i.y-l.startPoint.y;var y=new uS(this.connectorLineColor),v=new gS(y,jl(this.lineWidth));r.drawLine(v,t,i)}},e.prototype.drawArrow=function(e,t,i){var n,r=this.pdfGantt.pdfPageDetail[e.section.indexOf(e)-this.pdfGantt.chartPageIndex],o=new MC(new PC(r.startPoint.x,r.startPoint.y),new IC(r.width,r.height)),s=new PC,a=e.section.getPages(),l=6+this.lineWidth;if(s="FS"===this.type||"SS"===this.type?new PC(jl(this.childLeft)-1,t.taskStartPoint.y+r.startPoint.y):new PC(jl(this.childLeft+this.childWidth)+1,t.taskStartPoint.y+r.startPoint.y),!this.contains(o,s.x,s.y)){var h=this.findPageIndex(s);h>-1&&(r=this.pdfGantt.pdfPageDetail[h],e=a[h+this.pdfGantt.chartPageIndex])}var p=e.graphics;s.x=s.x-r.startPoint.x+r.pageStartX,s.y=s.y-r.startPoint.y;var d=new PC(s.x,s.y+i);n="FS"===this.type||"SS"===this.type?new PC(d.x-jl(l),d.y-jl(l)):new PC(d.x+jl(l),d.y-jl(l));var c=new PC(n.x,n.y+jl(2*l)),u=new uS(this.connectorLineColor),g=new gS(u,jl(this.lineWidth));p.drawLine(g,d,n),p.drawLine(g,n,c),p.drawLine(g,c,d)},e}(),XD=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),QD=function(){return(QD=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},JD=function(e){function t(t){var i=e.call(this)||this;return i.exportProps={},i.parent=t,i.chartHeader=new UD(i),i.predecessor=new YD(t,i),i.headerDetails=[],i.pdfPageDetail=[],i.taskbarCollection=[],i.predecessorCollection=[],i}return XD(t,e),Object.defineProperty(t.prototype,"taskbar",{get:function(){return g(this.taskbars)&&(this.taskbars=new BD(this.parent)),this.taskbars},enumerable:!0,configurable:!0}),t.prototype.drawChart=function(e){this.result=e,this.totalPages=this.result.page.section.count,this.perColumnPages=this.totalPages/this.layouter.columnRanges.length,this.calculateRange(),this.drawGantttChart(),this.drawPageBorder()},t.prototype.calculateRange=function(){for(var e=this.layouter.columnRanges[this.layouter.columnRanges.length-1],t=0,i=!0,n=0,r=0,o=0,s=jl(this.chartHeader.width),a=this.parent.timelineModule,l=e[0];l<=e[1];l++)t+=this.layouter.treegrid.columns.getColumn(l).width;if((t+=.5)+100<this.result.page.getClientSize().width)r=this.result.page.getClientSize().width-t,this.chartPageIndex=this.startPageIndex=this.totalPages-this.perColumnPages,i=!1,this.startPoint=new PC(t,0);else{this.result.page.section.add();this.chartPageIndex=this.startPageIndex=this.totalPages,i=!0,this.startPoint=new PC(o,0)}for(;Math.round(o)<Math.round(s);){i?n=this.result.page.getClientSize().width:(n=r,i=!0);var h={},p=[],d=jl(this.chartHeader.bottomTierCellWidth),c=0;0!==this.chartHeader.bottomTierCellWidth&&(c=Math.floor(n/d)*d),p[0]=o,s-o<=c?(p[1]=s,h.totalWidth=zl(s-o)):(p[1]=o+c,h.totalWidth=zl(c)),h.startPoint=p[0],h.endPoint=p[1],0===this.parent.cloneProjectStartDate.getHours()&&0===this.parent.cloneProjectStartDate.getMinutes()&&0===this.parent.cloneProjectStartDate.getSeconds()&&this.parent.cloneProjectStartDate.setHours(8);var u=this.parent.dataOperation.getDateFromFormat(this.parent.cloneProjectStartDate),f=g(a.customTimelineSettings.bottomTier.count)?a.customTimelineSettings.topTier.count:a.customTimelineSettings.bottomTier.count;switch("None"===a.customTimelineSettings.bottomTier.unit?a.customTimelineSettings.topTier.unit:a.customTimelineSettings.bottomTier.unit){case"Minutes":h.startDate=new Date(u.getTime());var m=Math.floor(zl(h.startPoint)/this.chartHeader.bottomTierCellWidth);h.startDate.setMinutes(h.startDate.getMinutes()+m*f),h.startDate.setSeconds(h.startDate.getSeconds()+1),h.endDate=new Date(h.startDate.getTime());var y=Math.floor(zl(h.endPoint-h.startPoint)/this.chartHeader.bottomTierCellWidth);h.endDate.setMinutes(h.endDate.getMinutes()+y*f);break;case"Hour":h.startDate=new Date(u.getTime());var v=Math.floor(zl(h.startPoint)/this.chartHeader.bottomTierCellWidth);h.startDate.setHours(h.startDate.getHours()+v*f),h.startDate.setMinutes(h.startDate.getMinutes()+1),h.endDate=new Date(h.startDate.getTime());var b=Math.floor(zl(h.endPoint-h.startPoint)/this.chartHeader.bottomTierCellWidth);h.endDate.setHours(h.endDate.getHours()+b*f);break;case"Day":h.startDate=new Date(u.getTime());var w=Math.round(h.startPoint/jl(this.chartHeader.bottomTierCellWidth));h.startDate.setDate(h.startDate.getDate()+w*f);var C=Math.round((h.endPoint-h.startPoint)/jl(this.chartHeader.bottomTierCellWidth))-1;h.endDate=new Date(h.startDate.getTime()),h.endDate.setDate(h.startDate.getDate()+C*f);break;case"Week":h.startDate=new Date(u.getTime());var S=h.startPoint/jl(this.chartHeader.bottomTierCellWidth)*7;h.startDate.setDate(h.startDate.getDate()+S*f);var x=7*Math.round((h.endPoint-h.startPoint)/jl(this.chartHeader.bottomTierCellWidth))-1;h.endDate=new Date(h.startDate.getTime()),h.endDate.setDate(h.startDate.getDate()+x*f);break;case"Month":h.startDate=new Date(u.getTime());var k=h.startPoint/jl(this.chartHeader.bottomTierCellWidth)*31;h.startDate.setDate(h.startDate.getDate()+k*f);var T=31*Math.round((h.endPoint-h.startPoint)/jl(this.chartHeader.bottomTierCellWidth))-1;h.endDate=new Date(h.startDate.getTime()),h.endDate.setDate(h.startDate.getDate()+T*f);break;case"Year":h.startDate=new Date(u.getTime());var D=h.startPoint/jl(this.chartHeader.bottomTierCellWidth)*365;h.startDate.setDate(h.startDate.getDate()+D*f);var E=365*Math.round((h.endPoint-h.startPoint)/jl(this.chartHeader.bottomTierCellWidth))-1;h.endDate=new Date(h.startDate.getTime()),h.endDate.setDate(h.startDate.getDate()+E*f)}this.headerDetails.push(h),o+=c}},t.prototype.drawPageBorder=function(){for(var e=this.result.page.section.getPages(),t=0;t<e.length;t++){var i=e[t],n=i.graphics,r=i.getClientSize(),o=new gS(new pS(206,206,206));n.drawRectangle(o,0,0,r.width,r.height)}},t.prototype.drawGantttChart=function(){var e,t=this,i=this.startPoint,n=new PC,r=0,o=0,s=0;this.headerDetails.forEach((function(a,l){var h=t.result.page.section.getPages()[t.startPageIndex];t.chartHeader.drawTimeline(h,t.startPoint,a),i.y=i.y+jl(t.parent.timelineModule.isSingleTier?45:60),r=i.x,s=jl(t.parent.timelineModule.isSingleTier?45:60),t.headerDetails[t.headerDetails.indexOf(a)].startIndex=t.startPageIndex,t.headerDetails[t.headerDetails.indexOf(a)].pageStartPoint=i;for(var p=0;p<t.taskbarCollection.length;p++){var d=t.taskbarCollection[p],c=t.rows.getRow(p+1).height,u=t.result.page.section.getPages()[t.startPageIndex];d.drawTaskbar(u,i,a,o,c,t.taskbarCollection[p])&&(t.enableHeader?i.y=jl(t.parent.timelineModule.isSingleTier?45:60):i.y=0,t.startPageIndex++,(e={}).height=s,e.pageStartX=r,e.startPoint=QD({},n),e.width=jl(a.totalWidth),t.pdfPageDetail.push(e),n.y+=e.height,t.enableHeader?s=t.chartHeader.height:(i.y=0,s=0)),i.y+=c,s+=c,c}if(t.headerDetails[l].endIndex=t.startPageIndex,o+=a.totalWidth,(e={}).height=s,e.pageStartX=r,e.startPoint=QD({},n),e.width=jl(a.totalWidth),t.pdfPageDetail.push(e),n.x+=e.width,n.y=0,t.enableHeader?s=t.chartHeader.height:i.y=0,t.headerDetails.indexOf(a)!==t.headerDetails.length-1){t.result.page.section.add();t.startPageIndex=t.result.page.section.count-1,i=t.startPoint=new PC(0,0)}}));for(var a=0;a<this.predecessorCollection.length;a++){this.predecessorCollection[a].drawPredecessor(this)}},t}(GD),ZD=function(){function e(e){this.isPdfExport=!1,this.parent=e,this.helper=new LD(this.parent),this.pdfDocument=void 0}return e.prototype.getModuleName=function(){return"pdfExport"},e.prototype.destroy=function(){},e.prototype.initGantt=function(){this.pdfDocument=void 0,this.gantt=new JD(this.parent)},e.prototype.export=function(e,t,i){var n=this,r={requestType:"beforePdfExport",ganttObject:this.parent,cancel:!1};return this.parent.trigger("beforePdfExport",r),a("cancel",r)?new Promise((function(e,t){return e()})):new Promise((function(r,o){n.exportWithData(i,r,e,t)}))},e.prototype.exportWithData=function(e,t,i,n){var r=this,o=[];g(i)&&(i={}),o="CurrentViewData"===i.exportType?this.parent.currentViewData:this.parent.flatData,this.initGantt(),g(e)?this.pdfDocument=new Zx:this.pdfDocument=e,this.processExport(o,i,n).then((function(){r.parent.trigger("pdfExportComplete",{}),t(r.pdfDocument)}))},e.prototype.processExport=function(e,t,i){var n=this,r=this.pdfDocument.sections.add();this.processSectionExportProperties(r,t);var o=r.pages.add();return new Promise((function(i,r){n.helper.processGridExport(e,n.gantt,t),n.helper.initializePdf(n.pdfDocument),i()})).then((function(){var e=new MD;e.break=CS.FitElement;var r=n.gantt.drawGrid(o,0,0,e);return n.gantt.drawChart(r),i||(!g(t)&&t.fileName?n.pdfDocument.save(t.fileName):n.pdfDocument.save("Export.pdf"),n.pdfDocument.destroy()),n.pdfDocument}))},e.prototype.processSectionExportProperties=function(e,t){if(g(t))this.gantt.ganttStyle=new kD(t.theme).style;else{var i=new aS;if(g(t.pageOrientation&&"Portrait"===t.pageOrientation)?i.orientation=bC.Landscape:i.orientation=bC.Portrait,g(t.pageSize)||(i.size=this.getPageSize(t.pageSize)),e.setPageSettings(i),g(t.ganttStyle))this.gantt.ganttStyle=new kD(t.theme).style;else{var n=new kD(t.theme).style;this.gantt.ganttStyle=u({},n,t.ganttStyle,!0)}}},e.prototype.getPageSize=function(e){switch(e){case"Letter":return new IC(612,792);case"Note":return new IC(540,720);case"Legal":return new IC(612,1008);case"A0":return new IC(2380,3368);case"A1":return new IC(1684,2380);case"A2":return new IC(1190,1684);case"A3":return new IC(842,1190);case"A5":return new IC(421,595);case"A6":return new IC(297,421);case"A7":return new IC(210,297);case"A8":return new IC(148,210);case"A9":return new IC(105,148);case"B0":return new IC(2836,4008);case"B1":return new IC(2004,2836);case"B2":return new IC(1418,2004);case"B3":return new IC(1002,1418);case"B4":return new IC(709,1002);case"B5":return new IC(501,709);case"Archa":return new IC(648,864);case"Archb":return new IC(864,1296);case"Archc":return new IC(1296,1728);case"Archd":return new IC(1728,2592);case"Arche":return new IC(2592,3456);case"Flsa":return new IC(612,936);case"HalfLetter":return new IC(396,612);case"Letter11x17":return new IC(792,1224);case"Ledger":return new IC(1224,792);default:return new IC(595,842)}},e}(),$D=function(){function e(e,t){this.defaultItems={},this.localeText=this.setLocaleKey(),this.disableItems=[],this.hiddenItems=[],this.isOpen=!1,this.GROUP="e-icon-group",this.UNGROUP="e-icon-ungroup",this.ASCENDING="e-icon-ascending",this.DESCENDING="e-icon-descending",this.ROOT="e-columnmenu",this.FILTER="e-icon-filter",this.POP="e-filter-popup",this.WRAP="e-col-menu",this.CHOOSER="_chooser_",this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.wireEvents=function(){for(var e=this.getColumnMenuHandlers(),t=0;t<e.length;t++)ye.add(e[t],"mousedown",this.columnMenuHandlerDown,this)},e.prototype.unwireEvents=function(){for(var e=this.getColumnMenuHandlers(),t=0;t<e.length;t++)ye.remove(e[t],"mousedown",this.columnMenuHandlerDown)},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.columnMenu.destroy(),this.removeEventListener(),this.unwireFilterEvents(),this.unwireEvents(),Ct(this.element))},e.prototype.columnMenuHandlerClick=function(e){e.target.classList.contains("e-columnmenu")&&(this.columnMenu.items=this.getItems(),this.columnMenu.dataBind(),this.isOpen&&this.headerCell!==this.getHeaderCell(e)||document.querySelector(".e-grid-menu .e-menu-parent.e-ul")?(this.columnMenu.close(),this.openColumnMenu(e)):this.isOpen?this.columnMenu.close():this.openColumnMenu(e))},e.prototype.openColumnMenuByField=function(e){this.openColumnMenu({target:this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu")})},e.prototype.openColumnMenu=function(e){var t={top:0,left:0};this.element.style.cssText="display:block;visibility:hidden";var i=this.element.getBoundingClientRect();this.element.style.cssText="display:none;visibility:visible",this.headerCell=this.getHeaderCell(e),me.isDevice?(t.top=window.innerHeight/2-i.height/2,t.left=window.innerWidth/2-i.width/2):this.parent.enableRtl?t=Dn(this.headerCell,"left","bottom"):(t=Dn(this.headerCell,"right","bottom")).left-=i.width,this.columnMenu.open(t.top,t.left),e.preventDefault&&e.preventDefault(),Il(this.parent.element,this.columnMenu.element.parentElement)},e.prototype.columnMenuHandlerDown=function(e){this.isOpen=!("none"===this.element.style.display||""===this.element.style.display)},e.prototype.getColumnMenuHandlers=function(){return[].slice.call(this.parent.getHeaderTable().querySelectorAll("."+this.ROOT))},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Rr,this.wireEvents,this),this.parent.on(kr,this.enableAfterRenderMenu,this),this.parent.on(Sr,this.render,this),this.isFilterItemAdded()&&this.parent.on("filterDialogCreated",this.filterPosition,this),this.parent.on(Ir,this.columnMenuHandlerClick,this),this.parent.on(Pr,this.keyPressHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Rr,this.unwireEvents),this.parent.off(kr,this.enableAfterRenderMenu),this.parent.off(Sr,this.render),this.isFilterItemAdded()&&this.parent.off("filterDialogCreated",this.filterPosition),this.parent.off(Ir,this.columnMenuHandlerClick),this.parent.off(Pr,this.keyPressHandler))},e.prototype.keyPressHandler=function(e){var t=this.parent;if("altDownArrow"===e.action){var i=t.focusModule.currentInfo.element;if(i&&i.classList.contains("e-headercell")){var n=t.getColumnByUid(i.firstElementChild.getAttribute("e-mappinguid"));this.openColumnMenuByField(n.field)}}},e.prototype.enableAfterRenderMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.columnMenu&&(this.columnMenu.destroy(),Ct(this.element)),this.render())},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_columnmenu",className:"e-colmenu"}),this.element.setAttribute("aria-label",this.l10n.getConstant("ColumnMenuDialogARIA")),this.parent.element.appendChild(this.element),this.columnMenu=new sw({cssClass:"e-grid-menu",enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,items:this.getItems(),select:this.columnMenuItemClick.bind(this),beforeOpen:this.columnMenuBeforeOpen.bind(this),onOpen:this.columnMenuOnOpen.bind(this),onClose:this.columnMenuOnClose.bind(this),beforeItemRender:this.beforeMenuItemRender.bind(this),beforeClose:this.columnMenuBeforeClose.bind(this)}),this.columnMenu.appendTo(this.element),this.wireFilterEvents()},e.prototype.wireFilterEvents=function(){!me.isDevice&&this.isFilterItemAdded()&&ye.add(this.element,"mouseover",this.appendFilter,this)},e.prototype.unwireFilterEvents=function(){!me.isDevice&&this.isFilterItemAdded()&&ye.remove(this.element,"mouseover",this.appendFilter)},e.prototype.beforeMenuItemRender=function(e){if(this.isChooserItem(e.item)){var t=this.getKeyFromId(e.item.id,this.CHOOSER),i=this.parent.columnModel.filter((function(e){return e.field===t})),n=Fr(this.parent.createElement,!1,{label:e.item.text,checked:i[0].visible});this.parent.enableRtl&&n.classList.add("e-rtl"),e.element.innerHTML="",e.element.appendChild(n)}else e.item.id&&"Filter"===this.getKeyFromId(e.item.id)&&(e.element.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),e.element.className+="e-filter-item e-menu-caret-icon")},e.prototype.columnMenuBeforeClose=function(e){var t=e.event?Tt(e.event.target,".e-menu-item"):null;(!g(e.parentItem)&&"ColumnChooser"===this.getKeyFromId(e.parentItem.id)&&t&&this.isChooserItem(t)||e.event&&(Tt(e.event.target,"."+this.POP)||e.event.currentTarget&&e.event.currentTarget.activeElement&&Ka(e.event.currentTarget.activeElement,"e-filter-popup")||Ka(e.event.target,"e-popup")||Ka(e.event.target,"e-popup-wrapper"))&&!me.isDevice)&&(e.cancel=!0)},e.prototype.isChooserItem=function(e){return e.id&&e.id.indexOf("_colmenu_")>=0&&-1===this.getKeyFromId(e.id,this.CHOOSER).indexOf("_colmenu_")},e.prototype.columnMenuBeforeOpen=function(e){e.column=this.targetColumn=this.getColumn(),this.parent.trigger("columnMenuOpen",e);for(var t=0,i=e.items;t<i.length;t++){var n=i[t],r=this.getKeyFromId(n.id),o=this.defaultItems[r];-1!==this.getDefaultItems().indexOf(r)&&this.ensureDisabledStatus(r)&&!o.hide&&this.disableItems.push(n.text),n.hide&&this.hiddenItems.push(n.text)}this.columnMenu.enableItems(this.disableItems,!1),this.columnMenu.hideItems(this.hiddenItems)},e.prototype.columnMenuOnOpen=function(e){"e-menu-parent e-ul "===e.element.className&&(e.element.offsetHeight>window.innerHeight||this.parent.element.offsetHeight>window.innerHeight)&&(e.element.style.maxHeight=.8*window.innerHeight+"px",e.element.style.overflowY="auto")},e.prototype.ensureDisabledStatus=function(e){var t=!1;switch(e){case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(Lw)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.allowGrouping)&&(t=!0);break;case"AutoFitAll":case"AutoFit":t=!this.parent.ensureModuleInjected(Ld);break;case"Ungroup":(!this.parent.ensureModuleInjected(Lw)||this.parent.ensureModuleInjected(Lw)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"SortDescending":case"SortAscending":if(this.parent.allowSorting&&this.parent.ensureModuleInjected(Ow)&&this.parent.sortSettings.columns.length>0&&this.targetColumn&&this.targetColumn.allowSorting)for(var i=this.parent.sortSettings.columns,n=0;n<i.length;n++)i[n].field===this.targetColumn.field&&i[n].direction.toLocaleLowerCase()===e.toLocaleLowerCase().replace("sort","")&&(t=!0);else(!this.parent.allowSorting||!this.parent.ensureModuleInjected(Ow)||this.parent.allowSorting&&this.targetColumn&&!this.targetColumn.allowSorting)&&(t=!0);break;case"Filter":this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(dw)&&this.targetColumn&&this.targetColumn.allowFiltering?t=!1:this.parent.ensureModuleInjected(dw)&&this.parent.allowFiltering&&this.targetColumn&&(!this.targetColumn.allowFiltering||"FilterBar"===this.parent.filterSettings.type)&&(t=!0)}return t},e.prototype.columnMenuItemClick=function(e){switch(this.isChooserItem(e.item)?"ColumnChooser":this.getKeyFromId(e.item.id)){case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"AutoFitAll":this.parent.autoFitColumns([]);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"SortAscending":this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"ColumnChooser":var t=this.getKeyFromId(e.item.id,this.CHOOSER),i=e.element.querySelector(".e-checkbox-wrapper .e-frame");i&&i.classList.contains("e-check")?(i.classList.remove("e-check"),this.parent.hideColumns(t,"field")):i&&(this.parent.showColumns(t,"field"),i.classList.add("e-check"));break;case"Filter":this.getFilter(e.element,e.item.id)}e.column=this.targetColumn,this.parent.trigger("columnMenuClick",e)},e.prototype.columnMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof sw&&(this.columnMenu.enableItems(this.disableItems,!1),this.disableItems=[],this.columnMenu.showItems(this.hiddenItems),this.hiddenItems=[],this.isFilterPopupOpen()&&this.getFilter(e.element,e.element.id,!0)),this.parent.getFrozenColumns()||this.parent.notify("restore-Focus",{})},e.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","SortAscending","SortDescending","Group","Ungroup","ColumnChooser","Filter"]},e.prototype.getItems=function(){for(var e=[],t=0,i=this.parent.columnMenuItems?this.parent.columnMenuItems:this.getDefault();t<i.length;t++){var n=i[t];if("string"==typeof n)if("ColumnChooser"===n){var r=this.getDefaultItem(n);r.items=this.createChooserItems(),e.push(r)}else e.push(this.getDefaultItem(n));else e.push(n)}return e},e.prototype.getDefaultItem=function(e){var t={};switch(e){case"SortAscending":t={iconCss:this.ASCENDING};break;case"SortDescending":t={iconCss:this.DESCENDING};break;case"Group":t={iconCss:this.GROUP};break;case"Ungroup":t={iconCss:this.UNGROUP};break;case"Filter":t={iconCss:this.FILTER}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),iconCss:t.iconCss?"e-icons "+t.iconCss:null},this.defaultItems[e]},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.generateID=function(e,t){return this.gridID+"_colmenu_"+(t?t+e:e)},e.prototype.getKeyFromId=function(e,t){return e.indexOf("_colmenu_")>0&&e.replace(this.gridID+"_colmenu_"+(t||""),"")},e.prototype.getColumnMenu=function(){return this.element},e.prototype.getModuleName=function(){return"columnMenu"},e.prototype.setLocaleKey=function(){var e={AutoFitAll:"autoFitAll",AutoFit:"autoFit",Group:"Group",Ungroup:"Ungroup",SortAscending:"SortAscending",SortDescending:"SortDescending",ColumnChooser:"Columnchooser",Filter:"FilterMenu"};if(S()){e.AutoFitAll="AutoFitAll";e.AutoFit="AutoFit"}return e},e.prototype.getHeaderCell=function(e){return Tt(e.target,"th.e-headercell")},e.prototype.getColumn=function(){if(this.headerCell){var e=this.headerCell.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(e)}return null},e.prototype.createChooserItems=function(){for(var e=[],t=0,i=this.parent.columnModel;t<i.length;t++){var n=i[t];n.showInColumnChooser&&n.field&&e.push({id:this.generateID(n.field,this.CHOOSER),text:n.headerText?n.headerText:n.field})}return e},e.prototype.appendFilter=function(e){if(this.defaultItems.Filter){var t=this.defaultItems.Filter.id;Tt(e.target,"#"+t)&&!this.isFilterPopupOpen()?this.getFilter(e.target,t):!Tt(e.target,"#"+t)&&this.isFilterPopupOpen()&&this.getFilter(e.target,t,!0)}},e.prototype.getFilter=function(e,t,i){var n=this.getFilterPop();n?n.style.display=!me.isDevice&&i?"none":"block":this.parent.notify("filterOpen",{col:this.targetColumn,target:e,isClose:i,id:t})},e.prototype.setPosition=function(e,t){var i=this.parent.element.getBoundingClientRect(),n=e.getBoundingClientRect(),r=n.left-i.left,o=n.top-i.top;i.height<o?o=o-t.offsetHeight+n.height:i.height<o+t.offsetHeight&&(o=i.height-t.offsetHeight),window.innerHeight<t.offsetHeight+o+i.top&&(o=window.innerHeight-t.offsetHeight-i.top),r+=this.parent.enableRtl?-t.offsetWidth:n.width,i.width<=r+t.offsetWidth?r-=n.width+t.offsetWidth:r<0&&(r+=t.offsetWidth+n.width),t.style.top=o+"px",t.style.left=r+"px"},e.prototype.filterPosition=function(e){var t=this.getFilterPop();if(t.classList.add(this.WRAP),!me.isDevice){var i=t.style.display;t.style.cssText+="display:block;visibility:hidden";var n=this.element.querySelector("."+this.FILTER);n&&(this.setPosition(n.parentElement,t),t.style.cssText+="display:"+i+";visibility:visible")}},e.prototype.getDefault=function(){var e=[];return this.parent.ensureModuleInjected(Ld)&&(e.push("AutoFitAll"),e.push("AutoFit")),this.parent.allowGrouping&&this.parent.ensureModuleInjected(Lw)&&(e.push("Group"),e.push("Ungroup")),this.parent.allowSorting&&this.parent.ensureModuleInjected(Ow)&&(e.push("SortAscending"),e.push("SortDescending")),e.push("ColumnChooser"),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(dw)&&e.push("Filter"),e},e.prototype.isFilterPopupOpen=function(){var e=this.getFilterPop();return e&&"none"!==e.style.display},e.prototype.getFilterPop=function(){return me.isDevice&&null!==this.targetColumn&&"Menu"===this.parent.filterSettings.type?document.getElementById(this.targetColumn.uid+"-flmdlg"):this.parent.element.querySelector("."+this.POP)},e.prototype.isFilterItemAdded=function(){return this.parent.columnMenuItems&&this.parent.columnMenuItems.indexOf("Filter")>=0||!this.parent.columnMenuItems},e}(),eE=function(){function e(e){Pa.Inject($D),this.parent=e}return e.prototype.getColumnMenu=function(){return this.parent.grid.columnMenuModule.getColumnMenu()},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"columnMenu"},e}(),tE=function(){function e(e){hp.Inject(eE),this.parent=e}return e.prototype.getColumnMenu=function(){return this.parent.treeGrid.columnMenuModule.getColumnMenu()},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"columnMenu"},e}(),iE=function(){function e(e){this.parent=e,hp.Inject(cw),this.parent.treeGrid.allowFiltering=this.parent.allowFiltering,this.updateCustomFilters(),this.parent.treeGrid.filterSettings=Ua(this.parent.filterSettings),this.addEventListener()}return e.prototype.getModuleName=function(){return"filter"},e.prototype.updateCustomFilters=function(){for(var e=this.parent.taskFields,t=0;t<this.parent.ganttColumns.length;t++){var i=this.parent.ganttColumns[t];("datepickeredit"!==i.editType&&"datetimepickeredit"!==i.editType||i.field!==e.startDate&&i.field!==e.endDate&&i.field!==e.baselineStartDate&&i.field!==e.baselineEndDate)&&(i.field!==e.duration||"stringedit"!==i.editType)||this.initiateFiltering(this.parent.ganttColumns[t])}},e.prototype.updateModel=function(){this.parent.filterSettings=this.parent.treeGrid.filterSettings},e.prototype.addEventListener=function(){this.parent.on("updateModel",this.updateModel,this),this.parent.on("actionBegin",this.actionBegin,this),this.parent.on("actionComplete",this.actionComplete,this),this.parent.on("columnMenuOpen",this.columnMenuOpen,this)},e.prototype.initiateFiltering=function(e){var t=this.parent.getColumnByField(e.field,this.parent.treeGridModule.treeGridColumns);e.allowFiltering=!1!==e.allowFiltering,e.allowFiltering&&"Menu"===this.parent.filterSettings.type&&!e.filter&&(e.filter={ui:this.getCustomFilterUi(e)}),t&&(t.allowFiltering=e.allowFiltering,t.filter=e.filter)},e.prototype.getCustomFilterUi=function(e){var t=this.parent.taskFields,i={};return"datepickeredit"!==e.editType||e.field!==t.startDate&&e.field!==t.endDate&&e.field!==t.baselineStartDate&&e.field!==t.baselineEndDate?"datetimepickeredit"!==e.editType||e.field!==t.startDate&&e.field!==t.endDate&&e.field!==t.baselineStartDate&&e.field!==t.baselineEndDate?e.field===t.duration&&"stringedit"===e.editType&&(i=this.getDurationFilter()):i=this.getDateTimePickerFilter():i=this.getDatePickerFilter(e.field),i},e.prototype.getDatePickerFilter=function(e){var t,i=this,n=this.parent,r=e===n.taskFields.startDate||e===n.taskFields.baselineStartDate?n.defaultStartTime:n.defaultEndTime;return{create:function(e){var n=kl(e.column.format,e.column.type),r=ct("input",{className:"flm-input"});e.target.appendChild(r),(t=new nu({placeholder:i.parent.localeObj.getConstant("enterValue"),format:n})).appendTo(r)},write:function(e){t.value=e.filteredValue},read:function(e){t.value&&t.value.setSeconds(r),e.fltrObj.filterByColumn(e.column.field,e.operator,t.value)}}},e.prototype.getDateTimePickerFilter=function(){var e,t=this;return{create:function(i){var n=kl(i.column.format,i.column.type),r=ct("input",{className:"flm-input"});i.target.appendChild(r),(e=new Cu({placeholder:t.parent.localeObj.getConstant("enterValue"),format:n})).appendTo(r)},write:function(t){e.value=t.filteredValue},read:function(t){t.fltrObj.filterByColumn(t.column.field,t.operator,e.value)}}},e.prototype.getDurationFilter=function(){var e,t=this,i=this.parent,n="";return{create:function(i){var n=ct("input",{className:"e-input"});n.setAttribute("placeholder",t.parent.localeObj.getConstant("enterValue")),i.target.appendChild(n),(e=new Ac).appendTo(n)},write:function(t){e.value=t.filteredValue?n:""},read:function(r){var o=t.parent.dataOperation.getDurationValue(e.value),s=a("duration",o),l=a("durationUnit",o);if(s>=0){var h=void 0;"minute"===l?h=60*s/i.secondsPerDay:"hour"===l?h=60*s*60/i.secondsPerDay:(h=s,l="day"),r.fltrObj.filterByColumn(r.column.field,r.operator,h),n=t.parent.dataOperation.getDurationString(s,l)}else r.fltrObj.filterByColumn(r.column.field,r.operator,null),n=null}}},e.prototype.columnMenuOpen=function(e){this.filterMenuElement&&document.body.contains(this.filterMenuElement)&&Ct(this.filterMenuElement),this.filterMenuElement=null},e.prototype.actionBegin=function(e){},e.prototype.closeFilterOnContextClick=function(e){this.filterMenuElement&&document.body.contains(this.filterMenuElement)&&(this.filterMenuElement.contains(e)||(Ct(this.filterMenuElement),this.parent.treeGrid.grid.notify("filter-menu-close",{isOpen:!1}),this.filterMenuElement=null))},e.prototype.actionComplete=function(e){if("filterafteropen"===e.requestType){this.filterMenuElement=a("filterModel.dlgObj.element",e),this.updateFilterMenuPosition(this.filterMenuElement,e);var t=this.parent.taskFields.id,i=this.parent.taskFields.dependency,n=this.parent.taskFields.resourceInfo,r=a("values",this.parent.treeGrid.grid.filterModule);if(e.columnName===i&&g(a(i,r))||e.columnName===n&&g(a(n,r)))(o=a("ej2_instances[0]",this.filterMenuElement.querySelector(".e-dropdownlist"))).index=2,o.dataBind();else if(e.columnName===t&&g(a(t,r))){var o;!g(o=a("ej2_instances[0]",this.filterMenuElement.querySelector(".e-numerictextbox")))&&g(this.parent.columnByField[e.columnName].format)&&(o.format="n")}}},e.prototype.setPosition=function(e,t){var i=this.parent.element.getBoundingClientRect(),n=e.getBoundingClientRect(),r=n.right+window.scrollX,o=n.top+window.scrollY;i.right<r+t.offsetWidth&&(n.left-t.offsetWidth>i.left?r=n.left-t.offsetWidth:r-=r+t.offsetWidth-i.right),t.style.top=o+"px",t.style.left=r+"px"},e.prototype.updateFilterMenuPosition=function(e,t){var i;ut([e],"e-gantt"),document.body.appendChild(e),this.parent.showColumnMenu?(i=document.querySelector("#treeGrid"+this.parent.controlId+"_gridcontrol_colmenu_Filter"),e.style.zIndex=i.parentElement.style.zIndex,this.setPosition(i,a("filterModel.dlgObj.element",t))):ul(i=this.parent.treeGrid.grid.getColumnHeaderByField(t.columnName).querySelector(".e-filtermenudiv"),a("filterModel.dlgObj",t),this.parent.treeGrid.grid),e.querySelector(".e-valid-input").focus()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updateModel",this.updateModel),this.parent.off("actionBegin",this.actionBegin),this.parent.off("actionComplete",this.actionComplete),this.parent.off("columnMenuOpen",this.columnMenuOpen))},e.prototype.destroy=function(){this.removeEventListener()},e}(),nE=i(12),rE=i.n(nE);Td.Inject(Ad,Dw,Ew,Iw,Mw,xD,ZD,tE,iE);var oE=screen.availHeight-200;







window.BaseGanttChart=class e
{  
     constructor(e,t,i,n,r,o,j,s)
     {
         
        console.log("BaseGanttChart instance is created"),


this.dropdownDataSource = [
    { text: 'USD', value: 'USD' },
    { text: 'GBP', value: 'GBP' },
    { text: 'EUR', value: 'EUR' }
];




         this.divId=e,
         this.dataUrl=t,
         this.recourseUrl=i,this.tenancyId=n,this.projectId=r,this.type=o,this.epicId=j,this.sprintId=s






// Define the dropdown data array
var dropdownOptionsData = [{ text: 'USD', value: 'USD' }, { text: 'GBP', value: 'GBP' }, { text: 'EUR', value: 'EUR' }];

// Create a new DataManager instance specifically for the dropdown
var dropdownOptionsManager = new ej.data.DataManager({
    json: dropdownOptionsData,
    adaptor: new ej.data.JsonAdaptor()
});

// Test the dropdown DataManager with a simple query to make sure it works correctly
var dropdownQuery = new ej.data.Query().select(['text']);
var dropdownQueryResult = dropdownOptionsManager.executeLocal(dropdownQuery);

console.log(dropdownQueryResult);  // Check the output in the console to ensure it's returning the expected data



     }
     async init(){await 
     this.initGanttData(),
     this.createGantt()}
     



     async initGanttData()
     {
        let e=this.getDataManager(this.recourseUrl).executeQuery(new on),
        t=this.getDataManager(this.dataUrl).executeQuery(new on);
        


        this.projectResource=(await e).result.result,
        this.dataSource=(await t).result.result,


        console.log("Result::"+this.dataSource);
       // console.log("Activity Types:", response.actual.activityTypes);




 console.log("Dropdowns1::"+this.dropdownDataSource);




     }
     





     getDataManager(e)
     {return new yn(
        {url:e,adaptor:new dn,batchUrl:this.dataUrl,headers:[{P_TENANCY_ID:this.tenancyId},{P_PROJECT_ID:this.projectId},{P_TYPE:this.type},{P_EPIC_ID:this.epicId},{P_SPRINT_ID:this.sprintId}],
          crossDomain:!0})
     }
      createGantt()
   // console.log("Dropdowns3::"+this.dropdownDataSource);
      {this.ganttChart=new Td(e.getGanttOptions(this)),this.ganttChart.appendTo("#"+this.divId) 
      }




      
      static indentOutdentShow(e)
      {
         if(e.selectionModule&&e.selectionModule.getSelectedRowIndexes().length>1)
         {let t=4,i=5;e.toolbarModule.toolbar.hideItem(t,!1),e.toolbarModule.toolbar.hideItem(i,!1);let n=e.selectionModule.getSelectedRecords();
            for(let r of n)
            {
              if(0===r.index)return e.toolbarModule.toolbar.hideItem(t,!0),void e.toolbarModule.toolbar.hideItem(i,!0);r.level<1&&e.toolbarModule.toolbar.hideItem(i,!0);
              let n=e.currentViewData[r.index-1];r.level>n.level&&e.toolbarModule.toolbar.hideItem(t,!0)
            }
         }
      }
      
      static doRefresh(e)
      {
          e.refresh();
      }
     
      static fitProjectForPdf(e)
      {console.log("FIT PROJECT FOR PDF IS ACTIVE"),e.timelineModule.isZoomToFit=!0,e.timelineModule.isZooming=!1,e.zoomingProjectStartDate||(e.zoomingProjectStartDate=e.cloneProjectStartDate,e.zoomingProjectEndDate=e.cloneProjectEndDate),e.dataOperation.calculateProjectDates();var t,i,n,r=1200/((e.cloneProjectEndDate.getTime()-e.cloneProjectStartDate.getTime())/864e5),
        o=e.zoomingLevels.slice().sort((function(e,t){return e.perDayWidth<t.perDayWidth?1:-1}));
        if(0!==r)
        {
          for(var s=0;s<o.length;s++)
          {
             if(i=o[s],s===o.length-1)
             {
                t=o[s];break
             }
             if(n=o[s+1],r>=i.perDayWidth)
             {
                t=o[s];break
              }
             if(r<i.perDayWidth&&r>n.perDayWidth)
             {t=o[s+1];break}
          }
          var a=u({},{},t,!0);
          e.timelineModule.roundOffDateToZoom(e.cloneProjectStartDate,!0,r,a.bottomTier.unit),e.timelineModule.roundOffDateToZoom(e.cloneProjectEndDate,!1,r,a.bottomTier.unit);
          var l=e.timelineModule.calculateNumberOfTimelineCells(a);a.timelineUnitSize=Math.abs(950)/l;
          var h={requestType:"beforeZoomToProject",timeline:a};
          e.toolbarModule&&e.toolbarModule.enableItems([e.controlId+"_zoomin",e.controlId+"_zoomout"],!0),e.trigger("actionBegin",h),e.timelineModule.changeTimelineSettings(a),e.ganttChartModule.updateScrollLeft(0)
       }}
       
       static exportPdf(t,i){
            document.getElementById(i.divId).insertAdjacentHTML("afterend",'<div id="GanttForPDF" style="visibility:hidden"></div>');
            let n=document.getElementById("GanttForPDF");const r=rE.a.cloneDeep(e.getGanttOptions(i));
            r.dataSource=rE.a.cloneDeep(t.dataSource);
            let o=new Td(r);o.appendTo("#GanttForPDF"),setTimeout(()=>{e.fitProjectForPdf(o),o.pdfExport({enableFooter:!1,pageSize:"A2"}).then((function(){o.destroy(),n.remove()}))},2e3)
        }
        static getGanttOptions(t){
                    var ActivityTypeElem;
        var ActivityTypeObj;
        var ActivityType = [
          { activityTypeName: "Activity" },
          { activityTypeName: "Milestone" },
          { activityTypeName: "Stage" },
        ];
            const i={dataSource:t.dataSource,dateFormat:"MMM dd, y",resourceNameMapping:"resourceName",resourceIDMapping:"resourceId",resources:t.projectResource,allowResizing:!0,enableTaskbarTooltip:!0,
          
  





//These taskfields are not all available in the grid, maybe these are just data definitions
            
           taskFields:
            {
            	id:"TaskID",
            	name:"TaskName",
            	startDate:"StartDate",
            	endDate:"EndDate",
            	duration:"Duration",
            activitytype:"ActivityType",
            progress:"Progress",
            dependency:"Predecessor",
            child:"subtasks",
            parentID:"ParentId",
            notes:"info",
            resourceInfo:"resources",
            index:"sort_order",
            milestone:"Milestone",
            durationUnit:"DurationUnit"},
                     
				
					//edit settings
                     selectedRowIndex:0,

                     editSettings:{allowEditing:!0,allowDeleting:!0,allowTaskbarEditing:!0,allowColumnResize:!0,allowSorting:!0,showDeleteConfirmDialog:!0,mode:"Auto"},
                    

                     showColumnMenu:!0,allowPdfExport:!0,
                     beforePdfExport:function(e)
                    {this.chartRowsModule.taskBarHeight=10,this.rowHeight=30},

                    // Toolbar config commentJL
                    toolbar:[{text:"Add Task",tooltipText:"Add Task",id:"addTask",prefixIcon:"e-add"},"Cancel","Delete","Edit","Indent","Outdent","CollapseAll","ExpandAll","Search","Update","ZoomIn","ZoomOut","ZoomToFit","PdfExport",
                    	{text:"Link Tasks",tooltipText:"Chain",id:"chain",prefixIcon:"e-link"}],
                      

                      toolbarClick:function(i)
                      {
                      

                        if ("Gantt_pdfexport" === i.item.id) {
                        var ganttChart = document.getElementById("GanttDemo").ej2_instances[0]; // Adjust this ID to match your actual Gantt chart's ID
                         if (ganttChart) {
                                            BaseGanttChart.exportPdf(obj, {"divId": "GanttDemo"});
                            
                            } 
                            else {
                            console.error("Failed to access Gantt chart instance for PDF export.");
                                 }
                            }


                         else if("chain"===i.item.id)
                         {
                            const e=this.selectionModule.getSelectedRecords();
                            for(let t=1;t<e.length;t++)
                            {
                                let n=e[t-1].TaskID+"FS";!1===this.connectorLineEditModule.validatePredecessorRelation(e[t],n)?(alert("Cannot create a circular dependency â€“ Action blocked"),
                                	i.cancel=!0):this.connectorLineEditModule.addPredecessor(e[t],e[t-1].TaskID)
                            }
                        }
                       


                        else if("addTask"===i.item.id){

				var cure = 0;
				

					//let i={action:"batch",added:[{
					

let i = {
    action: "added", added:[{

					Duration: 15,
					DurationUnit: "day",
					EndDate: "2024-09-27T06:00:00.233Z",
					//ParentId: this.selectionModule.getSelectedRecords()[0].TaskID,
					ParentId: this.selectionModule.getSelectedRecords()[0].ParentId,
                    sort_order: this.selectionModule.getSelectedRecords()[0].sort_order,
                   // Sort_order: 5,
					Progress: 0,
					StartDate: "2024-09-22T06:00:00.233Z",
					// TaskName: "New Activity",   
					info: null
					}]};
                               

// Log the data being sent - at this point correct sort_order is sent for parent
console.log("Sending AJAX request with data:", i);

// newRow process
$.ajax({
    url: t.dataUrl,  // Ensure this is the correct endpoint URL
    type: "POST",
    dataType: "json",  // Make sure dataType is correctly spelled
    headers: {
        P_TENANCY_ID: t.tenancyId,
        P_PROJECT_ID: t.projectId,
        P_TYPE: t.type,
        P_EPIC_ID: this.epicId,
        P_SPRINT_ID: this.sprintId
    },
    crossDomain: true,
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify(i),
    success: function(data) 

    {
        console.log("Received data:", data);
        
        // Enable adding new records if required by your UI component's logic
        this.editSettings.allowAdding = true;
        
        if (data.addedRecords && data.addedRecords.length > 0) {
            let newTaskDetails = data.addedRecords[0];  // First new record
            console.log("New task details:", newTaskDetails);

            // Determine the position based on the selected records
            let position = this.selectionModule.getSelectedRecords()[0].childRecords.length > 0 ? "Child" : "Below";



      console.log("Before Construct:", newTaskDetails);



            // Construct new record for the UI component
            let newRecord = {
                TaskID: newTaskDetails.TaskID,
               // TaskName: newTaskDetails.TaskName || "Type here", // Default name if none provided
              //   TaskName: newTaskDetails.TaskName ?? null,
               // StartDate: new Date(newTaskDetails.StartDate),
              StartDate: "2024-09-22T06:00:00.233Z",
              //  EndDate: new Date(newTaskDetails.EndDate),
                Duration: 5,
              //  Progress: newTaskDetails.Progress || 0, // Default progress if none provided
               // Milestone: newTaskDetails.ActivityType === "Milestone",
              //  DurationUnit: newTaskDetails.DurationUnit || "day", // Default duration unit if none provided
                ParentId: newTaskDetails.ParentId,
                sort_order: newTaskDetails.sort_order // Ensure to handle other attributes if needed
            };

             console.log("Before adding:", newTaskDetails);

            // Add the new record to the UI component
            this.addRecord(newRecord, position);
 console.log("after adding:", newTaskDetails);

        } else {
            console.error("No new tasks found or addedRecords is empty:", data);
        }
    }.bind(this), // Ensure this is correctly bound in the callback
    error: function(xhr, status, error) {
        console.error("AJAX error:", status, error);
    }
});






                             
                            
                            var obj = document.getElementById('GanttDemo').ej2_instances[0];
                            //obj.refresh();
                            this.editSettings.allowAdding=!1


                          
                        }
                        else if("GanttDemo_indent"===i.item.id)
                        {
                          if(this.selectionModule&&this.selectionModule.getSelectedRowIndexes().length>1)
                          {
                             const e=this.selectionModule;
                                let t=e.getSelectedRecords(),i=e.getSelectedRowIndexes(),n={};
                                for(let e of t)
                                {
                                     let t=this.currentViewData[e.index-1];
                                     if(i.includes(t.index)&&e.level===t.level)n.hasOwnProperty(t.index)?n[e.index]=n[t.index]:n[e.index]="not allowed";
                                     else if(e.level>t.level)n[e.index]="not allowed";
                                     else if(e.level<t.level)
                                     {let i=this.getTaskByUniqueID(t.parentItem.uniqueID);
                                       for(let t=0;t<this.currentViewData.length;t++)
                                                this.currentViewData[t].taskData===i.taskData&&(n[e.index]=t)
                                      }
                                      else n[e.index]=e.index-1
                                }
                                let r={};
                                for(let e of Object.keys(n))"not allowed"!=n[e]&&(r.hasOwnProperty(n[e])||(r[n[e]]=[]),r[n[e]].push(e));
                                for(let e of Object.keys(r))this.editModule.indentOutdentRow(r[e],e,"child")
                            }
                       }
                       else if("GanttDemo_outdent"===i.item.id&&this.selectionModule&&this.selectionModule.getSelectedRowIndexes().length>1)
                       {
                            var n=this.selectionModule.getSelectedRecords(),r=this.selectionModule.getSelectedRowIndexes(),o={};
                            for(let e of n)
                            {
                               let t=this.currentViewData[e.index-1];
                               if(r.includes(t.index)&&e.level===t.level)o.hasOwnProperty(t.index)&&(o[e.index]=o[t.index]);else if(e.level>0&&e.index>0)
                               {
                                 let t=this.getTaskByUniqueID(e.parentItem.uniqueID);
                                 for(let i=0;i<this.currentViewData.length;i++)this.currentViewData[i].taskData===t.taskData&&(o[e.index]=i)
                                }
                             }
                             let e={};
                             for(let t of Object.keys(o))e.hasOwnProperty(o[t])||(e[o[t]]=[]),e[o[t]].push(t);
                             for(let t of Object.keys(e))this.editModule.indentOutdentRow(e[t],t,"below")}},
                             rowSelected:function(t){e.indentOutdentShow(this)},
                             rowDeselected:function(t)
                             {
                                  e.indentOutdentShow(this)
                             }
                            
                       



// Changed grid lines CommentJL
,allowSelection: true, 
selectionSettings: { mode: "Row", type: "Multiple", enableToggle: false }, // ENABLING TOGGLE BREAKS MULTI SELECT INDENT
gridLines: "Vertical", // Vertical, Horizontal, Both, None
height: oE + "px", 
treeColumnIndex: 1,
timelineSettings: {
    updateTimescaleView: true, 
    topTier: { unit: "Week", format: "MMM dd, y" }, 
    bottomTier: { unit: "Day" }
},





//This part controls column headings - CommentJL


                        columns:[
                             {field:"TaskID",autoFit:!0,isPrimaryKey:!0, visible: false}, // set invisible but is still needed as UI needs to use the taskID in functions
                             {field:"TaskName",headerText:"Name",width:"430",clipMode:"EllipsisWithTooltip"},
                             {field:"StartDate",autoFit:!0},
                             {field:"EndDate",autoFit:!0},
                             {field:"Duration",textAlign:"Right",autoFit:!0},
                             {field:"Progress",autoFit:!0},
                             {
                                field: "ActivityType",
                                headerText: "Activity Type",
                                autoFit: !0,
                                edit: {
                                  create: function () {
                                    ActivityTypeElem = document.createElement("input");
                                    return ActivityTypeElem;
                                  },
                                  read: function () {
                                    return ActivityTypeObj.text;
                                  },
                                  destroy: function () {
                                      ActivityTypeObj.destroy();
                                  },
                                  write: function () {
                                    ActivityTypeObj = new ej.dropdowns.DropDownList({
                                      dataSource: ActivityType,
                                      fields: { text: "activityTypeName" },
                                      placeholder: "Please Select a Activity Type ...",
                                      floatLabelType: "Never",
                                    });
                                    ActivityTypeObj.appendTo(ActivityTypeElem);
                                  },
                                },
                              },
                            //  {
                            //     field: 'ActivityType',
                            //     editType: 'dropdownedit',
                            //     width: 150,
                            //     edit: {
                            //         params: {
                            //             query: new ej.data.Query(),
                            //             dataSource: [{ text: '<Milestone' }, { text: 'Stage'}, { text: 'EUR'}],
                            //             ields:{text:'text',value:'text'}  
                            //         }  
                            //     }
                            // },



                             {field:"sort_order",autoFit:!0, visible: false}],
                             



                             splitterSettings:{position:"45%"},

                             eventMarkers:[{day:"05/05/2024",label:"First Meeting"},{day:"05/15/2020",label:"Second Meeting"},{day:"09/22/2024",label:"Today"}],
                             
                             // Labels for the gantt region
                             labelSettings:{leftLabel:"TaskName",rightLabel:"Duration"}

                             // set tabs for sync fusion dialog edit
                             ,editDialogFields:[{type:"General",headerText:"General"},{type:"Resources"},{type:"Dependency"},{type:"Notes"}]
                             ,enableContextMenu:!0,connectorLineWidth:2,filterSettings:{ignoreAccent:!0},allowFiltering:!0,
                             dataBound:function(e){this.timelineModule.processZoomToFit()}
                             

                             ,rowHeight:29, //was 24 - CommentJL




                             rowDragStartHelper:function(e){0==e.data[0].level&&(e.cancel=!0)} 

                            ,rowDrop:function(e){console.log(e),0==e.dropIndex?e.cancel=!0:setTimeout((function(){if(0==e.data[0].level)e.cancel=!0;
                             else{var i=new Object;i.action="RowDrop",i.dragTaskId=e.data[0].TaskID,i.dragTaskParentId=e.data[0].parentItem.taskId,i.dropTaskId=e.dropRecord.TaskID,i.dropTaskParentId=e.dropRecord.parentItem.taskId,i.dropPosition=e.dropPosition,
                             


                             $.ajax({url:t.dataUrl,type:"POST",datatype:"json",headers:{P_TENANCY_ID:t.tenancyId,P_PROJECT_ID:t.projectId,P_TYPE:t.type,P_EPIC_ID:this.epicId,P_SPRINT_ID:this.sprintId}
                             ,crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(i)})}}),100)},
                             allowRowDragAndDrop:!0,workWeek:["Monday","Tuesday","Wednesday","Thursday","Friday"],highlightWeekends:!0,
                             

                             taskbarEditing:function(e){console.log(e),1==e.data.hasChildRecords&&(e.cancel=!0)},
                             taskbarEdited:function(e)
                             


                             {if(this.selectionModule.selectRow(e.data.index),"ParentDrag"===e.taskBarEditAction)
                             	{let i={action:"batch",changed:e.data.childRecords};
                               	  $.ajax({url:t.dataUrl,type:"POST",datatype:"json",
                               	  headers:{P_TENANCY_ID:t.tenancyId,P_PROJECT_ID:t.projectId,P_TYPE:t.type,P_EPIC_ID:this.epicId,P_SPRINT_ID:this.sprintId},
                               	  crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(i)})
                             	}
                             	else
                             	{
                               	  let i={action:"batch",changed:[e.data.taskData]};
                               	  $.ajax({url:t.dataUrl,type:"POST",datatype:"json",headers:{P_TENANCY_ID:t.tenancyId,P_PROJECT_ID:t.projectId,P_TYPE:t.type,P_EPIC_ID:this.epicId,P_SPRINT_ID:this.sprintId}
                               	  ,crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(i)})
                              	}
                   	    },
                            actionBegin:function(e){

			    

			   },

                            beginEdit:function(e)
                            {
                              
                            }
                           ,actionComplete:function(e){
                            if(console.log(e),"add"===e.requestType)
                            {
                              
                                
                           }
                   


               else if("DrawConnectorLine"===e.action)
              {
                  let i={action:"batch",changed:[e.data.taskData]};
                  $.ajax({url:t.dataUrl,type:"POST",datatype:"json",headers:{P_TENANCY_ID:t.tenancyId,P_PROJECT_ID:t.projectId,P_TYPE:t.type,P_EPIC_ID:this.epicId,P_SPRINT_ID:this.sprintId}
                 ,crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(i)})
             }
             else if("CellEditing"===e.action||"DialogEditing"===e.action)
            {
		console.log("CELL EDITING");
		console.log(e.data.taskData);

		let taskDataUpdated = e.data.taskData;
		if(typeof taskDataUpdated.ParentId === "string"){
	taskDataUpdated.ParentId = parseInt(taskDataUpdated.ParentId);
}
	if(!taskDataUpdated.hasOwnProperty("ActivityType")){
		taskDataUpdated.ActivityType = "Milestone";
}
              let i={changed:[taskDataUpdated],action:"batch"};	
              $.ajax({url:t.dataUrl,type:"POST",datatype:"json",headers:{P_TENANCY_ID:t.tenancyId,P_PROJECT_ID:t.projectId,P_TYPE:t.type,P_EPIC_ID:this.epicId,P_SPRINT_ID:this.sprintId},
                  crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(i)})
            }
            else if("indented"===e.requestType||"outdented"===e.requestType)
            {   
                console.log(e);
                for(let i of e.data)
                {
                    let n={action:e.requestType,record:i};
                    $.ajax({url:t.dataUrl,type:"POST",datatype:"json",
                    headers:{P_TENANCY_ID:t.tenancyId,P_PROJECT_ID:t.projectId,P_TYPE:t.type,P_EPIC_ID:this.epicId,P_SPRINT_ID:this.sprintId},
                    crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(n)})
                }
           }
           else if("delete"===e.action){
                console.log(e); 
                for(let i of e.data) 
               {
                  let n={changed:e.modifiedTaskData,deleted:[i],action:"batch"};
                       $.ajax({url:t.dataUrl,type:"POST",datatype:"json",
                       headers:{P_TENANCY_ID:t.tenancyId,P_PROJECT_ID:t.projectId,P_TYPE:t.type,P_EPIC_ID:this.epicId,P_SPRINT_ID:this.sprintId},crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(n)})
                }
              }
     }};
      return rE.a.cloneDeep(i)
   }}}]);
